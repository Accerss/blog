{"meta":{"version":1,"warehouse":"4.0.2"},"models":{"Asset":[{"_id":"themes/keep/source/images/favicon.bak.png","path":"images/favicon.bak.png","modified":0,"renderable":1},{"_id":"themes/keep/source/images/avatar.png","path":"images/avatar.png","modified":0,"renderable":1},{"_id":"themes/keep/source/images/avatar.svg","path":"images/avatar.svg","modified":0,"renderable":1},{"_id":"themes/keep/source/images/bg.svg","path":"images/bg.svg","modified":0,"renderable":1},{"_id":"themes/keep/source/images/loading.svg","path":"images/loading.svg","modified":0,"renderable":1},{"_id":"themes/keep/source/images/logo.png","path":"images/logo.png","modified":0,"renderable":1},{"_id":"themes/keep/source/images/logo.svg","path":"images/logo.svg","modified":0,"renderable":1},{"_id":"themes/keep/source/images/favicon.png","path":"images/favicon.png","modified":0,"renderable":1},{"_id":"themes/keep/source/js/back2top.js","path":"js/back2top.js","modified":0,"renderable":1},{"_id":"themes/keep/source/js/click.js","path":"js/click.js","modified":0,"renderable":1},{"_id":"themes/keep/source/js/header-shrink.js","path":"js/header-shrink.js","modified":0,"renderable":1},{"_id":"themes/keep/source/js/code-copy.js","path":"js/code-copy.js","modified":0,"renderable":1},{"_id":"themes/keep/source/js/lazyload.js","path":"js/lazyload.js","modified":0,"renderable":1},{"_id":"themes/keep/source/js/left-side-toggle.js","path":"js/left-side-toggle.js","modified":0,"renderable":1},{"_id":"themes/keep/source/js/dark-light-toggle.js","path":"js/dark-light-toggle.js","modified":0,"renderable":1},{"_id":"themes/keep/source/js/toc.js","path":"js/toc.js","modified":0,"renderable":1},{"_id":"themes/keep/source/js/utils.js","path":"js/utils.js","modified":0,"renderable":1},{"_id":"themes/keep/source/css/font-awesome.min.css","path":"css/font-awesome.min.css","modified":0,"renderable":1},{"_id":"themes/keep/source/js/main.js","path":"js/main.js","modified":0,"renderable":1},{"_id":"themes/keep/source/css/style.styl","path":"css/style.styl","modified":0,"renderable":1},{"_id":"themes/keep/source/js/local-search.js","path":"js/local-search.js","modified":0,"renderable":1},{"_id":"themes/keep/source/webfonts/fa-brands-400.eot","path":"webfonts/fa-brands-400.eot","modified":0,"renderable":1},{"_id":"themes/keep/source/webfonts/fa-brands-400.ttf","path":"webfonts/fa-brands-400.ttf","modified":0,"renderable":1},{"_id":"themes/keep/source/webfonts/fa-brands-400.svg","path":"webfonts/fa-brands-400.svg","modified":0,"renderable":1},{"_id":"themes/keep/source/webfonts/fa-brands-400.woff","path":"webfonts/fa-brands-400.woff","modified":0,"renderable":1},{"_id":"themes/keep/source/webfonts/fa-brands-400.woff2","path":"webfonts/fa-brands-400.woff2","modified":0,"renderable":1},{"_id":"themes/keep/source/webfonts/fa-regular-400.eot","path":"webfonts/fa-regular-400.eot","modified":0,"renderable":1},{"_id":"themes/keep/source/webfonts/fa-regular-400.svg","path":"webfonts/fa-regular-400.svg","modified":0,"renderable":1},{"_id":"themes/keep/source/webfonts/fa-regular-400.ttf","path":"webfonts/fa-regular-400.ttf","modified":0,"renderable":1},{"_id":"themes/keep/source/webfonts/fa-regular-400.woff","path":"webfonts/fa-regular-400.woff","modified":0,"renderable":1},{"_id":"themes/keep/source/webfonts/fa-regular-400.woff2","path":"webfonts/fa-regular-400.woff2","modified":0,"renderable":1},{"_id":"themes/keep/source/webfonts/fa-solid-900.ttf","path":"webfonts/fa-solid-900.ttf","modified":0,"renderable":1},{"_id":"themes/keep/source/webfonts/fa-solid-900.eot","path":"webfonts/fa-solid-900.eot","modified":0,"renderable":1},{"_id":"themes/keep/source/webfonts/fa-solid-900.svg","path":"webfonts/fa-solid-900.svg","modified":0,"renderable":1},{"_id":"themes/keep/source/webfonts/fa-solid-900.woff2","path":"webfonts/fa-solid-900.woff2","modified":0,"renderable":1},{"_id":"themes/keep/source/webfonts/fa-solid-900.woff","path":"webfonts/fa-solid-900.woff","modified":0,"renderable":1},{"_id":"themes/keep/source/js/libs/anime.min.js","path":"js/libs/anime.min.js","modified":0,"renderable":1},{"_id":"themes/keep/source/js/libs/pjax.min.js","path":"js/libs/pjax.min.js","modified":0,"renderable":1},{"_id":"themes/keep/source/css/common/keep-theme.styl","path":"css/common/keep-theme.styl","modified":0,"renderable":1},{"_id":"themes/keep/source/css/common/animated.styl","path":"css/common/animated.styl","modified":0,"renderable":1},{"_id":"themes/keep/source/css/common/markdown.styl","path":"css/common/markdown.styl","modified":0,"renderable":1},{"_id":"themes/keep/source/css/common/variables.styl","path":"css/common/variables.styl","modified":0,"renderable":1},{"_id":"themes/keep/source/css/common/basic.styl","path":"css/common/basic.styl","modified":0,"renderable":1},{"_id":"themes/keep/source/css/layout/archive-content.styl","path":"css/layout/archive-content.styl","modified":0,"renderable":1},{"_id":"themes/keep/source/css/layout/article-content.styl","path":"css/layout/article-content.styl","modified":0,"renderable":1},{"_id":"themes/keep/source/css/layout/page.styl","path":"css/layout/page.styl","modified":0,"renderable":1},{"_id":"themes/keep/source/css/layout/category-content.styl","path":"css/layout/category-content.styl","modified":0,"renderable":1},{"_id":"themes/keep/source/css/layout/category-list.styl","path":"css/layout/category-list.styl","modified":0,"renderable":1},{"_id":"themes/keep/source/css/layout/tag-content.styl","path":"css/layout/tag-content.styl","modified":0,"renderable":1},{"_id":"themes/keep/source/css/layout/home-content.styl","path":"css/layout/home-content.styl","modified":0,"renderable":1},{"_id":"themes/keep/source/css/my/mouse.styl","path":"css/my/mouse.styl","modified":0,"renderable":1},{"_id":"themes/keep/source/css/common/codeblock/highlight.styl","path":"css/common/codeblock/highlight.styl","modified":0,"renderable":1},{"_id":"themes/keep/source/css/common/codeblock/copy-code.styl","path":"css/common/codeblock/copy-code.styl","modified":0,"renderable":1},{"_id":"themes/keep/source/css/common/codeblock/code-theme.styl","path":"css/common/codeblock/code-theme.styl","modified":0,"renderable":1}],"Cache":[{"_id":"source/_data/links.yml","hash":"c812a7c3dc7ad187a12b7a7a72a23dfd4243cf10","modified":1664465315395},{"_id":"source/categories/index.md","hash":"b564abe0166daa87c3c660cb2c14da2aac7137ee","modified":1664465315403},{"_id":"source/about/index.md","hash":"7ad7d03b2b74090cba1f44305554e75ea2da38fe","modified":1664465315403},{"_id":"source/changelog/index.md","hash":"9a1e50476e41ac873b9da9b5387de841180a2275","modified":1664465315404},{"_id":"source/links/index.md","hash":"d55f865776e4ba3c4ceb25cd261a72f738af02d9","modified":1664465315405},{"_id":"source/heart/index.md","hash":"88788949cb4c0a30f1b08ecd0890bb410ad338f8","modified":1669216867661},{"_id":"source/tags/index.md","hash":"155eed058c13866fe4a670edad91eb0755e487bd","modified":1664465315405},{"_id":"source/archives/index.md","hash":"e4d9227ebcc524520f3ffd5213454a26bc05f667","modified":1664467338135},{"_id":"source/_posts/2022/10/camundaåŸºç¡€ç¯‡.md","hash":"e0876dab703edd685cad63834eb3ec79d70502da","modified":1667657819505},{"_id":"source/_posts/2022/10/goodjob.md","hash":"2e76980b9ddfa6f216d6603457fc0bbc5e0abe67","modified":1668869774824},{"_id":"source/_posts/2022/10/camundaé«˜çº§ç¯‡.md","hash":"ce1fd3b5f8ec2c51f6ff244e1ea84cdb62b87cc2","modified":1667657819507},{"_id":"source/_posts/2022/10/flowableå®æˆ˜ç¯‡.md","hash":"5b23c369e7a7d0127e1fd21e087c0e729cc0fb9d","modified":1667657819510},{"_id":"source/_posts/2022/10/flowableè¿›é˜¶ç¯‡.md","hash":"10ef410d6cd99eecd9a87f12b22d71f7f472643a","modified":1667657819512},{"_id":"source/_posts/2022/10/iot.md","hash":"6d926dfd5a1d4e1d45325d55a7dfa270c3a1fe39","modified":1664467647878},{"_id":"source/_posts/2022/09/Gitä½¿ç”¨.md","hash":"9493e15a48c6f5e50d1dfb54fa95d829bb5e5a5c","modified":1664465315396},{"_id":"source/_posts/2022/09/Lambdaè¡¨è¾¾å¼.md","hash":"cac02581346b65f8e36c2799f895a8c9442c9f6e","modified":1664465315397},{"_id":"source/_posts/2022/09/ROSå…¥é—¨æ•™ç¨‹.md","hash":"a41e9fd49ddc2ebefe95e4a0714358912e162388","modified":1664465315398},{"_id":"source/_posts/2022/09/gitå­æ¨¡å—.md","hash":"4f8527511768d0cf74f5f0ce2e1f81baae3ae3f4","modified":1664465315400},{"_id":"source/_posts/2022/09/hello-world.md","hash":"4e727a98c5a9e06cd4b0efdbceae4813f4e01059","modified":1667657819504},{"_id":"source/_posts/2022/11/äº‘åŸç”Ÿå…¥é—¨-md.md","hash":"458abea91dd9cdbc8041687d6d979e86a39d9c6d","modified":1667657819514},{"_id":"source/_posts/2022/09/è¾¹ç¼˜è®¡ç®—.md","hash":"afe0f274f828551b03fcd4c747a6ffea0dabf3f0","modified":1664465315401},{"_id":"source/_posts/2022/11/åœ¨Dockerä¸­éƒ¨ç½²ROS.md","hash":"e1c2f125bd378f00b2907ed752851b116cec63d0","modified":1668436176373},{"_id":"source/_posts/2022/11/A-multi-faceted-optimization-scheduling-framework.md","hash":"7f33f5ed690234a560a629c44c4f82409cca32dd","modified":1668436176373},{"_id":"source/_posts/2022/10/camundaè¿›é˜¶ç¯‡.md","hash":"1a7de0331f2bff9b77fdc37e5c00689b906dd338","modified":1667657819506},{"_id":"source/_posts/2022/10/flowableåŸºç¡€ç¯‡.md","hash":"9300a42ee58cd51407c3bd216b0c1f1bf6bce004","modified":1667657819509},{"_id":"source/_posts/2022/10/flowableé«˜çº§ç¯‡.md","hash":"ed7e5930719fc29105e747b68c161ea891ba8204","modified":1667657819513},{"_id":"themes/keep/.editorconfig","hash":"26a27140a04ad1873639b19f8240fb2bae367878","modified":1664465357498},{"_id":"themes/keep/.gitignore","hash":"9f5eebec6128f0029691c28190673d959cb0f234","modified":1664030904429},{"_id":"themes/keep/.npmignore","hash":"48eee50624f0ad4ed5b37ae81e95f5e5cb4c7f7f","modified":1664465472838},{"_id":"themes/keep/LICENSE","hash":"1eba7caf09a39110ad2f542e3ed8700d1a69c6d3","modified":1664465472839},{"_id":"themes/keep/package.json","hash":"a3be00d629d52f6cadde16fea48a0f68c288da07","modified":1664465472882},{"_id":"themes/keep/README_zh-TW.md","hash":"9913cf385c568a516055b27a9c944cc95263b3bc","modified":1664465472841},{"_id":"themes/keep/README_zh-CN.md","hash":"d3bfa4f8720b73455d9e77f3e918de60daca01d7","modified":1664465472840},{"_id":"themes/keep/_config.yml","hash":"8b55eae3ac7e7fc2d508d161f32a765083d3a7a9","modified":1664465472844},{"_id":"themes/keep/README.md","hash":"06ef53a5daecd42cfe7d653f9331e5ea66f1f590","modified":1664465472840},{"_id":"themes/keep/.github/FUNDING.yml","hash":"04ebd5562487625d07c01767f7b68312772bf3db","modified":1664030904429},{"_id":"themes/keep/languages/zh-CN.yml","hash":"f8b9da63093739b5b7a555e8d1aa0f30d38171dc","modified":1664465472847},{"_id":"themes/keep/layout/archive.ejs","hash":"8456f112fc12bbb1c83cd190d0ce83ee474bd297","modified":1664465472877},{"_id":"themes/keep/languages/zh-TW.yml","hash":"428b304a3ad542072bb578ed312bb06794a654e1","modified":1664465472847},{"_id":"themes/keep/layout/archive-content.ejs","hash":"89e256133a128858702f3bd0a6cf8330f5a8f2f7","modified":1664465472877},{"_id":"themes/keep/layout/category-content.ejs","hash":"9293aba389c0664335b3308cbb343e603ff1f24f","modified":1664465472878},{"_id":"themes/keep/languages/en.yml","hash":"11902f5813fc994a0620580d3caecad0bd4f4bec","modified":1664465472846},{"_id":"themes/keep/layout/category-list.ejs","hash":"17ea257cb28fb63c1e1650c157541d90a4f7fba5","modified":1664465472879},{"_id":"themes/keep/layout/category.ejs","hash":"8456f112fc12bbb1c83cd190d0ce83ee474bd297","modified":1664465472879},{"_id":"themes/keep/layout/article-content.ejs","hash":"9597d26784b62b0060950e8af2f71322013d3828","modified":1664465472878},{"_id":"themes/keep/layout/index.ejs","hash":"d04b5608fc801f00e247e7355c89a8643dc76914","modified":1664465472880},{"_id":"themes/keep/layout/home-content.ejs","hash":"c6897b9a1f88f157bf9cb935fba43a13911871eb","modified":1664465472879},{"_id":"themes/keep/layout/tags.ejs","hash":"8456f112fc12bbb1c83cd190d0ce83ee474bd297","modified":1664465472882},{"_id":"themes/keep/layout/page.ejs","hash":"ad0d0452ee61277805ac30c8d97b9bdd3d09cf89","modified":1664465472881},{"_id":"themes/keep/layout/layout.ejs","hash":"3e52fca8ee1de0024dd293f322fbbd2a5b138956","modified":1664465472880},{"_id":"themes/keep/layout/tag-content.ejs","hash":"379fad48764e11d7962f7cec730b0a6e932ef4a3","modified":1664465472881},{"_id":"themes/keep/scripts/use-source-data.js","hash":"0dcab564f400e1775af8e839d9f1a219d0c003bb","modified":1664465472885},{"_id":"themes/keep/layout/tag.ejs","hash":"8456f112fc12bbb1c83cd190d0ce83ee474bd297","modified":1664465472881},{"_id":"themes/keep/layout/_partial/article-copyright-info.ejs","hash":"2fec371f5b6f97cc6fc242aced9baacce93a6f86","modified":1664465472848},{"_id":"themes/keep/layout/_partial/archive-list.ejs","hash":"c51a44fd234c7bc5e265f6c0afe3b4c9ca665b0c","modified":1664465472848},{"_id":"themes/keep/layout/_partial/first-screen.ejs","hash":"e28d781dd6868b08e9007393495fae75c6e502aa","modified":1664465472870},{"_id":"themes/keep/layout/_partial/article-meta-info.ejs","hash":"fb04ac78cfee23b5f73b8721925e9c7fc168e2aa","modified":1664465472849},{"_id":"themes/keep/layout/_partial/footer.ejs","hash":"ab773935e9fe7a5f06d8d3691b7fc7eb779ff7d3","modified":1668436289577},{"_id":"themes/keep/layout/_partial/friends-link.ejs","hash":"e659c6a12c80ebf0cbe9f38a58425248702f8d2f","modified":1664465472871},{"_id":"themes/keep/layout/_partial/header.ejs","hash":"bb57e24ef7005175824f19ff4cb8537ce4771590","modified":1664465472872},{"_id":"themes/keep/layout/_partial/head.ejs","hash":"697eb90b6448d1dcecc0fc19f1033086697bb2f8","modified":1664465472871},{"_id":"themes/keep/layout/_partial/local-search.ejs","hash":"747cd0ac75f31c9837abcbf5e06eac5501089d96","modified":1664465472873},{"_id":"themes/keep/layout/_partial/page-template.ejs","hash":"adec4312027a76b5969e78a2dd245563e4e6333f","modified":1664465472873},{"_id":"themes/keep/layout/_partial/home-article-meta-info.ejs","hash":"f26d28c92ca79287d45cf20da6fdb0f68815c655","modified":1664465472872},{"_id":"themes/keep/layout/_partial/image-viewer.ejs","hash":"c30d3f046035b6c63ee90fc961f67cbc2d6073af","modified":1664465472872},{"_id":"themes/keep/layout/_partial/post-tools.ejs","hash":"44a271ffbfb3af5c715ab25777cc58ddf9f62f82","modified":1664465472875},{"_id":"themes/keep/layout/_partial/paginator.ejs","hash":"4183e4991a30132010d6428c9b2c51d198d268d8","modified":1664465472874},{"_id":"themes/keep/layout/_partial/progress-bar.ejs","hash":"791c78e36e4191f5a738964d4fba545be2649cea","modified":1664465472875},{"_id":"themes/keep/scripts/helpers/export-config.js","hash":"9099191029226a04aa7e633920dc3458fef940e7","modified":1664465472884},{"_id":"themes/keep/layout/_partial/scripts.ejs","hash":"ea08752ab79d3c61e31fae9dd49afc0feff6f36a","modified":1664465472876},{"_id":"themes/keep/layout/_partial/tagcloud.ejs","hash":"3c1f80ec34a4db4d242b8b1c024ffa8de0ddac78","modified":1664465472876},{"_id":"themes/keep/scripts/helpers/helper.js","hash":"9b149793aac46a1d7550ca2db49e215feffe1178","modified":1664465472884},{"_id":"themes/keep/layout/_partial/toc.ejs","hash":"27844ed7c138d907c25d0e198f5425fe0c0299b2","modified":1664465472877},{"_id":"themes/keep/scripts/filters/lazyload-handle.js","hash":"c62dc757815b23c04bfd9112136d39a7deb5709a","modified":1664465472883},{"_id":"themes/keep/scripts/filters/link-handle.js","hash":"4c8fd067eaf4cce4776413abe90a9ea3f1f04bc7","modified":1664465472883},{"_id":"themes/keep/layout/_partial/side-tools.ejs","hash":"3439e47a03651a3540541ba85d9ab0c9b456fc04","modified":1664465472876},{"_id":"themes/keep/source/images/favicon.bak.png","hash":"fc743c812f414c060f53967d1301dd1532655894","modified":1665589381797},{"_id":"themes/keep/source/images/avatar.png","hash":"89cc68415842475c97101441f8e09cc0466df56a","modified":1664465472904},{"_id":"themes/keep/source/images/avatar.svg","hash":"ff6709064f40ce3d683eb2673cc918009fb5684c","modified":1664465472904},{"_id":"themes/keep/source/images/bg.svg","hash":"fe49c289a1110973a1c089fe4a9565eb06ecc036","modified":1664465472904},{"_id":"themes/keep/source/images/loading.svg","hash":"7689011e66c78998d91784ae5abe680f76772589","modified":1664465472905},{"_id":"themes/keep/source/images/logo.svg","hash":"509c25b6e51d435b3acd6b0a85b823daf9a48363","modified":1664465472907},{"_id":"themes/keep/source/images/favicon.png","hash":"3ea21444819364d01897aa1130618213a865b48b","modified":1665589588596},{"_id":"themes/keep/source/js/back2top.js","hash":"4be3dfc5ea5d134de22dddce950204c3fc05a659","modified":1664465472907},{"_id":"themes/keep/source/js/click.js","hash":"5856365b5fb0d442d0a7871ebbbb3602990ca0ec","modified":1664465472908},{"_id":"themes/keep/source/js/header-shrink.js","hash":"5a95ba1079638342689aa31ae331b0ad29423cfb","modified":1664465472909},{"_id":"themes/keep/source/js/code-copy.js","hash":"0fa4f5c6b1b4fa2dd059a3fabd975cb5236aa68e","modified":1664465472908},{"_id":"themes/keep/source/js/left-side-toggle.js","hash":"2396af1662b0cc8bf525c7cfed2f212a752a3b20","modified":1664465472910},{"_id":"themes/keep/source/js/lazyload.js","hash":"9b1d7be063feff3a4268190575959a81604cef95","modified":1664465472909},{"_id":"themes/keep/source/js/dark-light-toggle.js","hash":"3941485684abdc9170f68b536c7cab57f03d68db","modified":1664465472908},{"_id":"themes/keep/source/js/toc.js","hash":"089573f669c7eaae7b3b88a1f4b94c630983f520","modified":1664465472912},{"_id":"themes/keep/source/js/main.js","hash":"52f9e2ccb2b93399bf2480aac989c702484b8aec","modified":1664465472911},{"_id":"themes/keep/source/js/utils.js","hash":"356c23107a336b682a7101dfc856fa6e0e6cdb76","modified":1664465472912},{"_id":"themes/keep/source/css/font-awesome.min.css","hash":"2c2236d61417d354b5cbbc907dfc9c0eb1325a7f","modified":1664465472891},{"_id":"themes/keep/source/css/style.styl","hash":"f0f0bdff6774b71b33b22b4452751c6a467f13fb","modified":1664465472903},{"_id":"themes/keep/source/js/local-search.js","hash":"a76838dbc9b3dc683b7653d0e60c2a824316d598","modified":1664465472911},{"_id":"themes/keep/source/webfonts/fa-regular-400.eot","hash":"2baa9a8aa68f1d2d4712b3c7205f9105aaf21879","modified":1664465472927},{"_id":"themes/keep/source/webfonts/fa-regular-400.ttf","hash":"d64e58981a419de52bac110c979887d34e366135","modified":1664465472930},{"_id":"themes/keep/source/webfonts/fa-regular-400.woff","hash":"26afc29d39ab9fac6d0b607be7e76db093ff7c3a","modified":1664465472930},{"_id":"themes/keep/source/webfonts/fa-regular-400.woff2","hash":"fb9648469530a05fa9aac80e47d4d6960472a242","modified":1664465472931},{"_id":"themes/keep/layout/_partial/comment/comment.ejs","hash":"3567cb1acb984e13cf7b6ac047467298cd6e98e3","modified":1664465472869},{"_id":"themes/keep/layout/_partial/comment/gitalk.ejs","hash":"cff08caa0a70bf276500ccdbf2965865399d985b","modified":1664465472870},{"_id":"themes/keep/layout/_partial/comment/twikoo.ejs","hash":"5d75b54edfcfb6112ac2c50fa7f4040e3716261d","modified":1664465472870},{"_id":"themes/keep/layout/_partial/comment/valine.ejs","hash":"1c58eb3e1f0bf06758787ff91c56924210de6665","modified":1664465357499},{"_id":"themes/keep/layout/_partial/pjax/pjax.ejs","hash":"db76ce10f71e0aed717c4734ef2efbdc4b860c16","modified":1664465472874},{"_id":"themes/keep/source/js/libs/anime.min.js","hash":"960be51132134acd65c2017cc8a5d69cb419a0cd","modified":1664465472910},{"_id":"themes/keep/source/css/common/keep-theme.styl","hash":"48acc1b0b18b5c34d758118bad135b7cea18b5a1","modified":1664465472889},{"_id":"themes/keep/source/js/libs/pjax.min.js","hash":"57ec40cb4898d7ba74a03603d608af378e5431f8","modified":1664465472911},{"_id":"themes/keep/source/css/common/animated.styl","hash":"064493c99c4d1d19803fc544251f4fbc491e7a1d","modified":1664465472886},{"_id":"themes/keep/source/css/common/variables.styl","hash":"db80d2ad6d99267bbc13abe7b11660cae04cc023","modified":1664465472890},{"_id":"themes/keep/source/css/common/basic.styl","hash":"2ecd4b0d469038a0753ad2de3eb2ba8c20f809db","modified":1664465472886},{"_id":"themes/keep/source/css/layout/archive-content.styl","hash":"254ca2715de67d5783adfae40723a7917b6d9f8a","modified":1664465472900},{"_id":"themes/keep/source/css/common/markdown.styl","hash":"73a96b2e7bdbaa1e98fd2a9928a05c56763d9064","modified":1664465472889},{"_id":"themes/keep/source/css/layout/article-content.styl","hash":"8f62a171debaa09d653328d0c76e170f82351a40","modified":1664465472900},{"_id":"themes/keep/source/css/layout/page.styl","hash":"7dda6b19e10b4c49bc79cc0ab0e1f262f5f2b1ac","modified":1664465472901},{"_id":"themes/keep/source/css/layout/category-content.styl","hash":"9af1e7fbc52aad0b4a47593813961a32a1d2b5c5","modified":1664465472900},{"_id":"themes/keep/source/css/layout/tag-content.styl","hash":"73af0b51aee119b2135dc8cd53cd3a3ad215fff6","modified":1664465472902},{"_id":"themes/keep/source/css/layout/category-list.styl","hash":"28ea212b14e664d08de4ce93db1e0153e48a11ed","modified":1664465472901},{"_id":"themes/keep/source/css/my/mouse.styl","hash":"9daa6e5ad453d14b4930d2091432e23ea36f77ce","modified":1664465472902},{"_id":"themes/keep/source/css/common/codeblock/highlight.styl","hash":"081f08ed399c4fc6227ab15109595a211693462b","modified":1664465472888},{"_id":"themes/keep/source/css/layout/home-content.styl","hash":"029336439c79ece32d25f8fee9dc018206fbcd1b","modified":1664465472901},{"_id":"themes/keep/source/css/common/codeblock/code-theme.styl","hash":"8b6131af54382b7959c255d58c52474564c91bf8","modified":1664465472887},{"_id":"themes/keep/source/css/common/codeblock/copy-code.styl","hash":"eac367ec543527a7533490fa19b451a452684614","modified":1664465472887},{"_id":"themes/keep/source/css/layout/_partial/footer.styl","hash":"0610a37f2eba1b6ee2ed138e3367d80be55c9d7d","modified":1664465472895},{"_id":"themes/keep/source/css/layout/_partial/archive-list.styl","hash":"e85adfdd6fd83d2529988da644df51ddffbc87f5","modified":1664465472891},{"_id":"themes/keep/source/css/layout/_partial/article-copyright-info.styl","hash":"ae286cb8c7e788a7d393774c9e9c394352e48e72","modified":1664465472892},{"_id":"themes/keep/source/css/layout/_partial/article-meta-info.styl","hash":"8ca83a4fe1afbb15669becebcde3ed0e12ac07bb","modified":1664465472892},{"_id":"themes/keep/source/css/layout/_partial/paginator.styl","hash":"2fbe611351cdeee678626c22aa268132693936b2","modified":1664465472898},{"_id":"themes/keep/source/css/layout/_partial/first-screen.styl","hash":"7e1c77d7c293d5583c431ca1bcec7eee2d83c10e","modified":1664465472895},{"_id":"themes/keep/source/css/layout/_partial/header.styl","hash":"e724a19e0ae3d173ae33d31054381ad7a0df7453","modified":1664465472896},{"_id":"themes/keep/source/css/layout/_partial/image-viewer.styl","hash":"fb82ac6589304cf1e3ed7ff2904108641882ddbc","modified":1664465472897},{"_id":"themes/keep/source/css/layout/_partial/page-template.styl","hash":"97768d3f95e8cf36fd3f783a5deb7e8fcaa5c67d","modified":1664465472897},{"_id":"themes/keep/source/css/layout/_partial/tagcloud.styl","hash":"39d03031033aa3bb9d3a76fdb5056966334e9221","modified":1664465472899},{"_id":"themes/keep/source/css/layout/_partial/local-search.styl","hash":"a381afa2de855d968810c4f6680436fd31c63d55","modified":1664465472897},{"_id":"themes/keep/source/css/layout/_partial/post-tools.styl","hash":"7c642dfdd54ed60aadb2f162e25c4fc5720716b7","modified":1664465472898},{"_id":"themes/keep/source/css/layout/_partial/toc.styl","hash":"c19d5833234c510ac1b8358cfcb7e33af29c3f6d","modified":1664465472899},{"_id":"themes/keep/source/css/layout/_partial/progress-bar.styl","hash":"c2b9474d130df3605578b77d76c604234a2b0f6f","modified":1664465472898},{"_id":"themes/keep/source/css/layout/_partial/side-tools.styl","hash":"f1cec5eb066c13f17d0acc997790404d059fbd3f","modified":1664465472899},{"_id":"themes/keep/source/css/layout/_partial/comment/comment.styl","hash":"9874482d9a8bf623abc28f8fa9c2bbfeb55067a6","modified":1664465472893},{"_id":"themes/keep/source/css/layout/_partial/comment/twikoo.styl","hash":"8225224a5c6d688e4ecd2e5557e8b2c5c43e2cf4","modified":1664465472894},{"_id":"themes/keep/source/css/layout/_partial/comment/gitalk.styl","hash":"09d223d23c8f032da4f156efebab46102b15942d","modified":1664465472893},{"_id":"themes/keep/source/css/layout/_partial/comment/valine.styl","hash":"dbff6bc6ecb6a20068047e6f7532e1d2df627929","modified":1664465472894},{"_id":"themes/keep/source/images/logo.png","hash":"2dcc2a490b517fc98d73dfc49394e4f9b112b8e3","modified":1664465472907},{"_id":"themes/keep/source/webfonts/fa-brands-400.woff2","hash":"f726c4275bb494a045fde059175f072de06c01df","modified":1664465472926},{"_id":"themes/keep/source/webfonts/fa-brands-400.woff","hash":"a42ac4a94f4e0e9333cdb1b2fb6c13c0ae690ff2","modified":1664465472925},{"_id":"themes/keep/source/webfonts/fa-solid-900.woff2","hash":"9b592048b9062b00f0b2dd782d70a95b7dc69b83","modified":1664465472946},{"_id":"themes/keep/source/webfonts/fa-solid-900.woff","hash":"3b86a0ce15d8d534b65e98560e321a933d310688","modified":1664465472946},{"_id":"themes/keep/source/webfonts/fa-brands-400.eot","hash":"c719f4375679ee58e156434f9ba9727be669cf07","modified":1664465472915},{"_id":"themes/keep/source/webfonts/fa-brands-400.ttf","hash":"9b49c6c5b0cbdef158ae31b2a4e4814555408389","modified":1664465472924},{"_id":"themes/keep/source/webfonts/fa-regular-400.svg","hash":"6ad2be875a79cb6efb8d7ecf6e632784906656a7","modified":1664465472929},{"_id":"themes/keep/source/webfonts/fa-solid-900.ttf","hash":"d537bf4cc7273ddb3fd754d53f2b241aeafaefe7","modified":1664465472944},{"_id":"themes/keep/source/webfonts/fa-solid-900.eot","hash":"c39b89f7fa7b66931ab02a54002db5ffcbff206c","modified":1664465472934},{"_id":"themes/keep/source/webfonts/fa-brands-400.svg","hash":"deddeac293c90f492dc8546a468871a07b83e6b3","modified":1664465472921},{"_id":"themes/keep/source/webfonts/fa-solid-900.svg","hash":"b635afc5e400633904e0a7cde3ec75cd57e403cf","modified":1664465472941}],"Category":[{"name":"ç¬”è®°","_id":"clas9ersi0004dk8f8zvc45ko"},{"name":"å¸¸ç”¨å·¥å…·","_id":"clas9ersy000udk8fg3vxby0d"},{"name":"JAVA","_id":"clas9ert10012dk8fhzsd17l7"},{"name":"åŸºç¡€çŸ¥è¯†","parent":"clas9ert10012dk8fhzsd17l7","_id":"clas9ert4001edk8ff9d68faq"}],"Data":[{"_id":"links","data":[{"name":"CZMæœ‰ç‚¹å†·","link":"https://czm.cool/","description":"CZMçš„åšå®¢","avatar":"https://img.czm.cool/avatar/avatar.png"},{"name":"PSH","link":"https://shamd.cloud/","description":"PSHçš„åšå®¢.","avatar":"https://shamd.cloud/upload/2022/07/afbb577733f46c9535dd1d6d6388278.jpg"},{"name":"KAI","link":"https://kainote.top/","description":"love artist, love code.","avatar":"https://cdn.jsdelivr.net/gh/kaix2301/pictures/img202201072101018.jpg"}]}],"Page":[{"title":"about","date":"2022-09-15T11:28:16.000Z","comment":true,"_content":"# ğŸ’¡About meï¼š æ·»åŠ ä¸»é¢˜\n\n| **ç›®æ ‡**  | æ‚¨æƒ³è¦ä»€ä¹ˆæ ·çš„æƒ³æ³•ï¼Ÿ              |\n| ------- | ----------------------- |\n| **å‚ä¸è€…** | @æåŠæ‚¨è‡ªå·±å’Œå…¶ä»–äºº              |\n| **ç›¸å…³**  | - ğŸ”— [æ’å…¥ä¸€äº›æ–‡æ¡£æˆ–é“¾æ¥]() |\n\n## çµæ„Ÿ\n\nä½¿ç”¨æ‚¨ç‚¹å‡»â€œè¿”å›â€æ—¶æ˜¾ç¤ºçš„å·¥å…·æ æ¥æ·»åŠ å›¾ç‰‡ã€è§†é¢‘ç­‰\n\n\n## æƒ³æ³•\n\nå‘å›¢é˜Ÿæå‡ºä¸€ä¸ªé—®é¢˜ï¼Œè®©äº‹æƒ…é¡ºåˆ©è¿›è¡Œ\n\n----------\n## åç»­æ­¥éª¤\n\n- [ ] æ‰“ç ´é™ˆè§„ @æŸäºº\n- [ ] ä»å¾…åŠåˆ°å®Œæˆ @æŸäºº\n","source":"about/index.md","raw":"---\ntitle: about\ndate: 2022-09-15 19:28:16\ncomment: true\n---\n# ğŸ’¡About meï¼š æ·»åŠ ä¸»é¢˜\n\n| **ç›®æ ‡**  | æ‚¨æƒ³è¦ä»€ä¹ˆæ ·çš„æƒ³æ³•ï¼Ÿ              |\n| ------- | ----------------------- |\n| **å‚ä¸è€…** | @æåŠæ‚¨è‡ªå·±å’Œå…¶ä»–äºº              |\n| **ç›¸å…³**  | - ğŸ”— [æ’å…¥ä¸€äº›æ–‡æ¡£æˆ–é“¾æ¥]() |\n\n## çµæ„Ÿ\n\nä½¿ç”¨æ‚¨ç‚¹å‡»â€œè¿”å›â€æ—¶æ˜¾ç¤ºçš„å·¥å…·æ æ¥æ·»åŠ å›¾ç‰‡ã€è§†é¢‘ç­‰\n\n\n## æƒ³æ³•\n\nå‘å›¢é˜Ÿæå‡ºä¸€ä¸ªé—®é¢˜ï¼Œè®©äº‹æƒ…é¡ºåˆ©è¿›è¡Œ\n\n----------\n## åç»­æ­¥éª¤\n\n- [ ] æ‰“ç ´é™ˆè§„ @æŸäºº\n- [ ] ä»å¾…åŠåˆ°å®Œæˆ @æŸäºº\n","updated":"2022-09-29T15:28:35.403Z","path":"about/index.html","comments":1,"layout":"page","_id":"clas9ersa0000dk8feyes6b6y","content":"<h1 id=\"ğŸ’¡About-meï¼š-æ·»åŠ ä¸»é¢˜\"><a href=\"#ğŸ’¡About-meï¼š-æ·»åŠ ä¸»é¢˜\" class=\"headerlink\" title=\"ğŸ’¡About meï¼š æ·»åŠ ä¸»é¢˜\"></a>ğŸ’¡About meï¼š æ·»åŠ ä¸»é¢˜</h1><table>\n<thead>\n<tr>\n<th><strong>ç›®æ ‡</strong></th>\n<th>æ‚¨æƒ³è¦ä»€ä¹ˆæ ·çš„æƒ³æ³•ï¼Ÿ</th>\n</tr>\n</thead>\n<tbody><tr>\n<td><strong>å‚ä¸è€…</strong></td>\n<td>@æåŠæ‚¨è‡ªå·±å’Œå…¶ä»–äºº</td>\n</tr>\n<tr>\n<td><strong>ç›¸å…³</strong></td>\n<td>- ğŸ”— <a href=\"\">æ’å…¥ä¸€äº›æ–‡æ¡£æˆ–é“¾æ¥</a></td>\n</tr>\n</tbody></table>\n<h2 id=\"çµæ„Ÿ\"><a href=\"#çµæ„Ÿ\" class=\"headerlink\" title=\"çµæ„Ÿ\"></a>çµæ„Ÿ</h2><p>ä½¿ç”¨æ‚¨ç‚¹å‡»â€œè¿”å›â€æ—¶æ˜¾ç¤ºçš„å·¥å…·æ æ¥æ·»åŠ å›¾ç‰‡ã€è§†é¢‘ç­‰</p>\n<h2 id=\"æƒ³æ³•\"><a href=\"#æƒ³æ³•\" class=\"headerlink\" title=\"æƒ³æ³•\"></a>æƒ³æ³•</h2><p>å‘å›¢é˜Ÿæå‡ºä¸€ä¸ªé—®é¢˜ï¼Œè®©äº‹æƒ…é¡ºåˆ©è¿›è¡Œ</p>\n<hr>\n<h2 id=\"åç»­æ­¥éª¤\"><a href=\"#åç»­æ­¥éª¤\" class=\"headerlink\" title=\"åç»­æ­¥éª¤\"></a>åç»­æ­¥éª¤</h2><ul>\n<li><input disabled=\"\" type=\"checkbox\"> æ‰“ç ´é™ˆè§„ @æŸäºº</li>\n<li><input disabled=\"\" type=\"checkbox\"> ä»å¾…åŠåˆ°å®Œæˆ @æŸäºº</li>\n</ul>\n","site":{"data":{"links":[{"name":"CZMæœ‰ç‚¹å†·","link":"https://czm.cool/","description":"CZMçš„åšå®¢","avatar":"https://img.czm.cool/avatar/avatar.png"},{"name":"PSH","link":"https://shamd.cloud/","description":"PSHçš„åšå®¢.","avatar":"https://shamd.cloud/upload/2022/07/afbb577733f46c9535dd1d6d6388278.jpg"},{"name":"KAI","link":"https://kainote.top/","description":"love artist, love code.","avatar":"https://cdn.jsdelivr.net/gh/kaix2301/pictures/img202201072101018.jpg"}]}},"excerpt":"","more":"<h1 id=\"ğŸ’¡About-meï¼š-æ·»åŠ ä¸»é¢˜\"><a href=\"#ğŸ’¡About-meï¼š-æ·»åŠ ä¸»é¢˜\" class=\"headerlink\" title=\"ğŸ’¡About meï¼š æ·»åŠ ä¸»é¢˜\"></a>ğŸ’¡About meï¼š æ·»åŠ ä¸»é¢˜</h1><table>\n<thead>\n<tr>\n<th><strong>ç›®æ ‡</strong></th>\n<th>æ‚¨æƒ³è¦ä»€ä¹ˆæ ·çš„æƒ³æ³•ï¼Ÿ</th>\n</tr>\n</thead>\n<tbody><tr>\n<td><strong>å‚ä¸è€…</strong></td>\n<td>@æåŠæ‚¨è‡ªå·±å’Œå…¶ä»–äºº</td>\n</tr>\n<tr>\n<td><strong>ç›¸å…³</strong></td>\n<td>- ğŸ”— <a href=\"\">æ’å…¥ä¸€äº›æ–‡æ¡£æˆ–é“¾æ¥</a></td>\n</tr>\n</tbody></table>\n<h2 id=\"çµæ„Ÿ\"><a href=\"#çµæ„Ÿ\" class=\"headerlink\" title=\"çµæ„Ÿ\"></a>çµæ„Ÿ</h2><p>ä½¿ç”¨æ‚¨ç‚¹å‡»â€œè¿”å›â€æ—¶æ˜¾ç¤ºçš„å·¥å…·æ æ¥æ·»åŠ å›¾ç‰‡ã€è§†é¢‘ç­‰</p>\n<h2 id=\"æƒ³æ³•\"><a href=\"#æƒ³æ³•\" class=\"headerlink\" title=\"æƒ³æ³•\"></a>æƒ³æ³•</h2><p>å‘å›¢é˜Ÿæå‡ºä¸€ä¸ªé—®é¢˜ï¼Œè®©äº‹æƒ…é¡ºåˆ©è¿›è¡Œ</p>\n<hr>\n<h2 id=\"åç»­æ­¥éª¤\"><a href=\"#åç»­æ­¥éª¤\" class=\"headerlink\" title=\"åç»­æ­¥éª¤\"></a>åç»­æ­¥éª¤</h2><ul>\n<li><input disabled=\"\" type=\"checkbox\"> æ‰“ç ´é™ˆè§„ @æŸäºº</li>\n<li><input disabled=\"\" type=\"checkbox\"> ä»å¾…åŠåˆ°å®Œæˆ @æŸäºº</li>\n</ul>\n"},{"title":"categories","date":"2022-09-19T06:59:53.000Z","_content":"","source":"categories/index.md","raw":"---\ntitle: categories\ndate: 2022-09-19 14:59:53\n---\n","updated":"2022-09-29T15:28:35.403Z","path":"categories/index.html","comments":1,"layout":"page","_id":"clas9ersg0002dk8f2mcfdpu2","content":"","site":{"data":{"links":[{"name":"CZMæœ‰ç‚¹å†·","link":"https://czm.cool/","description":"CZMçš„åšå®¢","avatar":"https://img.czm.cool/avatar/avatar.png"},{"name":"PSH","link":"https://shamd.cloud/","description":"PSHçš„åšå®¢.","avatar":"https://shamd.cloud/upload/2022/07/afbb577733f46c9535dd1d6d6388278.jpg"},{"name":"KAI","link":"https://kainote.top/","description":"love artist, love code.","avatar":"https://cdn.jsdelivr.net/gh/kaix2301/pictures/img202201072101018.jpg"}]}},"excerpt":"","more":""},{"title":"æ›´æ–°æ—¥å¿—","date":"2022-09-15T11:30:07.000Z","comment":true,"_content":"# ğŸ•˜ æ›´æ–°æ—¥å¿— æ·»åŠ äº‹ä»¶åç§°\n\n# 2022-09-02\n\n****\n## æ›´æ–°å†…å®¹\n\n@æåŠæ‚¨è‡ªå·±å¹¶æ·»åŠ å…¶ä»–äºº\n\n\n## è®®ç¨‹\n- ä¼šè®®è®®ç¨‹\n\n\n## è®¨è®º\n- æˆ‘ä»¬å®é™…è®¨è®ºçš„å†…å®¹\n\n\n## æ“ä½œé¡¹ç›®\n\n- [ ] æˆ‘ä»¬æ¥å®Œæˆè¿™é¡¹ä»»åŠ¡ @æŸäºº","source":"changelog/index.md","raw":"---\ntitle: æ›´æ–°æ—¥å¿—\ndate: 2022-09-15 19:30:07\ncomment: true\n---\n# ğŸ•˜ æ›´æ–°æ—¥å¿— æ·»åŠ äº‹ä»¶åç§°\n\n# 2022-09-02\n\n****\n## æ›´æ–°å†…å®¹\n\n@æåŠæ‚¨è‡ªå·±å¹¶æ·»åŠ å…¶ä»–äºº\n\n\n## è®®ç¨‹\n- ä¼šè®®è®®ç¨‹\n\n\n## è®¨è®º\n- æˆ‘ä»¬å®é™…è®¨è®ºçš„å†…å®¹\n\n\n## æ“ä½œé¡¹ç›®\n\n- [ ] æˆ‘ä»¬æ¥å®Œæˆè¿™é¡¹ä»»åŠ¡ @æŸäºº","updated":"2022-09-29T15:28:35.404Z","path":"changelog/index.html","comments":1,"layout":"page","_id":"clas9ersk0006dk8f64qp023m","content":"<h1 id=\"ğŸ•˜-æ›´æ–°æ—¥å¿—-æ·»åŠ äº‹ä»¶åç§°\"><a href=\"#ğŸ•˜-æ›´æ–°æ—¥å¿—-æ·»åŠ äº‹ä»¶åç§°\" class=\"headerlink\" title=\"ğŸ•˜ æ›´æ–°æ—¥å¿— æ·»åŠ äº‹ä»¶åç§°\"></a>ğŸ•˜ æ›´æ–°æ—¥å¿— æ·»åŠ äº‹ä»¶åç§°</h1><h1 id=\"2022-09-02\"><a href=\"#2022-09-02\" class=\"headerlink\" title=\"2022-09-02\"></a>2022-09-02</h1><hr>\n<h2 id=\"æ›´æ–°å†…å®¹\"><a href=\"#æ›´æ–°å†…å®¹\" class=\"headerlink\" title=\"æ›´æ–°å†…å®¹\"></a>æ›´æ–°å†…å®¹</h2><p>@æåŠæ‚¨è‡ªå·±å¹¶æ·»åŠ å…¶ä»–äºº</p>\n<h2 id=\"è®®ç¨‹\"><a href=\"#è®®ç¨‹\" class=\"headerlink\" title=\"è®®ç¨‹\"></a>è®®ç¨‹</h2><ul>\n<li>ä¼šè®®è®®ç¨‹</li>\n</ul>\n<h2 id=\"è®¨è®º\"><a href=\"#è®¨è®º\" class=\"headerlink\" title=\"è®¨è®º\"></a>è®¨è®º</h2><ul>\n<li>æˆ‘ä»¬å®é™…è®¨è®ºçš„å†…å®¹</li>\n</ul>\n<h2 id=\"æ“ä½œé¡¹ç›®\"><a href=\"#æ“ä½œé¡¹ç›®\" class=\"headerlink\" title=\"æ“ä½œé¡¹ç›®\"></a>æ“ä½œé¡¹ç›®</h2><ul>\n<li><input disabled=\"\" type=\"checkbox\"> æˆ‘ä»¬æ¥å®Œæˆè¿™é¡¹ä»»åŠ¡ @æŸäºº</li>\n</ul>\n","site":{"data":{"links":[{"name":"CZMæœ‰ç‚¹å†·","link":"https://czm.cool/","description":"CZMçš„åšå®¢","avatar":"https://img.czm.cool/avatar/avatar.png"},{"name":"PSH","link":"https://shamd.cloud/","description":"PSHçš„åšå®¢.","avatar":"https://shamd.cloud/upload/2022/07/afbb577733f46c9535dd1d6d6388278.jpg"},{"name":"KAI","link":"https://kainote.top/","description":"love artist, love code.","avatar":"https://cdn.jsdelivr.net/gh/kaix2301/pictures/img202201072101018.jpg"}]}},"excerpt":"","more":"<h1 id=\"ğŸ•˜-æ›´æ–°æ—¥å¿—-æ·»åŠ äº‹ä»¶åç§°\"><a href=\"#ğŸ•˜-æ›´æ–°æ—¥å¿—-æ·»åŠ äº‹ä»¶åç§°\" class=\"headerlink\" title=\"ğŸ•˜ æ›´æ–°æ—¥å¿— æ·»åŠ äº‹ä»¶åç§°\"></a>ğŸ•˜ æ›´æ–°æ—¥å¿— æ·»åŠ äº‹ä»¶åç§°</h1><h1 id=\"2022-09-02\"><a href=\"#2022-09-02\" class=\"headerlink\" title=\"2022-09-02\"></a>2022-09-02</h1><hr>\n<h2 id=\"æ›´æ–°å†…å®¹\"><a href=\"#æ›´æ–°å†…å®¹\" class=\"headerlink\" title=\"æ›´æ–°å†…å®¹\"></a>æ›´æ–°å†…å®¹</h2><p>@æåŠæ‚¨è‡ªå·±å¹¶æ·»åŠ å…¶ä»–äºº</p>\n<h2 id=\"è®®ç¨‹\"><a href=\"#è®®ç¨‹\" class=\"headerlink\" title=\"è®®ç¨‹\"></a>è®®ç¨‹</h2><ul>\n<li>ä¼šè®®è®®ç¨‹</li>\n</ul>\n<h2 id=\"è®¨è®º\"><a href=\"#è®¨è®º\" class=\"headerlink\" title=\"è®¨è®º\"></a>è®¨è®º</h2><ul>\n<li>æˆ‘ä»¬å®é™…è®¨è®ºçš„å†…å®¹</li>\n</ul>\n<h2 id=\"æ“ä½œé¡¹ç›®\"><a href=\"#æ“ä½œé¡¹ç›®\" class=\"headerlink\" title=\"æ“ä½œé¡¹ç›®\"></a>æ“ä½œé¡¹ç›®</h2><ul>\n<li><input disabled=\"\" type=\"checkbox\"> æˆ‘ä»¬æ¥å®Œæˆè¿™é¡¹ä»»åŠ¡ @æŸäºº</li>\n</ul>\n"},{"title":"heart","date":"2022-11-14T15:41:24.000Z","_content":"\n<canvas id=\"pinkboard\"></canvas>\n\n<script src=\"https://ajax.aspnetcdn.com/ajax/jQuery/jquery-2.1.1.min.js\"></script>\n<script>\nconsole.log(\"js loaded\");\nvar settings = {\n\tparticles: {\n\t\tlength: 500,\n\t\t// maximum amount of particles\n\t\tduration: 2,\n\t\t// particle duration in sec\n\t\tvelocity: 100,\n\t\t// particle velocity in pixels/sec\n\t\teffect: -0.75,\n\t\t// play with this for a nice effect\n\t\tsize: 30,\n\t\t// particle size in pixels\n\t},\n};\n\n/*\n * RequestAnimationFrame polyfill by Erik MÃ¶ller\n */\n\n(\n\tfunction() {\n\t\tconsole.log(\"heart into page\");\n\n\t\tvar b = 0;\n\t\tvar c = [\"ms\", \"moz\", \"webkit\", \"o\"];\n\t\tfor (var a = 0; a < c.length && !window.requestAnimationFrame; ++a) {\n\t\t\twindow.requestAnimationFrame = window[c[a] + \"RequestAnimationFrame\"];\n\t\t\twindow.cancelAnimationFrame = window[c[a] + \"CancelAnimationFrame\"] || window[c[a] + \"CancelRequestAnimationFrame\"]\n\t\t}\n\t\tif (!window.requestAnimationFrame) {\n\t\t\twindow.requestAnimationFrame = function(h, e) {\n\t\t\t\tvar d = new Date()\n\t\t\t\t\t.getTime();\n\t\t\t\tvar f = Math.max(0, 16 - (d - b));\n\t\t\t\tvar g = window.setTimeout(function() {\n\t\t\t\t\t\th(d + f)\n\t\t\t\t\t},\n\t\t\t\t\tf);\n\t\t\t\tb = d + f;\n\t\t\t\treturn g\n\t\t\t}\n\t\t}\n\t\tif (!window.cancelAnimationFrame) {\n\t\t\twindow.cancelAnimationFrame = function(d) {\n\t\t\t\tclearTimeout(d)\n\t\t\t}\n\t\t}\n\t}());\n\n/*\n * Point class\n */\nvar Point = (function() {\n\tfunction Point(x, y) {\n\t\tthis.x = (typeof x !== 'undefined') ? x : 0;\n\t\tthis.y = (typeof y !== 'undefined') ? y : 0;\n\t}\n\tPoint.prototype.clone = function() {\n\t\treturn new Point(this.x, this.y);\n\t};\n\tPoint.prototype.length = function(length) {\n\t\tif (typeof length == 'undefined') return Math.sqrt(this.x * this.x + this.y * this.y);\n\t\tthis.normalize();\n\t\tthis.x *= length;\n\t\tthis.y *= length;\n\t\treturn this;\n\t};\n\tPoint.prototype.normalize = function() {\n\t\tvar length = this.length();\n\t\tthis.x /= length;\n\t\tthis.y /= length;\n\t\treturn this;\n\t};\n\treturn Point;\n})();\n\n/*\n * Particle class\n */\nvar Particle = (function() {\n\tfunction Particle() {\n\t\tthis.position = new Point();\n\t\tthis.velocity = new Point();\n\t\tthis.acceleration = new Point();\n\t\tthis.age = 0;\n\t}\n\tParticle.prototype.initialize = function(x, y, dx, dy) {\n\t\tthis.position.x = x;\n\t\tthis.position.y = y;\n\t\tthis.velocity.x = dx;\n\t\tthis.velocity.y = dy;\n\t\tthis.acceleration.x = dx * settings.particles.effect;\n\t\tthis.acceleration.y = dy * settings.particles.effect;\n\t\tthis.age = 0;\n\t};\n\tParticle.prototype.update = function(deltaTime) {\n\t\tthis.position.x += this.velocity.x * deltaTime;\n\t\tthis.position.y += this.velocity.y * deltaTime;\n\t\tthis.velocity.x += this.acceleration.x * deltaTime;\n\t\tthis.velocity.y += this.acceleration.y * deltaTime;\n\t\tthis.age += deltaTime;\n\t};\n\tParticle.prototype.draw = function(context, image) {\n\t\tfunction ease(t) {\n\t\t\treturn (--t) * t * t + 1;\n\t\t}\n\t\tvar size = image.width * ease(this.age / settings.particles.duration);\n\t\tcontext.globalAlpha = 1 - this.age / settings.particles.duration;\n\t\tcontext.drawImage(image, this.position.x - size / 2, this.position.y - size / 2, size, size);\n\t};\n\treturn Particle;\n})();\n\n/*\n * ParticlePool class\n */\nvar ParticlePool = (function() {\n\tvar particles, firstActive = 0,\n\t\tfirstFree = 0,\n\t\tduration = settings.particles.duration;\n\n\tfunction ParticlePool(length) {\n\t\t// create and populate particle pool\n\t\tparticles = new Array(length);\n\t\tfor (var i = 0; i < particles.length; i++) particles[i] = new Particle();\n\t}\n\tParticlePool.prototype.add = function(x, y, dx, dy) {\n\t\tparticles[firstFree].initialize(x, y, dx, dy);\n\n\t\t// handle circular queue\n\t\tfirstFree++;\n\t\tif (firstFree == particles.length) firstFree = 0;\n\t\tif (firstActive == firstFree) firstActive++;\n\t\tif (firstActive == particles.length) firstActive = 0;\n\t};\n\tParticlePool.prototype.update = function(deltaTime) {\n\t\tvar i;\n\n\t\t// update active particles\n\t\tif (firstActive < firstFree) {\n\t\t\tfor (i = firstActive; i < firstFree; i++) particles[i].update(deltaTime);\n\t\t}\n\t\tif (firstFree < firstActive) {\n\t\t\tfor (i = firstActive; i < particles.length; i++) particles[i].update(deltaTime);\n\t\t\tfor (i = 0; i < firstFree; i++) particles[i].update(deltaTime);\n\t\t}\n\n\t\t// remove inactive particles\n\t\twhile (particles[firstActive].age >= duration && firstActive != firstFree) {\n\t\t\tfirstActive++;\n\t\t\tif (firstActive == particles.length) firstActive = 0;\n\t\t}\n\n\t};\n\tParticlePool.prototype.draw = function(context, image) {\n\t\t// draw active particles\n\t\tif (firstActive < firstFree) {\n\t\t\tfor (i = firstActive; i < firstFree; i++) particles[i].draw(context, image);\n\t\t}\n\t\tif (firstFree < firstActive) {\n\t\t\tfor (i = firstActive; i < particles.length; i++) particles[i].draw(context, image);\n\t\t\tfor (i = 0; i < firstFree; i++) particles[i].draw(context, image);\n\t\t}\n\t};\n\treturn ParticlePool;\n})();\n\n/*\n * Putting it all together\n */\n\n$(document).ready(function() {\n\tcanvas = document.getElementById(\"pinkboard\");\n\tconsole.log(\"heart into\");\n\tconsole.log(canvas)\n\tvar canvasObj = document.getElementById(\"pinkboard\");\n\tvar parentObj = canvasObj.parentNode; //.parentNode.parentNode;\n\t// console.log(parentObj.clientWidth);\n\tcanvasObj.width = parentObj.clientWidth;\n\tcanvasObj.height = parentObj.clientWidth;\n\n\twindow.addEventListener(\"resize\", () => {\n\t\tvar canvasObj = document.getElementById(\"pinkboard\");\n\t\tif (canvasObj) {\n\t\t\tvar parentObj = canvasObj.parentNode; //.parentNode.parentNode;\n\t\t\t// console.log(parentObj.clientWidth);\n\t\t\tcanvasObj.width = parentObj.clientWidth;\n\t\t\tcanvasObj.height = parentObj.clientWidth;\n\t\t}\n\t});\n\n\n\tvar context = canvas.getContext('2d'),\n\t\tparticles = new ParticlePool(settings.particles.length),\n\t\tparticleRate = settings.particles.length / settings.particles.duration,\n\t\t// particles/sec\n\t\ttime;\n\n\t// get point on heart with -PI <= t <= PI\n\tfunction pointOnHeart(t) {\n\t\treturn new Point(160 * Math.pow(Math.sin(t), 3), 130 * Math.cos(t) - 50 * Math.cos(2 * t) - 20 * Math.cos(3 * t) - 10 * Math.cos(4 * t) + 25);\n\t}\n\n\t// creating the particle image using a dummy canvas\n\tvar image = (function() {\n\t\tvar canvas = document.createElement('canvas'),\n\t\t\tcontext = canvas.getContext('2d');\n\t\tcanvas.width = settings.particles.size;\n\t\tcanvas.height = settings.particles.size;\n\t\t// helper function to create the path\n\t\tfunction to(t) {\n\t\t\tvar point = pointOnHeart(t);\n\t\t\tpoint.x = settings.particles.size / 2 + point.x * settings.particles.size / 350;\n\t\t\tpoint.y = settings.particles.size / 2 - point.y * settings.particles.size / 350;\n\t\t\treturn point;\n\t\t}\n\t\t// create the path\n\t\tcontext.beginPath();\n\t\tvar t = -Math.PI;\n\t\tvar point = to(t);\n\t\tcontext.moveTo(point.x, point.y);\n\t\twhile (t < Math.PI) {\n\t\t\tt += 0.01; // baby steps!\n\t\t\tpoint = to(t);\n\t\t\tcontext.lineTo(point.x, point.y);\n\t\t}\n\t\tcontext.closePath();\n\t\t// create the fill\n\t\tcontext.fillStyle = '#ea80b0';\n\t\tcontext.fill();\n\t\t// create the image\n\t\tvar image = new Image();\n\t\timage.src = canvas.toDataURL();\n\t\treturn image;\n\t})();\n\n\t// render that thing!\n\tfunction render() {\n\t\t// next animation frame\n\t\trequestAnimationFrame(render);\n\n\t\t// update time\n\t\tvar newTime = new Date()\n\t\t\t.getTime() / 1000,\n\t\t\tdeltaTime = newTime - (time || newTime);\n\t\ttime = newTime;\n\n\t\t// clear canvas\n\t\tcontext.clearRect(0, 0, canvas.width, canvas.height);\n\n\t\t// create new particles\n\t\tvar amount = particleRate * deltaTime;\n\t\tfor (var i = 0; i < amount; i++) {\n\t\t\tvar pos = pointOnHeart(Math.PI - 2 * Math.PI * Math.random());\n\t\t\tvar dir = pos.clone()\n\t\t\t\t.length(settings.particles.velocity);\n\t\t\tparticles.add(canvas.width / 2 + pos.x, canvas.height / 2 - pos.y, dir.x, -dir.y);\n\t\t}\n\n\t\t// update and draw particles\n\t\tparticles.update(deltaTime);\n\t\tparticles.draw(context, image);\n\t}\n\n\t// handle (re-)sizing of the canvas\n\tfunction onResize() {\n\t\tcanvas.width = canvas.clientWidth;\n\t\tcanvas.height = canvas.clientHeight;\n\t}\n\twindow.onresize = onResize;\n\n\t// delay rendering bootstrap\n\tsetTimeout(function() {\n\t\t\tonResize();\n\t\t\trender();\n\t\t},\n\t\t10);\n});\n//)(document.getElementById(\"pinkboard\"));\n\n</script>","source":"heart/index.md","raw":"---\ntitle: heart\ndate: 2022-11-14 23:41:24\n---\n\n<canvas id=\"pinkboard\"></canvas>\n\n<script src=\"https://ajax.aspnetcdn.com/ajax/jQuery/jquery-2.1.1.min.js\"></script>\n<script>\nconsole.log(\"js loaded\");\nvar settings = {\n\tparticles: {\n\t\tlength: 500,\n\t\t// maximum amount of particles\n\t\tduration: 2,\n\t\t// particle duration in sec\n\t\tvelocity: 100,\n\t\t// particle velocity in pixels/sec\n\t\teffect: -0.75,\n\t\t// play with this for a nice effect\n\t\tsize: 30,\n\t\t// particle size in pixels\n\t},\n};\n\n/*\n * RequestAnimationFrame polyfill by Erik MÃ¶ller\n */\n\n(\n\tfunction() {\n\t\tconsole.log(\"heart into page\");\n\n\t\tvar b = 0;\n\t\tvar c = [\"ms\", \"moz\", \"webkit\", \"o\"];\n\t\tfor (var a = 0; a < c.length && !window.requestAnimationFrame; ++a) {\n\t\t\twindow.requestAnimationFrame = window[c[a] + \"RequestAnimationFrame\"];\n\t\t\twindow.cancelAnimationFrame = window[c[a] + \"CancelAnimationFrame\"] || window[c[a] + \"CancelRequestAnimationFrame\"]\n\t\t}\n\t\tif (!window.requestAnimationFrame) {\n\t\t\twindow.requestAnimationFrame = function(h, e) {\n\t\t\t\tvar d = new Date()\n\t\t\t\t\t.getTime();\n\t\t\t\tvar f = Math.max(0, 16 - (d - b));\n\t\t\t\tvar g = window.setTimeout(function() {\n\t\t\t\t\t\th(d + f)\n\t\t\t\t\t},\n\t\t\t\t\tf);\n\t\t\t\tb = d + f;\n\t\t\t\treturn g\n\t\t\t}\n\t\t}\n\t\tif (!window.cancelAnimationFrame) {\n\t\t\twindow.cancelAnimationFrame = function(d) {\n\t\t\t\tclearTimeout(d)\n\t\t\t}\n\t\t}\n\t}());\n\n/*\n * Point class\n */\nvar Point = (function() {\n\tfunction Point(x, y) {\n\t\tthis.x = (typeof x !== 'undefined') ? x : 0;\n\t\tthis.y = (typeof y !== 'undefined') ? y : 0;\n\t}\n\tPoint.prototype.clone = function() {\n\t\treturn new Point(this.x, this.y);\n\t};\n\tPoint.prototype.length = function(length) {\n\t\tif (typeof length == 'undefined') return Math.sqrt(this.x * this.x + this.y * this.y);\n\t\tthis.normalize();\n\t\tthis.x *= length;\n\t\tthis.y *= length;\n\t\treturn this;\n\t};\n\tPoint.prototype.normalize = function() {\n\t\tvar length = this.length();\n\t\tthis.x /= length;\n\t\tthis.y /= length;\n\t\treturn this;\n\t};\n\treturn Point;\n})();\n\n/*\n * Particle class\n */\nvar Particle = (function() {\n\tfunction Particle() {\n\t\tthis.position = new Point();\n\t\tthis.velocity = new Point();\n\t\tthis.acceleration = new Point();\n\t\tthis.age = 0;\n\t}\n\tParticle.prototype.initialize = function(x, y, dx, dy) {\n\t\tthis.position.x = x;\n\t\tthis.position.y = y;\n\t\tthis.velocity.x = dx;\n\t\tthis.velocity.y = dy;\n\t\tthis.acceleration.x = dx * settings.particles.effect;\n\t\tthis.acceleration.y = dy * settings.particles.effect;\n\t\tthis.age = 0;\n\t};\n\tParticle.prototype.update = function(deltaTime) {\n\t\tthis.position.x += this.velocity.x * deltaTime;\n\t\tthis.position.y += this.velocity.y * deltaTime;\n\t\tthis.velocity.x += this.acceleration.x * deltaTime;\n\t\tthis.velocity.y += this.acceleration.y * deltaTime;\n\t\tthis.age += deltaTime;\n\t};\n\tParticle.prototype.draw = function(context, image) {\n\t\tfunction ease(t) {\n\t\t\treturn (--t) * t * t + 1;\n\t\t}\n\t\tvar size = image.width * ease(this.age / settings.particles.duration);\n\t\tcontext.globalAlpha = 1 - this.age / settings.particles.duration;\n\t\tcontext.drawImage(image, this.position.x - size / 2, this.position.y - size / 2, size, size);\n\t};\n\treturn Particle;\n})();\n\n/*\n * ParticlePool class\n */\nvar ParticlePool = (function() {\n\tvar particles, firstActive = 0,\n\t\tfirstFree = 0,\n\t\tduration = settings.particles.duration;\n\n\tfunction ParticlePool(length) {\n\t\t// create and populate particle pool\n\t\tparticles = new Array(length);\n\t\tfor (var i = 0; i < particles.length; i++) particles[i] = new Particle();\n\t}\n\tParticlePool.prototype.add = function(x, y, dx, dy) {\n\t\tparticles[firstFree].initialize(x, y, dx, dy);\n\n\t\t// handle circular queue\n\t\tfirstFree++;\n\t\tif (firstFree == particles.length) firstFree = 0;\n\t\tif (firstActive == firstFree) firstActive++;\n\t\tif (firstActive == particles.length) firstActive = 0;\n\t};\n\tParticlePool.prototype.update = function(deltaTime) {\n\t\tvar i;\n\n\t\t// update active particles\n\t\tif (firstActive < firstFree) {\n\t\t\tfor (i = firstActive; i < firstFree; i++) particles[i].update(deltaTime);\n\t\t}\n\t\tif (firstFree < firstActive) {\n\t\t\tfor (i = firstActive; i < particles.length; i++) particles[i].update(deltaTime);\n\t\t\tfor (i = 0; i < firstFree; i++) particles[i].update(deltaTime);\n\t\t}\n\n\t\t// remove inactive particles\n\t\twhile (particles[firstActive].age >= duration && firstActive != firstFree) {\n\t\t\tfirstActive++;\n\t\t\tif (firstActive == particles.length) firstActive = 0;\n\t\t}\n\n\t};\n\tParticlePool.prototype.draw = function(context, image) {\n\t\t// draw active particles\n\t\tif (firstActive < firstFree) {\n\t\t\tfor (i = firstActive; i < firstFree; i++) particles[i].draw(context, image);\n\t\t}\n\t\tif (firstFree < firstActive) {\n\t\t\tfor (i = firstActive; i < particles.length; i++) particles[i].draw(context, image);\n\t\t\tfor (i = 0; i < firstFree; i++) particles[i].draw(context, image);\n\t\t}\n\t};\n\treturn ParticlePool;\n})();\n\n/*\n * Putting it all together\n */\n\n$(document).ready(function() {\n\tcanvas = document.getElementById(\"pinkboard\");\n\tconsole.log(\"heart into\");\n\tconsole.log(canvas)\n\tvar canvasObj = document.getElementById(\"pinkboard\");\n\tvar parentObj = canvasObj.parentNode; //.parentNode.parentNode;\n\t// console.log(parentObj.clientWidth);\n\tcanvasObj.width = parentObj.clientWidth;\n\tcanvasObj.height = parentObj.clientWidth;\n\n\twindow.addEventListener(\"resize\", () => {\n\t\tvar canvasObj = document.getElementById(\"pinkboard\");\n\t\tif (canvasObj) {\n\t\t\tvar parentObj = canvasObj.parentNode; //.parentNode.parentNode;\n\t\t\t// console.log(parentObj.clientWidth);\n\t\t\tcanvasObj.width = parentObj.clientWidth;\n\t\t\tcanvasObj.height = parentObj.clientWidth;\n\t\t}\n\t});\n\n\n\tvar context = canvas.getContext('2d'),\n\t\tparticles = new ParticlePool(settings.particles.length),\n\t\tparticleRate = settings.particles.length / settings.particles.duration,\n\t\t// particles/sec\n\t\ttime;\n\n\t// get point on heart with -PI <= t <= PI\n\tfunction pointOnHeart(t) {\n\t\treturn new Point(160 * Math.pow(Math.sin(t), 3), 130 * Math.cos(t) - 50 * Math.cos(2 * t) - 20 * Math.cos(3 * t) - 10 * Math.cos(4 * t) + 25);\n\t}\n\n\t// creating the particle image using a dummy canvas\n\tvar image = (function() {\n\t\tvar canvas = document.createElement('canvas'),\n\t\t\tcontext = canvas.getContext('2d');\n\t\tcanvas.width = settings.particles.size;\n\t\tcanvas.height = settings.particles.size;\n\t\t// helper function to create the path\n\t\tfunction to(t) {\n\t\t\tvar point = pointOnHeart(t);\n\t\t\tpoint.x = settings.particles.size / 2 + point.x * settings.particles.size / 350;\n\t\t\tpoint.y = settings.particles.size / 2 - point.y * settings.particles.size / 350;\n\t\t\treturn point;\n\t\t}\n\t\t// create the path\n\t\tcontext.beginPath();\n\t\tvar t = -Math.PI;\n\t\tvar point = to(t);\n\t\tcontext.moveTo(point.x, point.y);\n\t\twhile (t < Math.PI) {\n\t\t\tt += 0.01; // baby steps!\n\t\t\tpoint = to(t);\n\t\t\tcontext.lineTo(point.x, point.y);\n\t\t}\n\t\tcontext.closePath();\n\t\t// create the fill\n\t\tcontext.fillStyle = '#ea80b0';\n\t\tcontext.fill();\n\t\t// create the image\n\t\tvar image = new Image();\n\t\timage.src = canvas.toDataURL();\n\t\treturn image;\n\t})();\n\n\t// render that thing!\n\tfunction render() {\n\t\t// next animation frame\n\t\trequestAnimationFrame(render);\n\n\t\t// update time\n\t\tvar newTime = new Date()\n\t\t\t.getTime() / 1000,\n\t\t\tdeltaTime = newTime - (time || newTime);\n\t\ttime = newTime;\n\n\t\t// clear canvas\n\t\tcontext.clearRect(0, 0, canvas.width, canvas.height);\n\n\t\t// create new particles\n\t\tvar amount = particleRate * deltaTime;\n\t\tfor (var i = 0; i < amount; i++) {\n\t\t\tvar pos = pointOnHeart(Math.PI - 2 * Math.PI * Math.random());\n\t\t\tvar dir = pos.clone()\n\t\t\t\t.length(settings.particles.velocity);\n\t\t\tparticles.add(canvas.width / 2 + pos.x, canvas.height / 2 - pos.y, dir.x, -dir.y);\n\t\t}\n\n\t\t// update and draw particles\n\t\tparticles.update(deltaTime);\n\t\tparticles.draw(context, image);\n\t}\n\n\t// handle (re-)sizing of the canvas\n\tfunction onResize() {\n\t\tcanvas.width = canvas.clientWidth;\n\t\tcanvas.height = canvas.clientHeight;\n\t}\n\twindow.onresize = onResize;\n\n\t// delay rendering bootstrap\n\tsetTimeout(function() {\n\t\t\tonResize();\n\t\t\trender();\n\t\t},\n\t\t10);\n});\n//)(document.getElementById(\"pinkboard\"));\n\n</script>","updated":"2022-11-23T15:21:07.661Z","path":"heart/index.html","_id":"clas9ersm0008dk8f9rds0d34","comments":1,"layout":"page","content":"<p><canvas id=\"pinkboard\"></canvas></p>\n<script src=\"https://ajax.aspnetcdn.com/ajax/jQuery/jquery-2.1.1.min.js\"></script>\n<script>\nconsole.log(\"js loaded\");\nvar settings = {\n    particles: {\n        length: 500,\n        // maximum amount of particles\n        duration: 2,\n        // particle duration in sec\n        velocity: 100,\n        // particle velocity in pixels/sec\n        effect: -0.75,\n        // play with this for a nice effect\n        size: 30,\n        // particle size in pixels\n    },\n};\n\n/*\n * RequestAnimationFrame polyfill by Erik MÃ¶ller\n */\n\n(\n    function() {\n        console.log(\"heart into page\");\n\n        var b = 0;\n        var c = [\"ms\", \"moz\", \"webkit\", \"o\"];\n        for (var a = 0; a < c.length && !window.requestAnimationFrame; ++a) {\n            window.requestAnimationFrame = window[c[a] + \"RequestAnimationFrame\"];\n            window.cancelAnimationFrame = window[c[a] + \"CancelAnimationFrame\"] || window[c[a] + \"CancelRequestAnimationFrame\"]\n        }\n        if (!window.requestAnimationFrame) {\n            window.requestAnimationFrame = function(h, e) {\n                var d = new Date()\n                    .getTime();\n                var f = Math.max(0, 16 - (d - b));\n                var g = window.setTimeout(function() {\n                        h(d + f)\n                    },\n                    f);\n                b = d + f;\n                return g\n            }\n        }\n        if (!window.cancelAnimationFrame) {\n            window.cancelAnimationFrame = function(d) {\n                clearTimeout(d)\n            }\n        }\n    }());\n\n/*\n * Point class\n */\nvar Point = (function() {\n    function Point(x, y) {\n        this.x = (typeof x !== 'undefined') ? x : 0;\n        this.y = (typeof y !== 'undefined') ? y : 0;\n    }\n    Point.prototype.clone = function() {\n        return new Point(this.x, this.y);\n    };\n    Point.prototype.length = function(length) {\n        if (typeof length == 'undefined') return Math.sqrt(this.x * this.x + this.y * this.y);\n        this.normalize();\n        this.x *= length;\n        this.y *= length;\n        return this;\n    };\n    Point.prototype.normalize = function() {\n        var length = this.length();\n        this.x /= length;\n        this.y /= length;\n        return this;\n    };\n    return Point;\n})();\n\n/*\n * Particle class\n */\nvar Particle = (function() {\n    function Particle() {\n        this.position = new Point();\n        this.velocity = new Point();\n        this.acceleration = new Point();\n        this.age = 0;\n    }\n    Particle.prototype.initialize = function(x, y, dx, dy) {\n        this.position.x = x;\n        this.position.y = y;\n        this.velocity.x = dx;\n        this.velocity.y = dy;\n        this.acceleration.x = dx * settings.particles.effect;\n        this.acceleration.y = dy * settings.particles.effect;\n        this.age = 0;\n    };\n    Particle.prototype.update = function(deltaTime) {\n        this.position.x += this.velocity.x * deltaTime;\n        this.position.y += this.velocity.y * deltaTime;\n        this.velocity.x += this.acceleration.x * deltaTime;\n        this.velocity.y += this.acceleration.y * deltaTime;\n        this.age += deltaTime;\n    };\n    Particle.prototype.draw = function(context, image) {\n        function ease(t) {\n            return (--t) * t * t + 1;\n        }\n        var size = image.width * ease(this.age / settings.particles.duration);\n        context.globalAlpha = 1 - this.age / settings.particles.duration;\n        context.drawImage(image, this.position.x - size / 2, this.position.y - size / 2, size, size);\n    };\n    return Particle;\n})();\n\n/*\n * ParticlePool class\n */\nvar ParticlePool = (function() {\n    var particles, firstActive = 0,\n        firstFree = 0,\n        duration = settings.particles.duration;\n\n    function ParticlePool(length) {\n        // create and populate particle pool\n        particles = new Array(length);\n        for (var i = 0; i < particles.length; i++) particles[i] = new Particle();\n    }\n    ParticlePool.prototype.add = function(x, y, dx, dy) {\n        particles[firstFree].initialize(x, y, dx, dy);\n\n        // handle circular queue\n        firstFree++;\n        if (firstFree == particles.length) firstFree = 0;\n        if (firstActive == firstFree) firstActive++;\n        if (firstActive == particles.length) firstActive = 0;\n    };\n    ParticlePool.prototype.update = function(deltaTime) {\n        var i;\n\n        // update active particles\n        if (firstActive < firstFree) {\n            for (i = firstActive; i < firstFree; i++) particles[i].update(deltaTime);\n        }\n        if (firstFree < firstActive) {\n            for (i = firstActive; i < particles.length; i++) particles[i].update(deltaTime);\n            for (i = 0; i < firstFree; i++) particles[i].update(deltaTime);\n        }\n\n        // remove inactive particles\n        while (particles[firstActive].age >= duration && firstActive != firstFree) {\n            firstActive++;\n            if (firstActive == particles.length) firstActive = 0;\n        }\n\n    };\n    ParticlePool.prototype.draw = function(context, image) {\n        // draw active particles\n        if (firstActive < firstFree) {\n            for (i = firstActive; i < firstFree; i++) particles[i].draw(context, image);\n        }\n        if (firstFree < firstActive) {\n            for (i = firstActive; i < particles.length; i++) particles[i].draw(context, image);\n            for (i = 0; i < firstFree; i++) particles[i].draw(context, image);\n        }\n    };\n    return ParticlePool;\n})();\n\n/*\n * Putting it all together\n */\n\n$(document).ready(function() {\n    canvas = document.getElementById(\"pinkboard\");\n    console.log(\"heart into\");\n    console.log(canvas)\n    var canvasObj = document.getElementById(\"pinkboard\");\n    var parentObj = canvasObj.parentNode; //.parentNode.parentNode;\n    // console.log(parentObj.clientWidth);\n    canvasObj.width = parentObj.clientWidth;\n    canvasObj.height = parentObj.clientWidth;\n\n    window.addEventListener(\"resize\", () => {\n        var canvasObj = document.getElementById(\"pinkboard\");\n        if (canvasObj) {\n            var parentObj = canvasObj.parentNode; //.parentNode.parentNode;\n            // console.log(parentObj.clientWidth);\n            canvasObj.width = parentObj.clientWidth;\n            canvasObj.height = parentObj.clientWidth;\n        }\n    });\n\n\n    var context = canvas.getContext('2d'),\n        particles = new ParticlePool(settings.particles.length),\n        particleRate = settings.particles.length / settings.particles.duration,\n        // particles/sec\n        time;\n\n    // get point on heart with -PI <= t <= PI\n    function pointOnHeart(t) {\n        return new Point(160 * Math.pow(Math.sin(t), 3), 130 * Math.cos(t) - 50 * Math.cos(2 * t) - 20 * Math.cos(3 * t) - 10 * Math.cos(4 * t) + 25);\n    }\n\n    // creating the particle image using a dummy canvas\n    var image = (function() {\n        var canvas = document.createElement('canvas'),\n            context = canvas.getContext('2d');\n        canvas.width = settings.particles.size;\n        canvas.height = settings.particles.size;\n        // helper function to create the path\n        function to(t) {\n            var point = pointOnHeart(t);\n            point.x = settings.particles.size / 2 + point.x * settings.particles.size / 350;\n            point.y = settings.particles.size / 2 - point.y * settings.particles.size / 350;\n            return point;\n        }\n        // create the path\n        context.beginPath();\n        var t = -Math.PI;\n        var point = to(t);\n        context.moveTo(point.x, point.y);\n        while (t < Math.PI) {\n            t += 0.01; // baby steps!\n            point = to(t);\n            context.lineTo(point.x, point.y);\n        }\n        context.closePath();\n        // create the fill\n        context.fillStyle = '#ea80b0';\n        context.fill();\n        // create the image\n        var image = new Image();\n        image.src = canvas.toDataURL();\n        return image;\n    })();\n\n    // render that thing!\n    function render() {\n        // next animation frame\n        requestAnimationFrame(render);\n\n        // update time\n        var newTime = new Date()\n            .getTime() / 1000,\n            deltaTime = newTime - (time || newTime);\n        time = newTime;\n\n        // clear canvas\n        context.clearRect(0, 0, canvas.width, canvas.height);\n\n        // create new particles\n        var amount = particleRate * deltaTime;\n        for (var i = 0; i < amount; i++) {\n            var pos = pointOnHeart(Math.PI - 2 * Math.PI * Math.random());\n            var dir = pos.clone()\n                .length(settings.particles.velocity);\n            particles.add(canvas.width / 2 + pos.x, canvas.height / 2 - pos.y, dir.x, -dir.y);\n        }\n\n        // update and draw particles\n        particles.update(deltaTime);\n        particles.draw(context, image);\n    }\n\n    // handle (re-)sizing of the canvas\n    function onResize() {\n        canvas.width = canvas.clientWidth;\n        canvas.height = canvas.clientHeight;\n    }\n    window.onresize = onResize;\n\n    // delay rendering bootstrap\n    setTimeout(function() {\n            onResize();\n            render();\n        },\n        10);\n});\n//)(document.getElementById(\"pinkboard\"));\n\n</script>","site":{"data":{"links":[{"name":"CZMæœ‰ç‚¹å†·","link":"https://czm.cool/","description":"CZMçš„åšå®¢","avatar":"https://img.czm.cool/avatar/avatar.png"},{"name":"PSH","link":"https://shamd.cloud/","description":"PSHçš„åšå®¢.","avatar":"https://shamd.cloud/upload/2022/07/afbb577733f46c9535dd1d6d6388278.jpg"},{"name":"KAI","link":"https://kainote.top/","description":"love artist, love code.","avatar":"https://cdn.jsdelivr.net/gh/kaix2301/pictures/img202201072101018.jpg"}]}},"excerpt":"","more":"<p><canvas id=\"pinkboard\"></canvas></p>\n<script src=\"https://ajax.aspnetcdn.com/ajax/jQuery/jquery-2.1.1.min.js\"></script>\n<script>\nconsole.log(\"js loaded\");\nvar settings = {\n    particles: {\n        length: 500,\n        // maximum amount of particles\n        duration: 2,\n        // particle duration in sec\n        velocity: 100,\n        // particle velocity in pixels/sec\n        effect: -0.75,\n        // play with this for a nice effect\n        size: 30,\n        // particle size in pixels\n    },\n};\n\n/*\n * RequestAnimationFrame polyfill by Erik MÃ¶ller\n */\n\n(\n    function() {\n        console.log(\"heart into page\");\n\n        var b = 0;\n        var c = [\"ms\", \"moz\", \"webkit\", \"o\"];\n        for (var a = 0; a < c.length && !window.requestAnimationFrame; ++a) {\n            window.requestAnimationFrame = window[c[a] + \"RequestAnimationFrame\"];\n            window.cancelAnimationFrame = window[c[a] + \"CancelAnimationFrame\"] || window[c[a] + \"CancelRequestAnimationFrame\"]\n        }\n        if (!window.requestAnimationFrame) {\n            window.requestAnimationFrame = function(h, e) {\n                var d = new Date()\n                    .getTime();\n                var f = Math.max(0, 16 - (d - b));\n                var g = window.setTimeout(function() {\n                        h(d + f)\n                    },\n                    f);\n                b = d + f;\n                return g\n            }\n        }\n        if (!window.cancelAnimationFrame) {\n            window.cancelAnimationFrame = function(d) {\n                clearTimeout(d)\n            }\n        }\n    }());\n\n/*\n * Point class\n */\nvar Point = (function() {\n    function Point(x, y) {\n        this.x = (typeof x !== 'undefined') ? x : 0;\n        this.y = (typeof y !== 'undefined') ? y : 0;\n    }\n    Point.prototype.clone = function() {\n        return new Point(this.x, this.y);\n    };\n    Point.prototype.length = function(length) {\n        if (typeof length == 'undefined') return Math.sqrt(this.x * this.x + this.y * this.y);\n        this.normalize();\n        this.x *= length;\n        this.y *= length;\n        return this;\n    };\n    Point.prototype.normalize = function() {\n        var length = this.length();\n        this.x /= length;\n        this.y /= length;\n        return this;\n    };\n    return Point;\n})();\n\n/*\n * Particle class\n */\nvar Particle = (function() {\n    function Particle() {\n        this.position = new Point();\n        this.velocity = new Point();\n        this.acceleration = new Point();\n        this.age = 0;\n    }\n    Particle.prototype.initialize = function(x, y, dx, dy) {\n        this.position.x = x;\n        this.position.y = y;\n        this.velocity.x = dx;\n        this.velocity.y = dy;\n        this.acceleration.x = dx * settings.particles.effect;\n        this.acceleration.y = dy * settings.particles.effect;\n        this.age = 0;\n    };\n    Particle.prototype.update = function(deltaTime) {\n        this.position.x += this.velocity.x * deltaTime;\n        this.position.y += this.velocity.y * deltaTime;\n        this.velocity.x += this.acceleration.x * deltaTime;\n        this.velocity.y += this.acceleration.y * deltaTime;\n        this.age += deltaTime;\n    };\n    Particle.prototype.draw = function(context, image) {\n        function ease(t) {\n            return (--t) * t * t + 1;\n        }\n        var size = image.width * ease(this.age / settings.particles.duration);\n        context.globalAlpha = 1 - this.age / settings.particles.duration;\n        context.drawImage(image, this.position.x - size / 2, this.position.y - size / 2, size, size);\n    };\n    return Particle;\n})();\n\n/*\n * ParticlePool class\n */\nvar ParticlePool = (function() {\n    var particles, firstActive = 0,\n        firstFree = 0,\n        duration = settings.particles.duration;\n\n    function ParticlePool(length) {\n        // create and populate particle pool\n        particles = new Array(length);\n        for (var i = 0; i < particles.length; i++) particles[i] = new Particle();\n    }\n    ParticlePool.prototype.add = function(x, y, dx, dy) {\n        particles[firstFree].initialize(x, y, dx, dy);\n\n        // handle circular queue\n        firstFree++;\n        if (firstFree == particles.length) firstFree = 0;\n        if (firstActive == firstFree) firstActive++;\n        if (firstActive == particles.length) firstActive = 0;\n    };\n    ParticlePool.prototype.update = function(deltaTime) {\n        var i;\n\n        // update active particles\n        if (firstActive < firstFree) {\n            for (i = firstActive; i < firstFree; i++) particles[i].update(deltaTime);\n        }\n        if (firstFree < firstActive) {\n            for (i = firstActive; i < particles.length; i++) particles[i].update(deltaTime);\n            for (i = 0; i < firstFree; i++) particles[i].update(deltaTime);\n        }\n\n        // remove inactive particles\n        while (particles[firstActive].age >= duration && firstActive != firstFree) {\n            firstActive++;\n            if (firstActive == particles.length) firstActive = 0;\n        }\n\n    };\n    ParticlePool.prototype.draw = function(context, image) {\n        // draw active particles\n        if (firstActive < firstFree) {\n            for (i = firstActive; i < firstFree; i++) particles[i].draw(context, image);\n        }\n        if (firstFree < firstActive) {\n            for (i = firstActive; i < particles.length; i++) particles[i].draw(context, image);\n            for (i = 0; i < firstFree; i++) particles[i].draw(context, image);\n        }\n    };\n    return ParticlePool;\n})();\n\n/*\n * Putting it all together\n */\n\n$(document).ready(function() {\n    canvas = document.getElementById(\"pinkboard\");\n    console.log(\"heart into\");\n    console.log(canvas)\n    var canvasObj = document.getElementById(\"pinkboard\");\n    var parentObj = canvasObj.parentNode; //.parentNode.parentNode;\n    // console.log(parentObj.clientWidth);\n    canvasObj.width = parentObj.clientWidth;\n    canvasObj.height = parentObj.clientWidth;\n\n    window.addEventListener(\"resize\", () => {\n        var canvasObj = document.getElementById(\"pinkboard\");\n        if (canvasObj) {\n            var parentObj = canvasObj.parentNode; //.parentNode.parentNode;\n            // console.log(parentObj.clientWidth);\n            canvasObj.width = parentObj.clientWidth;\n            canvasObj.height = parentObj.clientWidth;\n        }\n    });\n\n\n    var context = canvas.getContext('2d'),\n        particles = new ParticlePool(settings.particles.length),\n        particleRate = settings.particles.length / settings.particles.duration,\n        // particles/sec\n        time;\n\n    // get point on heart with -PI <= t <= PI\n    function pointOnHeart(t) {\n        return new Point(160 * Math.pow(Math.sin(t), 3), 130 * Math.cos(t) - 50 * Math.cos(2 * t) - 20 * Math.cos(3 * t) - 10 * Math.cos(4 * t) + 25);\n    }\n\n    // creating the particle image using a dummy canvas\n    var image = (function() {\n        var canvas = document.createElement('canvas'),\n            context = canvas.getContext('2d');\n        canvas.width = settings.particles.size;\n        canvas.height = settings.particles.size;\n        // helper function to create the path\n        function to(t) {\n            var point = pointOnHeart(t);\n            point.x = settings.particles.size / 2 + point.x * settings.particles.size / 350;\n            point.y = settings.particles.size / 2 - point.y * settings.particles.size / 350;\n            return point;\n        }\n        // create the path\n        context.beginPath();\n        var t = -Math.PI;\n        var point = to(t);\n        context.moveTo(point.x, point.y);\n        while (t < Math.PI) {\n            t += 0.01; // baby steps!\n            point = to(t);\n            context.lineTo(point.x, point.y);\n        }\n        context.closePath();\n        // create the fill\n        context.fillStyle = '#ea80b0';\n        context.fill();\n        // create the image\n        var image = new Image();\n        image.src = canvas.toDataURL();\n        return image;\n    })();\n\n    // render that thing!\n    function render() {\n        // next animation frame\n        requestAnimationFrame(render);\n\n        // update time\n        var newTime = new Date()\n            .getTime() / 1000,\n            deltaTime = newTime - (time || newTime);\n        time = newTime;\n\n        // clear canvas\n        context.clearRect(0, 0, canvas.width, canvas.height);\n\n        // create new particles\n        var amount = particleRate * deltaTime;\n        for (var i = 0; i < amount; i++) {\n            var pos = pointOnHeart(Math.PI - 2 * Math.PI * Math.random());\n            var dir = pos.clone()\n                .length(settings.particles.velocity);\n            particles.add(canvas.width / 2 + pos.x, canvas.height / 2 - pos.y, dir.x, -dir.y);\n        }\n\n        // update and draw particles\n        particles.update(deltaTime);\n        particles.draw(context, image);\n    }\n\n    // handle (re-)sizing of the canvas\n    function onResize() {\n        canvas.width = canvas.clientWidth;\n        canvas.height = canvas.clientHeight;\n    }\n    window.onresize = onResize;\n\n    // delay rendering bootstrap\n    setTimeout(function() {\n            onResize();\n            render();\n        },\n        10);\n});\n//)(document.getElementById(\"pinkboard\"));\n\n</script>"},{"title":"links","date":"2022-09-15T05:16:24.000Z","_content":"","source":"links/index.md","raw":"---\ntitle: links\ndate: 2022-09-15 13:16:24\n---\n","updated":"2022-09-29T15:28:35.405Z","path":"links/index.html","comments":1,"layout":"page","_id":"clas9ersn000adk8f19lodhwk","content":"","site":{"data":{"links":[{"name":"CZMæœ‰ç‚¹å†·","link":"https://czm.cool/","description":"CZMçš„åšå®¢","avatar":"https://img.czm.cool/avatar/avatar.png"},{"name":"PSH","link":"https://shamd.cloud/","description":"PSHçš„åšå®¢.","avatar":"https://shamd.cloud/upload/2022/07/afbb577733f46c9535dd1d6d6388278.jpg"},{"name":"KAI","link":"https://kainote.top/","description":"love artist, love code.","avatar":"https://cdn.jsdelivr.net/gh/kaix2301/pictures/img202201072101018.jpg"}]}},"excerpt":"","more":""},{"title":"tags","date":"2022-09-15T11:29:45.000Z","_content":"","source":"tags/index.md","raw":"---\ntitle: tags\ndate: 2022-09-15 19:29:45\n---\n","updated":"2022-09-29T15:28:35.405Z","path":"tags/index.html","comments":1,"layout":"page","_id":"clas9ersq000edk8f0r55cd9c","content":"","site":{"data":{"links":[{"name":"CZMæœ‰ç‚¹å†·","link":"https://czm.cool/","description":"CZMçš„åšå®¢","avatar":"https://img.czm.cool/avatar/avatar.png"},{"name":"PSH","link":"https://shamd.cloud/","description":"PSHçš„åšå®¢.","avatar":"https://shamd.cloud/upload/2022/07/afbb577733f46c9535dd1d6d6388278.jpg"},{"name":"KAI","link":"https://kainote.top/","description":"love artist, love code.","avatar":"https://cdn.jsdelivr.net/gh/kaix2301/pictures/img202201072101018.jpg"}]}},"excerpt":"","more":""},{"title":"archives","date":"2022-09-29T16:02:18.000Z","_content":"","source":"archives/index.md","raw":"---\ntitle: archives\ndate: 2022-09-30 00:02:18\n---\n","updated":"2022-09-29T16:02:18.135Z","path":"archives/index.html","comments":1,"layout":"page","_id":"clas9ersr000gdk8f3699gjgr","content":"","site":{"data":{"links":[{"name":"CZMæœ‰ç‚¹å†·","link":"https://czm.cool/","description":"CZMçš„åšå®¢","avatar":"https://img.czm.cool/avatar/avatar.png"},{"name":"PSH","link":"https://shamd.cloud/","description":"PSHçš„åšå®¢.","avatar":"https://shamd.cloud/upload/2022/07/afbb577733f46c9535dd1d6d6388278.jpg"},{"name":"KAI","link":"https://kainote.top/","description":"love artist, love code.","avatar":"https://cdn.jsdelivr.net/gh/kaix2301/pictures/img202201072101018.jpg"}]}},"excerpt":"","more":""}],"Post":[{"title":"camundaåŸºç¡€ç¯‡","date":"2022-10-20T08:38:59.000Z","_content":"# Camunda-çƒ­é—¨å·¥ä½œæµå¼•æ“æ¡†æ¶\n> Lectureï¼šæ³¢å“¥\n\n![image-20220902232358815](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220902232358815.png)\n\n# å·¥ä½œæµç›¸å…³ä»‹ç»\n\n**BPM**(BusinessProcessManagement)ï¼Œä¸šåŠ¡æµç¨‹ç®¡ç†æ˜¯ä¸€ç§ç®¡ç†åŸåˆ™ï¼Œé€šå¸¸ä¹Ÿå¯ä»¥ä»£æŒ‡BPMS(BusinessProcessManagementSuite)ï¼Œæ˜¯ä¸€ä¸ªå®ç°æ•´åˆä¸åŒç³»ç»Ÿå’Œæ•°æ®çš„æµç¨‹ç®¡ç†è½¯ä»¶å¥—ä»¶.\n\n**BPMN**(BusinessProcessModelandNotation)æ˜¯åŸºäºæµç¨‹å›¾çš„é€šç”¨å¯è§†åŒ–æ ‡å‡†ã€‚è¯¥æµç¨‹å›¾è¢«è®¾è®¡ç”¨äºåˆ›å»ºä¸šåŠ¡æµç¨‹æ“ä½œçš„å›¾å½¢åŒ–æ¨¡å‹ã€‚ä¸šåŠ¡æµç¨‹æ¨¡å‹å°±æ˜¯å›¾å½¢åŒ–å¯¹è±¡çš„ç½‘çŠ¶å›¾ï¼ŒåŒ…æ‹¬æ´»åŠ¨å’Œç”¨äºå®šä¹‰è¿™äº›æ´»åŠ¨æ‰§è¡Œé¡ºåºçš„`æµç¨‹è®¾è®¡å™¨`ã€‚BPMN2.0æ­£å¼ç‰ˆæœ¬äº2011å¹´1æœˆ3æ—¥å‘å¸ƒï¼Œå¸¸è§çš„`å·¥ä½œæµå¼•æ“`å¦‚ï¼šActivitiã€Flowableã€jBPM éƒ½åŸºäº BPMN 2.0 æ ‡å‡†ã€‚\n\nç„¶åæ¥çœ‹çœ‹BPMçš„å‘å±•å†ç¨‹ï¼š\n\n![image-20220830005000114](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220830005000114.png)\n\n# Camundaä»‹ç»\n\nå®˜ç½‘åœ°å€ï¼šhttps://camunda.com/\n\nä¸­æ–‡ç«™ç‚¹ï¼šhttp://camunda-cn.shaochenfeng.com/\n\nä¸‹è½½ï¼šhttps://downloads.camunda.cloud/release/camunda-bpm/run/7.15/\n\næ¡ˆä¾‹åœ°å€ï¼š[Congratulation! | docs.camunda.org](https://docs.camunda.org/get-started/quick-start/complete/)\n\nå‰æœŸå‡†å¤‡å·¥ä½œ: JAVA1.8ä»¥ä¸Šçš„JREæˆ–JDK\n\n## Camunda Modeler \n\nCamunda Modeler æ˜¯Camunda å®˜æ–¹æä¾›çš„ä¸€ä¸ªæµç¨‹è®¾è®¡å™¨ï¼Œç”¨äºç¼–è¾‘æµç¨‹å›¾ä»¥åŠå…¶ä»–æ¨¡å‹ã€è¡¨å•ã€‘ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªæµç¨‹å›¾çš„ç»˜å›¾å·¥å…·ã€‚å¯ä»¥å®˜æ–¹ä¸‹è½½ï¼Œä¹Ÿå¯ä»¥åœ¨æä¾›ç»™å¤§å®¶çš„èµ„æ–™ä¸­è·å–ã€‚è·å–åç›´æ¥è§£å‹ç¼©å³å¯ï¼Œæ³¨æ„ï¼šè§£å‹å®‰è£…åˆ°éä¸­æ–‡ç›®å½•ä¸­!!!\n\n![image-20220901105936567](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220901105936567.png)\n\n\n\nå¯åŠ¨çš„æ•ˆæœï¼š\n\n![image-20220901110007447](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220901110007447.png)\n\n\n\n## Camunda BPM\n\nä¸‹è½½åœ°å€ https://camunda.com/download/\n\nCamunda BPM æ˜¯Camundaå®˜æ–¹æä¾›çš„ä¸€ä¸ª`ä¸šåŠ¡æµç¨‹ç®¡ç†`å¹³å°,ç”¨æ¥ç®¡ç†ï¼Œéƒ¨ç½²çš„æµç¨‹å®šä¹‰ã€æ‰§è¡Œä»»åŠ¡ï¼Œç­–ç•¥ç­‰ã€‚ä¸‹è½½å®‰è£…ä¸€ä¸ªCamundaå¹³å°ï¼ŒæˆåŠŸè§£å‹ Camunda å¹³å°çš„å‘è¡Œç‰ˆåï¼Œæ‰§è¡Œåä¸ºstart.batï¼ˆå¯¹äº Windows ç”¨æˆ·ï¼‰æˆ–start.shï¼ˆå¯¹äº Unix ç”¨æˆ·ï¼‰çš„è„šæœ¬ã€‚æ­¤è„šæœ¬å°†å¯åŠ¨åº”ç”¨ç¨‹åºæœåŠ¡å™¨ã€‚\n\n![image-20220901110225636](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220901110225636.png)\n\næ‰“å¼€æ‚¨çš„ Web æµè§ˆå™¨å¹¶å¯¼èˆªåˆ°http://localhost:8080/ä»¥è®¿é—®æ¬¢è¿é¡µé¢ï¼ŒCamundaçš„ç®¡ç†å¹³å°ã€‚\n\n\n\n![image-20220718162641800](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220718162641800.png)\n\n\n\nç™»å½•æˆåŠŸçš„ä¸»é¡µï¼š\n\n![image-20220718162726028](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220718162726028.png)\n\n\n\n\n\n\n\n## å…¥é—¨æ¡ˆä¾‹\n\n### åˆ›å»ºç®€å•æµç¨‹\n\næˆ‘ä»¬å…ˆé€šè¿‡ Modeler æ¥ç»˜åˆ¶ä¸€ä¸ªç®€å•æµç¨‹\n\n1.) åˆ›å»ºæµç¨‹ï¼šé€‰æ‹© BPMN diagram (Camunda Platform)\n\n![image-20220901110718700](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220901110718700.png)\n\n2.) åˆ›å»ºå¼€å§‹èŠ‚ç‚¹ï¼šå¹¶è®¾å®šèŠ‚ç‚¹åç§°\n\n![image-20220901110850675](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220901110850675.png)\n\n3.) åˆ›å»ºæœåŠ¡èŠ‚ç‚¹ï¼šè®¾ç½®å¤„ç†æ–¹å¼\n\n![image-20220901110926577](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220901110926577.png)\n\n![image-20220901111045576](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220901111045576.png)\n\næˆ‘ä»¬åˆ‡æ¢èŠ‚ç‚¹çš„ç±»å‹ä¸º `service Task`\n\n![image-20220901111125584](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220901111125584.png)\n\n![image-20220901111141656](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220901111141656.png)\n\nç„¶åæˆ‘ä»¬éœ€è¦é…ç½®`åˆ·å¡ä»˜æ¬¾`èŠ‚ç‚¹ï¼ŒæœåŠ¡ç±»å‹æœ‰å¾ˆå¤šæ‰§è¡Œçš„æ–¹æ³•ï¼Œè¿™æ¬¡æˆ‘ä»¬ä½¿ç”¨â€œexternalï¼ˆå¤–éƒ¨ï¼‰â€ä»»åŠ¡æ¨¡å¼ã€‚\n\n![image-20220901111330988](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220901111330988.png)\n\nå…·ä½“é…ç½®å†…å®¹ä¸º\n\n![image-20220901111419588](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220901111419588.png)\n\n\n\n4.) æ·»åŠ ç»“æŸèŠ‚ç‚¹\n\n![image-20220901111521063](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220901111521063.png)\n\n\n\n5.) é…ç½®æµç¨‹å‚æ•°\n\nç‚¹å‡»ç”»å¸ƒçš„ç©ºç™½å¤„ï¼Œå³ä¾§çš„é¢æ¿ä¼šæ˜¾ç¤ºå½“å‰æµç¨‹æœ¬èº«çš„å‚æ•°,è¿™é‡Œæˆ‘ä»¬ä¿®æ”¹idä¸º*payment-retrieval*ï¼Œidæ˜¯åŒºåˆ†æµç¨‹çš„æ ‡è¯†ç„¶åä¿®æ”¹Name ä¸ºâ€œä»˜æ¬¾æµç¨‹â€æœ€åç¡®ä¿ `Executable`æ˜¯å‹¾é€‰çš„ï¼Œåªæœ‰`Executable`è¢«å‹¾é€‰ï¼Œæµç¨‹æ‰èƒ½æ‰§è¡Œ\n\n![image-20220901111725855](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220901111725855.png)\n\n\n\n### å¤–éƒ¨ä»»åŠ¡\n\nåœ¨ä¸Šé¢è®¾è®¡çš„æµç¨‹å›¾ï¼Œ`åˆ·å¡ä»˜æ¬¾`èŠ‚ç‚¹çš„å¤„ç†æ˜¯å¤–éƒ¨ä»»åŠ¡ï¼ŒCamunda å¯ä»¥ä½¿å¤šç§è¯­è¨€å®ç°ä¸šåŠ¡é€»è¾‘ï¼Œæˆ‘ä»¬ä»¥Javaä¸ºä¾‹æ¥ä»‹ç»ã€‚\n\næ·»åŠ ç›¸å…³çš„ä¾èµ–ï¼š\n\n```xml\n    <dependencies>\n\t\t<dependency>\n\t\t\t<groupId>org.camunda.bpm</groupId>\n\t\t\t<artifactId>camunda-external-task-client</artifactId>\n\t\t\t<version>7.15.0</version>\n\t\t</dependency>\n\t\t<dependency>\n\t\t\t<groupId>org.slf4j</groupId>\n\t\t\t<artifactId>slf4j-simple</artifactId>\n\t\t\t<version>1.6.1</version>\n\t\t</dependency>\n\t\t<dependency>\n\t\t\t<groupId>javax.xml.bind</groupId>\n\t\t\t<artifactId>jaxb-api</artifactId>\n\t\t\t<version>2.3.1</version>\n\t\t</dependency>\n\t</dependencies>\n\n```\n\nç¼–å†™å¤„ç†çš„ä¸šåŠ¡é€»è¾‘çš„ä»£ç \n\n```java\nimport org.camunda.bpm.client.ExternalTaskClient;\n\nimport java.awt.*;\nimport java.net.URI;\n\npublic class Demo01 {\n    public static void main(String[] args) {\n        ExternalTaskClient client = ExternalTaskClient.create()\n                .baseUrl(\"http://localhost:8080/engine-rest\")\n                .asyncResponseTimeout(10000) // é•¿è½®è¯¢è¶…æ—¶æ—¶é—´\n                .build();\n        // è®¢é˜…æŒ‡å®šçš„å¤–éƒ¨ä»»åŠ¡\n        client.subscribe(\"charge-card\")\n                .lockDuration(1000)\n                .handler(((externalTask, externalTaskService) -> {\n                    // è·å–æµç¨‹å˜é‡\n                    String item = (String) externalTask.getVariable(\"item\");\n                    Long amount = (Long) externalTask.getVariable(\"amount\");\n                    System.out.println(\"item--->\"+item + \"  amount-->\" + amount);\n                    try {\n                        Desktop.getDesktop().browse(new URI(\"https://docs.camunda.org/get-started/quick-start/complete\"));\n                    } catch (Exception e) {\n                        e.printStackTrace();\n                    }\n\n                    // å®Œæˆä»»åŠ¡\n                    externalTaskService.complete(externalTask);\n                })).open();\n    }\n}\n\n```\n\nè¿è¡Œè¯¥æ–¹æ³•å³å¯ï¼Œå½“æµç¨‹å¤„ç†æ—¶ä¼šæ‰§è¡Œç›¸å…³é€»è¾‘ã€‚\n\n\n\n### 3.3 éƒ¨ç½²æµç¨‹\n\næ¥ä¸‹æ¥æˆ‘ä»¬å°±å¯ä»¥æ¥éƒ¨ç½²ä¸Šé¢å®šä¹‰çš„æµç¨‹äº†ã€‚ä½¿ç”¨ Camunda Modeler éƒ¨ç½²æµç¨‹ï¼Œç‚¹å‡»å·¥å…·æ ä¸­çš„éƒ¨ç½²æŒ‰é’®å¯ä»¥å°†å½“å‰æµç¨‹éƒ¨ç½²åˆ°æµç¨‹å¼•æ“ï¼Œç‚¹å‡»éƒ¨ç½²æŒ‰é’®ï¼Œè¾“å…¥Deployment Name ä¸º â€œPaymentâ€ ï¼Œè¾“å…¥ä¸‹æ–¹REST Endpoint ä¸ºhttp://localhost:8080/engine-rest ï¼Œç„¶åç‚¹å‡»å³ä¸‹è§’Deployéƒ¨ç½²\n\n\néƒ¨ç½²æ“ä½œï¼š\n\n![image-20220901102738775](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220901102738775.png)\n\néƒ¨ç½²çš„æ—¶å€™æŠ¥é”™ï¼šåŸå› æ˜¯å®‰è£…è·¯å¾„ä¸­æœ‰ä¸­æ–‡\n\n![image-20220901101904825](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220901101904825.png)\n\n\n\néƒ¨ç½²æˆåŠŸï¼š\n\n![image-20220901102705446](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220901102705446.png)\n\n\n\nç„¶ååœ¨BPMä¸­æˆ‘ä»¬å¯ä»¥æŸ¥çœ‹éƒ¨ç½²çš„æµç¨‹ï¼š\n\n![image-20220901112401741](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220901112401741.png)\n\n\n\n\n\n### å¯åŠ¨æµç¨‹\n\næˆ‘ä»¬ä½¿ç”¨Rest APIå‘èµ·æµç¨‹ï¼Œæ‰€ä»¥éœ€è¦ä¸€ä¸ªæ¥å£æµ‹è¯•å·¥å…·ï¼ˆä¾‹å¦‚ï¼šPostmanï¼‰ï¼Œæˆ–è€…ä¹Ÿå¯ä»¥ä½¿ç”¨ç”µè„‘è‡ªå¸¦çš„curl\n\ncurlæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤\n\n```curl\ncurl -H \"Content-Type: application/json\" -X POST -d '{\"variables\": {\"amount\": {\"value\":555,\"type\":\"long\"}, \"item\": {\"value\":\"item-xyz\"} } }' http://localhost:8080/engine-rest/process-definition/key/payment-retrieval/start\n\n```\n\npostmanæ–¹å¼å¤„ç†\n\nåœ¨urlä¸­è¾“å…¥ï¼šhttp://localhost:8080/engine-rest/process-definition/key/payment-retrieval/start é€šè¿‡`POST`æ–¹å¼æäº¤ï¼Œæäº¤çš„æ–¹å¼æ˜¯`JSON` æ•°æ®ï¼Œå…·ä½“å†…å®¹ä¸ºï¼š\n\n```json\n{\n\t\"variables\": {\n\t\t\"amount\": {\n\t\t\t\"value\":555,\n\t\t\t\"type\":\"long\"\n\t\t},\n\t\t\"item\": {\n\t\t\t\"value\": \"item-xyz\"\n\t\t}\n\t}\n}\n\n```\n\n![image-20220901112634925](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220901112634925.png)\n\nç„¶åæˆ‘ä»¬ç‚¹å‡»å‘é€ï¼Œæ“ä½œæˆåŠŸå¯ä»¥çœ‹åˆ°å¦‚ä¸‹çš„è¿”å›ä¿¡æ¯\n\n![image-20220901112709320](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220901112709320.png)\n\n\n\nåŒæ—¶ä»»åŠ¡æ‰§è¡Œåæˆ‘ä»¬åœ¨æ§åˆ¶å°å¯ä»¥çœ‹åˆ°ç›¸å…³çš„ä¿¡æ¯\n\n![image-20220901112810150](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220901112810150.png)\n\n\n\n\n\n# æ¡ˆä¾‹æ‰©å±•\n\nä¸Šé¢çš„æ¡ˆä¾‹è¿‡äºç®€å•ï¼Œæˆ‘ä»¬æ·»åŠ ä¸åŒçš„ä»»åŠ¡èŠ‚ç‚¹å’Œç½‘å…³æ¥ä¸°å¯Œä¸‹\n\n## ç”¨æˆ·ä»»åŠ¡\n\n\n\n### æ·»åŠ èŠ‚ç‚¹\n\nÂ æˆ‘ä»¬åœ¨ä¸Šé¢çš„æ¡ˆä¾‹ä¸­æ·»åŠ ä¸€ä¸ª`ç”¨æˆ·ä»»åŠ¡`æ¥å¤„ç†æµç¨‹ã€‚\n\n![image-20220903233945199](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220903233945199.png)\n\nç‚¹å‡»åˆšåˆšåˆ›å»ºçš„`æ‰¹å‡†ä»˜æ¬¾`èŠ‚ç‚¹ï¼Œç„¶åé€šè¿‡æ‰³æ‰‹è®¾ç½®èŠ‚ç‚¹çš„ç±»å‹ä¸º`ç”¨æˆ·ä»»åŠ¡`(User Task)\n\n![image-20220903234050669](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220903234050669.png)\n\n\n\nç„¶åè®¾ç½®èŠ‚ç‚¹çš„å®¡æ‰¹äººä¸º`demo`\n\n![image-20220903234231682](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220903234231682.png)\n\n\n\n### é…ç½®è¡¨å•\n\nåœ¨`ç”¨æˆ·èŠ‚ç‚¹`å¤„æˆ‘ä»¬ç»‘å®šè¡¨å•æ•°æ®ã€‚ç„¶ååˆ›å»ºè¡¨å•ç›¸å…³çš„å­—æ®µï¼Œå¹¶æ·»åŠ å¯¹åº”çš„æè¿°ä¿¡æ¯ã€‚\n\n![image-20220904001026418](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220904001026418.png)\n\n> amountå­—æ®µï¼š\n>\n> â€‹     ID:amount\n>\n> â€‹     Type:long\n>\n> â€‹     Label:é‡‘é¢\n>\n> Itemå­—æ®µï¼š\n>\n> â€‹     ID:item\n>\n> â€‹     Type:string\n>\n> â€‹     Label:é¡¹ç›®\n>\n> Approvedå­—æ®µï¼š\n>\n> â€‹     ID:approved\n>\n> â€‹     Type:boolean\n>\n> â€‹     Label:æ˜¯å¦åŒæ„\n\n\n\n### éƒ¨ç½²æµç¨‹\n\næµç¨‹å®šä¹‰å¥½ä¹‹åæˆ‘ä»¬å°±å¯ä»¥éƒ¨ç½²æµç¨‹äº†ã€‚ç›´æ¥åœ¨`Camunda Modeler`å·¥å…·æ ä¸Šçš„ä¸Šä¼ æŒ‰é’®å°†æµç¨‹ä¸Šä¼ åˆ°æµç¨‹å¼•æ“ä¸­ã€‚éƒ¨ç½²ååœ¨`Camunda Web`ä¸­æŸ¥çœ‹éƒ¨ç½²çš„æµç¨‹ã€‚\n\n![image-20220904001636662](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220904001636662.png)\n\n\n\n\n\n### æµ‹è¯•æµç¨‹\n\næ‰“å¼€ä»»åŠ¡åˆ—è¡¨ï¼ˆhttp://localhost:8080/camunda/app/tasklist/ï¼‰ï¼Œä½¿ç”¨ demo / demo ç™»å½•ã€‚ç‚¹å‡»å³ä¸Šè§’çš„ `Start process` ï¼Œåœ¨å¼¹å‡ºçš„å¯¹è¯æ¡†ä¸­é€‰æ‹©â€œä»˜æ¬¾æµç¨‹â€.\n\n![image-20220904001816475](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220904001816475.png)\n\nè¿™æ—¶ä¼šå¼¹å‡ºç¼–è¾‘æµç¨‹å˜é‡çš„å¯¹è¯æ¡†ï¼Œå¯ä»¥é€šè¿‡ç‚¹å‡» Add a variable æŒ‰é’®æ·»åŠ å˜é‡ï¼Œè¿™æ¬¡æˆ‘ä»¬å…ˆä¸æ·»åŠ ï¼Œç›´æ¥ç‚¹å‡»å³ä¸‹è§’` Start `å¯åŠ¨æµç¨‹ã€‚\n\n![image-20220904001902564](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220904001902564.png)\n\nè¿™æ—¶ï¼Œåœ¨ä»»åŠ¡åˆ—è¡¨åº”è¯¥å°±èƒ½çœ‹åˆ°åˆšåˆ›å»ºçš„äººå·¥ä»»åŠ¡äº†ï¼Œå¦‚æœæ²¡æœ‰å¯ä»¥æ‰‹åŠ¨åˆ·æ–°ä¸€ä¸‹\n\n![image-20220904001953028](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220904001953028.png)\n\n\n\nåˆ°è¿™å„¿è¿™ä¸ª`ç”¨æˆ·ä»»åŠ¡`èŠ‚ç‚¹çš„äººå·¥å®¡æ ¸å°±åº”è¯¥è¦å¤„ç†äº†ï¼Œæˆ‘ä»¬åœ¨ä¸‹ä¸€ä¸ªæ¡ˆä¾‹ä¸­ç»§ç»­è¿™ä¸ªæ¡ˆä¾‹ï¼Œæˆ‘ä»¬åŠ å…¥æ’ä»–ç½‘å…³æ¥å¤„ç†ã€‚\n\n\n\n\n\n## æ’ä»–ç½‘å…³\n\næˆ‘ä»¬å°†ä½¿ç”¨**æ’ä»–ç½‘å…³**(*Exclusive Gateways*)ï¼Œä¸ºæµç¨‹æ·»åŠ åˆ†æ”¯ï¼Œä»…åœ¨é‡‘é¢è¶³å¤Ÿå¤§çš„æ—¶å€™è¿›è¡Œäººå·¥å®¡æ ¸.\n\n### æ·»åŠ ç½‘å…³èŠ‚ç‚¹\n\né¦–å…ˆæ‰“å¼€`Camunda Modeler `ï¼Œåœ¨å·¦ä¾§çš„å·¥å…·æ¶ä¸­æ‰¾åˆ°ç½‘å…³ï¼ˆè±å½¢ï¼‰ï¼Œå°†å®ƒæ‹–åŠ¨åˆ°â€œä»˜æ¬¾è¯·æ±‚â€å’Œâ€œåˆ·å¡ä»˜æ¬¾â€ä¹‹é—´ï¼Œå°†â€œæ‰¹å‡†ä»˜æ¬¾â€å‘ä¸‹ç§»åŠ¨å†æ·»åŠ ä¸€ä¸ªç½‘å…³ï¼Œè°ƒæ•´æµç¨‹ï¼Œæœ€åçœ‹èµ·æ¥ç±»ä¼¼è¿™æ ·ï¼š\n\n![image-20220904004632887](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220904004632887.png)\n\n\n\n### é…ç½®ç½‘å…³\n\næ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬é€‰æ‹©â€œ<1000â€çš„è¿çº¿ï¼Œæ‰“å¼€å±æ€§é¢æ¿ï¼Œé€‰æ‹©â€œCondition Typeâ€ä¸ºâ€œExpressionâ€ï¼Œè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨[JAVAç»Ÿä¸€è¡¨è¾¾å¼è¯­è¨€](https://docs.camunda.org/manual/latest/user-guide/process-engine/expression-language/)ç¼–å†™æ¡ä»¶ï¼Œè¿™é‡Œè¦åšçš„æ˜¯åœ¨é‡‘é¢å°äº1000æ—¶ç›´æ¥åˆ·å¡ä»˜æ¬¾ï¼Œåˆ™è¾“å…¥è¡¨è¾¾å¼ `${amount<1000}`\n\n![image-20220904004725626](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220904004725626.png)\n\nåŒæ ·çš„ï¼Œå¯¹å¦ä¸€æ¡çº¿ä¹Ÿè¿›è¡Œé…ç½®ï¼Œè¡¨è¾¾å¼ä¸º`${amount>=1000}`\n\n![image-20220904004747234](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220904004747234.png)\n\nç„¶å`æ˜¯å¦æ‰¹å‡†`çš„æ’ä»–ç½‘å…³èŠ‚ç‚¹æˆ‘ä»¬ä¹Ÿéœ€è¦å¤„ç†ä¸‹\n\n![image-20220904004845594](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220904004845594.png)\n\n![image-20220904004910392](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220904004910392.png)\n\n\n\n### éƒ¨ç½²æµç¨‹\n\néƒ¨ç½²æµç¨‹å’Œä¸Šé¢çš„æ“ä½œæ˜¯ä¸€æ ·çš„ã€‚\n\n![image-20220904005023089](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220904005023089.png)\n\n\n\n### æµ‹è¯•æ“ä½œ\n\næ‰“å¼€ä»»åŠ¡åˆ—è¡¨ï¼ˆhttp://localhost:8080/camunda/app/tasklist/ï¼‰ï¼Œä½¿ç”¨ demo / demo ç™»å½•,ç‚¹å‡»å³ä¸Šè§’çš„ Start process ï¼Œåœ¨å¼¹å‡ºçš„å¯¹è¯æ¡†ä¸­é€‰æ‹©â€œä»˜æ¬¾æµç¨‹â€,ä¸Šé¢ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ç›´æ¥ç‚¹å‡» Startï¼Œä½†è¿™æ¬¡æˆ‘ä»¬è¦å¢åŠ å‡ ä¸ªå˜é‡æ¥æµ‹è¯•åŠ¨æ€çš„æµç¨‹ã€‚\n\n![image-20220904005221732](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220904005221732.png)\n\nè¯•ç€æ›´æ”¹ `amount` çš„å€¼ï¼ŒæŸ¥çœ‹å¯¹æµç¨‹æ‰§è¡Œé¡ºåºçš„å½±å“\n\n\n\n\n\n## å†³ç­–è‡ªåŠ¨åŒ–\n\nåœ¨ä¸Šé¢çš„æ¡ˆä¾‹ä¸­æˆ‘ä»¬åœ¨å®¡æ‰¹æ—¶æ˜¯é€šè¿‡`ç”¨æˆ·ä»»åŠ¡`ç»“åˆè¡¨å•æ¥åšçš„å®¡æ‰¹ï¼Œæœ¬æ¡ˆä¾‹æˆ‘ä»¬æ¥çœ‹çœ‹æˆ‘ä»¬é€šè¿‡`DMN`ä¸ºæµç¨‹æ·»åŠ ä¸€ä¸ªä¸šåŠ¡è§„åˆ™æ¥å¤„ç†\n\n### æ·»åŠ ä¸šåŠ¡è§„åˆ™\n\næ‰“å¼€ Camunda Modelerï¼Œç‚¹å‡» â€œæ‰¹å‡†ä»˜æ¬¾â€ï¼Œåœ¨å³é¢çš„æ‰³æ‰‹èœå•ä¸­ï¼Œå°†ç±»å‹æ”¹ä¸ºâ€œ**Business Rule Task** â€ï¼ˆä¸šåŠ¡è§„åˆ™ä»»åŠ¡ï¼‰\n\n![image-20220904113549016](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220904113549016.png)\n\nä¸‹ä¸€æ­¥ï¼Œå°†å±æ€§é¢æ¿ä¸­çš„ `Implementation` é€‰æ‹©ä¸º`DMN`ï¼Œè¾“å…¥ Decision Ref ä¸º `approve-payment`ï¼Œä¸ºäº†å°†å†³ç­–çš„ç»“æœå­˜å…¥æµç¨‹å˜é‡ï¼Œæˆ‘ä»¬è¿˜éœ€è¦ç¼–è¾‘ç»“æœå˜é‡Result Variable ä¸º`approved`ï¼Œç»“æœç±»å‹ Map Decision Result é€‰æ‹©ä¸º `singleEntry `ï¼Œæœ€åç»“æœå¦‚ä¸‹ï¼š\n\n\n![image-20220904113700661](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220904113700661.png)\n\n\n\n### åˆ›å»ºDMNè¡¨\n\nç‚¹å‡» `File > New File > DMN Diagram`åˆ›å»ºä¸€ä¸ªæ–°çš„DMN,ç°åœ¨ç”»å¸ƒä¸Šå·²ç»å­˜åœ¨ä¸€ä¸ªå†³ç­–å…ƒç´ äº†ï¼Œé€‰æ‹©å®ƒï¼Œç„¶ååœ¨å³ä¾§å±æ€§é¢æ¿ä¸­æ›´æ”¹`Id`å’Œ`Name`ï¼Œè¿™é‡Œçš„Idéœ€è¦å’Œæµç¨‹ä¸­çš„`Decision Ref`å±æ€§ä¸€è‡´ï¼Œè¿™æ¬¡æˆ‘ä»¬è¾“å…¥Idä¸º`approve-payment`\n\n![image-20220904113803219](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220904113803219.png)\n\næ¥ä¸‹æ¥ï¼Œç‚¹å‡»å†³ç­–å…ƒç´ å·¦ä¸Šè§’çš„è¡¨æ ¼æŒ‰é’®ï¼Œåˆ›å»ºæ–°çš„DMNè¡¨.\n\n![image-20220904113905505](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220904113905505.png)\n\n\n\n### ç¼–è¾‘DMNè¡¨\n\né¦–å…ˆç¼–è¾‘è¾“å…¥å‚æ•°ï¼Œåœ¨æœ¬ä¾‹ä¸­ï¼Œä¸ºäº†ç®€å•ï¼Œæˆ‘ä»¬ä¾æ®é¡¹ç›®åè¿›è¡Œåˆ¤æ–­ï¼Œè§„åˆ™å¯ä»¥ä½¿ç”¨ `FEEL è¡¨è¾¾å¼`ã€`JUEL`æˆ–è€… `Script` ä¹¦å†™ï¼Œè¯¦æƒ…å¯ä»¥é˜…è¯» https://docs.camunda.org/manual/latest/user-guide/dmn-engine/expressions-and-scripts/\n\nåŒå‡»è¡¨æ ¼ä¸­çš„*Input*ï¼Œç¼–è¾‘ç¬¬ä¸€ä¸ªè¾“å…¥å‚æ•°\n\n![image-20220904114105012](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220904114105012.png)\n\nä¸‹é¢ï¼Œè®¾ç½®è¾“å…¥å‚æ•°ï¼ŒåŒå‡»*Output*ç¼–è¾‘\n\n![image-20220904114133016](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220904114133016.png)\n\nä¸‹é¢ï¼Œæˆ‘ä»¬ç‚¹å‡»å·¦ä¾§çš„è“è‰²åŠ å·ï¼Œæ·»åŠ ä¸€äº›è§„åˆ™ï¼Œæœ€åç±»ä¼¼è¿™æ ·ï¼š\n\n![image-20220904114210501](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220904114210501.png)\n\n\n\n### éƒ¨ç½²DMNè¡¨\n\nç‚¹å‡»åº•éƒ¨çš„éƒ¨ç½²æŒ‰é’®ï¼Œå°†DMNéƒ¨ç½²åˆ°æµç¨‹å¼•æ“ä¸­\n\n![image-20220904114317458](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220904114317458.png)\n\n\n\n### æµç¨‹æ¡ˆä¾‹æµ‹è¯•\n\nç°åœ¨æ‰“å¼€ http://localhost:8080/camunda/app/cockpit/ ï¼Œä½¿ç”¨demo/demoç™»å½•ï¼Œå¯ä»¥çœ‹åˆ°å†³ç­–å®šä¹‰å¢åŠ äº†ä¸€ä¸ªï¼Œç‚¹å‡»è¿›å»å¯ä»¥çœ‹åˆ°åˆšæ‰ç¼–è¾‘çš„DMN.\n\n![image-20220904114413678](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220904114413678.png)\n\nç‚¹å‡»è¿›å»å¯ä»¥çœ‹åˆ°å¯¹åº”çš„å†³ç­–ä¿¡æ¯\n\n![image-20220904114452196](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220904114452196.png)\n\n\n\nç„¶åæˆ‘ä»¬éƒ¨ç½²æµç¨‹ç„¶åå¯åŠ¨æµç¨‹\n\n![image-20220904114623954](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220904114623954.png)\n\nè¯¥æµç¨‹å†³ç­–è¾“å‡ºçš„`approved`ä¸ºtrue\n\n![image-20220904114740904](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220904114740904.png)\n\n\n\næ›´æ”¹ä¸‹è¾“å…¥çš„å‚æ•°\n\n![image-20220904114822563](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220904114822563.png)\n\nè¯¥å†³ç­–ä¸­è¾“å‡ºçš„`approved`ä¸ºfalse\n\n![image-20220904114913062](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220904114913062.png)\n\nå¥½äº†~åˆ°æ­¤Camundaçš„åŸºç¡€å…¥é—¨æ¡ˆä¾‹æˆ‘ä»¬å°±è®²è§£åˆ°è¿™é‡Œï¼Œéœ€è¦è·å–æ›´å¤šCamundaç›¸å…³è¯¾ç¨‹è§†é¢‘çš„å¯ä»¥ç»§ç»­å…³æ³¨æ³¢å“¥çš„Bè´¦å·ï¼Œæˆ–è€…æ·»åŠ æ³¢å“¥å¾®ä¿¡(boge_java/boge3306)\n\n![image-20220904115333970](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220904115333970.png)\n\n","source":"_posts/2022/10/camundaåŸºç¡€ç¯‡.md","raw":"---\ntitle: camundaåŸºç¡€ç¯‡\ndate: 2022-10-20 16:38:59\ntags: [BPMN,camunda]\ncategories: [ç¬”è®°]\n---\n# Camunda-çƒ­é—¨å·¥ä½œæµå¼•æ“æ¡†æ¶\n> Lectureï¼šæ³¢å“¥\n\n![image-20220902232358815](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220902232358815.png)\n\n# å·¥ä½œæµç›¸å…³ä»‹ç»\n\n**BPM**(BusinessProcessManagement)ï¼Œä¸šåŠ¡æµç¨‹ç®¡ç†æ˜¯ä¸€ç§ç®¡ç†åŸåˆ™ï¼Œé€šå¸¸ä¹Ÿå¯ä»¥ä»£æŒ‡BPMS(BusinessProcessManagementSuite)ï¼Œæ˜¯ä¸€ä¸ªå®ç°æ•´åˆä¸åŒç³»ç»Ÿå’Œæ•°æ®çš„æµç¨‹ç®¡ç†è½¯ä»¶å¥—ä»¶.\n\n**BPMN**(BusinessProcessModelandNotation)æ˜¯åŸºäºæµç¨‹å›¾çš„é€šç”¨å¯è§†åŒ–æ ‡å‡†ã€‚è¯¥æµç¨‹å›¾è¢«è®¾è®¡ç”¨äºåˆ›å»ºä¸šåŠ¡æµç¨‹æ“ä½œçš„å›¾å½¢åŒ–æ¨¡å‹ã€‚ä¸šåŠ¡æµç¨‹æ¨¡å‹å°±æ˜¯å›¾å½¢åŒ–å¯¹è±¡çš„ç½‘çŠ¶å›¾ï¼ŒåŒ…æ‹¬æ´»åŠ¨å’Œç”¨äºå®šä¹‰è¿™äº›æ´»åŠ¨æ‰§è¡Œé¡ºåºçš„`æµç¨‹è®¾è®¡å™¨`ã€‚BPMN2.0æ­£å¼ç‰ˆæœ¬äº2011å¹´1æœˆ3æ—¥å‘å¸ƒï¼Œå¸¸è§çš„`å·¥ä½œæµå¼•æ“`å¦‚ï¼šActivitiã€Flowableã€jBPM éƒ½åŸºäº BPMN 2.0 æ ‡å‡†ã€‚\n\nç„¶åæ¥çœ‹çœ‹BPMçš„å‘å±•å†ç¨‹ï¼š\n\n![image-20220830005000114](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220830005000114.png)\n\n# Camundaä»‹ç»\n\nå®˜ç½‘åœ°å€ï¼šhttps://camunda.com/\n\nä¸­æ–‡ç«™ç‚¹ï¼šhttp://camunda-cn.shaochenfeng.com/\n\nä¸‹è½½ï¼šhttps://downloads.camunda.cloud/release/camunda-bpm/run/7.15/\n\næ¡ˆä¾‹åœ°å€ï¼š[Congratulation! | docs.camunda.org](https://docs.camunda.org/get-started/quick-start/complete/)\n\nå‰æœŸå‡†å¤‡å·¥ä½œ: JAVA1.8ä»¥ä¸Šçš„JREæˆ–JDK\n\n## Camunda Modeler \n\nCamunda Modeler æ˜¯Camunda å®˜æ–¹æä¾›çš„ä¸€ä¸ªæµç¨‹è®¾è®¡å™¨ï¼Œç”¨äºç¼–è¾‘æµç¨‹å›¾ä»¥åŠå…¶ä»–æ¨¡å‹ã€è¡¨å•ã€‘ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªæµç¨‹å›¾çš„ç»˜å›¾å·¥å…·ã€‚å¯ä»¥å®˜æ–¹ä¸‹è½½ï¼Œä¹Ÿå¯ä»¥åœ¨æä¾›ç»™å¤§å®¶çš„èµ„æ–™ä¸­è·å–ã€‚è·å–åç›´æ¥è§£å‹ç¼©å³å¯ï¼Œæ³¨æ„ï¼šè§£å‹å®‰è£…åˆ°éä¸­æ–‡ç›®å½•ä¸­!!!\n\n![image-20220901105936567](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220901105936567.png)\n\n\n\nå¯åŠ¨çš„æ•ˆæœï¼š\n\n![image-20220901110007447](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220901110007447.png)\n\n\n\n## Camunda BPM\n\nä¸‹è½½åœ°å€ https://camunda.com/download/\n\nCamunda BPM æ˜¯Camundaå®˜æ–¹æä¾›çš„ä¸€ä¸ª`ä¸šåŠ¡æµç¨‹ç®¡ç†`å¹³å°,ç”¨æ¥ç®¡ç†ï¼Œéƒ¨ç½²çš„æµç¨‹å®šä¹‰ã€æ‰§è¡Œä»»åŠ¡ï¼Œç­–ç•¥ç­‰ã€‚ä¸‹è½½å®‰è£…ä¸€ä¸ªCamundaå¹³å°ï¼ŒæˆåŠŸè§£å‹ Camunda å¹³å°çš„å‘è¡Œç‰ˆåï¼Œæ‰§è¡Œåä¸ºstart.batï¼ˆå¯¹äº Windows ç”¨æˆ·ï¼‰æˆ–start.shï¼ˆå¯¹äº Unix ç”¨æˆ·ï¼‰çš„è„šæœ¬ã€‚æ­¤è„šæœ¬å°†å¯åŠ¨åº”ç”¨ç¨‹åºæœåŠ¡å™¨ã€‚\n\n![image-20220901110225636](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220901110225636.png)\n\næ‰“å¼€æ‚¨çš„ Web æµè§ˆå™¨å¹¶å¯¼èˆªåˆ°http://localhost:8080/ä»¥è®¿é—®æ¬¢è¿é¡µé¢ï¼ŒCamundaçš„ç®¡ç†å¹³å°ã€‚\n\n\n\n![image-20220718162641800](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220718162641800.png)\n\n\n\nç™»å½•æˆåŠŸçš„ä¸»é¡µï¼š\n\n![image-20220718162726028](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220718162726028.png)\n\n\n\n\n\n\n\n## å…¥é—¨æ¡ˆä¾‹\n\n### åˆ›å»ºç®€å•æµç¨‹\n\næˆ‘ä»¬å…ˆé€šè¿‡ Modeler æ¥ç»˜åˆ¶ä¸€ä¸ªç®€å•æµç¨‹\n\n1.) åˆ›å»ºæµç¨‹ï¼šé€‰æ‹© BPMN diagram (Camunda Platform)\n\n![image-20220901110718700](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220901110718700.png)\n\n2.) åˆ›å»ºå¼€å§‹èŠ‚ç‚¹ï¼šå¹¶è®¾å®šèŠ‚ç‚¹åç§°\n\n![image-20220901110850675](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220901110850675.png)\n\n3.) åˆ›å»ºæœåŠ¡èŠ‚ç‚¹ï¼šè®¾ç½®å¤„ç†æ–¹å¼\n\n![image-20220901110926577](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220901110926577.png)\n\n![image-20220901111045576](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220901111045576.png)\n\næˆ‘ä»¬åˆ‡æ¢èŠ‚ç‚¹çš„ç±»å‹ä¸º `service Task`\n\n![image-20220901111125584](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220901111125584.png)\n\n![image-20220901111141656](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220901111141656.png)\n\nç„¶åæˆ‘ä»¬éœ€è¦é…ç½®`åˆ·å¡ä»˜æ¬¾`èŠ‚ç‚¹ï¼ŒæœåŠ¡ç±»å‹æœ‰å¾ˆå¤šæ‰§è¡Œçš„æ–¹æ³•ï¼Œè¿™æ¬¡æˆ‘ä»¬ä½¿ç”¨â€œexternalï¼ˆå¤–éƒ¨ï¼‰â€ä»»åŠ¡æ¨¡å¼ã€‚\n\n![image-20220901111330988](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220901111330988.png)\n\nå…·ä½“é…ç½®å†…å®¹ä¸º\n\n![image-20220901111419588](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220901111419588.png)\n\n\n\n4.) æ·»åŠ ç»“æŸèŠ‚ç‚¹\n\n![image-20220901111521063](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220901111521063.png)\n\n\n\n5.) é…ç½®æµç¨‹å‚æ•°\n\nç‚¹å‡»ç”»å¸ƒçš„ç©ºç™½å¤„ï¼Œå³ä¾§çš„é¢æ¿ä¼šæ˜¾ç¤ºå½“å‰æµç¨‹æœ¬èº«çš„å‚æ•°,è¿™é‡Œæˆ‘ä»¬ä¿®æ”¹idä¸º*payment-retrieval*ï¼Œidæ˜¯åŒºåˆ†æµç¨‹çš„æ ‡è¯†ç„¶åä¿®æ”¹Name ä¸ºâ€œä»˜æ¬¾æµç¨‹â€æœ€åç¡®ä¿ `Executable`æ˜¯å‹¾é€‰çš„ï¼Œåªæœ‰`Executable`è¢«å‹¾é€‰ï¼Œæµç¨‹æ‰èƒ½æ‰§è¡Œ\n\n![image-20220901111725855](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220901111725855.png)\n\n\n\n### å¤–éƒ¨ä»»åŠ¡\n\nåœ¨ä¸Šé¢è®¾è®¡çš„æµç¨‹å›¾ï¼Œ`åˆ·å¡ä»˜æ¬¾`èŠ‚ç‚¹çš„å¤„ç†æ˜¯å¤–éƒ¨ä»»åŠ¡ï¼ŒCamunda å¯ä»¥ä½¿å¤šç§è¯­è¨€å®ç°ä¸šåŠ¡é€»è¾‘ï¼Œæˆ‘ä»¬ä»¥Javaä¸ºä¾‹æ¥ä»‹ç»ã€‚\n\næ·»åŠ ç›¸å…³çš„ä¾èµ–ï¼š\n\n```xml\n    <dependencies>\n\t\t<dependency>\n\t\t\t<groupId>org.camunda.bpm</groupId>\n\t\t\t<artifactId>camunda-external-task-client</artifactId>\n\t\t\t<version>7.15.0</version>\n\t\t</dependency>\n\t\t<dependency>\n\t\t\t<groupId>org.slf4j</groupId>\n\t\t\t<artifactId>slf4j-simple</artifactId>\n\t\t\t<version>1.6.1</version>\n\t\t</dependency>\n\t\t<dependency>\n\t\t\t<groupId>javax.xml.bind</groupId>\n\t\t\t<artifactId>jaxb-api</artifactId>\n\t\t\t<version>2.3.1</version>\n\t\t</dependency>\n\t</dependencies>\n\n```\n\nç¼–å†™å¤„ç†çš„ä¸šåŠ¡é€»è¾‘çš„ä»£ç \n\n```java\nimport org.camunda.bpm.client.ExternalTaskClient;\n\nimport java.awt.*;\nimport java.net.URI;\n\npublic class Demo01 {\n    public static void main(String[] args) {\n        ExternalTaskClient client = ExternalTaskClient.create()\n                .baseUrl(\"http://localhost:8080/engine-rest\")\n                .asyncResponseTimeout(10000) // é•¿è½®è¯¢è¶…æ—¶æ—¶é—´\n                .build();\n        // è®¢é˜…æŒ‡å®šçš„å¤–éƒ¨ä»»åŠ¡\n        client.subscribe(\"charge-card\")\n                .lockDuration(1000)\n                .handler(((externalTask, externalTaskService) -> {\n                    // è·å–æµç¨‹å˜é‡\n                    String item = (String) externalTask.getVariable(\"item\");\n                    Long amount = (Long) externalTask.getVariable(\"amount\");\n                    System.out.println(\"item--->\"+item + \"  amount-->\" + amount);\n                    try {\n                        Desktop.getDesktop().browse(new URI(\"https://docs.camunda.org/get-started/quick-start/complete\"));\n                    } catch (Exception e) {\n                        e.printStackTrace();\n                    }\n\n                    // å®Œæˆä»»åŠ¡\n                    externalTaskService.complete(externalTask);\n                })).open();\n    }\n}\n\n```\n\nè¿è¡Œè¯¥æ–¹æ³•å³å¯ï¼Œå½“æµç¨‹å¤„ç†æ—¶ä¼šæ‰§è¡Œç›¸å…³é€»è¾‘ã€‚\n\n\n\n### 3.3 éƒ¨ç½²æµç¨‹\n\næ¥ä¸‹æ¥æˆ‘ä»¬å°±å¯ä»¥æ¥éƒ¨ç½²ä¸Šé¢å®šä¹‰çš„æµç¨‹äº†ã€‚ä½¿ç”¨ Camunda Modeler éƒ¨ç½²æµç¨‹ï¼Œç‚¹å‡»å·¥å…·æ ä¸­çš„éƒ¨ç½²æŒ‰é’®å¯ä»¥å°†å½“å‰æµç¨‹éƒ¨ç½²åˆ°æµç¨‹å¼•æ“ï¼Œç‚¹å‡»éƒ¨ç½²æŒ‰é’®ï¼Œè¾“å…¥Deployment Name ä¸º â€œPaymentâ€ ï¼Œè¾“å…¥ä¸‹æ–¹REST Endpoint ä¸ºhttp://localhost:8080/engine-rest ï¼Œç„¶åç‚¹å‡»å³ä¸‹è§’Deployéƒ¨ç½²\n\n\néƒ¨ç½²æ“ä½œï¼š\n\n![image-20220901102738775](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220901102738775.png)\n\néƒ¨ç½²çš„æ—¶å€™æŠ¥é”™ï¼šåŸå› æ˜¯å®‰è£…è·¯å¾„ä¸­æœ‰ä¸­æ–‡\n\n![image-20220901101904825](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220901101904825.png)\n\n\n\néƒ¨ç½²æˆåŠŸï¼š\n\n![image-20220901102705446](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220901102705446.png)\n\n\n\nç„¶ååœ¨BPMä¸­æˆ‘ä»¬å¯ä»¥æŸ¥çœ‹éƒ¨ç½²çš„æµç¨‹ï¼š\n\n![image-20220901112401741](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220901112401741.png)\n\n\n\n\n\n### å¯åŠ¨æµç¨‹\n\næˆ‘ä»¬ä½¿ç”¨Rest APIå‘èµ·æµç¨‹ï¼Œæ‰€ä»¥éœ€è¦ä¸€ä¸ªæ¥å£æµ‹è¯•å·¥å…·ï¼ˆä¾‹å¦‚ï¼šPostmanï¼‰ï¼Œæˆ–è€…ä¹Ÿå¯ä»¥ä½¿ç”¨ç”µè„‘è‡ªå¸¦çš„curl\n\ncurlæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤\n\n```curl\ncurl -H \"Content-Type: application/json\" -X POST -d '{\"variables\": {\"amount\": {\"value\":555,\"type\":\"long\"}, \"item\": {\"value\":\"item-xyz\"} } }' http://localhost:8080/engine-rest/process-definition/key/payment-retrieval/start\n\n```\n\npostmanæ–¹å¼å¤„ç†\n\nåœ¨urlä¸­è¾“å…¥ï¼šhttp://localhost:8080/engine-rest/process-definition/key/payment-retrieval/start é€šè¿‡`POST`æ–¹å¼æäº¤ï¼Œæäº¤çš„æ–¹å¼æ˜¯`JSON` æ•°æ®ï¼Œå…·ä½“å†…å®¹ä¸ºï¼š\n\n```json\n{\n\t\"variables\": {\n\t\t\"amount\": {\n\t\t\t\"value\":555,\n\t\t\t\"type\":\"long\"\n\t\t},\n\t\t\"item\": {\n\t\t\t\"value\": \"item-xyz\"\n\t\t}\n\t}\n}\n\n```\n\n![image-20220901112634925](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220901112634925.png)\n\nç„¶åæˆ‘ä»¬ç‚¹å‡»å‘é€ï¼Œæ“ä½œæˆåŠŸå¯ä»¥çœ‹åˆ°å¦‚ä¸‹çš„è¿”å›ä¿¡æ¯\n\n![image-20220901112709320](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220901112709320.png)\n\n\n\nåŒæ—¶ä»»åŠ¡æ‰§è¡Œåæˆ‘ä»¬åœ¨æ§åˆ¶å°å¯ä»¥çœ‹åˆ°ç›¸å…³çš„ä¿¡æ¯\n\n![image-20220901112810150](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220901112810150.png)\n\n\n\n\n\n# æ¡ˆä¾‹æ‰©å±•\n\nä¸Šé¢çš„æ¡ˆä¾‹è¿‡äºç®€å•ï¼Œæˆ‘ä»¬æ·»åŠ ä¸åŒçš„ä»»åŠ¡èŠ‚ç‚¹å’Œç½‘å…³æ¥ä¸°å¯Œä¸‹\n\n## ç”¨æˆ·ä»»åŠ¡\n\n\n\n### æ·»åŠ èŠ‚ç‚¹\n\nÂ æˆ‘ä»¬åœ¨ä¸Šé¢çš„æ¡ˆä¾‹ä¸­æ·»åŠ ä¸€ä¸ª`ç”¨æˆ·ä»»åŠ¡`æ¥å¤„ç†æµç¨‹ã€‚\n\n![image-20220903233945199](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220903233945199.png)\n\nç‚¹å‡»åˆšåˆšåˆ›å»ºçš„`æ‰¹å‡†ä»˜æ¬¾`èŠ‚ç‚¹ï¼Œç„¶åé€šè¿‡æ‰³æ‰‹è®¾ç½®èŠ‚ç‚¹çš„ç±»å‹ä¸º`ç”¨æˆ·ä»»åŠ¡`(User Task)\n\n![image-20220903234050669](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220903234050669.png)\n\n\n\nç„¶åè®¾ç½®èŠ‚ç‚¹çš„å®¡æ‰¹äººä¸º`demo`\n\n![image-20220903234231682](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220903234231682.png)\n\n\n\n### é…ç½®è¡¨å•\n\nåœ¨`ç”¨æˆ·èŠ‚ç‚¹`å¤„æˆ‘ä»¬ç»‘å®šè¡¨å•æ•°æ®ã€‚ç„¶ååˆ›å»ºè¡¨å•ç›¸å…³çš„å­—æ®µï¼Œå¹¶æ·»åŠ å¯¹åº”çš„æè¿°ä¿¡æ¯ã€‚\n\n![image-20220904001026418](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220904001026418.png)\n\n> amountå­—æ®µï¼š\n>\n> â€‹     ID:amount\n>\n> â€‹     Type:long\n>\n> â€‹     Label:é‡‘é¢\n>\n> Itemå­—æ®µï¼š\n>\n> â€‹     ID:item\n>\n> â€‹     Type:string\n>\n> â€‹     Label:é¡¹ç›®\n>\n> Approvedå­—æ®µï¼š\n>\n> â€‹     ID:approved\n>\n> â€‹     Type:boolean\n>\n> â€‹     Label:æ˜¯å¦åŒæ„\n\n\n\n### éƒ¨ç½²æµç¨‹\n\næµç¨‹å®šä¹‰å¥½ä¹‹åæˆ‘ä»¬å°±å¯ä»¥éƒ¨ç½²æµç¨‹äº†ã€‚ç›´æ¥åœ¨`Camunda Modeler`å·¥å…·æ ä¸Šçš„ä¸Šä¼ æŒ‰é’®å°†æµç¨‹ä¸Šä¼ åˆ°æµç¨‹å¼•æ“ä¸­ã€‚éƒ¨ç½²ååœ¨`Camunda Web`ä¸­æŸ¥çœ‹éƒ¨ç½²çš„æµç¨‹ã€‚\n\n![image-20220904001636662](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220904001636662.png)\n\n\n\n\n\n### æµ‹è¯•æµç¨‹\n\næ‰“å¼€ä»»åŠ¡åˆ—è¡¨ï¼ˆhttp://localhost:8080/camunda/app/tasklist/ï¼‰ï¼Œä½¿ç”¨ demo / demo ç™»å½•ã€‚ç‚¹å‡»å³ä¸Šè§’çš„ `Start process` ï¼Œåœ¨å¼¹å‡ºçš„å¯¹è¯æ¡†ä¸­é€‰æ‹©â€œä»˜æ¬¾æµç¨‹â€.\n\n![image-20220904001816475](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220904001816475.png)\n\nè¿™æ—¶ä¼šå¼¹å‡ºç¼–è¾‘æµç¨‹å˜é‡çš„å¯¹è¯æ¡†ï¼Œå¯ä»¥é€šè¿‡ç‚¹å‡» Add a variable æŒ‰é’®æ·»åŠ å˜é‡ï¼Œè¿™æ¬¡æˆ‘ä»¬å…ˆä¸æ·»åŠ ï¼Œç›´æ¥ç‚¹å‡»å³ä¸‹è§’` Start `å¯åŠ¨æµç¨‹ã€‚\n\n![image-20220904001902564](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220904001902564.png)\n\nè¿™æ—¶ï¼Œåœ¨ä»»åŠ¡åˆ—è¡¨åº”è¯¥å°±èƒ½çœ‹åˆ°åˆšåˆ›å»ºçš„äººå·¥ä»»åŠ¡äº†ï¼Œå¦‚æœæ²¡æœ‰å¯ä»¥æ‰‹åŠ¨åˆ·æ–°ä¸€ä¸‹\n\n![image-20220904001953028](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220904001953028.png)\n\n\n\nåˆ°è¿™å„¿è¿™ä¸ª`ç”¨æˆ·ä»»åŠ¡`èŠ‚ç‚¹çš„äººå·¥å®¡æ ¸å°±åº”è¯¥è¦å¤„ç†äº†ï¼Œæˆ‘ä»¬åœ¨ä¸‹ä¸€ä¸ªæ¡ˆä¾‹ä¸­ç»§ç»­è¿™ä¸ªæ¡ˆä¾‹ï¼Œæˆ‘ä»¬åŠ å…¥æ’ä»–ç½‘å…³æ¥å¤„ç†ã€‚\n\n\n\n\n\n## æ’ä»–ç½‘å…³\n\næˆ‘ä»¬å°†ä½¿ç”¨**æ’ä»–ç½‘å…³**(*Exclusive Gateways*)ï¼Œä¸ºæµç¨‹æ·»åŠ åˆ†æ”¯ï¼Œä»…åœ¨é‡‘é¢è¶³å¤Ÿå¤§çš„æ—¶å€™è¿›è¡Œäººå·¥å®¡æ ¸.\n\n### æ·»åŠ ç½‘å…³èŠ‚ç‚¹\n\né¦–å…ˆæ‰“å¼€`Camunda Modeler `ï¼Œåœ¨å·¦ä¾§çš„å·¥å…·æ¶ä¸­æ‰¾åˆ°ç½‘å…³ï¼ˆè±å½¢ï¼‰ï¼Œå°†å®ƒæ‹–åŠ¨åˆ°â€œä»˜æ¬¾è¯·æ±‚â€å’Œâ€œåˆ·å¡ä»˜æ¬¾â€ä¹‹é—´ï¼Œå°†â€œæ‰¹å‡†ä»˜æ¬¾â€å‘ä¸‹ç§»åŠ¨å†æ·»åŠ ä¸€ä¸ªç½‘å…³ï¼Œè°ƒæ•´æµç¨‹ï¼Œæœ€åçœ‹èµ·æ¥ç±»ä¼¼è¿™æ ·ï¼š\n\n![image-20220904004632887](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220904004632887.png)\n\n\n\n### é…ç½®ç½‘å…³\n\næ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬é€‰æ‹©â€œ<1000â€çš„è¿çº¿ï¼Œæ‰“å¼€å±æ€§é¢æ¿ï¼Œé€‰æ‹©â€œCondition Typeâ€ä¸ºâ€œExpressionâ€ï¼Œè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨[JAVAç»Ÿä¸€è¡¨è¾¾å¼è¯­è¨€](https://docs.camunda.org/manual/latest/user-guide/process-engine/expression-language/)ç¼–å†™æ¡ä»¶ï¼Œè¿™é‡Œè¦åšçš„æ˜¯åœ¨é‡‘é¢å°äº1000æ—¶ç›´æ¥åˆ·å¡ä»˜æ¬¾ï¼Œåˆ™è¾“å…¥è¡¨è¾¾å¼ `${amount<1000}`\n\n![image-20220904004725626](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220904004725626.png)\n\nåŒæ ·çš„ï¼Œå¯¹å¦ä¸€æ¡çº¿ä¹Ÿè¿›è¡Œé…ç½®ï¼Œè¡¨è¾¾å¼ä¸º`${amount>=1000}`\n\n![image-20220904004747234](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220904004747234.png)\n\nç„¶å`æ˜¯å¦æ‰¹å‡†`çš„æ’ä»–ç½‘å…³èŠ‚ç‚¹æˆ‘ä»¬ä¹Ÿéœ€è¦å¤„ç†ä¸‹\n\n![image-20220904004845594](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220904004845594.png)\n\n![image-20220904004910392](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220904004910392.png)\n\n\n\n### éƒ¨ç½²æµç¨‹\n\néƒ¨ç½²æµç¨‹å’Œä¸Šé¢çš„æ“ä½œæ˜¯ä¸€æ ·çš„ã€‚\n\n![image-20220904005023089](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220904005023089.png)\n\n\n\n### æµ‹è¯•æ“ä½œ\n\næ‰“å¼€ä»»åŠ¡åˆ—è¡¨ï¼ˆhttp://localhost:8080/camunda/app/tasklist/ï¼‰ï¼Œä½¿ç”¨ demo / demo ç™»å½•,ç‚¹å‡»å³ä¸Šè§’çš„ Start process ï¼Œåœ¨å¼¹å‡ºçš„å¯¹è¯æ¡†ä¸­é€‰æ‹©â€œä»˜æ¬¾æµç¨‹â€,ä¸Šé¢ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ç›´æ¥ç‚¹å‡» Startï¼Œä½†è¿™æ¬¡æˆ‘ä»¬è¦å¢åŠ å‡ ä¸ªå˜é‡æ¥æµ‹è¯•åŠ¨æ€çš„æµç¨‹ã€‚\n\n![image-20220904005221732](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220904005221732.png)\n\nè¯•ç€æ›´æ”¹ `amount` çš„å€¼ï¼ŒæŸ¥çœ‹å¯¹æµç¨‹æ‰§è¡Œé¡ºåºçš„å½±å“\n\n\n\n\n\n## å†³ç­–è‡ªåŠ¨åŒ–\n\nåœ¨ä¸Šé¢çš„æ¡ˆä¾‹ä¸­æˆ‘ä»¬åœ¨å®¡æ‰¹æ—¶æ˜¯é€šè¿‡`ç”¨æˆ·ä»»åŠ¡`ç»“åˆè¡¨å•æ¥åšçš„å®¡æ‰¹ï¼Œæœ¬æ¡ˆä¾‹æˆ‘ä»¬æ¥çœ‹çœ‹æˆ‘ä»¬é€šè¿‡`DMN`ä¸ºæµç¨‹æ·»åŠ ä¸€ä¸ªä¸šåŠ¡è§„åˆ™æ¥å¤„ç†\n\n### æ·»åŠ ä¸šåŠ¡è§„åˆ™\n\næ‰“å¼€ Camunda Modelerï¼Œç‚¹å‡» â€œæ‰¹å‡†ä»˜æ¬¾â€ï¼Œåœ¨å³é¢çš„æ‰³æ‰‹èœå•ä¸­ï¼Œå°†ç±»å‹æ”¹ä¸ºâ€œ**Business Rule Task** â€ï¼ˆä¸šåŠ¡è§„åˆ™ä»»åŠ¡ï¼‰\n\n![image-20220904113549016](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220904113549016.png)\n\nä¸‹ä¸€æ­¥ï¼Œå°†å±æ€§é¢æ¿ä¸­çš„ `Implementation` é€‰æ‹©ä¸º`DMN`ï¼Œè¾“å…¥ Decision Ref ä¸º `approve-payment`ï¼Œä¸ºäº†å°†å†³ç­–çš„ç»“æœå­˜å…¥æµç¨‹å˜é‡ï¼Œæˆ‘ä»¬è¿˜éœ€è¦ç¼–è¾‘ç»“æœå˜é‡Result Variable ä¸º`approved`ï¼Œç»“æœç±»å‹ Map Decision Result é€‰æ‹©ä¸º `singleEntry `ï¼Œæœ€åç»“æœå¦‚ä¸‹ï¼š\n\n\n![image-20220904113700661](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220904113700661.png)\n\n\n\n### åˆ›å»ºDMNè¡¨\n\nç‚¹å‡» `File > New File > DMN Diagram`åˆ›å»ºä¸€ä¸ªæ–°çš„DMN,ç°åœ¨ç”»å¸ƒä¸Šå·²ç»å­˜åœ¨ä¸€ä¸ªå†³ç­–å…ƒç´ äº†ï¼Œé€‰æ‹©å®ƒï¼Œç„¶ååœ¨å³ä¾§å±æ€§é¢æ¿ä¸­æ›´æ”¹`Id`å’Œ`Name`ï¼Œè¿™é‡Œçš„Idéœ€è¦å’Œæµç¨‹ä¸­çš„`Decision Ref`å±æ€§ä¸€è‡´ï¼Œè¿™æ¬¡æˆ‘ä»¬è¾“å…¥Idä¸º`approve-payment`\n\n![image-20220904113803219](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220904113803219.png)\n\næ¥ä¸‹æ¥ï¼Œç‚¹å‡»å†³ç­–å…ƒç´ å·¦ä¸Šè§’çš„è¡¨æ ¼æŒ‰é’®ï¼Œåˆ›å»ºæ–°çš„DMNè¡¨.\n\n![image-20220904113905505](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220904113905505.png)\n\n\n\n### ç¼–è¾‘DMNè¡¨\n\né¦–å…ˆç¼–è¾‘è¾“å…¥å‚æ•°ï¼Œåœ¨æœ¬ä¾‹ä¸­ï¼Œä¸ºäº†ç®€å•ï¼Œæˆ‘ä»¬ä¾æ®é¡¹ç›®åè¿›è¡Œåˆ¤æ–­ï¼Œè§„åˆ™å¯ä»¥ä½¿ç”¨ `FEEL è¡¨è¾¾å¼`ã€`JUEL`æˆ–è€… `Script` ä¹¦å†™ï¼Œè¯¦æƒ…å¯ä»¥é˜…è¯» https://docs.camunda.org/manual/latest/user-guide/dmn-engine/expressions-and-scripts/\n\nåŒå‡»è¡¨æ ¼ä¸­çš„*Input*ï¼Œç¼–è¾‘ç¬¬ä¸€ä¸ªè¾“å…¥å‚æ•°\n\n![image-20220904114105012](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220904114105012.png)\n\nä¸‹é¢ï¼Œè®¾ç½®è¾“å…¥å‚æ•°ï¼ŒåŒå‡»*Output*ç¼–è¾‘\n\n![image-20220904114133016](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220904114133016.png)\n\nä¸‹é¢ï¼Œæˆ‘ä»¬ç‚¹å‡»å·¦ä¾§çš„è“è‰²åŠ å·ï¼Œæ·»åŠ ä¸€äº›è§„åˆ™ï¼Œæœ€åç±»ä¼¼è¿™æ ·ï¼š\n\n![image-20220904114210501](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220904114210501.png)\n\n\n\n### éƒ¨ç½²DMNè¡¨\n\nç‚¹å‡»åº•éƒ¨çš„éƒ¨ç½²æŒ‰é’®ï¼Œå°†DMNéƒ¨ç½²åˆ°æµç¨‹å¼•æ“ä¸­\n\n![image-20220904114317458](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220904114317458.png)\n\n\n\n### æµç¨‹æ¡ˆä¾‹æµ‹è¯•\n\nç°åœ¨æ‰“å¼€ http://localhost:8080/camunda/app/cockpit/ ï¼Œä½¿ç”¨demo/demoç™»å½•ï¼Œå¯ä»¥çœ‹åˆ°å†³ç­–å®šä¹‰å¢åŠ äº†ä¸€ä¸ªï¼Œç‚¹å‡»è¿›å»å¯ä»¥çœ‹åˆ°åˆšæ‰ç¼–è¾‘çš„DMN.\n\n![image-20220904114413678](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220904114413678.png)\n\nç‚¹å‡»è¿›å»å¯ä»¥çœ‹åˆ°å¯¹åº”çš„å†³ç­–ä¿¡æ¯\n\n![image-20220904114452196](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220904114452196.png)\n\n\n\nç„¶åæˆ‘ä»¬éƒ¨ç½²æµç¨‹ç„¶åå¯åŠ¨æµç¨‹\n\n![image-20220904114623954](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220904114623954.png)\n\nè¯¥æµç¨‹å†³ç­–è¾“å‡ºçš„`approved`ä¸ºtrue\n\n![image-20220904114740904](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220904114740904.png)\n\n\n\næ›´æ”¹ä¸‹è¾“å…¥çš„å‚æ•°\n\n![image-20220904114822563](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220904114822563.png)\n\nè¯¥å†³ç­–ä¸­è¾“å‡ºçš„`approved`ä¸ºfalse\n\n![image-20220904114913062](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220904114913062.png)\n\nå¥½äº†~åˆ°æ­¤Camundaçš„åŸºç¡€å…¥é—¨æ¡ˆä¾‹æˆ‘ä»¬å°±è®²è§£åˆ°è¿™é‡Œï¼Œéœ€è¦è·å–æ›´å¤šCamundaç›¸å…³è¯¾ç¨‹è§†é¢‘çš„å¯ä»¥ç»§ç»­å…³æ³¨æ³¢å“¥çš„Bè´¦å·ï¼Œæˆ–è€…æ·»åŠ æ³¢å“¥å¾®ä¿¡(boge_java/boge3306)\n\n![image-20220904115333970](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220904115333970.png)\n\n","slug":"camundaåŸºç¡€ç¯‡","published":1,"updated":"2022-11-05T14:16:59.505Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clas9ersd0001dk8f2mgfh7zt","content":"<h1 id=\"Camunda-çƒ­é—¨å·¥ä½œæµå¼•æ“æ¡†æ¶\"><a href=\"#Camunda-çƒ­é—¨å·¥ä½œæµå¼•æ“æ¡†æ¶\" class=\"headerlink\" title=\"Camunda-çƒ­é—¨å·¥ä½œæµå¼•æ“æ¡†æ¶\"></a>Camunda-çƒ­é—¨å·¥ä½œæµå¼•æ“æ¡†æ¶</h1><blockquote>\n<p>Lectureï¼šæ³¢å“¥</p>\n</blockquote>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220902232358815.png\"\n                      alt=\"image-20220902232358815\"\n                ></p>\n<h1 id=\"å·¥ä½œæµç›¸å…³ä»‹ç»\"><a href=\"#å·¥ä½œæµç›¸å…³ä»‹ç»\" class=\"headerlink\" title=\"å·¥ä½œæµç›¸å…³ä»‹ç»\"></a>å·¥ä½œæµç›¸å…³ä»‹ç»</h1><p><strong>BPM</strong>(BusinessProcessManagement)ï¼Œä¸šåŠ¡æµç¨‹ç®¡ç†æ˜¯ä¸€ç§ç®¡ç†åŸåˆ™ï¼Œé€šå¸¸ä¹Ÿå¯ä»¥ä»£æŒ‡BPMS(BusinessProcessManagementSuite)ï¼Œæ˜¯ä¸€ä¸ªå®ç°æ•´åˆä¸åŒç³»ç»Ÿå’Œæ•°æ®çš„æµç¨‹ç®¡ç†è½¯ä»¶å¥—ä»¶.</p>\n<p><strong>BPMN</strong>(BusinessProcessModelandNotation)æ˜¯åŸºäºæµç¨‹å›¾çš„é€šç”¨å¯è§†åŒ–æ ‡å‡†ã€‚è¯¥æµç¨‹å›¾è¢«è®¾è®¡ç”¨äºåˆ›å»ºä¸šåŠ¡æµç¨‹æ“ä½œçš„å›¾å½¢åŒ–æ¨¡å‹ã€‚ä¸šåŠ¡æµç¨‹æ¨¡å‹å°±æ˜¯å›¾å½¢åŒ–å¯¹è±¡çš„ç½‘çŠ¶å›¾ï¼ŒåŒ…æ‹¬æ´»åŠ¨å’Œç”¨äºå®šä¹‰è¿™äº›æ´»åŠ¨æ‰§è¡Œé¡ºåºçš„<code>æµç¨‹è®¾è®¡å™¨</code>ã€‚BPMN2.0æ­£å¼ç‰ˆæœ¬äº2011å¹´1æœˆ3æ—¥å‘å¸ƒï¼Œå¸¸è§çš„<code>å·¥ä½œæµå¼•æ“</code>å¦‚ï¼šActivitiã€Flowableã€jBPM éƒ½åŸºäº BPMN 2.0 æ ‡å‡†ã€‚</p>\n<p>ç„¶åæ¥çœ‹çœ‹BPMçš„å‘å±•å†ç¨‹ï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220830005000114.png\"\n                      alt=\"image-20220830005000114\"\n                ></p>\n<h1 id=\"Camundaä»‹ç»\"><a href=\"#Camundaä»‹ç»\" class=\"headerlink\" title=\"Camundaä»‹ç»\"></a>Camundaä»‹ç»</h1><p>å®˜ç½‘åœ°å€ï¼š<a class=\"link\"   href=\"https://camunda.com/\" >https://camunda.com/<i class=\"fas fa-external-link-alt\"></i></a></p>\n<p>ä¸­æ–‡ç«™ç‚¹ï¼š<a class=\"link\"   href=\"http://camunda-cn.shaochenfeng.com/\" >http://camunda-cn.shaochenfeng.com/<i class=\"fas fa-external-link-alt\"></i></a></p>\n<p>ä¸‹è½½ï¼š<a class=\"link\"   href=\"https://downloads.camunda.cloud/release/camunda-bpm/run/7.15/\" >https://downloads.camunda.cloud/release/camunda-bpm/run/7.15/<i class=\"fas fa-external-link-alt\"></i></a></p>\n<p>æ¡ˆä¾‹åœ°å€ï¼š<a class=\"link\"   href=\"https://docs.camunda.org/get-started/quick-start/complete/\" >Congratulation! | docs.camunda.org<i class=\"fas fa-external-link-alt\"></i></a></p>\n<p>å‰æœŸå‡†å¤‡å·¥ä½œ: JAVA1.8ä»¥ä¸Šçš„JREæˆ–JDK</p>\n<h2 id=\"Camunda-Modeler\"><a href=\"#Camunda-Modeler\" class=\"headerlink\" title=\"Camunda Modeler\"></a>Camunda Modeler</h2><p>Camunda Modeler æ˜¯Camunda å®˜æ–¹æä¾›çš„ä¸€ä¸ªæµç¨‹è®¾è®¡å™¨ï¼Œç”¨äºç¼–è¾‘æµç¨‹å›¾ä»¥åŠå…¶ä»–æ¨¡å‹ã€è¡¨å•ã€‘ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªæµç¨‹å›¾çš„ç»˜å›¾å·¥å…·ã€‚å¯ä»¥å®˜æ–¹ä¸‹è½½ï¼Œä¹Ÿå¯ä»¥åœ¨æä¾›ç»™å¤§å®¶çš„èµ„æ–™ä¸­è·å–ã€‚è·å–åç›´æ¥è§£å‹ç¼©å³å¯ï¼Œæ³¨æ„ï¼šè§£å‹å®‰è£…åˆ°éä¸­æ–‡ç›®å½•ä¸­!!!</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220901105936567.png\"\n                      alt=\"image-20220901105936567\"\n                ></p>\n<p>å¯åŠ¨çš„æ•ˆæœï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220901110007447.png\"\n                      alt=\"image-20220901110007447\"\n                ></p>\n<h2 id=\"Camunda-BPM\"><a href=\"#Camunda-BPM\" class=\"headerlink\" title=\"Camunda BPM\"></a>Camunda BPM</h2><p>ä¸‹è½½åœ°å€ <a class=\"link\"   href=\"https://camunda.com/download/\" >https://camunda.com/download/<i class=\"fas fa-external-link-alt\"></i></a></p>\n<p>Camunda BPM æ˜¯Camundaå®˜æ–¹æä¾›çš„ä¸€ä¸ª<code>ä¸šåŠ¡æµç¨‹ç®¡ç†</code>å¹³å°,ç”¨æ¥ç®¡ç†ï¼Œéƒ¨ç½²çš„æµç¨‹å®šä¹‰ã€æ‰§è¡Œä»»åŠ¡ï¼Œç­–ç•¥ç­‰ã€‚ä¸‹è½½å®‰è£…ä¸€ä¸ªCamundaå¹³å°ï¼ŒæˆåŠŸè§£å‹ Camunda å¹³å°çš„å‘è¡Œç‰ˆåï¼Œæ‰§è¡Œåä¸ºstart.batï¼ˆå¯¹äº Windows ç”¨æˆ·ï¼‰æˆ–start.shï¼ˆå¯¹äº Unix ç”¨æˆ·ï¼‰çš„è„šæœ¬ã€‚æ­¤è„šæœ¬å°†å¯åŠ¨åº”ç”¨ç¨‹åºæœåŠ¡å™¨ã€‚</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220901110225636.png\"\n                      alt=\"image-20220901110225636\"\n                ></p>\n<p>æ‰“å¼€æ‚¨çš„ Web æµè§ˆå™¨å¹¶å¯¼èˆªåˆ°<a class=\"link\"   href=\"http://localhost:8080/%E4%BB%A5%E8%AE%BF%E9%97%AE%E6%AC%A2%E8%BF%8E%E9%A1%B5%E9%9D%A2%EF%BC%8CCamunda%E7%9A%84%E7%AE%A1%E7%90%86%E5%B9%B3%E5%8F%B0%E3%80%82\" >http://localhost:8080/ä»¥è®¿é—®æ¬¢è¿é¡µé¢ï¼ŒCamundaçš„ç®¡ç†å¹³å°ã€‚<i class=\"fas fa-external-link-alt\"></i></a></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220718162641800.png\"\n                      alt=\"image-20220718162641800\"\n                ></p>\n<p>ç™»å½•æˆåŠŸçš„ä¸»é¡µï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220718162726028.png\"\n                      alt=\"image-20220718162726028\"\n                ></p>\n<h2 id=\"å…¥é—¨æ¡ˆä¾‹\"><a href=\"#å…¥é—¨æ¡ˆä¾‹\" class=\"headerlink\" title=\"å…¥é—¨æ¡ˆä¾‹\"></a>å…¥é—¨æ¡ˆä¾‹</h2><h3 id=\"åˆ›å»ºç®€å•æµç¨‹\"><a href=\"#åˆ›å»ºç®€å•æµç¨‹\" class=\"headerlink\" title=\"åˆ›å»ºç®€å•æµç¨‹\"></a>åˆ›å»ºç®€å•æµç¨‹</h3><p>æˆ‘ä»¬å…ˆé€šè¿‡ Modeler æ¥ç»˜åˆ¶ä¸€ä¸ªç®€å•æµç¨‹</p>\n<p>1.) åˆ›å»ºæµç¨‹ï¼šé€‰æ‹© BPMN diagram (Camunda Platform)</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220901110718700.png\"\n                      alt=\"image-20220901110718700\"\n                ></p>\n<p>2.) åˆ›å»ºå¼€å§‹èŠ‚ç‚¹ï¼šå¹¶è®¾å®šèŠ‚ç‚¹åç§°</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220901110850675.png\"\n                      alt=\"image-20220901110850675\"\n                ></p>\n<p>3.) åˆ›å»ºæœåŠ¡èŠ‚ç‚¹ï¼šè®¾ç½®å¤„ç†æ–¹å¼</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220901110926577.png\"\n                      alt=\"image-20220901110926577\"\n                ></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220901111045576.png\"\n                      alt=\"image-20220901111045576\"\n                ></p>\n<p>æˆ‘ä»¬åˆ‡æ¢èŠ‚ç‚¹çš„ç±»å‹ä¸º <code>service Task</code></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220901111125584.png\"\n                      alt=\"image-20220901111125584\"\n                ></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220901111141656.png\"\n                      alt=\"image-20220901111141656\"\n                ></p>\n<p>ç„¶åæˆ‘ä»¬éœ€è¦é…ç½®<code>åˆ·å¡ä»˜æ¬¾</code>èŠ‚ç‚¹ï¼ŒæœåŠ¡ç±»å‹æœ‰å¾ˆå¤šæ‰§è¡Œçš„æ–¹æ³•ï¼Œè¿™æ¬¡æˆ‘ä»¬ä½¿ç”¨â€œexternalï¼ˆå¤–éƒ¨ï¼‰â€ä»»åŠ¡æ¨¡å¼ã€‚</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220901111330988.png\"\n                      alt=\"image-20220901111330988\"\n                ></p>\n<p>å…·ä½“é…ç½®å†…å®¹ä¸º</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220901111419588.png\"\n                      alt=\"image-20220901111419588\"\n                ></p>\n<p>4.) æ·»åŠ ç»“æŸèŠ‚ç‚¹</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220901111521063.png\"\n                      alt=\"image-20220901111521063\"\n                ></p>\n<p>5.) é…ç½®æµç¨‹å‚æ•°</p>\n<p>ç‚¹å‡»ç”»å¸ƒçš„ç©ºç™½å¤„ï¼Œå³ä¾§çš„é¢æ¿ä¼šæ˜¾ç¤ºå½“å‰æµç¨‹æœ¬èº«çš„å‚æ•°,è¿™é‡Œæˆ‘ä»¬ä¿®æ”¹idä¸º<em>payment-retrieval</em>ï¼Œidæ˜¯åŒºåˆ†æµç¨‹çš„æ ‡è¯†ç„¶åä¿®æ”¹Name ä¸ºâ€œä»˜æ¬¾æµç¨‹â€æœ€åç¡®ä¿ <code>Executable</code>æ˜¯å‹¾é€‰çš„ï¼Œåªæœ‰<code>Executable</code>è¢«å‹¾é€‰ï¼Œæµç¨‹æ‰èƒ½æ‰§è¡Œ</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220901111725855.png\"\n                      alt=\"image-20220901111725855\"\n                ></p>\n<h3 id=\"å¤–éƒ¨ä»»åŠ¡\"><a href=\"#å¤–éƒ¨ä»»åŠ¡\" class=\"headerlink\" title=\"å¤–éƒ¨ä»»åŠ¡\"></a>å¤–éƒ¨ä»»åŠ¡</h3><p>åœ¨ä¸Šé¢è®¾è®¡çš„æµç¨‹å›¾ï¼Œ<code>åˆ·å¡ä»˜æ¬¾</code>èŠ‚ç‚¹çš„å¤„ç†æ˜¯å¤–éƒ¨ä»»åŠ¡ï¼ŒCamunda å¯ä»¥ä½¿å¤šç§è¯­è¨€å®ç°ä¸šåŠ¡é€»è¾‘ï¼Œæˆ‘ä»¬ä»¥Javaä¸ºä¾‹æ¥ä»‹ç»ã€‚</p>\n<p>æ·»åŠ ç›¸å…³çš„ä¾èµ–ï¼š</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">   <span class=\"tag\">&lt;<span class=\"name\">dependencies</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.camunda.bpm<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>camunda-external-task-client<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>7.15.0<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.slf4j<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>slf4j-simple<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>1.6.1<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>javax.xml.bind<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>jaxb-api<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>2.3.1<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependencies</span>&gt;</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>ç¼–å†™å¤„ç†çš„ä¸šåŠ¡é€»è¾‘çš„ä»£ç </p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> org.camunda.bpm.client.ExternalTaskClient;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> java.awt.*;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.net.URI;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">Demo01</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> &#123;</span><br><span class=\"line\">        <span class=\"type\">ExternalTaskClient</span> <span class=\"variable\">client</span> <span class=\"operator\">=</span> ExternalTaskClient.create()</span><br><span class=\"line\">                .baseUrl(<span class=\"string\">&quot;http://localhost:8080/engine-rest&quot;</span>)</span><br><span class=\"line\">                .asyncResponseTimeout(<span class=\"number\">10000</span>) <span class=\"comment\">// é•¿è½®è¯¢è¶…æ—¶æ—¶é—´</span></span><br><span class=\"line\">                .build();</span><br><span class=\"line\">        <span class=\"comment\">// è®¢é˜…æŒ‡å®šçš„å¤–éƒ¨ä»»åŠ¡</span></span><br><span class=\"line\">        client.subscribe(<span class=\"string\">&quot;charge-card&quot;</span>)</span><br><span class=\"line\">                .lockDuration(<span class=\"number\">1000</span>)</span><br><span class=\"line\">                .handler(((externalTask, externalTaskService) -&gt; &#123;</span><br><span class=\"line\">                    <span class=\"comment\">// è·å–æµç¨‹å˜é‡</span></span><br><span class=\"line\">                    <span class=\"type\">String</span> <span class=\"variable\">item</span> <span class=\"operator\">=</span> (String) externalTask.getVariable(<span class=\"string\">&quot;item&quot;</span>);</span><br><span class=\"line\">                    <span class=\"type\">Long</span> <span class=\"variable\">amount</span> <span class=\"operator\">=</span> (Long) externalTask.getVariable(<span class=\"string\">&quot;amount&quot;</span>);</span><br><span class=\"line\">                    System.out.println(<span class=\"string\">&quot;item---&gt;&quot;</span>+item + <span class=\"string\">&quot;  amount--&gt;&quot;</span> + amount);</span><br><span class=\"line\">                    <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                        Desktop.getDesktop().browse(<span class=\"keyword\">new</span> <span class=\"title class_\">URI</span>(<span class=\"string\">&quot;https://docs.camunda.org/get-started/quick-start/complete&quot;</span>));</span><br><span class=\"line\">                    &#125; <span class=\"keyword\">catch</span> (Exception e) &#123;</span><br><span class=\"line\">                        e.printStackTrace();</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">                    <span class=\"comment\">// å®Œæˆä»»åŠ¡</span></span><br><span class=\"line\">                    externalTaskService.complete(externalTask);</span><br><span class=\"line\">                &#125;)).open();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>è¿è¡Œè¯¥æ–¹æ³•å³å¯ï¼Œå½“æµç¨‹å¤„ç†æ—¶ä¼šæ‰§è¡Œç›¸å…³é€»è¾‘ã€‚</p>\n<h3 id=\"3-3-éƒ¨ç½²æµç¨‹\"><a href=\"#3-3-éƒ¨ç½²æµç¨‹\" class=\"headerlink\" title=\"3.3 éƒ¨ç½²æµç¨‹\"></a>3.3 éƒ¨ç½²æµç¨‹</h3><p>æ¥ä¸‹æ¥æˆ‘ä»¬å°±å¯ä»¥æ¥éƒ¨ç½²ä¸Šé¢å®šä¹‰çš„æµç¨‹äº†ã€‚ä½¿ç”¨ Camunda Modeler éƒ¨ç½²æµç¨‹ï¼Œç‚¹å‡»å·¥å…·æ ä¸­çš„éƒ¨ç½²æŒ‰é’®å¯ä»¥å°†å½“å‰æµç¨‹éƒ¨ç½²åˆ°æµç¨‹å¼•æ“ï¼Œç‚¹å‡»éƒ¨ç½²æŒ‰é’®ï¼Œè¾“å…¥Deployment Name ä¸º â€œPaymentâ€ ï¼Œè¾“å…¥ä¸‹æ–¹REST Endpoint ä¸º<a class=\"link\"   href=\"http://localhost:8080/engine-rest\" >http://localhost:8080/engine-rest<i class=\"fas fa-external-link-alt\"></i></a> ï¼Œç„¶åç‚¹å‡»å³ä¸‹è§’Deployéƒ¨ç½²</p>\n<p>éƒ¨ç½²æ“ä½œï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220901102738775.png\"\n                      alt=\"image-20220901102738775\"\n                ></p>\n<p>éƒ¨ç½²çš„æ—¶å€™æŠ¥é”™ï¼šåŸå› æ˜¯å®‰è£…è·¯å¾„ä¸­æœ‰ä¸­æ–‡</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220901101904825.png\"\n                      alt=\"image-20220901101904825\"\n                ></p>\n<p>éƒ¨ç½²æˆåŠŸï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220901102705446.png\"\n                      alt=\"image-20220901102705446\"\n                ></p>\n<p>ç„¶ååœ¨BPMä¸­æˆ‘ä»¬å¯ä»¥æŸ¥çœ‹éƒ¨ç½²çš„æµç¨‹ï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220901112401741.png\"\n                      alt=\"image-20220901112401741\"\n                ></p>\n<h3 id=\"å¯åŠ¨æµç¨‹\"><a href=\"#å¯åŠ¨æµç¨‹\" class=\"headerlink\" title=\"å¯åŠ¨æµç¨‹\"></a>å¯åŠ¨æµç¨‹</h3><p>æˆ‘ä»¬ä½¿ç”¨Rest APIå‘èµ·æµç¨‹ï¼Œæ‰€ä»¥éœ€è¦ä¸€ä¸ªæ¥å£æµ‹è¯•å·¥å…·ï¼ˆä¾‹å¦‚ï¼šPostmanï¼‰ï¼Œæˆ–è€…ä¹Ÿå¯ä»¥ä½¿ç”¨ç”µè„‘è‡ªå¸¦çš„curl</p>\n<p>curlæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">curl -H &quot;Content-Type: application/json&quot; -X POST -d &#x27;&#123;&quot;variables&quot;: &#123;&quot;amount&quot;: &#123;&quot;value&quot;:555,&quot;type&quot;:&quot;long&quot;&#125;, &quot;item&quot;: &#123;&quot;value&quot;:&quot;item-xyz&quot;&#125; &#125; &#125;&#x27; http://localhost:8080/engine-rest/process-definition/key/payment-retrieval/start</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>postmanæ–¹å¼å¤„ç†</p>\n<p>åœ¨urlä¸­è¾“å…¥ï¼š<a class=\"link\"   href=\"http://localhost:8080/engine-rest/process-definition/key/payment-retrieval/start\" >http://localhost:8080/engine-rest/process-definition/key/payment-retrieval/start<i class=\"fas fa-external-link-alt\"></i></a> é€šè¿‡<code>POST</code>æ–¹å¼æäº¤ï¼Œæäº¤çš„æ–¹å¼æ˜¯<code>JSON</code> æ•°æ®ï¼Œå…·ä½“å†…å®¹ä¸ºï¼š</p>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">\t<span class=\"attr\">&quot;variables&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">\t\t<span class=\"attr\">&quot;amount&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">\t\t\t<span class=\"attr\">&quot;value&quot;</span><span class=\"punctuation\">:</span><span class=\"number\">555</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">\t\t\t<span class=\"attr\">&quot;type&quot;</span><span class=\"punctuation\">:</span><span class=\"string\">&quot;long&quot;</span></span><br><span class=\"line\">\t\t<span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">\t\t<span class=\"attr\">&quot;item&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">\t\t\t<span class=\"attr\">&quot;value&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;item-xyz&quot;</span></span><br><span class=\"line\">\t\t<span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">\t<span class=\"punctuation\">&#125;</span></span><br><span class=\"line\"><span class=\"punctuation\">&#125;</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220901112634925.png\"\n                      alt=\"image-20220901112634925\"\n                ></p>\n<p>ç„¶åæˆ‘ä»¬ç‚¹å‡»å‘é€ï¼Œæ“ä½œæˆåŠŸå¯ä»¥çœ‹åˆ°å¦‚ä¸‹çš„è¿”å›ä¿¡æ¯</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220901112709320.png\"\n                      alt=\"image-20220901112709320\"\n                ></p>\n<p>åŒæ—¶ä»»åŠ¡æ‰§è¡Œåæˆ‘ä»¬åœ¨æ§åˆ¶å°å¯ä»¥çœ‹åˆ°ç›¸å…³çš„ä¿¡æ¯</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220901112810150.png\"\n                      alt=\"image-20220901112810150\"\n                ></p>\n<h1 id=\"æ¡ˆä¾‹æ‰©å±•\"><a href=\"#æ¡ˆä¾‹æ‰©å±•\" class=\"headerlink\" title=\"æ¡ˆä¾‹æ‰©å±•\"></a>æ¡ˆä¾‹æ‰©å±•</h1><p>ä¸Šé¢çš„æ¡ˆä¾‹è¿‡äºç®€å•ï¼Œæˆ‘ä»¬æ·»åŠ ä¸åŒçš„ä»»åŠ¡èŠ‚ç‚¹å’Œç½‘å…³æ¥ä¸°å¯Œä¸‹</p>\n<h2 id=\"ç”¨æˆ·ä»»åŠ¡\"><a href=\"#ç”¨æˆ·ä»»åŠ¡\" class=\"headerlink\" title=\"ç”¨æˆ·ä»»åŠ¡\"></a>ç”¨æˆ·ä»»åŠ¡</h2><h3 id=\"æ·»åŠ èŠ‚ç‚¹\"><a href=\"#æ·»åŠ èŠ‚ç‚¹\" class=\"headerlink\" title=\"æ·»åŠ èŠ‚ç‚¹\"></a>æ·»åŠ èŠ‚ç‚¹</h3><p>Â æˆ‘ä»¬åœ¨ä¸Šé¢çš„æ¡ˆä¾‹ä¸­æ·»åŠ ä¸€ä¸ª<code>ç”¨æˆ·ä»»åŠ¡</code>æ¥å¤„ç†æµç¨‹ã€‚</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220903233945199.png\"\n                      alt=\"image-20220903233945199\"\n                ></p>\n<p>ç‚¹å‡»åˆšåˆšåˆ›å»ºçš„<code>æ‰¹å‡†ä»˜æ¬¾</code>èŠ‚ç‚¹ï¼Œç„¶åé€šè¿‡æ‰³æ‰‹è®¾ç½®èŠ‚ç‚¹çš„ç±»å‹ä¸º<code>ç”¨æˆ·ä»»åŠ¡</code>(User Task)</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220903234050669.png\"\n                      alt=\"image-20220903234050669\"\n                ></p>\n<p>ç„¶åè®¾ç½®èŠ‚ç‚¹çš„å®¡æ‰¹äººä¸º<code>demo</code></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220903234231682.png\"\n                      alt=\"image-20220903234231682\"\n                ></p>\n<h3 id=\"é…ç½®è¡¨å•\"><a href=\"#é…ç½®è¡¨å•\" class=\"headerlink\" title=\"é…ç½®è¡¨å•\"></a>é…ç½®è¡¨å•</h3><p>åœ¨<code>ç”¨æˆ·èŠ‚ç‚¹</code>å¤„æˆ‘ä»¬ç»‘å®šè¡¨å•æ•°æ®ã€‚ç„¶ååˆ›å»ºè¡¨å•ç›¸å…³çš„å­—æ®µï¼Œå¹¶æ·»åŠ å¯¹åº”çš„æè¿°ä¿¡æ¯ã€‚</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220904001026418.png\"\n                      alt=\"image-20220904001026418\"\n                ></p>\n<blockquote>\n<p>amountå­—æ®µï¼š</p>\n<p>â€‹     ID:amount</p>\n<p>â€‹     Type:long</p>\n<p>â€‹     Label:é‡‘é¢</p>\n<p>Itemå­—æ®µï¼š</p>\n<p>â€‹     ID:item</p>\n<p>â€‹     Type:string</p>\n<p>â€‹     Label:é¡¹ç›®</p>\n<p>Approvedå­—æ®µï¼š</p>\n<p>â€‹     ID:approved</p>\n<p>â€‹     Type:boolean</p>\n<p>â€‹     Label:æ˜¯å¦åŒæ„</p>\n</blockquote>\n<h3 id=\"éƒ¨ç½²æµç¨‹\"><a href=\"#éƒ¨ç½²æµç¨‹\" class=\"headerlink\" title=\"éƒ¨ç½²æµç¨‹\"></a>éƒ¨ç½²æµç¨‹</h3><p>æµç¨‹å®šä¹‰å¥½ä¹‹åæˆ‘ä»¬å°±å¯ä»¥éƒ¨ç½²æµç¨‹äº†ã€‚ç›´æ¥åœ¨<code>Camunda Modeler</code>å·¥å…·æ ä¸Šçš„ä¸Šä¼ æŒ‰é’®å°†æµç¨‹ä¸Šä¼ åˆ°æµç¨‹å¼•æ“ä¸­ã€‚éƒ¨ç½²ååœ¨<code>Camunda Web</code>ä¸­æŸ¥çœ‹éƒ¨ç½²çš„æµç¨‹ã€‚</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220904001636662.png\"\n                      alt=\"image-20220904001636662\"\n                ></p>\n<h3 id=\"æµ‹è¯•æµç¨‹\"><a href=\"#æµ‹è¯•æµç¨‹\" class=\"headerlink\" title=\"æµ‹è¯•æµç¨‹\"></a>æµ‹è¯•æµç¨‹</h3><p>æ‰“å¼€ä»»åŠ¡åˆ—è¡¨ï¼ˆ<a class=\"link\"   href=\"http://localhost:8080/camunda/app/tasklist/%EF%BC%89%EF%BC%8C%E4%BD%BF%E7%94%A8\" >http://localhost:8080/camunda/app/tasklist/ï¼‰ï¼Œä½¿ç”¨<i class=\"fas fa-external-link-alt\"></i></a> demo &#x2F; demo ç™»å½•ã€‚ç‚¹å‡»å³ä¸Šè§’çš„ <code>Start process</code> ï¼Œåœ¨å¼¹å‡ºçš„å¯¹è¯æ¡†ä¸­é€‰æ‹©â€œä»˜æ¬¾æµç¨‹â€.</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220904001816475.png\"\n                      alt=\"image-20220904001816475\"\n                ></p>\n<p>è¿™æ—¶ä¼šå¼¹å‡ºç¼–è¾‘æµç¨‹å˜é‡çš„å¯¹è¯æ¡†ï¼Œå¯ä»¥é€šè¿‡ç‚¹å‡» Add a variable æŒ‰é’®æ·»åŠ å˜é‡ï¼Œè¿™æ¬¡æˆ‘ä»¬å…ˆä¸æ·»åŠ ï¼Œç›´æ¥ç‚¹å‡»å³ä¸‹è§’<code>Start</code>å¯åŠ¨æµç¨‹ã€‚</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220904001902564.png\"\n                      alt=\"image-20220904001902564\"\n                ></p>\n<p>è¿™æ—¶ï¼Œåœ¨ä»»åŠ¡åˆ—è¡¨åº”è¯¥å°±èƒ½çœ‹åˆ°åˆšåˆ›å»ºçš„äººå·¥ä»»åŠ¡äº†ï¼Œå¦‚æœæ²¡æœ‰å¯ä»¥æ‰‹åŠ¨åˆ·æ–°ä¸€ä¸‹</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220904001953028.png\"\n                      alt=\"image-20220904001953028\"\n                ></p>\n<p>åˆ°è¿™å„¿è¿™ä¸ª<code>ç”¨æˆ·ä»»åŠ¡</code>èŠ‚ç‚¹çš„äººå·¥å®¡æ ¸å°±åº”è¯¥è¦å¤„ç†äº†ï¼Œæˆ‘ä»¬åœ¨ä¸‹ä¸€ä¸ªæ¡ˆä¾‹ä¸­ç»§ç»­è¿™ä¸ªæ¡ˆä¾‹ï¼Œæˆ‘ä»¬åŠ å…¥æ’ä»–ç½‘å…³æ¥å¤„ç†ã€‚</p>\n<h2 id=\"æ’ä»–ç½‘å…³\"><a href=\"#æ’ä»–ç½‘å…³\" class=\"headerlink\" title=\"æ’ä»–ç½‘å…³\"></a>æ’ä»–ç½‘å…³</h2><p>æˆ‘ä»¬å°†ä½¿ç”¨<strong>æ’ä»–ç½‘å…³</strong>(<em>Exclusive Gateways</em>)ï¼Œä¸ºæµç¨‹æ·»åŠ åˆ†æ”¯ï¼Œä»…åœ¨é‡‘é¢è¶³å¤Ÿå¤§çš„æ—¶å€™è¿›è¡Œäººå·¥å®¡æ ¸.</p>\n<h3 id=\"æ·»åŠ ç½‘å…³èŠ‚ç‚¹\"><a href=\"#æ·»åŠ ç½‘å…³èŠ‚ç‚¹\" class=\"headerlink\" title=\"æ·»åŠ ç½‘å…³èŠ‚ç‚¹\"></a>æ·»åŠ ç½‘å…³èŠ‚ç‚¹</h3><p>é¦–å…ˆæ‰“å¼€<code>Camunda Modeler </code>ï¼Œåœ¨å·¦ä¾§çš„å·¥å…·æ¶ä¸­æ‰¾åˆ°ç½‘å…³ï¼ˆè±å½¢ï¼‰ï¼Œå°†å®ƒæ‹–åŠ¨åˆ°â€œä»˜æ¬¾è¯·æ±‚â€å’Œâ€œåˆ·å¡ä»˜æ¬¾â€ä¹‹é—´ï¼Œå°†â€œæ‰¹å‡†ä»˜æ¬¾â€å‘ä¸‹ç§»åŠ¨å†æ·»åŠ ä¸€ä¸ªç½‘å…³ï¼Œè°ƒæ•´æµç¨‹ï¼Œæœ€åçœ‹èµ·æ¥ç±»ä¼¼è¿™æ ·ï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220904004632887.png\"\n                      alt=\"image-20220904004632887\"\n                ></p>\n<h3 id=\"é…ç½®ç½‘å…³\"><a href=\"#é…ç½®ç½‘å…³\" class=\"headerlink\" title=\"é…ç½®ç½‘å…³\"></a>é…ç½®ç½‘å…³</h3><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬é€‰æ‹©â€œ&lt;1000â€çš„è¿çº¿ï¼Œæ‰“å¼€å±æ€§é¢æ¿ï¼Œé€‰æ‹©â€œCondition Typeâ€ä¸ºâ€œExpressionâ€ï¼Œè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨<a class=\"link\"   href=\"https://docs.camunda.org/manual/latest/user-guide/process-engine/expression-language/\" >JAVAç»Ÿä¸€è¡¨è¾¾å¼è¯­è¨€<i class=\"fas fa-external-link-alt\"></i></a>ç¼–å†™æ¡ä»¶ï¼Œè¿™é‡Œè¦åšçš„æ˜¯åœ¨é‡‘é¢å°äº1000æ—¶ç›´æ¥åˆ·å¡ä»˜æ¬¾ï¼Œåˆ™è¾“å…¥è¡¨è¾¾å¼ <code>$&#123;amount&lt;1000&#125;</code></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220904004725626.png\"\n                      alt=\"image-20220904004725626\"\n                ></p>\n<p>åŒæ ·çš„ï¼Œå¯¹å¦ä¸€æ¡çº¿ä¹Ÿè¿›è¡Œé…ç½®ï¼Œè¡¨è¾¾å¼ä¸º<code>$&#123;amount&gt;=1000&#125;</code></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220904004747234.png\"\n                      alt=\"image-20220904004747234\"\n                ></p>\n<p>ç„¶å<code>æ˜¯å¦æ‰¹å‡†</code>çš„æ’ä»–ç½‘å…³èŠ‚ç‚¹æˆ‘ä»¬ä¹Ÿéœ€è¦å¤„ç†ä¸‹</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220904004845594.png\"\n                      alt=\"image-20220904004845594\"\n                ></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220904004910392.png\"\n                      alt=\"image-20220904004910392\"\n                ></p>\n<h3 id=\"éƒ¨ç½²æµç¨‹-1\"><a href=\"#éƒ¨ç½²æµç¨‹-1\" class=\"headerlink\" title=\"éƒ¨ç½²æµç¨‹\"></a>éƒ¨ç½²æµç¨‹</h3><p>éƒ¨ç½²æµç¨‹å’Œä¸Šé¢çš„æ“ä½œæ˜¯ä¸€æ ·çš„ã€‚</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220904005023089.png\"\n                      alt=\"image-20220904005023089\"\n                ></p>\n<h3 id=\"æµ‹è¯•æ“ä½œ\"><a href=\"#æµ‹è¯•æ“ä½œ\" class=\"headerlink\" title=\"æµ‹è¯•æ“ä½œ\"></a>æµ‹è¯•æ“ä½œ</h3><p>æ‰“å¼€ä»»åŠ¡åˆ—è¡¨ï¼ˆ<a class=\"link\"   href=\"http://localhost:8080/camunda/app/tasklist/%EF%BC%89%EF%BC%8C%E4%BD%BF%E7%94%A8\" >http://localhost:8080/camunda/app/tasklist/ï¼‰ï¼Œä½¿ç”¨<i class=\"fas fa-external-link-alt\"></i></a> demo &#x2F; demo ç™»å½•,ç‚¹å‡»å³ä¸Šè§’çš„ Start process ï¼Œåœ¨å¼¹å‡ºçš„å¯¹è¯æ¡†ä¸­é€‰æ‹©â€œä»˜æ¬¾æµç¨‹â€,ä¸Šé¢ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ç›´æ¥ç‚¹å‡» Startï¼Œä½†è¿™æ¬¡æˆ‘ä»¬è¦å¢åŠ å‡ ä¸ªå˜é‡æ¥æµ‹è¯•åŠ¨æ€çš„æµç¨‹ã€‚</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220904005221732.png\"\n                      alt=\"image-20220904005221732\"\n                ></p>\n<p>è¯•ç€æ›´æ”¹ <code>amount</code> çš„å€¼ï¼ŒæŸ¥çœ‹å¯¹æµç¨‹æ‰§è¡Œé¡ºåºçš„å½±å“</p>\n<h2 id=\"å†³ç­–è‡ªåŠ¨åŒ–\"><a href=\"#å†³ç­–è‡ªåŠ¨åŒ–\" class=\"headerlink\" title=\"å†³ç­–è‡ªåŠ¨åŒ–\"></a>å†³ç­–è‡ªåŠ¨åŒ–</h2><p>åœ¨ä¸Šé¢çš„æ¡ˆä¾‹ä¸­æˆ‘ä»¬åœ¨å®¡æ‰¹æ—¶æ˜¯é€šè¿‡<code>ç”¨æˆ·ä»»åŠ¡</code>ç»“åˆè¡¨å•æ¥åšçš„å®¡æ‰¹ï¼Œæœ¬æ¡ˆä¾‹æˆ‘ä»¬æ¥çœ‹çœ‹æˆ‘ä»¬é€šè¿‡<code>DMN</code>ä¸ºæµç¨‹æ·»åŠ ä¸€ä¸ªä¸šåŠ¡è§„åˆ™æ¥å¤„ç†</p>\n<h3 id=\"æ·»åŠ ä¸šåŠ¡è§„åˆ™\"><a href=\"#æ·»åŠ ä¸šåŠ¡è§„åˆ™\" class=\"headerlink\" title=\"æ·»åŠ ä¸šåŠ¡è§„åˆ™\"></a>æ·»åŠ ä¸šåŠ¡è§„åˆ™</h3><p>æ‰“å¼€ Camunda Modelerï¼Œç‚¹å‡» â€œæ‰¹å‡†ä»˜æ¬¾â€ï¼Œåœ¨å³é¢çš„æ‰³æ‰‹èœå•ä¸­ï¼Œå°†ç±»å‹æ”¹ä¸ºâ€œ<strong>Business Rule Task</strong> â€ï¼ˆä¸šåŠ¡è§„åˆ™ä»»åŠ¡ï¼‰</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220904113549016.png\"\n                      alt=\"image-20220904113549016\"\n                ></p>\n<p>ä¸‹ä¸€æ­¥ï¼Œå°†å±æ€§é¢æ¿ä¸­çš„ <code>Implementation</code> é€‰æ‹©ä¸º<code>DMN</code>ï¼Œè¾“å…¥ Decision Ref ä¸º <code>approve-payment</code>ï¼Œä¸ºäº†å°†å†³ç­–çš„ç»“æœå­˜å…¥æµç¨‹å˜é‡ï¼Œæˆ‘ä»¬è¿˜éœ€è¦ç¼–è¾‘ç»“æœå˜é‡Result Variable ä¸º<code>approved</code>ï¼Œç»“æœç±»å‹ Map Decision Result é€‰æ‹©ä¸º <code>singleEntry </code>ï¼Œæœ€åç»“æœå¦‚ä¸‹ï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220904113700661.png\"\n                      alt=\"image-20220904113700661\"\n                ></p>\n<h3 id=\"åˆ›å»ºDMNè¡¨\"><a href=\"#åˆ›å»ºDMNè¡¨\" class=\"headerlink\" title=\"åˆ›å»ºDMNè¡¨\"></a>åˆ›å»ºDMNè¡¨</h3><p>ç‚¹å‡» <code>File &gt; New File &gt; DMN Diagram</code>åˆ›å»ºä¸€ä¸ªæ–°çš„DMN,ç°åœ¨ç”»å¸ƒä¸Šå·²ç»å­˜åœ¨ä¸€ä¸ªå†³ç­–å…ƒç´ äº†ï¼Œé€‰æ‹©å®ƒï¼Œç„¶ååœ¨å³ä¾§å±æ€§é¢æ¿ä¸­æ›´æ”¹<code>Id</code>å’Œ<code>Name</code>ï¼Œè¿™é‡Œçš„Idéœ€è¦å’Œæµç¨‹ä¸­çš„<code>Decision Ref</code>å±æ€§ä¸€è‡´ï¼Œè¿™æ¬¡æˆ‘ä»¬è¾“å…¥Idä¸º<code>approve-payment</code></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220904113803219.png\"\n                      alt=\"image-20220904113803219\"\n                ></p>\n<p>æ¥ä¸‹æ¥ï¼Œç‚¹å‡»å†³ç­–å…ƒç´ å·¦ä¸Šè§’çš„è¡¨æ ¼æŒ‰é’®ï¼Œåˆ›å»ºæ–°çš„DMNè¡¨.</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220904113905505.png\"\n                      alt=\"image-20220904113905505\"\n                ></p>\n<h3 id=\"ç¼–è¾‘DMNè¡¨\"><a href=\"#ç¼–è¾‘DMNè¡¨\" class=\"headerlink\" title=\"ç¼–è¾‘DMNè¡¨\"></a>ç¼–è¾‘DMNè¡¨</h3><p>é¦–å…ˆç¼–è¾‘è¾“å…¥å‚æ•°ï¼Œåœ¨æœ¬ä¾‹ä¸­ï¼Œä¸ºäº†ç®€å•ï¼Œæˆ‘ä»¬ä¾æ®é¡¹ç›®åè¿›è¡Œåˆ¤æ–­ï¼Œè§„åˆ™å¯ä»¥ä½¿ç”¨ <code>FEEL è¡¨è¾¾å¼</code>ã€<code>JUEL</code>æˆ–è€… <code>Script</code> ä¹¦å†™ï¼Œè¯¦æƒ…å¯ä»¥é˜…è¯» <a class=\"link\"   href=\"https://docs.camunda.org/manual/latest/user-guide/dmn-engine/expressions-and-scripts/\" >https://docs.camunda.org/manual/latest/user-guide/dmn-engine/expressions-and-scripts/<i class=\"fas fa-external-link-alt\"></i></a></p>\n<p>åŒå‡»è¡¨æ ¼ä¸­çš„<em>Input</em>ï¼Œç¼–è¾‘ç¬¬ä¸€ä¸ªè¾“å…¥å‚æ•°</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220904114105012.png\"\n                      alt=\"image-20220904114105012\"\n                ></p>\n<p>ä¸‹é¢ï¼Œè®¾ç½®è¾“å…¥å‚æ•°ï¼ŒåŒå‡»<em>Output</em>ç¼–è¾‘</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220904114133016.png\"\n                      alt=\"image-20220904114133016\"\n                ></p>\n<p>ä¸‹é¢ï¼Œæˆ‘ä»¬ç‚¹å‡»å·¦ä¾§çš„è“è‰²åŠ å·ï¼Œæ·»åŠ ä¸€äº›è§„åˆ™ï¼Œæœ€åç±»ä¼¼è¿™æ ·ï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220904114210501.png\"\n                      alt=\"image-20220904114210501\"\n                ></p>\n<h3 id=\"éƒ¨ç½²DMNè¡¨\"><a href=\"#éƒ¨ç½²DMNè¡¨\" class=\"headerlink\" title=\"éƒ¨ç½²DMNè¡¨\"></a>éƒ¨ç½²DMNè¡¨</h3><p>ç‚¹å‡»åº•éƒ¨çš„éƒ¨ç½²æŒ‰é’®ï¼Œå°†DMNéƒ¨ç½²åˆ°æµç¨‹å¼•æ“ä¸­</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220904114317458.png\"\n                      alt=\"image-20220904114317458\"\n                ></p>\n<h3 id=\"æµç¨‹æ¡ˆä¾‹æµ‹è¯•\"><a href=\"#æµç¨‹æ¡ˆä¾‹æµ‹è¯•\" class=\"headerlink\" title=\"æµç¨‹æ¡ˆä¾‹æµ‹è¯•\"></a>æµç¨‹æ¡ˆä¾‹æµ‹è¯•</h3><p>ç°åœ¨æ‰“å¼€ <a class=\"link\"   href=\"http://localhost:8080/camunda/app/cockpit/\" >http://localhost:8080/camunda/app/cockpit/<i class=\"fas fa-external-link-alt\"></i></a> ï¼Œä½¿ç”¨demo&#x2F;demoç™»å½•ï¼Œå¯ä»¥çœ‹åˆ°å†³ç­–å®šä¹‰å¢åŠ äº†ä¸€ä¸ªï¼Œç‚¹å‡»è¿›å»å¯ä»¥çœ‹åˆ°åˆšæ‰ç¼–è¾‘çš„DMN.</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220904114413678.png\"\n                      alt=\"image-20220904114413678\"\n                ></p>\n<p>ç‚¹å‡»è¿›å»å¯ä»¥çœ‹åˆ°å¯¹åº”çš„å†³ç­–ä¿¡æ¯</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220904114452196.png\"\n                      alt=\"image-20220904114452196\"\n                ></p>\n<p>ç„¶åæˆ‘ä»¬éƒ¨ç½²æµç¨‹ç„¶åå¯åŠ¨æµç¨‹</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220904114623954.png\"\n                      alt=\"image-20220904114623954\"\n                ></p>\n<p>è¯¥æµç¨‹å†³ç­–è¾“å‡ºçš„<code>approved</code>ä¸ºtrue</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220904114740904.png\"\n                      alt=\"image-20220904114740904\"\n                ></p>\n<p>æ›´æ”¹ä¸‹è¾“å…¥çš„å‚æ•°</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220904114822563.png\"\n                      alt=\"image-20220904114822563\"\n                ></p>\n<p>è¯¥å†³ç­–ä¸­è¾“å‡ºçš„<code>approved</code>ä¸ºfalse</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220904114913062.png\"\n                      alt=\"image-20220904114913062\"\n                ></p>\n<p>å¥½äº†~åˆ°æ­¤Camundaçš„åŸºç¡€å…¥é—¨æ¡ˆä¾‹æˆ‘ä»¬å°±è®²è§£åˆ°è¿™é‡Œï¼Œéœ€è¦è·å–æ›´å¤šCamundaç›¸å…³è¯¾ç¨‹è§†é¢‘çš„å¯ä»¥ç»§ç»­å…³æ³¨æ³¢å“¥çš„Bè´¦å·ï¼Œæˆ–è€…æ·»åŠ æ³¢å“¥å¾®ä¿¡(boge_java&#x2F;boge3306)</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220904115333970.png\"\n                      alt=\"image-20220904115333970\"\n                ></p>\n","site":{"data":{"links":[{"name":"CZMæœ‰ç‚¹å†·","link":"https://czm.cool/","description":"CZMçš„åšå®¢","avatar":"https://img.czm.cool/avatar/avatar.png"},{"name":"PSH","link":"https://shamd.cloud/","description":"PSHçš„åšå®¢.","avatar":"https://shamd.cloud/upload/2022/07/afbb577733f46c9535dd1d6d6388278.jpg"},{"name":"KAI","link":"https://kainote.top/","description":"love artist, love code.","avatar":"https://cdn.jsdelivr.net/gh/kaix2301/pictures/img202201072101018.jpg"}]}},"excerpt":"","more":"<h1 id=\"Camunda-çƒ­é—¨å·¥ä½œæµå¼•æ“æ¡†æ¶\"><a href=\"#Camunda-çƒ­é—¨å·¥ä½œæµå¼•æ“æ¡†æ¶\" class=\"headerlink\" title=\"Camunda-çƒ­é—¨å·¥ä½œæµå¼•æ“æ¡†æ¶\"></a>Camunda-çƒ­é—¨å·¥ä½œæµå¼•æ“æ¡†æ¶</h1><blockquote>\n<p>Lectureï¼šæ³¢å“¥</p>\n</blockquote>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220902232358815.png\"\n                      alt=\"image-20220902232358815\"\n                ></p>\n<h1 id=\"å·¥ä½œæµç›¸å…³ä»‹ç»\"><a href=\"#å·¥ä½œæµç›¸å…³ä»‹ç»\" class=\"headerlink\" title=\"å·¥ä½œæµç›¸å…³ä»‹ç»\"></a>å·¥ä½œæµç›¸å…³ä»‹ç»</h1><p><strong>BPM</strong>(BusinessProcessManagement)ï¼Œä¸šåŠ¡æµç¨‹ç®¡ç†æ˜¯ä¸€ç§ç®¡ç†åŸåˆ™ï¼Œé€šå¸¸ä¹Ÿå¯ä»¥ä»£æŒ‡BPMS(BusinessProcessManagementSuite)ï¼Œæ˜¯ä¸€ä¸ªå®ç°æ•´åˆä¸åŒç³»ç»Ÿå’Œæ•°æ®çš„æµç¨‹ç®¡ç†è½¯ä»¶å¥—ä»¶.</p>\n<p><strong>BPMN</strong>(BusinessProcessModelandNotation)æ˜¯åŸºäºæµç¨‹å›¾çš„é€šç”¨å¯è§†åŒ–æ ‡å‡†ã€‚è¯¥æµç¨‹å›¾è¢«è®¾è®¡ç”¨äºåˆ›å»ºä¸šåŠ¡æµç¨‹æ“ä½œçš„å›¾å½¢åŒ–æ¨¡å‹ã€‚ä¸šåŠ¡æµç¨‹æ¨¡å‹å°±æ˜¯å›¾å½¢åŒ–å¯¹è±¡çš„ç½‘çŠ¶å›¾ï¼ŒåŒ…æ‹¬æ´»åŠ¨å’Œç”¨äºå®šä¹‰è¿™äº›æ´»åŠ¨æ‰§è¡Œé¡ºåºçš„<code>æµç¨‹è®¾è®¡å™¨</code>ã€‚BPMN2.0æ­£å¼ç‰ˆæœ¬äº2011å¹´1æœˆ3æ—¥å‘å¸ƒï¼Œå¸¸è§çš„<code>å·¥ä½œæµå¼•æ“</code>å¦‚ï¼šActivitiã€Flowableã€jBPM éƒ½åŸºäº BPMN 2.0 æ ‡å‡†ã€‚</p>\n<p>ç„¶åæ¥çœ‹çœ‹BPMçš„å‘å±•å†ç¨‹ï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220830005000114.png\"\n                      alt=\"image-20220830005000114\"\n                ></p>\n<h1 id=\"Camundaä»‹ç»\"><a href=\"#Camundaä»‹ç»\" class=\"headerlink\" title=\"Camundaä»‹ç»\"></a>Camundaä»‹ç»</h1><p>å®˜ç½‘åœ°å€ï¼š<a class=\"link\"   href=\"https://camunda.com/\" >https://camunda.com/<i class=\"fas fa-external-link-alt\"></i></a></p>\n<p>ä¸­æ–‡ç«™ç‚¹ï¼š<a class=\"link\"   href=\"http://camunda-cn.shaochenfeng.com/\" >http://camunda-cn.shaochenfeng.com/<i class=\"fas fa-external-link-alt\"></i></a></p>\n<p>ä¸‹è½½ï¼š<a class=\"link\"   href=\"https://downloads.camunda.cloud/release/camunda-bpm/run/7.15/\" >https://downloads.camunda.cloud/release/camunda-bpm/run/7.15/<i class=\"fas fa-external-link-alt\"></i></a></p>\n<p>æ¡ˆä¾‹åœ°å€ï¼š<a class=\"link\"   href=\"https://docs.camunda.org/get-started/quick-start/complete/\" >Congratulation! | docs.camunda.org<i class=\"fas fa-external-link-alt\"></i></a></p>\n<p>å‰æœŸå‡†å¤‡å·¥ä½œ: JAVA1.8ä»¥ä¸Šçš„JREæˆ–JDK</p>\n<h2 id=\"Camunda-Modeler\"><a href=\"#Camunda-Modeler\" class=\"headerlink\" title=\"Camunda Modeler\"></a>Camunda Modeler</h2><p>Camunda Modeler æ˜¯Camunda å®˜æ–¹æä¾›çš„ä¸€ä¸ªæµç¨‹è®¾è®¡å™¨ï¼Œç”¨äºç¼–è¾‘æµç¨‹å›¾ä»¥åŠå…¶ä»–æ¨¡å‹ã€è¡¨å•ã€‘ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªæµç¨‹å›¾çš„ç»˜å›¾å·¥å…·ã€‚å¯ä»¥å®˜æ–¹ä¸‹è½½ï¼Œä¹Ÿå¯ä»¥åœ¨æä¾›ç»™å¤§å®¶çš„èµ„æ–™ä¸­è·å–ã€‚è·å–åç›´æ¥è§£å‹ç¼©å³å¯ï¼Œæ³¨æ„ï¼šè§£å‹å®‰è£…åˆ°éä¸­æ–‡ç›®å½•ä¸­!!!</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220901105936567.png\"\n                      alt=\"image-20220901105936567\"\n                ></p>\n<p>å¯åŠ¨çš„æ•ˆæœï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220901110007447.png\"\n                      alt=\"image-20220901110007447\"\n                ></p>\n<h2 id=\"Camunda-BPM\"><a href=\"#Camunda-BPM\" class=\"headerlink\" title=\"Camunda BPM\"></a>Camunda BPM</h2><p>ä¸‹è½½åœ°å€ <a class=\"link\"   href=\"https://camunda.com/download/\" >https://camunda.com/download/<i class=\"fas fa-external-link-alt\"></i></a></p>\n<p>Camunda BPM æ˜¯Camundaå®˜æ–¹æä¾›çš„ä¸€ä¸ª<code>ä¸šåŠ¡æµç¨‹ç®¡ç†</code>å¹³å°,ç”¨æ¥ç®¡ç†ï¼Œéƒ¨ç½²çš„æµç¨‹å®šä¹‰ã€æ‰§è¡Œä»»åŠ¡ï¼Œç­–ç•¥ç­‰ã€‚ä¸‹è½½å®‰è£…ä¸€ä¸ªCamundaå¹³å°ï¼ŒæˆåŠŸè§£å‹ Camunda å¹³å°çš„å‘è¡Œç‰ˆåï¼Œæ‰§è¡Œåä¸ºstart.batï¼ˆå¯¹äº Windows ç”¨æˆ·ï¼‰æˆ–start.shï¼ˆå¯¹äº Unix ç”¨æˆ·ï¼‰çš„è„šæœ¬ã€‚æ­¤è„šæœ¬å°†å¯åŠ¨åº”ç”¨ç¨‹åºæœåŠ¡å™¨ã€‚</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220901110225636.png\"\n                      alt=\"image-20220901110225636\"\n                ></p>\n<p>æ‰“å¼€æ‚¨çš„ Web æµè§ˆå™¨å¹¶å¯¼èˆªåˆ°<a class=\"link\"   href=\"http://localhost:8080/%E4%BB%A5%E8%AE%BF%E9%97%AE%E6%AC%A2%E8%BF%8E%E9%A1%B5%E9%9D%A2%EF%BC%8CCamunda%E7%9A%84%E7%AE%A1%E7%90%86%E5%B9%B3%E5%8F%B0%E3%80%82\" >http://localhost:8080/ä»¥è®¿é—®æ¬¢è¿é¡µé¢ï¼ŒCamundaçš„ç®¡ç†å¹³å°ã€‚<i class=\"fas fa-external-link-alt\"></i></a></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220718162641800.png\"\n                      alt=\"image-20220718162641800\"\n                ></p>\n<p>ç™»å½•æˆåŠŸçš„ä¸»é¡µï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220718162726028.png\"\n                      alt=\"image-20220718162726028\"\n                ></p>\n<h2 id=\"å…¥é—¨æ¡ˆä¾‹\"><a href=\"#å…¥é—¨æ¡ˆä¾‹\" class=\"headerlink\" title=\"å…¥é—¨æ¡ˆä¾‹\"></a>å…¥é—¨æ¡ˆä¾‹</h2><h3 id=\"åˆ›å»ºç®€å•æµç¨‹\"><a href=\"#åˆ›å»ºç®€å•æµç¨‹\" class=\"headerlink\" title=\"åˆ›å»ºç®€å•æµç¨‹\"></a>åˆ›å»ºç®€å•æµç¨‹</h3><p>æˆ‘ä»¬å…ˆé€šè¿‡ Modeler æ¥ç»˜åˆ¶ä¸€ä¸ªç®€å•æµç¨‹</p>\n<p>1.) åˆ›å»ºæµç¨‹ï¼šé€‰æ‹© BPMN diagram (Camunda Platform)</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220901110718700.png\"\n                      alt=\"image-20220901110718700\"\n                ></p>\n<p>2.) åˆ›å»ºå¼€å§‹èŠ‚ç‚¹ï¼šå¹¶è®¾å®šèŠ‚ç‚¹åç§°</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220901110850675.png\"\n                      alt=\"image-20220901110850675\"\n                ></p>\n<p>3.) åˆ›å»ºæœåŠ¡èŠ‚ç‚¹ï¼šè®¾ç½®å¤„ç†æ–¹å¼</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220901110926577.png\"\n                      alt=\"image-20220901110926577\"\n                ></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220901111045576.png\"\n                      alt=\"image-20220901111045576\"\n                ></p>\n<p>æˆ‘ä»¬åˆ‡æ¢èŠ‚ç‚¹çš„ç±»å‹ä¸º <code>service Task</code></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220901111125584.png\"\n                      alt=\"image-20220901111125584\"\n                ></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220901111141656.png\"\n                      alt=\"image-20220901111141656\"\n                ></p>\n<p>ç„¶åæˆ‘ä»¬éœ€è¦é…ç½®<code>åˆ·å¡ä»˜æ¬¾</code>èŠ‚ç‚¹ï¼ŒæœåŠ¡ç±»å‹æœ‰å¾ˆå¤šæ‰§è¡Œçš„æ–¹æ³•ï¼Œè¿™æ¬¡æˆ‘ä»¬ä½¿ç”¨â€œexternalï¼ˆå¤–éƒ¨ï¼‰â€ä»»åŠ¡æ¨¡å¼ã€‚</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220901111330988.png\"\n                      alt=\"image-20220901111330988\"\n                ></p>\n<p>å…·ä½“é…ç½®å†…å®¹ä¸º</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220901111419588.png\"\n                      alt=\"image-20220901111419588\"\n                ></p>\n<p>4.) æ·»åŠ ç»“æŸèŠ‚ç‚¹</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220901111521063.png\"\n                      alt=\"image-20220901111521063\"\n                ></p>\n<p>5.) é…ç½®æµç¨‹å‚æ•°</p>\n<p>ç‚¹å‡»ç”»å¸ƒçš„ç©ºç™½å¤„ï¼Œå³ä¾§çš„é¢æ¿ä¼šæ˜¾ç¤ºå½“å‰æµç¨‹æœ¬èº«çš„å‚æ•°,è¿™é‡Œæˆ‘ä»¬ä¿®æ”¹idä¸º<em>payment-retrieval</em>ï¼Œidæ˜¯åŒºåˆ†æµç¨‹çš„æ ‡è¯†ç„¶åä¿®æ”¹Name ä¸ºâ€œä»˜æ¬¾æµç¨‹â€æœ€åç¡®ä¿ <code>Executable</code>æ˜¯å‹¾é€‰çš„ï¼Œåªæœ‰<code>Executable</code>è¢«å‹¾é€‰ï¼Œæµç¨‹æ‰èƒ½æ‰§è¡Œ</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220901111725855.png\"\n                      alt=\"image-20220901111725855\"\n                ></p>\n<h3 id=\"å¤–éƒ¨ä»»åŠ¡\"><a href=\"#å¤–éƒ¨ä»»åŠ¡\" class=\"headerlink\" title=\"å¤–éƒ¨ä»»åŠ¡\"></a>å¤–éƒ¨ä»»åŠ¡</h3><p>åœ¨ä¸Šé¢è®¾è®¡çš„æµç¨‹å›¾ï¼Œ<code>åˆ·å¡ä»˜æ¬¾</code>èŠ‚ç‚¹çš„å¤„ç†æ˜¯å¤–éƒ¨ä»»åŠ¡ï¼ŒCamunda å¯ä»¥ä½¿å¤šç§è¯­è¨€å®ç°ä¸šåŠ¡é€»è¾‘ï¼Œæˆ‘ä»¬ä»¥Javaä¸ºä¾‹æ¥ä»‹ç»ã€‚</p>\n<p>æ·»åŠ ç›¸å…³çš„ä¾èµ–ï¼š</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">   <span class=\"tag\">&lt;<span class=\"name\">dependencies</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.camunda.bpm<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>camunda-external-task-client<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>7.15.0<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.slf4j<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>slf4j-simple<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>1.6.1<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>javax.xml.bind<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>jaxb-api<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>2.3.1<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependencies</span>&gt;</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>ç¼–å†™å¤„ç†çš„ä¸šåŠ¡é€»è¾‘çš„ä»£ç </p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> org.camunda.bpm.client.ExternalTaskClient;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> java.awt.*;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.net.URI;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">Demo01</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> &#123;</span><br><span class=\"line\">        <span class=\"type\">ExternalTaskClient</span> <span class=\"variable\">client</span> <span class=\"operator\">=</span> ExternalTaskClient.create()</span><br><span class=\"line\">                .baseUrl(<span class=\"string\">&quot;http://localhost:8080/engine-rest&quot;</span>)</span><br><span class=\"line\">                .asyncResponseTimeout(<span class=\"number\">10000</span>) <span class=\"comment\">// é•¿è½®è¯¢è¶…æ—¶æ—¶é—´</span></span><br><span class=\"line\">                .build();</span><br><span class=\"line\">        <span class=\"comment\">// è®¢é˜…æŒ‡å®šçš„å¤–éƒ¨ä»»åŠ¡</span></span><br><span class=\"line\">        client.subscribe(<span class=\"string\">&quot;charge-card&quot;</span>)</span><br><span class=\"line\">                .lockDuration(<span class=\"number\">1000</span>)</span><br><span class=\"line\">                .handler(((externalTask, externalTaskService) -&gt; &#123;</span><br><span class=\"line\">                    <span class=\"comment\">// è·å–æµç¨‹å˜é‡</span></span><br><span class=\"line\">                    <span class=\"type\">String</span> <span class=\"variable\">item</span> <span class=\"operator\">=</span> (String) externalTask.getVariable(<span class=\"string\">&quot;item&quot;</span>);</span><br><span class=\"line\">                    <span class=\"type\">Long</span> <span class=\"variable\">amount</span> <span class=\"operator\">=</span> (Long) externalTask.getVariable(<span class=\"string\">&quot;amount&quot;</span>);</span><br><span class=\"line\">                    System.out.println(<span class=\"string\">&quot;item---&gt;&quot;</span>+item + <span class=\"string\">&quot;  amount--&gt;&quot;</span> + amount);</span><br><span class=\"line\">                    <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                        Desktop.getDesktop().browse(<span class=\"keyword\">new</span> <span class=\"title class_\">URI</span>(<span class=\"string\">&quot;https://docs.camunda.org/get-started/quick-start/complete&quot;</span>));</span><br><span class=\"line\">                    &#125; <span class=\"keyword\">catch</span> (Exception e) &#123;</span><br><span class=\"line\">                        e.printStackTrace();</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">                    <span class=\"comment\">// å®Œæˆä»»åŠ¡</span></span><br><span class=\"line\">                    externalTaskService.complete(externalTask);</span><br><span class=\"line\">                &#125;)).open();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>è¿è¡Œè¯¥æ–¹æ³•å³å¯ï¼Œå½“æµç¨‹å¤„ç†æ—¶ä¼šæ‰§è¡Œç›¸å…³é€»è¾‘ã€‚</p>\n<h3 id=\"3-3-éƒ¨ç½²æµç¨‹\"><a href=\"#3-3-éƒ¨ç½²æµç¨‹\" class=\"headerlink\" title=\"3.3 éƒ¨ç½²æµç¨‹\"></a>3.3 éƒ¨ç½²æµç¨‹</h3><p>æ¥ä¸‹æ¥æˆ‘ä»¬å°±å¯ä»¥æ¥éƒ¨ç½²ä¸Šé¢å®šä¹‰çš„æµç¨‹äº†ã€‚ä½¿ç”¨ Camunda Modeler éƒ¨ç½²æµç¨‹ï¼Œç‚¹å‡»å·¥å…·æ ä¸­çš„éƒ¨ç½²æŒ‰é’®å¯ä»¥å°†å½“å‰æµç¨‹éƒ¨ç½²åˆ°æµç¨‹å¼•æ“ï¼Œç‚¹å‡»éƒ¨ç½²æŒ‰é’®ï¼Œè¾“å…¥Deployment Name ä¸º â€œPaymentâ€ ï¼Œè¾“å…¥ä¸‹æ–¹REST Endpoint ä¸º<a class=\"link\"   href=\"http://localhost:8080/engine-rest\" >http://localhost:8080/engine-rest<i class=\"fas fa-external-link-alt\"></i></a> ï¼Œç„¶åç‚¹å‡»å³ä¸‹è§’Deployéƒ¨ç½²</p>\n<p>éƒ¨ç½²æ“ä½œï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220901102738775.png\"\n                      alt=\"image-20220901102738775\"\n                ></p>\n<p>éƒ¨ç½²çš„æ—¶å€™æŠ¥é”™ï¼šåŸå› æ˜¯å®‰è£…è·¯å¾„ä¸­æœ‰ä¸­æ–‡</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220901101904825.png\"\n                      alt=\"image-20220901101904825\"\n                ></p>\n<p>éƒ¨ç½²æˆåŠŸï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220901102705446.png\"\n                      alt=\"image-20220901102705446\"\n                ></p>\n<p>ç„¶ååœ¨BPMä¸­æˆ‘ä»¬å¯ä»¥æŸ¥çœ‹éƒ¨ç½²çš„æµç¨‹ï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220901112401741.png\"\n                      alt=\"image-20220901112401741\"\n                ></p>\n<h3 id=\"å¯åŠ¨æµç¨‹\"><a href=\"#å¯åŠ¨æµç¨‹\" class=\"headerlink\" title=\"å¯åŠ¨æµç¨‹\"></a>å¯åŠ¨æµç¨‹</h3><p>æˆ‘ä»¬ä½¿ç”¨Rest APIå‘èµ·æµç¨‹ï¼Œæ‰€ä»¥éœ€è¦ä¸€ä¸ªæ¥å£æµ‹è¯•å·¥å…·ï¼ˆä¾‹å¦‚ï¼šPostmanï¼‰ï¼Œæˆ–è€…ä¹Ÿå¯ä»¥ä½¿ç”¨ç”µè„‘è‡ªå¸¦çš„curl</p>\n<p>curlæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">curl -H &quot;Content-Type: application/json&quot; -X POST -d &#x27;&#123;&quot;variables&quot;: &#123;&quot;amount&quot;: &#123;&quot;value&quot;:555,&quot;type&quot;:&quot;long&quot;&#125;, &quot;item&quot;: &#123;&quot;value&quot;:&quot;item-xyz&quot;&#125; &#125; &#125;&#x27; http://localhost:8080/engine-rest/process-definition/key/payment-retrieval/start</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>postmanæ–¹å¼å¤„ç†</p>\n<p>åœ¨urlä¸­è¾“å…¥ï¼š<a class=\"link\"   href=\"http://localhost:8080/engine-rest/process-definition/key/payment-retrieval/start\" >http://localhost:8080/engine-rest/process-definition/key/payment-retrieval/start<i class=\"fas fa-external-link-alt\"></i></a> é€šè¿‡<code>POST</code>æ–¹å¼æäº¤ï¼Œæäº¤çš„æ–¹å¼æ˜¯<code>JSON</code> æ•°æ®ï¼Œå…·ä½“å†…å®¹ä¸ºï¼š</p>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">\t<span class=\"attr\">&quot;variables&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">\t\t<span class=\"attr\">&quot;amount&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">\t\t\t<span class=\"attr\">&quot;value&quot;</span><span class=\"punctuation\">:</span><span class=\"number\">555</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">\t\t\t<span class=\"attr\">&quot;type&quot;</span><span class=\"punctuation\">:</span><span class=\"string\">&quot;long&quot;</span></span><br><span class=\"line\">\t\t<span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">\t\t<span class=\"attr\">&quot;item&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">\t\t\t<span class=\"attr\">&quot;value&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;item-xyz&quot;</span></span><br><span class=\"line\">\t\t<span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">\t<span class=\"punctuation\">&#125;</span></span><br><span class=\"line\"><span class=\"punctuation\">&#125;</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220901112634925.png\"\n                      alt=\"image-20220901112634925\"\n                ></p>\n<p>ç„¶åæˆ‘ä»¬ç‚¹å‡»å‘é€ï¼Œæ“ä½œæˆåŠŸå¯ä»¥çœ‹åˆ°å¦‚ä¸‹çš„è¿”å›ä¿¡æ¯</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220901112709320.png\"\n                      alt=\"image-20220901112709320\"\n                ></p>\n<p>åŒæ—¶ä»»åŠ¡æ‰§è¡Œåæˆ‘ä»¬åœ¨æ§åˆ¶å°å¯ä»¥çœ‹åˆ°ç›¸å…³çš„ä¿¡æ¯</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220901112810150.png\"\n                      alt=\"image-20220901112810150\"\n                ></p>\n<h1 id=\"æ¡ˆä¾‹æ‰©å±•\"><a href=\"#æ¡ˆä¾‹æ‰©å±•\" class=\"headerlink\" title=\"æ¡ˆä¾‹æ‰©å±•\"></a>æ¡ˆä¾‹æ‰©å±•</h1><p>ä¸Šé¢çš„æ¡ˆä¾‹è¿‡äºç®€å•ï¼Œæˆ‘ä»¬æ·»åŠ ä¸åŒçš„ä»»åŠ¡èŠ‚ç‚¹å’Œç½‘å…³æ¥ä¸°å¯Œä¸‹</p>\n<h2 id=\"ç”¨æˆ·ä»»åŠ¡\"><a href=\"#ç”¨æˆ·ä»»åŠ¡\" class=\"headerlink\" title=\"ç”¨æˆ·ä»»åŠ¡\"></a>ç”¨æˆ·ä»»åŠ¡</h2><h3 id=\"æ·»åŠ èŠ‚ç‚¹\"><a href=\"#æ·»åŠ èŠ‚ç‚¹\" class=\"headerlink\" title=\"æ·»åŠ èŠ‚ç‚¹\"></a>æ·»åŠ èŠ‚ç‚¹</h3><p>Â æˆ‘ä»¬åœ¨ä¸Šé¢çš„æ¡ˆä¾‹ä¸­æ·»åŠ ä¸€ä¸ª<code>ç”¨æˆ·ä»»åŠ¡</code>æ¥å¤„ç†æµç¨‹ã€‚</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220903233945199.png\"\n                      alt=\"image-20220903233945199\"\n                ></p>\n<p>ç‚¹å‡»åˆšåˆšåˆ›å»ºçš„<code>æ‰¹å‡†ä»˜æ¬¾</code>èŠ‚ç‚¹ï¼Œç„¶åé€šè¿‡æ‰³æ‰‹è®¾ç½®èŠ‚ç‚¹çš„ç±»å‹ä¸º<code>ç”¨æˆ·ä»»åŠ¡</code>(User Task)</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220903234050669.png\"\n                      alt=\"image-20220903234050669\"\n                ></p>\n<p>ç„¶åè®¾ç½®èŠ‚ç‚¹çš„å®¡æ‰¹äººä¸º<code>demo</code></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220903234231682.png\"\n                      alt=\"image-20220903234231682\"\n                ></p>\n<h3 id=\"é…ç½®è¡¨å•\"><a href=\"#é…ç½®è¡¨å•\" class=\"headerlink\" title=\"é…ç½®è¡¨å•\"></a>é…ç½®è¡¨å•</h3><p>åœ¨<code>ç”¨æˆ·èŠ‚ç‚¹</code>å¤„æˆ‘ä»¬ç»‘å®šè¡¨å•æ•°æ®ã€‚ç„¶ååˆ›å»ºè¡¨å•ç›¸å…³çš„å­—æ®µï¼Œå¹¶æ·»åŠ å¯¹åº”çš„æè¿°ä¿¡æ¯ã€‚</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220904001026418.png\"\n                      alt=\"image-20220904001026418\"\n                ></p>\n<blockquote>\n<p>amountå­—æ®µï¼š</p>\n<p>â€‹     ID:amount</p>\n<p>â€‹     Type:long</p>\n<p>â€‹     Label:é‡‘é¢</p>\n<p>Itemå­—æ®µï¼š</p>\n<p>â€‹     ID:item</p>\n<p>â€‹     Type:string</p>\n<p>â€‹     Label:é¡¹ç›®</p>\n<p>Approvedå­—æ®µï¼š</p>\n<p>â€‹     ID:approved</p>\n<p>â€‹     Type:boolean</p>\n<p>â€‹     Label:æ˜¯å¦åŒæ„</p>\n</blockquote>\n<h3 id=\"éƒ¨ç½²æµç¨‹\"><a href=\"#éƒ¨ç½²æµç¨‹\" class=\"headerlink\" title=\"éƒ¨ç½²æµç¨‹\"></a>éƒ¨ç½²æµç¨‹</h3><p>æµç¨‹å®šä¹‰å¥½ä¹‹åæˆ‘ä»¬å°±å¯ä»¥éƒ¨ç½²æµç¨‹äº†ã€‚ç›´æ¥åœ¨<code>Camunda Modeler</code>å·¥å…·æ ä¸Šçš„ä¸Šä¼ æŒ‰é’®å°†æµç¨‹ä¸Šä¼ åˆ°æµç¨‹å¼•æ“ä¸­ã€‚éƒ¨ç½²ååœ¨<code>Camunda Web</code>ä¸­æŸ¥çœ‹éƒ¨ç½²çš„æµç¨‹ã€‚</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220904001636662.png\"\n                      alt=\"image-20220904001636662\"\n                ></p>\n<h3 id=\"æµ‹è¯•æµç¨‹\"><a href=\"#æµ‹è¯•æµç¨‹\" class=\"headerlink\" title=\"æµ‹è¯•æµç¨‹\"></a>æµ‹è¯•æµç¨‹</h3><p>æ‰“å¼€ä»»åŠ¡åˆ—è¡¨ï¼ˆ<a class=\"link\"   href=\"http://localhost:8080/camunda/app/tasklist/%EF%BC%89%EF%BC%8C%E4%BD%BF%E7%94%A8\" >http://localhost:8080/camunda/app/tasklist/ï¼‰ï¼Œä½¿ç”¨<i class=\"fas fa-external-link-alt\"></i></a> demo &#x2F; demo ç™»å½•ã€‚ç‚¹å‡»å³ä¸Šè§’çš„ <code>Start process</code> ï¼Œåœ¨å¼¹å‡ºçš„å¯¹è¯æ¡†ä¸­é€‰æ‹©â€œä»˜æ¬¾æµç¨‹â€.</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220904001816475.png\"\n                      alt=\"image-20220904001816475\"\n                ></p>\n<p>è¿™æ—¶ä¼šå¼¹å‡ºç¼–è¾‘æµç¨‹å˜é‡çš„å¯¹è¯æ¡†ï¼Œå¯ä»¥é€šè¿‡ç‚¹å‡» Add a variable æŒ‰é’®æ·»åŠ å˜é‡ï¼Œè¿™æ¬¡æˆ‘ä»¬å…ˆä¸æ·»åŠ ï¼Œç›´æ¥ç‚¹å‡»å³ä¸‹è§’<code>Start</code>å¯åŠ¨æµç¨‹ã€‚</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220904001902564.png\"\n                      alt=\"image-20220904001902564\"\n                ></p>\n<p>è¿™æ—¶ï¼Œåœ¨ä»»åŠ¡åˆ—è¡¨åº”è¯¥å°±èƒ½çœ‹åˆ°åˆšåˆ›å»ºçš„äººå·¥ä»»åŠ¡äº†ï¼Œå¦‚æœæ²¡æœ‰å¯ä»¥æ‰‹åŠ¨åˆ·æ–°ä¸€ä¸‹</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220904001953028.png\"\n                      alt=\"image-20220904001953028\"\n                ></p>\n<p>åˆ°è¿™å„¿è¿™ä¸ª<code>ç”¨æˆ·ä»»åŠ¡</code>èŠ‚ç‚¹çš„äººå·¥å®¡æ ¸å°±åº”è¯¥è¦å¤„ç†äº†ï¼Œæˆ‘ä»¬åœ¨ä¸‹ä¸€ä¸ªæ¡ˆä¾‹ä¸­ç»§ç»­è¿™ä¸ªæ¡ˆä¾‹ï¼Œæˆ‘ä»¬åŠ å…¥æ’ä»–ç½‘å…³æ¥å¤„ç†ã€‚</p>\n<h2 id=\"æ’ä»–ç½‘å…³\"><a href=\"#æ’ä»–ç½‘å…³\" class=\"headerlink\" title=\"æ’ä»–ç½‘å…³\"></a>æ’ä»–ç½‘å…³</h2><p>æˆ‘ä»¬å°†ä½¿ç”¨<strong>æ’ä»–ç½‘å…³</strong>(<em>Exclusive Gateways</em>)ï¼Œä¸ºæµç¨‹æ·»åŠ åˆ†æ”¯ï¼Œä»…åœ¨é‡‘é¢è¶³å¤Ÿå¤§çš„æ—¶å€™è¿›è¡Œäººå·¥å®¡æ ¸.</p>\n<h3 id=\"æ·»åŠ ç½‘å…³èŠ‚ç‚¹\"><a href=\"#æ·»åŠ ç½‘å…³èŠ‚ç‚¹\" class=\"headerlink\" title=\"æ·»åŠ ç½‘å…³èŠ‚ç‚¹\"></a>æ·»åŠ ç½‘å…³èŠ‚ç‚¹</h3><p>é¦–å…ˆæ‰“å¼€<code>Camunda Modeler </code>ï¼Œåœ¨å·¦ä¾§çš„å·¥å…·æ¶ä¸­æ‰¾åˆ°ç½‘å…³ï¼ˆè±å½¢ï¼‰ï¼Œå°†å®ƒæ‹–åŠ¨åˆ°â€œä»˜æ¬¾è¯·æ±‚â€å’Œâ€œåˆ·å¡ä»˜æ¬¾â€ä¹‹é—´ï¼Œå°†â€œæ‰¹å‡†ä»˜æ¬¾â€å‘ä¸‹ç§»åŠ¨å†æ·»åŠ ä¸€ä¸ªç½‘å…³ï¼Œè°ƒæ•´æµç¨‹ï¼Œæœ€åçœ‹èµ·æ¥ç±»ä¼¼è¿™æ ·ï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220904004632887.png\"\n                      alt=\"image-20220904004632887\"\n                ></p>\n<h3 id=\"é…ç½®ç½‘å…³\"><a href=\"#é…ç½®ç½‘å…³\" class=\"headerlink\" title=\"é…ç½®ç½‘å…³\"></a>é…ç½®ç½‘å…³</h3><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬é€‰æ‹©â€œ&lt;1000â€çš„è¿çº¿ï¼Œæ‰“å¼€å±æ€§é¢æ¿ï¼Œé€‰æ‹©â€œCondition Typeâ€ä¸ºâ€œExpressionâ€ï¼Œè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨<a class=\"link\"   href=\"https://docs.camunda.org/manual/latest/user-guide/process-engine/expression-language/\" >JAVAç»Ÿä¸€è¡¨è¾¾å¼è¯­è¨€<i class=\"fas fa-external-link-alt\"></i></a>ç¼–å†™æ¡ä»¶ï¼Œè¿™é‡Œè¦åšçš„æ˜¯åœ¨é‡‘é¢å°äº1000æ—¶ç›´æ¥åˆ·å¡ä»˜æ¬¾ï¼Œåˆ™è¾“å…¥è¡¨è¾¾å¼ <code>$&#123;amount&lt;1000&#125;</code></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220904004725626.png\"\n                      alt=\"image-20220904004725626\"\n                ></p>\n<p>åŒæ ·çš„ï¼Œå¯¹å¦ä¸€æ¡çº¿ä¹Ÿè¿›è¡Œé…ç½®ï¼Œè¡¨è¾¾å¼ä¸º<code>$&#123;amount&gt;=1000&#125;</code></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220904004747234.png\"\n                      alt=\"image-20220904004747234\"\n                ></p>\n<p>ç„¶å<code>æ˜¯å¦æ‰¹å‡†</code>çš„æ’ä»–ç½‘å…³èŠ‚ç‚¹æˆ‘ä»¬ä¹Ÿéœ€è¦å¤„ç†ä¸‹</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220904004845594.png\"\n                      alt=\"image-20220904004845594\"\n                ></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220904004910392.png\"\n                      alt=\"image-20220904004910392\"\n                ></p>\n<h3 id=\"éƒ¨ç½²æµç¨‹-1\"><a href=\"#éƒ¨ç½²æµç¨‹-1\" class=\"headerlink\" title=\"éƒ¨ç½²æµç¨‹\"></a>éƒ¨ç½²æµç¨‹</h3><p>éƒ¨ç½²æµç¨‹å’Œä¸Šé¢çš„æ“ä½œæ˜¯ä¸€æ ·çš„ã€‚</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220904005023089.png\"\n                      alt=\"image-20220904005023089\"\n                ></p>\n<h3 id=\"æµ‹è¯•æ“ä½œ\"><a href=\"#æµ‹è¯•æ“ä½œ\" class=\"headerlink\" title=\"æµ‹è¯•æ“ä½œ\"></a>æµ‹è¯•æ“ä½œ</h3><p>æ‰“å¼€ä»»åŠ¡åˆ—è¡¨ï¼ˆ<a class=\"link\"   href=\"http://localhost:8080/camunda/app/tasklist/%EF%BC%89%EF%BC%8C%E4%BD%BF%E7%94%A8\" >http://localhost:8080/camunda/app/tasklist/ï¼‰ï¼Œä½¿ç”¨<i class=\"fas fa-external-link-alt\"></i></a> demo &#x2F; demo ç™»å½•,ç‚¹å‡»å³ä¸Šè§’çš„ Start process ï¼Œåœ¨å¼¹å‡ºçš„å¯¹è¯æ¡†ä¸­é€‰æ‹©â€œä»˜æ¬¾æµç¨‹â€,ä¸Šé¢ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ç›´æ¥ç‚¹å‡» Startï¼Œä½†è¿™æ¬¡æˆ‘ä»¬è¦å¢åŠ å‡ ä¸ªå˜é‡æ¥æµ‹è¯•åŠ¨æ€çš„æµç¨‹ã€‚</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220904005221732.png\"\n                      alt=\"image-20220904005221732\"\n                ></p>\n<p>è¯•ç€æ›´æ”¹ <code>amount</code> çš„å€¼ï¼ŒæŸ¥çœ‹å¯¹æµç¨‹æ‰§è¡Œé¡ºåºçš„å½±å“</p>\n<h2 id=\"å†³ç­–è‡ªåŠ¨åŒ–\"><a href=\"#å†³ç­–è‡ªåŠ¨åŒ–\" class=\"headerlink\" title=\"å†³ç­–è‡ªåŠ¨åŒ–\"></a>å†³ç­–è‡ªåŠ¨åŒ–</h2><p>åœ¨ä¸Šé¢çš„æ¡ˆä¾‹ä¸­æˆ‘ä»¬åœ¨å®¡æ‰¹æ—¶æ˜¯é€šè¿‡<code>ç”¨æˆ·ä»»åŠ¡</code>ç»“åˆè¡¨å•æ¥åšçš„å®¡æ‰¹ï¼Œæœ¬æ¡ˆä¾‹æˆ‘ä»¬æ¥çœ‹çœ‹æˆ‘ä»¬é€šè¿‡<code>DMN</code>ä¸ºæµç¨‹æ·»åŠ ä¸€ä¸ªä¸šåŠ¡è§„åˆ™æ¥å¤„ç†</p>\n<h3 id=\"æ·»åŠ ä¸šåŠ¡è§„åˆ™\"><a href=\"#æ·»åŠ ä¸šåŠ¡è§„åˆ™\" class=\"headerlink\" title=\"æ·»åŠ ä¸šåŠ¡è§„åˆ™\"></a>æ·»åŠ ä¸šåŠ¡è§„åˆ™</h3><p>æ‰“å¼€ Camunda Modelerï¼Œç‚¹å‡» â€œæ‰¹å‡†ä»˜æ¬¾â€ï¼Œåœ¨å³é¢çš„æ‰³æ‰‹èœå•ä¸­ï¼Œå°†ç±»å‹æ”¹ä¸ºâ€œ<strong>Business Rule Task</strong> â€ï¼ˆä¸šåŠ¡è§„åˆ™ä»»åŠ¡ï¼‰</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220904113549016.png\"\n                      alt=\"image-20220904113549016\"\n                ></p>\n<p>ä¸‹ä¸€æ­¥ï¼Œå°†å±æ€§é¢æ¿ä¸­çš„ <code>Implementation</code> é€‰æ‹©ä¸º<code>DMN</code>ï¼Œè¾“å…¥ Decision Ref ä¸º <code>approve-payment</code>ï¼Œä¸ºäº†å°†å†³ç­–çš„ç»“æœå­˜å…¥æµç¨‹å˜é‡ï¼Œæˆ‘ä»¬è¿˜éœ€è¦ç¼–è¾‘ç»“æœå˜é‡Result Variable ä¸º<code>approved</code>ï¼Œç»“æœç±»å‹ Map Decision Result é€‰æ‹©ä¸º <code>singleEntry </code>ï¼Œæœ€åç»“æœå¦‚ä¸‹ï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220904113700661.png\"\n                      alt=\"image-20220904113700661\"\n                ></p>\n<h3 id=\"åˆ›å»ºDMNè¡¨\"><a href=\"#åˆ›å»ºDMNè¡¨\" class=\"headerlink\" title=\"åˆ›å»ºDMNè¡¨\"></a>åˆ›å»ºDMNè¡¨</h3><p>ç‚¹å‡» <code>File &gt; New File &gt; DMN Diagram</code>åˆ›å»ºä¸€ä¸ªæ–°çš„DMN,ç°åœ¨ç”»å¸ƒä¸Šå·²ç»å­˜åœ¨ä¸€ä¸ªå†³ç­–å…ƒç´ äº†ï¼Œé€‰æ‹©å®ƒï¼Œç„¶ååœ¨å³ä¾§å±æ€§é¢æ¿ä¸­æ›´æ”¹<code>Id</code>å’Œ<code>Name</code>ï¼Œè¿™é‡Œçš„Idéœ€è¦å’Œæµç¨‹ä¸­çš„<code>Decision Ref</code>å±æ€§ä¸€è‡´ï¼Œè¿™æ¬¡æˆ‘ä»¬è¾“å…¥Idä¸º<code>approve-payment</code></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220904113803219.png\"\n                      alt=\"image-20220904113803219\"\n                ></p>\n<p>æ¥ä¸‹æ¥ï¼Œç‚¹å‡»å†³ç­–å…ƒç´ å·¦ä¸Šè§’çš„è¡¨æ ¼æŒ‰é’®ï¼Œåˆ›å»ºæ–°çš„DMNè¡¨.</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220904113905505.png\"\n                      alt=\"image-20220904113905505\"\n                ></p>\n<h3 id=\"ç¼–è¾‘DMNè¡¨\"><a href=\"#ç¼–è¾‘DMNè¡¨\" class=\"headerlink\" title=\"ç¼–è¾‘DMNè¡¨\"></a>ç¼–è¾‘DMNè¡¨</h3><p>é¦–å…ˆç¼–è¾‘è¾“å…¥å‚æ•°ï¼Œåœ¨æœ¬ä¾‹ä¸­ï¼Œä¸ºäº†ç®€å•ï¼Œæˆ‘ä»¬ä¾æ®é¡¹ç›®åè¿›è¡Œåˆ¤æ–­ï¼Œè§„åˆ™å¯ä»¥ä½¿ç”¨ <code>FEEL è¡¨è¾¾å¼</code>ã€<code>JUEL</code>æˆ–è€… <code>Script</code> ä¹¦å†™ï¼Œè¯¦æƒ…å¯ä»¥é˜…è¯» <a class=\"link\"   href=\"https://docs.camunda.org/manual/latest/user-guide/dmn-engine/expressions-and-scripts/\" >https://docs.camunda.org/manual/latest/user-guide/dmn-engine/expressions-and-scripts/<i class=\"fas fa-external-link-alt\"></i></a></p>\n<p>åŒå‡»è¡¨æ ¼ä¸­çš„<em>Input</em>ï¼Œç¼–è¾‘ç¬¬ä¸€ä¸ªè¾“å…¥å‚æ•°</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220904114105012.png\"\n                      alt=\"image-20220904114105012\"\n                ></p>\n<p>ä¸‹é¢ï¼Œè®¾ç½®è¾“å…¥å‚æ•°ï¼ŒåŒå‡»<em>Output</em>ç¼–è¾‘</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220904114133016.png\"\n                      alt=\"image-20220904114133016\"\n                ></p>\n<p>ä¸‹é¢ï¼Œæˆ‘ä»¬ç‚¹å‡»å·¦ä¾§çš„è“è‰²åŠ å·ï¼Œæ·»åŠ ä¸€äº›è§„åˆ™ï¼Œæœ€åç±»ä¼¼è¿™æ ·ï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220904114210501.png\"\n                      alt=\"image-20220904114210501\"\n                ></p>\n<h3 id=\"éƒ¨ç½²DMNè¡¨\"><a href=\"#éƒ¨ç½²DMNè¡¨\" class=\"headerlink\" title=\"éƒ¨ç½²DMNè¡¨\"></a>éƒ¨ç½²DMNè¡¨</h3><p>ç‚¹å‡»åº•éƒ¨çš„éƒ¨ç½²æŒ‰é’®ï¼Œå°†DMNéƒ¨ç½²åˆ°æµç¨‹å¼•æ“ä¸­</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220904114317458.png\"\n                      alt=\"image-20220904114317458\"\n                ></p>\n<h3 id=\"æµç¨‹æ¡ˆä¾‹æµ‹è¯•\"><a href=\"#æµç¨‹æ¡ˆä¾‹æµ‹è¯•\" class=\"headerlink\" title=\"æµç¨‹æ¡ˆä¾‹æµ‹è¯•\"></a>æµç¨‹æ¡ˆä¾‹æµ‹è¯•</h3><p>ç°åœ¨æ‰“å¼€ <a class=\"link\"   href=\"http://localhost:8080/camunda/app/cockpit/\" >http://localhost:8080/camunda/app/cockpit/<i class=\"fas fa-external-link-alt\"></i></a> ï¼Œä½¿ç”¨demo&#x2F;demoç™»å½•ï¼Œå¯ä»¥çœ‹åˆ°å†³ç­–å®šä¹‰å¢åŠ äº†ä¸€ä¸ªï¼Œç‚¹å‡»è¿›å»å¯ä»¥çœ‹åˆ°åˆšæ‰ç¼–è¾‘çš„DMN.</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220904114413678.png\"\n                      alt=\"image-20220904114413678\"\n                ></p>\n<p>ç‚¹å‡»è¿›å»å¯ä»¥çœ‹åˆ°å¯¹åº”çš„å†³ç­–ä¿¡æ¯</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220904114452196.png\"\n                      alt=\"image-20220904114452196\"\n                ></p>\n<p>ç„¶åæˆ‘ä»¬éƒ¨ç½²æµç¨‹ç„¶åå¯åŠ¨æµç¨‹</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220904114623954.png\"\n                      alt=\"image-20220904114623954\"\n                ></p>\n<p>è¯¥æµç¨‹å†³ç­–è¾“å‡ºçš„<code>approved</code>ä¸ºtrue</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220904114740904.png\"\n                      alt=\"image-20220904114740904\"\n                ></p>\n<p>æ›´æ”¹ä¸‹è¾“å…¥çš„å‚æ•°</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220904114822563.png\"\n                      alt=\"image-20220904114822563\"\n                ></p>\n<p>è¯¥å†³ç­–ä¸­è¾“å‡ºçš„<code>approved</code>ä¸ºfalse</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220904114913062.png\"\n                      alt=\"image-20220904114913062\"\n                ></p>\n<p>å¥½äº†~åˆ°æ­¤Camundaçš„åŸºç¡€å…¥é—¨æ¡ˆä¾‹æˆ‘ä»¬å°±è®²è§£åˆ°è¿™é‡Œï¼Œéœ€è¦è·å–æ›´å¤šCamundaç›¸å…³è¯¾ç¨‹è§†é¢‘çš„å¯ä»¥ç»§ç»­å…³æ³¨æ³¢å“¥çš„Bè´¦å·ï¼Œæˆ–è€…æ·»åŠ æ³¢å“¥å¾®ä¿¡(boge_java&#x2F;boge3306)</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220904115333970.png\"\n                      alt=\"image-20220904115333970\"\n                ></p>\n"},{"title":"camundaè¿›é˜¶ç¯‡","date":"2022-10-20T08:38:45.000Z","_content":"# Camunda-çƒ­é—¨å·¥ä½œæµå¼•æ“æ¡†æ¶\n> Lectureï¼šæ³¢å“¥\n\n![image-20220902232358815](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220902232358815.png)\n\n# ProcessEngine\n\nProcessEngineæ˜¯Camundaæµç¨‹å¼•æ“çš„æ ¸å¿ƒã€‚æˆ‘ä»¬åœ¨æµç¨‹ä¸­çš„å¾ˆå¤šå…·ä½“çš„å¤„ç†æ¯”å¦‚`æµç¨‹éƒ¨ç½²`ã€`æµç¨‹éƒ¨ç½²`ã€`æµç¨‹å®¡æ‰¹`ç­‰æ“ä½œéƒ½æ˜¯é€šè¿‡`XXXService`æ¥å¤„ç†çš„ã€‚è€Œç›¸å…³çš„`XXXService`éƒ½æ˜¯é€šè¿‡`ProcessEngine`æ¥ç®¡ç†çš„ã€‚æ‰€ä»¥å¯¹äº`ProcessEngine`çš„åˆ›å»ºæ–¹å¼è¿˜æ˜¯å¾ˆæœ‰å¿…è¦æŒæ¡çš„ã€‚\n\n\n\n## é€šè¿‡xmlé…ç½®æ–¹å¼\n\né…ç½®ä½ çš„æµç¨‹å¼•æ“çš„æœ€ç®€å•çš„æ–¹æ³•æ˜¯é€šè¿‡ä¸€ä¸ªå«åš`camunda.cfg.xml`çš„XMLæ–‡ä»¶ã€‚ä½¿ç”¨è¿™ä¸ªæ–‡ä»¶ï¼Œä½ å¯ä»¥ç®€å•è¿™æ ·åš:\n\n```java\n    @Test\n    public void processEngine3(){\n        ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine();\n        System.out.println(\"processEngine = \" + processEngine);\n    }\n```\n\næˆ‘ä»¬å®šä¹‰å¦‚ä¸‹çš„`camunda.cfg.xml`æ–‡ä»¶ã€‚æ³¨æ„`camunda.cfg.xml`å¿…é¡»åŒ…å«ä¸€ä¸ªidä¸º`processEngineConfiguration`çš„bean\n\n```xml\n<beans xmlns=\"http://www.springframework.org/schema/beans\"\n       xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n       xsi:schemaLocation=\"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd\">\n\n    <bean id=\"processEngineConfiguration\" class=\"org.camunda.bpm.engine.impl.cfg.StandaloneProcessEngineConfiguration\">\n\n        <property name=\"jdbcUrl\" value=\"jdbc:h2:mem:camunda;DB_CLOSE_DELAY=1000\" />\n        <property name=\"jdbcDriver\" value=\"org.h2.Driver\" />\n        <property name=\"jdbcUsername\" value=\"sa\" />\n        <property name=\"jdbcPassword\" value=\"\" />\n\n        <property name=\"databaseSchemaUpdate\" value=\"true\" />\n\n        <property name=\"jobExecutorActivate\" value=\"false\" />\n\n        <property name=\"mailServerHost\" value=\"mail.my-corp.com\" />\n        <property name=\"mailServerPort\" value=\"5025\" />\n    </bean>\n\n</beans>\n```\n\nå¦‚æœæ²¡æœ‰æ‰¾åˆ°`camunda.cfg.xml`èµ„æºï¼Œé»˜è®¤å¼•æ“å°†æœç´¢`activiti.cfg.xml`æ–‡ä»¶ä½œä¸ºå¤‡ç”¨ã€‚å¦‚æœä¸¤è€…éƒ½ç¼ºå¤±ï¼Œå¼•æ“å°±ä¼šåœæ­¢è¿è¡Œï¼Œå¹¶æ‰“å°å‡ºå…³äºç¼ºå¤±é…ç½®èµ„æºçš„é”™è¯¯ä¿¡æ¯ã€‚\n\nè¯·æ³¨æ„ï¼Œé…ç½®XMLå®é™…ä¸Šæ˜¯ä¸€ä¸ªSpringé…ç½®ã€‚è¿™å¹¶ä¸æ„å‘³ç€Camundaå¼•æ“åªèƒ½åœ¨Springç¯å¢ƒä¸­ä½¿ç”¨ã€‚æˆ‘ä»¬åªæ˜¯åœ¨å†…éƒ¨åˆ©ç”¨Springçš„è§£æå’Œä¾èµ–æ³¨å…¥åŠŸèƒ½æ¥å»ºç«‹å¼•æ“ã€‚\n\nProcessEngineConfigurationå¯¹è±¡ä¹Ÿå¯ä»¥ä½¿ç”¨é…ç½®æ–‡ä»¶ä»¥ç¼–ç¨‹æ–¹å¼åˆ›å»ºã€‚ä¹Ÿå¯ä»¥ä½¿ç”¨ä¸åŒçš„bean idã€‚\n\n```java\nProcessEngineConfiguration.createProcessEngineConfigurationFromResourceDefault();\nProcessEngineConfiguration.createProcessEngineConfigurationFromResource(String resource);\nProcessEngineConfiguration.createProcessEngineConfigurationFromResource(String resource, String beanName);\nProcessEngineConfiguration.createProcessEngineConfigurationFromInputStream(InputStream inputStream);\nProcessEngineConfiguration.createProcessEngineConfigurationFromInputStream(InputStream inputStream, String beanName);\n```\n\n\n\n\n\n## JavaAPIæ–¹å¼\n\næˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡åˆ›å»ºæ­£ç¡®çš„ProcessEngineConfigurationå¯¹è±¡æˆ–ä½¿ç”¨ä¸€äº›é¢„å®šä¹‰çš„å¯¹è±¡ï¼Œä»¥ç¼–ç¨‹æ–¹å¼é…ç½®æµç¨‹å¼•æ“ã€‚\n\n```java\nProcessEngineConfiguration.createStandaloneProcessEngineConfiguration();\nProcessEngineConfiguration.createStandaloneInMemProcessEngineConfiguration();\n```\n\n- `org.camunda.bpm.engine.impl.cfg.StandaloneProcessEngineConfiguration`\n  æµç¨‹å¼•æ“æ˜¯ä»¥ç‹¬ç«‹çš„æ–¹å¼ä½¿ç”¨çš„ã€‚å¼•æ“æœ¬èº«å°†è´Ÿè´£å¤„ç†äº‹åŠ¡ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œåªæœ‰åœ¨å¼•æ“å¯åŠ¨æ—¶æ‰ä¼šæ£€æŸ¥æ•°æ®åº“ï¼ˆå¦‚æœæ²¡æœ‰æ•°æ®åº“æ¨¡å¼æˆ–æ¨¡å¼ç‰ˆæœ¬ä¸æ­£ç¡®ï¼Œä¼šæŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ï¼‰ã€‚\n- `org.camunda.bpm.engine.impl.cfg.StandaloneInMemProcessEngineConfiguration`\n  è¿™æ˜¯ä¸€ä¸ªç”¨äºå•å…ƒæµ‹è¯•çš„å·¥å…·ç±»ã€‚å¼•æ“æœ¬èº«å°†è´Ÿè´£å¤„ç†äº‹åŠ¡ã€‚é»˜è®¤ä½¿ç”¨H2å†…å­˜æ•°æ®åº“ã€‚è¯¥æ•°æ®åº“å°†åœ¨å¼•æ“å¯åŠ¨å’Œå…³é—­æ—¶è¢«åˆ›å»ºå’Œåˆ é™¤ã€‚å½“ä½¿ç”¨è¿™ä¸ªæ—¶ï¼Œå¯èƒ½ä¸éœ€è¦é¢å¤–çš„é…ç½®ï¼ˆé™¤äº†ï¼Œå½“ä½¿ç”¨Jobæ‰§è¡Œå™¨ï¼ˆjob executorï¼‰æˆ–é‚®ä»¶åŠŸèƒ½æ—¶ï¼‰ã€‚\n- `org.camunda.bpm.engine.spring.SpringProcessEngineConfiguration`\n  å½“æµç¨‹å¼•æ“è¢«ç”¨äºSpringç¯å¢ƒæ—¶ä½¿ç”¨ã€‚\n\n\n\n```java\n    @Test\n    public void processEngine1(){\n        ProcessEngineConfigurationImpl cfg = new StandaloneProcessEngineConfiguration()\n                .setJdbcUrl(\"jdbc:mysql://localhost:3306/camunda1?serverTimezone=UTC\")\n                .setJdbcUsername(\"root\")\n                .setJdbcPassword(\"123456\")\n                .setJdbcDriver(\"com.mysql.cj.jdbc.Driver\")\n                .setDatabaseSchemaUpdate(ProcessEngineConfiguration.DB_SCHEMA_UPDATE_FALSE)\n                .setHistory(\"full\");\n        ProcessEngine processEngine = cfg.buildProcessEngine();\n        System.out.println(\"processEngine = \" + processEngine);\n    }\n\n   @Test\n    public void processEngine2(){\n        ProcessEngineConfiguration cfg = ProcessEngineConfiguration.createStandaloneProcessEngineConfiguration();\n        cfg.setJdbcUrl(\"jdbc:mysql://localhost:3306/camunda2?serverTimezone=UTC\")\n                .setJdbcUsername(\"root\")\n                .setJdbcPassword(\"123456\")\n                .setJdbcDriver(\"com.mysql.cj.jdbc.Driver\")\n                .setDatabaseSchemaUpdate(ProcessEngineConfiguration.DB_SCHEMA_UPDATE_FALSE)\n                .setHistory(\"full\");\n\n        ProcessEngine processEngine = cfg.buildProcessEngine();\n        System.out.println(\"processEngine = \" + processEngine);\n    }\n```\n\n\n\n## SpringBooté¡¹ç›®\n\nåœ¨SpringBooté¡¹ç›®ä¼šæ ¹æ®æˆ‘ä»¬å¯¼å…¥çš„ä¾èµ–å®Œæˆè‡ªåŠ¨è£…é…ï¼Œä»è€Œå®ŒæˆProcessEngineçš„è‡ªåŠ¨æ³¨å…¥ã€‚æˆ‘ä»¬å¯ä»¥æ¥åˆ†æä¸‹æºç ã€‚\n\n![image-20220911234908597](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220911234908597.png)\n\næˆ‘ä»¬éœ€è¦æ³¨æ„å¯¹äºCamundaçš„ç›¸å…³é…ç½®ã€‚æˆ‘ä»¬å¯ä»¥åœ¨application.yml ä¸­é…ç½®ã€‚åŸå› æ˜¯ CamundaBpmPropertiesçš„å¤„ç†ã€‚ç„¶åå°±æ˜¯ @Import(CamundaBpmConfiguration.class) ã€‚ åœ¨CamundaBpmConfigurationä¼šå®Œæˆç›¸å…³çš„ ProcessEngineConfiguration çš„ç›¸å…³æ³¨å…¥ã€‚\n\n![image-20220911234945653](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220911234945653.png)\n\n![image-20220911235223373](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220911235223373.png)\n\n\n\nè¿™å—æ„Ÿå…´è¶£çš„å°ä¼™ä¼´å¯ä»¥ä»”ç»†é˜…è¯»ä¸‹ã€‚\n\n\n\n## Service API\n\nJava APIæ˜¯ä¸å¼•æ“äº’åŠ¨çš„æœ€å¸¸è§æ–¹å¼ã€‚ä¸­å¿ƒèµ·ç‚¹æ˜¯`ProcessEngine`ï¼Œå®ƒå¯ä»¥é€šè¿‡å‡ ç§æ–¹å¼åˆ›å»ºï¼Œå¦‚é…ç½®éƒ¨åˆ†æ‰€è¿°ã€‚ä»ProcessEngineä¸­ï¼Œä½ å¯ä»¥è·å¾—åŒ…å«å·¥ä½œæµ/BPMæ–¹æ³•çš„å„ç§æœåŠ¡ã€‚`ProcessEngine`å’Œ`æœåŠ¡å¯¹è±¡`æ˜¯`çº¿ç¨‹å®‰å…¨`çš„ã€‚æ‰€ä»¥ä½ å¯ä»¥ä¸ºæ•´ä¸ªæœåŠ¡å™¨ä¿ç•™å¯¹å…¶ä¸­ä¸€ä¸ªå¯¹è±¡çš„å¼•ç”¨.\n\n![img](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/api.services.png)\n\n\n\n\n\n```java\nProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine();\n\nRepositoryService repositoryService = processEngine.getRepositoryService();\nRuntimeService runtimeService = processEngine.getRuntimeService();\nTaskService taskService = processEngine.getTaskService();\nIdentityService identityService = processEngine.getIdentityService();\nFormService formService = processEngine.getFormService();\nHistoryService historyService = processEngine.getHistoryService();\nManagementService managementService = processEngine.getManagementService();\nFilterService filterService = processEngine.getFilterService();\nExternalTaskService externalTaskService = processEngine.getExternalTaskService();\nCaseService caseService = processEngine.getCaseService();\nDecisionService decisionService = processEngine.getDecisionService();\n```\n\n**æ³¨æ„**ï¼šæ‰€æœ‰çš„æœåŠ¡éƒ½æ˜¯`æ— çŠ¶æ€çš„`ã€‚è¿™æ„å‘³ç€ä½ å¯ä»¥å¾ˆå®¹æ˜“åœ°åœ¨ä¸€ä¸ªé›†ç¾¤çš„å¤šä¸ªèŠ‚ç‚¹ä¸Šè¿è¡ŒCamundaå¹³å°ï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½å»åŒä¸€ä¸ªæ•°æ®åº“ï¼Œè€Œä¸å¿…æ‹…å¿ƒå“ªä¸ªæœºå™¨å®é™…æ‰§è¡Œäº†ä»¥å‰çš„è°ƒç”¨ã€‚å¯¹ä»»ä½•æœåŠ¡çš„ä»»ä½•è°ƒç”¨éƒ½æ˜¯æ— çŠ¶æ€çš„ï¼Œæ— è®ºå®ƒåœ¨å“ªé‡Œæ‰§è¡Œã€‚\n\næ¯ä¸ªæœåŠ¡çš„ç®€å•ä»‹ç»\n\n| æœåŠ¡åç§°                             | ä»‹ç»                                                         |\n| ------------------------------------ | ------------------------------------------------------------ |\n| ä»“åº“æœåŠ¡**RepositoryService**        | æä¾›äº†ç®¡ç†å’Œæ“çºµéƒ¨ç½²å’Œæµç¨‹å®šä¹‰çš„æ“ä½œ                         |\n| è¿è¡Œæ—¶æœåŠ¡-**RuntimeService**        | é¦–å…ˆå¯ä»¥é€šè¿‡ä¸€ä¸ªæµç¨‹å®šä¹‰å¯åŠ¨å¤šä¸ªæµç¨‹å®ä¾‹ã€‚ä¹Ÿèƒ½ç”¨äºå¤„ç†æ£€ç´¢å’Œå­˜å‚¨æµç¨‹å˜é‡çš„æœåŠ¡ |\n| ä»»åŠ¡æœåŠ¡-**TaskService**             | å›´ç»•ç”¨æˆ·å®¡æ‰¹æ“ä½œçš„ä¸€åˆ‡éƒ½ä¼šè¢«å½’çº³åˆ°TaskServiceã€‚æ¯”å¦‚ï¼šæŸ¥è¯¢åˆ†é…ç»™ç”¨æˆ·æˆ–ç»„çš„ä»»åŠ¡ï¼Œåˆ›å»ºæ–°çš„ç‹¬ç«‹ä»»åŠ¡ã€‚è¿™äº›æ˜¯ä¸æµç¨‹å®ä¾‹æ— å…³çš„ä»»åŠ¡ï¼Œæ“çºµä¸€ä¸ªä»»åŠ¡è¢«åˆ†é…ç»™å“ªä¸ªç”¨æˆ·ï¼Œæˆ–è€…å“ªä¸ªç”¨æˆ·ä»¥æŸç§æ–¹å¼å‚ä¸åˆ°ä»»åŠ¡ä¸­ï¼Œå£°ç§°å¹¶å®Œæˆä¸€é¡¹ä»»åŠ¡ã€‚å£°ç§°æ„å‘³ç€æœ‰äººå†³å®šæˆä¸ºè¯¥ä»»åŠ¡çš„å—è®©äººï¼Œæ„å‘³ç€è¿™ä¸ªç”¨æˆ·å°†å®Œæˆè¯¥ä»»åŠ¡ã€‚å®Œæˆæ„å‘³ç€ â€œå®Œæˆä»»åŠ¡çš„å·¥ä½œâ€ç­‰ |\n| èº«ä»½æœåŠ¡-**IdentityService**         | æ˜¯éå¸¸ç®€å•çš„ã€‚å®ƒå…è®¸å¯¹ç»„å’Œç”¨æˆ·è¿›è¡Œç®¡ç†ï¼ˆåˆ›å»ºã€æ›´æ–°ã€åˆ é™¤ã€æŸ¥è¯¢â€¦ï¼‰ã€‚é‡è¦çš„æ˜¯è¦ç†è§£ï¼Œæ ¸å¿ƒå¼•æ“å®é™…ä¸Šåœ¨è¿è¡Œæ—¶å¹¶ä¸å¯¹ç”¨æˆ·è¿›è¡Œä»»ä½•æ£€æŸ¥ |\n| è¡¨å•æœåŠ¡-**FormService**             | ä¸€ä¸ªå¯é€‰çš„æœåŠ¡ã€‚æä¾›äº†è¡¨å•åŠŸèƒ½                               |\n| å†å²æœåŠ¡-**HistoryService**          | æš´éœ²äº†å¼•æ“æ”¶é›†çš„æ‰€æœ‰å†å²æ•°æ®ã€‚å½“æ‰§è¡Œæµç¨‹æ—¶ï¼Œå¼•æ“å¯ä»¥ä¿ç•™å¾ˆå¤šæ•°æ®ï¼ˆè¿™æ˜¯å¯é…ç½®çš„ï¼‰ï¼Œå¦‚æµç¨‹å®ä¾‹çš„å¼€å§‹æ—¶é—´ã€è°åšäº†å“ªäº›ä»»åŠ¡ã€å®Œæˆä»»åŠ¡èŠ±äº†å¤šé•¿æ—¶é—´ã€æ¯ä¸ªæµç¨‹å®ä¾‹éµå¾ªçš„è·¯å¾„ç­‰ã€‚è¯¥æœåŠ¡ä¸»è¦æš´éœ²äº†è®¿é—®è¿™äº›æ•°æ®çš„æŸ¥è¯¢åŠŸèƒ½ã€‚ |\n| ç®¡ç†æœåŠ¡-**ManagementService**       | å®ƒå…è®¸æ£€ç´¢å…³äºæ•°æ®åº“è¡¨å’Œè¡¨å…ƒæ•°æ®çš„ä¿¡æ¯ã€‚æ­¤å¤–ï¼Œå®ƒæš´éœ²äº†æŸ¥è¯¢åŠŸèƒ½å’ŒJobçš„ç®¡ç†æ“ä½œã€‚Jobåœ¨å¼•æ“ä¸­è¢«ç”¨äºå„ç§äº‹æƒ…ï¼Œå¦‚å®šæ—¶å™¨ã€å¼‚æ­¥å»¶ç»­ã€å»¶è¿Ÿæš‚åœ/æ¿€æ´»ç­‰ã€‚ |\n| è¿‡æ»¤å™¨æœåŠ¡-**FilterService**         | å…è®¸åˆ›å»ºå’Œç®¡ç†è¿‡æ»¤å™¨ã€‚è¿‡æ»¤å™¨æ˜¯åƒä»»åŠ¡æŸ¥è¯¢ä¸€æ ·çš„å­˜å‚¨æŸ¥è¯¢ã€‚ä¾‹å¦‚ï¼Œè¿‡æ»¤å™¨è¢«ä»»åŠ¡åˆ—è¡¨ç”¨æ¥è¿‡æ»¤ç”¨æˆ·ä»»åŠ¡ |\n| å¤–éƒ¨ä»»åŠ¡æœåŠ¡-**ExternalTaskService** | æä¾›å¯¹å¤–éƒ¨ä»»åŠ¡å®ä¾‹çš„è®¿é—®ã€‚å¤–éƒ¨ä»»åŠ¡ä»£è¡¨åœ¨å¤–éƒ¨å¤„ç†çš„å·¥ä½œé¡¹ç›®ï¼Œç‹¬ç«‹äºæµç¨‹å¼•æ“ã€‚ |\n| æ¡ˆä¾‹æœåŠ¡-**CaseService**             | ä¸è¿è¡Œæ—¶æœåŠ¡ï¼ˆ**RuntimeService**ï¼‰ç±»ä¼¼ï¼Œä½†ç”¨äºæ¡ˆä¾‹å®ä¾‹ã€‚å®ƒå¤„ç†å¯åŠ¨æ¡ˆä¾‹å®šä¹‰çš„æ–°æ¡ˆä¾‹å®ä¾‹å¹¶ç®¡ç†æ¡ˆä¾‹æ‰§è¡Œçš„ç”Ÿå‘½å‘¨æœŸã€‚è¯¥æœåŠ¡ä¹Ÿè¢«ç”¨æ¥æ£€ç´¢å’Œæ›´æ–°æ¡ˆä¾‹å®ä¾‹çš„æµç¨‹å˜é‡ã€‚ |\n| å†³ç­–æœåŠ¡-**DecisionService**         | å…è®¸è¯„ä¼°éƒ¨ç½²åœ¨å¼•æ“ä¸­çš„å†³ç­–ã€‚å®ƒæ˜¯è¯„ä¼°ç‹¬ç«‹äºæµç¨‹å®šä¹‰çš„ä¸šåŠ¡è§„åˆ™ä»»åŠ¡ä¸­çš„å†³ç­–çš„ä¸€ç§é€‰æ‹©ã€‚ |\n\n\n\n\n\n# ä»»åŠ¡åˆ†é…\n\n## å›ºå®šåˆ†é…\n\nåœ¨æŒ‡æ´¾`ç”¨æˆ·ä»»åŠ¡`çš„å®¡æ‰¹äººæ—¶ã€‚æˆ‘ä»¬æ˜¯ç›´æ¥æŒ‡æ´¾çš„å›ºå®šè´¦å·ã€‚ä½†æ˜¯ä¸ºäº†ä¿è¯æµç¨‹è®¾è®¡å®¡æ‰¹çš„çµæ´»æ€§ã€‚æˆ‘ä»¬éœ€è¦å„ç§ä¸åŒçš„åˆ†é…æ–¹å¼ï¼Œæ‰€ä»¥è¿™èŠ‚æˆ‘ä»¬å°±è¯¦ç»†çš„æ¥ä»‹ç»å…ˆåœ¨Camundaä¸­æˆ‘ä»¬å¯ä»¥ä½¿ç”¨çš„ç›¸å…³çš„åˆ†é…æ–¹å¼\n\n\n\nå›ºå®šåˆ†é…å°±æ˜¯æˆ‘ä»¬å‰é¢ä»‹ç»çš„ï¼Œåœ¨ç»˜åˆ¶æµç¨‹å›¾æˆ–è€…ç›´æ¥åœ¨æµç¨‹æ–‡ä»¶ä¸­é€šè¿‡Assigneeæ¥æŒ‡å®šçš„æ–¹å¼.\n\n![image-20220912003431387](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220912003431387.png)\n\n\n\nè¿™ç§æ–¹å¼å°±éå¸¸ç®€å•ã€‚ä¸å†è¿‡å¤šèµ˜è¿°ã€‚\n\n\n\n## å€¼è¡¨è¾¾å¼\n\n**å€¼è¡¨è¾¾å¼ Value expression**: è§£æä¸ºä¸€ä¸ªå€¼ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œæ‰€æœ‰æµç¨‹å˜é‡éƒ½å¯ä»¥ä½¿ç”¨ã€‚ï¼ˆè‹¥ä½¿ç”¨Springï¼‰æ‰€æœ‰çš„Spring beanä¹Ÿå¯ä»¥ç”¨åœ¨è¡¨è¾¾å¼é‡Œã€‚ä¾‹å¦‚:\n\n```java\n${myVar}\n${myBean.myProperty}\n```\n\n![image-20220912003628341](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220912003628341.png)\n\n\n\nç„¶åå¯ä»¥æ¼”ç¤ºä¸‹è¿™ä¸ªæ¡ˆä¾‹ï¼Œå…ˆéƒ¨ç½²è¯¥æµç¨‹ã€‚\n\n```java\n    /**\n     * å®Œæˆæµç¨‹çš„éƒ¨ç½²æ“ä½œ\n     */\n    @Test\n    public void deploy(){\n        Deployment deploy = repositoryService.createDeployment()\n                .name(\"è¯·å‡æµç¨‹\")\n                .addClasspathResource(\"flow/1-01-ä»»åŠ¡åˆ†é….bpmn\")\n                .deploy();\n        System.out.println(\"deploy.getId() = \" + deploy.getId());\n    }\n```\n\nç„¶ååœ¨å¯åŠ¨æµç¨‹å®ä¾‹ã€‚å¯åŠ¨æµç¨‹å®ä¾‹åä¼šè¿›å…¥åˆ°`äººäº‹å®¡æ‰¹`è¿™ä¸ªèŠ‚ç‚¹ï¼Œæœ‰`å€¼è¡¨è¾¾å¼`çš„å­˜åœ¨ï¼Œæˆ‘ä»¬éœ€è¦åœ¨å¯åŠ¨çš„è¿‡ç¨‹ä¸­å°±ç»™å…¶èµ‹å€¼ã€‚\n\n![image-20220912004447956](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220912004447956.png)\n\nç»‘å®šæµç¨‹å˜é‡çš„æ“ä½œ\n\n```java\n    /**\n     * å¯åŠ¨æµç¨‹å®ä¾‹\n     */\n    @Test\n    public void startFlow(){\n        String processInstanceId = \"Process_0uiy3j1:1:712d273a-31f0-11ed-9e27-c03c59ad2248\";\n        // å®šä¹‰ä¸€ä¸ªMapé›†åˆï¼Œå­˜å‚¨ç›¸å…³çš„æµç¨‹å˜é‡ä¿¡æ¯\n        Map<String,Object> map = new HashMap<>();\n        map.put(\"user1\",\"demo\");\n        // é€šè¿‡ RuntimeService å¯åŠ¨ä¸€ä¸ªæµç¨‹å®ä¾‹ï¼ŒåŒæ—¶ç»‘å®šäº†å¯¹åº”çš„æµç¨‹å˜é‡ä¿¡æ¯\n        runtimeService.startProcessInstanceById(processInstanceId,map);\n    }\n```\n\né€šè¿‡åå°æŸ¥çœ‹æ•°æ®æˆ‘ä»¬å¯ä»¥å‘ç°`act_ru_task`ä¸­æœ‰äº†ä¸€æ¡`äººäº‹å®¡æ‰¹`çš„ä»»åŠ¡ï¼Œè€Œä¸”å¯¹äºçš„å®¡æ‰¹äººå°±æ˜¯`demo`ä¹Ÿå°±æ˜¯æˆ‘ä»¬ç»™å¯¹åº”çš„æµç¨‹å˜é‡çš„èµ‹å€¼\n\n![image-20220912004819089](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220912004819089.png)\n\nè€Œå¯¹åº”çš„æµç¨‹å˜é‡ä¿¡æ¯å­˜å‚¨åœ¨`act_ru_variable`ä¸­ã€‚\n\n![image-20220912004949936](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220912004949936.png)\n\n\n\n## æ–¹æ³•è¡¨è¾¾å¼\n\n**æ–¹æ³•è¡¨è¾¾å¼ Method expression**: è°ƒç”¨ä¸€ä¸ªæ–¹æ³•ï¼Œå¯ä»¥å¸¦æˆ–ä¸å¸¦å‚æ•°ã€‚**å½“è°ƒç”¨ä¸å¸¦å‚æ•°çš„æ–¹æ³•æ—¶ï¼Œè¦ç¡®ä¿åœ¨æ–¹æ³•ååæ·»åŠ ç©ºæ‹¬å·ï¼ˆä»¥é¿å…ä¸å€¼è¡¨è¾¾å¼æ··æ·†ï¼‰ã€‚**ä¼ é€’çš„å‚æ•°å¯ä»¥æ˜¯å­—é¢å€¼(literal value)ï¼Œä¹Ÿå¯ä»¥æ˜¯è¡¨è¾¾å¼ï¼Œå®ƒä»¬ä¼šè¢«è‡ªåŠ¨è§£æã€‚ä¾‹å¦‚ï¼š boge3306\n\n```java\n${printer.print()}\n${myBean.getAssignee()}\n${myBean.addNewOrder('orderName')}\n${myBean.doSomething(myVar, execution)}\n```\n\nmyBeanæ˜¯Springå®¹å™¨ä¸­çš„ä¸ªBeanå¯¹è±¡ï¼Œè¡¨ç¤ºè°ƒç”¨çš„æ˜¯beançš„addNewOrderæ–¹æ³•.æˆ‘ä»¬é€šè¿‡æ¡ˆä¾‹æ¥æ¼”ç¤ºä¸‹ã€‚æˆ‘ä»¬å…ˆå®šä¹‰å¯¹åº”çš„Service\n\n```java\n@Service\npublic class MyBean {\n\n    public String getAssignee(){\n        System.out.println(\"getAssignee æ–¹æ³•æ‰§è¡Œäº†....\");\n        return \"demo\";\n    }\n}\n```\n\nç„¶åæˆ‘ä»¬åœ¨å¯¹åº”çš„æµç¨‹å›¾ä¸­æ¥å®šä¹‰ã€‚\n\n![image-20220912005546442](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220912005546442.png)\n\n\n\nç„¶åé€šè¿‡éƒ¨ç½²å¯åŠ¨æ“ä½œæ¥çœ‹çœ‹ã€‚\n\n![image-20220912010330601](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220912010330601.png)\n\n![image-20220912010405626](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220912010405626.png)\n\né€šè¿‡è¿™å—çš„æ¼”ç¤ºï¼Œæˆ‘ä»¬å°±å¯ä»¥åŸºäºæˆ‘ä»¬çš„å¤–éƒ¨æ¡ä»¶æ¥ç»“åˆæˆ‘ä»¬çš„é€»è¾‘å®ç°åŠ¨æ€çš„æ¥æŒ‡å®šå¯¹åº”çš„å¤„ç†äººã€‚\n\n\n\n## ç›‘å¬å™¨é…ç½®\n\nå¯ä»¥ä½¿ç”¨ç›‘å¬å™¨æ¥å®Œæˆå¾ˆå¤šCamundaçš„æµç¨‹ä¸šåŠ¡ã€‚æˆ‘ä»¬åœ¨æ­¤å¤„ä½¿ç”¨ç›‘å¬å™¨æ¥å®Œæˆè´Ÿè´£äººçš„æŒ‡å®šï¼Œé‚£ä¹ˆæˆ‘ä»¬åœ¨æµç¨‹è®¾è®¡çš„æ—¶å€™å°±ä¸éœ€è¦æŒ‡å®šassigneeã€‚åˆ›å»ºè‡ªå®šä¹‰ç›‘å¬å™¨ï¼š\n\n```java\n/**\n * è‡ªå®šä¹‰çš„ä¸€ä¸ª Task ç›‘å¬å™¨\n * æˆ‘ä»¬éœ€è¦åœ¨ç›‘å¬å™¨ä¸­å®Œæˆ å¤„ç†äººçš„åŠ¨æ€æŒ‡æ´¾\n */\npublic class MyFirstTaskListener implements TaskListener {\n    @Override\n    public void notify(DelegateTask delegateTask) {\n        System.out.println(\"MyFirstTaskListener --- > æ‰§è¡Œäº†\");\n        // é’ˆå¯¹ æ˜¯åˆ›å»ºTaskèŠ‚ç‚¹çš„äº‹ä»¶\n        if(EVENTNAME_CREATE.equals(delegateTask.getEventName())){\n            // æŒ‡æ´¾å¯¹åº”çš„å¤„ç†äºº\n            delegateTask.setAssignee(\"demo\");\n        }\n    }\n}\n```\n\nç„¶ååœ¨æµç¨‹å›¾ä¸­ç»‘å®šå¯¹åº”çš„ç›‘å¬å™¨\n\n![image-20220912011453664](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220912011453664.png)\n\nç„¶åæˆ‘ä»¬éƒ¨ç½²å’Œå¯åŠ¨æµç¨‹åï¼Œå¯ä»¥çœ‹åˆ°å¯¹åº”çš„è§¦å‘æ•ˆæœ\n\n![image-20220912011644311](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220912011644311.png)\n\nè¡¨ç»“æ„ä¸­ä¹Ÿå¯ä»¥çœ‹åˆ°ç›¸å…³çš„ä¿¡æ¯\n\n![image-20220912011735815](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220912011735815.png)\n\nè¯´æ˜è¿™å—çš„å¤„ç†æ˜¯å®Œå…¨å¯è¡Œçš„ã€‚\n\n\n\n# æµç¨‹å˜é‡\n\næµç¨‹å˜é‡å¯ä»¥ç”¨å°†æ•°æ®æ·»åŠ åˆ°æµç¨‹çš„è¿è¡Œæ—¶çŠ¶æ€ä¸­ï¼Œæˆ–è€…æ›´å…·ä½“åœ°è¯´ï¼Œå˜é‡ä½œç”¨åŸŸä¸­ã€‚æ”¹å˜å®ä½“çš„å„ç§APIå¯ä»¥ç”¨æ¥æ›´æ–°è¿™äº›é™„åŠ çš„å˜é‡ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œä¸€ä¸ªå˜é‡ç”±ä¸€ä¸ªåç§°å’Œä¸€ä¸ªå€¼ç»„æˆã€‚åç§°ç”¨äºåœ¨æ•´ä¸ªæµç¨‹ä¸­è¯†åˆ«å˜é‡ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä¸€ä¸ªæ´»åŠ¨ï¼ˆactivityï¼‰è®¾ç½®äº†ä¸€ä¸ªåä¸º *var* çš„å˜é‡ï¼Œé‚£ä¹ˆåç»­æ´»åŠ¨ä¸­å¯ä»¥é€šè¿‡ä½¿ç”¨è¿™ä¸ªåç§°æ¥è®¿é—®å®ƒã€‚å˜é‡çš„å€¼æ˜¯ä¸€ä¸ª Java å¯¹è±¡ã€‚\n\n## è¿è¡Œæ—¶å˜é‡\n\næµç¨‹å®ä¾‹è¿è¡Œæ—¶çš„å˜é‡ï¼Œå­˜å…¥act_ru_variableè¡¨ä¸­ã€‚åœ¨æµç¨‹å®ä¾‹è¿è¡Œç»“æŸæ—¶ï¼Œæ­¤å®ä¾‹çš„å˜é‡åœ¨è¡¨ä¸­åˆ é™¤ã€‚åœ¨æµç¨‹å®ä¾‹åˆ›å»ºåŠå¯åŠ¨æ—¶ï¼Œå¯è®¾ç½®æµç¨‹å˜é‡ã€‚æ‰€æœ‰çš„`startProcessInstanceXXX`æ–¹æ³•éƒ½æœ‰ä¸€ä¸ªå¯é€‰å‚æ•°ç”¨äºè®¾ç½®å˜é‡ã€‚ä¾‹å¦‚ï¼Œ`RuntimeService`ä¸­\n\n```java\nProcessInstance startProcessInstanceById(String processDefinitionId, Map<String, Object> variables);\n```\n\nä¹Ÿå¯ä»¥åœ¨æµç¨‹æ‰§è¡Œä¸­åŠ å…¥å˜é‡ã€‚ä¾‹å¦‚ï¼Œ(*RuntimeService*):\n\n```java\n    void setVariable(String executionId, String variableName, Object value);\n    void setVariableLocal(String executionId, String variableName, Object value);\n    void setVariables(String executionId, Map<String, ? extends Object> variables);\n    void setVariablesLocal(String executionId, Map<String, ? extends Object> variables);\n```\n\nè¯»å–å˜é‡æ–¹æ³•:\n\n```java\n    Map<String, Object> getVariables(String executionId);\n    Map<String, Object> getVariablesLocal(String executionId);\n    Map<String, Object> getVariables(String executionId, Collection<String> variableNames);\n    Map<String, Object> getVariablesLocal(String executionId, Collection<String> variableNames);\n    Object getVariable(String executionId, String variableName);\n    <T> T getVariable(String executionId, String variableName, Class<T> variableClass);\n```\n\n**æ³¨æ„**ï¼šç”±äºæµç¨‹å®ä¾‹ç»“æŸæ—¶ï¼Œå¯¹åº”åœ¨è¿è¡Œæ—¶è¡¨çš„æ•°æ®è·Ÿç€è¢«åˆ é™¤ã€‚æ‰€ä»¥æŸ¥è¯¢ä¸€ä¸ªå·²ç»å®Œç»“æµç¨‹å®ä¾‹çš„å˜é‡ï¼Œåªèƒ½åœ¨å†å²å˜é‡è¡¨ä¸­æŸ¥æ‰¾ã€‚\n\nå½“ç„¶è¿è¡Œæ—¶å˜é‡æˆ‘ä»¬ä¹Ÿå¯ä»¥æ ¹æ®å¯¹åº”çš„ä½œç”¨åŸŸæŠŠä»–åˆ†ä¸º`å…¨å±€å˜é‡`å’Œ`å±€éƒ¨å˜é‡`.\n\n### å…¨å±€å˜é‡\n\næµç¨‹å˜é‡çš„é»˜è®¤ä½œç”¨åŸŸæ˜¯æµç¨‹å®ä¾‹ã€‚å½“ä¸€ä¸ªæµç¨‹å˜é‡çš„ä½œç”¨åŸŸä¸ºæµç¨‹å®ä¾‹æ—¶ï¼Œå¯ä»¥ç§°ä¸º global å˜é‡\n\næ³¨æ„ï¼šå¦‚ï¼š    Globalå˜é‡ï¼šuserIdï¼ˆå˜é‡åï¼‰ã€zhangsanï¼ˆå˜é‡å€¼ï¼‰\n\nglobal å˜é‡ä¸­å˜é‡åä¸å…è®¸é‡å¤ï¼Œè®¾ç½®ç›¸åŒåç§°çš„å˜é‡ï¼Œåè®¾ç½®çš„å€¼ä¼šè¦†ç›–å‰è®¾ç½®çš„å˜é‡å€¼ã€‚\n\næ¡ˆä¾‹ï¼š\n\nå®šä¹‰ç›‘å¬å™¨\n\n```java\npublic class MySecondListener implements TaskListener {\n\n    @Override\n    public void notify(DelegateTask delegateTask) {\n        // è·å–æ‰€æœ‰çš„æµç¨‹å˜é‡\n        Map<String, Object> variables = delegateTask.getVariables();\n        Set<String> keys = variables.keySet();\n        for (String key : keys) {\n            Object obj = variables.get(key);\n            System.out.println(key + \" = \" + obj);\n            if(obj instanceof  String){\n              // ä¿®æ”¹ æµç¨‹å˜é‡çš„ä¿¡æ¯\n              // variables.put(key,obj + \":boge3306\"); ç›´æ¥ä¿®æ”¹Mapä¸­çš„æ•°æ® è¾¾ä¸åˆ°ä¿®æ”¹æµç¨‹å˜é‡çš„æ•ˆæœ\n              delegateTask.setVariable(key,obj + \":boge3306\");\n            }\n        }\n    }\n}\n```\n\nè®¾è®¡æµç¨‹\n\n![image-20220913011512486](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220913011512486.png)\n\n\n\næ¡ˆä¾‹ä»£ç ï¼š\n\n```java\n@SpringBootTest(classes = Application.class)\npublic class AssigneeTaskTest {\n\n    @Autowired\n    RepositoryService repositoryService;\n\n    @Autowired\n    RuntimeService runtimeService;\n\n\n    @Autowired\n    TaskService taskService;\n\n    /**\n     * éƒ¨ç½²æµç¨‹\n     */\n    @Test\n    public void deployFlow(){\n        Deployment deploy = repositoryService.createDeployment()\n                .name(\"è¯·å‡æµç¨‹-ç›‘å¬å™¨\")\n                .addClasspathResource(\"flow/04-ä»»åŠ¡åˆ†é…-ç›‘å¬å™¨åˆ†é….bpmn\")\n                .deploy();\n        System.out.println(\"deploy.getId() = \" + deploy.getId());\n    }\n\n    /**\n     * å¯åŠ¨æµç¨‹å®ä¾‹\n     */\n    @Test\n    public void startFlow(){\n        String processDefId = \"Process_08kf7mp:1:d154c0f5-326d-11ed-841a-c03c59ad2248\";\n        ProcessInstance processInstance = runtimeService.startProcessInstanceById(processDefId);\n        System.out.println(\"processInstance.getId() = \" + processInstance.getId());\n    }\n\n    /**\n     * å¯åŠ¨æµç¨‹å®ä¾‹ï¼Œç»‘å®šå¯¹åº”çš„æµç¨‹å˜é‡\n     */\n    @Test\n    public void startFlowVariables(){\n        String processDefId = \"Process_1t425hs:1:539f152d-326a-11ed-ab57-c03c59ad2248\";\n        // å£°æ˜ä¸€ä¸ª Map é›†åˆ\n        Map<String,Object> map = new HashMap<>();\n        map.put(\"user1\",\"demo\");\n        // å¯åŠ¨æµç¨‹å®ä¾‹ï¼ŒåŒæ—¶ç»‘å®šå¯¹åº”çš„æµç¨‹å˜é‡ä¿¡æ¯\n        ProcessInstance processInstance = runtimeService.startProcessInstanceById(processDefId,map);\n\n        System.out.println(\"processInstance.getId() = \" + processInstance.getId());\n    }\n\n    /**\n     * æµç¨‹å®¡æ‰¹\n     */\n    @Test\n    public void completeTask(){\n        taskService.complete(\"29a0614c-3267-11ed-a030-c03c59ad2248\");\n    }\n\n    /**\n     * æµç¨‹å®¡æ‰¹\n     *    åŒæ ·éœ€è¦ç»‘å®šå¯¹åº”çš„æµç¨‹å˜é‡çš„å€¼\n     */\n    @Test\n    public void completeTaskVariables(){\n        // å£°æ˜ä¸€ä¸ª Map é›†åˆ\n        Map<String,Object> map = new HashMap<>();\n        map.put(\"user2\",\"demo\");\n        taskService.complete(\"dd013840-326a-11ed-b589-c03c59ad2248\",map);\n    }\n}\n```\n\n\n\n\n\n### å±€éƒ¨å˜é‡\n\nä»»åŠ¡å’Œæ‰§è¡Œå®ä¾‹ä»…ä»…æ˜¯é’ˆå¯¹ä¸€ä¸ªä»»åŠ¡å’Œä¸€ä¸ªæ‰§è¡Œå®ä¾‹èŒƒå›´ï¼ŒèŒƒå›´æ²¡æœ‰æµç¨‹å®ä¾‹å¤§ï¼Œ ç§°ä¸º local å˜é‡ã€‚\n\nLocal å˜é‡ç”±äºåœ¨ä¸åŒçš„ä»»åŠ¡æˆ–ä¸åŒçš„æ‰§è¡Œå®ä¾‹ä¸­ï¼Œä½œç”¨åŸŸäº’ä¸å½±å“ï¼Œå˜é‡åå¯ä»¥ç›¸åŒæ²¡æœ‰å½±å“ã€‚Local å˜é‡åä¹Ÿå¯ä»¥å’Œ global å˜é‡åç›¸åŒï¼Œæ²¡æœ‰å½±å“ã€‚ \n\næˆ‘ä»¬é€šè¿‡RuntimeService è®¾ç½®çš„Localå˜é‡ç»‘å®šçš„æ˜¯ executionIdã€‚åœ¨è¯¥æµç¨‹ä¸­æœ‰æ•ˆ\n\n![image-20220913120555429](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220913120555429.png)\n\n```java\n    /**\n     * è®¾ç½®Localæµç¨‹å˜é‡\n     */\n    @Test\n    public void setVariableLocal(){\n        String executionId = \"368f9fdc-3317-11ed-871d-c03c59ad2248\";\n        runtimeService.setVariableLocal(executionId,\"orderId\",\"10006\");\n        runtimeService.setVariableLocal(executionId,\"user2\",\"æ³¢æ³¢çƒ¤é¸­1\");\n    }\n```\n\n\n\næˆ‘ä»¬é€šè¿‡TaskServiceè®¾ç½®çš„Localå˜é‡çš„ä½œç”¨åŸŸæ˜¯å’ŒTaskIdç»‘å®šçš„ï¼Œä½œç”¨åŸŸå°±åœ¨è¿™ä¸€ä¸ªTaskç”Ÿå‘½å‘¨æœŸä¸­ã€‚\n\n```java\n    @Test\n    public void taskLocalVariables(){\n        taskService.setVariableLocal(\"7eb1b34b-3318-11ed-b9e6-c03c59ad2248\",\"user2\",\"æ³¢å“¥66666\");\n    }\n```\n\n\n\n\n\n## å†å²å˜é‡\n\nå†å²å˜é‡ï¼Œå­˜å…¥`act_hi_varinst`è¡¨ä¸­ã€‚åœ¨æµç¨‹å¯åŠ¨æ—¶ï¼Œæµç¨‹å˜é‡ä¼šåŒæ—¶å­˜å…¥å†å²å˜é‡è¡¨ä¸­ï¼›åœ¨æµç¨‹ç»“æŸæ—¶ï¼Œå†å²è¡¨ä¸­çš„å˜é‡ä»ç„¶å­˜åœ¨ã€‚å¯ç†è§£ä¸ºâ€œæ°¸ä¹…ä»£â€çš„æµç¨‹å˜é‡ã€‚\n\nè·å–å·²å®Œæˆçš„ã€idä¸ºâ€™XXXâ€™çš„æµç¨‹å®ä¾‹ä¸­ï¼Œæ‰€æœ‰çš„`HistoricVariableInstances`ï¼ˆå†å²å˜é‡å®ä¾‹ï¼‰ï¼Œå¹¶ä»¥å˜é‡åæ’åºã€‚\n\n```java\nhistoryService.createHistoricVariableInstanceQuery()\n    .processInstanceId(\"XXX\")\n    .orderByVariableName.desc()\n    .list();\n```\n\n\n\n\n\n\n\n# èº«ä»½æœåŠ¡\n\nåœ¨æµç¨‹å®šä¹‰ä¸­åœ¨ä»»åŠ¡ç»“ç‚¹çš„ assignee å›ºå®šè®¾ç½®ä»»åŠ¡è´Ÿè´£äººï¼Œåœ¨æµç¨‹å®šä¹‰æ—¶å°†å‚ä¸è€…å›ºå®šè®¾ç½®åœ¨.bpmn æ–‡ä»¶ä¸­ï¼Œå¦‚æœä¸´æ—¶ä»»åŠ¡è´Ÿè´£äººå˜æ›´åˆ™éœ€è¦ä¿®æ”¹æµç¨‹å®šä¹‰ï¼Œç³»ç»Ÿå¯æ‰©å±•æ€§å·®ã€‚é’ˆå¯¹è¿™ç§æƒ…å†µå¯ä»¥ç»™ä»»åŠ¡è®¾ç½®å¤šä¸ªå€™é€‰äººæˆ–è€…å€™é€‰äººç»„ï¼Œå¯ä»¥ä»å€™é€‰äººä¸­é€‰æ‹©å‚ä¸è€…æ¥å®Œæˆä»»åŠ¡ã€‚\n\nèº«ä»½æœåŠ¡æ˜¯å¯¹å„ç§ç”¨æˆ·/ç»„åº“çš„APIæŠ½è±¡ã€‚å…¶åŸºæœ¬å®ä½“æ˜¯ï¼š\n\n- User: ä½¿ç”¨ä¸åŒIDåŒºåˆ†çš„ä¸åŒç”¨æˆ·\n- Group: ä½¿ç”¨ä¸åŒIDåŒºåˆ†çš„ä¸åŒç»„\n- Membership: ç»„ä¸ç”¨æˆ·ä¹‹é—´çš„å…³ç³»\n- Tenant: ä½¿ç”¨ä¸åŒIDåŒºåˆ†çš„ä¸åŒç§Ÿæˆ·\n- Tenant Membership: ç§Ÿæˆ·ä¸ ç”¨æˆ·/ç»„ ä¹‹é—´çš„å…³ç³»\n\n## å€™é€‰äºº\n\n### ç»˜åˆ¶æµç¨‹å›¾\n\né¦–å…ˆç»˜åˆ¶ä¸€ä¸ªå¦‚ä¸‹çš„åŸºæœ¬æµç¨‹å›¾ã€‚ç„¶åæˆ‘ä»¬åˆ†åˆ«æ¥æŒ‡æ´¾å¤„ç†äººã€‚\n\n![image-20220917101906123](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220917101906123.png)\n\n\n\näººäº‹å®¡æ‰¹è¿™å—æˆ‘ä»¬å¯ä»¥ç›´æ¥æ¥æŒ‡å®šå¤šä¸ªå€™é€‰äººæ¥å¤„ç†ã€‚`demo,zhang,lisi`\n\n![image-20220917102115513](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220917102115513.png)\n\nåœ¨æ€»ç»ç†å®¡æ‰¹çš„ä½ç½®æˆ‘ä»¬åœ¨è®¾è®¡çš„æ—¶å€™ä¸å¤ªæ¸…æ¥šä¼šæ˜¯è°æ¥å®¡æ‰¹ï¼Œæ‰€ä»¥é€šè¿‡å€¼è¡¨è¾¾å¼æ¥å¤„ç†ã€‚\n\n![image-20220917102211814](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220917102211814.png)\n\nè®¾è®¡å®Œæˆåå¯¹åº”çš„xmlä¸­çš„æ•°æ®ä¸ºï¼š\n\n![image-20220917102259478](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220917102259478.png)\n\n\n\n### éƒ¨ç½²å’Œå¯åŠ¨æµç¨‹\n\nåˆ›å»ºäº†æµç¨‹å›¾åæˆ‘ä»¬å°±å¯ä»¥ç›´æ¥æ¥éƒ¨ç½²è¯¥æµç¨‹ã€‚\n\n```java\n    /**\n     * å®Œæˆæµç¨‹çš„éƒ¨ç½²æ“ä½œ\n     */\n    @Test\n    public void deploy(){\n        Deployment deploy = repositoryService.createDeployment()\n                .name(\"å€™é€‰äººæ¡ˆä¾‹\")\n                .addClasspathResource(\"flow/å€™é€‰äººæ¡ˆä¾‹.bpmn\")\n                .deploy();\n        System.out.println(\"deploy.getId() = \" + deploy.getId());\n    }\n```\n\næ¥ç€å°±å¯ä»¥ç›´æ¥æ¥å¯åŠ¨è¯¥æµç¨‹äº†ã€‚\n\n```java\n    /**\n     * å¯åŠ¨æµç¨‹å®ä¾‹\n     */\n    @Test\n    public void startFlow(){\n        String processInstanceId = \"Process_05vjqic:1:cca1e181-362e-11ed-b8fc-c03c59ad2248\";\n        runtimeService.startProcessInstanceById(processInstanceId);\n    }\n```\n\nå¯åŠ¨å®Œæˆæµç¨‹åæˆ‘ä»¬è¿›å…¥åˆ°`act_ru_task`ä¸­å¯ä»¥å‘ç°æˆ‘ä»¬åˆ›å»ºçš„æµç¨‹ä»»åŠ¡ä¿¡æ¯ï¼Œä½†æ˜¯`å¤„ç†äºº`å­—æ®µè¿˜æ˜¯ç©ºçš„ã€‚\n\n![image-20220917102625541](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220917102625541.png)\n\n\n\n![image-20220917102655865](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220917102655865.png)\n\n\n\næ³¨æ„ï¼šç›¸å…³çš„å€™é€‰äººçš„ä¿¡æ¯å­˜å‚¨åœ¨äº†`act_ru_identitylink`è¡¨ä¸­ã€‚\n\n![image-20220917104657296](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220917104657296.png)\n\nå¯¹åº”çš„æŸ¥è¯¢æ“ä½œå¦‚ä¸‹ï¼š\n\n```java\n    @Test\n    public void getTaskCandidate(){\n        List<IdentityLink> identityLinksForTask = taskService.getIdentityLinksForTask(\"023f0279-362f-11ed-8d8a-c03c59ad2248\");\n        for (IdentityLink identityLink : identityLinksForTask) {\n            System.out.println(identityLink.getTaskId());\n            System.out.println(identityLink.getProcessDefId());\n            System.out.println(identityLink.getUserId());\n        }\n    }\n```\n\n\n\n\n\n### ä»»åŠ¡çš„æ‹¾å–\n\nå€™é€‰è¦æ“ä½œæˆ‘ä»¬éœ€è¦é€šè¿‡`æ‹¾å–`çš„è¡Œä¸ºæŠŠ`å€™é€‰äºº`è½¬æ¢ä¸º`å¤„ç†äºº`.é‚£ä¹ˆå€™é€‰äººç™»å½•åéœ€è¦èƒ½æŸ¥è¯¢å‡ºæ¥ä»–å¯ä»¥`æ‹¾å–`çš„ä»»åŠ¡ã€‚åœ¨camundaçš„webåº”ç”¨ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°è¿™æ ·çš„æ“ä½œã€‚`demo`è´¦å·ç™»å½•ã€‚\n\n![image-20220917103124214](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220917103124214.png)\n\nåœ¨ä»£ç ä¸Šçš„å®ç°ï¼Œå…ˆæ¥çœ‹æŸ¥è¯¢æ“ä½œã€‚\n\n```java\n    /**\n     * æ ¹æ®ç™»å½•çš„ç”¨æˆ·æŸ¥è¯¢å¯¹åº”çš„å¯ä»¥æ‹¾å–çš„ä»»åŠ¡\n     */\n    @Test\n    public void queryTaskCandidate(){\n\n        List<Task> list = taskService.createTaskQuery()\n                .processInstanceId(\"023da2e6-362f-11ed-8d8a-c03c59ad2248\")\n                .taskCandidateUser(\"demo\")\n                .list();\n        for (Task task : list) {\n            System.out.println(\"task.getId() = \" + task.getId());\n            System.out.println(\"task.getName() = \" + task.getName());\n        }\n    }\n\n    /**\n     * æŸ¥è¯¢å½“å‰ä»»åŠ¡æ‰€æœ‰çš„å€™é€‰äºº\n     */\n    @Test\n    public void getTaskCandidate(){\n        String taskId = \"52b2642a-36fa-11ed-bde4-c03c59ad2248\";\n        List<IdentityLink> linksForTask = taskService.getIdentityLinksForTask(taskId);\n        if(linksForTask != null && linksForTask.size() > 0){\n            for (IdentityLink identityLink : linksForTask) {\n                System.out.println(identityLink.getUserId());\n            }\n        }\n    }\n```\n\nç„¶åæˆ‘ä»¬å°±å¯ä»¥åœ¨ä¸Šé¢çš„åŸºç¡€ä¸Šæ¥åš`æ‹¾å–`çš„æ“ä½œäº†ã€‚\n\n```java\n    /**\n     * æ ¹æ®ç™»å½•çš„ç”¨æˆ·æŸ¥è¯¢å¯¹åº”çš„å¯ä»¥æ‹¾å–çš„ä»»åŠ¡\n     */\n    @Test\n    public void claimTaskCandidate(){\n\n        List<Task> list = taskService.createTaskQuery()\n                .processInstanceId(\"023da2e6-362f-11ed-8d8a-c03c59ad2248\")\n                .taskCandidateUser(\"demo\")\n                .list();\n        for (Task task : list) {\n            taskService.claim(task.getId(),\"demo\");\n        }\n    }\n```\n\nè¿›å…¥åˆ°è¡¨ç»“æ„ä¸­ä½ ä¼šå‘ç°è¿™æ¡Taskè®°å½•çš„å¤„ç†äººè¢«æŒ‡æ´¾ä¸ºäº†`demo`,è€Œä¸”åœ¨Webç«¯å¯ä»¥çœ‹åˆ°å¯ä»¥å®¡æ‰¹äº†ã€‚\n\n![image-20220917103743685](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220917103743685.png)\n\n\n\næ³¨æ„ï¼šè¿™æ—¶`demo`æ‹¾å–äº†ä»»åŠ¡ä¹‹åå…¶ä»–çš„ç”¨æˆ·å°±ä¸èƒ½å†æ‹¾å–äº†ï¼ŒæŸ¥è¯¢çš„æ—¶å€™ä¹ŸæŸ¥è¯¢ä¸åˆ°äº†ã€‚\n\n\n\n\n\n### ä»»åŠ¡çš„å½’è¿˜\n\næ‹¾å–ä»»åŠ¡åå¦‚æœä¸æƒ³æ“ä½œé‚£ä¹ˆå¯ä»¥å½’è¿˜ä»»åŠ¡ã€‚\n\n```java\n    /**\n     * é€€è¿˜ä»»åŠ¡\n     *    ä¸€ä¸ªå€™é€‰äººæ‹¾å–äº†è¿™ä¸ªä»»åŠ¡ä¹‹åå…¶ä»–çš„ç”¨æˆ·å°±æ²¡æœ‰åŠæ³•æ‹¾å–è¿™ä¸ªä»»åŠ¡äº†\n     *    æ‰€ä»¥å¦‚æœä¸€ä¸ªç”¨æˆ·æ‹¾å–äº†ä»»åŠ¡ä¹‹ååˆä¸æƒ³å¤„ç†äº†ï¼Œé‚£ä¹ˆå¯ä»¥é€€è¿˜\n     */\n    @Test\n    public void unclaimTaskCandidate(){\n        Task task = taskService.createTaskQuery()\n                .processInstanceId(\"023da2e6-362f-11ed-8d8a-c03c59ad2248\")\n                .taskAssignee(\"demo\")\n                .singleResult();\n        if(task != null){\n            // å½’è¿˜ç›¸å…³çš„ä»»åŠ¡  ç½®ç©ºå³å¯\n            taskService.setAssignee(task.getId(),null);\n            System.out.println(\"å½’è¿˜æ‹¾å–æˆåŠŸ\");\n        }\n    }\n```\n\n\n\n### ä»»åŠ¡çš„äº¤æ¥\n\næ‹¾å–ä»»åŠ¡åå¦‚æœä¸æƒ³æ“ä½œä¹Ÿä¸æƒ³å½’è¿˜å¯ä»¥ç›´æ¥äº¤æ¥ç»™å¦å¤–ä¸€ä¸ªäººæ¥å¤„ç†.\n\n```java\n    @Test\n    public void taskCandidate(){\n        Task task = taskService.createTaskQuery()\n                .processInstanceId(\"023da2e6-362f-11ed-8d8a-c03c59ad2248\")\n                .taskAssignee(\"demo\")\n                .singleResult();\n        if(task != null){\n            // ä»»åŠ¡äº¤æ¥\n            taskService.setAssignee(task.getId(),\"zhang\");\n            System.out.println(\"ä»»åŠ¡äº¤æ¥ç»™äº†zhang\");\n        }\n    }\n```\n\n\n\n### ä»»åŠ¡å®Œæˆ\n\næ­£å¸¸çš„ä»»åŠ¡å¤„ç†\n\n```java\n    @Test\n    public void completeTask1(){\n        String taskId = \"023f0279-362f-11ed-8d8a-c03c59ad2248\";\n        // ä½†æ˜¯ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„ å¤„ç†äººæ˜¯å€¼è¡¨è¾¾å¼ æˆ‘ä»¬éœ€è¦èµ‹å€¼\n        Map<String,Object> map = new HashMap<>();\n        map.put(\"user1\",\"demo\");\n        map.put(\"user2\",\"zhangsan\");\n        map.put(\"user3\",\"wangwu\");\n        taskService.complete(taskId,map);\n    }\n```\n\nå½“ç„¶æˆ‘ä»¬é€šè¿‡å€¼è¡¨è¾¾å¼æ¥å¤„ç†çš„å€™é€‰äººæ“ä½œã€‚åœ¨`act_ru_identitylink`è¡¨ä¸­åŒæ ·æœ‰ç›¸å…³è®°å½•ï¼Œæˆ‘ä»¬éœ€è¦ç»“åˆæµç¨‹å˜é‡è¡¨æ¥å¤„ç†äº†ã€‚ä½†æ˜¯å¤„ç†çš„APIå’Œä¸Šé¢æ˜¯ä¸€æ ·çš„ã€‚\n\n\n\n## å€™é€‰äººç»„\n\nå½“å€™é€‰äººå¾ˆå¤šçš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥åˆ†ç»„æ¥å¤„ç†ã€‚å…ˆåˆ›å»ºç»„ï¼Œç„¶åæŠŠç”¨æˆ·åˆ†é…åˆ°è¿™ä¸ªç»„ä¸­ã€‚\n\n\n\n### ç®¡ç†ç”¨æˆ·å’Œç»„\n\n#### ç”¨æˆ·ç®¡ç†\n\næˆ‘ä»¬éœ€è¦å…ˆå•ç‹¬ç»´æŠ¤ç”¨æˆ·ä¿¡æ¯ã€‚åå°å¯¹åº”çš„è¡¨ç»“æ„æ˜¯`ACT_ID_USER`.\n\n```java\n    /**\n     * ç»´æŠ¤ç”¨æˆ·\n     */\n    @Test\n    public void createUser(){\n        User user = identityService.newUser(\"zhang\");\n        user.setFirstName(\"å¼ \");\n        user.setLastName(\"ä¸‰\");\n        user.setEmail(\"zhangsan@qq.com\");\n        user.setPassword(\"123456\");\n        identityService.saveUser(user);\n    }\n```\n\nè¦æ›´æ–°æˆ–è€…åˆ é™¤ç”¨æˆ·çš„è¯ã€‚é€šè¿‡ç›¸å…³APIå³å¯å®Œæˆ\n\n```java\n    @Test\n    public void updateUser(){\n        User user = identityService.createUserQuery().userId(\"zhang\").singleResult();\n        user.setPassword(\"123\");\n        identityService.saveUser(user);\n    }\n    @Test\n    public void deleteUser(){\n        identityService.deleteUser(\"zhang\");\n    }\n```\n\n\n\n#### Groupç®¡ç†\n\nç»´æŠ¤å¯¹åº”çš„Groupä¿¡æ¯ï¼Œåå°å¯¹åº”çš„è¡¨ç»“æ„æ˜¯`ACT_ID_GROUP`\n\n```java\n    /**\n     * åˆ›å»ºç”¨æˆ·ç»„\n     */\n    @Test\n    public void createGroup(){\n        // åˆ›å»ºGroupå¯¹è±¡å¹¶æŒ‡å®šç›¸å…³çš„ä¿¡æ¯\n        Group group = identityService.newGroup(\"group1\");\n        group.setName(\"å¼€å‘éƒ¨\");\n        group.setType(\"type1\");\n        // åˆ›å»ºGroupå¯¹åº”çš„è¡¨ç»“æ„æ•°æ®\n        identityService.saveGroup(group);\n    }\n```\n\næ›´æ–°å’Œåˆ é™¤å‚è€ƒä¸Šé¢çš„`ç”¨æˆ·ç®¡ç†`\n\n\n\n#### ç”¨æˆ·åˆ†é…ç»„\n\nç”¨æˆ·å’Œç»„æ˜¯ä¸€ä¸ªå¤šå¯¹å¤šçš„å…³è”å…³è”ï¼Œæˆ‘ä»¬éœ€è¦åšç›¸å…³çš„åˆ†é…ï¼Œåå°å¯¹åº”çš„è¡¨ç»“æ„æ˜¯`ACT_ID_MEMBERSHIP`\n\n```java\n    /**\n     * å°†ç”¨æˆ·åˆ†é…ç»™å¯¹åº”çš„Group\n     */\n    @Test\n    public void userGroup(){\n        // æ ¹æ®ç»„çš„ç¼–å·æ‰¾åˆ°å¯¹åº”çš„Groupå¯¹è±¡\n        Group group = identityService.createGroupQuery().groupId(\"group1\").singleResult();\n        // åˆ›å»º MemberShip å»ºç«‹ç”¨æˆ·å’Œç»„çš„å…³ç³»\n        identityService.createMembership(\"zhang\",group.getId());\n    }\n```\n\n\n\n### å€™é€‰äººç»„åº”ç”¨\n\nææ¸…æ¥šäº†ç”¨æˆ·å’Œç”¨æˆ·ç»„çš„å…³ç³»åæˆ‘ä»¬å°±å¯ä»¥æ¥ä½¿ç”¨å€™é€‰äººç»„çš„åº”ç”¨äº†\n\n#### åˆ›å»ºæµç¨‹å›¾\n\nåˆ›å»ºä¸€ä¸ªç®€å•çš„è¯·å‡æµç¨‹ï¼Œå¤„ç†äººé€šè¿‡å€™é€‰äººç»„çš„æ–¹å¼æ¥å¤„ç†ã€‚\n\n![image-20220917201151251](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220917201151251.png)\n\n#### æµç¨‹çš„éƒ¨ç½²è¿è¡Œ\n\nç„¶åæˆ‘ä»¬æŠŠæµç¨‹éƒ¨ç½²å’Œè¿è¡Œã€‚\n\n```java\n /**\n     * å®Œæˆæµç¨‹çš„éƒ¨ç½²æ“ä½œ\n     */\n    @Test\n    public void deploy(){\n        Deployment deploy = repositoryService.createDeployment()\n                .name(\"å€™é€‰äººç»„æ¡ˆä¾‹\")\n                .addClasspathResource(\"flow/å€™é€‰äººç»„.bpmn\")\n                .deploy();\n        System.out.println(\"deploy.getId() = \" + deploy.getId());\n    }\n\n    /**\n     * å¯åŠ¨æµç¨‹å®ä¾‹\n     */\n    @Test\n    public void startFlow(){\n        String processInstanceId = \"Process_1gvo8so:1:3e253edb-3682-11ed-a1ff-c03c59ad2248\";\n        runtimeService.startProcessInstanceById(processInstanceId);\n    }\n```\n\néƒ¨ç½²æˆåŠŸåæˆ‘ä»¬å¯ä»¥åœ¨`act_ru_identitylink`ä¸­çœ‹åˆ°å¯¹åº”çš„è®°å½•ã€‚\n\n![image-20220917201747129](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220917201747129.png)\n\n\n\n#### ä»»åŠ¡çš„æ‹¾å–å’Œå®Œæˆ\n\nç„¶åå®Œæˆä»»åŠ¡çš„æŸ¥è¯¢æ‹¾å–å’Œå¤„ç†æ“ä½œã€‚é€»è¾‘æ˜¯æ ¹æ®å½“å‰çš„ç™»å½•`ç”¨æˆ·`æ‰¾åˆ°å¯¹åº”çš„`ç»„`ï¼Œç„¶åæ ¹æ®`ç»„`æ‰¾åˆ°å¯¹åº”çš„ä»»åŠ¡ä¿¡æ¯ã€‚\n\n```java\n   /**\n     * æ ¹æ®ç™»å½•çš„ç”¨æˆ·æŸ¥è¯¢å¯¹åº”çš„å¯ä»¥æ‹¾å–çš„ä»»åŠ¡\n     *\n     */\n    @Test\n    public void queryTaskCandidateGroup(){\n        // å½“å‰ç”¨æˆ·æ‰€åœ¨çš„ç»„\n        Group group = identityService.createGroupQuery().groupMember(\"zhang\").singleResult();\n        List<Task> list = taskService.createTaskQuery()\n                .processInstanceId(\"711d5726-3682-11ed-8b9b-c03c59ad2248\")\n                .taskCandidateGroup(group.getId())\n                .list();\n        for (Task task : list) {\n            System.out.println(\"task.getId() = \" + task.getId());\n            System.out.println(\"task.getName() = \" + task.getName());\n        }\n    }\n\n    /**\n     * æ‹¾å–ä»»åŠ¡\n     *    ä¸€ä¸ªå€™é€‰äººæ‹¾å–äº†è¿™ä¸ªä»»åŠ¡ä¹‹åå…¶ä»–çš„ç”¨æˆ·å°±æ²¡æœ‰åŠæ³•æ‹¾å–è¿™ä¸ªä»»åŠ¡äº†\n     *    æ‰€ä»¥å¦‚æœä¸€ä¸ªç”¨æˆ·æ‹¾å–äº†ä»»åŠ¡ä¹‹ååˆä¸æƒ³å¤„ç†äº†ï¼Œé‚£ä¹ˆå¯ä»¥é€€è¿˜\n     */\n    @Test\n    public void claimTaskCandidate1(){\n        String userId = \"zhang\";\n        // å½“å‰ç”¨æˆ·æ‰€åœ¨çš„ç»„\n        Group group = identityService.createGroupQuery().groupMember(userId).singleResult();\n        Task task = taskService.createTaskQuery()\n                .processInstanceId(\"711d5726-3682-11ed-8b9b-c03c59ad2248\")\n                .taskCandidateGroup(group.getId())\n                .singleResult();\n        if(task != null) {\n            // ä»»åŠ¡æ‹¾å–\n            taskService.claim(task.getId(),userId);\n            System.out.println(\"ä»»åŠ¡æ‹¾å–æˆåŠŸ\");\n        }\n    }\n```\n\næ‹¾å–åçš„æ“ä½œå’Œå‰é¢æ˜¯ä¸€æ ·çš„ï¼Œå°±æ²¡å¿…è¦èµ˜è¿°ã€‚å½“ç„¶æˆ‘ä»¬åœ¨å®šä¹‰æµç¨‹çš„æ—¶å€™ä¹Ÿå¯ä»¥é€šè¿‡å€¼è¡¨è¾¾å¼æ¥å¤„ç†ï¼Œæˆ‘ä»¬éœ€è¦æ³¨æ„èµ‹å€¼å³å¯ã€‚\n\n\n\n## ç§Ÿæˆ·\n\n*å¤šç§Ÿæˆ·* æ˜¯æŒ‡ä¸€ä¸ªå•ä¸€çš„Camundaåº”ç”¨éœ€è¦ä¸ºå¤šä¸ªçš„ç§Ÿæˆ·æœåŠ¡çš„æƒ…å†µã€‚å¯¹äºæ¯ä¸ªç§Ÿæˆ·æ¥è¯´ï¼Œåº”è¯¥æœ‰æŸäº›éš”ç¦»çš„ä¿è¯ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªç§Ÿæˆ·çš„æµç¨‹å®ä¾‹ä¸åº”å¹²æ‰°å¦ä¸€ä¸ªç§Ÿæˆ·çš„æµç¨‹å®ä¾‹ã€‚\n\nå¤šç§Ÿæˆ·å¯ä»¥é€šè¿‡ä¸¤ç§ä¸åŒçš„æ–¹å¼å®ç°ã€‚ä¸€ç§æ˜¯ä½¿ç”¨æ¯ä¸ªç§Ÿæˆ·ä¸€ä¸ªæµç¨‹å¼•æ“ã€‚å¦ä¸€ç§æ–¹å¼æ˜¯åªä½¿ç”¨ä¸€ä¸ªæµç¨‹å¼•æ“ï¼Œå¹¶å°†æ•°æ®ä¸ç§Ÿæˆ·æ ‡è¯†ç¬¦ç›¸å…³è”ã€‚è¿™ä¸¤ç§æ–¹å¼åœ¨æ•°æ®éš”ç¦»ç¨‹åº¦ã€ç»´æŠ¤å·¥ä½œå’Œå¯æ‰©å±•æ€§æ–¹é¢å„æœ‰ä¸åŒã€‚ä¸¤ç§æ–¹å¼çš„ç»„åˆä¹Ÿæ˜¯å¯èƒ½çš„ã€‚\n\nå¤šç§Ÿæˆ·å¯ä»¥ä½¿ç”¨ç§Ÿæˆ·æ ‡è¯†ç¬¦ï¼ˆå³tenant-idsï¼‰çš„æµç¨‹å¼•æ“æ¥å®ç°ã€‚æ‰€æœ‰ç§Ÿæˆ·çš„æ•°æ®éƒ½å­˜å‚¨åœ¨ä¸€ä¸ªè¡¨ä¸­ï¼ˆåŒä¸€æ•°æ®åº“å’Œè¡¨ç»“æ„ï¼‰ã€‚é€šè¿‡å­˜å‚¨åœ¨åˆ—ä¸­çš„ç§Ÿæˆ·æ ‡è¯†ç¬¦æ¥æä¾›éš”ç¦»ã€‚\n\n![image-20220917203832905](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220917203832905.png)\n\n\n\n### ç§Ÿæˆ·ç®¡ç†\n\nç§Ÿæˆ·å¯¹åº”äº`act_id.tenant`è¡¨ç»“æ„ä¸­çš„æ•°æ®ã€‚æˆ‘ä»¬å¯ä»¥å…ˆæ¥ç»´æŠ¤ç§Ÿæˆ·çš„ç›¸å…³ä¿¡æ¯ã€‚åˆ›å»º`é•¿æ²™åˆ†å…¬å¸`çš„ç§Ÿæˆ·ä¿¡æ¯\n\n```java\n    /**\n     * åˆ›å»ºç§Ÿæˆ·\n     */\n    @Test\n    public void createTenant(){\n        Tenant tenant = identityService.newTenant(\"cs\");\n        tenant.setName(\"é•¿æ²™åˆ†å…¬å¸\");\n        identityService.saveTenant(tenant);\n    }\n```\n\n![image-20220918220534584](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220918220534584.png)\n\n\n\nå½“ç„¶å‚è€ƒå‰é¢çš„åˆ é™¤å’Œæ›´æ–°æ“ä½œä¹Ÿå¯ä»¥éå¸¸è½»æ¾çš„å®Œæˆ`ç§Ÿæˆ·`ç›¸å…³ä¿¡æ¯çš„å¤„ç†ã€‚ç„¶åæˆ‘ä»¬æ¥çœ‹ä¸‹ç§Ÿæˆ·å’Œç”¨æˆ·å’Œç»„çš„å…³ç³»ã€‚\n\n```java\n    /**\n     * å»ºç«‹ ç§Ÿæˆ· å’Œ ç»„çš„å…³ç³»\n     * å½“ç„¶ä¹Ÿå¯ä»¥å»ºç«‹ ç§Ÿæˆ·å’Œç”¨æˆ·çš„å…³ç³»ã€‚åªæ˜¯è¿™ç§æ¯”è¾ƒå°‘ç”¨\n     */\n    @Test\n    public void createTenantAndGroupShip(){\n        identityService.createTenantGroupMembership(\"cs\",\"group1\");\n    }\n```\n\n![image-20220918220924950](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220918220924950.png)\n\n\n\n\n\n### éƒ¨ç½²æ“ä½œ\n\næˆ‘ä»¬åœ¨éƒ¨ç½²æµç¨‹çš„æ—¶å€™å¯ä»¥æŒ‡å®šå¯¹åº”çš„ç§Ÿæˆ·ç¼–å·ã€‚å¦‚æœä¸æŒ‡å®šç§Ÿæˆ·ç¼–å·ï¼Œè¯´æ˜è¯¥æµç¨‹æ˜¯å±äºæ‰€æœ‰ç§Ÿæˆ·çš„ã€‚\n\n```java\n    /**\n     * å®Œæˆæµç¨‹çš„éƒ¨ç½²æ“ä½œ\n     */\n    @Test\n    public void deploy(){\n        Deployment deploy = repositoryService.createDeployment()\n                .name(\"å€™é€‰äººæ¡ˆä¾‹-ç§Ÿæˆ·\")\n                .tenantId(\"tenant1\")\n                .addClasspathResource(\"flow/å€™é€‰äººæ¡ˆä¾‹.bpmn\")\n                .deploy();\n        System.out.println(\"deploy.getId() = \" + deploy.getId());\n    }\n```\n\n\n### æŸ¥çœ‹éƒ¨ç½²æµç¨‹\n\nè®¾ç½®äº†ç§Ÿæˆ·ç¼–å·åï¼Œæˆ‘ä»¬è¦åšç›¸å…³çš„æŸ¥è¯¢ï¼Œå¯ä»¥é€šè¿‡å¦‚ä¸‹çš„APIæ¥å®ç°\n\n```java\n    /**\n     * åŸºäºç§Ÿæˆ· æŸ¥è¯¢ç›¸å…³çš„éƒ¨ç½²æµç¨‹\n     */\n    @Test\n    public void getByTenantId(){\n        List<Deployment> list = repositoryService.createDeploymentQuery()\n                .tenantIdIn(\"cs\")\n                .list();\n        for (Deployment deployment : list) {\n            System.out.println(\"deployment.getId() = \" + deployment.getId());\n            System.out.println(\"deployment.getName() = \" + deployment.getName());\n            System.out.println(\"------------\");\n        }\n    }\n\n    \n```\n\né€šè¿‡è°ƒç”¨`withoutTenantId()`æ¥æŸ¥è¯¢ä¸å±äºä»»ä½•ç§Ÿæˆ·çš„éƒ¨ç½²ã€‚\n\n```java\n@Test\n    public void getByWithoutTenantId(){\n        List<Deployment> list = repositoryService.createDeploymentQuery()\n                .withoutTenantId() // æŸ¥è¯¢å‡ºæ‰€æœ‰ä¸å±äºä»»ä½•tenantIdçš„è®°å½•\n                .list();\n        for (Deployment deployment : list) {\n            System.out.println(\"deployment.getId() = \" + deployment.getId());\n            System.out.println(\"deployment.getName() = \" + deployment.getName());\n            System.out.println(\"------------\");\n        }\n    }\n```\n\n\n\nä¹Ÿå¯ä»¥é€šè¿‡è°ƒç”¨`includeDeploymentsWithoutTenantId()`æ¥æŸ¥è¯¢å±äºç‰¹å®šç§Ÿæˆ·æˆ–ä¸å±äºç§Ÿæˆ·çš„éƒ¨ç½²ã€‚\n\n```\n@Test\npublic void getByIncludTenantId(){\n    List<Deployment> list = repositoryService.createDeploymentQuery()\n            .tenantIdIn(\"cs\")\n            .includeDeploymentsWithoutTenantId() // æŸ¥è¯¢å‡º tenant1 å’Œ ä¸å±äº ç§Ÿæˆ·çš„è®°å½•\n            .list();\n    for (Deployment deployment : list) {\n        System.out.println(\"deployment.getId() = \" + deployment.getId());\n        System.out.println(\"deployment.getName() = \" + deployment.getName());\n        System.out.println(\"------------\");\n    }\n}\n```\n\nä¸ â€œéƒ¨ç½²æŸ¥è¯¢â€ ç±»ä¼¼ï¼Œå®šä¹‰æŸ¥è¯¢å…è®¸é€šè¿‡ä¸€ä¸ªæˆ–å¤šä¸ªç§Ÿæˆ·å’Œä¸å±äºä»»ä½•ç§Ÿæˆ·çš„å®šä¹‰è¿›è¡Œè¿‡æ»¤ã€‚\n\n```java\nList<ProcessDefinition> processDefinitions = repositoryService\n  .createProcessDefinitionQuery()\n  .tenantIdIn(\"cs\")\n  .includeProcessDefinitionsWithoutTenantId();\n  .list();\n```\n\n\n\n\n\n### å¯åŠ¨æµç¨‹å®ä¾‹\n\né€šè¿‡keyåˆ›å»ºä¸€ä¸ªä¸ºå¤šç§Ÿæˆ·éƒ¨ç½²çš„æµç¨‹å®šä¹‰çš„å®ä¾‹ï¼Œå¿…é¡»åœ¨`ProcessInstantiationBuilder` ä¸­ä¼ é€’ç§Ÿæˆ·æ ‡è¯†ç¬¦ ã€‚\n\n```java\n    /**\n     * ç§Ÿæˆ· å¯åŠ¨ä¸€ä¸ªæµç¨‹å®ä¾‹\n     */\n    @Test\n    public void startFlow(){\n        String processKey = \"Process_05vjqic\";\n        ProcessInstance processInstance = runtimeService\n                .createProcessInstanceByKey(processKey)\n                .processDefinitionTenantId(\"cs\")\n                .execute();\n        System.out.println(\"processInstance.getId() = \" + processInstance.getId());\n    }\n\n    @Test\n    public void startFlow1(){\n        String processId = \"Process_05vjqic:1:a6b23794-3767-11ed-a4df-c03c59ad2248\";\n        ProcessInstance processInstance = runtimeService\n                .createProcessInstanceById(processId)\n                .execute();\n        System.out.println(\"processInstance.getId() = \" + processInstance.getId());\n    }\n```\n\nå¯åŠ¨åæµç¨‹åï¼Œåœ¨åˆ›å»ºçš„Taskè®°å½•ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°å¯¹åº”çš„`ç§Ÿæˆ·`ä¿¡æ¯\n\n![image-20220918234504559](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220918234504559.png)\n\nå› ä¸ºæˆ‘ä»¬åœ¨æµç¨‹è®¾è®¡çš„æ—¶å€™å°±æŒ‡å®šäº†ç¬¬ä¸€ä¸ªèŠ‚ç‚¹çš„å€™é€‰äººæ˜¯`group1`,æ‰€ä»¥åœ¨`act_ru_identitylink`è¡¨ä¸­å¯ä»¥çœ‹åˆ°ç›¸å…³çš„è®°å½•ã€‚\n\n![image-20220918234618891](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220918234618891.png)\n\n\n\n### ä»»åŠ¡æ‹¾å–\n\næ¥ä¸‹æ¥å°±å¯ä»¥å¯¹ä»»åŠ¡åš`æ‹¾å–`çš„æ“ä½œäº†\n\n```java\n   /**\n     * æ ¹æ®å½“å‰ç™»å½•ç”¨æˆ· æŸ¥è¯¢åˆ°éœ€è¦æ‹¾å–çš„ä»»åŠ¡\n     */\n    @Test\n    public void claimTask(){\n        // æ ¹æ®ç™»å½•ç”¨æˆ·æŸ¥è¯¢åˆ°å¯¹åº”çš„Group\n        List<Group> groups = identityService.createGroupQuery().groupMember(\"demo\").list();\n        if(groups != null && groups.size() > 0){\n            for (Group group : groups) {\n                // æ ¹æ® group æ‰¾åˆ°å¯¹åº”çš„ ç§Ÿæˆ·\n                List<Tenant> tenants = identityService.createTenantQuery().groupMember(group.getId()).list();\n                List<String> tenantStrings = new ArrayList<>();\n                if(tenants != null && tenants.size() > 0){\n                    tenantStrings = tenants.stream().map((item)->{\n                        return item.getId();\n                    }).collect(Collectors.toList());\n\n                    String[] ss = new String[tenantStrings.size()];\n                    tenantStrings.toArray(ss);\n                    List<Task> list = taskService.createTaskQuery()\n                            .tenantIdIn(ss)\n                            .list();\n                    if(list != null && list.size() > 0){\n                        for (Task task : list) {\n                            System.out.println(\"task.getId() = \" + task.getId());\n                        }\n                    }\n                }\n\n            }\n        }\n\n    }\n```\n\nå¯ä»¥æŸ¥è¯¢åˆ°å¯¹åº”çš„æ‹¾å–å°±æ¯”è¾ƒç®€å•äº†\n\n```java\n    @Test\n    public void claimTask(){\n        // æ ¹æ®ç™»å½•ç”¨æˆ·æŸ¥è¯¢åˆ°å¯¹åº”çš„Group\n        List<Group> groups = identityService.createGroupQuery().groupMember(\"demo\").list();\n        if(groups != null && groups.size() > 0){\n            for (Group group : groups) {\n                // æ ¹æ® group æ‰¾åˆ°å¯¹åº”çš„ ç§Ÿæˆ·\n                List<Tenant> tenants = identityService.createTenantQuery().groupMember(group.getId()).list();\n                List<String> tenantStrings = new ArrayList<>();\n                if(tenants != null && tenants.size() > 0){\n                    tenantStrings = tenants.stream().map((item)->{\n                        return item.getId();\n                    }).collect(Collectors.toList());\n\n                    String[] ss = new String[tenantStrings.size()];\n                    tenantStrings.toArray(ss);\n                    List<Task> list = taskService.createTaskQuery()\n                            .tenantIdIn(ss)\n                            .list();\n                    if(list != null && list.size() > 0){\n                        for (Task task : list) {\n                            taskService.claim(task.getId(),\"demo\");\n                        }\n                    }\n                }\n\n            }\n        }\n\n    }\n\n```\n\n![image-20220919003450202](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220919003450202.png)\n\nèƒ½å¤Ÿæ‹¾å–æˆåŠŸï¼Œé‚£ä¹ˆåé¢çš„æ“ä½œå°±æ˜¯ä»»åŠ¡çš„å®¡æ‰¹ã€‚æ¥ä¸‹æ¥çš„æ“ä½œå°±å’Œå‰é¢æ˜¯ä¸€æ ·çš„äº†ã€‚ä¸å†èµ˜è¿°~\n\n\n\n\n\n\n\n# ç½‘å…³ç¯‡\n\nç½‘å…³ç”¨æ¥æ§åˆ¶æµç¨‹çš„æµå‘\n\n## æ’ä»–ç½‘å…³\n\n`æ’ä»–ç½‘å…³`ï¼ˆexclusive gatewayï¼‰ï¼ˆä¹Ÿå«*å¼‚æˆ–ç½‘å…³ XOR gateway*ï¼Œæˆ–è€…æ›´ä¸“ä¸šçš„ï¼Œ*åŸºäºæ•°æ®çš„æ’ä»–ç½‘å…³ exclusive data-based gateway*ï¼‰ï¼Œç”¨äºå¯¹æµç¨‹ä¸­çš„**å†³ç­–**å»ºæ¨¡ã€‚å½“æ‰§è¡Œåˆ°è¾¾è¿™ä¸ªç½‘å…³æ—¶ï¼Œä¼šæŒ‰ç…§æ‰€æœ‰å‡ºå£é¡ºåºæµå®šä¹‰çš„é¡ºåºå¯¹å®ƒä»¬è¿›è¡Œè®¡ç®—ã€‚é€‰æ‹©ç¬¬ä¸€ä¸ªæ¡ä»¶è®¡ç®—ä¸ºtrueçš„é¡ºåºæµï¼ˆå½“æ²¡æœ‰è®¾ç½®æ¡ä»¶æ—¶ï¼Œè®¤ä¸ºé¡ºåºæµä¸º*true*ï¼‰ç»§ç»­æµç¨‹ã€‚\n\nç»˜åˆ¶æµç¨‹å›¾ï¼š\n\n![image-20220922002931276](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220922002931276.png)\n\n\n\nå¯¹åº”çš„XMLæ–‡ä»¶\n\n![image-20220922003022802](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220922003022802.png)\n\næµç¨‹æ¼”ç¤º\n\n```java\n   /**\n     * å®Œæˆæµç¨‹çš„éƒ¨ç½²æ“ä½œ\n     */\n    @Test\n    public void deploy(){\n        Deployment deploy = repositoryService.createDeployment()\n                .name(\"æ’ä»–ç½‘å…³\")\n                .addClasspathResource(\"flow/æ’ä»–ç½‘å…³.bpmn\")\n                .deploy();\n        System.out.println(\"deploy.getId() = \" + deploy.getId());\n    }\n\n\n    /**\n     * é€šè¿‡æµç¨‹å®šä¹‰Id å¯åŠ¨\n     */\n    @Test\n    public void startFlow(){\n        String processId = \"Process_0eykic0:1:efadfc92-39c9-11ed-8f13-c03c59ad2248\";\n        ProcessInstance processInstance = runtimeService.startProcessInstanceById(processId);\n        System.out.println(\"processInstance.getId() = \" + processInstance.getId());\n    }\n\n    /**\n     * å®Œæˆä»»åŠ¡\n     */\n    @Test\n    public void completeTask(){\n        Map<String,Object> map = new HashMap<>();\n        map.put(\"day\",4);\n        taskService.complete(\"21a323ee-39ca-11ed-8b49-c03c59ad2248\",map);\n    }\n```\n\nä¼ é€’çš„æ˜¯`day=4`ä¼šèµ°ä¸­é—´çš„è·¯çº¿ã€‚\n\n![image-20220922003119262](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220922003119262.png)\n\n## å¹¶è¡Œç½‘å…³\n\nå¹¶è¡Œç½‘å…³å…è®¸å°†æµç¨‹åˆ†æˆå¤šæ¡åˆ†æ”¯ï¼Œä¹Ÿå¯ä»¥æŠŠå¤šæ¡åˆ†æ”¯æ±‡èšåˆ°ä¸€èµ·ï¼Œå¹¶è¡Œç½‘å…³çš„åŠŸèƒ½æ˜¯åŸºäºè¿›å…¥å’Œå¤–å‡ºé¡ºåºæµçš„ï¼š\n\n* forkåˆ†æ”¯ï¼šå¹¶è¡Œåçš„æ‰€æœ‰å¤–å‡ºé¡ºåºæµï¼Œä¸ºæ¯ä¸ªé¡ºåºæµéƒ½åˆ›å»ºä¸€ä¸ªå¹¶å‘åˆ†æ”¯ã€‚\n\n* joinæ±‡èšï¼š æ‰€æœ‰åˆ°è¾¾å¹¶è¡Œç½‘å…³ï¼Œåœ¨æ­¤ç­‰å¾…çš„è¿›å…¥åˆ†æ”¯ï¼Œ ç›´åˆ°æ‰€æœ‰è¿›å…¥é¡ºåºæµçš„åˆ†æ”¯éƒ½åˆ°è¾¾ä»¥åï¼Œ æµç¨‹å°±ä¼šé€šè¿‡æ±‡èšç½‘å…³ã€‚\n\næ³¨æ„ï¼Œå¦‚æœåŒä¸€ä¸ªå¹¶è¡Œç½‘å…³æœ‰å¤šä¸ªè¿›å…¥å’Œå¤šä¸ªå¤–å‡ºé¡ºåºæµï¼Œ å®ƒå°±åŒæ—¶å…·æœ‰åˆ†æ”¯å’Œæ±‡èšåŠŸèƒ½ã€‚ è¿™æ—¶ï¼Œç½‘å…³ä¼šå…ˆæ±‡èšæ‰€æœ‰è¿›å…¥çš„é¡ºåºæµï¼Œç„¶åå†åˆ‡åˆ†æˆå¤šä¸ªå¹¶è¡Œåˆ†æ”¯ã€‚\n\n**ä¸å…¶ä»–ç½‘å…³çš„ä¸»è¦åŒºåˆ«æ˜¯ï¼Œå¹¶è¡Œç½‘å…³ä¸ä¼šè§£ææ¡ä»¶ã€‚** **å³ä½¿é¡ºåºæµä¸­å®šä¹‰äº†æ¡ä»¶ï¼Œä¹Ÿä¼šè¢«å¿½ç•¥ã€‚**\n\n![image-20220922003323785](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220922003323785.png)\n\n## åŒ…å«ç½‘å…³\n\nåŒ…å«ç½‘å…³å¯ä»¥çœ‹åšæ˜¯æ’ä»–ç½‘å…³å’Œå¹¶è¡Œç½‘å…³çš„ç»“åˆä½“ã€‚ å’Œæ’ä»–ç½‘å…³ä¸€æ ·ï¼Œä½ å¯ä»¥åœ¨å¤–å‡ºé¡ºåºæµä¸Šå®šä¹‰æ¡ä»¶ï¼ŒåŒ…å«ç½‘å…³ä¼šè§£æå®ƒä»¬ã€‚ ä½†æ˜¯ä¸»è¦çš„åŒºåˆ«æ˜¯åŒ…å«ç½‘å…³å¯ä»¥é€‰æ‹©å¤šäºä¸€æ¡é¡ºåºæµï¼Œè¿™å’Œå¹¶è¡Œç½‘å…³ä¸€æ ·ã€‚\n\nåŒ…å«ç½‘å…³çš„åŠŸèƒ½æ˜¯åŸºäºè¿›å…¥å’Œå¤–å‡ºé¡ºåºæµçš„ï¼š\n\n* åˆ†æ”¯ï¼š æ‰€æœ‰å¤–å‡ºé¡ºåºæµçš„æ¡ä»¶éƒ½ä¼šè¢«è§£æï¼Œç»“æœä¸ºtrueçš„é¡ºåºæµä¼šä»¥å¹¶è¡Œæ–¹å¼ç»§ç»­æ‰§è¡Œï¼Œ ä¼šä¸ºæ¯ä¸ªé¡ºåºæµåˆ›å»ºä¸€ä¸ªåˆ†æ”¯ã€‚\n\n* æ±‡èšï¼šæ‰€æœ‰å¹¶è¡Œåˆ†æ”¯åˆ°è¾¾åŒ…å«ç½‘å…³ï¼Œä¼šè¿›å…¥ç­‰å¾…çŠ¶æ€ï¼Œ ç›´åˆ°æ¯ä¸ªåŒ…å«æµç¨‹tokençš„è¿›å…¥é¡ºåºæµçš„åˆ†æ”¯éƒ½åˆ°è¾¾ã€‚ è¿™æ˜¯ä¸å¹¶è¡Œç½‘å…³çš„æœ€å¤§ä¸åŒã€‚æ¢å¥è¯è¯´ï¼ŒåŒ…å«ç½‘å…³åªä¼šç­‰å¾…è¢«é€‰ä¸­æ‰§è¡Œäº†çš„è¿›å…¥é¡ºåºæµã€‚ åœ¨æ±‡èšä¹‹åï¼Œæµç¨‹ä¼šç©¿è¿‡åŒ…å«ç½‘å…³ç»§ç»­æ‰§è¡Œã€‚\n\n\n\n![image-20220922005111023](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220922005111023.png)\n\n\n\n\n\nå½“è¾“å…¥`day=4`æ—¶ï¼Œèµ°äº†ç¬¬äºŒå’Œç¬¬ä¸‰æ¡è·¯çº¿\n\n![image-20220922005536912](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220922005536912.png)\n\n\n\n\n\n# äº‹ä»¶ç¯‡\n\n`äº‹ä»¶`ï¼ˆeventï¼‰é€šå¸¸ç”¨äºä¸ºæµç¨‹ç”Ÿå‘½å‘¨æœŸä¸­å‘ç”Ÿçš„äº‹æƒ…å»ºæ¨¡ã€‚äº‹ä»¶æ€»æ˜¯å›¾å½¢åŒ–ä¸ºåœ†åœˆã€‚åœ¨BPMN 2.0ä¸­ï¼Œæœ‰ä¸¤ç§ä¸»è¦çš„äº‹ä»¶åˆ†ç±»ï¼š*æ•è·ï¼ˆcatchingï¼‰*ä¸*æŠ›å‡ºï¼ˆthrowingï¼‰*äº‹ä»¶ã€‚\n\n- **æ•è·:** å½“æµç¨‹æ‰§è¡Œåˆ°è¾¾è¿™ä¸ªäº‹ä»¶æ—¶ï¼Œä¼šç­‰å¾…ç›´åˆ°è§¦å‘å™¨åŠ¨ä½œã€‚è§¦å‘å™¨çš„ç±»å‹ç”±å…¶ä¸­çš„å›¾æ ‡ï¼Œæˆ–è€…è¯´XMLä¸­çš„ç±»å‹å£°æ˜è€Œå®šä¹‰ã€‚æ•è·äº‹ä»¶ä¸æŠ›å‡ºäº‹ä»¶æ˜¾ç¤ºä¸Šçš„åŒºåˆ«ï¼Œæ˜¯å…¶å†…éƒ¨çš„å›¾æ ‡æ²¡æœ‰å¡«å……ï¼ˆå³æ˜¯ç™½è‰²çš„ï¼‰ã€‚\n- **æŠ›å‡º:** å½“æµç¨‹æ‰§è¡Œåˆ°è¾¾è¿™ä¸ªäº‹ä»¶æ—¶ï¼Œä¼šè§¦å‘ä¸€ä¸ªè§¦å‘å™¨ã€‚è§¦å‘å™¨çš„ç±»å‹ï¼Œç”±å…¶ä¸­çš„å›¾æ ‡ï¼Œæˆ–è€…è¯´XMLä¸­çš„ç±»å‹å£°æ˜è€Œå®šä¹‰ã€‚æŠ›å‡ºäº‹ä»¶ä¸æ•è·äº‹ä»¶æ˜¾ç¤ºä¸Šçš„åŒºåˆ«ï¼Œæ˜¯å…¶å†…éƒ¨çš„å›¾æ ‡å¡«å……ä¸ºé»‘è‰²ã€‚\n\n## å®šæ—¶å™¨äº‹ä»¶\n\nå®šæ—¶è§¦å‘çš„ç›¸å…³äº‹ä»¶ï¼ŒåŒ…æ‹¬å®šæ—¶å™¨å¯åŠ¨äº‹ä»¶ï¼Œå®šæ—¶å™¨æ•è·ä¸­é—´ä»¶äº‹ä»¶ï¼Œå®šæ—¶å™¨è¾¹ç•Œäº‹ä»¶\n\n### å®šæ—¶å™¨å¯åŠ¨äº‹ä»¶\n\nå®šæ—¶å™¨å¯åŠ¨äº‹ä»¶ï¼ˆtimer start eventï¼‰åœ¨æŒ‡å®šæ—¶é—´åˆ›å»ºæµç¨‹å®ä¾‹ã€‚åœ¨æµç¨‹åªéœ€è¦å¯åŠ¨ä¸€æ¬¡ï¼Œæˆ–è€…æµç¨‹éœ€è¦åœ¨ç‰¹å®šçš„æ—¶é—´é—´éš”é‡å¤å¯åŠ¨æ—¶ï¼Œéƒ½å¯ä»¥ä½¿ç”¨ã€‚\n\n***è¯·æ³¨æ„**ï¼š*å­æµç¨‹ä¸èƒ½æœ‰å®šæ—¶å™¨å¯åŠ¨äº‹ä»¶ã€‚\n\n***è¯·æ³¨æ„**ï¼š*å®šæ—¶å™¨å¯åŠ¨äº‹ä»¶ï¼Œåœ¨æµç¨‹éƒ¨ç½²çš„åŒæ—¶å°±å¼€å§‹è®¡æ—¶ã€‚ä¸éœ€è¦è°ƒç”¨startProcessInstanceByXXXå°±ä¼šåœ¨æ—¶é—´å¯åŠ¨ã€‚è°ƒç”¨startProcessInstanceByXXXæ—¶ä¼šåœ¨å®šæ—¶å¯åŠ¨ä¹‹å¤–é¢å¤–å¯åŠ¨ä¸€ä¸ªæµç¨‹ã€‚\n\n***è¯·æ³¨æ„**ï¼š*å½“éƒ¨ç½²å¸¦æœ‰å®šæ—¶å™¨å¯åŠ¨äº‹ä»¶çš„æµç¨‹çš„æ›´æ–°ç‰ˆæœ¬æ—¶ï¼Œä¸Šä¸€ç‰ˆæœ¬çš„å®šæ—¶å™¨ä½œä¸šä¼šè¢«ç§»é™¤ã€‚è¿™æ˜¯å› ä¸ºé€šå¸¸å¹¶ä¸å¸Œæœ›æ—§ç‰ˆæœ¬çš„æµç¨‹ä»ç„¶è‡ªåŠ¨å¯åŠ¨æ–°çš„æµç¨‹å®ä¾‹ã€‚\n\nå®šæ—¶å™¨å¯åŠ¨äº‹ä»¶ï¼Œç”¨å…¶ä¸­æœ‰ä¸€ä¸ªé’Ÿè¡¨å›¾æ ‡çš„åœ†åœˆæ¥è¡¨ç¤ºã€‚æˆ‘ä»¬é€šè¿‡å…·ä½“æ¡ˆä¾‹æ¥ä»‹ç»\n\n![image-20220926104055183](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220926104055183.png)\n\néƒ¨ç½²æµç¨‹åç­‰å¾…åˆ°å…·ä½“çš„æ—¶é—´ï¼Œæˆ‘ä»¬æŸ¥çœ‹ä»»åŠ¡å³å¯\n\n![image-20220926104152240](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220926104152240.png)\n\n\n\næ—¶é—´å®šä¹‰è¿™å—ä½¿ç”¨çš„æ˜¯  https://en.wikipedia.org/wiki/ISO_8601#Dates  ISO 8601 æ ¼å¼\n\nä¸Šé¢æˆ‘ä»¬æ˜¯é€šè¿‡æŒ‡å®šå›ºå®šæ—¶é—´æ¥å¯åŠ¨çš„ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡`duraction`é—´éš”æ—¶é—´æ¥å¤„ç†ã€‚\n\n![image-20220926105514506](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220926105514506.png)\n\n\n\né€šè¿‡é—´éš”çš„æ–¹å¼æ¥å¯åŠ¨ã€‚\n\ntimeCycleï¼šæŒ‡å®šé‡å¤å‘¨æœŸï¼Œå¯ç”¨äºå‘¨æœŸæ€§å¯åŠ¨æµç¨‹ï¼Œæˆ–è€…ä¸ºè¶…æœŸç”¨æˆ·ä»»åŠ¡å¤šæ¬¡å‘é€æé†’,è¿™ä¸ªå…ƒç´ å¯ä»¥ä½¿ç”¨ä¸¤ç§æ ¼å¼\n\n* ç¬¬ä¸€ç§æ˜¯æŒ‰ç…§[ISO 8601](http://en.wikipedia.org/wiki/ISO_8601#Repeating_intervals)æ ‡å‡†å®šä¹‰çš„å¾ªç¯æ—¶é—´å‘¨æœŸã€‚ä¾‹å¦‚ï¼ˆä¸‰æ¬¡é‡å¤é—´éš”ï¼Œæ¯æ¬¡é—´éš”ä¸º10å°æ—¶ï¼‰ï¼šR3/PT10H\n* ä¹Ÿå¯ä»¥ä½¿ç”¨*timeCycle*çš„å¯é€‰å±æ€§*endDate*ï¼Œæˆ–è€…åƒè¿™æ ·ç›´æ¥å†™åœ¨æ—¶é—´è¡¨è¾¾å¼çš„ç»“å°¾ï¼š`R3/PT10H/${EndDate}`ã€‚ å½“åˆ°è¾¾endDateæ—¶ï¼Œåº”ç”¨ä¼šåœæ­¢ï¼Œå¹¶ä¸ºè¯¥ä»»åŠ¡åˆ›å»ºå…¶ä»–ä½œä¸š\n* ä¹Ÿå¯ä»¥é€šè¿‡cronè¡¨è¾¾å¼æ¥å¤„ç†\n\n\n\næ¡ˆä¾‹ï¼šé‡å¤æ—¶é—´è®¾ç½®ä¸º R3PT30S é‡å¤3æ¬¡ï¼Œé—´éš”30æè¿°ï¼Œè‡ªåŠ¨ä»»åŠ¡ç»‘å®šçš„æ˜¯JavaDelegate\n\n```java\npublic class MyJavaDelegate implements JavaDelegate {\n    @Override\n    public void execute(DelegateExecution execution) throws Exception {\n        System.out.println(\"MyJavaDelegate:æ‰§è¡Œäº†ã€‚ã€‚ã€‚\"+ LocalDateTime.now().toString());\n    }\n}\n```\n\n![image-20220926110231335](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220926110231335.png)\n\nåœ¨æ§åˆ¶å°å¯ä»¥çœ‹åˆ°å¯¹åº”çš„æ•ˆæœ\n\n![image-20220926110317226](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220926110317226.png)\n\nä¹Ÿå¯ä»¥æŒ‡å®šç»“æŸæ—¶é—´\n\n```xml\n      <timerEventDefinition>\n        <timeCycle>R3/PT30S/2022-03-28T21:46:11+00:00</timeCycle>\n      </timerEventDefinition>\n```\n\n\n\næ­¤å¤–è¿˜å¯ä»¥é€šè¿‡cronè¡¨è¾¾å¼æ¥å¤„ç†ï¼š\n\n```xml\n0 0/5 * * * ?\n```\n\næ¯éš”5ç§’å¯åŠ¨\n\n### å®šæ—¶å™¨ä¸­é—´äº‹ä»¶\n\nåœ¨æˆ‘ä»¬å…·ä½“çš„æµç¨‹å¤„ç†ä¸­ï¼ŒAèŠ‚ç‚¹å¤„ç†å®Œæˆåï¼Œå®šæ—¶è§¦å‘BèŠ‚ç‚¹çš„å¤„ç†ã€‚\n\n![image-20220927002456358](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220927002456358.png)\n\n### å®šæ—¶å™¨è¾¹ç•Œäº‹ä»¶\n\näººå·¥ä»»åŠ¡1å¦‚æœåœ¨å®šä¹‰çš„`2022-09-27T23:36:14`è¿™ä¸ªæ—¶é—´ä¹‹å‰è¿˜æ²¡æœ‰å¤„ç†ï¼Œé‚£ä¹ˆå°±ä¼šè§¦å‘å®šæ—¶è¾¹ç•Œäº‹ä»¶ï¼Œä»è€Œä»äººå·¥ä»»åŠ¡3.\n\n![image-20220927003701033](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220927003701033.png)\n\n\n\n\n\n## æ¶ˆæ¯äº‹ä»¶\n\n### å¯åŠ¨äº‹ä»¶\n\næ¶ˆæ¯å¯åŠ¨äº‹ä»¶ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬é€šè¿‡æ¥æ”¶åˆ°æŸäº›æ¶ˆæ¯åæ¥å¯åŠ¨æµç¨‹å®ä¾‹ï¼Œæ¯”å¦‚æ¥æ”¶åˆ°äº†ä¸€å°é‚®ä»¶ï¼Œä¸€æ¡çŸ­ä¿¡ç­‰ï¼Œå…·ä½“é€šè¿‡æ¡ˆä¾‹æ¥è®²è§£\n\n![image-20220927004852502](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220927004852502.png)\n\n\n\nå¯åŠ¨æµç¨‹å®ä¾‹å¯ä»¥é€šè¿‡æ™®é€šçš„æ–¹å¼æ¥è§¦å‘ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥é€šè¿‡å¯¹åº”çš„APIæ¥å¤„ç†\n\n```java\n    /**\n     * æ¶ˆæ¯å¯åŠ¨äº‹ä»¶\n     */\n    @Test\n    public void startMessageFlow(){\n        runtimeService.startProcessInstanceByMessage(\"firstMessage\");\n    }\n```\n\n\n\n### ä¸­é—´äº‹ä»¶\n\næ¶ˆæ¯ä¸­é—´äº‹ä»¶å°±æ˜¯åœ¨æµç¨‹è¿ä½œä¸­éœ€è¦æ¶ˆæ¯æ¥è§¦å‘çš„åœºæ™¯ï¼Œæ¡ˆä¾‹æ¼”ç¤ºï¼Œ`è‡ªåŠ¨æµç¨‹1`å¤„ç†å®Œæˆåï¼Œéœ€è¦æ¥æ”¶ç‰¹å®šçš„æ¶ˆæ¯ä¹‹åæ‰èƒ½è¿›å…¥åˆ°`è‡ªåŠ¨æµç¨‹2`\n\n![image-20220927005944099](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220927005944099.png)\n\næ­£å¸¸çš„æµç¨‹éƒ¨ç½²ï¼Œå¯åŠ¨å’Œå®¡æ‰¹åï¼Œæˆ‘ä»¬éœ€è¦å‘é€å¯¹åº”çš„æ¶ˆæ¯æ¥è§¦å‘è¿™ä¸ªä¸­é—´äº‹ä»¶ã€‚\n\n```java\n    /**\n     * å‘é€æ¶ˆæ¯\n     */\n    @Test\n    public void sendMsg(){\n        runtimeService.messageEventReceived(\"secondMessage\",\"da2028e9-3dbc-11ed-adb0-c03c59ad2248\");\n    }\n```\n\n\n\n\n\n### è¾¹ç•Œäº‹ä»¶\n\næ¶ˆæ¯è¾¹ç•Œäº‹ä»¶ï¼Œå¦‚æœåœ¨æ¶ˆæ¯è§¦å‘å‰è¿˜æ²¡æœ‰ï¼Œæ¡ˆä¾‹æ¼”ç¤ºï¼š\n\n![image-20220927010931908](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220927010931908.png)\n\nç„¶åæ­£å¸¸çš„éƒ¨ç½²ï¼Œå¯åŠ¨æµç¨‹ï¼Œå¦‚æœåœ¨å‘å¸ƒå¯¹åº”çš„æ¶ˆæ¯ä¹‹å‰è¿˜æ²¡æœ‰å®¡æ‰¹`ç”¨æˆ·ä»»åŠ¡1`,é‚£å½“æˆ‘ä»¬å‘é€å¯¹åº”çš„æ¶ˆæ¯åå°±ä¼šè§¦å‘å¯¹åº”çš„æ¶ˆæ¯è¾¹ç•Œäº‹ä»¶ã€‚\n\n```java\n    /**\n     * å‘é€æ¶ˆæ¯\n     */\n    @Test\n    public void sendMsg(){\n        runtimeService.messageEventReceived(\"thirdMessage\",\"0d2a30e2-3dbf-11ed-9e28-c03c59ad2248\");\n    }\n```\n\n\n\n\n\n## é”™è¯¯äº‹ä»¶\n\n### å¼€å§‹äº‹ä»¶\n\né”™è¯¯å¯åŠ¨äº‹ä»¶ï¼ˆerror start eventï¼‰ï¼Œå¯ç”¨äºè§¦å‘äº‹ä»¶å­æµç¨‹ï¼ˆEvent Sub-Processï¼‰ã€‚**é”™è¯¯å¯åŠ¨äº‹ä»¶ä¸èƒ½ç”¨äºå¯åŠ¨æµç¨‹å®ä¾‹**ã€‚\n\né”™è¯¯å¯åŠ¨äº‹ä»¶æ€»æ˜¯ä¸­æ–­ã€‚æˆ‘ä»¬é€šè¿‡æ¡ˆä¾‹æ¥ä»‹ç»ã€‚\n\n![image-20220927113303497](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220927113303497.png)\n\nç»˜åˆ¶äº‹ä»¶å­æµç¨‹è¦æ³¨æ„ï¼š\n\n![image-20220927113345613](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220927113345613.png)\n\né€‰æ‹©é”™è¯¯å¯åŠ¨äº‹ä»¶\n\n![image-20220927113423993](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220927113423993.png)\n\n\n\nç„¶åé…ç½®æµç¨‹èŠ‚ç‚¹ä¿¡æ¯\n\n![image-20220927113506045](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220927113506045.png)\n\n![image-20220927113528120](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220927113528120.png)\n\nç„¶ååœ¨JavaDelegateä¸­æŠ›å‡ºå¯¹åº”çš„å¼‚å¸¸\n\n```java\npublic class FirstJavaDelegate implements JavaDelegate {\n    @Override\n    public void execute(DelegateExecution execution) throws Exception {\n        System.out.println(\"FirstJavaDelegate:æ‰§è¡Œäº†\" + LocalDateTime.now().toString());\n        // æŠ›å‡ºçš„ä¿¡æ¯å¿…é¡»å¯¹åº”äºerrorçš„Codeä¿¡æ¯\n        throw new BpmnError(\"errorCode01\");\n    }\n}\n```\n\nç„¶åæ­£å¸¸éƒ¨ç½²ï¼Œå¯åŠ¨æµç¨‹ã€‚ç„¶åæˆ‘ä»¬å°±å¯ä»¥çœ‹åˆ°å¯¹åº”çš„æµè½¬äº†\n\n![image-20220927113652951](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220927113652951.png)\n\n\n\n### è¾¹ç•Œäº‹ä»¶\n\nå½“å­æµç¨‹æ‰§è¡Œä¸­å¯¹å¤–æŠ›å‡ºäº†ç›¸å…³çš„å¼‚å¸¸ï¼Œé‚£ä¹ˆæˆ‘ä»¬è®¾ç½®çš„é”™è¯¯è¾¹ç•Œäº‹ä»¶å°±èƒ½å¯¹åº”çš„æ•è·åˆ°ç›¸å…³çš„äº‹ä»¶ï¼Œç„¶ååšå¯¹åº”çš„å¤„ç†ï¼Œç›¸å…³æ¡ˆä¾‹å¦‚ä¸‹ï¼š\n\n![image-20220927114818638](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220927114818638.png)\n\nç»˜åˆ¶é”™è¯¯è¾¹ç•Œæµç¨‹å›¾çš„æ—¶å€™éœ€è¦å…ˆç»˜åˆ¶ä¸­é—´äº‹ä»¶çš„å›¾æ ‡ï¼Œç„¶åæ‹–æ‹½åˆ°å­æµç¨‹çš„è¾¹ç•Œï¼Œç„¶åä¿®æ”¹å¯¹åº”çš„ç±»å‹å³å¯ï¼Œé”™è¯¯è¾¹ç•Œäº‹ä»¶ç»‘å®šæŠ›å‡ºå¯¹åº”çš„errorCode\n\n![image-20220927114939647](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220927114939647.png)\n\nç„¶åå¯¹åº”çš„æŠ›å‡ºçš„ä¿¡æ¯\n\n```java\npublic class SecondJavaDelegate implements JavaDelegate {\n    @Override\n    public void execute(DelegateExecution execution) throws Exception {\n        System.out.println(\"SecondJavaDelegate:æ‰§è¡Œäº†\" + LocalDateTime.now().toString());\n        // æŠ›å‡ºçš„ä¿¡æ¯å¿…é¡»å¯¹åº”äºerrorçš„Codeä¿¡æ¯\n        throw new BpmnError(\"errorCode02\");\n    }\n}\n```\n\n\n\nç„¶åéƒ¨ç½²å¯åŠ¨æµç¨‹å³å¯çœ‹åˆ°å¯¹åº”çš„æ•ˆæœ\n\n![image-20220927115037027](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220927115037027.png)\n\n\n\n\n\n## ä¿¡å·äº‹ä»¶\n\n### å¼€å§‹äº‹ä»¶\n\né€šè¿‡ä¿¡å·æ¥å¯åŠ¨æµç¨‹å®ä¾‹\n\n![image-20220928232328300](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220928232328300.png)\n\néƒ¨ç½²æµç¨‹å’Œå‘é€ä¿¡å·æ¥å¯åŠ¨æµç¨‹\n\n```java\n    /**\n     * éƒ¨ç½²æµç¨‹\n     */\n    @Test\n    public void deployFlow(){\n\n        Deployment deploy = repositoryService.createDeployment()\n                .name(\"äº‹ä»¶-ä¿¡å·å¼€å§‹äº‹ä»¶\")\n\n                .addClasspathResource(\"flow/23-äº‹ä»¶-ä¿¡å·äº‹ä»¶-å¼€å§‹äº‹ä»¶.bpmn\")\n\n                .deploy();\n        System.out.println(\"deploy.getId() = \" + deploy.getId());\n    }\n\n    /**\n     * é€šè¿‡ä¿¡å·æ¥è§¦å‘å¯åŠ¨äº‹ä»¶çš„æ‰§è¡Œ\n     */\n    @Test\n    public void signalRecevied(){\n        runtimeService.signalEventReceived(\"signal01\");\n    }\n```\n\næ•ˆæœï¼š\n\n![image-20220928232951167](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220928232951167.png)\n\n### ä¸­é—´æ•è·äº‹ä»¶\n\næ¡ˆä¾‹å¦‚ä¸‹ï¼šå½“æˆ‘ä»¬å¯åŠ¨äº‹ä»¶åï¼Œä¼šé˜»å¡åœ¨è¿™ä¸ªæ¶ˆæ¯è·å–ä¸­é—´äº‹ä»¶å¤„ï¼Œç­‰å¾…ç›¸å…³ä¿¡å·åæ‰ä¼šç»§ç»­æµè½¬ã€‚\n\n![image-20220928233200534](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220928233200534.png)\n\nåœ¨è¿™ä¸ªæ¡ˆä¾‹ä¸­æˆ‘ä»¬éœ€è¦éƒ¨ç½²æµç¨‹ï¼Œå¯åŠ¨æµç¨‹ï¼Œç„¶å`ç”¨æˆ·ä»»åŠ¡1`å®¡æ‰¹åï¼Œæˆ‘ä»¬å‘å¸ƒç›¸å…³çš„ä¿¡å·ï¼Œç„¶åä¼šè¿›å…¥åˆ°`ç”¨æˆ·ä»»åŠ¡2`ä¸­\n\n```java\n   /**\n     * éƒ¨ç½²æµç¨‹\n     */\n    @Test\n    public void deployFlow(){\n\n        Deployment deploy = repositoryService.createDeployment()\n                .name(\"äº‹ä»¶-ä¿¡å·ä¸­é—´æ•è·äº‹ä»¶\")\n\n                .addClasspathResource(\"flow/24-äº‹ä»¶-ä¿¡å·äº‹ä»¶-ä¸­é—´æ•è·äº‹ä»¶.bpmn\")\n\n                .deploy();\n        System.out.println(\"deploy.getId() = \" + deploy.getId());\n    }\n\n    /**\n     * å¯åŠ¨æµç¨‹å®ä¾‹\n     */\n    @Test\n    public void startFlow(){\n        String processDefId = \"Process_002gvxw:1:cfcc56ac-3f42-11ed-a689-c03c59ad2248\";\n\n        ProcessInstance processInstance = runtimeService.startProcessInstanceById(processDefId);\n        System.out.println(\"processInstance.getId() = \" + processInstance.getId());\n    }\n\n    @Test\n    public void signalRecevied(){\n        runtimeService.signalEventReceived(\"signal02\");\n    }\n```\n\næ•ˆæœï¼š\n\n![image-20220928233556274](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220928233556274.png)\n\n### ä¸­é—´æŠ›å‡ºäº‹ä»¶\n\nä¿¡å·ä¸­é—´æŠ›å‡ºäº‹ä»¶ä¹Ÿå°±æ˜¯åœ¨æµç¨‹æ‰§è¡Œä¸­çš„æŸä¸ªèŠ‚ç‚¹æŠ›å‡ºäº†å¯¹åº”çš„ä¿¡å·ï¼Œç„¶åå¯¹åº”çš„ä¿¡å·ä¸­é—´æ•è·äº‹ä»¶å°±ä¼šè§¦å‘ï¼Œæˆ‘ä»¬é€šè¿‡å…·ä½“çš„æ¡ˆä¾‹æ¥æ¼”ç¤ºå¦‚ï¼š\n\n![image-20220928234118517](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220928234118517.png)\n\næ­£å¸¸çš„éƒ¨ç½²æµç¨‹ï¼Œç„¶ååšæµç¨‹çš„å®¡æ‰¹ï¼Œæ³¨æ„`ç”¨æˆ·ä»»åŠ¡4`éœ€è¦å…ˆå®¡æ‰¹ï¼Œç„¶åå¤„äºä¿¡å·æ•è·çš„çŠ¶æ€ï¼Œç„¶åæˆ‘ä»¬`ç”¨æˆ·ä»»åŠ¡2`çš„å®¡æ‰¹ï¼ŒæŠ›å‡ºä¿¡å·äº‹ä»¶ï¼Œé‚£ä¹ˆå¯¹åº”çš„æ•è·äº‹ä»¶æ‰èƒ½è§¦å‘ï¼Œè¿™å„¿æœ‰å…ˆåé¡ºåºã€‚\n\n![image-20220928235157519](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220928235157519.png)\n\n### è¾¹ç•Œäº‹ä»¶\n\næœ€åæ¥çœ‹çœ‹ä¿¡å·è¾¹ç•Œäº‹ä»¶ï¼Œæ¡ˆä¾‹å¦‚ä¸‹ï¼š\n\n![image-20220928235443496](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220928235443496.png)\n\néƒ¨ç½²å¯åŠ¨æµç¨‹ï¼Œå¦‚æœ`ç”¨æˆ·ä»»åŠ¡1`å®¡æ‰¹äº†ï¼Œå°±ä¼šè¿›å…¥åˆ°`ç”¨æˆ·ä»»åŠ¡2`å®¡æ‰¹ï¼Œå¦‚æœ`ç”¨æˆ·ä»»åŠ¡1`è¿˜æ²¡å®¡æ‰¹ï¼Œç„¶åå‘é€çš„ç›¸å…³çš„ä¿¡å·ï¼Œä¼šè¢«ä¿¡å·è¾¹ç•Œäº‹ä»¶æ•è·ï¼Œä»è€Œè¿›å…¥åˆ°`ç”¨æˆ·ä»»åŠ¡3`\n\n```java\n    @Test\n    public void signalRecevied(){\n        runtimeService.signalEventReceived(\"signal04\");\n    }\n```\n\n\n\n![image-20220928235841363](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220928235841363.png)\n\n\n\n\n\n## ç»“æŸäº‹ä»¶\n\n### é”™è¯¯ç»“æŸäº‹ä»¶\n\nå½“æµç¨‹æ‰§è¡Œåˆ°è¾¾**é”™è¯¯ç»“æŸäº‹ä»¶ï¼ˆerror end eventï¼‰**æ—¶ï¼Œç»“æŸæ‰§è¡Œçš„å½“å‰åˆ†æ”¯ï¼Œå¹¶æŠ›å‡ºé”™è¯¯ã€‚è¿™ä¸ªé”™è¯¯å¯ä»¥ç”±åŒ¹é…çš„é”™è¯¯è¾¹ç•Œä¸­é—´äº‹ä»¶æ•è·ã€‚å¦‚æœæ‰¾ä¸åˆ°åŒ¹é…çš„é”™è¯¯è¾¹ç•Œäº‹ä»¶ï¼Œå°†ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚é€šè¿‡å…·ä½“æ¡ˆä¾‹æ¥è¯¦ç»†è®²è§£ï¼š\n\n![image-20220929002020963](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220929002020963.png)\n\n\n\néƒ¨ç½²æµç¨‹ï¼Œç„¶åå¯åŠ¨æµç¨‹ï¼Œ`ç”¨æˆ·ä»»åŠ¡1`å®¡æ‰¹\n\n![image-20220929002528362](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220929002528362.png)\n\nè®¾ç½®æµç¨‹å˜é‡`flag==1`ç„¶åä¼šèµ°`é”™è¯¯ç»“æŸäº‹ä»¶`ã€‚ä¼šè§¦å‘å¯¹åº”çš„è¾¹ç•Œäº‹ä»¶\n\n![image-20220929002622297](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220929002622297.png)\n\n\n\n### ä¸­æ–­ç»“æŸäº‹ä»¶\n\nä¸­æ–­ç»“æŸäº‹ä»¶ä¹Ÿç§°ä¸ºç»ˆæ­¢ç»“æŸäº‹ä»¶ï¼Œä¸»è¦æ˜¯å¯¹æµç¨‹è¿›è¡Œç»ˆæ­¢çš„äº‹ä»¶ï¼Œå¯ä»¥åœ¨ä¸€ä¸ªå¤æ‚çš„æµç¨‹ä¸­ï¼Œå¦‚æœæŸæ–¹æƒ³è¦æå‰ä¸­æ–­è¿™ä¸ªæµç¨‹ï¼Œå¯ä»¥é‡‡ç”¨è¿™ä¸ªäº‹ä»¶æ¥å¤„ç†ï¼Œå¯ä»¥åœ¨å¹¶è¡Œå¤„ç†ä»»åŠ¡ä¸­ã€‚å¦‚æœä½ æ˜¯åœ¨æµç¨‹å®ä¾‹å±‚å¤„ç†ï¼Œæ•´ä¸ªæµç¨‹éƒ½ä¼šè¢«ä¸­æ–­ï¼Œå¦‚æœæ˜¯åœ¨å­æµç¨‹ä¸­ä½¿ç”¨ï¼Œé‚£ä¹ˆå½“å‰ä½œç”¨å’Œä½œç”¨åŸŸå†…çš„æ‰€æœ‰çš„å†…éƒ¨æµç¨‹éƒ½ä¼šè¢«ç»ˆæ­¢ã€‚å…·ä½“è¿˜æ˜¯é€šè¿‡ä¸¤ä¸ªæ¡ˆä¾‹æ¥ç»™å¤§å®¶ä»‹ç»ï¼š\n\n#### æ¡ˆä¾‹ä¸€\n\nä»‹ç»æ²¡æœ‰å­æµç¨‹çš„æƒ…å†µä¸‹ç»ˆæ­¢æµç¨‹çš„åœºæ™¯ï¼š\n\n![image-20220929003541120](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220929003541120.png)\n\n\n\n\n\n#### æ¡ˆä¾‹äºŒ\n\næ¡ˆä¾‹äºŒæˆ‘ä»¬æ¥çœ‹çœ‹æœ‰å­æµç¨‹çš„åœºæ™¯ä¸‹ï¼š\n\n![image-20220929004654376](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220929004654376.png)\n\n### å–æ¶ˆç»“æŸäº‹ä»¶\n\nå–æ¶ˆç»“æŸäº‹ä»¶ï¼ˆcancel end eventï¼‰åªèƒ½ä¸BPMNäº‹åŠ¡å­æµç¨‹ï¼ˆBPMN transaction subprocessï¼‰ä¸€èµ·ä½¿ç”¨ã€‚å½“åˆ°è¾¾å–æ¶ˆç»“æŸäº‹ä»¶æ—¶ï¼Œä¼šæŠ›å‡ºå–æ¶ˆäº‹ä»¶ï¼Œä¸”å¿…é¡»ç”±å–æ¶ˆè¾¹ç•Œäº‹ä»¶ï¼ˆcancel boundary eventï¼‰æ•è·ã€‚å–æ¶ˆè¾¹ç•Œäº‹ä»¶å°†å–æ¶ˆäº‹åŠ¡ï¼Œå¹¶è§¦å‘è¡¥å¿ï¼ˆcompensationï¼‰ã€‚\n\nå…·ä½“é€šè¿‡æ¡ˆä¾‹æ¥è®²è§£ï¼š\n\n\n\n![image-20220929010451477](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220929010451477.png)\n\næ•ˆæœï¼š\n\n![image-20220929010913632](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220929010913632.png)\n\n\n\n### è¡¥å¿äº‹ä»¶\n\né€šè¿‡è¡¥å¿è¾¾åˆ°æ§åˆ¶ä¸šåŠ¡æµç¨‹çš„ç›®çš„å°±æ˜¯è¡¥å¿äº‹ä»¶ï¼Œæ¯”å¦‚æˆ‘ä»¬æ­£å¸¸çš„ä¹°æœºç¥¨çš„æµç¨‹ä¸‹è®¢å•è´­ä¹°ï¼Œç„¶ååŒæ—¶å¼¹å‡ºæ”¯ä»˜æµç¨‹é¡µé¢ã€‚æ”¯ä»˜æˆåŠŸåå°±å¯ä»¥ç­‰å¾…å‡ºç¥¨äº†ï¼Œä½†æ˜¯å¦‚æœæˆ‘ä»¬æ”¯ä»˜å¤±è´¥çš„è¯ï¼Œè¿™æ—¶è¦ä¹ˆé‡æ–°æ”¯ä»˜ï¼Œæ›´æ¢æ”¯ä»˜æ–¹å¼æˆ–è€…å–æ¶ˆé¢„è®¢ï¼Œè¿™æ—¶å–æ¶ˆé¢„è®¢æˆ‘ä»¬å°±å¯ä»¥é€šè¿‡è¡¥å¿äº‹ä»¶æ¥å®ç°ï¼Œå…·ä½“çš„æ¡ˆä¾‹å¦‚ä¸‹ï¼š\n\n![image-20220929012202047](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220929012202047.png)\n\n\n\næ¡ˆä¾‹æ•ˆæœï¼š\n\n![image-20220929012149315](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220929012149315.png)\n\n\n\n\n\n# å¤šäººä¼šç­¾\n\nMultiple Instance\n\n## ä¼šç­¾è¯´æ˜\n\nå¤šå®ä¾‹æ´»åŠ¨æ˜¯ä¸ºä¸šåŠ¡æµç¨‹ä¸­çš„æŸä¸ªæ­¥éª¤å®šä¹‰é‡å¤çš„ä¸€ç§æ–¹å¼ã€‚åœ¨ç¼–ç¨‹æ¦‚å¿µä¸­ï¼Œå¤šå®ä¾‹ä¸ `for each` ç»“æ„ç›¸åŒ¹é…ï¼šå®ƒå…è®¸å¯¹ç»™å®šé›†åˆä¸­çš„æ¯ä¸ªé¡¹ç›®æŒ‰é¡ºåºæˆ–å¹¶è¡Œåœ°æ‰§è¡ŒæŸä¸ªæ­¥éª¤æˆ–ç”šè‡³ä¸€ä¸ªå®Œæ•´çš„å­æµç¨‹ã€‚\n\nå¤šå®ä¾‹æ˜¯ä¸€ä¸ªæœ‰é¢å¤–å±æ€§ï¼ˆæ‰€è°“çš„ â€œå¤šå®ä¾‹ç‰¹æ€§â€ï¼‰çš„å¸¸è§„æ´»åŠ¨ï¼Œå®ƒå°†å¯¼è‡´è¯¥æ´»åŠ¨åœ¨è¿è¡Œæ—¶è¢«å¤šæ¬¡æ‰§è¡Œã€‚ä»¥ä¸‹æ´»åŠ¨å¯ä»¥æˆä¸ºå¤šå®ä¾‹æ´»åŠ¨ã€‚\n\n- Service Task æœåŠ¡ä»»åŠ¡\n- Send Task å‘é€ä»»åŠ¡\n- User Task ç”¨æˆ·ä»»åŠ¡\n- Business Rule Task ä¸šåŠ¡è§„åˆ™ä»»åŠ¡\n- Script Task è„šæœ¬ä»»åŠ¡\n- Receive Task æ¥æ”¶ä»»åŠ¡\n- Manual Task æ‰‹åŠ¨ä»»åŠ¡\n- (Embedded) Sub-Process ï¼ˆåµŒå…¥ï¼‰å­æµç¨‹\n- Call Activity å‘èµ·æ´»åŠ¨\n- Transaction Subprocess äº‹åŠ¡å­æµç¨‹\n\nç½‘å…³æˆ–äº‹ä»¶ä¸èƒ½æˆä¸ºå¤šå®ä¾‹ã€‚\n\nå¦‚æœä¸€ä¸ªæ´»åŠ¨æ˜¯å¤šå®ä¾‹çš„ï¼Œè¿™å°†ç”±æ´»åŠ¨åº•éƒ¨çš„ä¸‰æ¡çŸ­çº¿è¡¨ç¤ºã€‚ä¸‰æ¡å‚ç›´çº¿è¡¨ç¤ºå®ä¾‹å°†ä»¥**å¹¶è¡Œ**æ–¹å¼æ‰§è¡Œï¼Œè€Œä¸‰æ¡æ°´å¹³çº¿è¡¨ç¤º**é¡ºåº**æ‰§è¡Œã€‚\n\n![image-20221001234837327](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221001234837327.png)\n\n\n\n\n\næŒ‰ç…§è§„èŒƒçš„è¦æ±‚ï¼Œæ¯ä¸ªå®ä¾‹æ‰€åˆ›å»ºçš„æ‰§è¡Œçš„æ¯ä¸ªçˆ¶æ‰§è¡Œå°†æœ‰ä»¥ä¸‹å˜é‡ï¼š\n\n- **nrOfInstances**: å®ä¾‹çš„æ€»æ•°é‡\n- **nrOfActiveInstances**: å½“å‰æ´»åŠ¨çš„ï¼Œå³å°šæœªå®Œæˆçš„å®ä¾‹çš„æ•°é‡ã€‚å¯¹äºä¸€ä¸ªè¿ç»­çš„å¤šå®ä¾‹ï¼Œè¿™å°†æ°¸è¿œæ˜¯1ã€‚\n- **nrOfCompletedInstances**: å·²ç»å®Œæˆçš„å®ä¾‹çš„æ•°é‡ã€‚\n\nè¿™äº›å€¼å¯ä»¥é€šè¿‡è°ƒç”¨ â€œexecution.getVariable(x) â€œæ–¹æ³•æ£€ç´¢ã€‚\n\næ­¤å¤–ï¼Œæ¯ä¸ªåˆ›å»ºçš„æ‰§è¡Œå°†æœ‰ä¸€ä¸ªæ‰§è¡Œæœ¬åœ°å˜é‡ï¼ˆå³å¯¹å…¶ä»–æ‰§è¡Œä¸å¯è§ï¼Œä¹Ÿä¸å­˜å‚¨åœ¨æµç¨‹å®ä¾‹çº§åˆ«ï¼‰ã€‚\n\n- **loopCounter**: è¡¨ç¤ºè¯¥ç‰¹å®šå®ä¾‹çš„`for each`å¾ªç¯ä¸­çš„ç´¢å¼•\n\nä¸ºäº†ä½¿ä¸€ä¸ªæ´»åŠ¨æˆä¸ºå¤šå®ä¾‹ï¼Œæ´»åŠ¨xmlå…ƒç´ å¿…é¡»æœ‰ä¸€ä¸ª`multiInstanceLoopCharacteristics`å­å…ƒç´ ã€‚\n\n```xml\n<multiInstanceLoopCharacteristics isSequential=\"false|true\">\n ...\n</multiInstanceLoopCharacteristics>\n```\n\n`isSequential`å±æ€§è¡¨ç¤ºè¯¥æ´»åŠ¨çš„å®ä¾‹æ˜¯æŒ‰é¡ºåºæ‰§è¡Œè¿˜æ˜¯å¹¶è¡Œæ‰§è¡Œã€‚\n\n## å¹¶è¡Œä¼šç­¾\n\n### ç»˜åˆ¶æµç¨‹å›¾\n\n![image-20221002000056981](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221002000056981.png)\n\n>loop cardinalityï¼šå¾ªç¯åŸºæ•°ã€‚å¯é€‰é¡¹ã€‚å¯ä»¥ç›´æ¥å¡«æ•´æ•°ï¼Œè¡¨ç¤ºä¼šç­¾çš„äººæ•°ã€‚\n>Collectionï¼šé›†åˆã€‚å¯é€‰é¡¹ã€‚ä¼šç­¾äººæ•°çš„é›†åˆï¼Œé€šå¸¸ä¸ºlistï¼Œå’Œloop cardinalityäºŒé€‰ä¸€ã€‚\n>Element variableï¼šå…ƒç´ å˜é‡ã€‚é€‰æ‹©Collectionæ—¶å¿…é€‰ï¼Œä¸ºcollectioné›†åˆæ¯æ¬¡éå†çš„å…ƒç´ ã€‚\n>Completion conditionï¼šå®Œæˆæ¡ä»¶ã€‚å¯é€‰ã€‚æ¯”å¦‚è®¾ç½®ä¸€ä¸ªäººå®Œæˆåä¼šç­¾ç»“æŸï¼Œé‚£ä¹ˆå…¶ä»–äººçš„ä»£åŠä»»åŠ¡éƒ½ä¼šæ¶ˆå¤±ã€‚\n\nåœ¨ç”¨æˆ·ä»»åŠ¡èŠ‚ç‚¹ç»‘å®šäº†ä¸€ä¸ªç›‘å¬å™¨ï¼Œç›‘å¬`create`è¡Œä¸ºï¼Œè¯¥ç›‘å¬å™¨æˆ‘ä»¬æ˜¯é€šè¿‡UELè¡¨è¾¾å¼æ¥å®ç°çš„ï¼Œ`mulitiInstanceTaskListener`æ˜¯æˆ‘ä»¬æ³¨å…¥åˆ°Springå®¹å™¨ä¸­çš„å¯¹è±¡ã€‚\n\n![image-20221002000233782](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221002000233782.png)\n\nç›‘å¬å™¨çš„å†…å®¹ä¸ºï¼š\n\n```java\n@Component(\"mulitiInstanceTaskListener\")\npublic class MulitiInstanceTaskListener implements Serializable {\n    \n    public void completeListener(DelegateExecution execution){\n        System.out.println(\"ä»»åŠ¡ï¼š\"+execution.getId());\n        System.out.println(\"persons:\" + execution.getVariable(\"persons\"));\n        System.out.println(\"person\" + execution.getVariable(\"person\"));\n        \n    }\n}\n```\n\nç„¶åå¯¹åº”çš„`Completion condition`æˆ‘ä»¬å¯ä»¥åœ¨Javaä»£ç ä¸­å¤„ç†\n\n```java\n@Component(\"mulitiInstanceCompleteTask\")\npublic class MulitiInstanceCompleteTask implements Serializable {\n    /**\n     * å®Œæˆä»»åŠ¡æ˜¯éœ€è¦è§¦å‘çš„æ–¹æ³•\n     * @param execution\n     * @return\n     *     false è¡¨ç¤ºä¼šç­¾ä»»åŠ¡è¿˜æ²¡æœ‰ç»“æŸ\n     \n     *     true è¡¨ç¤ºä¼šç­¾ä»»åŠ¡ç»“æŸäº†\n     */\n    public boolean completeTask(DelegateExecution execution) {\n        System.out.println(\"æ€»çš„ä¼šç­¾ä»»åŠ¡æ•°é‡ï¼š\" + execution.getVariable(\"nrOfInstances\")\n                + \"å½“å‰è·å–çš„ä¼šç­¾ä»»åŠ¡æ•°é‡ï¼š\" + execution.getVariable(\"nrOfActiveInstances\")\n                + \" - \" + \"å·²ç»å®Œæˆçš„ä¼šç­¾ä»»åŠ¡æ•°é‡ï¼š\" + execution.getVariable(\"nrOfCompletedInstances\"));\n        //æœ‰ä¸€ä¸ªäººåŒæ„å°±é€šè¿‡\n        Boolean flag = (Boolean) execution.getVariable(\"flag\");\n        System.out.println(\"å½“å‰æ„è§ï¼š\"+flag);\n        return flag;\n    }\n}\n```\n\nä¸Šé¢çš„ä¸‰ä¸ªå˜é‡æ˜¯Flowableä¸­è‡ªå¸¦çš„å¯ç”¨å˜é‡\n\n1. nrOfInstances:è¯¥ä¼šç­¾ç¯èŠ‚ä¸­æ€»å…±æœ‰å¤šå°‘ä¸ªå®ä¾‹\n\n2. nrOfActiveInstances:å½“å‰æ´»åŠ¨çš„å®ä¾‹çš„æ•°é‡ï¼Œå³è¿˜æ²¡æœ‰å®Œæˆçš„å®ä¾‹æ•°é‡ã€‚\n\n3. nrOfCompletedInstances:å·²ç»å®Œæˆçš„å®ä¾‹çš„æ•°é‡\n\n\n\n### éƒ¨ç½²æµç¨‹\n\næ™®é€šçš„éƒ¨ç½²æµç¨‹\n\n```java\n    /**\n     * éƒ¨ç½²æµç¨‹\n     */\n    @Test\n    public void deployFlow(){\n\n        Deployment deploy = repositoryService.createDeployment()\n                .name(\"å¤šå®ä¾‹\")\n                .addClasspathResource(\"flow/diagram_1.bpmn\")\n                .deploy();\n        System.out.println(\"deploy.getId() = \" + deploy.getId());\n    }\n```\n\n\n\n### å¯åŠ¨æµç¨‹\n\nåœ¨å¯åŠ¨æµç¨‹å®ä¾‹çš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦è®¾ç½®ç›¸å…³çš„å‚æ•°ï¼Œåœ¨æµç¨‹å®šä¹‰çš„æ—¶å€™è®¾ç½®çš„personsåœ¨æ­¤å¤„æˆ‘ä»¬å°±éœ€è¦è®¾ç½®äº†ï¼Œè®¾ç½®ä¸ºArrays.asList(\"å¼ ä¸‰\",\"æå››\",\"ç‹äº”\",\"èµµå…­\")ï¼Œè¿™é‡Œè®¾ç½®äº†4ä¸ªå…ƒç´ ï¼Œåœ¨æµç¨‹å®šä¹‰é‡Œå®šä¹‰äº†3ä¸ªï¼Œè¡¨ç¤ºåªä¼šå¾ªç¯3æ¬¡ï¼Œå¯åŠ¨æµç¨‹åï¼Œåœ¨Taskä¸­å¯ä»¥çœ‹åˆ°åªæœ‰3ä¸ªä»»åŠ¡\n\n```java\n    @Test\n    void startFlow() throws Exception{\n        Map<String,Object> map = new HashMap<>();\n        // è®¾ç½®å¤šäººä¼šç­¾çš„æ•°æ®\n        map.put(\"persons\", Arrays.asList(\"å¼ ä¸‰\",\"æå››\",\"ç‹äº”\",\"èµµå…­\"));\n        ProcessInstance processInstance = runtimeService\n                .startProcessInstanceById(\"myProcess:1:ba1518fc-b22d-11ec-9313-c03c59ad2248\",map);\n    }\n```\n\n\n\nå¯åŠ¨åæˆ‘ä»¬å°±å¯ä»¥åœ¨æ•°æ®åº“ä¸­çœ‹åˆ°äº§ç”Ÿäº†3ä¸ªTask\n\n![image-20221002000640899](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221002000640899.png)\n\n\n\n### å¤„ç†ä»»åŠ¡\n\nå¯åŠ¨æµç¨‹åæˆ‘ä»¬å‘ä¸‹åœ¨Taskä¸­äº§ç”Ÿäº†3æ¡ä»»åŠ¡ï¼Œæˆ‘ä»¬å…ˆé€šè¿‡TaskServiceæ¥å®Œæˆå…¶ä¸­ä¸€ä¸ªä»»åŠ¡ï¼Œè®¾ç½®ä¸€ä¸ªæ ‡å¿—flagä¸ºfalseï¼Œæ¥æ§åˆ¶ä¼šç­¾è¿˜æ²¡æœ‰ç»“æŸï¼ŒåŒæ—¶Taskä¸­å¦å¤–ä¸¤ä¸ªä»»åŠ¡è¿˜åœ¨\n\n```java\n    @Test\n    void completeTask1(){\n        Map<String,Object> map = new HashMap<>();\n        map.put(\"flag\",false);\n        taskService.complete(\"71337501-b22e-11ec-a534-c03c59ad2248\",map);\n    }\n```\n\nå½“ä»»åŠ¡æ‰§è¡Œå®Œæˆæ—¶ä¼šåŒæ­¥è§¦å‘ä¼šç­¾å®Œæˆè¡¨è¾¾å¼ä¸­å¯¹è±¡æ–¹æ³•ã€‚æœ‰å¦‚ä¸‹çš„è¾“å‡º\n\n![image-20221002000853424](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221002000853424.png)\n\nåŒæ—¶Taskè¡¨ä¸­çš„è®°å½•è¿˜æœ‰ä¸¤æ¡\n\n![image-20221002000931060](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221002000931060.png)\n\nç„¶åå½“æˆ‘ä»¬åœ¨å®Œæˆä¸€ä¸ªä»»åŠ¡ï¼Œè¿™æ—¶è®¾ç½®flagä¸ºtrueï¼Œä¼šå‘ç°åœ¨è¿™ä¸ªå¤šäººå¤„ç†ä¸­ï¼Œæœ€å¤š3ä¸ªäººå¤„ç†åœ¨ç¬¬äºŒä¸ªäººå¤„ç†åå°±ç»“æŸäº†\n\n```java\n    @Test\n    void completeTask1(){\n        Map<String,Object> map = new HashMap<>();\n        map.put(\"flag\",true); // è®¾ç½®ä¸ºtrue ç»“æŸå¤šäººä¼šç­¾\n        taskService.complete(\"713570d4-b22e-11ec-a534-c03c59ad2248\",map);\n        System.out.println(\"complete ....\");\n    }\n```\n\nè¿™æ—¶ä»»åŠ¡èŠ‚ç‚¹å°±ç»“æŸäº†~\n\n## ä¸²è¡Œä¼šç­¾\n\nä¸²è¡Œä¼šç­¾æŒ‡çš„æ˜¯åœ¨å¤šå®ä¾‹ä¸­ï¼Œå¤„ç†äººæŒ‰ç…§å¯¹åº”çš„é¡ºåºæ¥ä¸€ä¸ªä¸ªçš„å¤„ç†ä»»åŠ¡ã€‚\n\n### æµç¨‹å›¾\n\n![image-20221002001501320](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221002001501320.png)\n\nä¸Šé¢å®šä¹‰çš„æ˜¯ä¸€ä¸ª`ä¸²è¡Œä¼šç­¾`çš„æµç¨‹å›¾ã€‚å¾ªç¯3æ¬¡ï¼Œé›†åˆæ•°æ®åœ¨`persons`ä¸­ï¼Œæ¯æ¬¡å¾ªç¯çš„æ•°æ®å­˜å‚¨åœ¨å¾ªç¯å˜é‡`person`ä¸­ï¼ŒåŒæ—¶`person`ä¹Ÿæ˜¯å¯¹åº”çš„å¤„ç†äººçš„æµç¨‹å˜é‡ã€‚\n\n\n\n### éƒ¨ç½²å’Œå¯åŠ¨æµç¨‹\n\néƒ¨ç½²å°±æ˜¯æ­£å¸¸çš„éƒ¨ç½²äº†ï¼Œä¸å†èµ˜è¿°ï¼Œå¯åŠ¨æµç¨‹çš„æ—¶å€™æˆ‘ä»¬éœ€è¦å¯¹é›†åˆåšèµ‹å€¼ã€‚\n\n```java\n    @Test\n    public void startFlow(){\n        Map<String,Object> map = new HashMap<>();\n        // è®¾ç½®å¤šäººä¼šç­¾çš„æ•°æ® ä¸²è¡Œä¼šæŒ‰ç…§é›†åˆçš„å¾ªåºæ¥å¤„ç†\n        map.put(\"persons\", Arrays.asList(\"å¼ ä¸‰\",\"æå››\",\"ç‹äº”\",\"èµµå…­\"));\n        String processDefId = \"Process_0ltwc4j:1:bd87ed49-41a3-11ed-9ec4-c03c59ad2248\";\n        ProcessInstance processInstance = runtimeService.startProcessInstanceById(processDefId,map);\n        System.out.println(\"processInstance.getId() = \" + processInstance.getId());\n    }\n```\n\nå¯åŠ¨åä¼šåˆ›å»ºä¸€ä¸ªTaskï¼Œå¤„ç†äººæ˜¯`å¼ ä¸‰`ã€‚ç„¶åå¤„ç†å®Œæˆåä¼šåˆ›å»ºä¸‹ä¸€ä¸ªtaskï¼Œå¤„ç†äººæ˜¯`æå››`æŒ‰å¾ªåºæ¥å¤„ç†äº†ã€‚\n\n\n\n\n\n# ä»»åŠ¡å›é€€\n\nä»»åŠ¡å›é€€é©³å›æ’¤é”€ç›¸å…³çš„æ“ä½œåœ¨å®é™…çš„å¼€å‘ä¸­è¿˜æ˜¯ä¼šç»å¸¸é‡åˆ°çš„ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹Camundaä¸­é’ˆå¯¹è¿™äº›æƒ…å†µæ˜¯å¦‚ä½•å¤„ç†çš„ã€‚\n\n## ä¸²è¡Œçš„å›é€€\n\næˆ‘ä»¬å…ˆä»æœ€ç®€å•çš„ä¸²è¡Œæµç¨‹æ¥åˆ†æï¼Œæ¡ˆä¾‹å¦‚ä¸‹\n\n![image-20221005155134800](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221005155134800.png)\n\nä¸Šé¢çš„æµç¨‹å°±æ˜¯ä¸€ä¸ªéå¸¸ç®€å•çš„ä¸²è¡Œä»»åŠ¡ï¼Œå®šä¹‰äº†4ä¸ªç”¨æˆ·ä»»åŠ¡ï¼ŒæŒ‡æ´¾çš„å¤„ç†äººåˆ†åˆ«æ˜¯`user1`,`user2`,`user3`,`user4`.åœ¨æµç¨‹çš„æ‰§è¡Œè¿‡ç¨‹ä¸­æˆ‘ä»¬å¯ä»¥é€šè¿‡å›é€€æ¥æ¼”ç¤ºå…·ä½“çš„æ•ˆæœã€‚é¦–å…ˆæ¥éƒ¨ç½²æµç¨‹\n\n```java\n    /**\n     * å®Œæˆæµç¨‹çš„éƒ¨ç½²æ“ä½œ\n     */\n    @Test\n    public void deploy(){\n        Deployment deploy = repositoryService.createDeployment()\n                .name(\"å›é€€\")\n                .addClasspathResource(\"flow/ä¸²è¡Œå›é€€.bpmn\")\n                .deploy();\n        System.out.println(\"deploy.getId() = \" + deploy.getId());\n    }\n    /**\n     * é€šè¿‡æµç¨‹å®šä¹‰Id å¯åŠ¨\n     */\n    @Test\n    public void startFlow(){\n        String processId = \"Process_1up6ocm:1:d924ab29-43f9-11ed-b4f1-c03c59ad2248\";\n        ProcessInstance processInstance = runtimeService.startProcessInstanceById(processId);\n        System.out.println(\"processInstance.getId() = \" + processInstance.getId());\n    }\n```\n\nç„¶åæˆ‘ä»¬é€šè¿‡user1å®Œæˆä»»åŠ¡ï¼Œç›´åˆ°user3å®Œæˆä»»åŠ¡ï¼Œåˆ°user4æ¥å¤„ç†ä»»åŠ¡ã€‚\n\n```java\n    /**\n     * å®Œæˆä»»åŠ¡\n     */\n    @Test\n    public void completeTask(){\n        taskService.complete(\"45bf40bf-43fa-11ed-8abe-c03c59ad2248\");\n    }\n```\n\n![image-20221004233745178](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221004233745178.png)\n\nç„¶åæˆ‘ä»¬æ¥å®Œæˆå›é€€åˆ°`user3`\n\n```java\n    /**\n     * ä»»åŠ¡å›é€€\n     *\n     */\n    @Test\n    public void rollbackTask(){\n        String processInstanceId = \"cb7b11bf-4486-11ed-bbb6-c03c59ad2248\";\n        runtimeService.createProcessInstanceModification(processInstanceId)\n                        .startBeforeActivity(\"Activity_17ubvwq\") // å›é€€åˆ°å¯¹åº”çš„èŠ‚ç‚¹å‰  é€šè¿‡ èŠ‚ç‚¹çš„key æ¥å®ç°\n                       // .cancelActivityInstance(processInstanceId) // æ•´ä¸ªä»»åŠ¡ä¼šå–æ¶ˆ\n                        .cancelAllForActivity(\"Activity_0jyi1pp\") // å–æ¶ˆåŸæ¥çš„èŠ‚ç‚¹\n                        .execute();\n        /*String processDefinitionId = \"\";\n        runtimeService.createModification(\"\");*/\n    }\n```\n\næ•ˆæœï¼š\n\n![image-20221005155543672](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221005155543672.png)\n\nç„¶ååœ¨å†å²è¡¨ä¸­å¯ä»¥çœ‹åˆ°å¯¹åº”çš„èµ°å‘\n\n![image-20221005155709087](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221005155709087.png)\n\nå…·ä½“è¿‡ç¨‹ä¸ºï¼š\n\n![image-20221005155909565](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221005155909565.png)\n\nç„¶åæˆ‘ä»¬å¯ä»¥ä»`user3`å›é€€åˆ°`user1`\n\n![image-20221005160133670](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221005160133670.png)\n\n![image-20221005160200316](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221005160200316.png)\n\nè¦å–æ¶ˆå½“å‰çš„ä»»åŠ¡ç›´æ¥è°ƒç”¨`cancelActivityInstance(processInstanceId)`æ–¹æ³•å³å¯ã€‚\n\nç›¸å…³æ–¹æ³•è¯´æ˜ï¼š\n\n| ç±»åˆ«                       | æ–¹æ³•                                                         |\n| -------------------------- | ------------------------------------------------------------ |\n| åœ¨æ´»åŠ¨å‰å¯åŠ¨               | å›é€€åˆ°è¿™ä¸ªèŠ‚ç‚¹                                               |\n|                            | startBeforeActivity(String activityId)                       |\n|                            | startBeforeActivity(String activityId, String ancestorActivityInstanceId) |\n| åœ¨æ´»åŠ¨åå¯åŠ¨               | é€šè¿‡ `startAfterActivity` åœ¨ä¸€ä¸ªæ´»åŠ¨ä¹‹åè¿è¡Œï¼Œæ„å‘³ç€å°†ä»æ´»åŠ¨çš„ä¸‹ä¸€èŠ‚ç‚¹å¼€å§‹æ‰§è¡Œ |\n|                            | startAfterActivity(String activityId)                        |\n|                            | startAfterActivity(String activityId, String ancestorActivityInstanceId) |\n| å¯åŠ¨ä¸€ä¸ªè¿‡æ¸¡               | é€šè¿‡ `startTransition` å¯åŠ¨ä¸€ä¸ªè¿‡æ¸¡ï¼Œå°±æ„å‘³ç€åœ¨ä¸€ä¸ªç»™å®šçš„åºåˆ—æµä¸Šå¼€å§‹æ‰§è¡Œã€‚å½“æœ‰å¤šä¸ªæµå‡ºçš„åºåˆ—æµæ—¶ï¼Œè¿™å¯ä»¥ä¸ `startAfterActivity` ä¸€èµ·ä½¿ç”¨ã€‚å¦‚æœæˆåŠŸï¼Œè¯¥æŒ‡ä»¤ä»åºåˆ—æµå¼€å§‹æ‰§è¡Œæµç¨‹æ¨¡å‹ï¼Œç›´åˆ°è¾¾åˆ°ç­‰å¾…çŠ¶æ€ã€‚ |\n|                            | startTransition(String transitionId)                         |\n|                            | startTransition(String transition, String ancestorActivityInstanceId) |\n| å–æ¶ˆä¸€ä¸ªæ´»åŠ¨å®ä¾‹           | é€šè¿‡`cancelActivityInstance`å–æ¶ˆä¸€ä¸ªç‰¹å®šçš„æ´»åŠ¨å®ä¾‹ã€‚æ—¢å¯ä»¥æ˜¯ä¸€ä¸ªæ´»åŠ¨å®ä¾‹ï¼Œå¦‚ç”¨æˆ·ä»»åŠ¡çš„å®ä¾‹ï¼Œä¹Ÿå¯ä»¥æ˜¯å±‚æ¬¡ç»“æ„ä¸­æ›´é«˜èŒƒå›´çš„å®ä¾‹ï¼Œå¦‚å­æµç¨‹çš„å®ä¾‹ |\n|                            | cancelActivityInstance(String activityInstanceId)            |\n| å–æ¶ˆä¸€ä¸ªè¿‡æ¸¡å®ä¾‹           | è¿‡æ¸¡å®ä¾‹è¡¨ç¤ºå³å°†ä»¥å¼‚æ­¥å»¶ç»­çš„å½¢å¼è¿›å…¥/ç¦»å¼€ä¸€ä¸ªæ´»åŠ¨çš„æ‰§è¡Œæµã€‚ä¸€ä¸ªå·²ç»åˆ›å»ºä½†å°šæœªæ‰§è¡Œçš„å¼‚æ­¥å»¶ç»­Jobè¢«è¡¨ç¤ºä¸ºä¸€ä¸ªè¿‡æ¸¡å®ä¾‹ã€‚è¿™äº›å®ä¾‹å¯ä»¥é€šè¿‡`cancelTransitionInstance`æ¥å–æ¶ˆ |\n|                            | cancelTransitionInstance(String activityInstanceId)          |\n| å–æ¶ˆä¸€ä¸ªæ´»åŠ¨çš„æ‰€æœ‰æ´»åŠ¨å®ä¾‹ | é€šè¿‡æŒ‡ä»¤ `cancelAllForActivity` æ¥å–æ¶ˆä¸€ä¸ªç‰¹å®šæ´»åŠ¨çš„æ‰€æœ‰æ´»åŠ¨å’Œè¿‡æ¸¡å®ä¾‹ã€‚ |\n|                            | cancelAllForActivity(String activityId)                      |\n\n\n\n## å¹¶è¡Œçš„å›é€€\n\næ¥ä¸‹æ¥æˆ‘ä»¬åœ¨å¹¶è¡Œçš„åœºæ™¯ä¸­æ¥çœ‹çœ‹å„ç§å›é€€çš„åœºæ™¯ã€‚å…·ä½“æ¡ˆä¾‹æµç¨‹å¦‚ä¸‹ï¼š\n\n![image-20221005193633031](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221005193633031.png)\n\néƒ¨ç½²åï¼Œå¯åŠ¨æµç¨‹å®ä¾‹ã€‚è¿è¡Œåˆ°å¦‚ä¸‹çš„èŠ‚ç‚¹ï¼Œç„¶åå›é€€åˆ°`ç”¨æˆ·å®¡æ‰¹1`\n\n![image-20221005193931957](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221005193931957.png)\n\nç„¶åæˆ‘ä»¬æ¥åšå›é€€æ“ä½œ\n\n```java\n    @Test\n    public void rollbackTask(){\n        String processInstanceId = \"a1d40268-44a2-11ed-9b63-c03c59ad2248\";\n        runtimeService.createProcessInstanceModification(processInstanceId)\n                        .startBeforeActivity(\"Activity_0n0ddnj\") // å›é€€åˆ°å¯¹åº”çš„èŠ‚ç‚¹å‰  é€šè¿‡ èŠ‚ç‚¹çš„key æ¥å®ç°\n                       // .cancelActivityInstance(processInstanceId) // æ•´ä¸ªä»»åŠ¡ä¼šå–æ¶ˆ\n                        .cancelAllForActivity(\"Activity_184rpuo\") // å–æ¶ˆåŸæ¥çš„èŠ‚ç‚¹\n                        .cancelAllForActivity(\"Activity_08w6j91\")\n                        .execute();\n        /*String processDefinitionId = \"\";\n        runtimeService.createModification(\"\");*/\n    }\n```\n\nä¸Šé¢æˆ‘ä»¬æ ¹æ®æµç¨‹`å®ä¾‹å›é€€`åŒæ—¶éœ€è¦å–æ¶ˆæ‰ä¹‹å‰çš„ä¸¤ä¸ªèŠ‚ç‚¹ã€‚åœ¨å†å²è¡¨ä¸­ä¹Ÿå¯ä»¥çœ‹åˆ°è¿™ä¸ªæµç¨‹\n\n![image-20221005194635852](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221005194635852.png)\n\nåœ¨ä¸Šé¢ä¾‹å­çš„åŸºç¡€ä¸Šæˆ‘ä»¬æ¥å®ç°å¦‚ä¸‹çš„æµç¨‹å›é€€æ“ä½œã€‚\n\n![image-20221005194807783](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221005194807783.png)\n\n![image-20221005194904013](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221005194904013.png)\n\nå…·ä½“çš„å›é€€ä»£ç \n\n```java\n    @Test\n    public void rollbackTask(){\n        String processInstanceId = \"a1d40268-44a2-11ed-9b63-c03c59ad2248\";\n        runtimeService.createProcessInstanceModification(processInstanceId)\n                        .startBeforeActivity(\"Activity_184rpuo\") // å›é€€åˆ°å¯¹åº”çš„èŠ‚ç‚¹å‰  é€šè¿‡ èŠ‚ç‚¹çš„key æ¥å®ç°\n                        .startBeforeActivity(\"Activity_08w6j91\")\n                        .cancelAllForActivity(\"Activity_0ma3n4p\") // å–æ¶ˆåŸæ¥çš„èŠ‚ç‚¹\n                        .execute();\n    }\n```\n\nç„¶åæŸ¥çœ‹å†å²ä»»åŠ¡åŒæ ·å¯ä»¥çœ‹åˆ°å…·ä½“çš„å®ç°\n\n![image-20221005195142559](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221005195142559.png)\n\n\n\n## æ’ä»–ç½‘å…³å›é€€\n\nç„¶åæˆ‘ä»¬æ¥çœ‹çœ‹åœ¨æœ‰æ’ä»–ç½‘å…³çš„æƒ…å†µä¸‹ï¼Œå¦‚æœæˆ‘ä»¬è¦è°ƒæ•´æµç¨‹çš„èµ°å‘åº”è¯¥è¦æ€ä¹ˆæ¥å¤„ç†ã€‚\n\n![image-20221005200528761](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221005200528761.png)\n\nä¹Ÿå°±æ˜¯å®é™…çš„åœºæ™¯ä¸­å¯èƒ½å…ˆèµ°åˆ°äº†`ç”¨æˆ·2`å®¡æ‰¹ï¼Œåé¢å‘ç°ä¸åˆç†ï¼Œå°±éœ€è¦å›é€€åˆ°`ç”¨æˆ·1`åé¢ç„¶åå†è°ƒæ•´æµç¨‹å˜é‡ï¼Œæµè½¬åˆ°`ç”¨æˆ·3`å¤„ã€‚\n\n![image-20221005200901486](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221005200901486.png)\n\nç„¶åæˆ‘ä»¬æ¥çœ‹çœ‹å…·ä½“çš„å›é€€æ“ä½œ\n\n```java\n    @Test\n    public void rollbackTask(){\n        String processInstanceId = \"6a70a33b-44a6-11ed-8557-c03c59ad2248\";\n        runtimeService.createProcessInstanceModification(processInstanceId)\n                        .startBeforeActivity(\"Gateway_0ah4coh\") // å›é€€åˆ°æ’ä»–ç½‘å…³ä¹‹å‰\n                        .setVariable(\"num\",-1) // è®¾ç½®æµç¨‹å˜é‡\n                        .cancelAllForActivity(\"Activity_0x9stxl\") // å–æ¶ˆåŸæ¥çš„èŠ‚ç‚¹\n                        .execute();\n    }\n\n```\n\nå›é€€åˆ°`æ’ä»–ç½‘å…³`èŠ‚ç‚¹ï¼Œç„¶åè®¾ç½®æµç¨‹å˜é‡`num=-1`ç„¶åä¼šèµ°`ç”¨æˆ·3`çš„å®¡æ‰¹ã€‚åŒæ—¶å–æ¶ˆåŸæ¥èŠ‚ç‚¹çš„å®¡æ‰¹\n\n![image-20221005201429581](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221005201429581.png)\n\n\nç„¶åæˆ‘ä»¬æ¥çœ‹çœ‹æœ‰å­æµç¨‹çš„åœºæ™¯ä¸‹çš„å›é€€å¤„ç†\n\n![image-20221005204950474](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221005204950474.png)\n\næˆ‘ä»¬æ¥çœ‹çœ‹ä»å­æµç¨‹å›é€€åˆ°ä¸»æµç¨‹çš„æ“ä½œã€‚\n\n![image-20221005205324729](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221005205324729.png)\n\n```java\n    @Test\n    public void rollbackTask(){\n        String processInstanceId = \"a3311551-44ac-11ed-97c0-c03c59ad2248\";\n        runtimeService.createProcessInstanceModification(processInstanceId)\n                        .startBeforeActivity(\"Activity_00kwccq\") // å›é€€åˆ°æ’ä»–ç½‘å…³ä¹‹å‰\n                        .cancelAllForActivity(\"Activity_01835pn\") // å–æ¶ˆåŸæ¥çš„èŠ‚ç‚¹\n                        .execute();\n    }\n```\n\nåœ¨å†å²è¡¨ä¸­æŸ¥çœ‹è®°å½•\n\n![image-20221005205659817](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221005205659817.png)\n\n\n\n## é‡å¯/æ¢å¤å®ä¾‹\n\nåœ¨æµç¨‹å®ä¾‹ç»ˆæ­¢åï¼Œå…¶å†å²æ•°æ®ä»ç„¶å­˜åœ¨ï¼Œå¹¶ä¸”å¯ä»¥è¢«è®¿é—®ä»¥é‡å¯æµç¨‹å®ä¾‹ï¼Œå‰ææ˜¯å†å²çº§åˆ«è¢«è®¾ç½®ä¸ºFULLã€‚ ä¾‹å¦‚ï¼Œå½“æµç¨‹æ²¡æœ‰ä»¥æœŸæœ›çš„æ–¹å¼ç»ˆæ­¢æ—¶ï¼Œé‡å¯æµç¨‹å®ä¾‹æ˜¯æœ‰ç”¨çš„ã€‚è¿™ä¸ªAPIçš„ä½¿ç”¨çš„å…¶ä»–å¯èƒ½æƒ…å†µæœ‰ï¼š\n\n- æ¢å¤è¢«é”™è¯¯åœ°å–æ¶ˆçš„æµç¨‹å®ä¾‹çš„åˆ°æœ€åçŠ¶æ€\n- ç”±äºé”™è¯¯è·¯ç”±å¯¼è‡´æµç¨‹å®ä¾‹ç»ˆæ­¢åï¼Œé‡å¯æµç¨‹å®ä¾‹\n\nä¸ºäº†æ‰§è¡Œè¿™æ ·çš„æ“ä½œï¼Œæµç¨‹å¼•æ“æä¾›äº† *æµç¨‹å®ä¾‹é‡å¯API* `RuntimeService.restartProcessInstances(..)` ã€‚è¯¥APIå…è®¸é€šè¿‡ä½¿ç”¨æµå¼æ„å»ºå™¨åœ¨ä¸€æ¬¡è°ƒç”¨ä¸­æŒ‡å®šå¤šä¸ªå®ä¾‹åŒ–æŒ‡ä»¤ã€‚\n\n![image-20221005210910364](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221005210910364.png)\n\néƒ¨ç½²å¯åŠ¨æµç¨‹å®ä¾‹åè¿›å…¥å¹¶è¡Œç½‘å…³ã€‚ç„¶åæµç¨‹å®ä¾‹è¢«ä¸­æ–­äº†\n\n```java\n    @Test\n    public void deleteProcessId(){\n        String processId = \"cfd58b31-44ae-11ed-92f5-c03c59ad2248\";\n        runtimeService.deleteProcessInstance(processId,\"æµ‹è¯•åˆ é™¤\");\n    }\n```\n\n![image-20221005211329315](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221005211329315.png)\n\nä¹‹åï¼Œæˆ‘ä»¬å†³å®šæ¢å¤è¯¥æµç¨‹å®ä¾‹åˆ°æœ€åçŠ¶æ€ï¼š\n\n```java\n    @Test\n    public void recoveryProcessInstancess(){\n        runtimeService\n                .restartProcessInstances(\"Process_08wyw1g:1:ad8f483f-44ae-11ed-aee8-c03c59ad2248\") // æµç¨‹å®šä¹‰ID\n                .startBeforeActivity(\"Activity_03vnv63\")\n                .startBeforeActivity(\"Activity_0b7mtmx\")\n                .processInstanceIds(\"cfd58b31-44ae-11ed-92f5-c03c59ad2248\") // æµç¨‹å®ä¾‹ID\n                .execute();\n    }\n```\n\næµç¨‹å®ä¾‹å·²ç»ç”¨æœ€åä¸€ç»„å˜é‡é‡å¯äº†ã€‚ç„¶è€Œï¼Œåœ¨é‡å¯çš„æµç¨‹å®ä¾‹ä¸­ï¼Œåªæœ‰å…¨å±€å˜é‡è¢«æ¢å¤äº†ã€‚ æœ¬åœ°å˜é‡è¿˜éœ€è¦è°ƒç”¨ `RuntimeService.setVariableLocal(..)` æ‰‹åŠ¨è®¾ç½®ã€‚\n\n>ä»æŠ€æœ¯ä¸Šè®²ï¼Œåˆ›å»ºçš„æ˜¯ä¸€ä¸ªæ–°çš„æµç¨‹å®ä¾‹ã€‚\n>\n>**è¯·æ³¨æ„:** å†å²æµç¨‹å’Œé‡å¯çš„æµç¨‹å®ä¾‹çš„idæ˜¯ä¸åŒçš„ã€‚\n\n\n\n\n\n# åŠ¨æ€è¡¨å•\n\næ¥ä¸‹æ¥æˆ‘ä»¬çœ‹çœ‹åŠ¨æ€è¡¨å•çš„åº”ç”¨ï¼Œåœ¨Camundaä¸­è¡¨å•åˆ†ä¸ºå†…ç½®è¡¨å•å’ŒåŠ¨æ€è¡¨å•ã€‚\n\n## å†…ç½®è¡¨å•\n\nå†…ç½®è¡¨å•å°±æ˜¯åœ¨ç»˜åˆ¶æµç¨‹å›¾çš„æ—¶å€™åŒæ—¶ç»˜åˆ¶è¡¨å•ã€‚è¿™ç§æ–¹å¼å…¶å®å°±æ˜¯ç»‘å®šäº†å¯¹åº”çš„æµç¨‹å˜é‡ï¼Œä¸æ˜¯å¤ªçµæ´»ã€‚ä½†è¿˜æ˜¯æ¥è®²è§£ä¸‹ã€‚\n\n![image-20221014160336988](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221014160336988.png)\n\n### å¯åŠ¨æµç¨‹ç»‘å®š\n\næˆ‘ä»¬å…ˆæ¥çœ‹ä¸‹åœ¨å¯åŠ¨æµç¨‹çš„æ—¶å€™å°±è®¾ç½®ç›¸å…³çš„è¡¨å•\n\n![image-20221014160501005](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221014160501005.png)\n\nå¯¹åº”çš„æµç¨‹å›¾\n\n```xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<bpmn:definitions xmlns:bpmn=\"http://www.omg.org/spec/BPMN/20100524/MODEL\" xmlns:bpmndi=\"http://www.omg.org/spec/BPMN/20100524/DI\" xmlns:dc=\"http://www.omg.org/spec/DD/20100524/DC\" xmlns:camunda=\"http://camunda.org/schema/1.0/bpmn\" xmlns:di=\"http://www.omg.org/spec/DD/20100524/DI\" xmlns:modeler=\"http://camunda.org/schema/modeler/1.0\" id=\"Definitions_1pnd5o3\" targetNamespace=\"http://bpmn.io/schema/bpmn\" exporter=\"Camunda Modeler\" exporterVersion=\"4.12.0\" modeler:executionPlatform=\"Camunda Platform\" modeler:executionPlatformVersion=\"7.15.0\">\n  <bpmn:process id=\"Process_13abncz\" isExecutable=\"true\">\n    <bpmn:startEvent id=\"StartEvent_1\">\n      <bpmn:extensionElements>\n        <camunda:formData>\n          <camunda:formField id=\"days\" label=\"è¯·å‡å¤©æ•°\" type=\"long\" defaultValue=\"1\" />\n          <camunda:formField id=\"reason\" label=\"è¯·å‡åŸå› \" type=\"string\" />\n        </camunda:formData>\n      </bpmn:extensionElements>\n      <bpmn:outgoing>Flow_09xirvq</bpmn:outgoing>\n    </bpmn:startEvent>\n    <bpmn:sequenceFlow id=\"Flow_09xirvq\" sourceRef=\"StartEvent_1\" targetRef=\"Activity_0a81mdi\" />\n    <bpmn:sequenceFlow id=\"Flow_1i0viip\" sourceRef=\"Activity_0a81mdi\" targetRef=\"Activity_01qg6se\" />\n    <bpmn:endEvent id=\"Event_1mj58zz\">\n      <bpmn:incoming>Flow_1asp8i3</bpmn:incoming>\n    </bpmn:endEvent>\n    <bpmn:sequenceFlow id=\"Flow_1asp8i3\" sourceRef=\"Activity_01qg6se\" targetRef=\"Event_1mj58zz\" />\n    <bpmn:userTask id=\"Activity_0a81mdi\" name=\"ç”¨æˆ·ä»»åŠ¡1\" camunda:assignee=\"demo\">\n      <bpmn:incoming>Flow_09xirvq</bpmn:incoming>\n      <bpmn:outgoing>Flow_1i0viip</bpmn:outgoing>\n    </bpmn:userTask>\n    <bpmn:userTask id=\"Activity_01qg6se\" name=\"ç”¨æˆ·ä»»åŠ¡2\" camunda:assignee=\"demo\">\n      <bpmn:incoming>Flow_1i0viip</bpmn:incoming>\n      <bpmn:outgoing>Flow_1asp8i3</bpmn:outgoing>\n    </bpmn:userTask>\n  </bpmn:process>\n  <bpmndi:BPMNDiagram id=\"BPMNDiagram_1\">\n    <bpmndi:BPMNPlane id=\"BPMNPlane_1\" bpmnElement=\"Process_13abncz\">\n      <bpmndi:BPMNEdge id=\"Flow_09xirvq_di\" bpmnElement=\"Flow_09xirvq\">\n        <di:waypoint x=\"188\" y=\"117\" />\n        <di:waypoint x=\"240\" y=\"117\" />\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge id=\"Flow_1i0viip_di\" bpmnElement=\"Flow_1i0viip\">\n        <di:waypoint x=\"340\" y=\"117\" />\n        <di:waypoint x=\"400\" y=\"117\" />\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge id=\"Flow_1asp8i3_di\" bpmnElement=\"Flow_1asp8i3\">\n        <di:waypoint x=\"500\" y=\"117\" />\n        <di:waypoint x=\"562\" y=\"117\" />\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNShape id=\"_BPMNShape_StartEvent_2\" bpmnElement=\"StartEvent_1\">\n        <dc:Bounds x=\"152\" y=\"99\" width=\"36\" height=\"36\" />\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape id=\"Event_1mj58zz_di\" bpmnElement=\"Event_1mj58zz\">\n        <dc:Bounds x=\"562\" y=\"99\" width=\"36\" height=\"36\" />\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape id=\"Activity_09e81f3_di\" bpmnElement=\"Activity_0a81mdi\">\n        <dc:Bounds x=\"240\" y=\"77\" width=\"100\" height=\"80\" />\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape id=\"Activity_0ot1277_di\" bpmnElement=\"Activity_01qg6se\">\n        <dc:Bounds x=\"400\" y=\"77\" width=\"100\" height=\"80\" />\n      </bpmndi:BPMNShape>\n    </bpmndi:BPMNPlane>\n  </bpmndi:BPMNDiagram>\n</bpmn:definitions>\n\n```\n\nå¯ä»¥çœ‹åˆ°å¯¹åº”çš„xmlä¸­å°±é…ç½®äº†è¡¨å•çš„æ•°æ®\n\n![image-20221014160601636](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221014160601636.png)\n\n\n\néƒ¨ç½²æµç¨‹\n\n```java\n    /**\n     * å®Œæˆæµç¨‹çš„éƒ¨ç½²æ“ä½œ\n     */\n    @Test\n    public void deploy(){\n        Deployment deploy = repositoryService.createDeployment()\n                .name(\"è¡¨å•01\")\n                .addClasspathResource(\"flow/è¡¨å•-01.bpmn\")\n                .deploy();\n        System.out.println(\"deploy.getId() = \" + deploy.getId());\n    }\n```\n\néƒ¨ç½²å®Œæµç¨‹åæˆ‘ä»¬å¯ä»¥é€šè¿‡å¯¹åº”çš„APIæŸ¥çœ‹æµç¨‹å¯¹åº”çš„è¡¨å•ä¿¡æ¯\n\n```java\n@Test\npublic void getStartFromData(){\n    String processDefId = \"Process_13abncz:1:5d39867a-4b6e-11ed-9748-c03c59ad2248\";\n    // æ ¹æ®æµç¨‹å®šä¹‰æ‰¾åˆ°å¯¹åº”çš„ è¡¨å•æ•°æ®ã€‚\n    StartFormData startFormData = formService\n        .getStartFormData(processDefId);\n    // æ‰¾åˆ°å¯¹åº”çš„è¡¨å•åŸŸçš„é›†åˆ\n    List<FormField> formFields = startFormData.getFormFields();\n    for (FormField formField : formFields) {\n        // è·å–æ¯ä¸ªå…·ä½“çš„è¡¨å•åŸŸ\n        System.out.println(formField.getId() + \" \" + formField.getLabel() + \" \" + formField.getValue().getValue());\n    }\n}\n```\n\n![image-20221014161737726](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221014161737726.png)\n\nå¯åŠ¨æµç¨‹ï¼šä¸¤ç§æ–¹å¼\n\n```java\n    /**\n     * æ­£å¸¸çš„å¯åŠ¨æµç¨‹\n     */\n    @Test\n    void startFormFlow() throws Exception{\n        String processDefId = \"Process_13abncz:1:5d39867a-4b6e-11ed-9748-c03c59ad2248\";\n        Map<String,Object> map = new HashMap<>();\n        map.put(\"days\",\"5\");\n        map.put(\"reason\",\"æƒ³ä¼‘æ¯ä¸‹\");\n        // æ­£å¸¸å¯åŠ¨çš„æ—¶å€™å¯ä»¥é€šè¿‡æµç¨‹å˜é‡æ¥ç»™è¡¨å•è®¾ç½®æ•°æ®ï¼Œä¹Ÿå¯ä»¥ä¸è®¾ç½®\n        ProcessInstance processInstance = runtimeService\n                .startProcessInstanceById(processDefId,map);\n    }\n\n    /**\n     * é€šè¿‡FormServiceæ¥å¯åŠ¨ä¸€ä¸ªè¡¨å•æµç¨‹\n     * @throws Exception\n     */\n    @Test\n    void startFormServiceFlow() throws Exception{\n        String processDefId = \"Process_13abncz:1:5d39867a-4b6e-11ed-9748-c03c59ad2248\";\n        Map<String,Object> map = new HashMap<>();\n        map.put(\"days\",2);\n        map.put(\"reason\",\"å‡ºå»ç©ç©\");\n        ProcessInstance processInstance = formService.submitStartForm(processDefId,map);\n    }\n```\n\nå¯åŠ¨æµç¨‹åèµ°åˆ°äº†`ç”¨æˆ·ä»»åŠ¡1`è¿™ä¸ªèŠ‚ç‚¹\n\n![image-20221014162003762](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221014162003762.png)\n\næƒ³è¦æŸ¥çœ‹å¯¹åº”çš„è¡¨å•æ•°æ®ã€‚é€šè¿‡å¦‚ä¸‹æ–¹æ³•å¯ä»¥å®ç°\n\n```java\n    /**\n     * æ ¹æ®Taskç¼–å·æ¥æŸ¥çœ‹è¡¨å•æ•°æ®\n     */\n    @Test\n    void getTaskFormData(){\n        String taskId = \"426b11e6-4b85-11ed-b15a-c03c59ad2248\";\n\n        String processDefId = \"Process_13abncz:1:5d39867a-4b6e-11ed-9748-c03c59ad2248\";\n        // æ ¹æ®æµç¨‹å®šä¹‰æ‰¾åˆ°å¯¹åº”çš„ è¡¨å•æ•°æ®ã€‚\n        StartFormData startFormData = formService.getStartFormData(processDefId);\n        List<FormField> formFields = startFormData.getFormFields();\n        for (FormField formField : formFields) {\n            // è·å–æ¯ä¸ªå…·ä½“çš„è¡¨å•åŸŸ\n            System.out.println(formField.getId() + \" \" + formField.getLabel() + \" \" + formField.getValue().getValue());\n            // æ ¹æ®taskId æ‰¾åˆ°å¯¹åº”çš„æµç¨‹å˜é‡çš„å€¼ ä¹Ÿå°±æ˜¯ è¡¨å•çš„æ•°æ®\n            System.out.println(formField.getId() + \" = \" + taskService.getVariable(taskId, formField.getId()));\n        }\n    }\n```\n\n\n\n![image-20221014162117179](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221014162117179.png)\n\n### ä»»åŠ¡èŠ‚ç‚¹ç»‘å®š\n\nä¸Šçš„æ–¹å¼ç»‘å®šçš„è¡¨å•æ•°æ®åœ¨æ•´ä¸ªæµç¨‹å®ä¾‹è¿ä½œä¸­éƒ½å¯ä»¥ä½¿ç”¨ï¼Œè¿˜æœ‰ä¸€ç§æ–¹å¼æˆ‘ä»¬æ˜¯åœ¨å…·ä½“çš„ä»»åŠ¡èŠ‚ç‚¹ä¸Šç»‘å®šè¡¨å•æ•°æ®ã€‚æˆ‘ä»¬æ¥çœ‹çœ‹ã€‚\n\n![image-20221014162658765](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221014162658765.png)\n\næµç¨‹å›¾ä¸­æ˜¯åœ¨ `ç”¨æˆ·ä»»åŠ¡01` è¿™ä¸ªèŠ‚ç‚¹ç»‘å®šçš„è¡¨å•æ•°æ®äº†\n\n![image-20221014162905992](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221014162905992.png)\n\néƒ¨ç½²æµç¨‹ï¼š\n\n```java\n    /**\n     * å®Œæˆæµç¨‹çš„éƒ¨ç½²æ“ä½œ\n     */\n    @Test\n    public void deploy(){\n        Deployment deploy = repositoryService.createDeployment()\n                .name(\"è¡¨å•01\")\n                .addClasspathResource(\"flow/è¡¨å•-02.bpmn\")\n                .deploy();\n        System.out.println(\"deploy.getId() = \" + deploy.getId());\n    }\n```\n\nå¯åŠ¨ä¸€ä¸ªæµç¨‹å®ä¾‹ï¼šæ™®é€šæµç¨‹å¯åŠ¨\n\n```java\n    /**\n     * æ­£å¸¸çš„å¯åŠ¨æµç¨‹\n     */\n    @Test\n    void startFormFlow() throws Exception{\n        String processDefId = \"Process_1xf3zgp:1:11da0157-4b9a-11ed-8750-c03c59ad2248\";\n        ProcessInstance processInstance = runtimeService.startProcessInstanceById(processDefId);\n    }\n```\n\nç„¶åç°åœ¨æµç¨‹æ‰§è¡Œåˆ°äº†`ç”¨æˆ·ä»»åŠ¡01`å‡ºã€‚æˆ‘ä»¬ç»‘å®šçš„æœ‰æµç¨‹è¡¨å•ã€‚æˆ‘ä»¬å¯ä»¥æŸ¥è¯¢çœ‹çœ‹ã€‚å…ˆæ¥æŸ¥è¯¢Taskå¯¹åº”çš„è¡¨å•ä¿¡æ¯\n\n![image-20221014165547832](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221014165547832.png)\n\n```java\n    @Test\n    void getTaskFormData(){\n        String taskId = \"bff75f55-4b9a-11ed-9709-c03c59ad2248\";\n        TaskFormData taskFormData = formService.getTaskFormData(taskId);\n        List<FormField> formFields = taskFormData.getFormFields();\n        for (FormField formField : formFields) {\n            // è·å–æ¯ä¸ªå…·ä½“çš„è¡¨å•åŸŸ\n            System.out.println(formField.getId() + \" \" + formField.getLabel() + \" \" + formField.getValue().getValue());\n        }\n    }\n```\n\n![image-20221014163939776](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221014163939776.png)\n\nç„¶åå¯ä»¥ç»™è¡¨å•çš„ç›¸å…³ä¿¡æ¯èµ‹å€¼\n\n```java\n    @Test\n    void setTaskFormData(){\n        String taskId = \"bff75f55-4b9a-11ed-9709-c03c59ad2248\";\n        taskService.setVariable(taskId,\"days1\",5);\n        taskService.setVariable(taskId,\"reason1\",\"ä¸ªäººåŸå› \");\n    }\n```\n\nç„¶åå¯ä»¥çœ‹åˆ°è¡¨å•çš„ä¿¡æ¯\n\n![image-20221014165040994](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221014165040994.png)\n\n\n\n![image-20221014165131403](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221014165131403.png)\n\nå®¡æ‰¹å®Œæˆåˆ°ä¸‹ä¸€ä¸ªèŠ‚ç‚¹\n\n![image-20221014165620888](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221014165620888.png)\n\nè¿™æ—¶æˆ‘ä»¬å†æŸ¥è¯¢ä¸‹çœ‹èƒ½ä¸èƒ½æ‰¾åˆ°å¯¹åº”çš„è¡¨å•ä¿¡æ¯\n\n![image-20221014165737958](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221014165737958.png)\n\n\n\nå¥½äº†è¿™ä¸ªæ˜¯æˆ‘ä»¬è®²çš„ç›´æ¥åœ¨æµç¨‹ä¸­å†…åµŒè¡¨å•çš„åº”ç”¨\n\n\n\n## å¤–ç½®è¡¨å•\n\næˆ‘ä»¬è¿˜å¯ä»¥è‡ªå·±å®šä¹‰ä¸€ä¸ª HTML+JS çš„åŠ¨æ€è¡¨å•ï¼Œç„¶ååœ¨å®¡æ‰¹ç›¸å…³èŠ‚ç‚¹çš„æ—¶å€™æ¸²æŸ“å±•ç¤ºã€‚\n\n### å®šä¹‰ä¸€ä¸ªè¡¨å•\n\næˆ‘ä»¬å…ˆå®šä¹‰ä¸€ä¸ªç®€å•çš„è¡¨å•\n\n![image-20221015134123018](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221015134123018.png)\n\n### æµç¨‹ç»‘å®š\n\nç„¶ååœ¨æµç¨‹è®¾è®¡çš„æ—¶å€™ç»‘å®šå¯¹åº”çš„è¡¨å•\n\n![image-20221015134202377](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221015134202377.png)\n\néƒ¨ç½²æµç¨‹åå¯åŠ¨\n\n![image-20221015134234163](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221015134234163.png)\n\n![image-20221015134256088](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221015134256088.png)\n\nåœ¨è·³è½¬åçš„åœ°å€ä¸­æœ‰taskIdå’Œå›è°ƒçš„æ¥å£åœ°å€","source":"_posts/2022/10/camundaè¿›é˜¶ç¯‡.md","raw":"---\ntitle: camundaè¿›é˜¶ç¯‡\ndate: 2022-10-20 16:38:45\ntags: [BPMN,camunda]\ncategories: [ç¬”è®°]\n---\n# Camunda-çƒ­é—¨å·¥ä½œæµå¼•æ“æ¡†æ¶\n> Lectureï¼šæ³¢å“¥\n\n![image-20220902232358815](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220902232358815.png)\n\n# ProcessEngine\n\nProcessEngineæ˜¯Camundaæµç¨‹å¼•æ“çš„æ ¸å¿ƒã€‚æˆ‘ä»¬åœ¨æµç¨‹ä¸­çš„å¾ˆå¤šå…·ä½“çš„å¤„ç†æ¯”å¦‚`æµç¨‹éƒ¨ç½²`ã€`æµç¨‹éƒ¨ç½²`ã€`æµç¨‹å®¡æ‰¹`ç­‰æ“ä½œéƒ½æ˜¯é€šè¿‡`XXXService`æ¥å¤„ç†çš„ã€‚è€Œç›¸å…³çš„`XXXService`éƒ½æ˜¯é€šè¿‡`ProcessEngine`æ¥ç®¡ç†çš„ã€‚æ‰€ä»¥å¯¹äº`ProcessEngine`çš„åˆ›å»ºæ–¹å¼è¿˜æ˜¯å¾ˆæœ‰å¿…è¦æŒæ¡çš„ã€‚\n\n\n\n## é€šè¿‡xmlé…ç½®æ–¹å¼\n\né…ç½®ä½ çš„æµç¨‹å¼•æ“çš„æœ€ç®€å•çš„æ–¹æ³•æ˜¯é€šè¿‡ä¸€ä¸ªå«åš`camunda.cfg.xml`çš„XMLæ–‡ä»¶ã€‚ä½¿ç”¨è¿™ä¸ªæ–‡ä»¶ï¼Œä½ å¯ä»¥ç®€å•è¿™æ ·åš:\n\n```java\n    @Test\n    public void processEngine3(){\n        ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine();\n        System.out.println(\"processEngine = \" + processEngine);\n    }\n```\n\næˆ‘ä»¬å®šä¹‰å¦‚ä¸‹çš„`camunda.cfg.xml`æ–‡ä»¶ã€‚æ³¨æ„`camunda.cfg.xml`å¿…é¡»åŒ…å«ä¸€ä¸ªidä¸º`processEngineConfiguration`çš„bean\n\n```xml\n<beans xmlns=\"http://www.springframework.org/schema/beans\"\n       xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n       xsi:schemaLocation=\"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd\">\n\n    <bean id=\"processEngineConfiguration\" class=\"org.camunda.bpm.engine.impl.cfg.StandaloneProcessEngineConfiguration\">\n\n        <property name=\"jdbcUrl\" value=\"jdbc:h2:mem:camunda;DB_CLOSE_DELAY=1000\" />\n        <property name=\"jdbcDriver\" value=\"org.h2.Driver\" />\n        <property name=\"jdbcUsername\" value=\"sa\" />\n        <property name=\"jdbcPassword\" value=\"\" />\n\n        <property name=\"databaseSchemaUpdate\" value=\"true\" />\n\n        <property name=\"jobExecutorActivate\" value=\"false\" />\n\n        <property name=\"mailServerHost\" value=\"mail.my-corp.com\" />\n        <property name=\"mailServerPort\" value=\"5025\" />\n    </bean>\n\n</beans>\n```\n\nå¦‚æœæ²¡æœ‰æ‰¾åˆ°`camunda.cfg.xml`èµ„æºï¼Œé»˜è®¤å¼•æ“å°†æœç´¢`activiti.cfg.xml`æ–‡ä»¶ä½œä¸ºå¤‡ç”¨ã€‚å¦‚æœä¸¤è€…éƒ½ç¼ºå¤±ï¼Œå¼•æ“å°±ä¼šåœæ­¢è¿è¡Œï¼Œå¹¶æ‰“å°å‡ºå…³äºç¼ºå¤±é…ç½®èµ„æºçš„é”™è¯¯ä¿¡æ¯ã€‚\n\nè¯·æ³¨æ„ï¼Œé…ç½®XMLå®é™…ä¸Šæ˜¯ä¸€ä¸ªSpringé…ç½®ã€‚è¿™å¹¶ä¸æ„å‘³ç€Camundaå¼•æ“åªèƒ½åœ¨Springç¯å¢ƒä¸­ä½¿ç”¨ã€‚æˆ‘ä»¬åªæ˜¯åœ¨å†…éƒ¨åˆ©ç”¨Springçš„è§£æå’Œä¾èµ–æ³¨å…¥åŠŸèƒ½æ¥å»ºç«‹å¼•æ“ã€‚\n\nProcessEngineConfigurationå¯¹è±¡ä¹Ÿå¯ä»¥ä½¿ç”¨é…ç½®æ–‡ä»¶ä»¥ç¼–ç¨‹æ–¹å¼åˆ›å»ºã€‚ä¹Ÿå¯ä»¥ä½¿ç”¨ä¸åŒçš„bean idã€‚\n\n```java\nProcessEngineConfiguration.createProcessEngineConfigurationFromResourceDefault();\nProcessEngineConfiguration.createProcessEngineConfigurationFromResource(String resource);\nProcessEngineConfiguration.createProcessEngineConfigurationFromResource(String resource, String beanName);\nProcessEngineConfiguration.createProcessEngineConfigurationFromInputStream(InputStream inputStream);\nProcessEngineConfiguration.createProcessEngineConfigurationFromInputStream(InputStream inputStream, String beanName);\n```\n\n\n\n\n\n## JavaAPIæ–¹å¼\n\næˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡åˆ›å»ºæ­£ç¡®çš„ProcessEngineConfigurationå¯¹è±¡æˆ–ä½¿ç”¨ä¸€äº›é¢„å®šä¹‰çš„å¯¹è±¡ï¼Œä»¥ç¼–ç¨‹æ–¹å¼é…ç½®æµç¨‹å¼•æ“ã€‚\n\n```java\nProcessEngineConfiguration.createStandaloneProcessEngineConfiguration();\nProcessEngineConfiguration.createStandaloneInMemProcessEngineConfiguration();\n```\n\n- `org.camunda.bpm.engine.impl.cfg.StandaloneProcessEngineConfiguration`\n  æµç¨‹å¼•æ“æ˜¯ä»¥ç‹¬ç«‹çš„æ–¹å¼ä½¿ç”¨çš„ã€‚å¼•æ“æœ¬èº«å°†è´Ÿè´£å¤„ç†äº‹åŠ¡ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œåªæœ‰åœ¨å¼•æ“å¯åŠ¨æ—¶æ‰ä¼šæ£€æŸ¥æ•°æ®åº“ï¼ˆå¦‚æœæ²¡æœ‰æ•°æ®åº“æ¨¡å¼æˆ–æ¨¡å¼ç‰ˆæœ¬ä¸æ­£ç¡®ï¼Œä¼šæŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ï¼‰ã€‚\n- `org.camunda.bpm.engine.impl.cfg.StandaloneInMemProcessEngineConfiguration`\n  è¿™æ˜¯ä¸€ä¸ªç”¨äºå•å…ƒæµ‹è¯•çš„å·¥å…·ç±»ã€‚å¼•æ“æœ¬èº«å°†è´Ÿè´£å¤„ç†äº‹åŠ¡ã€‚é»˜è®¤ä½¿ç”¨H2å†…å­˜æ•°æ®åº“ã€‚è¯¥æ•°æ®åº“å°†åœ¨å¼•æ“å¯åŠ¨å’Œå…³é—­æ—¶è¢«åˆ›å»ºå’Œåˆ é™¤ã€‚å½“ä½¿ç”¨è¿™ä¸ªæ—¶ï¼Œå¯èƒ½ä¸éœ€è¦é¢å¤–çš„é…ç½®ï¼ˆé™¤äº†ï¼Œå½“ä½¿ç”¨Jobæ‰§è¡Œå™¨ï¼ˆjob executorï¼‰æˆ–é‚®ä»¶åŠŸèƒ½æ—¶ï¼‰ã€‚\n- `org.camunda.bpm.engine.spring.SpringProcessEngineConfiguration`\n  å½“æµç¨‹å¼•æ“è¢«ç”¨äºSpringç¯å¢ƒæ—¶ä½¿ç”¨ã€‚\n\n\n\n```java\n    @Test\n    public void processEngine1(){\n        ProcessEngineConfigurationImpl cfg = new StandaloneProcessEngineConfiguration()\n                .setJdbcUrl(\"jdbc:mysql://localhost:3306/camunda1?serverTimezone=UTC\")\n                .setJdbcUsername(\"root\")\n                .setJdbcPassword(\"123456\")\n                .setJdbcDriver(\"com.mysql.cj.jdbc.Driver\")\n                .setDatabaseSchemaUpdate(ProcessEngineConfiguration.DB_SCHEMA_UPDATE_FALSE)\n                .setHistory(\"full\");\n        ProcessEngine processEngine = cfg.buildProcessEngine();\n        System.out.println(\"processEngine = \" + processEngine);\n    }\n\n   @Test\n    public void processEngine2(){\n        ProcessEngineConfiguration cfg = ProcessEngineConfiguration.createStandaloneProcessEngineConfiguration();\n        cfg.setJdbcUrl(\"jdbc:mysql://localhost:3306/camunda2?serverTimezone=UTC\")\n                .setJdbcUsername(\"root\")\n                .setJdbcPassword(\"123456\")\n                .setJdbcDriver(\"com.mysql.cj.jdbc.Driver\")\n                .setDatabaseSchemaUpdate(ProcessEngineConfiguration.DB_SCHEMA_UPDATE_FALSE)\n                .setHistory(\"full\");\n\n        ProcessEngine processEngine = cfg.buildProcessEngine();\n        System.out.println(\"processEngine = \" + processEngine);\n    }\n```\n\n\n\n## SpringBooté¡¹ç›®\n\nåœ¨SpringBooté¡¹ç›®ä¼šæ ¹æ®æˆ‘ä»¬å¯¼å…¥çš„ä¾èµ–å®Œæˆè‡ªåŠ¨è£…é…ï¼Œä»è€Œå®ŒæˆProcessEngineçš„è‡ªåŠ¨æ³¨å…¥ã€‚æˆ‘ä»¬å¯ä»¥æ¥åˆ†æä¸‹æºç ã€‚\n\n![image-20220911234908597](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220911234908597.png)\n\næˆ‘ä»¬éœ€è¦æ³¨æ„å¯¹äºCamundaçš„ç›¸å…³é…ç½®ã€‚æˆ‘ä»¬å¯ä»¥åœ¨application.yml ä¸­é…ç½®ã€‚åŸå› æ˜¯ CamundaBpmPropertiesçš„å¤„ç†ã€‚ç„¶åå°±æ˜¯ @Import(CamundaBpmConfiguration.class) ã€‚ åœ¨CamundaBpmConfigurationä¼šå®Œæˆç›¸å…³çš„ ProcessEngineConfiguration çš„ç›¸å…³æ³¨å…¥ã€‚\n\n![image-20220911234945653](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220911234945653.png)\n\n![image-20220911235223373](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220911235223373.png)\n\n\n\nè¿™å—æ„Ÿå…´è¶£çš„å°ä¼™ä¼´å¯ä»¥ä»”ç»†é˜…è¯»ä¸‹ã€‚\n\n\n\n## Service API\n\nJava APIæ˜¯ä¸å¼•æ“äº’åŠ¨çš„æœ€å¸¸è§æ–¹å¼ã€‚ä¸­å¿ƒèµ·ç‚¹æ˜¯`ProcessEngine`ï¼Œå®ƒå¯ä»¥é€šè¿‡å‡ ç§æ–¹å¼åˆ›å»ºï¼Œå¦‚é…ç½®éƒ¨åˆ†æ‰€è¿°ã€‚ä»ProcessEngineä¸­ï¼Œä½ å¯ä»¥è·å¾—åŒ…å«å·¥ä½œæµ/BPMæ–¹æ³•çš„å„ç§æœåŠ¡ã€‚`ProcessEngine`å’Œ`æœåŠ¡å¯¹è±¡`æ˜¯`çº¿ç¨‹å®‰å…¨`çš„ã€‚æ‰€ä»¥ä½ å¯ä»¥ä¸ºæ•´ä¸ªæœåŠ¡å™¨ä¿ç•™å¯¹å…¶ä¸­ä¸€ä¸ªå¯¹è±¡çš„å¼•ç”¨.\n\n![img](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/api.services.png)\n\n\n\n\n\n```java\nProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine();\n\nRepositoryService repositoryService = processEngine.getRepositoryService();\nRuntimeService runtimeService = processEngine.getRuntimeService();\nTaskService taskService = processEngine.getTaskService();\nIdentityService identityService = processEngine.getIdentityService();\nFormService formService = processEngine.getFormService();\nHistoryService historyService = processEngine.getHistoryService();\nManagementService managementService = processEngine.getManagementService();\nFilterService filterService = processEngine.getFilterService();\nExternalTaskService externalTaskService = processEngine.getExternalTaskService();\nCaseService caseService = processEngine.getCaseService();\nDecisionService decisionService = processEngine.getDecisionService();\n```\n\n**æ³¨æ„**ï¼šæ‰€æœ‰çš„æœåŠ¡éƒ½æ˜¯`æ— çŠ¶æ€çš„`ã€‚è¿™æ„å‘³ç€ä½ å¯ä»¥å¾ˆå®¹æ˜“åœ°åœ¨ä¸€ä¸ªé›†ç¾¤çš„å¤šä¸ªèŠ‚ç‚¹ä¸Šè¿è¡ŒCamundaå¹³å°ï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½å»åŒä¸€ä¸ªæ•°æ®åº“ï¼Œè€Œä¸å¿…æ‹…å¿ƒå“ªä¸ªæœºå™¨å®é™…æ‰§è¡Œäº†ä»¥å‰çš„è°ƒç”¨ã€‚å¯¹ä»»ä½•æœåŠ¡çš„ä»»ä½•è°ƒç”¨éƒ½æ˜¯æ— çŠ¶æ€çš„ï¼Œæ— è®ºå®ƒåœ¨å“ªé‡Œæ‰§è¡Œã€‚\n\næ¯ä¸ªæœåŠ¡çš„ç®€å•ä»‹ç»\n\n| æœåŠ¡åç§°                             | ä»‹ç»                                                         |\n| ------------------------------------ | ------------------------------------------------------------ |\n| ä»“åº“æœåŠ¡**RepositoryService**        | æä¾›äº†ç®¡ç†å’Œæ“çºµéƒ¨ç½²å’Œæµç¨‹å®šä¹‰çš„æ“ä½œ                         |\n| è¿è¡Œæ—¶æœåŠ¡-**RuntimeService**        | é¦–å…ˆå¯ä»¥é€šè¿‡ä¸€ä¸ªæµç¨‹å®šä¹‰å¯åŠ¨å¤šä¸ªæµç¨‹å®ä¾‹ã€‚ä¹Ÿèƒ½ç”¨äºå¤„ç†æ£€ç´¢å’Œå­˜å‚¨æµç¨‹å˜é‡çš„æœåŠ¡ |\n| ä»»åŠ¡æœåŠ¡-**TaskService**             | å›´ç»•ç”¨æˆ·å®¡æ‰¹æ“ä½œçš„ä¸€åˆ‡éƒ½ä¼šè¢«å½’çº³åˆ°TaskServiceã€‚æ¯”å¦‚ï¼šæŸ¥è¯¢åˆ†é…ç»™ç”¨æˆ·æˆ–ç»„çš„ä»»åŠ¡ï¼Œåˆ›å»ºæ–°çš„ç‹¬ç«‹ä»»åŠ¡ã€‚è¿™äº›æ˜¯ä¸æµç¨‹å®ä¾‹æ— å…³çš„ä»»åŠ¡ï¼Œæ“çºµä¸€ä¸ªä»»åŠ¡è¢«åˆ†é…ç»™å“ªä¸ªç”¨æˆ·ï¼Œæˆ–è€…å“ªä¸ªç”¨æˆ·ä»¥æŸç§æ–¹å¼å‚ä¸åˆ°ä»»åŠ¡ä¸­ï¼Œå£°ç§°å¹¶å®Œæˆä¸€é¡¹ä»»åŠ¡ã€‚å£°ç§°æ„å‘³ç€æœ‰äººå†³å®šæˆä¸ºè¯¥ä»»åŠ¡çš„å—è®©äººï¼Œæ„å‘³ç€è¿™ä¸ªç”¨æˆ·å°†å®Œæˆè¯¥ä»»åŠ¡ã€‚å®Œæˆæ„å‘³ç€ â€œå®Œæˆä»»åŠ¡çš„å·¥ä½œâ€ç­‰ |\n| èº«ä»½æœåŠ¡-**IdentityService**         | æ˜¯éå¸¸ç®€å•çš„ã€‚å®ƒå…è®¸å¯¹ç»„å’Œç”¨æˆ·è¿›è¡Œç®¡ç†ï¼ˆåˆ›å»ºã€æ›´æ–°ã€åˆ é™¤ã€æŸ¥è¯¢â€¦ï¼‰ã€‚é‡è¦çš„æ˜¯è¦ç†è§£ï¼Œæ ¸å¿ƒå¼•æ“å®é™…ä¸Šåœ¨è¿è¡Œæ—¶å¹¶ä¸å¯¹ç”¨æˆ·è¿›è¡Œä»»ä½•æ£€æŸ¥ |\n| è¡¨å•æœåŠ¡-**FormService**             | ä¸€ä¸ªå¯é€‰çš„æœåŠ¡ã€‚æä¾›äº†è¡¨å•åŠŸèƒ½                               |\n| å†å²æœåŠ¡-**HistoryService**          | æš´éœ²äº†å¼•æ“æ”¶é›†çš„æ‰€æœ‰å†å²æ•°æ®ã€‚å½“æ‰§è¡Œæµç¨‹æ—¶ï¼Œå¼•æ“å¯ä»¥ä¿ç•™å¾ˆå¤šæ•°æ®ï¼ˆè¿™æ˜¯å¯é…ç½®çš„ï¼‰ï¼Œå¦‚æµç¨‹å®ä¾‹çš„å¼€å§‹æ—¶é—´ã€è°åšäº†å“ªäº›ä»»åŠ¡ã€å®Œæˆä»»åŠ¡èŠ±äº†å¤šé•¿æ—¶é—´ã€æ¯ä¸ªæµç¨‹å®ä¾‹éµå¾ªçš„è·¯å¾„ç­‰ã€‚è¯¥æœåŠ¡ä¸»è¦æš´éœ²äº†è®¿é—®è¿™äº›æ•°æ®çš„æŸ¥è¯¢åŠŸèƒ½ã€‚ |\n| ç®¡ç†æœåŠ¡-**ManagementService**       | å®ƒå…è®¸æ£€ç´¢å…³äºæ•°æ®åº“è¡¨å’Œè¡¨å…ƒæ•°æ®çš„ä¿¡æ¯ã€‚æ­¤å¤–ï¼Œå®ƒæš´éœ²äº†æŸ¥è¯¢åŠŸèƒ½å’ŒJobçš„ç®¡ç†æ“ä½œã€‚Jobåœ¨å¼•æ“ä¸­è¢«ç”¨äºå„ç§äº‹æƒ…ï¼Œå¦‚å®šæ—¶å™¨ã€å¼‚æ­¥å»¶ç»­ã€å»¶è¿Ÿæš‚åœ/æ¿€æ´»ç­‰ã€‚ |\n| è¿‡æ»¤å™¨æœåŠ¡-**FilterService**         | å…è®¸åˆ›å»ºå’Œç®¡ç†è¿‡æ»¤å™¨ã€‚è¿‡æ»¤å™¨æ˜¯åƒä»»åŠ¡æŸ¥è¯¢ä¸€æ ·çš„å­˜å‚¨æŸ¥è¯¢ã€‚ä¾‹å¦‚ï¼Œè¿‡æ»¤å™¨è¢«ä»»åŠ¡åˆ—è¡¨ç”¨æ¥è¿‡æ»¤ç”¨æˆ·ä»»åŠ¡ |\n| å¤–éƒ¨ä»»åŠ¡æœåŠ¡-**ExternalTaskService** | æä¾›å¯¹å¤–éƒ¨ä»»åŠ¡å®ä¾‹çš„è®¿é—®ã€‚å¤–éƒ¨ä»»åŠ¡ä»£è¡¨åœ¨å¤–éƒ¨å¤„ç†çš„å·¥ä½œé¡¹ç›®ï¼Œç‹¬ç«‹äºæµç¨‹å¼•æ“ã€‚ |\n| æ¡ˆä¾‹æœåŠ¡-**CaseService**             | ä¸è¿è¡Œæ—¶æœåŠ¡ï¼ˆ**RuntimeService**ï¼‰ç±»ä¼¼ï¼Œä½†ç”¨äºæ¡ˆä¾‹å®ä¾‹ã€‚å®ƒå¤„ç†å¯åŠ¨æ¡ˆä¾‹å®šä¹‰çš„æ–°æ¡ˆä¾‹å®ä¾‹å¹¶ç®¡ç†æ¡ˆä¾‹æ‰§è¡Œçš„ç”Ÿå‘½å‘¨æœŸã€‚è¯¥æœåŠ¡ä¹Ÿè¢«ç”¨æ¥æ£€ç´¢å’Œæ›´æ–°æ¡ˆä¾‹å®ä¾‹çš„æµç¨‹å˜é‡ã€‚ |\n| å†³ç­–æœåŠ¡-**DecisionService**         | å…è®¸è¯„ä¼°éƒ¨ç½²åœ¨å¼•æ“ä¸­çš„å†³ç­–ã€‚å®ƒæ˜¯è¯„ä¼°ç‹¬ç«‹äºæµç¨‹å®šä¹‰çš„ä¸šåŠ¡è§„åˆ™ä»»åŠ¡ä¸­çš„å†³ç­–çš„ä¸€ç§é€‰æ‹©ã€‚ |\n\n\n\n\n\n# ä»»åŠ¡åˆ†é…\n\n## å›ºå®šåˆ†é…\n\nåœ¨æŒ‡æ´¾`ç”¨æˆ·ä»»åŠ¡`çš„å®¡æ‰¹äººæ—¶ã€‚æˆ‘ä»¬æ˜¯ç›´æ¥æŒ‡æ´¾çš„å›ºå®šè´¦å·ã€‚ä½†æ˜¯ä¸ºäº†ä¿è¯æµç¨‹è®¾è®¡å®¡æ‰¹çš„çµæ´»æ€§ã€‚æˆ‘ä»¬éœ€è¦å„ç§ä¸åŒçš„åˆ†é…æ–¹å¼ï¼Œæ‰€ä»¥è¿™èŠ‚æˆ‘ä»¬å°±è¯¦ç»†çš„æ¥ä»‹ç»å…ˆåœ¨Camundaä¸­æˆ‘ä»¬å¯ä»¥ä½¿ç”¨çš„ç›¸å…³çš„åˆ†é…æ–¹å¼\n\n\n\nå›ºå®šåˆ†é…å°±æ˜¯æˆ‘ä»¬å‰é¢ä»‹ç»çš„ï¼Œåœ¨ç»˜åˆ¶æµç¨‹å›¾æˆ–è€…ç›´æ¥åœ¨æµç¨‹æ–‡ä»¶ä¸­é€šè¿‡Assigneeæ¥æŒ‡å®šçš„æ–¹å¼.\n\n![image-20220912003431387](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220912003431387.png)\n\n\n\nè¿™ç§æ–¹å¼å°±éå¸¸ç®€å•ã€‚ä¸å†è¿‡å¤šèµ˜è¿°ã€‚\n\n\n\n## å€¼è¡¨è¾¾å¼\n\n**å€¼è¡¨è¾¾å¼ Value expression**: è§£æä¸ºä¸€ä¸ªå€¼ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œæ‰€æœ‰æµç¨‹å˜é‡éƒ½å¯ä»¥ä½¿ç”¨ã€‚ï¼ˆè‹¥ä½¿ç”¨Springï¼‰æ‰€æœ‰çš„Spring beanä¹Ÿå¯ä»¥ç”¨åœ¨è¡¨è¾¾å¼é‡Œã€‚ä¾‹å¦‚:\n\n```java\n${myVar}\n${myBean.myProperty}\n```\n\n![image-20220912003628341](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220912003628341.png)\n\n\n\nç„¶åå¯ä»¥æ¼”ç¤ºä¸‹è¿™ä¸ªæ¡ˆä¾‹ï¼Œå…ˆéƒ¨ç½²è¯¥æµç¨‹ã€‚\n\n```java\n    /**\n     * å®Œæˆæµç¨‹çš„éƒ¨ç½²æ“ä½œ\n     */\n    @Test\n    public void deploy(){\n        Deployment deploy = repositoryService.createDeployment()\n                .name(\"è¯·å‡æµç¨‹\")\n                .addClasspathResource(\"flow/1-01-ä»»åŠ¡åˆ†é….bpmn\")\n                .deploy();\n        System.out.println(\"deploy.getId() = \" + deploy.getId());\n    }\n```\n\nç„¶ååœ¨å¯åŠ¨æµç¨‹å®ä¾‹ã€‚å¯åŠ¨æµç¨‹å®ä¾‹åä¼šè¿›å…¥åˆ°`äººäº‹å®¡æ‰¹`è¿™ä¸ªèŠ‚ç‚¹ï¼Œæœ‰`å€¼è¡¨è¾¾å¼`çš„å­˜åœ¨ï¼Œæˆ‘ä»¬éœ€è¦åœ¨å¯åŠ¨çš„è¿‡ç¨‹ä¸­å°±ç»™å…¶èµ‹å€¼ã€‚\n\n![image-20220912004447956](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220912004447956.png)\n\nç»‘å®šæµç¨‹å˜é‡çš„æ“ä½œ\n\n```java\n    /**\n     * å¯åŠ¨æµç¨‹å®ä¾‹\n     */\n    @Test\n    public void startFlow(){\n        String processInstanceId = \"Process_0uiy3j1:1:712d273a-31f0-11ed-9e27-c03c59ad2248\";\n        // å®šä¹‰ä¸€ä¸ªMapé›†åˆï¼Œå­˜å‚¨ç›¸å…³çš„æµç¨‹å˜é‡ä¿¡æ¯\n        Map<String,Object> map = new HashMap<>();\n        map.put(\"user1\",\"demo\");\n        // é€šè¿‡ RuntimeService å¯åŠ¨ä¸€ä¸ªæµç¨‹å®ä¾‹ï¼ŒåŒæ—¶ç»‘å®šäº†å¯¹åº”çš„æµç¨‹å˜é‡ä¿¡æ¯\n        runtimeService.startProcessInstanceById(processInstanceId,map);\n    }\n```\n\né€šè¿‡åå°æŸ¥çœ‹æ•°æ®æˆ‘ä»¬å¯ä»¥å‘ç°`act_ru_task`ä¸­æœ‰äº†ä¸€æ¡`äººäº‹å®¡æ‰¹`çš„ä»»åŠ¡ï¼Œè€Œä¸”å¯¹äºçš„å®¡æ‰¹äººå°±æ˜¯`demo`ä¹Ÿå°±æ˜¯æˆ‘ä»¬ç»™å¯¹åº”çš„æµç¨‹å˜é‡çš„èµ‹å€¼\n\n![image-20220912004819089](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220912004819089.png)\n\nè€Œå¯¹åº”çš„æµç¨‹å˜é‡ä¿¡æ¯å­˜å‚¨åœ¨`act_ru_variable`ä¸­ã€‚\n\n![image-20220912004949936](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220912004949936.png)\n\n\n\n## æ–¹æ³•è¡¨è¾¾å¼\n\n**æ–¹æ³•è¡¨è¾¾å¼ Method expression**: è°ƒç”¨ä¸€ä¸ªæ–¹æ³•ï¼Œå¯ä»¥å¸¦æˆ–ä¸å¸¦å‚æ•°ã€‚**å½“è°ƒç”¨ä¸å¸¦å‚æ•°çš„æ–¹æ³•æ—¶ï¼Œè¦ç¡®ä¿åœ¨æ–¹æ³•ååæ·»åŠ ç©ºæ‹¬å·ï¼ˆä»¥é¿å…ä¸å€¼è¡¨è¾¾å¼æ··æ·†ï¼‰ã€‚**ä¼ é€’çš„å‚æ•°å¯ä»¥æ˜¯å­—é¢å€¼(literal value)ï¼Œä¹Ÿå¯ä»¥æ˜¯è¡¨è¾¾å¼ï¼Œå®ƒä»¬ä¼šè¢«è‡ªåŠ¨è§£æã€‚ä¾‹å¦‚ï¼š boge3306\n\n```java\n${printer.print()}\n${myBean.getAssignee()}\n${myBean.addNewOrder('orderName')}\n${myBean.doSomething(myVar, execution)}\n```\n\nmyBeanæ˜¯Springå®¹å™¨ä¸­çš„ä¸ªBeanå¯¹è±¡ï¼Œè¡¨ç¤ºè°ƒç”¨çš„æ˜¯beançš„addNewOrderæ–¹æ³•.æˆ‘ä»¬é€šè¿‡æ¡ˆä¾‹æ¥æ¼”ç¤ºä¸‹ã€‚æˆ‘ä»¬å…ˆå®šä¹‰å¯¹åº”çš„Service\n\n```java\n@Service\npublic class MyBean {\n\n    public String getAssignee(){\n        System.out.println(\"getAssignee æ–¹æ³•æ‰§è¡Œäº†....\");\n        return \"demo\";\n    }\n}\n```\n\nç„¶åæˆ‘ä»¬åœ¨å¯¹åº”çš„æµç¨‹å›¾ä¸­æ¥å®šä¹‰ã€‚\n\n![image-20220912005546442](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220912005546442.png)\n\n\n\nç„¶åé€šè¿‡éƒ¨ç½²å¯åŠ¨æ“ä½œæ¥çœ‹çœ‹ã€‚\n\n![image-20220912010330601](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220912010330601.png)\n\n![image-20220912010405626](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220912010405626.png)\n\né€šè¿‡è¿™å—çš„æ¼”ç¤ºï¼Œæˆ‘ä»¬å°±å¯ä»¥åŸºäºæˆ‘ä»¬çš„å¤–éƒ¨æ¡ä»¶æ¥ç»“åˆæˆ‘ä»¬çš„é€»è¾‘å®ç°åŠ¨æ€çš„æ¥æŒ‡å®šå¯¹åº”çš„å¤„ç†äººã€‚\n\n\n\n## ç›‘å¬å™¨é…ç½®\n\nå¯ä»¥ä½¿ç”¨ç›‘å¬å™¨æ¥å®Œæˆå¾ˆå¤šCamundaçš„æµç¨‹ä¸šåŠ¡ã€‚æˆ‘ä»¬åœ¨æ­¤å¤„ä½¿ç”¨ç›‘å¬å™¨æ¥å®Œæˆè´Ÿè´£äººçš„æŒ‡å®šï¼Œé‚£ä¹ˆæˆ‘ä»¬åœ¨æµç¨‹è®¾è®¡çš„æ—¶å€™å°±ä¸éœ€è¦æŒ‡å®šassigneeã€‚åˆ›å»ºè‡ªå®šä¹‰ç›‘å¬å™¨ï¼š\n\n```java\n/**\n * è‡ªå®šä¹‰çš„ä¸€ä¸ª Task ç›‘å¬å™¨\n * æˆ‘ä»¬éœ€è¦åœ¨ç›‘å¬å™¨ä¸­å®Œæˆ å¤„ç†äººçš„åŠ¨æ€æŒ‡æ´¾\n */\npublic class MyFirstTaskListener implements TaskListener {\n    @Override\n    public void notify(DelegateTask delegateTask) {\n        System.out.println(\"MyFirstTaskListener --- > æ‰§è¡Œäº†\");\n        // é’ˆå¯¹ æ˜¯åˆ›å»ºTaskèŠ‚ç‚¹çš„äº‹ä»¶\n        if(EVENTNAME_CREATE.equals(delegateTask.getEventName())){\n            // æŒ‡æ´¾å¯¹åº”çš„å¤„ç†äºº\n            delegateTask.setAssignee(\"demo\");\n        }\n    }\n}\n```\n\nç„¶ååœ¨æµç¨‹å›¾ä¸­ç»‘å®šå¯¹åº”çš„ç›‘å¬å™¨\n\n![image-20220912011453664](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220912011453664.png)\n\nç„¶åæˆ‘ä»¬éƒ¨ç½²å’Œå¯åŠ¨æµç¨‹åï¼Œå¯ä»¥çœ‹åˆ°å¯¹åº”çš„è§¦å‘æ•ˆæœ\n\n![image-20220912011644311](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220912011644311.png)\n\nè¡¨ç»“æ„ä¸­ä¹Ÿå¯ä»¥çœ‹åˆ°ç›¸å…³çš„ä¿¡æ¯\n\n![image-20220912011735815](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220912011735815.png)\n\nè¯´æ˜è¿™å—çš„å¤„ç†æ˜¯å®Œå…¨å¯è¡Œçš„ã€‚\n\n\n\n# æµç¨‹å˜é‡\n\næµç¨‹å˜é‡å¯ä»¥ç”¨å°†æ•°æ®æ·»åŠ åˆ°æµç¨‹çš„è¿è¡Œæ—¶çŠ¶æ€ä¸­ï¼Œæˆ–è€…æ›´å…·ä½“åœ°è¯´ï¼Œå˜é‡ä½œç”¨åŸŸä¸­ã€‚æ”¹å˜å®ä½“çš„å„ç§APIå¯ä»¥ç”¨æ¥æ›´æ–°è¿™äº›é™„åŠ çš„å˜é‡ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œä¸€ä¸ªå˜é‡ç”±ä¸€ä¸ªåç§°å’Œä¸€ä¸ªå€¼ç»„æˆã€‚åç§°ç”¨äºåœ¨æ•´ä¸ªæµç¨‹ä¸­è¯†åˆ«å˜é‡ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä¸€ä¸ªæ´»åŠ¨ï¼ˆactivityï¼‰è®¾ç½®äº†ä¸€ä¸ªåä¸º *var* çš„å˜é‡ï¼Œé‚£ä¹ˆåç»­æ´»åŠ¨ä¸­å¯ä»¥é€šè¿‡ä½¿ç”¨è¿™ä¸ªåç§°æ¥è®¿é—®å®ƒã€‚å˜é‡çš„å€¼æ˜¯ä¸€ä¸ª Java å¯¹è±¡ã€‚\n\n## è¿è¡Œæ—¶å˜é‡\n\næµç¨‹å®ä¾‹è¿è¡Œæ—¶çš„å˜é‡ï¼Œå­˜å…¥act_ru_variableè¡¨ä¸­ã€‚åœ¨æµç¨‹å®ä¾‹è¿è¡Œç»“æŸæ—¶ï¼Œæ­¤å®ä¾‹çš„å˜é‡åœ¨è¡¨ä¸­åˆ é™¤ã€‚åœ¨æµç¨‹å®ä¾‹åˆ›å»ºåŠå¯åŠ¨æ—¶ï¼Œå¯è®¾ç½®æµç¨‹å˜é‡ã€‚æ‰€æœ‰çš„`startProcessInstanceXXX`æ–¹æ³•éƒ½æœ‰ä¸€ä¸ªå¯é€‰å‚æ•°ç”¨äºè®¾ç½®å˜é‡ã€‚ä¾‹å¦‚ï¼Œ`RuntimeService`ä¸­\n\n```java\nProcessInstance startProcessInstanceById(String processDefinitionId, Map<String, Object> variables);\n```\n\nä¹Ÿå¯ä»¥åœ¨æµç¨‹æ‰§è¡Œä¸­åŠ å…¥å˜é‡ã€‚ä¾‹å¦‚ï¼Œ(*RuntimeService*):\n\n```java\n    void setVariable(String executionId, String variableName, Object value);\n    void setVariableLocal(String executionId, String variableName, Object value);\n    void setVariables(String executionId, Map<String, ? extends Object> variables);\n    void setVariablesLocal(String executionId, Map<String, ? extends Object> variables);\n```\n\nè¯»å–å˜é‡æ–¹æ³•:\n\n```java\n    Map<String, Object> getVariables(String executionId);\n    Map<String, Object> getVariablesLocal(String executionId);\n    Map<String, Object> getVariables(String executionId, Collection<String> variableNames);\n    Map<String, Object> getVariablesLocal(String executionId, Collection<String> variableNames);\n    Object getVariable(String executionId, String variableName);\n    <T> T getVariable(String executionId, String variableName, Class<T> variableClass);\n```\n\n**æ³¨æ„**ï¼šç”±äºæµç¨‹å®ä¾‹ç»“æŸæ—¶ï¼Œå¯¹åº”åœ¨è¿è¡Œæ—¶è¡¨çš„æ•°æ®è·Ÿç€è¢«åˆ é™¤ã€‚æ‰€ä»¥æŸ¥è¯¢ä¸€ä¸ªå·²ç»å®Œç»“æµç¨‹å®ä¾‹çš„å˜é‡ï¼Œåªèƒ½åœ¨å†å²å˜é‡è¡¨ä¸­æŸ¥æ‰¾ã€‚\n\nå½“ç„¶è¿è¡Œæ—¶å˜é‡æˆ‘ä»¬ä¹Ÿå¯ä»¥æ ¹æ®å¯¹åº”çš„ä½œç”¨åŸŸæŠŠä»–åˆ†ä¸º`å…¨å±€å˜é‡`å’Œ`å±€éƒ¨å˜é‡`.\n\n### å…¨å±€å˜é‡\n\næµç¨‹å˜é‡çš„é»˜è®¤ä½œç”¨åŸŸæ˜¯æµç¨‹å®ä¾‹ã€‚å½“ä¸€ä¸ªæµç¨‹å˜é‡çš„ä½œç”¨åŸŸä¸ºæµç¨‹å®ä¾‹æ—¶ï¼Œå¯ä»¥ç§°ä¸º global å˜é‡\n\næ³¨æ„ï¼šå¦‚ï¼š    Globalå˜é‡ï¼šuserIdï¼ˆå˜é‡åï¼‰ã€zhangsanï¼ˆå˜é‡å€¼ï¼‰\n\nglobal å˜é‡ä¸­å˜é‡åä¸å…è®¸é‡å¤ï¼Œè®¾ç½®ç›¸åŒåç§°çš„å˜é‡ï¼Œåè®¾ç½®çš„å€¼ä¼šè¦†ç›–å‰è®¾ç½®çš„å˜é‡å€¼ã€‚\n\næ¡ˆä¾‹ï¼š\n\nå®šä¹‰ç›‘å¬å™¨\n\n```java\npublic class MySecondListener implements TaskListener {\n\n    @Override\n    public void notify(DelegateTask delegateTask) {\n        // è·å–æ‰€æœ‰çš„æµç¨‹å˜é‡\n        Map<String, Object> variables = delegateTask.getVariables();\n        Set<String> keys = variables.keySet();\n        for (String key : keys) {\n            Object obj = variables.get(key);\n            System.out.println(key + \" = \" + obj);\n            if(obj instanceof  String){\n              // ä¿®æ”¹ æµç¨‹å˜é‡çš„ä¿¡æ¯\n              // variables.put(key,obj + \":boge3306\"); ç›´æ¥ä¿®æ”¹Mapä¸­çš„æ•°æ® è¾¾ä¸åˆ°ä¿®æ”¹æµç¨‹å˜é‡çš„æ•ˆæœ\n              delegateTask.setVariable(key,obj + \":boge3306\");\n            }\n        }\n    }\n}\n```\n\nè®¾è®¡æµç¨‹\n\n![image-20220913011512486](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220913011512486.png)\n\n\n\næ¡ˆä¾‹ä»£ç ï¼š\n\n```java\n@SpringBootTest(classes = Application.class)\npublic class AssigneeTaskTest {\n\n    @Autowired\n    RepositoryService repositoryService;\n\n    @Autowired\n    RuntimeService runtimeService;\n\n\n    @Autowired\n    TaskService taskService;\n\n    /**\n     * éƒ¨ç½²æµç¨‹\n     */\n    @Test\n    public void deployFlow(){\n        Deployment deploy = repositoryService.createDeployment()\n                .name(\"è¯·å‡æµç¨‹-ç›‘å¬å™¨\")\n                .addClasspathResource(\"flow/04-ä»»åŠ¡åˆ†é…-ç›‘å¬å™¨åˆ†é….bpmn\")\n                .deploy();\n        System.out.println(\"deploy.getId() = \" + deploy.getId());\n    }\n\n    /**\n     * å¯åŠ¨æµç¨‹å®ä¾‹\n     */\n    @Test\n    public void startFlow(){\n        String processDefId = \"Process_08kf7mp:1:d154c0f5-326d-11ed-841a-c03c59ad2248\";\n        ProcessInstance processInstance = runtimeService.startProcessInstanceById(processDefId);\n        System.out.println(\"processInstance.getId() = \" + processInstance.getId());\n    }\n\n    /**\n     * å¯åŠ¨æµç¨‹å®ä¾‹ï¼Œç»‘å®šå¯¹åº”çš„æµç¨‹å˜é‡\n     */\n    @Test\n    public void startFlowVariables(){\n        String processDefId = \"Process_1t425hs:1:539f152d-326a-11ed-ab57-c03c59ad2248\";\n        // å£°æ˜ä¸€ä¸ª Map é›†åˆ\n        Map<String,Object> map = new HashMap<>();\n        map.put(\"user1\",\"demo\");\n        // å¯åŠ¨æµç¨‹å®ä¾‹ï¼ŒåŒæ—¶ç»‘å®šå¯¹åº”çš„æµç¨‹å˜é‡ä¿¡æ¯\n        ProcessInstance processInstance = runtimeService.startProcessInstanceById(processDefId,map);\n\n        System.out.println(\"processInstance.getId() = \" + processInstance.getId());\n    }\n\n    /**\n     * æµç¨‹å®¡æ‰¹\n     */\n    @Test\n    public void completeTask(){\n        taskService.complete(\"29a0614c-3267-11ed-a030-c03c59ad2248\");\n    }\n\n    /**\n     * æµç¨‹å®¡æ‰¹\n     *    åŒæ ·éœ€è¦ç»‘å®šå¯¹åº”çš„æµç¨‹å˜é‡çš„å€¼\n     */\n    @Test\n    public void completeTaskVariables(){\n        // å£°æ˜ä¸€ä¸ª Map é›†åˆ\n        Map<String,Object> map = new HashMap<>();\n        map.put(\"user2\",\"demo\");\n        taskService.complete(\"dd013840-326a-11ed-b589-c03c59ad2248\",map);\n    }\n}\n```\n\n\n\n\n\n### å±€éƒ¨å˜é‡\n\nä»»åŠ¡å’Œæ‰§è¡Œå®ä¾‹ä»…ä»…æ˜¯é’ˆå¯¹ä¸€ä¸ªä»»åŠ¡å’Œä¸€ä¸ªæ‰§è¡Œå®ä¾‹èŒƒå›´ï¼ŒèŒƒå›´æ²¡æœ‰æµç¨‹å®ä¾‹å¤§ï¼Œ ç§°ä¸º local å˜é‡ã€‚\n\nLocal å˜é‡ç”±äºåœ¨ä¸åŒçš„ä»»åŠ¡æˆ–ä¸åŒçš„æ‰§è¡Œå®ä¾‹ä¸­ï¼Œä½œç”¨åŸŸäº’ä¸å½±å“ï¼Œå˜é‡åå¯ä»¥ç›¸åŒæ²¡æœ‰å½±å“ã€‚Local å˜é‡åä¹Ÿå¯ä»¥å’Œ global å˜é‡åç›¸åŒï¼Œæ²¡æœ‰å½±å“ã€‚ \n\næˆ‘ä»¬é€šè¿‡RuntimeService è®¾ç½®çš„Localå˜é‡ç»‘å®šçš„æ˜¯ executionIdã€‚åœ¨è¯¥æµç¨‹ä¸­æœ‰æ•ˆ\n\n![image-20220913120555429](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220913120555429.png)\n\n```java\n    /**\n     * è®¾ç½®Localæµç¨‹å˜é‡\n     */\n    @Test\n    public void setVariableLocal(){\n        String executionId = \"368f9fdc-3317-11ed-871d-c03c59ad2248\";\n        runtimeService.setVariableLocal(executionId,\"orderId\",\"10006\");\n        runtimeService.setVariableLocal(executionId,\"user2\",\"æ³¢æ³¢çƒ¤é¸­1\");\n    }\n```\n\n\n\næˆ‘ä»¬é€šè¿‡TaskServiceè®¾ç½®çš„Localå˜é‡çš„ä½œç”¨åŸŸæ˜¯å’ŒTaskIdç»‘å®šçš„ï¼Œä½œç”¨åŸŸå°±åœ¨è¿™ä¸€ä¸ªTaskç”Ÿå‘½å‘¨æœŸä¸­ã€‚\n\n```java\n    @Test\n    public void taskLocalVariables(){\n        taskService.setVariableLocal(\"7eb1b34b-3318-11ed-b9e6-c03c59ad2248\",\"user2\",\"æ³¢å“¥66666\");\n    }\n```\n\n\n\n\n\n## å†å²å˜é‡\n\nå†å²å˜é‡ï¼Œå­˜å…¥`act_hi_varinst`è¡¨ä¸­ã€‚åœ¨æµç¨‹å¯åŠ¨æ—¶ï¼Œæµç¨‹å˜é‡ä¼šåŒæ—¶å­˜å…¥å†å²å˜é‡è¡¨ä¸­ï¼›åœ¨æµç¨‹ç»“æŸæ—¶ï¼Œå†å²è¡¨ä¸­çš„å˜é‡ä»ç„¶å­˜åœ¨ã€‚å¯ç†è§£ä¸ºâ€œæ°¸ä¹…ä»£â€çš„æµç¨‹å˜é‡ã€‚\n\nè·å–å·²å®Œæˆçš„ã€idä¸ºâ€™XXXâ€™çš„æµç¨‹å®ä¾‹ä¸­ï¼Œæ‰€æœ‰çš„`HistoricVariableInstances`ï¼ˆå†å²å˜é‡å®ä¾‹ï¼‰ï¼Œå¹¶ä»¥å˜é‡åæ’åºã€‚\n\n```java\nhistoryService.createHistoricVariableInstanceQuery()\n    .processInstanceId(\"XXX\")\n    .orderByVariableName.desc()\n    .list();\n```\n\n\n\n\n\n\n\n# èº«ä»½æœåŠ¡\n\nåœ¨æµç¨‹å®šä¹‰ä¸­åœ¨ä»»åŠ¡ç»“ç‚¹çš„ assignee å›ºå®šè®¾ç½®ä»»åŠ¡è´Ÿè´£äººï¼Œåœ¨æµç¨‹å®šä¹‰æ—¶å°†å‚ä¸è€…å›ºå®šè®¾ç½®åœ¨.bpmn æ–‡ä»¶ä¸­ï¼Œå¦‚æœä¸´æ—¶ä»»åŠ¡è´Ÿè´£äººå˜æ›´åˆ™éœ€è¦ä¿®æ”¹æµç¨‹å®šä¹‰ï¼Œç³»ç»Ÿå¯æ‰©å±•æ€§å·®ã€‚é’ˆå¯¹è¿™ç§æƒ…å†µå¯ä»¥ç»™ä»»åŠ¡è®¾ç½®å¤šä¸ªå€™é€‰äººæˆ–è€…å€™é€‰äººç»„ï¼Œå¯ä»¥ä»å€™é€‰äººä¸­é€‰æ‹©å‚ä¸è€…æ¥å®Œæˆä»»åŠ¡ã€‚\n\nèº«ä»½æœåŠ¡æ˜¯å¯¹å„ç§ç”¨æˆ·/ç»„åº“çš„APIæŠ½è±¡ã€‚å…¶åŸºæœ¬å®ä½“æ˜¯ï¼š\n\n- User: ä½¿ç”¨ä¸åŒIDåŒºåˆ†çš„ä¸åŒç”¨æˆ·\n- Group: ä½¿ç”¨ä¸åŒIDåŒºåˆ†çš„ä¸åŒç»„\n- Membership: ç»„ä¸ç”¨æˆ·ä¹‹é—´çš„å…³ç³»\n- Tenant: ä½¿ç”¨ä¸åŒIDåŒºåˆ†çš„ä¸åŒç§Ÿæˆ·\n- Tenant Membership: ç§Ÿæˆ·ä¸ ç”¨æˆ·/ç»„ ä¹‹é—´çš„å…³ç³»\n\n## å€™é€‰äºº\n\n### ç»˜åˆ¶æµç¨‹å›¾\n\né¦–å…ˆç»˜åˆ¶ä¸€ä¸ªå¦‚ä¸‹çš„åŸºæœ¬æµç¨‹å›¾ã€‚ç„¶åæˆ‘ä»¬åˆ†åˆ«æ¥æŒ‡æ´¾å¤„ç†äººã€‚\n\n![image-20220917101906123](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220917101906123.png)\n\n\n\näººäº‹å®¡æ‰¹è¿™å—æˆ‘ä»¬å¯ä»¥ç›´æ¥æ¥æŒ‡å®šå¤šä¸ªå€™é€‰äººæ¥å¤„ç†ã€‚`demo,zhang,lisi`\n\n![image-20220917102115513](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220917102115513.png)\n\nåœ¨æ€»ç»ç†å®¡æ‰¹çš„ä½ç½®æˆ‘ä»¬åœ¨è®¾è®¡çš„æ—¶å€™ä¸å¤ªæ¸…æ¥šä¼šæ˜¯è°æ¥å®¡æ‰¹ï¼Œæ‰€ä»¥é€šè¿‡å€¼è¡¨è¾¾å¼æ¥å¤„ç†ã€‚\n\n![image-20220917102211814](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220917102211814.png)\n\nè®¾è®¡å®Œæˆåå¯¹åº”çš„xmlä¸­çš„æ•°æ®ä¸ºï¼š\n\n![image-20220917102259478](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220917102259478.png)\n\n\n\n### éƒ¨ç½²å’Œå¯åŠ¨æµç¨‹\n\nåˆ›å»ºäº†æµç¨‹å›¾åæˆ‘ä»¬å°±å¯ä»¥ç›´æ¥æ¥éƒ¨ç½²è¯¥æµç¨‹ã€‚\n\n```java\n    /**\n     * å®Œæˆæµç¨‹çš„éƒ¨ç½²æ“ä½œ\n     */\n    @Test\n    public void deploy(){\n        Deployment deploy = repositoryService.createDeployment()\n                .name(\"å€™é€‰äººæ¡ˆä¾‹\")\n                .addClasspathResource(\"flow/å€™é€‰äººæ¡ˆä¾‹.bpmn\")\n                .deploy();\n        System.out.println(\"deploy.getId() = \" + deploy.getId());\n    }\n```\n\næ¥ç€å°±å¯ä»¥ç›´æ¥æ¥å¯åŠ¨è¯¥æµç¨‹äº†ã€‚\n\n```java\n    /**\n     * å¯åŠ¨æµç¨‹å®ä¾‹\n     */\n    @Test\n    public void startFlow(){\n        String processInstanceId = \"Process_05vjqic:1:cca1e181-362e-11ed-b8fc-c03c59ad2248\";\n        runtimeService.startProcessInstanceById(processInstanceId);\n    }\n```\n\nå¯åŠ¨å®Œæˆæµç¨‹åæˆ‘ä»¬è¿›å…¥åˆ°`act_ru_task`ä¸­å¯ä»¥å‘ç°æˆ‘ä»¬åˆ›å»ºçš„æµç¨‹ä»»åŠ¡ä¿¡æ¯ï¼Œä½†æ˜¯`å¤„ç†äºº`å­—æ®µè¿˜æ˜¯ç©ºçš„ã€‚\n\n![image-20220917102625541](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220917102625541.png)\n\n\n\n![image-20220917102655865](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220917102655865.png)\n\n\n\næ³¨æ„ï¼šç›¸å…³çš„å€™é€‰äººçš„ä¿¡æ¯å­˜å‚¨åœ¨äº†`act_ru_identitylink`è¡¨ä¸­ã€‚\n\n![image-20220917104657296](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220917104657296.png)\n\nå¯¹åº”çš„æŸ¥è¯¢æ“ä½œå¦‚ä¸‹ï¼š\n\n```java\n    @Test\n    public void getTaskCandidate(){\n        List<IdentityLink> identityLinksForTask = taskService.getIdentityLinksForTask(\"023f0279-362f-11ed-8d8a-c03c59ad2248\");\n        for (IdentityLink identityLink : identityLinksForTask) {\n            System.out.println(identityLink.getTaskId());\n            System.out.println(identityLink.getProcessDefId());\n            System.out.println(identityLink.getUserId());\n        }\n    }\n```\n\n\n\n\n\n### ä»»åŠ¡çš„æ‹¾å–\n\nå€™é€‰è¦æ“ä½œæˆ‘ä»¬éœ€è¦é€šè¿‡`æ‹¾å–`çš„è¡Œä¸ºæŠŠ`å€™é€‰äºº`è½¬æ¢ä¸º`å¤„ç†äºº`.é‚£ä¹ˆå€™é€‰äººç™»å½•åéœ€è¦èƒ½æŸ¥è¯¢å‡ºæ¥ä»–å¯ä»¥`æ‹¾å–`çš„ä»»åŠ¡ã€‚åœ¨camundaçš„webåº”ç”¨ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°è¿™æ ·çš„æ“ä½œã€‚`demo`è´¦å·ç™»å½•ã€‚\n\n![image-20220917103124214](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220917103124214.png)\n\nåœ¨ä»£ç ä¸Šçš„å®ç°ï¼Œå…ˆæ¥çœ‹æŸ¥è¯¢æ“ä½œã€‚\n\n```java\n    /**\n     * æ ¹æ®ç™»å½•çš„ç”¨æˆ·æŸ¥è¯¢å¯¹åº”çš„å¯ä»¥æ‹¾å–çš„ä»»åŠ¡\n     */\n    @Test\n    public void queryTaskCandidate(){\n\n        List<Task> list = taskService.createTaskQuery()\n                .processInstanceId(\"023da2e6-362f-11ed-8d8a-c03c59ad2248\")\n                .taskCandidateUser(\"demo\")\n                .list();\n        for (Task task : list) {\n            System.out.println(\"task.getId() = \" + task.getId());\n            System.out.println(\"task.getName() = \" + task.getName());\n        }\n    }\n\n    /**\n     * æŸ¥è¯¢å½“å‰ä»»åŠ¡æ‰€æœ‰çš„å€™é€‰äºº\n     */\n    @Test\n    public void getTaskCandidate(){\n        String taskId = \"52b2642a-36fa-11ed-bde4-c03c59ad2248\";\n        List<IdentityLink> linksForTask = taskService.getIdentityLinksForTask(taskId);\n        if(linksForTask != null && linksForTask.size() > 0){\n            for (IdentityLink identityLink : linksForTask) {\n                System.out.println(identityLink.getUserId());\n            }\n        }\n    }\n```\n\nç„¶åæˆ‘ä»¬å°±å¯ä»¥åœ¨ä¸Šé¢çš„åŸºç¡€ä¸Šæ¥åš`æ‹¾å–`çš„æ“ä½œäº†ã€‚\n\n```java\n    /**\n     * æ ¹æ®ç™»å½•çš„ç”¨æˆ·æŸ¥è¯¢å¯¹åº”çš„å¯ä»¥æ‹¾å–çš„ä»»åŠ¡\n     */\n    @Test\n    public void claimTaskCandidate(){\n\n        List<Task> list = taskService.createTaskQuery()\n                .processInstanceId(\"023da2e6-362f-11ed-8d8a-c03c59ad2248\")\n                .taskCandidateUser(\"demo\")\n                .list();\n        for (Task task : list) {\n            taskService.claim(task.getId(),\"demo\");\n        }\n    }\n```\n\nè¿›å…¥åˆ°è¡¨ç»“æ„ä¸­ä½ ä¼šå‘ç°è¿™æ¡Taskè®°å½•çš„å¤„ç†äººè¢«æŒ‡æ´¾ä¸ºäº†`demo`,è€Œä¸”åœ¨Webç«¯å¯ä»¥çœ‹åˆ°å¯ä»¥å®¡æ‰¹äº†ã€‚\n\n![image-20220917103743685](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220917103743685.png)\n\n\n\næ³¨æ„ï¼šè¿™æ—¶`demo`æ‹¾å–äº†ä»»åŠ¡ä¹‹åå…¶ä»–çš„ç”¨æˆ·å°±ä¸èƒ½å†æ‹¾å–äº†ï¼ŒæŸ¥è¯¢çš„æ—¶å€™ä¹ŸæŸ¥è¯¢ä¸åˆ°äº†ã€‚\n\n\n\n\n\n### ä»»åŠ¡çš„å½’è¿˜\n\næ‹¾å–ä»»åŠ¡åå¦‚æœä¸æƒ³æ“ä½œé‚£ä¹ˆå¯ä»¥å½’è¿˜ä»»åŠ¡ã€‚\n\n```java\n    /**\n     * é€€è¿˜ä»»åŠ¡\n     *    ä¸€ä¸ªå€™é€‰äººæ‹¾å–äº†è¿™ä¸ªä»»åŠ¡ä¹‹åå…¶ä»–çš„ç”¨æˆ·å°±æ²¡æœ‰åŠæ³•æ‹¾å–è¿™ä¸ªä»»åŠ¡äº†\n     *    æ‰€ä»¥å¦‚æœä¸€ä¸ªç”¨æˆ·æ‹¾å–äº†ä»»åŠ¡ä¹‹ååˆä¸æƒ³å¤„ç†äº†ï¼Œé‚£ä¹ˆå¯ä»¥é€€è¿˜\n     */\n    @Test\n    public void unclaimTaskCandidate(){\n        Task task = taskService.createTaskQuery()\n                .processInstanceId(\"023da2e6-362f-11ed-8d8a-c03c59ad2248\")\n                .taskAssignee(\"demo\")\n                .singleResult();\n        if(task != null){\n            // å½’è¿˜ç›¸å…³çš„ä»»åŠ¡  ç½®ç©ºå³å¯\n            taskService.setAssignee(task.getId(),null);\n            System.out.println(\"å½’è¿˜æ‹¾å–æˆåŠŸ\");\n        }\n    }\n```\n\n\n\n### ä»»åŠ¡çš„äº¤æ¥\n\næ‹¾å–ä»»åŠ¡åå¦‚æœä¸æƒ³æ“ä½œä¹Ÿä¸æƒ³å½’è¿˜å¯ä»¥ç›´æ¥äº¤æ¥ç»™å¦å¤–ä¸€ä¸ªäººæ¥å¤„ç†.\n\n```java\n    @Test\n    public void taskCandidate(){\n        Task task = taskService.createTaskQuery()\n                .processInstanceId(\"023da2e6-362f-11ed-8d8a-c03c59ad2248\")\n                .taskAssignee(\"demo\")\n                .singleResult();\n        if(task != null){\n            // ä»»åŠ¡äº¤æ¥\n            taskService.setAssignee(task.getId(),\"zhang\");\n            System.out.println(\"ä»»åŠ¡äº¤æ¥ç»™äº†zhang\");\n        }\n    }\n```\n\n\n\n### ä»»åŠ¡å®Œæˆ\n\næ­£å¸¸çš„ä»»åŠ¡å¤„ç†\n\n```java\n    @Test\n    public void completeTask1(){\n        String taskId = \"023f0279-362f-11ed-8d8a-c03c59ad2248\";\n        // ä½†æ˜¯ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„ å¤„ç†äººæ˜¯å€¼è¡¨è¾¾å¼ æˆ‘ä»¬éœ€è¦èµ‹å€¼\n        Map<String,Object> map = new HashMap<>();\n        map.put(\"user1\",\"demo\");\n        map.put(\"user2\",\"zhangsan\");\n        map.put(\"user3\",\"wangwu\");\n        taskService.complete(taskId,map);\n    }\n```\n\nå½“ç„¶æˆ‘ä»¬é€šè¿‡å€¼è¡¨è¾¾å¼æ¥å¤„ç†çš„å€™é€‰äººæ“ä½œã€‚åœ¨`act_ru_identitylink`è¡¨ä¸­åŒæ ·æœ‰ç›¸å…³è®°å½•ï¼Œæˆ‘ä»¬éœ€è¦ç»“åˆæµç¨‹å˜é‡è¡¨æ¥å¤„ç†äº†ã€‚ä½†æ˜¯å¤„ç†çš„APIå’Œä¸Šé¢æ˜¯ä¸€æ ·çš„ã€‚\n\n\n\n## å€™é€‰äººç»„\n\nå½“å€™é€‰äººå¾ˆå¤šçš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥åˆ†ç»„æ¥å¤„ç†ã€‚å…ˆåˆ›å»ºç»„ï¼Œç„¶åæŠŠç”¨æˆ·åˆ†é…åˆ°è¿™ä¸ªç»„ä¸­ã€‚\n\n\n\n### ç®¡ç†ç”¨æˆ·å’Œç»„\n\n#### ç”¨æˆ·ç®¡ç†\n\næˆ‘ä»¬éœ€è¦å…ˆå•ç‹¬ç»´æŠ¤ç”¨æˆ·ä¿¡æ¯ã€‚åå°å¯¹åº”çš„è¡¨ç»“æ„æ˜¯`ACT_ID_USER`.\n\n```java\n    /**\n     * ç»´æŠ¤ç”¨æˆ·\n     */\n    @Test\n    public void createUser(){\n        User user = identityService.newUser(\"zhang\");\n        user.setFirstName(\"å¼ \");\n        user.setLastName(\"ä¸‰\");\n        user.setEmail(\"zhangsan@qq.com\");\n        user.setPassword(\"123456\");\n        identityService.saveUser(user);\n    }\n```\n\nè¦æ›´æ–°æˆ–è€…åˆ é™¤ç”¨æˆ·çš„è¯ã€‚é€šè¿‡ç›¸å…³APIå³å¯å®Œæˆ\n\n```java\n    @Test\n    public void updateUser(){\n        User user = identityService.createUserQuery().userId(\"zhang\").singleResult();\n        user.setPassword(\"123\");\n        identityService.saveUser(user);\n    }\n    @Test\n    public void deleteUser(){\n        identityService.deleteUser(\"zhang\");\n    }\n```\n\n\n\n#### Groupç®¡ç†\n\nç»´æŠ¤å¯¹åº”çš„Groupä¿¡æ¯ï¼Œåå°å¯¹åº”çš„è¡¨ç»“æ„æ˜¯`ACT_ID_GROUP`\n\n```java\n    /**\n     * åˆ›å»ºç”¨æˆ·ç»„\n     */\n    @Test\n    public void createGroup(){\n        // åˆ›å»ºGroupå¯¹è±¡å¹¶æŒ‡å®šç›¸å…³çš„ä¿¡æ¯\n        Group group = identityService.newGroup(\"group1\");\n        group.setName(\"å¼€å‘éƒ¨\");\n        group.setType(\"type1\");\n        // åˆ›å»ºGroupå¯¹åº”çš„è¡¨ç»“æ„æ•°æ®\n        identityService.saveGroup(group);\n    }\n```\n\næ›´æ–°å’Œåˆ é™¤å‚è€ƒä¸Šé¢çš„`ç”¨æˆ·ç®¡ç†`\n\n\n\n#### ç”¨æˆ·åˆ†é…ç»„\n\nç”¨æˆ·å’Œç»„æ˜¯ä¸€ä¸ªå¤šå¯¹å¤šçš„å…³è”å…³è”ï¼Œæˆ‘ä»¬éœ€è¦åšç›¸å…³çš„åˆ†é…ï¼Œåå°å¯¹åº”çš„è¡¨ç»“æ„æ˜¯`ACT_ID_MEMBERSHIP`\n\n```java\n    /**\n     * å°†ç”¨æˆ·åˆ†é…ç»™å¯¹åº”çš„Group\n     */\n    @Test\n    public void userGroup(){\n        // æ ¹æ®ç»„çš„ç¼–å·æ‰¾åˆ°å¯¹åº”çš„Groupå¯¹è±¡\n        Group group = identityService.createGroupQuery().groupId(\"group1\").singleResult();\n        // åˆ›å»º MemberShip å»ºç«‹ç”¨æˆ·å’Œç»„çš„å…³ç³»\n        identityService.createMembership(\"zhang\",group.getId());\n    }\n```\n\n\n\n### å€™é€‰äººç»„åº”ç”¨\n\nææ¸…æ¥šäº†ç”¨æˆ·å’Œç”¨æˆ·ç»„çš„å…³ç³»åæˆ‘ä»¬å°±å¯ä»¥æ¥ä½¿ç”¨å€™é€‰äººç»„çš„åº”ç”¨äº†\n\n#### åˆ›å»ºæµç¨‹å›¾\n\nåˆ›å»ºä¸€ä¸ªç®€å•çš„è¯·å‡æµç¨‹ï¼Œå¤„ç†äººé€šè¿‡å€™é€‰äººç»„çš„æ–¹å¼æ¥å¤„ç†ã€‚\n\n![image-20220917201151251](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220917201151251.png)\n\n#### æµç¨‹çš„éƒ¨ç½²è¿è¡Œ\n\nç„¶åæˆ‘ä»¬æŠŠæµç¨‹éƒ¨ç½²å’Œè¿è¡Œã€‚\n\n```java\n /**\n     * å®Œæˆæµç¨‹çš„éƒ¨ç½²æ“ä½œ\n     */\n    @Test\n    public void deploy(){\n        Deployment deploy = repositoryService.createDeployment()\n                .name(\"å€™é€‰äººç»„æ¡ˆä¾‹\")\n                .addClasspathResource(\"flow/å€™é€‰äººç»„.bpmn\")\n                .deploy();\n        System.out.println(\"deploy.getId() = \" + deploy.getId());\n    }\n\n    /**\n     * å¯åŠ¨æµç¨‹å®ä¾‹\n     */\n    @Test\n    public void startFlow(){\n        String processInstanceId = \"Process_1gvo8so:1:3e253edb-3682-11ed-a1ff-c03c59ad2248\";\n        runtimeService.startProcessInstanceById(processInstanceId);\n    }\n```\n\néƒ¨ç½²æˆåŠŸåæˆ‘ä»¬å¯ä»¥åœ¨`act_ru_identitylink`ä¸­çœ‹åˆ°å¯¹åº”çš„è®°å½•ã€‚\n\n![image-20220917201747129](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220917201747129.png)\n\n\n\n#### ä»»åŠ¡çš„æ‹¾å–å’Œå®Œæˆ\n\nç„¶åå®Œæˆä»»åŠ¡çš„æŸ¥è¯¢æ‹¾å–å’Œå¤„ç†æ“ä½œã€‚é€»è¾‘æ˜¯æ ¹æ®å½“å‰çš„ç™»å½•`ç”¨æˆ·`æ‰¾åˆ°å¯¹åº”çš„`ç»„`ï¼Œç„¶åæ ¹æ®`ç»„`æ‰¾åˆ°å¯¹åº”çš„ä»»åŠ¡ä¿¡æ¯ã€‚\n\n```java\n   /**\n     * æ ¹æ®ç™»å½•çš„ç”¨æˆ·æŸ¥è¯¢å¯¹åº”çš„å¯ä»¥æ‹¾å–çš„ä»»åŠ¡\n     *\n     */\n    @Test\n    public void queryTaskCandidateGroup(){\n        // å½“å‰ç”¨æˆ·æ‰€åœ¨çš„ç»„\n        Group group = identityService.createGroupQuery().groupMember(\"zhang\").singleResult();\n        List<Task> list = taskService.createTaskQuery()\n                .processInstanceId(\"711d5726-3682-11ed-8b9b-c03c59ad2248\")\n                .taskCandidateGroup(group.getId())\n                .list();\n        for (Task task : list) {\n            System.out.println(\"task.getId() = \" + task.getId());\n            System.out.println(\"task.getName() = \" + task.getName());\n        }\n    }\n\n    /**\n     * æ‹¾å–ä»»åŠ¡\n     *    ä¸€ä¸ªå€™é€‰äººæ‹¾å–äº†è¿™ä¸ªä»»åŠ¡ä¹‹åå…¶ä»–çš„ç”¨æˆ·å°±æ²¡æœ‰åŠæ³•æ‹¾å–è¿™ä¸ªä»»åŠ¡äº†\n     *    æ‰€ä»¥å¦‚æœä¸€ä¸ªç”¨æˆ·æ‹¾å–äº†ä»»åŠ¡ä¹‹ååˆä¸æƒ³å¤„ç†äº†ï¼Œé‚£ä¹ˆå¯ä»¥é€€è¿˜\n     */\n    @Test\n    public void claimTaskCandidate1(){\n        String userId = \"zhang\";\n        // å½“å‰ç”¨æˆ·æ‰€åœ¨çš„ç»„\n        Group group = identityService.createGroupQuery().groupMember(userId).singleResult();\n        Task task = taskService.createTaskQuery()\n                .processInstanceId(\"711d5726-3682-11ed-8b9b-c03c59ad2248\")\n                .taskCandidateGroup(group.getId())\n                .singleResult();\n        if(task != null) {\n            // ä»»åŠ¡æ‹¾å–\n            taskService.claim(task.getId(),userId);\n            System.out.println(\"ä»»åŠ¡æ‹¾å–æˆåŠŸ\");\n        }\n    }\n```\n\næ‹¾å–åçš„æ“ä½œå’Œå‰é¢æ˜¯ä¸€æ ·çš„ï¼Œå°±æ²¡å¿…è¦èµ˜è¿°ã€‚å½“ç„¶æˆ‘ä»¬åœ¨å®šä¹‰æµç¨‹çš„æ—¶å€™ä¹Ÿå¯ä»¥é€šè¿‡å€¼è¡¨è¾¾å¼æ¥å¤„ç†ï¼Œæˆ‘ä»¬éœ€è¦æ³¨æ„èµ‹å€¼å³å¯ã€‚\n\n\n\n## ç§Ÿæˆ·\n\n*å¤šç§Ÿæˆ·* æ˜¯æŒ‡ä¸€ä¸ªå•ä¸€çš„Camundaåº”ç”¨éœ€è¦ä¸ºå¤šä¸ªçš„ç§Ÿæˆ·æœåŠ¡çš„æƒ…å†µã€‚å¯¹äºæ¯ä¸ªç§Ÿæˆ·æ¥è¯´ï¼Œåº”è¯¥æœ‰æŸäº›éš”ç¦»çš„ä¿è¯ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªç§Ÿæˆ·çš„æµç¨‹å®ä¾‹ä¸åº”å¹²æ‰°å¦ä¸€ä¸ªç§Ÿæˆ·çš„æµç¨‹å®ä¾‹ã€‚\n\nå¤šç§Ÿæˆ·å¯ä»¥é€šè¿‡ä¸¤ç§ä¸åŒçš„æ–¹å¼å®ç°ã€‚ä¸€ç§æ˜¯ä½¿ç”¨æ¯ä¸ªç§Ÿæˆ·ä¸€ä¸ªæµç¨‹å¼•æ“ã€‚å¦ä¸€ç§æ–¹å¼æ˜¯åªä½¿ç”¨ä¸€ä¸ªæµç¨‹å¼•æ“ï¼Œå¹¶å°†æ•°æ®ä¸ç§Ÿæˆ·æ ‡è¯†ç¬¦ç›¸å…³è”ã€‚è¿™ä¸¤ç§æ–¹å¼åœ¨æ•°æ®éš”ç¦»ç¨‹åº¦ã€ç»´æŠ¤å·¥ä½œå’Œå¯æ‰©å±•æ€§æ–¹é¢å„æœ‰ä¸åŒã€‚ä¸¤ç§æ–¹å¼çš„ç»„åˆä¹Ÿæ˜¯å¯èƒ½çš„ã€‚\n\nå¤šç§Ÿæˆ·å¯ä»¥ä½¿ç”¨ç§Ÿæˆ·æ ‡è¯†ç¬¦ï¼ˆå³tenant-idsï¼‰çš„æµç¨‹å¼•æ“æ¥å®ç°ã€‚æ‰€æœ‰ç§Ÿæˆ·çš„æ•°æ®éƒ½å­˜å‚¨åœ¨ä¸€ä¸ªè¡¨ä¸­ï¼ˆåŒä¸€æ•°æ®åº“å’Œè¡¨ç»“æ„ï¼‰ã€‚é€šè¿‡å­˜å‚¨åœ¨åˆ—ä¸­çš„ç§Ÿæˆ·æ ‡è¯†ç¬¦æ¥æä¾›éš”ç¦»ã€‚\n\n![image-20220917203832905](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220917203832905.png)\n\n\n\n### ç§Ÿæˆ·ç®¡ç†\n\nç§Ÿæˆ·å¯¹åº”äº`act_id.tenant`è¡¨ç»“æ„ä¸­çš„æ•°æ®ã€‚æˆ‘ä»¬å¯ä»¥å…ˆæ¥ç»´æŠ¤ç§Ÿæˆ·çš„ç›¸å…³ä¿¡æ¯ã€‚åˆ›å»º`é•¿æ²™åˆ†å…¬å¸`çš„ç§Ÿæˆ·ä¿¡æ¯\n\n```java\n    /**\n     * åˆ›å»ºç§Ÿæˆ·\n     */\n    @Test\n    public void createTenant(){\n        Tenant tenant = identityService.newTenant(\"cs\");\n        tenant.setName(\"é•¿æ²™åˆ†å…¬å¸\");\n        identityService.saveTenant(tenant);\n    }\n```\n\n![image-20220918220534584](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220918220534584.png)\n\n\n\nå½“ç„¶å‚è€ƒå‰é¢çš„åˆ é™¤å’Œæ›´æ–°æ“ä½œä¹Ÿå¯ä»¥éå¸¸è½»æ¾çš„å®Œæˆ`ç§Ÿæˆ·`ç›¸å…³ä¿¡æ¯çš„å¤„ç†ã€‚ç„¶åæˆ‘ä»¬æ¥çœ‹ä¸‹ç§Ÿæˆ·å’Œç”¨æˆ·å’Œç»„çš„å…³ç³»ã€‚\n\n```java\n    /**\n     * å»ºç«‹ ç§Ÿæˆ· å’Œ ç»„çš„å…³ç³»\n     * å½“ç„¶ä¹Ÿå¯ä»¥å»ºç«‹ ç§Ÿæˆ·å’Œç”¨æˆ·çš„å…³ç³»ã€‚åªæ˜¯è¿™ç§æ¯”è¾ƒå°‘ç”¨\n     */\n    @Test\n    public void createTenantAndGroupShip(){\n        identityService.createTenantGroupMembership(\"cs\",\"group1\");\n    }\n```\n\n![image-20220918220924950](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220918220924950.png)\n\n\n\n\n\n### éƒ¨ç½²æ“ä½œ\n\næˆ‘ä»¬åœ¨éƒ¨ç½²æµç¨‹çš„æ—¶å€™å¯ä»¥æŒ‡å®šå¯¹åº”çš„ç§Ÿæˆ·ç¼–å·ã€‚å¦‚æœä¸æŒ‡å®šç§Ÿæˆ·ç¼–å·ï¼Œè¯´æ˜è¯¥æµç¨‹æ˜¯å±äºæ‰€æœ‰ç§Ÿæˆ·çš„ã€‚\n\n```java\n    /**\n     * å®Œæˆæµç¨‹çš„éƒ¨ç½²æ“ä½œ\n     */\n    @Test\n    public void deploy(){\n        Deployment deploy = repositoryService.createDeployment()\n                .name(\"å€™é€‰äººæ¡ˆä¾‹-ç§Ÿæˆ·\")\n                .tenantId(\"tenant1\")\n                .addClasspathResource(\"flow/å€™é€‰äººæ¡ˆä¾‹.bpmn\")\n                .deploy();\n        System.out.println(\"deploy.getId() = \" + deploy.getId());\n    }\n```\n\n\n### æŸ¥çœ‹éƒ¨ç½²æµç¨‹\n\nè®¾ç½®äº†ç§Ÿæˆ·ç¼–å·åï¼Œæˆ‘ä»¬è¦åšç›¸å…³çš„æŸ¥è¯¢ï¼Œå¯ä»¥é€šè¿‡å¦‚ä¸‹çš„APIæ¥å®ç°\n\n```java\n    /**\n     * åŸºäºç§Ÿæˆ· æŸ¥è¯¢ç›¸å…³çš„éƒ¨ç½²æµç¨‹\n     */\n    @Test\n    public void getByTenantId(){\n        List<Deployment> list = repositoryService.createDeploymentQuery()\n                .tenantIdIn(\"cs\")\n                .list();\n        for (Deployment deployment : list) {\n            System.out.println(\"deployment.getId() = \" + deployment.getId());\n            System.out.println(\"deployment.getName() = \" + deployment.getName());\n            System.out.println(\"------------\");\n        }\n    }\n\n    \n```\n\né€šè¿‡è°ƒç”¨`withoutTenantId()`æ¥æŸ¥è¯¢ä¸å±äºä»»ä½•ç§Ÿæˆ·çš„éƒ¨ç½²ã€‚\n\n```java\n@Test\n    public void getByWithoutTenantId(){\n        List<Deployment> list = repositoryService.createDeploymentQuery()\n                .withoutTenantId() // æŸ¥è¯¢å‡ºæ‰€æœ‰ä¸å±äºä»»ä½•tenantIdçš„è®°å½•\n                .list();\n        for (Deployment deployment : list) {\n            System.out.println(\"deployment.getId() = \" + deployment.getId());\n            System.out.println(\"deployment.getName() = \" + deployment.getName());\n            System.out.println(\"------------\");\n        }\n    }\n```\n\n\n\nä¹Ÿå¯ä»¥é€šè¿‡è°ƒç”¨`includeDeploymentsWithoutTenantId()`æ¥æŸ¥è¯¢å±äºç‰¹å®šç§Ÿæˆ·æˆ–ä¸å±äºç§Ÿæˆ·çš„éƒ¨ç½²ã€‚\n\n```\n@Test\npublic void getByIncludTenantId(){\n    List<Deployment> list = repositoryService.createDeploymentQuery()\n            .tenantIdIn(\"cs\")\n            .includeDeploymentsWithoutTenantId() // æŸ¥è¯¢å‡º tenant1 å’Œ ä¸å±äº ç§Ÿæˆ·çš„è®°å½•\n            .list();\n    for (Deployment deployment : list) {\n        System.out.println(\"deployment.getId() = \" + deployment.getId());\n        System.out.println(\"deployment.getName() = \" + deployment.getName());\n        System.out.println(\"------------\");\n    }\n}\n```\n\nä¸ â€œéƒ¨ç½²æŸ¥è¯¢â€ ç±»ä¼¼ï¼Œå®šä¹‰æŸ¥è¯¢å…è®¸é€šè¿‡ä¸€ä¸ªæˆ–å¤šä¸ªç§Ÿæˆ·å’Œä¸å±äºä»»ä½•ç§Ÿæˆ·çš„å®šä¹‰è¿›è¡Œè¿‡æ»¤ã€‚\n\n```java\nList<ProcessDefinition> processDefinitions = repositoryService\n  .createProcessDefinitionQuery()\n  .tenantIdIn(\"cs\")\n  .includeProcessDefinitionsWithoutTenantId();\n  .list();\n```\n\n\n\n\n\n### å¯åŠ¨æµç¨‹å®ä¾‹\n\né€šè¿‡keyåˆ›å»ºä¸€ä¸ªä¸ºå¤šç§Ÿæˆ·éƒ¨ç½²çš„æµç¨‹å®šä¹‰çš„å®ä¾‹ï¼Œå¿…é¡»åœ¨`ProcessInstantiationBuilder` ä¸­ä¼ é€’ç§Ÿæˆ·æ ‡è¯†ç¬¦ ã€‚\n\n```java\n    /**\n     * ç§Ÿæˆ· å¯åŠ¨ä¸€ä¸ªæµç¨‹å®ä¾‹\n     */\n    @Test\n    public void startFlow(){\n        String processKey = \"Process_05vjqic\";\n        ProcessInstance processInstance = runtimeService\n                .createProcessInstanceByKey(processKey)\n                .processDefinitionTenantId(\"cs\")\n                .execute();\n        System.out.println(\"processInstance.getId() = \" + processInstance.getId());\n    }\n\n    @Test\n    public void startFlow1(){\n        String processId = \"Process_05vjqic:1:a6b23794-3767-11ed-a4df-c03c59ad2248\";\n        ProcessInstance processInstance = runtimeService\n                .createProcessInstanceById(processId)\n                .execute();\n        System.out.println(\"processInstance.getId() = \" + processInstance.getId());\n    }\n```\n\nå¯åŠ¨åæµç¨‹åï¼Œåœ¨åˆ›å»ºçš„Taskè®°å½•ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°å¯¹åº”çš„`ç§Ÿæˆ·`ä¿¡æ¯\n\n![image-20220918234504559](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220918234504559.png)\n\nå› ä¸ºæˆ‘ä»¬åœ¨æµç¨‹è®¾è®¡çš„æ—¶å€™å°±æŒ‡å®šäº†ç¬¬ä¸€ä¸ªèŠ‚ç‚¹çš„å€™é€‰äººæ˜¯`group1`,æ‰€ä»¥åœ¨`act_ru_identitylink`è¡¨ä¸­å¯ä»¥çœ‹åˆ°ç›¸å…³çš„è®°å½•ã€‚\n\n![image-20220918234618891](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220918234618891.png)\n\n\n\n### ä»»åŠ¡æ‹¾å–\n\næ¥ä¸‹æ¥å°±å¯ä»¥å¯¹ä»»åŠ¡åš`æ‹¾å–`çš„æ“ä½œäº†\n\n```java\n   /**\n     * æ ¹æ®å½“å‰ç™»å½•ç”¨æˆ· æŸ¥è¯¢åˆ°éœ€è¦æ‹¾å–çš„ä»»åŠ¡\n     */\n    @Test\n    public void claimTask(){\n        // æ ¹æ®ç™»å½•ç”¨æˆ·æŸ¥è¯¢åˆ°å¯¹åº”çš„Group\n        List<Group> groups = identityService.createGroupQuery().groupMember(\"demo\").list();\n        if(groups != null && groups.size() > 0){\n            for (Group group : groups) {\n                // æ ¹æ® group æ‰¾åˆ°å¯¹åº”çš„ ç§Ÿæˆ·\n                List<Tenant> tenants = identityService.createTenantQuery().groupMember(group.getId()).list();\n                List<String> tenantStrings = new ArrayList<>();\n                if(tenants != null && tenants.size() > 0){\n                    tenantStrings = tenants.stream().map((item)->{\n                        return item.getId();\n                    }).collect(Collectors.toList());\n\n                    String[] ss = new String[tenantStrings.size()];\n                    tenantStrings.toArray(ss);\n                    List<Task> list = taskService.createTaskQuery()\n                            .tenantIdIn(ss)\n                            .list();\n                    if(list != null && list.size() > 0){\n                        for (Task task : list) {\n                            System.out.println(\"task.getId() = \" + task.getId());\n                        }\n                    }\n                }\n\n            }\n        }\n\n    }\n```\n\nå¯ä»¥æŸ¥è¯¢åˆ°å¯¹åº”çš„æ‹¾å–å°±æ¯”è¾ƒç®€å•äº†\n\n```java\n    @Test\n    public void claimTask(){\n        // æ ¹æ®ç™»å½•ç”¨æˆ·æŸ¥è¯¢åˆ°å¯¹åº”çš„Group\n        List<Group> groups = identityService.createGroupQuery().groupMember(\"demo\").list();\n        if(groups != null && groups.size() > 0){\n            for (Group group : groups) {\n                // æ ¹æ® group æ‰¾åˆ°å¯¹åº”çš„ ç§Ÿæˆ·\n                List<Tenant> tenants = identityService.createTenantQuery().groupMember(group.getId()).list();\n                List<String> tenantStrings = new ArrayList<>();\n                if(tenants != null && tenants.size() > 0){\n                    tenantStrings = tenants.stream().map((item)->{\n                        return item.getId();\n                    }).collect(Collectors.toList());\n\n                    String[] ss = new String[tenantStrings.size()];\n                    tenantStrings.toArray(ss);\n                    List<Task> list = taskService.createTaskQuery()\n                            .tenantIdIn(ss)\n                            .list();\n                    if(list != null && list.size() > 0){\n                        for (Task task : list) {\n                            taskService.claim(task.getId(),\"demo\");\n                        }\n                    }\n                }\n\n            }\n        }\n\n    }\n\n```\n\n![image-20220919003450202](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220919003450202.png)\n\nèƒ½å¤Ÿæ‹¾å–æˆåŠŸï¼Œé‚£ä¹ˆåé¢çš„æ“ä½œå°±æ˜¯ä»»åŠ¡çš„å®¡æ‰¹ã€‚æ¥ä¸‹æ¥çš„æ“ä½œå°±å’Œå‰é¢æ˜¯ä¸€æ ·çš„äº†ã€‚ä¸å†èµ˜è¿°~\n\n\n\n\n\n\n\n# ç½‘å…³ç¯‡\n\nç½‘å…³ç”¨æ¥æ§åˆ¶æµç¨‹çš„æµå‘\n\n## æ’ä»–ç½‘å…³\n\n`æ’ä»–ç½‘å…³`ï¼ˆexclusive gatewayï¼‰ï¼ˆä¹Ÿå«*å¼‚æˆ–ç½‘å…³ XOR gateway*ï¼Œæˆ–è€…æ›´ä¸“ä¸šçš„ï¼Œ*åŸºäºæ•°æ®çš„æ’ä»–ç½‘å…³ exclusive data-based gateway*ï¼‰ï¼Œç”¨äºå¯¹æµç¨‹ä¸­çš„**å†³ç­–**å»ºæ¨¡ã€‚å½“æ‰§è¡Œåˆ°è¾¾è¿™ä¸ªç½‘å…³æ—¶ï¼Œä¼šæŒ‰ç…§æ‰€æœ‰å‡ºå£é¡ºåºæµå®šä¹‰çš„é¡ºåºå¯¹å®ƒä»¬è¿›è¡Œè®¡ç®—ã€‚é€‰æ‹©ç¬¬ä¸€ä¸ªæ¡ä»¶è®¡ç®—ä¸ºtrueçš„é¡ºåºæµï¼ˆå½“æ²¡æœ‰è®¾ç½®æ¡ä»¶æ—¶ï¼Œè®¤ä¸ºé¡ºåºæµä¸º*true*ï¼‰ç»§ç»­æµç¨‹ã€‚\n\nç»˜åˆ¶æµç¨‹å›¾ï¼š\n\n![image-20220922002931276](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220922002931276.png)\n\n\n\nå¯¹åº”çš„XMLæ–‡ä»¶\n\n![image-20220922003022802](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220922003022802.png)\n\næµç¨‹æ¼”ç¤º\n\n```java\n   /**\n     * å®Œæˆæµç¨‹çš„éƒ¨ç½²æ“ä½œ\n     */\n    @Test\n    public void deploy(){\n        Deployment deploy = repositoryService.createDeployment()\n                .name(\"æ’ä»–ç½‘å…³\")\n                .addClasspathResource(\"flow/æ’ä»–ç½‘å…³.bpmn\")\n                .deploy();\n        System.out.println(\"deploy.getId() = \" + deploy.getId());\n    }\n\n\n    /**\n     * é€šè¿‡æµç¨‹å®šä¹‰Id å¯åŠ¨\n     */\n    @Test\n    public void startFlow(){\n        String processId = \"Process_0eykic0:1:efadfc92-39c9-11ed-8f13-c03c59ad2248\";\n        ProcessInstance processInstance = runtimeService.startProcessInstanceById(processId);\n        System.out.println(\"processInstance.getId() = \" + processInstance.getId());\n    }\n\n    /**\n     * å®Œæˆä»»åŠ¡\n     */\n    @Test\n    public void completeTask(){\n        Map<String,Object> map = new HashMap<>();\n        map.put(\"day\",4);\n        taskService.complete(\"21a323ee-39ca-11ed-8b49-c03c59ad2248\",map);\n    }\n```\n\nä¼ é€’çš„æ˜¯`day=4`ä¼šèµ°ä¸­é—´çš„è·¯çº¿ã€‚\n\n![image-20220922003119262](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220922003119262.png)\n\n## å¹¶è¡Œç½‘å…³\n\nå¹¶è¡Œç½‘å…³å…è®¸å°†æµç¨‹åˆ†æˆå¤šæ¡åˆ†æ”¯ï¼Œä¹Ÿå¯ä»¥æŠŠå¤šæ¡åˆ†æ”¯æ±‡èšåˆ°ä¸€èµ·ï¼Œå¹¶è¡Œç½‘å…³çš„åŠŸèƒ½æ˜¯åŸºäºè¿›å…¥å’Œå¤–å‡ºé¡ºåºæµçš„ï¼š\n\n* forkåˆ†æ”¯ï¼šå¹¶è¡Œåçš„æ‰€æœ‰å¤–å‡ºé¡ºåºæµï¼Œä¸ºæ¯ä¸ªé¡ºåºæµéƒ½åˆ›å»ºä¸€ä¸ªå¹¶å‘åˆ†æ”¯ã€‚\n\n* joinæ±‡èšï¼š æ‰€æœ‰åˆ°è¾¾å¹¶è¡Œç½‘å…³ï¼Œåœ¨æ­¤ç­‰å¾…çš„è¿›å…¥åˆ†æ”¯ï¼Œ ç›´åˆ°æ‰€æœ‰è¿›å…¥é¡ºåºæµçš„åˆ†æ”¯éƒ½åˆ°è¾¾ä»¥åï¼Œ æµç¨‹å°±ä¼šé€šè¿‡æ±‡èšç½‘å…³ã€‚\n\næ³¨æ„ï¼Œå¦‚æœåŒä¸€ä¸ªå¹¶è¡Œç½‘å…³æœ‰å¤šä¸ªè¿›å…¥å’Œå¤šä¸ªå¤–å‡ºé¡ºåºæµï¼Œ å®ƒå°±åŒæ—¶å…·æœ‰åˆ†æ”¯å’Œæ±‡èšåŠŸèƒ½ã€‚ è¿™æ—¶ï¼Œç½‘å…³ä¼šå…ˆæ±‡èšæ‰€æœ‰è¿›å…¥çš„é¡ºåºæµï¼Œç„¶åå†åˆ‡åˆ†æˆå¤šä¸ªå¹¶è¡Œåˆ†æ”¯ã€‚\n\n**ä¸å…¶ä»–ç½‘å…³çš„ä¸»è¦åŒºåˆ«æ˜¯ï¼Œå¹¶è¡Œç½‘å…³ä¸ä¼šè§£ææ¡ä»¶ã€‚** **å³ä½¿é¡ºåºæµä¸­å®šä¹‰äº†æ¡ä»¶ï¼Œä¹Ÿä¼šè¢«å¿½ç•¥ã€‚**\n\n![image-20220922003323785](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220922003323785.png)\n\n## åŒ…å«ç½‘å…³\n\nåŒ…å«ç½‘å…³å¯ä»¥çœ‹åšæ˜¯æ’ä»–ç½‘å…³å’Œå¹¶è¡Œç½‘å…³çš„ç»“åˆä½“ã€‚ å’Œæ’ä»–ç½‘å…³ä¸€æ ·ï¼Œä½ å¯ä»¥åœ¨å¤–å‡ºé¡ºåºæµä¸Šå®šä¹‰æ¡ä»¶ï¼ŒåŒ…å«ç½‘å…³ä¼šè§£æå®ƒä»¬ã€‚ ä½†æ˜¯ä¸»è¦çš„åŒºåˆ«æ˜¯åŒ…å«ç½‘å…³å¯ä»¥é€‰æ‹©å¤šäºä¸€æ¡é¡ºåºæµï¼Œè¿™å’Œå¹¶è¡Œç½‘å…³ä¸€æ ·ã€‚\n\nåŒ…å«ç½‘å…³çš„åŠŸèƒ½æ˜¯åŸºäºè¿›å…¥å’Œå¤–å‡ºé¡ºåºæµçš„ï¼š\n\n* åˆ†æ”¯ï¼š æ‰€æœ‰å¤–å‡ºé¡ºåºæµçš„æ¡ä»¶éƒ½ä¼šè¢«è§£æï¼Œç»“æœä¸ºtrueçš„é¡ºåºæµä¼šä»¥å¹¶è¡Œæ–¹å¼ç»§ç»­æ‰§è¡Œï¼Œ ä¼šä¸ºæ¯ä¸ªé¡ºåºæµåˆ›å»ºä¸€ä¸ªåˆ†æ”¯ã€‚\n\n* æ±‡èšï¼šæ‰€æœ‰å¹¶è¡Œåˆ†æ”¯åˆ°è¾¾åŒ…å«ç½‘å…³ï¼Œä¼šè¿›å…¥ç­‰å¾…çŠ¶æ€ï¼Œ ç›´åˆ°æ¯ä¸ªåŒ…å«æµç¨‹tokençš„è¿›å…¥é¡ºåºæµçš„åˆ†æ”¯éƒ½åˆ°è¾¾ã€‚ è¿™æ˜¯ä¸å¹¶è¡Œç½‘å…³çš„æœ€å¤§ä¸åŒã€‚æ¢å¥è¯è¯´ï¼ŒåŒ…å«ç½‘å…³åªä¼šç­‰å¾…è¢«é€‰ä¸­æ‰§è¡Œäº†çš„è¿›å…¥é¡ºåºæµã€‚ åœ¨æ±‡èšä¹‹åï¼Œæµç¨‹ä¼šç©¿è¿‡åŒ…å«ç½‘å…³ç»§ç»­æ‰§è¡Œã€‚\n\n\n\n![image-20220922005111023](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220922005111023.png)\n\n\n\n\n\nå½“è¾“å…¥`day=4`æ—¶ï¼Œèµ°äº†ç¬¬äºŒå’Œç¬¬ä¸‰æ¡è·¯çº¿\n\n![image-20220922005536912](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220922005536912.png)\n\n\n\n\n\n# äº‹ä»¶ç¯‡\n\n`äº‹ä»¶`ï¼ˆeventï¼‰é€šå¸¸ç”¨äºä¸ºæµç¨‹ç”Ÿå‘½å‘¨æœŸä¸­å‘ç”Ÿçš„äº‹æƒ…å»ºæ¨¡ã€‚äº‹ä»¶æ€»æ˜¯å›¾å½¢åŒ–ä¸ºåœ†åœˆã€‚åœ¨BPMN 2.0ä¸­ï¼Œæœ‰ä¸¤ç§ä¸»è¦çš„äº‹ä»¶åˆ†ç±»ï¼š*æ•è·ï¼ˆcatchingï¼‰*ä¸*æŠ›å‡ºï¼ˆthrowingï¼‰*äº‹ä»¶ã€‚\n\n- **æ•è·:** å½“æµç¨‹æ‰§è¡Œåˆ°è¾¾è¿™ä¸ªäº‹ä»¶æ—¶ï¼Œä¼šç­‰å¾…ç›´åˆ°è§¦å‘å™¨åŠ¨ä½œã€‚è§¦å‘å™¨çš„ç±»å‹ç”±å…¶ä¸­çš„å›¾æ ‡ï¼Œæˆ–è€…è¯´XMLä¸­çš„ç±»å‹å£°æ˜è€Œå®šä¹‰ã€‚æ•è·äº‹ä»¶ä¸æŠ›å‡ºäº‹ä»¶æ˜¾ç¤ºä¸Šçš„åŒºåˆ«ï¼Œæ˜¯å…¶å†…éƒ¨çš„å›¾æ ‡æ²¡æœ‰å¡«å……ï¼ˆå³æ˜¯ç™½è‰²çš„ï¼‰ã€‚\n- **æŠ›å‡º:** å½“æµç¨‹æ‰§è¡Œåˆ°è¾¾è¿™ä¸ªäº‹ä»¶æ—¶ï¼Œä¼šè§¦å‘ä¸€ä¸ªè§¦å‘å™¨ã€‚è§¦å‘å™¨çš„ç±»å‹ï¼Œç”±å…¶ä¸­çš„å›¾æ ‡ï¼Œæˆ–è€…è¯´XMLä¸­çš„ç±»å‹å£°æ˜è€Œå®šä¹‰ã€‚æŠ›å‡ºäº‹ä»¶ä¸æ•è·äº‹ä»¶æ˜¾ç¤ºä¸Šçš„åŒºåˆ«ï¼Œæ˜¯å…¶å†…éƒ¨çš„å›¾æ ‡å¡«å……ä¸ºé»‘è‰²ã€‚\n\n## å®šæ—¶å™¨äº‹ä»¶\n\nå®šæ—¶è§¦å‘çš„ç›¸å…³äº‹ä»¶ï¼ŒåŒ…æ‹¬å®šæ—¶å™¨å¯åŠ¨äº‹ä»¶ï¼Œå®šæ—¶å™¨æ•è·ä¸­é—´ä»¶äº‹ä»¶ï¼Œå®šæ—¶å™¨è¾¹ç•Œäº‹ä»¶\n\n### å®šæ—¶å™¨å¯åŠ¨äº‹ä»¶\n\nå®šæ—¶å™¨å¯åŠ¨äº‹ä»¶ï¼ˆtimer start eventï¼‰åœ¨æŒ‡å®šæ—¶é—´åˆ›å»ºæµç¨‹å®ä¾‹ã€‚åœ¨æµç¨‹åªéœ€è¦å¯åŠ¨ä¸€æ¬¡ï¼Œæˆ–è€…æµç¨‹éœ€è¦åœ¨ç‰¹å®šçš„æ—¶é—´é—´éš”é‡å¤å¯åŠ¨æ—¶ï¼Œéƒ½å¯ä»¥ä½¿ç”¨ã€‚\n\n***è¯·æ³¨æ„**ï¼š*å­æµç¨‹ä¸èƒ½æœ‰å®šæ—¶å™¨å¯åŠ¨äº‹ä»¶ã€‚\n\n***è¯·æ³¨æ„**ï¼š*å®šæ—¶å™¨å¯åŠ¨äº‹ä»¶ï¼Œåœ¨æµç¨‹éƒ¨ç½²çš„åŒæ—¶å°±å¼€å§‹è®¡æ—¶ã€‚ä¸éœ€è¦è°ƒç”¨startProcessInstanceByXXXå°±ä¼šåœ¨æ—¶é—´å¯åŠ¨ã€‚è°ƒç”¨startProcessInstanceByXXXæ—¶ä¼šåœ¨å®šæ—¶å¯åŠ¨ä¹‹å¤–é¢å¤–å¯åŠ¨ä¸€ä¸ªæµç¨‹ã€‚\n\n***è¯·æ³¨æ„**ï¼š*å½“éƒ¨ç½²å¸¦æœ‰å®šæ—¶å™¨å¯åŠ¨äº‹ä»¶çš„æµç¨‹çš„æ›´æ–°ç‰ˆæœ¬æ—¶ï¼Œä¸Šä¸€ç‰ˆæœ¬çš„å®šæ—¶å™¨ä½œä¸šä¼šè¢«ç§»é™¤ã€‚è¿™æ˜¯å› ä¸ºé€šå¸¸å¹¶ä¸å¸Œæœ›æ—§ç‰ˆæœ¬çš„æµç¨‹ä»ç„¶è‡ªåŠ¨å¯åŠ¨æ–°çš„æµç¨‹å®ä¾‹ã€‚\n\nå®šæ—¶å™¨å¯åŠ¨äº‹ä»¶ï¼Œç”¨å…¶ä¸­æœ‰ä¸€ä¸ªé’Ÿè¡¨å›¾æ ‡çš„åœ†åœˆæ¥è¡¨ç¤ºã€‚æˆ‘ä»¬é€šè¿‡å…·ä½“æ¡ˆä¾‹æ¥ä»‹ç»\n\n![image-20220926104055183](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220926104055183.png)\n\néƒ¨ç½²æµç¨‹åç­‰å¾…åˆ°å…·ä½“çš„æ—¶é—´ï¼Œæˆ‘ä»¬æŸ¥çœ‹ä»»åŠ¡å³å¯\n\n![image-20220926104152240](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220926104152240.png)\n\n\n\næ—¶é—´å®šä¹‰è¿™å—ä½¿ç”¨çš„æ˜¯  https://en.wikipedia.org/wiki/ISO_8601#Dates  ISO 8601 æ ¼å¼\n\nä¸Šé¢æˆ‘ä»¬æ˜¯é€šè¿‡æŒ‡å®šå›ºå®šæ—¶é—´æ¥å¯åŠ¨çš„ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡`duraction`é—´éš”æ—¶é—´æ¥å¤„ç†ã€‚\n\n![image-20220926105514506](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220926105514506.png)\n\n\n\né€šè¿‡é—´éš”çš„æ–¹å¼æ¥å¯åŠ¨ã€‚\n\ntimeCycleï¼šæŒ‡å®šé‡å¤å‘¨æœŸï¼Œå¯ç”¨äºå‘¨æœŸæ€§å¯åŠ¨æµç¨‹ï¼Œæˆ–è€…ä¸ºè¶…æœŸç”¨æˆ·ä»»åŠ¡å¤šæ¬¡å‘é€æé†’,è¿™ä¸ªå…ƒç´ å¯ä»¥ä½¿ç”¨ä¸¤ç§æ ¼å¼\n\n* ç¬¬ä¸€ç§æ˜¯æŒ‰ç…§[ISO 8601](http://en.wikipedia.org/wiki/ISO_8601#Repeating_intervals)æ ‡å‡†å®šä¹‰çš„å¾ªç¯æ—¶é—´å‘¨æœŸã€‚ä¾‹å¦‚ï¼ˆä¸‰æ¬¡é‡å¤é—´éš”ï¼Œæ¯æ¬¡é—´éš”ä¸º10å°æ—¶ï¼‰ï¼šR3/PT10H\n* ä¹Ÿå¯ä»¥ä½¿ç”¨*timeCycle*çš„å¯é€‰å±æ€§*endDate*ï¼Œæˆ–è€…åƒè¿™æ ·ç›´æ¥å†™åœ¨æ—¶é—´è¡¨è¾¾å¼çš„ç»“å°¾ï¼š`R3/PT10H/${EndDate}`ã€‚ å½“åˆ°è¾¾endDateæ—¶ï¼Œåº”ç”¨ä¼šåœæ­¢ï¼Œå¹¶ä¸ºè¯¥ä»»åŠ¡åˆ›å»ºå…¶ä»–ä½œä¸š\n* ä¹Ÿå¯ä»¥é€šè¿‡cronè¡¨è¾¾å¼æ¥å¤„ç†\n\n\n\næ¡ˆä¾‹ï¼šé‡å¤æ—¶é—´è®¾ç½®ä¸º R3PT30S é‡å¤3æ¬¡ï¼Œé—´éš”30æè¿°ï¼Œè‡ªåŠ¨ä»»åŠ¡ç»‘å®šçš„æ˜¯JavaDelegate\n\n```java\npublic class MyJavaDelegate implements JavaDelegate {\n    @Override\n    public void execute(DelegateExecution execution) throws Exception {\n        System.out.println(\"MyJavaDelegate:æ‰§è¡Œäº†ã€‚ã€‚ã€‚\"+ LocalDateTime.now().toString());\n    }\n}\n```\n\n![image-20220926110231335](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220926110231335.png)\n\nåœ¨æ§åˆ¶å°å¯ä»¥çœ‹åˆ°å¯¹åº”çš„æ•ˆæœ\n\n![image-20220926110317226](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220926110317226.png)\n\nä¹Ÿå¯ä»¥æŒ‡å®šç»“æŸæ—¶é—´\n\n```xml\n      <timerEventDefinition>\n        <timeCycle>R3/PT30S/2022-03-28T21:46:11+00:00</timeCycle>\n      </timerEventDefinition>\n```\n\n\n\næ­¤å¤–è¿˜å¯ä»¥é€šè¿‡cronè¡¨è¾¾å¼æ¥å¤„ç†ï¼š\n\n```xml\n0 0/5 * * * ?\n```\n\næ¯éš”5ç§’å¯åŠ¨\n\n### å®šæ—¶å™¨ä¸­é—´äº‹ä»¶\n\nåœ¨æˆ‘ä»¬å…·ä½“çš„æµç¨‹å¤„ç†ä¸­ï¼ŒAèŠ‚ç‚¹å¤„ç†å®Œæˆåï¼Œå®šæ—¶è§¦å‘BèŠ‚ç‚¹çš„å¤„ç†ã€‚\n\n![image-20220927002456358](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220927002456358.png)\n\n### å®šæ—¶å™¨è¾¹ç•Œäº‹ä»¶\n\näººå·¥ä»»åŠ¡1å¦‚æœåœ¨å®šä¹‰çš„`2022-09-27T23:36:14`è¿™ä¸ªæ—¶é—´ä¹‹å‰è¿˜æ²¡æœ‰å¤„ç†ï¼Œé‚£ä¹ˆå°±ä¼šè§¦å‘å®šæ—¶è¾¹ç•Œäº‹ä»¶ï¼Œä»è€Œä»äººå·¥ä»»åŠ¡3.\n\n![image-20220927003701033](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220927003701033.png)\n\n\n\n\n\n## æ¶ˆæ¯äº‹ä»¶\n\n### å¯åŠ¨äº‹ä»¶\n\næ¶ˆæ¯å¯åŠ¨äº‹ä»¶ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬é€šè¿‡æ¥æ”¶åˆ°æŸäº›æ¶ˆæ¯åæ¥å¯åŠ¨æµç¨‹å®ä¾‹ï¼Œæ¯”å¦‚æ¥æ”¶åˆ°äº†ä¸€å°é‚®ä»¶ï¼Œä¸€æ¡çŸ­ä¿¡ç­‰ï¼Œå…·ä½“é€šè¿‡æ¡ˆä¾‹æ¥è®²è§£\n\n![image-20220927004852502](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220927004852502.png)\n\n\n\nå¯åŠ¨æµç¨‹å®ä¾‹å¯ä»¥é€šè¿‡æ™®é€šçš„æ–¹å¼æ¥è§¦å‘ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥é€šè¿‡å¯¹åº”çš„APIæ¥å¤„ç†\n\n```java\n    /**\n     * æ¶ˆæ¯å¯åŠ¨äº‹ä»¶\n     */\n    @Test\n    public void startMessageFlow(){\n        runtimeService.startProcessInstanceByMessage(\"firstMessage\");\n    }\n```\n\n\n\n### ä¸­é—´äº‹ä»¶\n\næ¶ˆæ¯ä¸­é—´äº‹ä»¶å°±æ˜¯åœ¨æµç¨‹è¿ä½œä¸­éœ€è¦æ¶ˆæ¯æ¥è§¦å‘çš„åœºæ™¯ï¼Œæ¡ˆä¾‹æ¼”ç¤ºï¼Œ`è‡ªåŠ¨æµç¨‹1`å¤„ç†å®Œæˆåï¼Œéœ€è¦æ¥æ”¶ç‰¹å®šçš„æ¶ˆæ¯ä¹‹åæ‰èƒ½è¿›å…¥åˆ°`è‡ªåŠ¨æµç¨‹2`\n\n![image-20220927005944099](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220927005944099.png)\n\næ­£å¸¸çš„æµç¨‹éƒ¨ç½²ï¼Œå¯åŠ¨å’Œå®¡æ‰¹åï¼Œæˆ‘ä»¬éœ€è¦å‘é€å¯¹åº”çš„æ¶ˆæ¯æ¥è§¦å‘è¿™ä¸ªä¸­é—´äº‹ä»¶ã€‚\n\n```java\n    /**\n     * å‘é€æ¶ˆæ¯\n     */\n    @Test\n    public void sendMsg(){\n        runtimeService.messageEventReceived(\"secondMessage\",\"da2028e9-3dbc-11ed-adb0-c03c59ad2248\");\n    }\n```\n\n\n\n\n\n### è¾¹ç•Œäº‹ä»¶\n\næ¶ˆæ¯è¾¹ç•Œäº‹ä»¶ï¼Œå¦‚æœåœ¨æ¶ˆæ¯è§¦å‘å‰è¿˜æ²¡æœ‰ï¼Œæ¡ˆä¾‹æ¼”ç¤ºï¼š\n\n![image-20220927010931908](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220927010931908.png)\n\nç„¶åæ­£å¸¸çš„éƒ¨ç½²ï¼Œå¯åŠ¨æµç¨‹ï¼Œå¦‚æœåœ¨å‘å¸ƒå¯¹åº”çš„æ¶ˆæ¯ä¹‹å‰è¿˜æ²¡æœ‰å®¡æ‰¹`ç”¨æˆ·ä»»åŠ¡1`,é‚£å½“æˆ‘ä»¬å‘é€å¯¹åº”çš„æ¶ˆæ¯åå°±ä¼šè§¦å‘å¯¹åº”çš„æ¶ˆæ¯è¾¹ç•Œäº‹ä»¶ã€‚\n\n```java\n    /**\n     * å‘é€æ¶ˆæ¯\n     */\n    @Test\n    public void sendMsg(){\n        runtimeService.messageEventReceived(\"thirdMessage\",\"0d2a30e2-3dbf-11ed-9e28-c03c59ad2248\");\n    }\n```\n\n\n\n\n\n## é”™è¯¯äº‹ä»¶\n\n### å¼€å§‹äº‹ä»¶\n\né”™è¯¯å¯åŠ¨äº‹ä»¶ï¼ˆerror start eventï¼‰ï¼Œå¯ç”¨äºè§¦å‘äº‹ä»¶å­æµç¨‹ï¼ˆEvent Sub-Processï¼‰ã€‚**é”™è¯¯å¯åŠ¨äº‹ä»¶ä¸èƒ½ç”¨äºå¯åŠ¨æµç¨‹å®ä¾‹**ã€‚\n\né”™è¯¯å¯åŠ¨äº‹ä»¶æ€»æ˜¯ä¸­æ–­ã€‚æˆ‘ä»¬é€šè¿‡æ¡ˆä¾‹æ¥ä»‹ç»ã€‚\n\n![image-20220927113303497](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220927113303497.png)\n\nç»˜åˆ¶äº‹ä»¶å­æµç¨‹è¦æ³¨æ„ï¼š\n\n![image-20220927113345613](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220927113345613.png)\n\né€‰æ‹©é”™è¯¯å¯åŠ¨äº‹ä»¶\n\n![image-20220927113423993](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220927113423993.png)\n\n\n\nç„¶åé…ç½®æµç¨‹èŠ‚ç‚¹ä¿¡æ¯\n\n![image-20220927113506045](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220927113506045.png)\n\n![image-20220927113528120](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220927113528120.png)\n\nç„¶ååœ¨JavaDelegateä¸­æŠ›å‡ºå¯¹åº”çš„å¼‚å¸¸\n\n```java\npublic class FirstJavaDelegate implements JavaDelegate {\n    @Override\n    public void execute(DelegateExecution execution) throws Exception {\n        System.out.println(\"FirstJavaDelegate:æ‰§è¡Œäº†\" + LocalDateTime.now().toString());\n        // æŠ›å‡ºçš„ä¿¡æ¯å¿…é¡»å¯¹åº”äºerrorçš„Codeä¿¡æ¯\n        throw new BpmnError(\"errorCode01\");\n    }\n}\n```\n\nç„¶åæ­£å¸¸éƒ¨ç½²ï¼Œå¯åŠ¨æµç¨‹ã€‚ç„¶åæˆ‘ä»¬å°±å¯ä»¥çœ‹åˆ°å¯¹åº”çš„æµè½¬äº†\n\n![image-20220927113652951](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220927113652951.png)\n\n\n\n### è¾¹ç•Œäº‹ä»¶\n\nå½“å­æµç¨‹æ‰§è¡Œä¸­å¯¹å¤–æŠ›å‡ºäº†ç›¸å…³çš„å¼‚å¸¸ï¼Œé‚£ä¹ˆæˆ‘ä»¬è®¾ç½®çš„é”™è¯¯è¾¹ç•Œäº‹ä»¶å°±èƒ½å¯¹åº”çš„æ•è·åˆ°ç›¸å…³çš„äº‹ä»¶ï¼Œç„¶ååšå¯¹åº”çš„å¤„ç†ï¼Œç›¸å…³æ¡ˆä¾‹å¦‚ä¸‹ï¼š\n\n![image-20220927114818638](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220927114818638.png)\n\nç»˜åˆ¶é”™è¯¯è¾¹ç•Œæµç¨‹å›¾çš„æ—¶å€™éœ€è¦å…ˆç»˜åˆ¶ä¸­é—´äº‹ä»¶çš„å›¾æ ‡ï¼Œç„¶åæ‹–æ‹½åˆ°å­æµç¨‹çš„è¾¹ç•Œï¼Œç„¶åä¿®æ”¹å¯¹åº”çš„ç±»å‹å³å¯ï¼Œé”™è¯¯è¾¹ç•Œäº‹ä»¶ç»‘å®šæŠ›å‡ºå¯¹åº”çš„errorCode\n\n![image-20220927114939647](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220927114939647.png)\n\nç„¶åå¯¹åº”çš„æŠ›å‡ºçš„ä¿¡æ¯\n\n```java\npublic class SecondJavaDelegate implements JavaDelegate {\n    @Override\n    public void execute(DelegateExecution execution) throws Exception {\n        System.out.println(\"SecondJavaDelegate:æ‰§è¡Œäº†\" + LocalDateTime.now().toString());\n        // æŠ›å‡ºçš„ä¿¡æ¯å¿…é¡»å¯¹åº”äºerrorçš„Codeä¿¡æ¯\n        throw new BpmnError(\"errorCode02\");\n    }\n}\n```\n\n\n\nç„¶åéƒ¨ç½²å¯åŠ¨æµç¨‹å³å¯çœ‹åˆ°å¯¹åº”çš„æ•ˆæœ\n\n![image-20220927115037027](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220927115037027.png)\n\n\n\n\n\n## ä¿¡å·äº‹ä»¶\n\n### å¼€å§‹äº‹ä»¶\n\né€šè¿‡ä¿¡å·æ¥å¯åŠ¨æµç¨‹å®ä¾‹\n\n![image-20220928232328300](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220928232328300.png)\n\néƒ¨ç½²æµç¨‹å’Œå‘é€ä¿¡å·æ¥å¯åŠ¨æµç¨‹\n\n```java\n    /**\n     * éƒ¨ç½²æµç¨‹\n     */\n    @Test\n    public void deployFlow(){\n\n        Deployment deploy = repositoryService.createDeployment()\n                .name(\"äº‹ä»¶-ä¿¡å·å¼€å§‹äº‹ä»¶\")\n\n                .addClasspathResource(\"flow/23-äº‹ä»¶-ä¿¡å·äº‹ä»¶-å¼€å§‹äº‹ä»¶.bpmn\")\n\n                .deploy();\n        System.out.println(\"deploy.getId() = \" + deploy.getId());\n    }\n\n    /**\n     * é€šè¿‡ä¿¡å·æ¥è§¦å‘å¯åŠ¨äº‹ä»¶çš„æ‰§è¡Œ\n     */\n    @Test\n    public void signalRecevied(){\n        runtimeService.signalEventReceived(\"signal01\");\n    }\n```\n\næ•ˆæœï¼š\n\n![image-20220928232951167](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220928232951167.png)\n\n### ä¸­é—´æ•è·äº‹ä»¶\n\næ¡ˆä¾‹å¦‚ä¸‹ï¼šå½“æˆ‘ä»¬å¯åŠ¨äº‹ä»¶åï¼Œä¼šé˜»å¡åœ¨è¿™ä¸ªæ¶ˆæ¯è·å–ä¸­é—´äº‹ä»¶å¤„ï¼Œç­‰å¾…ç›¸å…³ä¿¡å·åæ‰ä¼šç»§ç»­æµè½¬ã€‚\n\n![image-20220928233200534](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220928233200534.png)\n\nåœ¨è¿™ä¸ªæ¡ˆä¾‹ä¸­æˆ‘ä»¬éœ€è¦éƒ¨ç½²æµç¨‹ï¼Œå¯åŠ¨æµç¨‹ï¼Œç„¶å`ç”¨æˆ·ä»»åŠ¡1`å®¡æ‰¹åï¼Œæˆ‘ä»¬å‘å¸ƒç›¸å…³çš„ä¿¡å·ï¼Œç„¶åä¼šè¿›å…¥åˆ°`ç”¨æˆ·ä»»åŠ¡2`ä¸­\n\n```java\n   /**\n     * éƒ¨ç½²æµç¨‹\n     */\n    @Test\n    public void deployFlow(){\n\n        Deployment deploy = repositoryService.createDeployment()\n                .name(\"äº‹ä»¶-ä¿¡å·ä¸­é—´æ•è·äº‹ä»¶\")\n\n                .addClasspathResource(\"flow/24-äº‹ä»¶-ä¿¡å·äº‹ä»¶-ä¸­é—´æ•è·äº‹ä»¶.bpmn\")\n\n                .deploy();\n        System.out.println(\"deploy.getId() = \" + deploy.getId());\n    }\n\n    /**\n     * å¯åŠ¨æµç¨‹å®ä¾‹\n     */\n    @Test\n    public void startFlow(){\n        String processDefId = \"Process_002gvxw:1:cfcc56ac-3f42-11ed-a689-c03c59ad2248\";\n\n        ProcessInstance processInstance = runtimeService.startProcessInstanceById(processDefId);\n        System.out.println(\"processInstance.getId() = \" + processInstance.getId());\n    }\n\n    @Test\n    public void signalRecevied(){\n        runtimeService.signalEventReceived(\"signal02\");\n    }\n```\n\næ•ˆæœï¼š\n\n![image-20220928233556274](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220928233556274.png)\n\n### ä¸­é—´æŠ›å‡ºäº‹ä»¶\n\nä¿¡å·ä¸­é—´æŠ›å‡ºäº‹ä»¶ä¹Ÿå°±æ˜¯åœ¨æµç¨‹æ‰§è¡Œä¸­çš„æŸä¸ªèŠ‚ç‚¹æŠ›å‡ºäº†å¯¹åº”çš„ä¿¡å·ï¼Œç„¶åå¯¹åº”çš„ä¿¡å·ä¸­é—´æ•è·äº‹ä»¶å°±ä¼šè§¦å‘ï¼Œæˆ‘ä»¬é€šè¿‡å…·ä½“çš„æ¡ˆä¾‹æ¥æ¼”ç¤ºå¦‚ï¼š\n\n![image-20220928234118517](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220928234118517.png)\n\næ­£å¸¸çš„éƒ¨ç½²æµç¨‹ï¼Œç„¶ååšæµç¨‹çš„å®¡æ‰¹ï¼Œæ³¨æ„`ç”¨æˆ·ä»»åŠ¡4`éœ€è¦å…ˆå®¡æ‰¹ï¼Œç„¶åå¤„äºä¿¡å·æ•è·çš„çŠ¶æ€ï¼Œç„¶åæˆ‘ä»¬`ç”¨æˆ·ä»»åŠ¡2`çš„å®¡æ‰¹ï¼ŒæŠ›å‡ºä¿¡å·äº‹ä»¶ï¼Œé‚£ä¹ˆå¯¹åº”çš„æ•è·äº‹ä»¶æ‰èƒ½è§¦å‘ï¼Œè¿™å„¿æœ‰å…ˆåé¡ºåºã€‚\n\n![image-20220928235157519](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220928235157519.png)\n\n### è¾¹ç•Œäº‹ä»¶\n\næœ€åæ¥çœ‹çœ‹ä¿¡å·è¾¹ç•Œäº‹ä»¶ï¼Œæ¡ˆä¾‹å¦‚ä¸‹ï¼š\n\n![image-20220928235443496](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220928235443496.png)\n\néƒ¨ç½²å¯åŠ¨æµç¨‹ï¼Œå¦‚æœ`ç”¨æˆ·ä»»åŠ¡1`å®¡æ‰¹äº†ï¼Œå°±ä¼šè¿›å…¥åˆ°`ç”¨æˆ·ä»»åŠ¡2`å®¡æ‰¹ï¼Œå¦‚æœ`ç”¨æˆ·ä»»åŠ¡1`è¿˜æ²¡å®¡æ‰¹ï¼Œç„¶åå‘é€çš„ç›¸å…³çš„ä¿¡å·ï¼Œä¼šè¢«ä¿¡å·è¾¹ç•Œäº‹ä»¶æ•è·ï¼Œä»è€Œè¿›å…¥åˆ°`ç”¨æˆ·ä»»åŠ¡3`\n\n```java\n    @Test\n    public void signalRecevied(){\n        runtimeService.signalEventReceived(\"signal04\");\n    }\n```\n\n\n\n![image-20220928235841363](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220928235841363.png)\n\n\n\n\n\n## ç»“æŸäº‹ä»¶\n\n### é”™è¯¯ç»“æŸäº‹ä»¶\n\nå½“æµç¨‹æ‰§è¡Œåˆ°è¾¾**é”™è¯¯ç»“æŸäº‹ä»¶ï¼ˆerror end eventï¼‰**æ—¶ï¼Œç»“æŸæ‰§è¡Œçš„å½“å‰åˆ†æ”¯ï¼Œå¹¶æŠ›å‡ºé”™è¯¯ã€‚è¿™ä¸ªé”™è¯¯å¯ä»¥ç”±åŒ¹é…çš„é”™è¯¯è¾¹ç•Œä¸­é—´äº‹ä»¶æ•è·ã€‚å¦‚æœæ‰¾ä¸åˆ°åŒ¹é…çš„é”™è¯¯è¾¹ç•Œäº‹ä»¶ï¼Œå°†ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚é€šè¿‡å…·ä½“æ¡ˆä¾‹æ¥è¯¦ç»†è®²è§£ï¼š\n\n![image-20220929002020963](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220929002020963.png)\n\n\n\néƒ¨ç½²æµç¨‹ï¼Œç„¶åå¯åŠ¨æµç¨‹ï¼Œ`ç”¨æˆ·ä»»åŠ¡1`å®¡æ‰¹\n\n![image-20220929002528362](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220929002528362.png)\n\nè®¾ç½®æµç¨‹å˜é‡`flag==1`ç„¶åä¼šèµ°`é”™è¯¯ç»“æŸäº‹ä»¶`ã€‚ä¼šè§¦å‘å¯¹åº”çš„è¾¹ç•Œäº‹ä»¶\n\n![image-20220929002622297](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220929002622297.png)\n\n\n\n### ä¸­æ–­ç»“æŸäº‹ä»¶\n\nä¸­æ–­ç»“æŸäº‹ä»¶ä¹Ÿç§°ä¸ºç»ˆæ­¢ç»“æŸäº‹ä»¶ï¼Œä¸»è¦æ˜¯å¯¹æµç¨‹è¿›è¡Œç»ˆæ­¢çš„äº‹ä»¶ï¼Œå¯ä»¥åœ¨ä¸€ä¸ªå¤æ‚çš„æµç¨‹ä¸­ï¼Œå¦‚æœæŸæ–¹æƒ³è¦æå‰ä¸­æ–­è¿™ä¸ªæµç¨‹ï¼Œå¯ä»¥é‡‡ç”¨è¿™ä¸ªäº‹ä»¶æ¥å¤„ç†ï¼Œå¯ä»¥åœ¨å¹¶è¡Œå¤„ç†ä»»åŠ¡ä¸­ã€‚å¦‚æœä½ æ˜¯åœ¨æµç¨‹å®ä¾‹å±‚å¤„ç†ï¼Œæ•´ä¸ªæµç¨‹éƒ½ä¼šè¢«ä¸­æ–­ï¼Œå¦‚æœæ˜¯åœ¨å­æµç¨‹ä¸­ä½¿ç”¨ï¼Œé‚£ä¹ˆå½“å‰ä½œç”¨å’Œä½œç”¨åŸŸå†…çš„æ‰€æœ‰çš„å†…éƒ¨æµç¨‹éƒ½ä¼šè¢«ç»ˆæ­¢ã€‚å…·ä½“è¿˜æ˜¯é€šè¿‡ä¸¤ä¸ªæ¡ˆä¾‹æ¥ç»™å¤§å®¶ä»‹ç»ï¼š\n\n#### æ¡ˆä¾‹ä¸€\n\nä»‹ç»æ²¡æœ‰å­æµç¨‹çš„æƒ…å†µä¸‹ç»ˆæ­¢æµç¨‹çš„åœºæ™¯ï¼š\n\n![image-20220929003541120](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220929003541120.png)\n\n\n\n\n\n#### æ¡ˆä¾‹äºŒ\n\næ¡ˆä¾‹äºŒæˆ‘ä»¬æ¥çœ‹çœ‹æœ‰å­æµç¨‹çš„åœºæ™¯ä¸‹ï¼š\n\n![image-20220929004654376](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220929004654376.png)\n\n### å–æ¶ˆç»“æŸäº‹ä»¶\n\nå–æ¶ˆç»“æŸäº‹ä»¶ï¼ˆcancel end eventï¼‰åªèƒ½ä¸BPMNäº‹åŠ¡å­æµç¨‹ï¼ˆBPMN transaction subprocessï¼‰ä¸€èµ·ä½¿ç”¨ã€‚å½“åˆ°è¾¾å–æ¶ˆç»“æŸäº‹ä»¶æ—¶ï¼Œä¼šæŠ›å‡ºå–æ¶ˆäº‹ä»¶ï¼Œä¸”å¿…é¡»ç”±å–æ¶ˆè¾¹ç•Œäº‹ä»¶ï¼ˆcancel boundary eventï¼‰æ•è·ã€‚å–æ¶ˆè¾¹ç•Œäº‹ä»¶å°†å–æ¶ˆäº‹åŠ¡ï¼Œå¹¶è§¦å‘è¡¥å¿ï¼ˆcompensationï¼‰ã€‚\n\nå…·ä½“é€šè¿‡æ¡ˆä¾‹æ¥è®²è§£ï¼š\n\n\n\n![image-20220929010451477](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220929010451477.png)\n\næ•ˆæœï¼š\n\n![image-20220929010913632](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220929010913632.png)\n\n\n\n### è¡¥å¿äº‹ä»¶\n\né€šè¿‡è¡¥å¿è¾¾åˆ°æ§åˆ¶ä¸šåŠ¡æµç¨‹çš„ç›®çš„å°±æ˜¯è¡¥å¿äº‹ä»¶ï¼Œæ¯”å¦‚æˆ‘ä»¬æ­£å¸¸çš„ä¹°æœºç¥¨çš„æµç¨‹ä¸‹è®¢å•è´­ä¹°ï¼Œç„¶ååŒæ—¶å¼¹å‡ºæ”¯ä»˜æµç¨‹é¡µé¢ã€‚æ”¯ä»˜æˆåŠŸåå°±å¯ä»¥ç­‰å¾…å‡ºç¥¨äº†ï¼Œä½†æ˜¯å¦‚æœæˆ‘ä»¬æ”¯ä»˜å¤±è´¥çš„è¯ï¼Œè¿™æ—¶è¦ä¹ˆé‡æ–°æ”¯ä»˜ï¼Œæ›´æ¢æ”¯ä»˜æ–¹å¼æˆ–è€…å–æ¶ˆé¢„è®¢ï¼Œè¿™æ—¶å–æ¶ˆé¢„è®¢æˆ‘ä»¬å°±å¯ä»¥é€šè¿‡è¡¥å¿äº‹ä»¶æ¥å®ç°ï¼Œå…·ä½“çš„æ¡ˆä¾‹å¦‚ä¸‹ï¼š\n\n![image-20220929012202047](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220929012202047.png)\n\n\n\næ¡ˆä¾‹æ•ˆæœï¼š\n\n![image-20220929012149315](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220929012149315.png)\n\n\n\n\n\n# å¤šäººä¼šç­¾\n\nMultiple Instance\n\n## ä¼šç­¾è¯´æ˜\n\nå¤šå®ä¾‹æ´»åŠ¨æ˜¯ä¸ºä¸šåŠ¡æµç¨‹ä¸­çš„æŸä¸ªæ­¥éª¤å®šä¹‰é‡å¤çš„ä¸€ç§æ–¹å¼ã€‚åœ¨ç¼–ç¨‹æ¦‚å¿µä¸­ï¼Œå¤šå®ä¾‹ä¸ `for each` ç»“æ„ç›¸åŒ¹é…ï¼šå®ƒå…è®¸å¯¹ç»™å®šé›†åˆä¸­çš„æ¯ä¸ªé¡¹ç›®æŒ‰é¡ºåºæˆ–å¹¶è¡Œåœ°æ‰§è¡ŒæŸä¸ªæ­¥éª¤æˆ–ç”šè‡³ä¸€ä¸ªå®Œæ•´çš„å­æµç¨‹ã€‚\n\nå¤šå®ä¾‹æ˜¯ä¸€ä¸ªæœ‰é¢å¤–å±æ€§ï¼ˆæ‰€è°“çš„ â€œå¤šå®ä¾‹ç‰¹æ€§â€ï¼‰çš„å¸¸è§„æ´»åŠ¨ï¼Œå®ƒå°†å¯¼è‡´è¯¥æ´»åŠ¨åœ¨è¿è¡Œæ—¶è¢«å¤šæ¬¡æ‰§è¡Œã€‚ä»¥ä¸‹æ´»åŠ¨å¯ä»¥æˆä¸ºå¤šå®ä¾‹æ´»åŠ¨ã€‚\n\n- Service Task æœåŠ¡ä»»åŠ¡\n- Send Task å‘é€ä»»åŠ¡\n- User Task ç”¨æˆ·ä»»åŠ¡\n- Business Rule Task ä¸šåŠ¡è§„åˆ™ä»»åŠ¡\n- Script Task è„šæœ¬ä»»åŠ¡\n- Receive Task æ¥æ”¶ä»»åŠ¡\n- Manual Task æ‰‹åŠ¨ä»»åŠ¡\n- (Embedded) Sub-Process ï¼ˆåµŒå…¥ï¼‰å­æµç¨‹\n- Call Activity å‘èµ·æ´»åŠ¨\n- Transaction Subprocess äº‹åŠ¡å­æµç¨‹\n\nç½‘å…³æˆ–äº‹ä»¶ä¸èƒ½æˆä¸ºå¤šå®ä¾‹ã€‚\n\nå¦‚æœä¸€ä¸ªæ´»åŠ¨æ˜¯å¤šå®ä¾‹çš„ï¼Œè¿™å°†ç”±æ´»åŠ¨åº•éƒ¨çš„ä¸‰æ¡çŸ­çº¿è¡¨ç¤ºã€‚ä¸‰æ¡å‚ç›´çº¿è¡¨ç¤ºå®ä¾‹å°†ä»¥**å¹¶è¡Œ**æ–¹å¼æ‰§è¡Œï¼Œè€Œä¸‰æ¡æ°´å¹³çº¿è¡¨ç¤º**é¡ºåº**æ‰§è¡Œã€‚\n\n![image-20221001234837327](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221001234837327.png)\n\n\n\n\n\næŒ‰ç…§è§„èŒƒçš„è¦æ±‚ï¼Œæ¯ä¸ªå®ä¾‹æ‰€åˆ›å»ºçš„æ‰§è¡Œçš„æ¯ä¸ªçˆ¶æ‰§è¡Œå°†æœ‰ä»¥ä¸‹å˜é‡ï¼š\n\n- **nrOfInstances**: å®ä¾‹çš„æ€»æ•°é‡\n- **nrOfActiveInstances**: å½“å‰æ´»åŠ¨çš„ï¼Œå³å°šæœªå®Œæˆçš„å®ä¾‹çš„æ•°é‡ã€‚å¯¹äºä¸€ä¸ªè¿ç»­çš„å¤šå®ä¾‹ï¼Œè¿™å°†æ°¸è¿œæ˜¯1ã€‚\n- **nrOfCompletedInstances**: å·²ç»å®Œæˆçš„å®ä¾‹çš„æ•°é‡ã€‚\n\nè¿™äº›å€¼å¯ä»¥é€šè¿‡è°ƒç”¨ â€œexecution.getVariable(x) â€œæ–¹æ³•æ£€ç´¢ã€‚\n\næ­¤å¤–ï¼Œæ¯ä¸ªåˆ›å»ºçš„æ‰§è¡Œå°†æœ‰ä¸€ä¸ªæ‰§è¡Œæœ¬åœ°å˜é‡ï¼ˆå³å¯¹å…¶ä»–æ‰§è¡Œä¸å¯è§ï¼Œä¹Ÿä¸å­˜å‚¨åœ¨æµç¨‹å®ä¾‹çº§åˆ«ï¼‰ã€‚\n\n- **loopCounter**: è¡¨ç¤ºè¯¥ç‰¹å®šå®ä¾‹çš„`for each`å¾ªç¯ä¸­çš„ç´¢å¼•\n\nä¸ºäº†ä½¿ä¸€ä¸ªæ´»åŠ¨æˆä¸ºå¤šå®ä¾‹ï¼Œæ´»åŠ¨xmlå…ƒç´ å¿…é¡»æœ‰ä¸€ä¸ª`multiInstanceLoopCharacteristics`å­å…ƒç´ ã€‚\n\n```xml\n<multiInstanceLoopCharacteristics isSequential=\"false|true\">\n ...\n</multiInstanceLoopCharacteristics>\n```\n\n`isSequential`å±æ€§è¡¨ç¤ºè¯¥æ´»åŠ¨çš„å®ä¾‹æ˜¯æŒ‰é¡ºåºæ‰§è¡Œè¿˜æ˜¯å¹¶è¡Œæ‰§è¡Œã€‚\n\n## å¹¶è¡Œä¼šç­¾\n\n### ç»˜åˆ¶æµç¨‹å›¾\n\n![image-20221002000056981](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221002000056981.png)\n\n>loop cardinalityï¼šå¾ªç¯åŸºæ•°ã€‚å¯é€‰é¡¹ã€‚å¯ä»¥ç›´æ¥å¡«æ•´æ•°ï¼Œè¡¨ç¤ºä¼šç­¾çš„äººæ•°ã€‚\n>Collectionï¼šé›†åˆã€‚å¯é€‰é¡¹ã€‚ä¼šç­¾äººæ•°çš„é›†åˆï¼Œé€šå¸¸ä¸ºlistï¼Œå’Œloop cardinalityäºŒé€‰ä¸€ã€‚\n>Element variableï¼šå…ƒç´ å˜é‡ã€‚é€‰æ‹©Collectionæ—¶å¿…é€‰ï¼Œä¸ºcollectioné›†åˆæ¯æ¬¡éå†çš„å…ƒç´ ã€‚\n>Completion conditionï¼šå®Œæˆæ¡ä»¶ã€‚å¯é€‰ã€‚æ¯”å¦‚è®¾ç½®ä¸€ä¸ªäººå®Œæˆåä¼šç­¾ç»“æŸï¼Œé‚£ä¹ˆå…¶ä»–äººçš„ä»£åŠä»»åŠ¡éƒ½ä¼šæ¶ˆå¤±ã€‚\n\nåœ¨ç”¨æˆ·ä»»åŠ¡èŠ‚ç‚¹ç»‘å®šäº†ä¸€ä¸ªç›‘å¬å™¨ï¼Œç›‘å¬`create`è¡Œä¸ºï¼Œè¯¥ç›‘å¬å™¨æˆ‘ä»¬æ˜¯é€šè¿‡UELè¡¨è¾¾å¼æ¥å®ç°çš„ï¼Œ`mulitiInstanceTaskListener`æ˜¯æˆ‘ä»¬æ³¨å…¥åˆ°Springå®¹å™¨ä¸­çš„å¯¹è±¡ã€‚\n\n![image-20221002000233782](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221002000233782.png)\n\nç›‘å¬å™¨çš„å†…å®¹ä¸ºï¼š\n\n```java\n@Component(\"mulitiInstanceTaskListener\")\npublic class MulitiInstanceTaskListener implements Serializable {\n    \n    public void completeListener(DelegateExecution execution){\n        System.out.println(\"ä»»åŠ¡ï¼š\"+execution.getId());\n        System.out.println(\"persons:\" + execution.getVariable(\"persons\"));\n        System.out.println(\"person\" + execution.getVariable(\"person\"));\n        \n    }\n}\n```\n\nç„¶åå¯¹åº”çš„`Completion condition`æˆ‘ä»¬å¯ä»¥åœ¨Javaä»£ç ä¸­å¤„ç†\n\n```java\n@Component(\"mulitiInstanceCompleteTask\")\npublic class MulitiInstanceCompleteTask implements Serializable {\n    /**\n     * å®Œæˆä»»åŠ¡æ˜¯éœ€è¦è§¦å‘çš„æ–¹æ³•\n     * @param execution\n     * @return\n     *     false è¡¨ç¤ºä¼šç­¾ä»»åŠ¡è¿˜æ²¡æœ‰ç»“æŸ\n     \n     *     true è¡¨ç¤ºä¼šç­¾ä»»åŠ¡ç»“æŸäº†\n     */\n    public boolean completeTask(DelegateExecution execution) {\n        System.out.println(\"æ€»çš„ä¼šç­¾ä»»åŠ¡æ•°é‡ï¼š\" + execution.getVariable(\"nrOfInstances\")\n                + \"å½“å‰è·å–çš„ä¼šç­¾ä»»åŠ¡æ•°é‡ï¼š\" + execution.getVariable(\"nrOfActiveInstances\")\n                + \" - \" + \"å·²ç»å®Œæˆçš„ä¼šç­¾ä»»åŠ¡æ•°é‡ï¼š\" + execution.getVariable(\"nrOfCompletedInstances\"));\n        //æœ‰ä¸€ä¸ªäººåŒæ„å°±é€šè¿‡\n        Boolean flag = (Boolean) execution.getVariable(\"flag\");\n        System.out.println(\"å½“å‰æ„è§ï¼š\"+flag);\n        return flag;\n    }\n}\n```\n\nä¸Šé¢çš„ä¸‰ä¸ªå˜é‡æ˜¯Flowableä¸­è‡ªå¸¦çš„å¯ç”¨å˜é‡\n\n1. nrOfInstances:è¯¥ä¼šç­¾ç¯èŠ‚ä¸­æ€»å…±æœ‰å¤šå°‘ä¸ªå®ä¾‹\n\n2. nrOfActiveInstances:å½“å‰æ´»åŠ¨çš„å®ä¾‹çš„æ•°é‡ï¼Œå³è¿˜æ²¡æœ‰å®Œæˆçš„å®ä¾‹æ•°é‡ã€‚\n\n3. nrOfCompletedInstances:å·²ç»å®Œæˆçš„å®ä¾‹çš„æ•°é‡\n\n\n\n### éƒ¨ç½²æµç¨‹\n\næ™®é€šçš„éƒ¨ç½²æµç¨‹\n\n```java\n    /**\n     * éƒ¨ç½²æµç¨‹\n     */\n    @Test\n    public void deployFlow(){\n\n        Deployment deploy = repositoryService.createDeployment()\n                .name(\"å¤šå®ä¾‹\")\n                .addClasspathResource(\"flow/diagram_1.bpmn\")\n                .deploy();\n        System.out.println(\"deploy.getId() = \" + deploy.getId());\n    }\n```\n\n\n\n### å¯åŠ¨æµç¨‹\n\nåœ¨å¯åŠ¨æµç¨‹å®ä¾‹çš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦è®¾ç½®ç›¸å…³çš„å‚æ•°ï¼Œåœ¨æµç¨‹å®šä¹‰çš„æ—¶å€™è®¾ç½®çš„personsåœ¨æ­¤å¤„æˆ‘ä»¬å°±éœ€è¦è®¾ç½®äº†ï¼Œè®¾ç½®ä¸ºArrays.asList(\"å¼ ä¸‰\",\"æå››\",\"ç‹äº”\",\"èµµå…­\")ï¼Œè¿™é‡Œè®¾ç½®äº†4ä¸ªå…ƒç´ ï¼Œåœ¨æµç¨‹å®šä¹‰é‡Œå®šä¹‰äº†3ä¸ªï¼Œè¡¨ç¤ºåªä¼šå¾ªç¯3æ¬¡ï¼Œå¯åŠ¨æµç¨‹åï¼Œåœ¨Taskä¸­å¯ä»¥çœ‹åˆ°åªæœ‰3ä¸ªä»»åŠ¡\n\n```java\n    @Test\n    void startFlow() throws Exception{\n        Map<String,Object> map = new HashMap<>();\n        // è®¾ç½®å¤šäººä¼šç­¾çš„æ•°æ®\n        map.put(\"persons\", Arrays.asList(\"å¼ ä¸‰\",\"æå››\",\"ç‹äº”\",\"èµµå…­\"));\n        ProcessInstance processInstance = runtimeService\n                .startProcessInstanceById(\"myProcess:1:ba1518fc-b22d-11ec-9313-c03c59ad2248\",map);\n    }\n```\n\n\n\nå¯åŠ¨åæˆ‘ä»¬å°±å¯ä»¥åœ¨æ•°æ®åº“ä¸­çœ‹åˆ°äº§ç”Ÿäº†3ä¸ªTask\n\n![image-20221002000640899](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221002000640899.png)\n\n\n\n### å¤„ç†ä»»åŠ¡\n\nå¯åŠ¨æµç¨‹åæˆ‘ä»¬å‘ä¸‹åœ¨Taskä¸­äº§ç”Ÿäº†3æ¡ä»»åŠ¡ï¼Œæˆ‘ä»¬å…ˆé€šè¿‡TaskServiceæ¥å®Œæˆå…¶ä¸­ä¸€ä¸ªä»»åŠ¡ï¼Œè®¾ç½®ä¸€ä¸ªæ ‡å¿—flagä¸ºfalseï¼Œæ¥æ§åˆ¶ä¼šç­¾è¿˜æ²¡æœ‰ç»“æŸï¼ŒåŒæ—¶Taskä¸­å¦å¤–ä¸¤ä¸ªä»»åŠ¡è¿˜åœ¨\n\n```java\n    @Test\n    void completeTask1(){\n        Map<String,Object> map = new HashMap<>();\n        map.put(\"flag\",false);\n        taskService.complete(\"71337501-b22e-11ec-a534-c03c59ad2248\",map);\n    }\n```\n\nå½“ä»»åŠ¡æ‰§è¡Œå®Œæˆæ—¶ä¼šåŒæ­¥è§¦å‘ä¼šç­¾å®Œæˆè¡¨è¾¾å¼ä¸­å¯¹è±¡æ–¹æ³•ã€‚æœ‰å¦‚ä¸‹çš„è¾“å‡º\n\n![image-20221002000853424](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221002000853424.png)\n\nåŒæ—¶Taskè¡¨ä¸­çš„è®°å½•è¿˜æœ‰ä¸¤æ¡\n\n![image-20221002000931060](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221002000931060.png)\n\nç„¶åå½“æˆ‘ä»¬åœ¨å®Œæˆä¸€ä¸ªä»»åŠ¡ï¼Œè¿™æ—¶è®¾ç½®flagä¸ºtrueï¼Œä¼šå‘ç°åœ¨è¿™ä¸ªå¤šäººå¤„ç†ä¸­ï¼Œæœ€å¤š3ä¸ªäººå¤„ç†åœ¨ç¬¬äºŒä¸ªäººå¤„ç†åå°±ç»“æŸäº†\n\n```java\n    @Test\n    void completeTask1(){\n        Map<String,Object> map = new HashMap<>();\n        map.put(\"flag\",true); // è®¾ç½®ä¸ºtrue ç»“æŸå¤šäººä¼šç­¾\n        taskService.complete(\"713570d4-b22e-11ec-a534-c03c59ad2248\",map);\n        System.out.println(\"complete ....\");\n    }\n```\n\nè¿™æ—¶ä»»åŠ¡èŠ‚ç‚¹å°±ç»“æŸäº†~\n\n## ä¸²è¡Œä¼šç­¾\n\nä¸²è¡Œä¼šç­¾æŒ‡çš„æ˜¯åœ¨å¤šå®ä¾‹ä¸­ï¼Œå¤„ç†äººæŒ‰ç…§å¯¹åº”çš„é¡ºåºæ¥ä¸€ä¸ªä¸ªçš„å¤„ç†ä»»åŠ¡ã€‚\n\n### æµç¨‹å›¾\n\n![image-20221002001501320](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221002001501320.png)\n\nä¸Šé¢å®šä¹‰çš„æ˜¯ä¸€ä¸ª`ä¸²è¡Œä¼šç­¾`çš„æµç¨‹å›¾ã€‚å¾ªç¯3æ¬¡ï¼Œé›†åˆæ•°æ®åœ¨`persons`ä¸­ï¼Œæ¯æ¬¡å¾ªç¯çš„æ•°æ®å­˜å‚¨åœ¨å¾ªç¯å˜é‡`person`ä¸­ï¼ŒåŒæ—¶`person`ä¹Ÿæ˜¯å¯¹åº”çš„å¤„ç†äººçš„æµç¨‹å˜é‡ã€‚\n\n\n\n### éƒ¨ç½²å’Œå¯åŠ¨æµç¨‹\n\néƒ¨ç½²å°±æ˜¯æ­£å¸¸çš„éƒ¨ç½²äº†ï¼Œä¸å†èµ˜è¿°ï¼Œå¯åŠ¨æµç¨‹çš„æ—¶å€™æˆ‘ä»¬éœ€è¦å¯¹é›†åˆåšèµ‹å€¼ã€‚\n\n```java\n    @Test\n    public void startFlow(){\n        Map<String,Object> map = new HashMap<>();\n        // è®¾ç½®å¤šäººä¼šç­¾çš„æ•°æ® ä¸²è¡Œä¼šæŒ‰ç…§é›†åˆçš„å¾ªåºæ¥å¤„ç†\n        map.put(\"persons\", Arrays.asList(\"å¼ ä¸‰\",\"æå››\",\"ç‹äº”\",\"èµµå…­\"));\n        String processDefId = \"Process_0ltwc4j:1:bd87ed49-41a3-11ed-9ec4-c03c59ad2248\";\n        ProcessInstance processInstance = runtimeService.startProcessInstanceById(processDefId,map);\n        System.out.println(\"processInstance.getId() = \" + processInstance.getId());\n    }\n```\n\nå¯åŠ¨åä¼šåˆ›å»ºä¸€ä¸ªTaskï¼Œå¤„ç†äººæ˜¯`å¼ ä¸‰`ã€‚ç„¶åå¤„ç†å®Œæˆåä¼šåˆ›å»ºä¸‹ä¸€ä¸ªtaskï¼Œå¤„ç†äººæ˜¯`æå››`æŒ‰å¾ªåºæ¥å¤„ç†äº†ã€‚\n\n\n\n\n\n# ä»»åŠ¡å›é€€\n\nä»»åŠ¡å›é€€é©³å›æ’¤é”€ç›¸å…³çš„æ“ä½œåœ¨å®é™…çš„å¼€å‘ä¸­è¿˜æ˜¯ä¼šç»å¸¸é‡åˆ°çš„ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹Camundaä¸­é’ˆå¯¹è¿™äº›æƒ…å†µæ˜¯å¦‚ä½•å¤„ç†çš„ã€‚\n\n## ä¸²è¡Œçš„å›é€€\n\næˆ‘ä»¬å…ˆä»æœ€ç®€å•çš„ä¸²è¡Œæµç¨‹æ¥åˆ†æï¼Œæ¡ˆä¾‹å¦‚ä¸‹\n\n![image-20221005155134800](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221005155134800.png)\n\nä¸Šé¢çš„æµç¨‹å°±æ˜¯ä¸€ä¸ªéå¸¸ç®€å•çš„ä¸²è¡Œä»»åŠ¡ï¼Œå®šä¹‰äº†4ä¸ªç”¨æˆ·ä»»åŠ¡ï¼ŒæŒ‡æ´¾çš„å¤„ç†äººåˆ†åˆ«æ˜¯`user1`,`user2`,`user3`,`user4`.åœ¨æµç¨‹çš„æ‰§è¡Œè¿‡ç¨‹ä¸­æˆ‘ä»¬å¯ä»¥é€šè¿‡å›é€€æ¥æ¼”ç¤ºå…·ä½“çš„æ•ˆæœã€‚é¦–å…ˆæ¥éƒ¨ç½²æµç¨‹\n\n```java\n    /**\n     * å®Œæˆæµç¨‹çš„éƒ¨ç½²æ“ä½œ\n     */\n    @Test\n    public void deploy(){\n        Deployment deploy = repositoryService.createDeployment()\n                .name(\"å›é€€\")\n                .addClasspathResource(\"flow/ä¸²è¡Œå›é€€.bpmn\")\n                .deploy();\n        System.out.println(\"deploy.getId() = \" + deploy.getId());\n    }\n    /**\n     * é€šè¿‡æµç¨‹å®šä¹‰Id å¯åŠ¨\n     */\n    @Test\n    public void startFlow(){\n        String processId = \"Process_1up6ocm:1:d924ab29-43f9-11ed-b4f1-c03c59ad2248\";\n        ProcessInstance processInstance = runtimeService.startProcessInstanceById(processId);\n        System.out.println(\"processInstance.getId() = \" + processInstance.getId());\n    }\n```\n\nç„¶åæˆ‘ä»¬é€šè¿‡user1å®Œæˆä»»åŠ¡ï¼Œç›´åˆ°user3å®Œæˆä»»åŠ¡ï¼Œåˆ°user4æ¥å¤„ç†ä»»åŠ¡ã€‚\n\n```java\n    /**\n     * å®Œæˆä»»åŠ¡\n     */\n    @Test\n    public void completeTask(){\n        taskService.complete(\"45bf40bf-43fa-11ed-8abe-c03c59ad2248\");\n    }\n```\n\n![image-20221004233745178](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221004233745178.png)\n\nç„¶åæˆ‘ä»¬æ¥å®Œæˆå›é€€åˆ°`user3`\n\n```java\n    /**\n     * ä»»åŠ¡å›é€€\n     *\n     */\n    @Test\n    public void rollbackTask(){\n        String processInstanceId = \"cb7b11bf-4486-11ed-bbb6-c03c59ad2248\";\n        runtimeService.createProcessInstanceModification(processInstanceId)\n                        .startBeforeActivity(\"Activity_17ubvwq\") // å›é€€åˆ°å¯¹åº”çš„èŠ‚ç‚¹å‰  é€šè¿‡ èŠ‚ç‚¹çš„key æ¥å®ç°\n                       // .cancelActivityInstance(processInstanceId) // æ•´ä¸ªä»»åŠ¡ä¼šå–æ¶ˆ\n                        .cancelAllForActivity(\"Activity_0jyi1pp\") // å–æ¶ˆåŸæ¥çš„èŠ‚ç‚¹\n                        .execute();\n        /*String processDefinitionId = \"\";\n        runtimeService.createModification(\"\");*/\n    }\n```\n\næ•ˆæœï¼š\n\n![image-20221005155543672](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221005155543672.png)\n\nç„¶ååœ¨å†å²è¡¨ä¸­å¯ä»¥çœ‹åˆ°å¯¹åº”çš„èµ°å‘\n\n![image-20221005155709087](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221005155709087.png)\n\nå…·ä½“è¿‡ç¨‹ä¸ºï¼š\n\n![image-20221005155909565](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221005155909565.png)\n\nç„¶åæˆ‘ä»¬å¯ä»¥ä»`user3`å›é€€åˆ°`user1`\n\n![image-20221005160133670](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221005160133670.png)\n\n![image-20221005160200316](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221005160200316.png)\n\nè¦å–æ¶ˆå½“å‰çš„ä»»åŠ¡ç›´æ¥è°ƒç”¨`cancelActivityInstance(processInstanceId)`æ–¹æ³•å³å¯ã€‚\n\nç›¸å…³æ–¹æ³•è¯´æ˜ï¼š\n\n| ç±»åˆ«                       | æ–¹æ³•                                                         |\n| -------------------------- | ------------------------------------------------------------ |\n| åœ¨æ´»åŠ¨å‰å¯åŠ¨               | å›é€€åˆ°è¿™ä¸ªèŠ‚ç‚¹                                               |\n|                            | startBeforeActivity(String activityId)                       |\n|                            | startBeforeActivity(String activityId, String ancestorActivityInstanceId) |\n| åœ¨æ´»åŠ¨åå¯åŠ¨               | é€šè¿‡ `startAfterActivity` åœ¨ä¸€ä¸ªæ´»åŠ¨ä¹‹åè¿è¡Œï¼Œæ„å‘³ç€å°†ä»æ´»åŠ¨çš„ä¸‹ä¸€èŠ‚ç‚¹å¼€å§‹æ‰§è¡Œ |\n|                            | startAfterActivity(String activityId)                        |\n|                            | startAfterActivity(String activityId, String ancestorActivityInstanceId) |\n| å¯åŠ¨ä¸€ä¸ªè¿‡æ¸¡               | é€šè¿‡ `startTransition` å¯åŠ¨ä¸€ä¸ªè¿‡æ¸¡ï¼Œå°±æ„å‘³ç€åœ¨ä¸€ä¸ªç»™å®šçš„åºåˆ—æµä¸Šå¼€å§‹æ‰§è¡Œã€‚å½“æœ‰å¤šä¸ªæµå‡ºçš„åºåˆ—æµæ—¶ï¼Œè¿™å¯ä»¥ä¸ `startAfterActivity` ä¸€èµ·ä½¿ç”¨ã€‚å¦‚æœæˆåŠŸï¼Œè¯¥æŒ‡ä»¤ä»åºåˆ—æµå¼€å§‹æ‰§è¡Œæµç¨‹æ¨¡å‹ï¼Œç›´åˆ°è¾¾åˆ°ç­‰å¾…çŠ¶æ€ã€‚ |\n|                            | startTransition(String transitionId)                         |\n|                            | startTransition(String transition, String ancestorActivityInstanceId) |\n| å–æ¶ˆä¸€ä¸ªæ´»åŠ¨å®ä¾‹           | é€šè¿‡`cancelActivityInstance`å–æ¶ˆä¸€ä¸ªç‰¹å®šçš„æ´»åŠ¨å®ä¾‹ã€‚æ—¢å¯ä»¥æ˜¯ä¸€ä¸ªæ´»åŠ¨å®ä¾‹ï¼Œå¦‚ç”¨æˆ·ä»»åŠ¡çš„å®ä¾‹ï¼Œä¹Ÿå¯ä»¥æ˜¯å±‚æ¬¡ç»“æ„ä¸­æ›´é«˜èŒƒå›´çš„å®ä¾‹ï¼Œå¦‚å­æµç¨‹çš„å®ä¾‹ |\n|                            | cancelActivityInstance(String activityInstanceId)            |\n| å–æ¶ˆä¸€ä¸ªè¿‡æ¸¡å®ä¾‹           | è¿‡æ¸¡å®ä¾‹è¡¨ç¤ºå³å°†ä»¥å¼‚æ­¥å»¶ç»­çš„å½¢å¼è¿›å…¥/ç¦»å¼€ä¸€ä¸ªæ´»åŠ¨çš„æ‰§è¡Œæµã€‚ä¸€ä¸ªå·²ç»åˆ›å»ºä½†å°šæœªæ‰§è¡Œçš„å¼‚æ­¥å»¶ç»­Jobè¢«è¡¨ç¤ºä¸ºä¸€ä¸ªè¿‡æ¸¡å®ä¾‹ã€‚è¿™äº›å®ä¾‹å¯ä»¥é€šè¿‡`cancelTransitionInstance`æ¥å–æ¶ˆ |\n|                            | cancelTransitionInstance(String activityInstanceId)          |\n| å–æ¶ˆä¸€ä¸ªæ´»åŠ¨çš„æ‰€æœ‰æ´»åŠ¨å®ä¾‹ | é€šè¿‡æŒ‡ä»¤ `cancelAllForActivity` æ¥å–æ¶ˆä¸€ä¸ªç‰¹å®šæ´»åŠ¨çš„æ‰€æœ‰æ´»åŠ¨å’Œè¿‡æ¸¡å®ä¾‹ã€‚ |\n|                            | cancelAllForActivity(String activityId)                      |\n\n\n\n## å¹¶è¡Œçš„å›é€€\n\næ¥ä¸‹æ¥æˆ‘ä»¬åœ¨å¹¶è¡Œçš„åœºæ™¯ä¸­æ¥çœ‹çœ‹å„ç§å›é€€çš„åœºæ™¯ã€‚å…·ä½“æ¡ˆä¾‹æµç¨‹å¦‚ä¸‹ï¼š\n\n![image-20221005193633031](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221005193633031.png)\n\néƒ¨ç½²åï¼Œå¯åŠ¨æµç¨‹å®ä¾‹ã€‚è¿è¡Œåˆ°å¦‚ä¸‹çš„èŠ‚ç‚¹ï¼Œç„¶åå›é€€åˆ°`ç”¨æˆ·å®¡æ‰¹1`\n\n![image-20221005193931957](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221005193931957.png)\n\nç„¶åæˆ‘ä»¬æ¥åšå›é€€æ“ä½œ\n\n```java\n    @Test\n    public void rollbackTask(){\n        String processInstanceId = \"a1d40268-44a2-11ed-9b63-c03c59ad2248\";\n        runtimeService.createProcessInstanceModification(processInstanceId)\n                        .startBeforeActivity(\"Activity_0n0ddnj\") // å›é€€åˆ°å¯¹åº”çš„èŠ‚ç‚¹å‰  é€šè¿‡ èŠ‚ç‚¹çš„key æ¥å®ç°\n                       // .cancelActivityInstance(processInstanceId) // æ•´ä¸ªä»»åŠ¡ä¼šå–æ¶ˆ\n                        .cancelAllForActivity(\"Activity_184rpuo\") // å–æ¶ˆåŸæ¥çš„èŠ‚ç‚¹\n                        .cancelAllForActivity(\"Activity_08w6j91\")\n                        .execute();\n        /*String processDefinitionId = \"\";\n        runtimeService.createModification(\"\");*/\n    }\n```\n\nä¸Šé¢æˆ‘ä»¬æ ¹æ®æµç¨‹`å®ä¾‹å›é€€`åŒæ—¶éœ€è¦å–æ¶ˆæ‰ä¹‹å‰çš„ä¸¤ä¸ªèŠ‚ç‚¹ã€‚åœ¨å†å²è¡¨ä¸­ä¹Ÿå¯ä»¥çœ‹åˆ°è¿™ä¸ªæµç¨‹\n\n![image-20221005194635852](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221005194635852.png)\n\nåœ¨ä¸Šé¢ä¾‹å­çš„åŸºç¡€ä¸Šæˆ‘ä»¬æ¥å®ç°å¦‚ä¸‹çš„æµç¨‹å›é€€æ“ä½œã€‚\n\n![image-20221005194807783](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221005194807783.png)\n\n![image-20221005194904013](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221005194904013.png)\n\nå…·ä½“çš„å›é€€ä»£ç \n\n```java\n    @Test\n    public void rollbackTask(){\n        String processInstanceId = \"a1d40268-44a2-11ed-9b63-c03c59ad2248\";\n        runtimeService.createProcessInstanceModification(processInstanceId)\n                        .startBeforeActivity(\"Activity_184rpuo\") // å›é€€åˆ°å¯¹åº”çš„èŠ‚ç‚¹å‰  é€šè¿‡ èŠ‚ç‚¹çš„key æ¥å®ç°\n                        .startBeforeActivity(\"Activity_08w6j91\")\n                        .cancelAllForActivity(\"Activity_0ma3n4p\") // å–æ¶ˆåŸæ¥çš„èŠ‚ç‚¹\n                        .execute();\n    }\n```\n\nç„¶åæŸ¥çœ‹å†å²ä»»åŠ¡åŒæ ·å¯ä»¥çœ‹åˆ°å…·ä½“çš„å®ç°\n\n![image-20221005195142559](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221005195142559.png)\n\n\n\n## æ’ä»–ç½‘å…³å›é€€\n\nç„¶åæˆ‘ä»¬æ¥çœ‹çœ‹åœ¨æœ‰æ’ä»–ç½‘å…³çš„æƒ…å†µä¸‹ï¼Œå¦‚æœæˆ‘ä»¬è¦è°ƒæ•´æµç¨‹çš„èµ°å‘åº”è¯¥è¦æ€ä¹ˆæ¥å¤„ç†ã€‚\n\n![image-20221005200528761](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221005200528761.png)\n\nä¹Ÿå°±æ˜¯å®é™…çš„åœºæ™¯ä¸­å¯èƒ½å…ˆèµ°åˆ°äº†`ç”¨æˆ·2`å®¡æ‰¹ï¼Œåé¢å‘ç°ä¸åˆç†ï¼Œå°±éœ€è¦å›é€€åˆ°`ç”¨æˆ·1`åé¢ç„¶åå†è°ƒæ•´æµç¨‹å˜é‡ï¼Œæµè½¬åˆ°`ç”¨æˆ·3`å¤„ã€‚\n\n![image-20221005200901486](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221005200901486.png)\n\nç„¶åæˆ‘ä»¬æ¥çœ‹çœ‹å…·ä½“çš„å›é€€æ“ä½œ\n\n```java\n    @Test\n    public void rollbackTask(){\n        String processInstanceId = \"6a70a33b-44a6-11ed-8557-c03c59ad2248\";\n        runtimeService.createProcessInstanceModification(processInstanceId)\n                        .startBeforeActivity(\"Gateway_0ah4coh\") // å›é€€åˆ°æ’ä»–ç½‘å…³ä¹‹å‰\n                        .setVariable(\"num\",-1) // è®¾ç½®æµç¨‹å˜é‡\n                        .cancelAllForActivity(\"Activity_0x9stxl\") // å–æ¶ˆåŸæ¥çš„èŠ‚ç‚¹\n                        .execute();\n    }\n\n```\n\nå›é€€åˆ°`æ’ä»–ç½‘å…³`èŠ‚ç‚¹ï¼Œç„¶åè®¾ç½®æµç¨‹å˜é‡`num=-1`ç„¶åä¼šèµ°`ç”¨æˆ·3`çš„å®¡æ‰¹ã€‚åŒæ—¶å–æ¶ˆåŸæ¥èŠ‚ç‚¹çš„å®¡æ‰¹\n\n![image-20221005201429581](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221005201429581.png)\n\n\nç„¶åæˆ‘ä»¬æ¥çœ‹çœ‹æœ‰å­æµç¨‹çš„åœºæ™¯ä¸‹çš„å›é€€å¤„ç†\n\n![image-20221005204950474](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221005204950474.png)\n\næˆ‘ä»¬æ¥çœ‹çœ‹ä»å­æµç¨‹å›é€€åˆ°ä¸»æµç¨‹çš„æ“ä½œã€‚\n\n![image-20221005205324729](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221005205324729.png)\n\n```java\n    @Test\n    public void rollbackTask(){\n        String processInstanceId = \"a3311551-44ac-11ed-97c0-c03c59ad2248\";\n        runtimeService.createProcessInstanceModification(processInstanceId)\n                        .startBeforeActivity(\"Activity_00kwccq\") // å›é€€åˆ°æ’ä»–ç½‘å…³ä¹‹å‰\n                        .cancelAllForActivity(\"Activity_01835pn\") // å–æ¶ˆåŸæ¥çš„èŠ‚ç‚¹\n                        .execute();\n    }\n```\n\nåœ¨å†å²è¡¨ä¸­æŸ¥çœ‹è®°å½•\n\n![image-20221005205659817](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221005205659817.png)\n\n\n\n## é‡å¯/æ¢å¤å®ä¾‹\n\nåœ¨æµç¨‹å®ä¾‹ç»ˆæ­¢åï¼Œå…¶å†å²æ•°æ®ä»ç„¶å­˜åœ¨ï¼Œå¹¶ä¸”å¯ä»¥è¢«è®¿é—®ä»¥é‡å¯æµç¨‹å®ä¾‹ï¼Œå‰ææ˜¯å†å²çº§åˆ«è¢«è®¾ç½®ä¸ºFULLã€‚ ä¾‹å¦‚ï¼Œå½“æµç¨‹æ²¡æœ‰ä»¥æœŸæœ›çš„æ–¹å¼ç»ˆæ­¢æ—¶ï¼Œé‡å¯æµç¨‹å®ä¾‹æ˜¯æœ‰ç”¨çš„ã€‚è¿™ä¸ªAPIçš„ä½¿ç”¨çš„å…¶ä»–å¯èƒ½æƒ…å†µæœ‰ï¼š\n\n- æ¢å¤è¢«é”™è¯¯åœ°å–æ¶ˆçš„æµç¨‹å®ä¾‹çš„åˆ°æœ€åçŠ¶æ€\n- ç”±äºé”™è¯¯è·¯ç”±å¯¼è‡´æµç¨‹å®ä¾‹ç»ˆæ­¢åï¼Œé‡å¯æµç¨‹å®ä¾‹\n\nä¸ºäº†æ‰§è¡Œè¿™æ ·çš„æ“ä½œï¼Œæµç¨‹å¼•æ“æä¾›äº† *æµç¨‹å®ä¾‹é‡å¯API* `RuntimeService.restartProcessInstances(..)` ã€‚è¯¥APIå…è®¸é€šè¿‡ä½¿ç”¨æµå¼æ„å»ºå™¨åœ¨ä¸€æ¬¡è°ƒç”¨ä¸­æŒ‡å®šå¤šä¸ªå®ä¾‹åŒ–æŒ‡ä»¤ã€‚\n\n![image-20221005210910364](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221005210910364.png)\n\néƒ¨ç½²å¯åŠ¨æµç¨‹å®ä¾‹åè¿›å…¥å¹¶è¡Œç½‘å…³ã€‚ç„¶åæµç¨‹å®ä¾‹è¢«ä¸­æ–­äº†\n\n```java\n    @Test\n    public void deleteProcessId(){\n        String processId = \"cfd58b31-44ae-11ed-92f5-c03c59ad2248\";\n        runtimeService.deleteProcessInstance(processId,\"æµ‹è¯•åˆ é™¤\");\n    }\n```\n\n![image-20221005211329315](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221005211329315.png)\n\nä¹‹åï¼Œæˆ‘ä»¬å†³å®šæ¢å¤è¯¥æµç¨‹å®ä¾‹åˆ°æœ€åçŠ¶æ€ï¼š\n\n```java\n    @Test\n    public void recoveryProcessInstancess(){\n        runtimeService\n                .restartProcessInstances(\"Process_08wyw1g:1:ad8f483f-44ae-11ed-aee8-c03c59ad2248\") // æµç¨‹å®šä¹‰ID\n                .startBeforeActivity(\"Activity_03vnv63\")\n                .startBeforeActivity(\"Activity_0b7mtmx\")\n                .processInstanceIds(\"cfd58b31-44ae-11ed-92f5-c03c59ad2248\") // æµç¨‹å®ä¾‹ID\n                .execute();\n    }\n```\n\næµç¨‹å®ä¾‹å·²ç»ç”¨æœ€åä¸€ç»„å˜é‡é‡å¯äº†ã€‚ç„¶è€Œï¼Œåœ¨é‡å¯çš„æµç¨‹å®ä¾‹ä¸­ï¼Œåªæœ‰å…¨å±€å˜é‡è¢«æ¢å¤äº†ã€‚ æœ¬åœ°å˜é‡è¿˜éœ€è¦è°ƒç”¨ `RuntimeService.setVariableLocal(..)` æ‰‹åŠ¨è®¾ç½®ã€‚\n\n>ä»æŠ€æœ¯ä¸Šè®²ï¼Œåˆ›å»ºçš„æ˜¯ä¸€ä¸ªæ–°çš„æµç¨‹å®ä¾‹ã€‚\n>\n>**è¯·æ³¨æ„:** å†å²æµç¨‹å’Œé‡å¯çš„æµç¨‹å®ä¾‹çš„idæ˜¯ä¸åŒçš„ã€‚\n\n\n\n\n\n# åŠ¨æ€è¡¨å•\n\næ¥ä¸‹æ¥æˆ‘ä»¬çœ‹çœ‹åŠ¨æ€è¡¨å•çš„åº”ç”¨ï¼Œåœ¨Camundaä¸­è¡¨å•åˆ†ä¸ºå†…ç½®è¡¨å•å’ŒåŠ¨æ€è¡¨å•ã€‚\n\n## å†…ç½®è¡¨å•\n\nå†…ç½®è¡¨å•å°±æ˜¯åœ¨ç»˜åˆ¶æµç¨‹å›¾çš„æ—¶å€™åŒæ—¶ç»˜åˆ¶è¡¨å•ã€‚è¿™ç§æ–¹å¼å…¶å®å°±æ˜¯ç»‘å®šäº†å¯¹åº”çš„æµç¨‹å˜é‡ï¼Œä¸æ˜¯å¤ªçµæ´»ã€‚ä½†è¿˜æ˜¯æ¥è®²è§£ä¸‹ã€‚\n\n![image-20221014160336988](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221014160336988.png)\n\n### å¯åŠ¨æµç¨‹ç»‘å®š\n\næˆ‘ä»¬å…ˆæ¥çœ‹ä¸‹åœ¨å¯åŠ¨æµç¨‹çš„æ—¶å€™å°±è®¾ç½®ç›¸å…³çš„è¡¨å•\n\n![image-20221014160501005](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221014160501005.png)\n\nå¯¹åº”çš„æµç¨‹å›¾\n\n```xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<bpmn:definitions xmlns:bpmn=\"http://www.omg.org/spec/BPMN/20100524/MODEL\" xmlns:bpmndi=\"http://www.omg.org/spec/BPMN/20100524/DI\" xmlns:dc=\"http://www.omg.org/spec/DD/20100524/DC\" xmlns:camunda=\"http://camunda.org/schema/1.0/bpmn\" xmlns:di=\"http://www.omg.org/spec/DD/20100524/DI\" xmlns:modeler=\"http://camunda.org/schema/modeler/1.0\" id=\"Definitions_1pnd5o3\" targetNamespace=\"http://bpmn.io/schema/bpmn\" exporter=\"Camunda Modeler\" exporterVersion=\"4.12.0\" modeler:executionPlatform=\"Camunda Platform\" modeler:executionPlatformVersion=\"7.15.0\">\n  <bpmn:process id=\"Process_13abncz\" isExecutable=\"true\">\n    <bpmn:startEvent id=\"StartEvent_1\">\n      <bpmn:extensionElements>\n        <camunda:formData>\n          <camunda:formField id=\"days\" label=\"è¯·å‡å¤©æ•°\" type=\"long\" defaultValue=\"1\" />\n          <camunda:formField id=\"reason\" label=\"è¯·å‡åŸå› \" type=\"string\" />\n        </camunda:formData>\n      </bpmn:extensionElements>\n      <bpmn:outgoing>Flow_09xirvq</bpmn:outgoing>\n    </bpmn:startEvent>\n    <bpmn:sequenceFlow id=\"Flow_09xirvq\" sourceRef=\"StartEvent_1\" targetRef=\"Activity_0a81mdi\" />\n    <bpmn:sequenceFlow id=\"Flow_1i0viip\" sourceRef=\"Activity_0a81mdi\" targetRef=\"Activity_01qg6se\" />\n    <bpmn:endEvent id=\"Event_1mj58zz\">\n      <bpmn:incoming>Flow_1asp8i3</bpmn:incoming>\n    </bpmn:endEvent>\n    <bpmn:sequenceFlow id=\"Flow_1asp8i3\" sourceRef=\"Activity_01qg6se\" targetRef=\"Event_1mj58zz\" />\n    <bpmn:userTask id=\"Activity_0a81mdi\" name=\"ç”¨æˆ·ä»»åŠ¡1\" camunda:assignee=\"demo\">\n      <bpmn:incoming>Flow_09xirvq</bpmn:incoming>\n      <bpmn:outgoing>Flow_1i0viip</bpmn:outgoing>\n    </bpmn:userTask>\n    <bpmn:userTask id=\"Activity_01qg6se\" name=\"ç”¨æˆ·ä»»åŠ¡2\" camunda:assignee=\"demo\">\n      <bpmn:incoming>Flow_1i0viip</bpmn:incoming>\n      <bpmn:outgoing>Flow_1asp8i3</bpmn:outgoing>\n    </bpmn:userTask>\n  </bpmn:process>\n  <bpmndi:BPMNDiagram id=\"BPMNDiagram_1\">\n    <bpmndi:BPMNPlane id=\"BPMNPlane_1\" bpmnElement=\"Process_13abncz\">\n      <bpmndi:BPMNEdge id=\"Flow_09xirvq_di\" bpmnElement=\"Flow_09xirvq\">\n        <di:waypoint x=\"188\" y=\"117\" />\n        <di:waypoint x=\"240\" y=\"117\" />\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge id=\"Flow_1i0viip_di\" bpmnElement=\"Flow_1i0viip\">\n        <di:waypoint x=\"340\" y=\"117\" />\n        <di:waypoint x=\"400\" y=\"117\" />\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge id=\"Flow_1asp8i3_di\" bpmnElement=\"Flow_1asp8i3\">\n        <di:waypoint x=\"500\" y=\"117\" />\n        <di:waypoint x=\"562\" y=\"117\" />\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNShape id=\"_BPMNShape_StartEvent_2\" bpmnElement=\"StartEvent_1\">\n        <dc:Bounds x=\"152\" y=\"99\" width=\"36\" height=\"36\" />\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape id=\"Event_1mj58zz_di\" bpmnElement=\"Event_1mj58zz\">\n        <dc:Bounds x=\"562\" y=\"99\" width=\"36\" height=\"36\" />\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape id=\"Activity_09e81f3_di\" bpmnElement=\"Activity_0a81mdi\">\n        <dc:Bounds x=\"240\" y=\"77\" width=\"100\" height=\"80\" />\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape id=\"Activity_0ot1277_di\" bpmnElement=\"Activity_01qg6se\">\n        <dc:Bounds x=\"400\" y=\"77\" width=\"100\" height=\"80\" />\n      </bpmndi:BPMNShape>\n    </bpmndi:BPMNPlane>\n  </bpmndi:BPMNDiagram>\n</bpmn:definitions>\n\n```\n\nå¯ä»¥çœ‹åˆ°å¯¹åº”çš„xmlä¸­å°±é…ç½®äº†è¡¨å•çš„æ•°æ®\n\n![image-20221014160601636](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221014160601636.png)\n\n\n\néƒ¨ç½²æµç¨‹\n\n```java\n    /**\n     * å®Œæˆæµç¨‹çš„éƒ¨ç½²æ“ä½œ\n     */\n    @Test\n    public void deploy(){\n        Deployment deploy = repositoryService.createDeployment()\n                .name(\"è¡¨å•01\")\n                .addClasspathResource(\"flow/è¡¨å•-01.bpmn\")\n                .deploy();\n        System.out.println(\"deploy.getId() = \" + deploy.getId());\n    }\n```\n\néƒ¨ç½²å®Œæµç¨‹åæˆ‘ä»¬å¯ä»¥é€šè¿‡å¯¹åº”çš„APIæŸ¥çœ‹æµç¨‹å¯¹åº”çš„è¡¨å•ä¿¡æ¯\n\n```java\n@Test\npublic void getStartFromData(){\n    String processDefId = \"Process_13abncz:1:5d39867a-4b6e-11ed-9748-c03c59ad2248\";\n    // æ ¹æ®æµç¨‹å®šä¹‰æ‰¾åˆ°å¯¹åº”çš„ è¡¨å•æ•°æ®ã€‚\n    StartFormData startFormData = formService\n        .getStartFormData(processDefId);\n    // æ‰¾åˆ°å¯¹åº”çš„è¡¨å•åŸŸçš„é›†åˆ\n    List<FormField> formFields = startFormData.getFormFields();\n    for (FormField formField : formFields) {\n        // è·å–æ¯ä¸ªå…·ä½“çš„è¡¨å•åŸŸ\n        System.out.println(formField.getId() + \" \" + formField.getLabel() + \" \" + formField.getValue().getValue());\n    }\n}\n```\n\n![image-20221014161737726](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221014161737726.png)\n\nå¯åŠ¨æµç¨‹ï¼šä¸¤ç§æ–¹å¼\n\n```java\n    /**\n     * æ­£å¸¸çš„å¯åŠ¨æµç¨‹\n     */\n    @Test\n    void startFormFlow() throws Exception{\n        String processDefId = \"Process_13abncz:1:5d39867a-4b6e-11ed-9748-c03c59ad2248\";\n        Map<String,Object> map = new HashMap<>();\n        map.put(\"days\",\"5\");\n        map.put(\"reason\",\"æƒ³ä¼‘æ¯ä¸‹\");\n        // æ­£å¸¸å¯åŠ¨çš„æ—¶å€™å¯ä»¥é€šè¿‡æµç¨‹å˜é‡æ¥ç»™è¡¨å•è®¾ç½®æ•°æ®ï¼Œä¹Ÿå¯ä»¥ä¸è®¾ç½®\n        ProcessInstance processInstance = runtimeService\n                .startProcessInstanceById(processDefId,map);\n    }\n\n    /**\n     * é€šè¿‡FormServiceæ¥å¯åŠ¨ä¸€ä¸ªè¡¨å•æµç¨‹\n     * @throws Exception\n     */\n    @Test\n    void startFormServiceFlow() throws Exception{\n        String processDefId = \"Process_13abncz:1:5d39867a-4b6e-11ed-9748-c03c59ad2248\";\n        Map<String,Object> map = new HashMap<>();\n        map.put(\"days\",2);\n        map.put(\"reason\",\"å‡ºå»ç©ç©\");\n        ProcessInstance processInstance = formService.submitStartForm(processDefId,map);\n    }\n```\n\nå¯åŠ¨æµç¨‹åèµ°åˆ°äº†`ç”¨æˆ·ä»»åŠ¡1`è¿™ä¸ªèŠ‚ç‚¹\n\n![image-20221014162003762](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221014162003762.png)\n\næƒ³è¦æŸ¥çœ‹å¯¹åº”çš„è¡¨å•æ•°æ®ã€‚é€šè¿‡å¦‚ä¸‹æ–¹æ³•å¯ä»¥å®ç°\n\n```java\n    /**\n     * æ ¹æ®Taskç¼–å·æ¥æŸ¥çœ‹è¡¨å•æ•°æ®\n     */\n    @Test\n    void getTaskFormData(){\n        String taskId = \"426b11e6-4b85-11ed-b15a-c03c59ad2248\";\n\n        String processDefId = \"Process_13abncz:1:5d39867a-4b6e-11ed-9748-c03c59ad2248\";\n        // æ ¹æ®æµç¨‹å®šä¹‰æ‰¾åˆ°å¯¹åº”çš„ è¡¨å•æ•°æ®ã€‚\n        StartFormData startFormData = formService.getStartFormData(processDefId);\n        List<FormField> formFields = startFormData.getFormFields();\n        for (FormField formField : formFields) {\n            // è·å–æ¯ä¸ªå…·ä½“çš„è¡¨å•åŸŸ\n            System.out.println(formField.getId() + \" \" + formField.getLabel() + \" \" + formField.getValue().getValue());\n            // æ ¹æ®taskId æ‰¾åˆ°å¯¹åº”çš„æµç¨‹å˜é‡çš„å€¼ ä¹Ÿå°±æ˜¯ è¡¨å•çš„æ•°æ®\n            System.out.println(formField.getId() + \" = \" + taskService.getVariable(taskId, formField.getId()));\n        }\n    }\n```\n\n\n\n![image-20221014162117179](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221014162117179.png)\n\n### ä»»åŠ¡èŠ‚ç‚¹ç»‘å®š\n\nä¸Šçš„æ–¹å¼ç»‘å®šçš„è¡¨å•æ•°æ®åœ¨æ•´ä¸ªæµç¨‹å®ä¾‹è¿ä½œä¸­éƒ½å¯ä»¥ä½¿ç”¨ï¼Œè¿˜æœ‰ä¸€ç§æ–¹å¼æˆ‘ä»¬æ˜¯åœ¨å…·ä½“çš„ä»»åŠ¡èŠ‚ç‚¹ä¸Šç»‘å®šè¡¨å•æ•°æ®ã€‚æˆ‘ä»¬æ¥çœ‹çœ‹ã€‚\n\n![image-20221014162658765](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221014162658765.png)\n\næµç¨‹å›¾ä¸­æ˜¯åœ¨ `ç”¨æˆ·ä»»åŠ¡01` è¿™ä¸ªèŠ‚ç‚¹ç»‘å®šçš„è¡¨å•æ•°æ®äº†\n\n![image-20221014162905992](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221014162905992.png)\n\néƒ¨ç½²æµç¨‹ï¼š\n\n```java\n    /**\n     * å®Œæˆæµç¨‹çš„éƒ¨ç½²æ“ä½œ\n     */\n    @Test\n    public void deploy(){\n        Deployment deploy = repositoryService.createDeployment()\n                .name(\"è¡¨å•01\")\n                .addClasspathResource(\"flow/è¡¨å•-02.bpmn\")\n                .deploy();\n        System.out.println(\"deploy.getId() = \" + deploy.getId());\n    }\n```\n\nå¯åŠ¨ä¸€ä¸ªæµç¨‹å®ä¾‹ï¼šæ™®é€šæµç¨‹å¯åŠ¨\n\n```java\n    /**\n     * æ­£å¸¸çš„å¯åŠ¨æµç¨‹\n     */\n    @Test\n    void startFormFlow() throws Exception{\n        String processDefId = \"Process_1xf3zgp:1:11da0157-4b9a-11ed-8750-c03c59ad2248\";\n        ProcessInstance processInstance = runtimeService.startProcessInstanceById(processDefId);\n    }\n```\n\nç„¶åç°åœ¨æµç¨‹æ‰§è¡Œåˆ°äº†`ç”¨æˆ·ä»»åŠ¡01`å‡ºã€‚æˆ‘ä»¬ç»‘å®šçš„æœ‰æµç¨‹è¡¨å•ã€‚æˆ‘ä»¬å¯ä»¥æŸ¥è¯¢çœ‹çœ‹ã€‚å…ˆæ¥æŸ¥è¯¢Taskå¯¹åº”çš„è¡¨å•ä¿¡æ¯\n\n![image-20221014165547832](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221014165547832.png)\n\n```java\n    @Test\n    void getTaskFormData(){\n        String taskId = \"bff75f55-4b9a-11ed-9709-c03c59ad2248\";\n        TaskFormData taskFormData = formService.getTaskFormData(taskId);\n        List<FormField> formFields = taskFormData.getFormFields();\n        for (FormField formField : formFields) {\n            // è·å–æ¯ä¸ªå…·ä½“çš„è¡¨å•åŸŸ\n            System.out.println(formField.getId() + \" \" + formField.getLabel() + \" \" + formField.getValue().getValue());\n        }\n    }\n```\n\n![image-20221014163939776](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221014163939776.png)\n\nç„¶åå¯ä»¥ç»™è¡¨å•çš„ç›¸å…³ä¿¡æ¯èµ‹å€¼\n\n```java\n    @Test\n    void setTaskFormData(){\n        String taskId = \"bff75f55-4b9a-11ed-9709-c03c59ad2248\";\n        taskService.setVariable(taskId,\"days1\",5);\n        taskService.setVariable(taskId,\"reason1\",\"ä¸ªäººåŸå› \");\n    }\n```\n\nç„¶åå¯ä»¥çœ‹åˆ°è¡¨å•çš„ä¿¡æ¯\n\n![image-20221014165040994](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221014165040994.png)\n\n\n\n![image-20221014165131403](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221014165131403.png)\n\nå®¡æ‰¹å®Œæˆåˆ°ä¸‹ä¸€ä¸ªèŠ‚ç‚¹\n\n![image-20221014165620888](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221014165620888.png)\n\nè¿™æ—¶æˆ‘ä»¬å†æŸ¥è¯¢ä¸‹çœ‹èƒ½ä¸èƒ½æ‰¾åˆ°å¯¹åº”çš„è¡¨å•ä¿¡æ¯\n\n![image-20221014165737958](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221014165737958.png)\n\n\n\nå¥½äº†è¿™ä¸ªæ˜¯æˆ‘ä»¬è®²çš„ç›´æ¥åœ¨æµç¨‹ä¸­å†…åµŒè¡¨å•çš„åº”ç”¨\n\n\n\n## å¤–ç½®è¡¨å•\n\næˆ‘ä»¬è¿˜å¯ä»¥è‡ªå·±å®šä¹‰ä¸€ä¸ª HTML+JS çš„åŠ¨æ€è¡¨å•ï¼Œç„¶ååœ¨å®¡æ‰¹ç›¸å…³èŠ‚ç‚¹çš„æ—¶å€™æ¸²æŸ“å±•ç¤ºã€‚\n\n### å®šä¹‰ä¸€ä¸ªè¡¨å•\n\næˆ‘ä»¬å…ˆå®šä¹‰ä¸€ä¸ªç®€å•çš„è¡¨å•\n\n![image-20221015134123018](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221015134123018.png)\n\n### æµç¨‹ç»‘å®š\n\nç„¶ååœ¨æµç¨‹è®¾è®¡çš„æ—¶å€™ç»‘å®šå¯¹åº”çš„è¡¨å•\n\n![image-20221015134202377](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221015134202377.png)\n\néƒ¨ç½²æµç¨‹åå¯åŠ¨\n\n![image-20221015134234163](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221015134234163.png)\n\n![image-20221015134256088](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221015134256088.png)\n\nåœ¨è·³è½¬åçš„åœ°å€ä¸­æœ‰taskIdå’Œå›è°ƒçš„æ¥å£åœ°å€","slug":"camundaè¿›é˜¶ç¯‡","published":1,"updated":"2022-11-05T14:16:59.506Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clas9ersh0003dk8fc21v3skr","content":"<h1 id=\"Camunda-çƒ­é—¨å·¥ä½œæµå¼•æ“æ¡†æ¶\"><a href=\"#Camunda-çƒ­é—¨å·¥ä½œæµå¼•æ“æ¡†æ¶\" class=\"headerlink\" title=\"Camunda-çƒ­é—¨å·¥ä½œæµå¼•æ“æ¡†æ¶\"></a>Camunda-çƒ­é—¨å·¥ä½œæµå¼•æ“æ¡†æ¶</h1><blockquote>\n<p>Lectureï¼šæ³¢å“¥</p>\n</blockquote>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220902232358815.png\"\n                      alt=\"image-20220902232358815\"\n                ></p>\n<h1 id=\"ProcessEngine\"><a href=\"#ProcessEngine\" class=\"headerlink\" title=\"ProcessEngine\"></a>ProcessEngine</h1><p>ProcessEngineæ˜¯Camundaæµç¨‹å¼•æ“çš„æ ¸å¿ƒã€‚æˆ‘ä»¬åœ¨æµç¨‹ä¸­çš„å¾ˆå¤šå…·ä½“çš„å¤„ç†æ¯”å¦‚<code>æµç¨‹éƒ¨ç½²</code>ã€<code>æµç¨‹éƒ¨ç½²</code>ã€<code>æµç¨‹å®¡æ‰¹</code>ç­‰æ“ä½œéƒ½æ˜¯é€šè¿‡<code>XXXService</code>æ¥å¤„ç†çš„ã€‚è€Œç›¸å…³çš„<code>XXXService</code>éƒ½æ˜¯é€šè¿‡<code>ProcessEngine</code>æ¥ç®¡ç†çš„ã€‚æ‰€ä»¥å¯¹äº<code>ProcessEngine</code>çš„åˆ›å»ºæ–¹å¼è¿˜æ˜¯å¾ˆæœ‰å¿…è¦æŒæ¡çš„ã€‚</p>\n<h2 id=\"é€šè¿‡xmlé…ç½®æ–¹å¼\"><a href=\"#é€šè¿‡xmlé…ç½®æ–¹å¼\" class=\"headerlink\" title=\"é€šè¿‡xmlé…ç½®æ–¹å¼\"></a>é€šè¿‡xmlé…ç½®æ–¹å¼</h2><p>é…ç½®ä½ çš„æµç¨‹å¼•æ“çš„æœ€ç®€å•çš„æ–¹æ³•æ˜¯é€šè¿‡ä¸€ä¸ªå«åš<code>camunda.cfg.xml</code>çš„XMLæ–‡ä»¶ã€‚ä½¿ç”¨è¿™ä¸ªæ–‡ä»¶ï¼Œä½ å¯ä»¥ç®€å•è¿™æ ·åš:</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">processEngine3</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"type\">ProcessEngine</span> <span class=\"variable\">processEngine</span> <span class=\"operator\">=</span> ProcessEngines.getDefaultProcessEngine();</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;processEngine = &quot;</span> + processEngine);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>æˆ‘ä»¬å®šä¹‰å¦‚ä¸‹çš„<code>camunda.cfg.xml</code>æ–‡ä»¶ã€‚æ³¨æ„<code>camunda.cfg.xml</code>å¿…é¡»åŒ…å«ä¸€ä¸ªidä¸º<code>processEngineConfiguration</code>çš„bean</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">beans</span> <span class=\"attr\">xmlns</span>=<span class=\"string\">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">       <span class=\"attr\">xmlns:xsi</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">       <span class=\"attr\">xsi:schemaLocation</span>=<span class=\"string\">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;processEngineConfiguration&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;org.camunda.bpm.engine.impl.cfg.StandaloneProcessEngineConfiguration&quot;</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;jdbcUrl&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;jdbc:h2:mem:camunda;DB_CLOSE_DELAY=1000&quot;</span> /&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;jdbcDriver&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;org.h2.Driver&quot;</span> /&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;jdbcUsername&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;sa&quot;</span> /&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;jdbcPassword&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;&quot;</span> /&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;databaseSchemaUpdate&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;true&quot;</span> /&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;jobExecutorActivate&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;false&quot;</span> /&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;mailServerHost&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;mail.my-corp.com&quot;</span> /&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;mailServerPort&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;5025&quot;</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">bean</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>å¦‚æœæ²¡æœ‰æ‰¾åˆ°<code>camunda.cfg.xml</code>èµ„æºï¼Œé»˜è®¤å¼•æ“å°†æœç´¢<code>activiti.cfg.xml</code>æ–‡ä»¶ä½œä¸ºå¤‡ç”¨ã€‚å¦‚æœä¸¤è€…éƒ½ç¼ºå¤±ï¼Œå¼•æ“å°±ä¼šåœæ­¢è¿è¡Œï¼Œå¹¶æ‰“å°å‡ºå…³äºç¼ºå¤±é…ç½®èµ„æºçš„é”™è¯¯ä¿¡æ¯ã€‚</p>\n<p>è¯·æ³¨æ„ï¼Œé…ç½®XMLå®é™…ä¸Šæ˜¯ä¸€ä¸ªSpringé…ç½®ã€‚è¿™å¹¶ä¸æ„å‘³ç€Camundaå¼•æ“åªèƒ½åœ¨Springç¯å¢ƒä¸­ä½¿ç”¨ã€‚æˆ‘ä»¬åªæ˜¯åœ¨å†…éƒ¨åˆ©ç”¨Springçš„è§£æå’Œä¾èµ–æ³¨å…¥åŠŸèƒ½æ¥å»ºç«‹å¼•æ“ã€‚</p>\n<p>ProcessEngineConfigurationå¯¹è±¡ä¹Ÿå¯ä»¥ä½¿ç”¨é…ç½®æ–‡ä»¶ä»¥ç¼–ç¨‹æ–¹å¼åˆ›å»ºã€‚ä¹Ÿå¯ä»¥ä½¿ç”¨ä¸åŒçš„bean idã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ProcessEngineConfiguration.createProcessEngineConfigurationFromResourceDefault();</span><br><span class=\"line\">ProcessEngineConfiguration.createProcessEngineConfigurationFromResource(String resource);</span><br><span class=\"line\">ProcessEngineConfiguration.createProcessEngineConfigurationFromResource(String resource, String beanName);</span><br><span class=\"line\">ProcessEngineConfiguration.createProcessEngineConfigurationFromInputStream(InputStream inputStream);</span><br><span class=\"line\">ProcessEngineConfiguration.createProcessEngineConfigurationFromInputStream(InputStream inputStream, String beanName);</span><br></pre></td></tr></table></figure>\n\n\n\n\n\n<h2 id=\"JavaAPIæ–¹å¼\"><a href=\"#JavaAPIæ–¹å¼\" class=\"headerlink\" title=\"JavaAPIæ–¹å¼\"></a>JavaAPIæ–¹å¼</h2><p>æˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡åˆ›å»ºæ­£ç¡®çš„ProcessEngineConfigurationå¯¹è±¡æˆ–ä½¿ç”¨ä¸€äº›é¢„å®šä¹‰çš„å¯¹è±¡ï¼Œä»¥ç¼–ç¨‹æ–¹å¼é…ç½®æµç¨‹å¼•æ“ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ProcessEngineConfiguration.createStandaloneProcessEngineConfiguration();</span><br><span class=\"line\">ProcessEngineConfiguration.createStandaloneInMemProcessEngineConfiguration();</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><code>org.camunda.bpm.engine.impl.cfg.StandaloneProcessEngineConfiguration</code><br>æµç¨‹å¼•æ“æ˜¯ä»¥ç‹¬ç«‹çš„æ–¹å¼ä½¿ç”¨çš„ã€‚å¼•æ“æœ¬èº«å°†è´Ÿè´£å¤„ç†äº‹åŠ¡ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œåªæœ‰åœ¨å¼•æ“å¯åŠ¨æ—¶æ‰ä¼šæ£€æŸ¥æ•°æ®åº“ï¼ˆå¦‚æœæ²¡æœ‰æ•°æ®åº“æ¨¡å¼æˆ–æ¨¡å¼ç‰ˆæœ¬ä¸æ­£ç¡®ï¼Œä¼šæŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ï¼‰ã€‚</li>\n<li><code>org.camunda.bpm.engine.impl.cfg.StandaloneInMemProcessEngineConfiguration</code><br>è¿™æ˜¯ä¸€ä¸ªç”¨äºå•å…ƒæµ‹è¯•çš„å·¥å…·ç±»ã€‚å¼•æ“æœ¬èº«å°†è´Ÿè´£å¤„ç†äº‹åŠ¡ã€‚é»˜è®¤ä½¿ç”¨H2å†…å­˜æ•°æ®åº“ã€‚è¯¥æ•°æ®åº“å°†åœ¨å¼•æ“å¯åŠ¨å’Œå…³é—­æ—¶è¢«åˆ›å»ºå’Œåˆ é™¤ã€‚å½“ä½¿ç”¨è¿™ä¸ªæ—¶ï¼Œå¯èƒ½ä¸éœ€è¦é¢å¤–çš„é…ç½®ï¼ˆé™¤äº†ï¼Œå½“ä½¿ç”¨Jobæ‰§è¡Œå™¨ï¼ˆjob executorï¼‰æˆ–é‚®ä»¶åŠŸèƒ½æ—¶ï¼‰ã€‚</li>\n<li><code>org.camunda.bpm.engine.spring.SpringProcessEngineConfiguration</code><br>å½“æµç¨‹å¼•æ“è¢«ç”¨äºSpringç¯å¢ƒæ—¶ä½¿ç”¨ã€‚</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> <span class=\"meta\">@Test</span></span><br><span class=\"line\"> <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">processEngine1</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">     <span class=\"type\">ProcessEngineConfigurationImpl</span> <span class=\"variable\">cfg</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">StandaloneProcessEngineConfiguration</span>()</span><br><span class=\"line\">             .setJdbcUrl(<span class=\"string\">&quot;jdbc:mysql://localhost:3306/camunda1?serverTimezone=UTC&quot;</span>)</span><br><span class=\"line\">             .setJdbcUsername(<span class=\"string\">&quot;root&quot;</span>)</span><br><span class=\"line\">             .setJdbcPassword(<span class=\"string\">&quot;123456&quot;</span>)</span><br><span class=\"line\">             .setJdbcDriver(<span class=\"string\">&quot;com.mysql.cj.jdbc.Driver&quot;</span>)</span><br><span class=\"line\">             .setDatabaseSchemaUpdate(ProcessEngineConfiguration.DB_SCHEMA_UPDATE_FALSE)</span><br><span class=\"line\">             .setHistory(<span class=\"string\">&quot;full&quot;</span>);</span><br><span class=\"line\">     <span class=\"type\">ProcessEngine</span> <span class=\"variable\">processEngine</span> <span class=\"operator\">=</span> cfg.buildProcessEngine();</span><br><span class=\"line\">     System.out.println(<span class=\"string\">&quot;processEngine = &quot;</span> + processEngine);</span><br><span class=\"line\"> &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"> <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">processEngine2</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">     <span class=\"type\">ProcessEngineConfiguration</span> <span class=\"variable\">cfg</span> <span class=\"operator\">=</span> ProcessEngineConfiguration.createStandaloneProcessEngineConfiguration();</span><br><span class=\"line\">     cfg.setJdbcUrl(<span class=\"string\">&quot;jdbc:mysql://localhost:3306/camunda2?serverTimezone=UTC&quot;</span>)</span><br><span class=\"line\">             .setJdbcUsername(<span class=\"string\">&quot;root&quot;</span>)</span><br><span class=\"line\">             .setJdbcPassword(<span class=\"string\">&quot;123456&quot;</span>)</span><br><span class=\"line\">             .setJdbcDriver(<span class=\"string\">&quot;com.mysql.cj.jdbc.Driver&quot;</span>)</span><br><span class=\"line\">             .setDatabaseSchemaUpdate(ProcessEngineConfiguration.DB_SCHEMA_UPDATE_FALSE)</span><br><span class=\"line\">             .setHistory(<span class=\"string\">&quot;full&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">     <span class=\"type\">ProcessEngine</span> <span class=\"variable\">processEngine</span> <span class=\"operator\">=</span> cfg.buildProcessEngine();</span><br><span class=\"line\">     System.out.println(<span class=\"string\">&quot;processEngine = &quot;</span> + processEngine);</span><br><span class=\"line\"> &#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<h2 id=\"SpringBooté¡¹ç›®\"><a href=\"#SpringBooté¡¹ç›®\" class=\"headerlink\" title=\"SpringBooté¡¹ç›®\"></a>SpringBooté¡¹ç›®</h2><p>åœ¨SpringBooté¡¹ç›®ä¼šæ ¹æ®æˆ‘ä»¬å¯¼å…¥çš„ä¾èµ–å®Œæˆè‡ªåŠ¨è£…é…ï¼Œä»è€Œå®ŒæˆProcessEngineçš„è‡ªåŠ¨æ³¨å…¥ã€‚æˆ‘ä»¬å¯ä»¥æ¥åˆ†æä¸‹æºç ã€‚</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220911234908597.png\"\n                      alt=\"image-20220911234908597\"\n                ></p>\n<p>æˆ‘ä»¬éœ€è¦æ³¨æ„å¯¹äºCamundaçš„ç›¸å…³é…ç½®ã€‚æˆ‘ä»¬å¯ä»¥åœ¨application.yml ä¸­é…ç½®ã€‚åŸå› æ˜¯ CamundaBpmPropertiesçš„å¤„ç†ã€‚ç„¶åå°±æ˜¯ @Import(CamundaBpmConfiguration.class) ã€‚ åœ¨CamundaBpmConfigurationä¼šå®Œæˆç›¸å…³çš„ ProcessEngineConfiguration çš„ç›¸å…³æ³¨å…¥ã€‚</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220911234945653.png\"\n                      alt=\"image-20220911234945653\"\n                ></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220911235223373.png\"\n                      alt=\"image-20220911235223373\"\n                ></p>\n<p>è¿™å—æ„Ÿå…´è¶£çš„å°ä¼™ä¼´å¯ä»¥ä»”ç»†é˜…è¯»ä¸‹ã€‚</p>\n<h2 id=\"Service-API\"><a href=\"#Service-API\" class=\"headerlink\" title=\"Service API\"></a>Service API</h2><p>Java APIæ˜¯ä¸å¼•æ“äº’åŠ¨çš„æœ€å¸¸è§æ–¹å¼ã€‚ä¸­å¿ƒèµ·ç‚¹æ˜¯<code>ProcessEngine</code>ï¼Œå®ƒå¯ä»¥é€šè¿‡å‡ ç§æ–¹å¼åˆ›å»ºï¼Œå¦‚é…ç½®éƒ¨åˆ†æ‰€è¿°ã€‚ä»ProcessEngineä¸­ï¼Œä½ å¯ä»¥è·å¾—åŒ…å«å·¥ä½œæµ&#x2F;BPMæ–¹æ³•çš„å„ç§æœåŠ¡ã€‚<code>ProcessEngine</code>å’Œ<code>æœåŠ¡å¯¹è±¡</code>æ˜¯<code>çº¿ç¨‹å®‰å…¨</code>çš„ã€‚æ‰€ä»¥ä½ å¯ä»¥ä¸ºæ•´ä¸ªæœåŠ¡å™¨ä¿ç•™å¯¹å…¶ä¸­ä¸€ä¸ªå¯¹è±¡çš„å¼•ç”¨.</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/api.services.png\"\n                      alt=\"img\"\n                ></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">ProcessEngine</span> <span class=\"variable\">processEngine</span> <span class=\"operator\">=</span> ProcessEngines.getDefaultProcessEngine();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">RepositoryService</span> <span class=\"variable\">repositoryService</span> <span class=\"operator\">=</span> processEngine.getRepositoryService();</span><br><span class=\"line\"><span class=\"type\">RuntimeService</span> <span class=\"variable\">runtimeService</span> <span class=\"operator\">=</span> processEngine.getRuntimeService();</span><br><span class=\"line\"><span class=\"type\">TaskService</span> <span class=\"variable\">taskService</span> <span class=\"operator\">=</span> processEngine.getTaskService();</span><br><span class=\"line\"><span class=\"type\">IdentityService</span> <span class=\"variable\">identityService</span> <span class=\"operator\">=</span> processEngine.getIdentityService();</span><br><span class=\"line\"><span class=\"type\">FormService</span> <span class=\"variable\">formService</span> <span class=\"operator\">=</span> processEngine.getFormService();</span><br><span class=\"line\"><span class=\"type\">HistoryService</span> <span class=\"variable\">historyService</span> <span class=\"operator\">=</span> processEngine.getHistoryService();</span><br><span class=\"line\"><span class=\"type\">ManagementService</span> <span class=\"variable\">managementService</span> <span class=\"operator\">=</span> processEngine.getManagementService();</span><br><span class=\"line\"><span class=\"type\">FilterService</span> <span class=\"variable\">filterService</span> <span class=\"operator\">=</span> processEngine.getFilterService();</span><br><span class=\"line\"><span class=\"type\">ExternalTaskService</span> <span class=\"variable\">externalTaskService</span> <span class=\"operator\">=</span> processEngine.getExternalTaskService();</span><br><span class=\"line\"><span class=\"type\">CaseService</span> <span class=\"variable\">caseService</span> <span class=\"operator\">=</span> processEngine.getCaseService();</span><br><span class=\"line\"><span class=\"type\">DecisionService</span> <span class=\"variable\">decisionService</span> <span class=\"operator\">=</span> processEngine.getDecisionService();</span><br></pre></td></tr></table></figure>\n\n<p><strong>æ³¨æ„</strong>ï¼šæ‰€æœ‰çš„æœåŠ¡éƒ½æ˜¯<code>æ— çŠ¶æ€çš„</code>ã€‚è¿™æ„å‘³ç€ä½ å¯ä»¥å¾ˆå®¹æ˜“åœ°åœ¨ä¸€ä¸ªé›†ç¾¤çš„å¤šä¸ªèŠ‚ç‚¹ä¸Šè¿è¡ŒCamundaå¹³å°ï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½å»åŒä¸€ä¸ªæ•°æ®åº“ï¼Œè€Œä¸å¿…æ‹…å¿ƒå“ªä¸ªæœºå™¨å®é™…æ‰§è¡Œäº†ä»¥å‰çš„è°ƒç”¨ã€‚å¯¹ä»»ä½•æœåŠ¡çš„ä»»ä½•è°ƒç”¨éƒ½æ˜¯æ— çŠ¶æ€çš„ï¼Œæ— è®ºå®ƒåœ¨å“ªé‡Œæ‰§è¡Œã€‚</p>\n<p>æ¯ä¸ªæœåŠ¡çš„ç®€å•ä»‹ç»</p>\n<table>\n<thead>\n<tr>\n<th>æœåŠ¡åç§°</th>\n<th>ä»‹ç»</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>ä»“åº“æœåŠ¡<strong>RepositoryService</strong></td>\n<td>æä¾›äº†ç®¡ç†å’Œæ“çºµéƒ¨ç½²å’Œæµç¨‹å®šä¹‰çš„æ“ä½œ</td>\n</tr>\n<tr>\n<td>è¿è¡Œæ—¶æœåŠ¡-<strong>RuntimeService</strong></td>\n<td>é¦–å…ˆå¯ä»¥é€šè¿‡ä¸€ä¸ªæµç¨‹å®šä¹‰å¯åŠ¨å¤šä¸ªæµç¨‹å®ä¾‹ã€‚ä¹Ÿèƒ½ç”¨äºå¤„ç†æ£€ç´¢å’Œå­˜å‚¨æµç¨‹å˜é‡çš„æœåŠ¡</td>\n</tr>\n<tr>\n<td>ä»»åŠ¡æœåŠ¡-<strong>TaskService</strong></td>\n<td>å›´ç»•ç”¨æˆ·å®¡æ‰¹æ“ä½œçš„ä¸€åˆ‡éƒ½ä¼šè¢«å½’çº³åˆ°TaskServiceã€‚æ¯”å¦‚ï¼šæŸ¥è¯¢åˆ†é…ç»™ç”¨æˆ·æˆ–ç»„çš„ä»»åŠ¡ï¼Œåˆ›å»ºæ–°çš„ç‹¬ç«‹ä»»åŠ¡ã€‚è¿™äº›æ˜¯ä¸æµç¨‹å®ä¾‹æ— å…³çš„ä»»åŠ¡ï¼Œæ“çºµä¸€ä¸ªä»»åŠ¡è¢«åˆ†é…ç»™å“ªä¸ªç”¨æˆ·ï¼Œæˆ–è€…å“ªä¸ªç”¨æˆ·ä»¥æŸç§æ–¹å¼å‚ä¸åˆ°ä»»åŠ¡ä¸­ï¼Œå£°ç§°å¹¶å®Œæˆä¸€é¡¹ä»»åŠ¡ã€‚å£°ç§°æ„å‘³ç€æœ‰äººå†³å®šæˆä¸ºè¯¥ä»»åŠ¡çš„å—è®©äººï¼Œæ„å‘³ç€è¿™ä¸ªç”¨æˆ·å°†å®Œæˆè¯¥ä»»åŠ¡ã€‚å®Œæˆæ„å‘³ç€ â€œå®Œæˆä»»åŠ¡çš„å·¥ä½œâ€ç­‰</td>\n</tr>\n<tr>\n<td>èº«ä»½æœåŠ¡-<strong>IdentityService</strong></td>\n<td>æ˜¯éå¸¸ç®€å•çš„ã€‚å®ƒå…è®¸å¯¹ç»„å’Œç”¨æˆ·è¿›è¡Œç®¡ç†ï¼ˆåˆ›å»ºã€æ›´æ–°ã€åˆ é™¤ã€æŸ¥è¯¢â€¦ï¼‰ã€‚é‡è¦çš„æ˜¯è¦ç†è§£ï¼Œæ ¸å¿ƒå¼•æ“å®é™…ä¸Šåœ¨è¿è¡Œæ—¶å¹¶ä¸å¯¹ç”¨æˆ·è¿›è¡Œä»»ä½•æ£€æŸ¥</td>\n</tr>\n<tr>\n<td>è¡¨å•æœåŠ¡-<strong>FormService</strong></td>\n<td>ä¸€ä¸ªå¯é€‰çš„æœåŠ¡ã€‚æä¾›äº†è¡¨å•åŠŸèƒ½</td>\n</tr>\n<tr>\n<td>å†å²æœåŠ¡-<strong>HistoryService</strong></td>\n<td>æš´éœ²äº†å¼•æ“æ”¶é›†çš„æ‰€æœ‰å†å²æ•°æ®ã€‚å½“æ‰§è¡Œæµç¨‹æ—¶ï¼Œå¼•æ“å¯ä»¥ä¿ç•™å¾ˆå¤šæ•°æ®ï¼ˆè¿™æ˜¯å¯é…ç½®çš„ï¼‰ï¼Œå¦‚æµç¨‹å®ä¾‹çš„å¼€å§‹æ—¶é—´ã€è°åšäº†å“ªäº›ä»»åŠ¡ã€å®Œæˆä»»åŠ¡èŠ±äº†å¤šé•¿æ—¶é—´ã€æ¯ä¸ªæµç¨‹å®ä¾‹éµå¾ªçš„è·¯å¾„ç­‰ã€‚è¯¥æœåŠ¡ä¸»è¦æš´éœ²äº†è®¿é—®è¿™äº›æ•°æ®çš„æŸ¥è¯¢åŠŸèƒ½ã€‚</td>\n</tr>\n<tr>\n<td>ç®¡ç†æœåŠ¡-<strong>ManagementService</strong></td>\n<td>å®ƒå…è®¸æ£€ç´¢å…³äºæ•°æ®åº“è¡¨å’Œè¡¨å…ƒæ•°æ®çš„ä¿¡æ¯ã€‚æ­¤å¤–ï¼Œå®ƒæš´éœ²äº†æŸ¥è¯¢åŠŸèƒ½å’ŒJobçš„ç®¡ç†æ“ä½œã€‚Jobåœ¨å¼•æ“ä¸­è¢«ç”¨äºå„ç§äº‹æƒ…ï¼Œå¦‚å®šæ—¶å™¨ã€å¼‚æ­¥å»¶ç»­ã€å»¶è¿Ÿæš‚åœ&#x2F;æ¿€æ´»ç­‰ã€‚</td>\n</tr>\n<tr>\n<td>è¿‡æ»¤å™¨æœåŠ¡-<strong>FilterService</strong></td>\n<td>å…è®¸åˆ›å»ºå’Œç®¡ç†è¿‡æ»¤å™¨ã€‚è¿‡æ»¤å™¨æ˜¯åƒä»»åŠ¡æŸ¥è¯¢ä¸€æ ·çš„å­˜å‚¨æŸ¥è¯¢ã€‚ä¾‹å¦‚ï¼Œè¿‡æ»¤å™¨è¢«ä»»åŠ¡åˆ—è¡¨ç”¨æ¥è¿‡æ»¤ç”¨æˆ·ä»»åŠ¡</td>\n</tr>\n<tr>\n<td>å¤–éƒ¨ä»»åŠ¡æœåŠ¡-<strong>ExternalTaskService</strong></td>\n<td>æä¾›å¯¹å¤–éƒ¨ä»»åŠ¡å®ä¾‹çš„è®¿é—®ã€‚å¤–éƒ¨ä»»åŠ¡ä»£è¡¨åœ¨å¤–éƒ¨å¤„ç†çš„å·¥ä½œé¡¹ç›®ï¼Œç‹¬ç«‹äºæµç¨‹å¼•æ“ã€‚</td>\n</tr>\n<tr>\n<td>æ¡ˆä¾‹æœåŠ¡-<strong>CaseService</strong></td>\n<td>ä¸è¿è¡Œæ—¶æœåŠ¡ï¼ˆ<strong>RuntimeService</strong>ï¼‰ç±»ä¼¼ï¼Œä½†ç”¨äºæ¡ˆä¾‹å®ä¾‹ã€‚å®ƒå¤„ç†å¯åŠ¨æ¡ˆä¾‹å®šä¹‰çš„æ–°æ¡ˆä¾‹å®ä¾‹å¹¶ç®¡ç†æ¡ˆä¾‹æ‰§è¡Œçš„ç”Ÿå‘½å‘¨æœŸã€‚è¯¥æœåŠ¡ä¹Ÿè¢«ç”¨æ¥æ£€ç´¢å’Œæ›´æ–°æ¡ˆä¾‹å®ä¾‹çš„æµç¨‹å˜é‡ã€‚</td>\n</tr>\n<tr>\n<td>å†³ç­–æœåŠ¡-<strong>DecisionService</strong></td>\n<td>å…è®¸è¯„ä¼°éƒ¨ç½²åœ¨å¼•æ“ä¸­çš„å†³ç­–ã€‚å®ƒæ˜¯è¯„ä¼°ç‹¬ç«‹äºæµç¨‹å®šä¹‰çš„ä¸šåŠ¡è§„åˆ™ä»»åŠ¡ä¸­çš„å†³ç­–çš„ä¸€ç§é€‰æ‹©ã€‚</td>\n</tr>\n</tbody></table>\n<h1 id=\"ä»»åŠ¡åˆ†é…\"><a href=\"#ä»»åŠ¡åˆ†é…\" class=\"headerlink\" title=\"ä»»åŠ¡åˆ†é…\"></a>ä»»åŠ¡åˆ†é…</h1><h2 id=\"å›ºå®šåˆ†é…\"><a href=\"#å›ºå®šåˆ†é…\" class=\"headerlink\" title=\"å›ºå®šåˆ†é…\"></a>å›ºå®šåˆ†é…</h2><p>åœ¨æŒ‡æ´¾<code>ç”¨æˆ·ä»»åŠ¡</code>çš„å®¡æ‰¹äººæ—¶ã€‚æˆ‘ä»¬æ˜¯ç›´æ¥æŒ‡æ´¾çš„å›ºå®šè´¦å·ã€‚ä½†æ˜¯ä¸ºäº†ä¿è¯æµç¨‹è®¾è®¡å®¡æ‰¹çš„çµæ´»æ€§ã€‚æˆ‘ä»¬éœ€è¦å„ç§ä¸åŒçš„åˆ†é…æ–¹å¼ï¼Œæ‰€ä»¥è¿™èŠ‚æˆ‘ä»¬å°±è¯¦ç»†çš„æ¥ä»‹ç»å…ˆåœ¨Camundaä¸­æˆ‘ä»¬å¯ä»¥ä½¿ç”¨çš„ç›¸å…³çš„åˆ†é…æ–¹å¼</p>\n<p>å›ºå®šåˆ†é…å°±æ˜¯æˆ‘ä»¬å‰é¢ä»‹ç»çš„ï¼Œåœ¨ç»˜åˆ¶æµç¨‹å›¾æˆ–è€…ç›´æ¥åœ¨æµç¨‹æ–‡ä»¶ä¸­é€šè¿‡Assigneeæ¥æŒ‡å®šçš„æ–¹å¼.</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220912003431387.png\"\n                      alt=\"image-20220912003431387\"\n                ></p>\n<p>è¿™ç§æ–¹å¼å°±éå¸¸ç®€å•ã€‚ä¸å†è¿‡å¤šèµ˜è¿°ã€‚</p>\n<h2 id=\"å€¼è¡¨è¾¾å¼\"><a href=\"#å€¼è¡¨è¾¾å¼\" class=\"headerlink\" title=\"å€¼è¡¨è¾¾å¼\"></a>å€¼è¡¨è¾¾å¼</h2><p><strong>å€¼è¡¨è¾¾å¼ Value expression</strong>: è§£æä¸ºä¸€ä¸ªå€¼ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œæ‰€æœ‰æµç¨‹å˜é‡éƒ½å¯ä»¥ä½¿ç”¨ã€‚ï¼ˆè‹¥ä½¿ç”¨Springï¼‰æ‰€æœ‰çš„Spring beanä¹Ÿå¯ä»¥ç”¨åœ¨è¡¨è¾¾å¼é‡Œã€‚ä¾‹å¦‚:</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$&#123;myVar&#125;</span><br><span class=\"line\">$&#123;myBean.myProperty&#125;</span><br></pre></td></tr></table></figure>\n\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220912003628341.png\"\n                      alt=\"image-20220912003628341\"\n                ></p>\n<p>ç„¶åå¯ä»¥æ¼”ç¤ºä¸‹è¿™ä¸ªæ¡ˆä¾‹ï¼Œå…ˆéƒ¨ç½²è¯¥æµç¨‹ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * å®Œæˆæµç¨‹çš„éƒ¨ç½²æ“ä½œ</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">deploy</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"type\">Deployment</span> <span class=\"variable\">deploy</span> <span class=\"operator\">=</span> repositoryService.createDeployment()</span><br><span class=\"line\">            .name(<span class=\"string\">&quot;è¯·å‡æµç¨‹&quot;</span>)</span><br><span class=\"line\">            .addClasspathResource(<span class=\"string\">&quot;flow/1-01-ä»»åŠ¡åˆ†é….bpmn&quot;</span>)</span><br><span class=\"line\">            .deploy();</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;deploy.getId() = &quot;</span> + deploy.getId());</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ç„¶ååœ¨å¯åŠ¨æµç¨‹å®ä¾‹ã€‚å¯åŠ¨æµç¨‹å®ä¾‹åä¼šè¿›å…¥åˆ°<code>äººäº‹å®¡æ‰¹</code>è¿™ä¸ªèŠ‚ç‚¹ï¼Œæœ‰<code>å€¼è¡¨è¾¾å¼</code>çš„å­˜åœ¨ï¼Œæˆ‘ä»¬éœ€è¦åœ¨å¯åŠ¨çš„è¿‡ç¨‹ä¸­å°±ç»™å…¶èµ‹å€¼ã€‚</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220912004447956.png\"\n                      alt=\"image-20220912004447956\"\n                ></p>\n<p>ç»‘å®šæµç¨‹å˜é‡çš„æ“ä½œ</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * å¯åŠ¨æµç¨‹å®ä¾‹</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">startFlow</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">processInstanceId</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;Process_0uiy3j1:1:712d273a-31f0-11ed-9e27-c03c59ad2248&quot;</span>;</span><br><span class=\"line\">    <span class=\"comment\">// å®šä¹‰ä¸€ä¸ªMapé›†åˆï¼Œå­˜å‚¨ç›¸å…³çš„æµç¨‹å˜é‡ä¿¡æ¯</span></span><br><span class=\"line\">    Map&lt;String,Object&gt; map = <span class=\"keyword\">new</span> <span class=\"title class_\">HashMap</span>&lt;&gt;();</span><br><span class=\"line\">    map.put(<span class=\"string\">&quot;user1&quot;</span>,<span class=\"string\">&quot;demo&quot;</span>);</span><br><span class=\"line\">    <span class=\"comment\">// é€šè¿‡ RuntimeService å¯åŠ¨ä¸€ä¸ªæµç¨‹å®ä¾‹ï¼ŒåŒæ—¶ç»‘å®šäº†å¯¹åº”çš„æµç¨‹å˜é‡ä¿¡æ¯</span></span><br><span class=\"line\">    runtimeService.startProcessInstanceById(processInstanceId,map);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>é€šè¿‡åå°æŸ¥çœ‹æ•°æ®æˆ‘ä»¬å¯ä»¥å‘ç°<code>act_ru_task</code>ä¸­æœ‰äº†ä¸€æ¡<code>äººäº‹å®¡æ‰¹</code>çš„ä»»åŠ¡ï¼Œè€Œä¸”å¯¹äºçš„å®¡æ‰¹äººå°±æ˜¯<code>demo</code>ä¹Ÿå°±æ˜¯æˆ‘ä»¬ç»™å¯¹åº”çš„æµç¨‹å˜é‡çš„èµ‹å€¼</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220912004819089.png\"\n                      alt=\"image-20220912004819089\"\n                ></p>\n<p>è€Œå¯¹åº”çš„æµç¨‹å˜é‡ä¿¡æ¯å­˜å‚¨åœ¨<code>act_ru_variable</code>ä¸­ã€‚</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220912004949936.png\"\n                      alt=\"image-20220912004949936\"\n                ></p>\n<h2 id=\"æ–¹æ³•è¡¨è¾¾å¼\"><a href=\"#æ–¹æ³•è¡¨è¾¾å¼\" class=\"headerlink\" title=\"æ–¹æ³•è¡¨è¾¾å¼\"></a>æ–¹æ³•è¡¨è¾¾å¼</h2><p><strong>æ–¹æ³•è¡¨è¾¾å¼ Method expression</strong>: è°ƒç”¨ä¸€ä¸ªæ–¹æ³•ï¼Œå¯ä»¥å¸¦æˆ–ä¸å¸¦å‚æ•°ã€‚<strong>å½“è°ƒç”¨ä¸å¸¦å‚æ•°çš„æ–¹æ³•æ—¶ï¼Œè¦ç¡®ä¿åœ¨æ–¹æ³•ååæ·»åŠ ç©ºæ‹¬å·ï¼ˆä»¥é¿å…ä¸å€¼è¡¨è¾¾å¼æ··æ·†ï¼‰ã€‚</strong>ä¼ é€’çš„å‚æ•°å¯ä»¥æ˜¯å­—é¢å€¼(literal value)ï¼Œä¹Ÿå¯ä»¥æ˜¯è¡¨è¾¾å¼ï¼Œå®ƒä»¬ä¼šè¢«è‡ªåŠ¨è§£æã€‚ä¾‹å¦‚ï¼š boge3306</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$&#123;printer.print()&#125;</span><br><span class=\"line\">$&#123;myBean.getAssignee()&#125;</span><br><span class=\"line\">$&#123;myBean.addNewOrder(<span class=\"string\">&#x27;orderName&#x27;</span>)&#125;</span><br><span class=\"line\">$&#123;myBean.doSomething(myVar, execution)&#125;</span><br></pre></td></tr></table></figure>\n\n<p>myBeanæ˜¯Springå®¹å™¨ä¸­çš„ä¸ªBeanå¯¹è±¡ï¼Œè¡¨ç¤ºè°ƒç”¨çš„æ˜¯beançš„addNewOrderæ–¹æ³•.æˆ‘ä»¬é€šè¿‡æ¡ˆä¾‹æ¥æ¼”ç¤ºä¸‹ã€‚æˆ‘ä»¬å…ˆå®šä¹‰å¯¹åº”çš„Service</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Service</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">MyBean</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> String <span class=\"title function_\">getAssignee</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;getAssignee æ–¹æ³•æ‰§è¡Œäº†....&quot;</span>);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">&quot;demo&quot;</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ç„¶åæˆ‘ä»¬åœ¨å¯¹åº”çš„æµç¨‹å›¾ä¸­æ¥å®šä¹‰ã€‚</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220912005546442.png\"\n                      alt=\"image-20220912005546442\"\n                ></p>\n<p>ç„¶åé€šè¿‡éƒ¨ç½²å¯åŠ¨æ“ä½œæ¥çœ‹çœ‹ã€‚</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220912010330601.png\"\n                      alt=\"image-20220912010330601\"\n                ></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220912010405626.png\"\n                      alt=\"image-20220912010405626\"\n                ></p>\n<p>é€šè¿‡è¿™å—çš„æ¼”ç¤ºï¼Œæˆ‘ä»¬å°±å¯ä»¥åŸºäºæˆ‘ä»¬çš„å¤–éƒ¨æ¡ä»¶æ¥ç»“åˆæˆ‘ä»¬çš„é€»è¾‘å®ç°åŠ¨æ€çš„æ¥æŒ‡å®šå¯¹åº”çš„å¤„ç†äººã€‚</p>\n<h2 id=\"ç›‘å¬å™¨é…ç½®\"><a href=\"#ç›‘å¬å™¨é…ç½®\" class=\"headerlink\" title=\"ç›‘å¬å™¨é…ç½®\"></a>ç›‘å¬å™¨é…ç½®</h2><p>å¯ä»¥ä½¿ç”¨ç›‘å¬å™¨æ¥å®Œæˆå¾ˆå¤šCamundaçš„æµç¨‹ä¸šåŠ¡ã€‚æˆ‘ä»¬åœ¨æ­¤å¤„ä½¿ç”¨ç›‘å¬å™¨æ¥å®Œæˆè´Ÿè´£äººçš„æŒ‡å®šï¼Œé‚£ä¹ˆæˆ‘ä»¬åœ¨æµç¨‹è®¾è®¡çš„æ—¶å€™å°±ä¸éœ€è¦æŒ‡å®šassigneeã€‚åˆ›å»ºè‡ªå®šä¹‰ç›‘å¬å™¨ï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * è‡ªå®šä¹‰çš„ä¸€ä¸ª Task ç›‘å¬å™¨</span></span><br><span class=\"line\"><span class=\"comment\"> * æˆ‘ä»¬éœ€è¦åœ¨ç›‘å¬å™¨ä¸­å®Œæˆ å¤„ç†äººçš„åŠ¨æ€æŒ‡æ´¾</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">MyFirstTaskListener</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">TaskListener</span> &#123;</span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">notify</span><span class=\"params\">(DelegateTask delegateTask)</span> &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;MyFirstTaskListener --- &gt; æ‰§è¡Œäº†&quot;</span>);</span><br><span class=\"line\">        <span class=\"comment\">// é’ˆå¯¹ æ˜¯åˆ›å»ºTaskèŠ‚ç‚¹çš„äº‹ä»¶</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span>(EVENTNAME_CREATE.equals(delegateTask.getEventName()))&#123;</span><br><span class=\"line\">            <span class=\"comment\">// æŒ‡æ´¾å¯¹åº”çš„å¤„ç†äºº</span></span><br><span class=\"line\">            delegateTask.setAssignee(<span class=\"string\">&quot;demo&quot;</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ç„¶ååœ¨æµç¨‹å›¾ä¸­ç»‘å®šå¯¹åº”çš„ç›‘å¬å™¨</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220912011453664.png\"\n                      alt=\"image-20220912011453664\"\n                ></p>\n<p>ç„¶åæˆ‘ä»¬éƒ¨ç½²å’Œå¯åŠ¨æµç¨‹åï¼Œå¯ä»¥çœ‹åˆ°å¯¹åº”çš„è§¦å‘æ•ˆæœ</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220912011644311.png\"\n                      alt=\"image-20220912011644311\"\n                ></p>\n<p>è¡¨ç»“æ„ä¸­ä¹Ÿå¯ä»¥çœ‹åˆ°ç›¸å…³çš„ä¿¡æ¯</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220912011735815.png\"\n                      alt=\"image-20220912011735815\"\n                ></p>\n<p>è¯´æ˜è¿™å—çš„å¤„ç†æ˜¯å®Œå…¨å¯è¡Œçš„ã€‚</p>\n<h1 id=\"æµç¨‹å˜é‡\"><a href=\"#æµç¨‹å˜é‡\" class=\"headerlink\" title=\"æµç¨‹å˜é‡\"></a>æµç¨‹å˜é‡</h1><p>æµç¨‹å˜é‡å¯ä»¥ç”¨å°†æ•°æ®æ·»åŠ åˆ°æµç¨‹çš„è¿è¡Œæ—¶çŠ¶æ€ä¸­ï¼Œæˆ–è€…æ›´å…·ä½“åœ°è¯´ï¼Œå˜é‡ä½œç”¨åŸŸä¸­ã€‚æ”¹å˜å®ä½“çš„å„ç§APIå¯ä»¥ç”¨æ¥æ›´æ–°è¿™äº›é™„åŠ çš„å˜é‡ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œä¸€ä¸ªå˜é‡ç”±ä¸€ä¸ªåç§°å’Œä¸€ä¸ªå€¼ç»„æˆã€‚åç§°ç”¨äºåœ¨æ•´ä¸ªæµç¨‹ä¸­è¯†åˆ«å˜é‡ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä¸€ä¸ªæ´»åŠ¨ï¼ˆactivityï¼‰è®¾ç½®äº†ä¸€ä¸ªåä¸º <em>var</em> çš„å˜é‡ï¼Œé‚£ä¹ˆåç»­æ´»åŠ¨ä¸­å¯ä»¥é€šè¿‡ä½¿ç”¨è¿™ä¸ªåç§°æ¥è®¿é—®å®ƒã€‚å˜é‡çš„å€¼æ˜¯ä¸€ä¸ª Java å¯¹è±¡ã€‚</p>\n<h2 id=\"è¿è¡Œæ—¶å˜é‡\"><a href=\"#è¿è¡Œæ—¶å˜é‡\" class=\"headerlink\" title=\"è¿è¡Œæ—¶å˜é‡\"></a>è¿è¡Œæ—¶å˜é‡</h2><p>æµç¨‹å®ä¾‹è¿è¡Œæ—¶çš„å˜é‡ï¼Œå­˜å…¥act_ru_variableè¡¨ä¸­ã€‚åœ¨æµç¨‹å®ä¾‹è¿è¡Œç»“æŸæ—¶ï¼Œæ­¤å®ä¾‹çš„å˜é‡åœ¨è¡¨ä¸­åˆ é™¤ã€‚åœ¨æµç¨‹å®ä¾‹åˆ›å»ºåŠå¯åŠ¨æ—¶ï¼Œå¯è®¾ç½®æµç¨‹å˜é‡ã€‚æ‰€æœ‰çš„<code>startProcessInstanceXXX</code>æ–¹æ³•éƒ½æœ‰ä¸€ä¸ªå¯é€‰å‚æ•°ç”¨äºè®¾ç½®å˜é‡ã€‚ä¾‹å¦‚ï¼Œ<code>RuntimeService</code>ä¸­</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ProcessInstance <span class=\"title function_\">startProcessInstanceById</span><span class=\"params\">(String processDefinitionId, Map&lt;String, Object&gt; variables)</span>;</span><br></pre></td></tr></table></figure>\n\n<p>ä¹Ÿå¯ä»¥åœ¨æµç¨‹æ‰§è¡Œä¸­åŠ å…¥å˜é‡ã€‚ä¾‹å¦‚ï¼Œ(<em>RuntimeService</em>):</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"title function_\">setVariable</span><span class=\"params\">(String executionId, String variableName, Object value)</span>;</span><br><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"title function_\">setVariableLocal</span><span class=\"params\">(String executionId, String variableName, Object value)</span>;</span><br><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"title function_\">setVariables</span><span class=\"params\">(String executionId, Map&lt;String, ? extends Object&gt; variables)</span>;</span><br><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"title function_\">setVariablesLocal</span><span class=\"params\">(String executionId, Map&lt;String, ? extends Object&gt; variables)</span>;</span><br></pre></td></tr></table></figure>\n\n<p>è¯»å–å˜é‡æ–¹æ³•:</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Map&lt;String, Object&gt; <span class=\"title function_\">getVariables</span><span class=\"params\">(String executionId)</span>;</span><br><span class=\"line\">Map&lt;String, Object&gt; <span class=\"title function_\">getVariablesLocal</span><span class=\"params\">(String executionId)</span>;</span><br><span class=\"line\">Map&lt;String, Object&gt; <span class=\"title function_\">getVariables</span><span class=\"params\">(String executionId, Collection&lt;String&gt; variableNames)</span>;</span><br><span class=\"line\">Map&lt;String, Object&gt; <span class=\"title function_\">getVariablesLocal</span><span class=\"params\">(String executionId, Collection&lt;String&gt; variableNames)</span>;</span><br><span class=\"line\">Object <span class=\"title function_\">getVariable</span><span class=\"params\">(String executionId, String variableName)</span>;</span><br><span class=\"line\">&lt;T&gt; T <span class=\"title function_\">getVariable</span><span class=\"params\">(String executionId, String variableName, Class&lt;T&gt; variableClass)</span>;</span><br></pre></td></tr></table></figure>\n\n<p><strong>æ³¨æ„</strong>ï¼šç”±äºæµç¨‹å®ä¾‹ç»“æŸæ—¶ï¼Œå¯¹åº”åœ¨è¿è¡Œæ—¶è¡¨çš„æ•°æ®è·Ÿç€è¢«åˆ é™¤ã€‚æ‰€ä»¥æŸ¥è¯¢ä¸€ä¸ªå·²ç»å®Œç»“æµç¨‹å®ä¾‹çš„å˜é‡ï¼Œåªèƒ½åœ¨å†å²å˜é‡è¡¨ä¸­æŸ¥æ‰¾ã€‚</p>\n<p>å½“ç„¶è¿è¡Œæ—¶å˜é‡æˆ‘ä»¬ä¹Ÿå¯ä»¥æ ¹æ®å¯¹åº”çš„ä½œç”¨åŸŸæŠŠä»–åˆ†ä¸º<code>å…¨å±€å˜é‡</code>å’Œ<code>å±€éƒ¨å˜é‡</code>.</p>\n<h3 id=\"å…¨å±€å˜é‡\"><a href=\"#å…¨å±€å˜é‡\" class=\"headerlink\" title=\"å…¨å±€å˜é‡\"></a>å…¨å±€å˜é‡</h3><p>æµç¨‹å˜é‡çš„é»˜è®¤ä½œç”¨åŸŸæ˜¯æµç¨‹å®ä¾‹ã€‚å½“ä¸€ä¸ªæµç¨‹å˜é‡çš„ä½œç”¨åŸŸä¸ºæµç¨‹å®ä¾‹æ—¶ï¼Œå¯ä»¥ç§°ä¸º global å˜é‡</p>\n<p>æ³¨æ„ï¼šå¦‚ï¼š    Globalå˜é‡ï¼šuserIdï¼ˆå˜é‡åï¼‰ã€zhangsanï¼ˆå˜é‡å€¼ï¼‰</p>\n<p>global å˜é‡ä¸­å˜é‡åä¸å…è®¸é‡å¤ï¼Œè®¾ç½®ç›¸åŒåç§°çš„å˜é‡ï¼Œåè®¾ç½®çš„å€¼ä¼šè¦†ç›–å‰è®¾ç½®çš„å˜é‡å€¼ã€‚</p>\n<p>æ¡ˆä¾‹ï¼š</p>\n<p>å®šä¹‰ç›‘å¬å™¨</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">MySecondListener</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">TaskListener</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">notify</span><span class=\"params\">(DelegateTask delegateTask)</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// è·å–æ‰€æœ‰çš„æµç¨‹å˜é‡</span></span><br><span class=\"line\">        Map&lt;String, Object&gt; variables = delegateTask.getVariables();</span><br><span class=\"line\">        Set&lt;String&gt; keys = variables.keySet();</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (String key : keys) &#123;</span><br><span class=\"line\">            <span class=\"type\">Object</span> <span class=\"variable\">obj</span> <span class=\"operator\">=</span> variables.get(key);</span><br><span class=\"line\">            System.out.println(key + <span class=\"string\">&quot; = &quot;</span> + obj);</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(obj <span class=\"keyword\">instanceof</span>  String)&#123;</span><br><span class=\"line\">              <span class=\"comment\">// ä¿®æ”¹ æµç¨‹å˜é‡çš„ä¿¡æ¯</span></span><br><span class=\"line\">              <span class=\"comment\">// variables.put(key,obj + &quot;:boge3306&quot;); ç›´æ¥ä¿®æ”¹Mapä¸­çš„æ•°æ® è¾¾ä¸åˆ°ä¿®æ”¹æµç¨‹å˜é‡çš„æ•ˆæœ</span></span><br><span class=\"line\">              delegateTask.setVariable(key,obj + <span class=\"string\">&quot;:boge3306&quot;</span>);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>è®¾è®¡æµç¨‹</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220913011512486.png\"\n                      alt=\"image-20220913011512486\"\n                ></p>\n<p>æ¡ˆä¾‹ä»£ç ï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@SpringBootTest(classes = Application.class)</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">AssigneeTaskTest</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Autowired</span></span><br><span class=\"line\">    RepositoryService repositoryService;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Autowired</span></span><br><span class=\"line\">    RuntimeService runtimeService;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Autowired</span></span><br><span class=\"line\">    TaskService taskService;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * éƒ¨ç½²æµç¨‹</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">deployFlow</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">        <span class=\"type\">Deployment</span> <span class=\"variable\">deploy</span> <span class=\"operator\">=</span> repositoryService.createDeployment()</span><br><span class=\"line\">                .name(<span class=\"string\">&quot;è¯·å‡æµç¨‹-ç›‘å¬å™¨&quot;</span>)</span><br><span class=\"line\">                .addClasspathResource(<span class=\"string\">&quot;flow/04-ä»»åŠ¡åˆ†é…-ç›‘å¬å™¨åˆ†é….bpmn&quot;</span>)</span><br><span class=\"line\">                .deploy();</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;deploy.getId() = &quot;</span> + deploy.getId());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * å¯åŠ¨æµç¨‹å®ä¾‹</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">startFlow</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">        <span class=\"type\">String</span> <span class=\"variable\">processDefId</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;Process_08kf7mp:1:d154c0f5-326d-11ed-841a-c03c59ad2248&quot;</span>;</span><br><span class=\"line\">        <span class=\"type\">ProcessInstance</span> <span class=\"variable\">processInstance</span> <span class=\"operator\">=</span> runtimeService.startProcessInstanceById(processDefId);</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;processInstance.getId() = &quot;</span> + processInstance.getId());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * å¯åŠ¨æµç¨‹å®ä¾‹ï¼Œç»‘å®šå¯¹åº”çš„æµç¨‹å˜é‡</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">startFlowVariables</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">        <span class=\"type\">String</span> <span class=\"variable\">processDefId</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;Process_1t425hs:1:539f152d-326a-11ed-ab57-c03c59ad2248&quot;</span>;</span><br><span class=\"line\">        <span class=\"comment\">// å£°æ˜ä¸€ä¸ª Map é›†åˆ</span></span><br><span class=\"line\">        Map&lt;String,Object&gt; map = <span class=\"keyword\">new</span> <span class=\"title class_\">HashMap</span>&lt;&gt;();</span><br><span class=\"line\">        map.put(<span class=\"string\">&quot;user1&quot;</span>,<span class=\"string\">&quot;demo&quot;</span>);</span><br><span class=\"line\">        <span class=\"comment\">// å¯åŠ¨æµç¨‹å®ä¾‹ï¼ŒåŒæ—¶ç»‘å®šå¯¹åº”çš„æµç¨‹å˜é‡ä¿¡æ¯</span></span><br><span class=\"line\">        <span class=\"type\">ProcessInstance</span> <span class=\"variable\">processInstance</span> <span class=\"operator\">=</span> runtimeService.startProcessInstanceById(processDefId,map);</span><br><span class=\"line\"></span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;processInstance.getId() = &quot;</span> + processInstance.getId());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * æµç¨‹å®¡æ‰¹</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">completeTask</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">        taskService.complete(<span class=\"string\">&quot;29a0614c-3267-11ed-a030-c03c59ad2248&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * æµç¨‹å®¡æ‰¹</span></span><br><span class=\"line\"><span class=\"comment\">     *    åŒæ ·éœ€è¦ç»‘å®šå¯¹åº”çš„æµç¨‹å˜é‡çš„å€¼</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">completeTaskVariables</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// å£°æ˜ä¸€ä¸ª Map é›†åˆ</span></span><br><span class=\"line\">        Map&lt;String,Object&gt; map = <span class=\"keyword\">new</span> <span class=\"title class_\">HashMap</span>&lt;&gt;();</span><br><span class=\"line\">        map.put(<span class=\"string\">&quot;user2&quot;</span>,<span class=\"string\">&quot;demo&quot;</span>);</span><br><span class=\"line\">        taskService.complete(<span class=\"string\">&quot;dd013840-326a-11ed-b589-c03c59ad2248&quot;</span>,map);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n\n\n<h3 id=\"å±€éƒ¨å˜é‡\"><a href=\"#å±€éƒ¨å˜é‡\" class=\"headerlink\" title=\"å±€éƒ¨å˜é‡\"></a>å±€éƒ¨å˜é‡</h3><p>ä»»åŠ¡å’Œæ‰§è¡Œå®ä¾‹ä»…ä»…æ˜¯é’ˆå¯¹ä¸€ä¸ªä»»åŠ¡å’Œä¸€ä¸ªæ‰§è¡Œå®ä¾‹èŒƒå›´ï¼ŒèŒƒå›´æ²¡æœ‰æµç¨‹å®ä¾‹å¤§ï¼Œ ç§°ä¸º local å˜é‡ã€‚</p>\n<p>Local å˜é‡ç”±äºåœ¨ä¸åŒçš„ä»»åŠ¡æˆ–ä¸åŒçš„æ‰§è¡Œå®ä¾‹ä¸­ï¼Œä½œç”¨åŸŸäº’ä¸å½±å“ï¼Œå˜é‡åå¯ä»¥ç›¸åŒæ²¡æœ‰å½±å“ã€‚Local å˜é‡åä¹Ÿå¯ä»¥å’Œ global å˜é‡åç›¸åŒï¼Œæ²¡æœ‰å½±å“ã€‚ </p>\n<p>æˆ‘ä»¬é€šè¿‡RuntimeService è®¾ç½®çš„Localå˜é‡ç»‘å®šçš„æ˜¯ executionIdã€‚åœ¨è¯¥æµç¨‹ä¸­æœ‰æ•ˆ</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220913120555429.png\"\n                      alt=\"image-20220913120555429\"\n                ></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * è®¾ç½®Localæµç¨‹å˜é‡</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">setVariableLocal</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">executionId</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;368f9fdc-3317-11ed-871d-c03c59ad2248&quot;</span>;</span><br><span class=\"line\">    runtimeService.setVariableLocal(executionId,<span class=\"string\">&quot;orderId&quot;</span>,<span class=\"string\">&quot;10006&quot;</span>);</span><br><span class=\"line\">    runtimeService.setVariableLocal(executionId,<span class=\"string\">&quot;user2&quot;</span>,<span class=\"string\">&quot;æ³¢æ³¢çƒ¤é¸­1&quot;</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<p>æˆ‘ä»¬é€šè¿‡TaskServiceè®¾ç½®çš„Localå˜é‡çš„ä½œç”¨åŸŸæ˜¯å’ŒTaskIdç»‘å®šçš„ï¼Œä½œç”¨åŸŸå°±åœ¨è¿™ä¸€ä¸ªTaskç”Ÿå‘½å‘¨æœŸä¸­ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">taskLocalVariables</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    taskService.setVariableLocal(<span class=\"string\">&quot;7eb1b34b-3318-11ed-b9e6-c03c59ad2248&quot;</span>,<span class=\"string\">&quot;user2&quot;</span>,<span class=\"string\">&quot;æ³¢å“¥66666&quot;</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n\n\n<h2 id=\"å†å²å˜é‡\"><a href=\"#å†å²å˜é‡\" class=\"headerlink\" title=\"å†å²å˜é‡\"></a>å†å²å˜é‡</h2><p>å†å²å˜é‡ï¼Œå­˜å…¥<code>act_hi_varinst</code>è¡¨ä¸­ã€‚åœ¨æµç¨‹å¯åŠ¨æ—¶ï¼Œæµç¨‹å˜é‡ä¼šåŒæ—¶å­˜å…¥å†å²å˜é‡è¡¨ä¸­ï¼›åœ¨æµç¨‹ç»“æŸæ—¶ï¼Œå†å²è¡¨ä¸­çš„å˜é‡ä»ç„¶å­˜åœ¨ã€‚å¯ç†è§£ä¸ºâ€œæ°¸ä¹…ä»£â€çš„æµç¨‹å˜é‡ã€‚</p>\n<p>è·å–å·²å®Œæˆçš„ã€idä¸ºâ€™XXXâ€™çš„æµç¨‹å®ä¾‹ä¸­ï¼Œæ‰€æœ‰çš„<code>HistoricVariableInstances</code>ï¼ˆå†å²å˜é‡å®ä¾‹ï¼‰ï¼Œå¹¶ä»¥å˜é‡åæ’åºã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">historyService.createHistoricVariableInstanceQuery()</span><br><span class=\"line\">    .processInstanceId(<span class=\"string\">&quot;XXX&quot;</span>)</span><br><span class=\"line\">    .orderByVariableName.desc()</span><br><span class=\"line\">    .list();</span><br></pre></td></tr></table></figure>\n\n\n\n\n\n\n\n<h1 id=\"èº«ä»½æœåŠ¡\"><a href=\"#èº«ä»½æœåŠ¡\" class=\"headerlink\" title=\"èº«ä»½æœåŠ¡\"></a>èº«ä»½æœåŠ¡</h1><p>åœ¨æµç¨‹å®šä¹‰ä¸­åœ¨ä»»åŠ¡ç»“ç‚¹çš„ assignee å›ºå®šè®¾ç½®ä»»åŠ¡è´Ÿè´£äººï¼Œåœ¨æµç¨‹å®šä¹‰æ—¶å°†å‚ä¸è€…å›ºå®šè®¾ç½®åœ¨.bpmn æ–‡ä»¶ä¸­ï¼Œå¦‚æœä¸´æ—¶ä»»åŠ¡è´Ÿè´£äººå˜æ›´åˆ™éœ€è¦ä¿®æ”¹æµç¨‹å®šä¹‰ï¼Œç³»ç»Ÿå¯æ‰©å±•æ€§å·®ã€‚é’ˆå¯¹è¿™ç§æƒ…å†µå¯ä»¥ç»™ä»»åŠ¡è®¾ç½®å¤šä¸ªå€™é€‰äººæˆ–è€…å€™é€‰äººç»„ï¼Œå¯ä»¥ä»å€™é€‰äººä¸­é€‰æ‹©å‚ä¸è€…æ¥å®Œæˆä»»åŠ¡ã€‚</p>\n<p>èº«ä»½æœåŠ¡æ˜¯å¯¹å„ç§ç”¨æˆ·&#x2F;ç»„åº“çš„APIæŠ½è±¡ã€‚å…¶åŸºæœ¬å®ä½“æ˜¯ï¼š</p>\n<ul>\n<li>User: ä½¿ç”¨ä¸åŒIDåŒºåˆ†çš„ä¸åŒç”¨æˆ·</li>\n<li>Group: ä½¿ç”¨ä¸åŒIDåŒºåˆ†çš„ä¸åŒç»„</li>\n<li>Membership: ç»„ä¸ç”¨æˆ·ä¹‹é—´çš„å…³ç³»</li>\n<li>Tenant: ä½¿ç”¨ä¸åŒIDåŒºåˆ†çš„ä¸åŒç§Ÿæˆ·</li>\n<li>Tenant Membership: ç§Ÿæˆ·ä¸ ç”¨æˆ·&#x2F;ç»„ ä¹‹é—´çš„å…³ç³»</li>\n</ul>\n<h2 id=\"å€™é€‰äºº\"><a href=\"#å€™é€‰äºº\" class=\"headerlink\" title=\"å€™é€‰äºº\"></a>å€™é€‰äºº</h2><h3 id=\"ç»˜åˆ¶æµç¨‹å›¾\"><a href=\"#ç»˜åˆ¶æµç¨‹å›¾\" class=\"headerlink\" title=\"ç»˜åˆ¶æµç¨‹å›¾\"></a>ç»˜åˆ¶æµç¨‹å›¾</h3><p>é¦–å…ˆç»˜åˆ¶ä¸€ä¸ªå¦‚ä¸‹çš„åŸºæœ¬æµç¨‹å›¾ã€‚ç„¶åæˆ‘ä»¬åˆ†åˆ«æ¥æŒ‡æ´¾å¤„ç†äººã€‚</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220917101906123.png\"\n                      alt=\"image-20220917101906123\"\n                ></p>\n<p>äººäº‹å®¡æ‰¹è¿™å—æˆ‘ä»¬å¯ä»¥ç›´æ¥æ¥æŒ‡å®šå¤šä¸ªå€™é€‰äººæ¥å¤„ç†ã€‚<code>demo,zhang,lisi</code></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220917102115513.png\"\n                      alt=\"image-20220917102115513\"\n                ></p>\n<p>åœ¨æ€»ç»ç†å®¡æ‰¹çš„ä½ç½®æˆ‘ä»¬åœ¨è®¾è®¡çš„æ—¶å€™ä¸å¤ªæ¸…æ¥šä¼šæ˜¯è°æ¥å®¡æ‰¹ï¼Œæ‰€ä»¥é€šè¿‡å€¼è¡¨è¾¾å¼æ¥å¤„ç†ã€‚</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220917102211814.png\"\n                      alt=\"image-20220917102211814\"\n                ></p>\n<p>è®¾è®¡å®Œæˆåå¯¹åº”çš„xmlä¸­çš„æ•°æ®ä¸ºï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220917102259478.png\"\n                      alt=\"image-20220917102259478\"\n                ></p>\n<h3 id=\"éƒ¨ç½²å’Œå¯åŠ¨æµç¨‹\"><a href=\"#éƒ¨ç½²å’Œå¯åŠ¨æµç¨‹\" class=\"headerlink\" title=\"éƒ¨ç½²å’Œå¯åŠ¨æµç¨‹\"></a>éƒ¨ç½²å’Œå¯åŠ¨æµç¨‹</h3><p>åˆ›å»ºäº†æµç¨‹å›¾åæˆ‘ä»¬å°±å¯ä»¥ç›´æ¥æ¥éƒ¨ç½²è¯¥æµç¨‹ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * å®Œæˆæµç¨‹çš„éƒ¨ç½²æ“ä½œ</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">deploy</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"type\">Deployment</span> <span class=\"variable\">deploy</span> <span class=\"operator\">=</span> repositoryService.createDeployment()</span><br><span class=\"line\">            .name(<span class=\"string\">&quot;å€™é€‰äººæ¡ˆä¾‹&quot;</span>)</span><br><span class=\"line\">            .addClasspathResource(<span class=\"string\">&quot;flow/å€™é€‰äººæ¡ˆä¾‹.bpmn&quot;</span>)</span><br><span class=\"line\">            .deploy();</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;deploy.getId() = &quot;</span> + deploy.getId());</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>æ¥ç€å°±å¯ä»¥ç›´æ¥æ¥å¯åŠ¨è¯¥æµç¨‹äº†ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * å¯åŠ¨æµç¨‹å®ä¾‹</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">startFlow</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">processInstanceId</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;Process_05vjqic:1:cca1e181-362e-11ed-b8fc-c03c59ad2248&quot;</span>;</span><br><span class=\"line\">    runtimeService.startProcessInstanceById(processInstanceId);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>å¯åŠ¨å®Œæˆæµç¨‹åæˆ‘ä»¬è¿›å…¥åˆ°<code>act_ru_task</code>ä¸­å¯ä»¥å‘ç°æˆ‘ä»¬åˆ›å»ºçš„æµç¨‹ä»»åŠ¡ä¿¡æ¯ï¼Œä½†æ˜¯<code>å¤„ç†äºº</code>å­—æ®µè¿˜æ˜¯ç©ºçš„ã€‚</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220917102625541.png\"\n                      alt=\"image-20220917102625541\"\n                ></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220917102655865.png\"\n                      alt=\"image-20220917102655865\"\n                ></p>\n<p>æ³¨æ„ï¼šç›¸å…³çš„å€™é€‰äººçš„ä¿¡æ¯å­˜å‚¨åœ¨äº†<code>act_ru_identitylink</code>è¡¨ä¸­ã€‚</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220917104657296.png\"\n                      alt=\"image-20220917104657296\"\n                ></p>\n<p>å¯¹åº”çš„æŸ¥è¯¢æ“ä½œå¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">getTaskCandidate</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    List&lt;IdentityLink&gt; identityLinksForTask = taskService.getIdentityLinksForTask(<span class=\"string\">&quot;023f0279-362f-11ed-8d8a-c03c59ad2248&quot;</span>);</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (IdentityLink identityLink : identityLinksForTask) &#123;</span><br><span class=\"line\">        System.out.println(identityLink.getTaskId());</span><br><span class=\"line\">        System.out.println(identityLink.getProcessDefId());</span><br><span class=\"line\">        System.out.println(identityLink.getUserId());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n\n\n<h3 id=\"ä»»åŠ¡çš„æ‹¾å–\"><a href=\"#ä»»åŠ¡çš„æ‹¾å–\" class=\"headerlink\" title=\"ä»»åŠ¡çš„æ‹¾å–\"></a>ä»»åŠ¡çš„æ‹¾å–</h3><p>å€™é€‰è¦æ“ä½œæˆ‘ä»¬éœ€è¦é€šè¿‡<code>æ‹¾å–</code>çš„è¡Œä¸ºæŠŠ<code>å€™é€‰äºº</code>è½¬æ¢ä¸º<code>å¤„ç†äºº</code>.é‚£ä¹ˆå€™é€‰äººç™»å½•åéœ€è¦èƒ½æŸ¥è¯¢å‡ºæ¥ä»–å¯ä»¥<code>æ‹¾å–</code>çš„ä»»åŠ¡ã€‚åœ¨camundaçš„webåº”ç”¨ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°è¿™æ ·çš„æ“ä½œã€‚<code>demo</code>è´¦å·ç™»å½•ã€‚</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220917103124214.png\"\n                      alt=\"image-20220917103124214\"\n                ></p>\n<p>åœ¨ä»£ç ä¸Šçš„å®ç°ï¼Œå…ˆæ¥çœ‹æŸ¥è¯¢æ“ä½œã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * æ ¹æ®ç™»å½•çš„ç”¨æˆ·æŸ¥è¯¢å¯¹åº”çš„å¯ä»¥æ‹¾å–çš„ä»»åŠ¡</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">queryTaskCandidate</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    List&lt;Task&gt; list = taskService.createTaskQuery()</span><br><span class=\"line\">            .processInstanceId(<span class=\"string\">&quot;023da2e6-362f-11ed-8d8a-c03c59ad2248&quot;</span>)</span><br><span class=\"line\">            .taskCandidateUser(<span class=\"string\">&quot;demo&quot;</span>)</span><br><span class=\"line\">            .list();</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (Task task : list) &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;task.getId() = &quot;</span> + task.getId());</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;task.getName() = &quot;</span> + task.getName());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * æŸ¥è¯¢å½“å‰ä»»åŠ¡æ‰€æœ‰çš„å€™é€‰äºº</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">getTaskCandidate</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">taskId</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;52b2642a-36fa-11ed-bde4-c03c59ad2248&quot;</span>;</span><br><span class=\"line\">    List&lt;IdentityLink&gt; linksForTask = taskService.getIdentityLinksForTask(taskId);</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(linksForTask != <span class=\"literal\">null</span> &amp;&amp; linksForTask.size() &gt; <span class=\"number\">0</span>)&#123;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (IdentityLink identityLink : linksForTask) &#123;</span><br><span class=\"line\">            System.out.println(identityLink.getUserId());</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ç„¶åæˆ‘ä»¬å°±å¯ä»¥åœ¨ä¸Šé¢çš„åŸºç¡€ä¸Šæ¥åš<code>æ‹¾å–</code>çš„æ“ä½œäº†ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * æ ¹æ®ç™»å½•çš„ç”¨æˆ·æŸ¥è¯¢å¯¹åº”çš„å¯ä»¥æ‹¾å–çš„ä»»åŠ¡</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">claimTaskCandidate</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    List&lt;Task&gt; list = taskService.createTaskQuery()</span><br><span class=\"line\">            .processInstanceId(<span class=\"string\">&quot;023da2e6-362f-11ed-8d8a-c03c59ad2248&quot;</span>)</span><br><span class=\"line\">            .taskCandidateUser(<span class=\"string\">&quot;demo&quot;</span>)</span><br><span class=\"line\">            .list();</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (Task task : list) &#123;</span><br><span class=\"line\">        taskService.claim(task.getId(),<span class=\"string\">&quot;demo&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>è¿›å…¥åˆ°è¡¨ç»“æ„ä¸­ä½ ä¼šå‘ç°è¿™æ¡Taskè®°å½•çš„å¤„ç†äººè¢«æŒ‡æ´¾ä¸ºäº†<code>demo</code>,è€Œä¸”åœ¨Webç«¯å¯ä»¥çœ‹åˆ°å¯ä»¥å®¡æ‰¹äº†ã€‚</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220917103743685.png\"\n                      alt=\"image-20220917103743685\"\n                ></p>\n<p>æ³¨æ„ï¼šè¿™æ—¶<code>demo</code>æ‹¾å–äº†ä»»åŠ¡ä¹‹åå…¶ä»–çš„ç”¨æˆ·å°±ä¸èƒ½å†æ‹¾å–äº†ï¼ŒæŸ¥è¯¢çš„æ—¶å€™ä¹ŸæŸ¥è¯¢ä¸åˆ°äº†ã€‚</p>\n<h3 id=\"ä»»åŠ¡çš„å½’è¿˜\"><a href=\"#ä»»åŠ¡çš„å½’è¿˜\" class=\"headerlink\" title=\"ä»»åŠ¡çš„å½’è¿˜\"></a>ä»»åŠ¡çš„å½’è¿˜</h3><p>æ‹¾å–ä»»åŠ¡åå¦‚æœä¸æƒ³æ“ä½œé‚£ä¹ˆå¯ä»¥å½’è¿˜ä»»åŠ¡ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * é€€è¿˜ä»»åŠ¡</span></span><br><span class=\"line\"><span class=\"comment\"> *    ä¸€ä¸ªå€™é€‰äººæ‹¾å–äº†è¿™ä¸ªä»»åŠ¡ä¹‹åå…¶ä»–çš„ç”¨æˆ·å°±æ²¡æœ‰åŠæ³•æ‹¾å–è¿™ä¸ªä»»åŠ¡äº†</span></span><br><span class=\"line\"><span class=\"comment\"> *    æ‰€ä»¥å¦‚æœä¸€ä¸ªç”¨æˆ·æ‹¾å–äº†ä»»åŠ¡ä¹‹ååˆä¸æƒ³å¤„ç†äº†ï¼Œé‚£ä¹ˆå¯ä»¥é€€è¿˜</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">unclaimTaskCandidate</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"type\">Task</span> <span class=\"variable\">task</span> <span class=\"operator\">=</span> taskService.createTaskQuery()</span><br><span class=\"line\">            .processInstanceId(<span class=\"string\">&quot;023da2e6-362f-11ed-8d8a-c03c59ad2248&quot;</span>)</span><br><span class=\"line\">            .taskAssignee(<span class=\"string\">&quot;demo&quot;</span>)</span><br><span class=\"line\">            .singleResult();</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(task != <span class=\"literal\">null</span>)&#123;</span><br><span class=\"line\">        <span class=\"comment\">// å½’è¿˜ç›¸å…³çš„ä»»åŠ¡  ç½®ç©ºå³å¯</span></span><br><span class=\"line\">        taskService.setAssignee(task.getId(),<span class=\"literal\">null</span>);</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;å½’è¿˜æ‹¾å–æˆåŠŸ&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"ä»»åŠ¡çš„äº¤æ¥\"><a href=\"#ä»»åŠ¡çš„äº¤æ¥\" class=\"headerlink\" title=\"ä»»åŠ¡çš„äº¤æ¥\"></a>ä»»åŠ¡çš„äº¤æ¥</h3><p>æ‹¾å–ä»»åŠ¡åå¦‚æœä¸æƒ³æ“ä½œä¹Ÿä¸æƒ³å½’è¿˜å¯ä»¥ç›´æ¥äº¤æ¥ç»™å¦å¤–ä¸€ä¸ªäººæ¥å¤„ç†.</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">taskCandidate</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"type\">Task</span> <span class=\"variable\">task</span> <span class=\"operator\">=</span> taskService.createTaskQuery()</span><br><span class=\"line\">            .processInstanceId(<span class=\"string\">&quot;023da2e6-362f-11ed-8d8a-c03c59ad2248&quot;</span>)</span><br><span class=\"line\">            .taskAssignee(<span class=\"string\">&quot;demo&quot;</span>)</span><br><span class=\"line\">            .singleResult();</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(task != <span class=\"literal\">null</span>)&#123;</span><br><span class=\"line\">        <span class=\"comment\">// ä»»åŠ¡äº¤æ¥</span></span><br><span class=\"line\">        taskService.setAssignee(task.getId(),<span class=\"string\">&quot;zhang&quot;</span>);</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;ä»»åŠ¡äº¤æ¥ç»™äº†zhang&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"ä»»åŠ¡å®Œæˆ\"><a href=\"#ä»»åŠ¡å®Œæˆ\" class=\"headerlink\" title=\"ä»»åŠ¡å®Œæˆ\"></a>ä»»åŠ¡å®Œæˆ</h3><p>æ­£å¸¸çš„ä»»åŠ¡å¤„ç†</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">completeTask1</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">taskId</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;023f0279-362f-11ed-8d8a-c03c59ad2248&quot;</span>;</span><br><span class=\"line\">    <span class=\"comment\">// ä½†æ˜¯ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„ å¤„ç†äººæ˜¯å€¼è¡¨è¾¾å¼ æˆ‘ä»¬éœ€è¦èµ‹å€¼</span></span><br><span class=\"line\">    Map&lt;String,Object&gt; map = <span class=\"keyword\">new</span> <span class=\"title class_\">HashMap</span>&lt;&gt;();</span><br><span class=\"line\">    map.put(<span class=\"string\">&quot;user1&quot;</span>,<span class=\"string\">&quot;demo&quot;</span>);</span><br><span class=\"line\">    map.put(<span class=\"string\">&quot;user2&quot;</span>,<span class=\"string\">&quot;zhangsan&quot;</span>);</span><br><span class=\"line\">    map.put(<span class=\"string\">&quot;user3&quot;</span>,<span class=\"string\">&quot;wangwu&quot;</span>);</span><br><span class=\"line\">    taskService.complete(taskId,map);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>å½“ç„¶æˆ‘ä»¬é€šè¿‡å€¼è¡¨è¾¾å¼æ¥å¤„ç†çš„å€™é€‰äººæ“ä½œã€‚åœ¨<code>act_ru_identitylink</code>è¡¨ä¸­åŒæ ·æœ‰ç›¸å…³è®°å½•ï¼Œæˆ‘ä»¬éœ€è¦ç»“åˆæµç¨‹å˜é‡è¡¨æ¥å¤„ç†äº†ã€‚ä½†æ˜¯å¤„ç†çš„APIå’Œä¸Šé¢æ˜¯ä¸€æ ·çš„ã€‚</p>\n<h2 id=\"å€™é€‰äººç»„\"><a href=\"#å€™é€‰äººç»„\" class=\"headerlink\" title=\"å€™é€‰äººç»„\"></a>å€™é€‰äººç»„</h2><p>å½“å€™é€‰äººå¾ˆå¤šçš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥åˆ†ç»„æ¥å¤„ç†ã€‚å…ˆåˆ›å»ºç»„ï¼Œç„¶åæŠŠç”¨æˆ·åˆ†é…åˆ°è¿™ä¸ªç»„ä¸­ã€‚</p>\n<h3 id=\"ç®¡ç†ç”¨æˆ·å’Œç»„\"><a href=\"#ç®¡ç†ç”¨æˆ·å’Œç»„\" class=\"headerlink\" title=\"ç®¡ç†ç”¨æˆ·å’Œç»„\"></a>ç®¡ç†ç”¨æˆ·å’Œç»„</h3><h4 id=\"ç”¨æˆ·ç®¡ç†\"><a href=\"#ç”¨æˆ·ç®¡ç†\" class=\"headerlink\" title=\"ç”¨æˆ·ç®¡ç†\"></a>ç”¨æˆ·ç®¡ç†</h4><p>æˆ‘ä»¬éœ€è¦å…ˆå•ç‹¬ç»´æŠ¤ç”¨æˆ·ä¿¡æ¯ã€‚åå°å¯¹åº”çš„è¡¨ç»“æ„æ˜¯<code>ACT_ID_USER</code>.</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * ç»´æŠ¤ç”¨æˆ·</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">createUser</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"type\">User</span> <span class=\"variable\">user</span> <span class=\"operator\">=</span> identityService.newUser(<span class=\"string\">&quot;zhang&quot;</span>);</span><br><span class=\"line\">    user.setFirstName(<span class=\"string\">&quot;å¼ &quot;</span>);</span><br><span class=\"line\">    user.setLastName(<span class=\"string\">&quot;ä¸‰&quot;</span>);</span><br><span class=\"line\">    user.setEmail(<span class=\"string\">&quot;zhangsan@qq.com&quot;</span>);</span><br><span class=\"line\">    user.setPassword(<span class=\"string\">&quot;123456&quot;</span>);</span><br><span class=\"line\">    identityService.saveUser(user);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>è¦æ›´æ–°æˆ–è€…åˆ é™¤ç”¨æˆ·çš„è¯ã€‚é€šè¿‡ç›¸å…³APIå³å¯å®Œæˆ</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">updateUser</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"type\">User</span> <span class=\"variable\">user</span> <span class=\"operator\">=</span> identityService.createUserQuery().userId(<span class=\"string\">&quot;zhang&quot;</span>).singleResult();</span><br><span class=\"line\">    user.setPassword(<span class=\"string\">&quot;123&quot;</span>);</span><br><span class=\"line\">    identityService.saveUser(user);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">deleteUser</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    identityService.deleteUser(<span class=\"string\">&quot;zhang&quot;</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<h4 id=\"Groupç®¡ç†\"><a href=\"#Groupç®¡ç†\" class=\"headerlink\" title=\"Groupç®¡ç†\"></a>Groupç®¡ç†</h4><p>ç»´æŠ¤å¯¹åº”çš„Groupä¿¡æ¯ï¼Œåå°å¯¹åº”çš„è¡¨ç»“æ„æ˜¯<code>ACT_ID_GROUP</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * åˆ›å»ºç”¨æˆ·ç»„</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">createGroup</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// åˆ›å»ºGroupå¯¹è±¡å¹¶æŒ‡å®šç›¸å…³çš„ä¿¡æ¯</span></span><br><span class=\"line\">    <span class=\"type\">Group</span> <span class=\"variable\">group</span> <span class=\"operator\">=</span> identityService.newGroup(<span class=\"string\">&quot;group1&quot;</span>);</span><br><span class=\"line\">    group.setName(<span class=\"string\">&quot;å¼€å‘éƒ¨&quot;</span>);</span><br><span class=\"line\">    group.setType(<span class=\"string\">&quot;type1&quot;</span>);</span><br><span class=\"line\">    <span class=\"comment\">// åˆ›å»ºGroupå¯¹åº”çš„è¡¨ç»“æ„æ•°æ®</span></span><br><span class=\"line\">    identityService.saveGroup(group);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>æ›´æ–°å’Œåˆ é™¤å‚è€ƒä¸Šé¢çš„<code>ç”¨æˆ·ç®¡ç†</code></p>\n<h4 id=\"ç”¨æˆ·åˆ†é…ç»„\"><a href=\"#ç”¨æˆ·åˆ†é…ç»„\" class=\"headerlink\" title=\"ç”¨æˆ·åˆ†é…ç»„\"></a>ç”¨æˆ·åˆ†é…ç»„</h4><p>ç”¨æˆ·å’Œç»„æ˜¯ä¸€ä¸ªå¤šå¯¹å¤šçš„å…³è”å…³è”ï¼Œæˆ‘ä»¬éœ€è¦åšç›¸å…³çš„åˆ†é…ï¼Œåå°å¯¹åº”çš„è¡¨ç»“æ„æ˜¯<code>ACT_ID_MEMBERSHIP</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * å°†ç”¨æˆ·åˆ†é…ç»™å¯¹åº”çš„Group</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">userGroup</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// æ ¹æ®ç»„çš„ç¼–å·æ‰¾åˆ°å¯¹åº”çš„Groupå¯¹è±¡</span></span><br><span class=\"line\">    <span class=\"type\">Group</span> <span class=\"variable\">group</span> <span class=\"operator\">=</span> identityService.createGroupQuery().groupId(<span class=\"string\">&quot;group1&quot;</span>).singleResult();</span><br><span class=\"line\">    <span class=\"comment\">// åˆ›å»º MemberShip å»ºç«‹ç”¨æˆ·å’Œç»„çš„å…³ç³»</span></span><br><span class=\"line\">    identityService.createMembership(<span class=\"string\">&quot;zhang&quot;</span>,group.getId());</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"å€™é€‰äººç»„åº”ç”¨\"><a href=\"#å€™é€‰äººç»„åº”ç”¨\" class=\"headerlink\" title=\"å€™é€‰äººç»„åº”ç”¨\"></a>å€™é€‰äººç»„åº”ç”¨</h3><p>ææ¸…æ¥šäº†ç”¨æˆ·å’Œç”¨æˆ·ç»„çš„å…³ç³»åæˆ‘ä»¬å°±å¯ä»¥æ¥ä½¿ç”¨å€™é€‰äººç»„çš„åº”ç”¨äº†</p>\n<h4 id=\"åˆ›å»ºæµç¨‹å›¾\"><a href=\"#åˆ›å»ºæµç¨‹å›¾\" class=\"headerlink\" title=\"åˆ›å»ºæµç¨‹å›¾\"></a>åˆ›å»ºæµç¨‹å›¾</h4><p>åˆ›å»ºä¸€ä¸ªç®€å•çš„è¯·å‡æµç¨‹ï¼Œå¤„ç†äººé€šè¿‡å€™é€‰äººç»„çš„æ–¹å¼æ¥å¤„ç†ã€‚</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220917201151251.png\"\n                      alt=\"image-20220917201151251\"\n                ></p>\n<h4 id=\"æµç¨‹çš„éƒ¨ç½²è¿è¡Œ\"><a href=\"#æµç¨‹çš„éƒ¨ç½²è¿è¡Œ\" class=\"headerlink\" title=\"æµç¨‹çš„éƒ¨ç½²è¿è¡Œ\"></a>æµç¨‹çš„éƒ¨ç½²è¿è¡Œ</h4><p>ç„¶åæˆ‘ä»¬æŠŠæµç¨‹éƒ¨ç½²å’Œè¿è¡Œã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">    * å®Œæˆæµç¨‹çš„éƒ¨ç½²æ“ä½œ</span></span><br><span class=\"line\"><span class=\"comment\">    */</span></span><br><span class=\"line\">   <span class=\"meta\">@Test</span></span><br><span class=\"line\">   <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">deploy</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">       <span class=\"type\">Deployment</span> <span class=\"variable\">deploy</span> <span class=\"operator\">=</span> repositoryService.createDeployment()</span><br><span class=\"line\">               .name(<span class=\"string\">&quot;å€™é€‰äººç»„æ¡ˆä¾‹&quot;</span>)</span><br><span class=\"line\">               .addClasspathResource(<span class=\"string\">&quot;flow/å€™é€‰äººç»„.bpmn&quot;</span>)</span><br><span class=\"line\">               .deploy();</span><br><span class=\"line\">       System.out.println(<span class=\"string\">&quot;deploy.getId() = &quot;</span> + deploy.getId());</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">    * å¯åŠ¨æµç¨‹å®ä¾‹</span></span><br><span class=\"line\"><span class=\"comment\">    */</span></span><br><span class=\"line\">   <span class=\"meta\">@Test</span></span><br><span class=\"line\">   <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">startFlow</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">       <span class=\"type\">String</span> <span class=\"variable\">processInstanceId</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;Process_1gvo8so:1:3e253edb-3682-11ed-a1ff-c03c59ad2248&quot;</span>;</span><br><span class=\"line\">       runtimeService.startProcessInstanceById(processInstanceId);</span><br><span class=\"line\">   &#125;</span><br></pre></td></tr></table></figure>\n\n<p>éƒ¨ç½²æˆåŠŸåæˆ‘ä»¬å¯ä»¥åœ¨<code>act_ru_identitylink</code>ä¸­çœ‹åˆ°å¯¹åº”çš„è®°å½•ã€‚</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220917201747129.png\"\n                      alt=\"image-20220917201747129\"\n                ></p>\n<h4 id=\"ä»»åŠ¡çš„æ‹¾å–å’Œå®Œæˆ\"><a href=\"#ä»»åŠ¡çš„æ‹¾å–å’Œå®Œæˆ\" class=\"headerlink\" title=\"ä»»åŠ¡çš„æ‹¾å–å’Œå®Œæˆ\"></a>ä»»åŠ¡çš„æ‹¾å–å’Œå®Œæˆ</h4><p>ç„¶åå®Œæˆä»»åŠ¡çš„æŸ¥è¯¢æ‹¾å–å’Œå¤„ç†æ“ä½œã€‚é€»è¾‘æ˜¯æ ¹æ®å½“å‰çš„ç™»å½•<code>ç”¨æˆ·</code>æ‰¾åˆ°å¯¹åº”çš„<code>ç»„</code>ï¼Œç„¶åæ ¹æ®<code>ç»„</code>æ‰¾åˆ°å¯¹åº”çš„ä»»åŠ¡ä¿¡æ¯ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  * æ ¹æ®ç™»å½•çš„ç”¨æˆ·æŸ¥è¯¢å¯¹åº”çš„å¯ä»¥æ‹¾å–çš„ä»»åŠ¡</span></span><br><span class=\"line\"><span class=\"comment\">  *</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\"> <span class=\"meta\">@Test</span></span><br><span class=\"line\"> <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">queryTaskCandidateGroup</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">     <span class=\"comment\">// å½“å‰ç”¨æˆ·æ‰€åœ¨çš„ç»„</span></span><br><span class=\"line\">     <span class=\"type\">Group</span> <span class=\"variable\">group</span> <span class=\"operator\">=</span> identityService.createGroupQuery().groupMember(<span class=\"string\">&quot;zhang&quot;</span>).singleResult();</span><br><span class=\"line\">     List&lt;Task&gt; list = taskService.createTaskQuery()</span><br><span class=\"line\">             .processInstanceId(<span class=\"string\">&quot;711d5726-3682-11ed-8b9b-c03c59ad2248&quot;</span>)</span><br><span class=\"line\">             .taskCandidateGroup(group.getId())</span><br><span class=\"line\">             .list();</span><br><span class=\"line\">     <span class=\"keyword\">for</span> (Task task : list) &#123;</span><br><span class=\"line\">         System.out.println(<span class=\"string\">&quot;task.getId() = &quot;</span> + task.getId());</span><br><span class=\"line\">         System.out.println(<span class=\"string\">&quot;task.getName() = &quot;</span> + task.getName());</span><br><span class=\"line\">     &#125;</span><br><span class=\"line\"> &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"> <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  * æ‹¾å–ä»»åŠ¡</span></span><br><span class=\"line\"><span class=\"comment\">  *    ä¸€ä¸ªå€™é€‰äººæ‹¾å–äº†è¿™ä¸ªä»»åŠ¡ä¹‹åå…¶ä»–çš„ç”¨æˆ·å°±æ²¡æœ‰åŠæ³•æ‹¾å–è¿™ä¸ªä»»åŠ¡äº†</span></span><br><span class=\"line\"><span class=\"comment\">  *    æ‰€ä»¥å¦‚æœä¸€ä¸ªç”¨æˆ·æ‹¾å–äº†ä»»åŠ¡ä¹‹ååˆä¸æƒ³å¤„ç†äº†ï¼Œé‚£ä¹ˆå¯ä»¥é€€è¿˜</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\"> <span class=\"meta\">@Test</span></span><br><span class=\"line\"> <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">claimTaskCandidate1</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">     <span class=\"type\">String</span> <span class=\"variable\">userId</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;zhang&quot;</span>;</span><br><span class=\"line\">     <span class=\"comment\">// å½“å‰ç”¨æˆ·æ‰€åœ¨çš„ç»„</span></span><br><span class=\"line\">     <span class=\"type\">Group</span> <span class=\"variable\">group</span> <span class=\"operator\">=</span> identityService.createGroupQuery().groupMember(userId).singleResult();</span><br><span class=\"line\">     <span class=\"type\">Task</span> <span class=\"variable\">task</span> <span class=\"operator\">=</span> taskService.createTaskQuery()</span><br><span class=\"line\">             .processInstanceId(<span class=\"string\">&quot;711d5726-3682-11ed-8b9b-c03c59ad2248&quot;</span>)</span><br><span class=\"line\">             .taskCandidateGroup(group.getId())</span><br><span class=\"line\">             .singleResult();</span><br><span class=\"line\">     <span class=\"keyword\">if</span>(task != <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">         <span class=\"comment\">// ä»»åŠ¡æ‹¾å–</span></span><br><span class=\"line\">         taskService.claim(task.getId(),userId);</span><br><span class=\"line\">         System.out.println(<span class=\"string\">&quot;ä»»åŠ¡æ‹¾å–æˆåŠŸ&quot;</span>);</span><br><span class=\"line\">     &#125;</span><br><span class=\"line\"> &#125;</span><br></pre></td></tr></table></figure>\n\n<p>æ‹¾å–åçš„æ“ä½œå’Œå‰é¢æ˜¯ä¸€æ ·çš„ï¼Œå°±æ²¡å¿…è¦èµ˜è¿°ã€‚å½“ç„¶æˆ‘ä»¬åœ¨å®šä¹‰æµç¨‹çš„æ—¶å€™ä¹Ÿå¯ä»¥é€šè¿‡å€¼è¡¨è¾¾å¼æ¥å¤„ç†ï¼Œæˆ‘ä»¬éœ€è¦æ³¨æ„èµ‹å€¼å³å¯ã€‚</p>\n<h2 id=\"ç§Ÿæˆ·\"><a href=\"#ç§Ÿæˆ·\" class=\"headerlink\" title=\"ç§Ÿæˆ·\"></a>ç§Ÿæˆ·</h2><p><em>å¤šç§Ÿæˆ·</em> æ˜¯æŒ‡ä¸€ä¸ªå•ä¸€çš„Camundaåº”ç”¨éœ€è¦ä¸ºå¤šä¸ªçš„ç§Ÿæˆ·æœåŠ¡çš„æƒ…å†µã€‚å¯¹äºæ¯ä¸ªç§Ÿæˆ·æ¥è¯´ï¼Œåº”è¯¥æœ‰æŸäº›éš”ç¦»çš„ä¿è¯ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªç§Ÿæˆ·çš„æµç¨‹å®ä¾‹ä¸åº”å¹²æ‰°å¦ä¸€ä¸ªç§Ÿæˆ·çš„æµç¨‹å®ä¾‹ã€‚</p>\n<p>å¤šç§Ÿæˆ·å¯ä»¥é€šè¿‡ä¸¤ç§ä¸åŒçš„æ–¹å¼å®ç°ã€‚ä¸€ç§æ˜¯ä½¿ç”¨æ¯ä¸ªç§Ÿæˆ·ä¸€ä¸ªæµç¨‹å¼•æ“ã€‚å¦ä¸€ç§æ–¹å¼æ˜¯åªä½¿ç”¨ä¸€ä¸ªæµç¨‹å¼•æ“ï¼Œå¹¶å°†æ•°æ®ä¸ç§Ÿæˆ·æ ‡è¯†ç¬¦ç›¸å…³è”ã€‚è¿™ä¸¤ç§æ–¹å¼åœ¨æ•°æ®éš”ç¦»ç¨‹åº¦ã€ç»´æŠ¤å·¥ä½œå’Œå¯æ‰©å±•æ€§æ–¹é¢å„æœ‰ä¸åŒã€‚ä¸¤ç§æ–¹å¼çš„ç»„åˆä¹Ÿæ˜¯å¯èƒ½çš„ã€‚</p>\n<p>å¤šç§Ÿæˆ·å¯ä»¥ä½¿ç”¨ç§Ÿæˆ·æ ‡è¯†ç¬¦ï¼ˆå³tenant-idsï¼‰çš„æµç¨‹å¼•æ“æ¥å®ç°ã€‚æ‰€æœ‰ç§Ÿæˆ·çš„æ•°æ®éƒ½å­˜å‚¨åœ¨ä¸€ä¸ªè¡¨ä¸­ï¼ˆåŒä¸€æ•°æ®åº“å’Œè¡¨ç»“æ„ï¼‰ã€‚é€šè¿‡å­˜å‚¨åœ¨åˆ—ä¸­çš„ç§Ÿæˆ·æ ‡è¯†ç¬¦æ¥æä¾›éš”ç¦»ã€‚</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220917203832905.png\"\n                      alt=\"image-20220917203832905\"\n                ></p>\n<h3 id=\"ç§Ÿæˆ·ç®¡ç†\"><a href=\"#ç§Ÿæˆ·ç®¡ç†\" class=\"headerlink\" title=\"ç§Ÿæˆ·ç®¡ç†\"></a>ç§Ÿæˆ·ç®¡ç†</h3><p>ç§Ÿæˆ·å¯¹åº”äº<code>act_id.tenant</code>è¡¨ç»“æ„ä¸­çš„æ•°æ®ã€‚æˆ‘ä»¬å¯ä»¥å…ˆæ¥ç»´æŠ¤ç§Ÿæˆ·çš„ç›¸å…³ä¿¡æ¯ã€‚åˆ›å»º<code>é•¿æ²™åˆ†å…¬å¸</code>çš„ç§Ÿæˆ·ä¿¡æ¯</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * åˆ›å»ºç§Ÿæˆ·</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">createTenant</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"type\">Tenant</span> <span class=\"variable\">tenant</span> <span class=\"operator\">=</span> identityService.newTenant(<span class=\"string\">&quot;cs&quot;</span>);</span><br><span class=\"line\">    tenant.setName(<span class=\"string\">&quot;é•¿æ²™åˆ†å…¬å¸&quot;</span>);</span><br><span class=\"line\">    identityService.saveTenant(tenant);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220918220534584.png\"\n                      alt=\"image-20220918220534584\"\n                ></p>\n<p>å½“ç„¶å‚è€ƒå‰é¢çš„åˆ é™¤å’Œæ›´æ–°æ“ä½œä¹Ÿå¯ä»¥éå¸¸è½»æ¾çš„å®Œæˆ<code>ç§Ÿæˆ·</code>ç›¸å…³ä¿¡æ¯çš„å¤„ç†ã€‚ç„¶åæˆ‘ä»¬æ¥çœ‹ä¸‹ç§Ÿæˆ·å’Œç”¨æˆ·å’Œç»„çš„å…³ç³»ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * å»ºç«‹ ç§Ÿæˆ· å’Œ ç»„çš„å…³ç³»</span></span><br><span class=\"line\"><span class=\"comment\"> * å½“ç„¶ä¹Ÿå¯ä»¥å»ºç«‹ ç§Ÿæˆ·å’Œç”¨æˆ·çš„å…³ç³»ã€‚åªæ˜¯è¿™ç§æ¯”è¾ƒå°‘ç”¨</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">createTenantAndGroupShip</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    identityService.createTenantGroupMembership(<span class=\"string\">&quot;cs&quot;</span>,<span class=\"string\">&quot;group1&quot;</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220918220924950.png\"\n                      alt=\"image-20220918220924950\"\n                ></p>\n<h3 id=\"éƒ¨ç½²æ“ä½œ\"><a href=\"#éƒ¨ç½²æ“ä½œ\" class=\"headerlink\" title=\"éƒ¨ç½²æ“ä½œ\"></a>éƒ¨ç½²æ“ä½œ</h3><p>æˆ‘ä»¬åœ¨éƒ¨ç½²æµç¨‹çš„æ—¶å€™å¯ä»¥æŒ‡å®šå¯¹åº”çš„ç§Ÿæˆ·ç¼–å·ã€‚å¦‚æœä¸æŒ‡å®šç§Ÿæˆ·ç¼–å·ï¼Œè¯´æ˜è¯¥æµç¨‹æ˜¯å±äºæ‰€æœ‰ç§Ÿæˆ·çš„ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * å®Œæˆæµç¨‹çš„éƒ¨ç½²æ“ä½œ</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">deploy</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"type\">Deployment</span> <span class=\"variable\">deploy</span> <span class=\"operator\">=</span> repositoryService.createDeployment()</span><br><span class=\"line\">            .name(<span class=\"string\">&quot;å€™é€‰äººæ¡ˆä¾‹-ç§Ÿæˆ·&quot;</span>)</span><br><span class=\"line\">            .tenantId(<span class=\"string\">&quot;tenant1&quot;</span>)</span><br><span class=\"line\">            .addClasspathResource(<span class=\"string\">&quot;flow/å€™é€‰äººæ¡ˆä¾‹.bpmn&quot;</span>)</span><br><span class=\"line\">            .deploy();</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;deploy.getId() = &quot;</span> + deploy.getId());</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n<h3 id=\"æŸ¥çœ‹éƒ¨ç½²æµç¨‹\"><a href=\"#æŸ¥çœ‹éƒ¨ç½²æµç¨‹\" class=\"headerlink\" title=\"æŸ¥çœ‹éƒ¨ç½²æµç¨‹\"></a>æŸ¥çœ‹éƒ¨ç½²æµç¨‹</h3><p>è®¾ç½®äº†ç§Ÿæˆ·ç¼–å·åï¼Œæˆ‘ä»¬è¦åšç›¸å…³çš„æŸ¥è¯¢ï¼Œå¯ä»¥é€šè¿‡å¦‚ä¸‹çš„APIæ¥å®ç°</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * åŸºäºç§Ÿæˆ· æŸ¥è¯¢ç›¸å…³çš„éƒ¨ç½²æµç¨‹</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">getByTenantId</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    List&lt;Deployment&gt; list = repositoryService.createDeploymentQuery()</span><br><span class=\"line\">            .tenantIdIn(<span class=\"string\">&quot;cs&quot;</span>)</span><br><span class=\"line\">            .list();</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (Deployment deployment : list) &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;deployment.getId() = &quot;</span> + deployment.getId());</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;deployment.getName() = &quot;</span> + deployment.getName());</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;------------&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>é€šè¿‡è°ƒç”¨<code>withoutTenantId()</code>æ¥æŸ¥è¯¢ä¸å±äºä»»ä½•ç§Ÿæˆ·çš„éƒ¨ç½²ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">getByWithoutTenantId</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">        List&lt;Deployment&gt; list = repositoryService.createDeploymentQuery()</span><br><span class=\"line\">                .withoutTenantId() <span class=\"comment\">// æŸ¥è¯¢å‡ºæ‰€æœ‰ä¸å±äºä»»ä½•tenantIdçš„è®°å½•</span></span><br><span class=\"line\">                .list();</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (Deployment deployment : list) &#123;</span><br><span class=\"line\">            System.out.println(<span class=\"string\">&quot;deployment.getId() = &quot;</span> + deployment.getId());</span><br><span class=\"line\">            System.out.println(<span class=\"string\">&quot;deployment.getName() = &quot;</span> + deployment.getName());</span><br><span class=\"line\">            System.out.println(<span class=\"string\">&quot;------------&quot;</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<p>ä¹Ÿå¯ä»¥é€šè¿‡è°ƒç”¨<code>includeDeploymentsWithoutTenantId()</code>æ¥æŸ¥è¯¢å±äºç‰¹å®šç§Ÿæˆ·æˆ–ä¸å±äºç§Ÿæˆ·çš„éƒ¨ç½²ã€‚</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@Test</span><br><span class=\"line\">public void getByIncludTenantId()&#123;</span><br><span class=\"line\">    List&lt;Deployment&gt; list = repositoryService.createDeploymentQuery()</span><br><span class=\"line\">            .tenantIdIn(&quot;cs&quot;)</span><br><span class=\"line\">            .includeDeploymentsWithoutTenantId() // æŸ¥è¯¢å‡º tenant1 å’Œ ä¸å±äº ç§Ÿæˆ·çš„è®°å½•</span><br><span class=\"line\">            .list();</span><br><span class=\"line\">    for (Deployment deployment : list) &#123;</span><br><span class=\"line\">        System.out.println(&quot;deployment.getId() = &quot; + deployment.getId());</span><br><span class=\"line\">        System.out.println(&quot;deployment.getName() = &quot; + deployment.getName());</span><br><span class=\"line\">        System.out.println(&quot;------------&quot;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ä¸ â€œéƒ¨ç½²æŸ¥è¯¢â€ ç±»ä¼¼ï¼Œå®šä¹‰æŸ¥è¯¢å…è®¸é€šè¿‡ä¸€ä¸ªæˆ–å¤šä¸ªç§Ÿæˆ·å’Œä¸å±äºä»»ä½•ç§Ÿæˆ·çš„å®šä¹‰è¿›è¡Œè¿‡æ»¤ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">List&lt;ProcessDefinition&gt; processDefinitions = repositoryService</span><br><span class=\"line\">  .createProcessDefinitionQuery()</span><br><span class=\"line\">  .tenantIdIn(<span class=\"string\">&quot;cs&quot;</span>)</span><br><span class=\"line\">  .includeProcessDefinitionsWithoutTenantId();</span><br><span class=\"line\">  .list();</span><br></pre></td></tr></table></figure>\n\n\n\n\n\n<h3 id=\"å¯åŠ¨æµç¨‹å®ä¾‹\"><a href=\"#å¯åŠ¨æµç¨‹å®ä¾‹\" class=\"headerlink\" title=\"å¯åŠ¨æµç¨‹å®ä¾‹\"></a>å¯åŠ¨æµç¨‹å®ä¾‹</h3><p>é€šè¿‡keyåˆ›å»ºä¸€ä¸ªä¸ºå¤šç§Ÿæˆ·éƒ¨ç½²çš„æµç¨‹å®šä¹‰çš„å®ä¾‹ï¼Œå¿…é¡»åœ¨<code>ProcessInstantiationBuilder</code> ä¸­ä¼ é€’ç§Ÿæˆ·æ ‡è¯†ç¬¦ ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * ç§Ÿæˆ· å¯åŠ¨ä¸€ä¸ªæµç¨‹å®ä¾‹</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">startFlow</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">processKey</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;Process_05vjqic&quot;</span>;</span><br><span class=\"line\">    <span class=\"type\">ProcessInstance</span> <span class=\"variable\">processInstance</span> <span class=\"operator\">=</span> runtimeService</span><br><span class=\"line\">            .createProcessInstanceByKey(processKey)</span><br><span class=\"line\">            .processDefinitionTenantId(<span class=\"string\">&quot;cs&quot;</span>)</span><br><span class=\"line\">            .execute();</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;processInstance.getId() = &quot;</span> + processInstance.getId());</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">startFlow1</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">processId</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;Process_05vjqic:1:a6b23794-3767-11ed-a4df-c03c59ad2248&quot;</span>;</span><br><span class=\"line\">    <span class=\"type\">ProcessInstance</span> <span class=\"variable\">processInstance</span> <span class=\"operator\">=</span> runtimeService</span><br><span class=\"line\">            .createProcessInstanceById(processId)</span><br><span class=\"line\">            .execute();</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;processInstance.getId() = &quot;</span> + processInstance.getId());</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>å¯åŠ¨åæµç¨‹åï¼Œåœ¨åˆ›å»ºçš„Taskè®°å½•ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°å¯¹åº”çš„<code>ç§Ÿæˆ·</code>ä¿¡æ¯</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220918234504559.png\"\n                      alt=\"image-20220918234504559\"\n                ></p>\n<p>å› ä¸ºæˆ‘ä»¬åœ¨æµç¨‹è®¾è®¡çš„æ—¶å€™å°±æŒ‡å®šäº†ç¬¬ä¸€ä¸ªèŠ‚ç‚¹çš„å€™é€‰äººæ˜¯<code>group1</code>,æ‰€ä»¥åœ¨<code>act_ru_identitylink</code>è¡¨ä¸­å¯ä»¥çœ‹åˆ°ç›¸å…³çš„è®°å½•ã€‚</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220918234618891.png\"\n                      alt=\"image-20220918234618891\"\n                ></p>\n<h3 id=\"ä»»åŠ¡æ‹¾å–\"><a href=\"#ä»»åŠ¡æ‹¾å–\" class=\"headerlink\" title=\"ä»»åŠ¡æ‹¾å–\"></a>ä»»åŠ¡æ‹¾å–</h3><p>æ¥ä¸‹æ¥å°±å¯ä»¥å¯¹ä»»åŠ¡åš<code>æ‹¾å–</code>çš„æ“ä½œäº†</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  * æ ¹æ®å½“å‰ç™»å½•ç”¨æˆ· æŸ¥è¯¢åˆ°éœ€è¦æ‹¾å–çš„ä»»åŠ¡</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\"> <span class=\"meta\">@Test</span></span><br><span class=\"line\"> <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">claimTask</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">     <span class=\"comment\">// æ ¹æ®ç™»å½•ç”¨æˆ·æŸ¥è¯¢åˆ°å¯¹åº”çš„Group</span></span><br><span class=\"line\">     List&lt;Group&gt; groups = identityService.createGroupQuery().groupMember(<span class=\"string\">&quot;demo&quot;</span>).list();</span><br><span class=\"line\">     <span class=\"keyword\">if</span>(groups != <span class=\"literal\">null</span> &amp;&amp; groups.size() &gt; <span class=\"number\">0</span>)&#123;</span><br><span class=\"line\">         <span class=\"keyword\">for</span> (Group group : groups) &#123;</span><br><span class=\"line\">             <span class=\"comment\">// æ ¹æ® group æ‰¾åˆ°å¯¹åº”çš„ ç§Ÿæˆ·</span></span><br><span class=\"line\">             List&lt;Tenant&gt; tenants = identityService.createTenantQuery().groupMember(group.getId()).list();</span><br><span class=\"line\">             List&lt;String&gt; tenantStrings = <span class=\"keyword\">new</span> <span class=\"title class_\">ArrayList</span>&lt;&gt;();</span><br><span class=\"line\">             <span class=\"keyword\">if</span>(tenants != <span class=\"literal\">null</span> &amp;&amp; tenants.size() &gt; <span class=\"number\">0</span>)&#123;</span><br><span class=\"line\">                 tenantStrings = tenants.stream().map((item)-&gt;&#123;</span><br><span class=\"line\">                     <span class=\"keyword\">return</span> item.getId();</span><br><span class=\"line\">                 &#125;).collect(Collectors.toList());</span><br><span class=\"line\"></span><br><span class=\"line\">                 String[] ss = <span class=\"keyword\">new</span> <span class=\"title class_\">String</span>[tenantStrings.size()];</span><br><span class=\"line\">                 tenantStrings.toArray(ss);</span><br><span class=\"line\">                 List&lt;Task&gt; list = taskService.createTaskQuery()</span><br><span class=\"line\">                         .tenantIdIn(ss)</span><br><span class=\"line\">                         .list();</span><br><span class=\"line\">                 <span class=\"keyword\">if</span>(list != <span class=\"literal\">null</span> &amp;&amp; list.size() &gt; <span class=\"number\">0</span>)&#123;</span><br><span class=\"line\">                     <span class=\"keyword\">for</span> (Task task : list) &#123;</span><br><span class=\"line\">                         System.out.println(<span class=\"string\">&quot;task.getId() = &quot;</span> + task.getId());</span><br><span class=\"line\">                     &#125;</span><br><span class=\"line\">                 &#125;</span><br><span class=\"line\">             &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">         &#125;</span><br><span class=\"line\">     &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"> &#125;</span><br></pre></td></tr></table></figure>\n\n<p>å¯ä»¥æŸ¥è¯¢åˆ°å¯¹åº”çš„æ‹¾å–å°±æ¯”è¾ƒç®€å•äº†</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">claimTask</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// æ ¹æ®ç™»å½•ç”¨æˆ·æŸ¥è¯¢åˆ°å¯¹åº”çš„Group</span></span><br><span class=\"line\">    List&lt;Group&gt; groups = identityService.createGroupQuery().groupMember(<span class=\"string\">&quot;demo&quot;</span>).list();</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(groups != <span class=\"literal\">null</span> &amp;&amp; groups.size() &gt; <span class=\"number\">0</span>)&#123;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (Group group : groups) &#123;</span><br><span class=\"line\">            <span class=\"comment\">// æ ¹æ® group æ‰¾åˆ°å¯¹åº”çš„ ç§Ÿæˆ·</span></span><br><span class=\"line\">            List&lt;Tenant&gt; tenants = identityService.createTenantQuery().groupMember(group.getId()).list();</span><br><span class=\"line\">            List&lt;String&gt; tenantStrings = <span class=\"keyword\">new</span> <span class=\"title class_\">ArrayList</span>&lt;&gt;();</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(tenants != <span class=\"literal\">null</span> &amp;&amp; tenants.size() &gt; <span class=\"number\">0</span>)&#123;</span><br><span class=\"line\">                tenantStrings = tenants.stream().map((item)-&gt;&#123;</span><br><span class=\"line\">                    <span class=\"keyword\">return</span> item.getId();</span><br><span class=\"line\">                &#125;).collect(Collectors.toList());</span><br><span class=\"line\"></span><br><span class=\"line\">                String[] ss = <span class=\"keyword\">new</span> <span class=\"title class_\">String</span>[tenantStrings.size()];</span><br><span class=\"line\">                tenantStrings.toArray(ss);</span><br><span class=\"line\">                List&lt;Task&gt; list = taskService.createTaskQuery()</span><br><span class=\"line\">                        .tenantIdIn(ss)</span><br><span class=\"line\">                        .list();</span><br><span class=\"line\">                <span class=\"keyword\">if</span>(list != <span class=\"literal\">null</span> &amp;&amp; list.size() &gt; <span class=\"number\">0</span>)&#123;</span><br><span class=\"line\">                    <span class=\"keyword\">for</span> (Task task : list) &#123;</span><br><span class=\"line\">                        taskService.claim(task.getId(),<span class=\"string\">&quot;demo&quot;</span>);</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220919003450202.png\"\n                      alt=\"image-20220919003450202\"\n                ></p>\n<p>èƒ½å¤Ÿæ‹¾å–æˆåŠŸï¼Œé‚£ä¹ˆåé¢çš„æ“ä½œå°±æ˜¯ä»»åŠ¡çš„å®¡æ‰¹ã€‚æ¥ä¸‹æ¥çš„æ“ä½œå°±å’Œå‰é¢æ˜¯ä¸€æ ·çš„äº†ã€‚ä¸å†èµ˜è¿°~</p>\n<h1 id=\"ç½‘å…³ç¯‡\"><a href=\"#ç½‘å…³ç¯‡\" class=\"headerlink\" title=\"ç½‘å…³ç¯‡\"></a>ç½‘å…³ç¯‡</h1><p>ç½‘å…³ç”¨æ¥æ§åˆ¶æµç¨‹çš„æµå‘</p>\n<h2 id=\"æ’ä»–ç½‘å…³\"><a href=\"#æ’ä»–ç½‘å…³\" class=\"headerlink\" title=\"æ’ä»–ç½‘å…³\"></a>æ’ä»–ç½‘å…³</h2><p><code>æ’ä»–ç½‘å…³</code>ï¼ˆexclusive gatewayï¼‰ï¼ˆä¹Ÿå«<em>å¼‚æˆ–ç½‘å…³ XOR gateway</em>ï¼Œæˆ–è€…æ›´ä¸“ä¸šçš„ï¼Œ<em>åŸºäºæ•°æ®çš„æ’ä»–ç½‘å…³ exclusive data-based gateway</em>ï¼‰ï¼Œç”¨äºå¯¹æµç¨‹ä¸­çš„<strong>å†³ç­–</strong>å»ºæ¨¡ã€‚å½“æ‰§è¡Œåˆ°è¾¾è¿™ä¸ªç½‘å…³æ—¶ï¼Œä¼šæŒ‰ç…§æ‰€æœ‰å‡ºå£é¡ºåºæµå®šä¹‰çš„é¡ºåºå¯¹å®ƒä»¬è¿›è¡Œè®¡ç®—ã€‚é€‰æ‹©ç¬¬ä¸€ä¸ªæ¡ä»¶è®¡ç®—ä¸ºtrueçš„é¡ºåºæµï¼ˆå½“æ²¡æœ‰è®¾ç½®æ¡ä»¶æ—¶ï¼Œè®¤ä¸ºé¡ºåºæµä¸º<em>true</em>ï¼‰ç»§ç»­æµç¨‹ã€‚</p>\n<p>ç»˜åˆ¶æµç¨‹å›¾ï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220922002931276.png\"\n                      alt=\"image-20220922002931276\"\n                ></p>\n<p>å¯¹åº”çš„XMLæ–‡ä»¶</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220922003022802.png\"\n                      alt=\"image-20220922003022802\"\n                ></p>\n<p>æµç¨‹æ¼”ç¤º</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  * å®Œæˆæµç¨‹çš„éƒ¨ç½²æ“ä½œ</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\"> <span class=\"meta\">@Test</span></span><br><span class=\"line\"> <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">deploy</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">     <span class=\"type\">Deployment</span> <span class=\"variable\">deploy</span> <span class=\"operator\">=</span> repositoryService.createDeployment()</span><br><span class=\"line\">             .name(<span class=\"string\">&quot;æ’ä»–ç½‘å…³&quot;</span>)</span><br><span class=\"line\">             .addClasspathResource(<span class=\"string\">&quot;flow/æ’ä»–ç½‘å…³.bpmn&quot;</span>)</span><br><span class=\"line\">             .deploy();</span><br><span class=\"line\">     System.out.println(<span class=\"string\">&quot;deploy.getId() = &quot;</span> + deploy.getId());</span><br><span class=\"line\"> &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"> <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  * é€šè¿‡æµç¨‹å®šä¹‰Id å¯åŠ¨</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\"> <span class=\"meta\">@Test</span></span><br><span class=\"line\"> <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">startFlow</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">     <span class=\"type\">String</span> <span class=\"variable\">processId</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;Process_0eykic0:1:efadfc92-39c9-11ed-8f13-c03c59ad2248&quot;</span>;</span><br><span class=\"line\">     <span class=\"type\">ProcessInstance</span> <span class=\"variable\">processInstance</span> <span class=\"operator\">=</span> runtimeService.startProcessInstanceById(processId);</span><br><span class=\"line\">     System.out.println(<span class=\"string\">&quot;processInstance.getId() = &quot;</span> + processInstance.getId());</span><br><span class=\"line\"> &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"> <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  * å®Œæˆä»»åŠ¡</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\"> <span class=\"meta\">@Test</span></span><br><span class=\"line\"> <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">completeTask</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">     Map&lt;String,Object&gt; map = <span class=\"keyword\">new</span> <span class=\"title class_\">HashMap</span>&lt;&gt;();</span><br><span class=\"line\">     map.put(<span class=\"string\">&quot;day&quot;</span>,<span class=\"number\">4</span>);</span><br><span class=\"line\">     taskService.complete(<span class=\"string\">&quot;21a323ee-39ca-11ed-8b49-c03c59ad2248&quot;</span>,map);</span><br><span class=\"line\"> &#125;</span><br></pre></td></tr></table></figure>\n\n<p>ä¼ é€’çš„æ˜¯<code>day=4</code>ä¼šèµ°ä¸­é—´çš„è·¯çº¿ã€‚</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220922003119262.png\"\n                      alt=\"image-20220922003119262\"\n                ></p>\n<h2 id=\"å¹¶è¡Œç½‘å…³\"><a href=\"#å¹¶è¡Œç½‘å…³\" class=\"headerlink\" title=\"å¹¶è¡Œç½‘å…³\"></a>å¹¶è¡Œç½‘å…³</h2><p>å¹¶è¡Œç½‘å…³å…è®¸å°†æµç¨‹åˆ†æˆå¤šæ¡åˆ†æ”¯ï¼Œä¹Ÿå¯ä»¥æŠŠå¤šæ¡åˆ†æ”¯æ±‡èšåˆ°ä¸€èµ·ï¼Œå¹¶è¡Œç½‘å…³çš„åŠŸèƒ½æ˜¯åŸºäºè¿›å…¥å’Œå¤–å‡ºé¡ºåºæµçš„ï¼š</p>\n<ul>\n<li><p>forkåˆ†æ”¯ï¼šå¹¶è¡Œåçš„æ‰€æœ‰å¤–å‡ºé¡ºåºæµï¼Œä¸ºæ¯ä¸ªé¡ºåºæµéƒ½åˆ›å»ºä¸€ä¸ªå¹¶å‘åˆ†æ”¯ã€‚</p>\n</li>\n<li><p>joinæ±‡èšï¼š æ‰€æœ‰åˆ°è¾¾å¹¶è¡Œç½‘å…³ï¼Œåœ¨æ­¤ç­‰å¾…çš„è¿›å…¥åˆ†æ”¯ï¼Œ ç›´åˆ°æ‰€æœ‰è¿›å…¥é¡ºåºæµçš„åˆ†æ”¯éƒ½åˆ°è¾¾ä»¥åï¼Œ æµç¨‹å°±ä¼šé€šè¿‡æ±‡èšç½‘å…³ã€‚</p>\n</li>\n</ul>\n<p>æ³¨æ„ï¼Œå¦‚æœåŒä¸€ä¸ªå¹¶è¡Œç½‘å…³æœ‰å¤šä¸ªè¿›å…¥å’Œå¤šä¸ªå¤–å‡ºé¡ºåºæµï¼Œ å®ƒå°±åŒæ—¶å…·æœ‰åˆ†æ”¯å’Œæ±‡èšåŠŸèƒ½ã€‚ è¿™æ—¶ï¼Œç½‘å…³ä¼šå…ˆæ±‡èšæ‰€æœ‰è¿›å…¥çš„é¡ºåºæµï¼Œç„¶åå†åˆ‡åˆ†æˆå¤šä¸ªå¹¶è¡Œåˆ†æ”¯ã€‚</p>\n<p><strong>ä¸å…¶ä»–ç½‘å…³çš„ä¸»è¦åŒºåˆ«æ˜¯ï¼Œå¹¶è¡Œç½‘å…³ä¸ä¼šè§£ææ¡ä»¶ã€‚</strong> <strong>å³ä½¿é¡ºåºæµä¸­å®šä¹‰äº†æ¡ä»¶ï¼Œä¹Ÿä¼šè¢«å¿½ç•¥ã€‚</strong></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220922003323785.png\"\n                      alt=\"image-20220922003323785\"\n                ></p>\n<h2 id=\"åŒ…å«ç½‘å…³\"><a href=\"#åŒ…å«ç½‘å…³\" class=\"headerlink\" title=\"åŒ…å«ç½‘å…³\"></a>åŒ…å«ç½‘å…³</h2><p>åŒ…å«ç½‘å…³å¯ä»¥çœ‹åšæ˜¯æ’ä»–ç½‘å…³å’Œå¹¶è¡Œç½‘å…³çš„ç»“åˆä½“ã€‚ å’Œæ’ä»–ç½‘å…³ä¸€æ ·ï¼Œä½ å¯ä»¥åœ¨å¤–å‡ºé¡ºåºæµä¸Šå®šä¹‰æ¡ä»¶ï¼ŒåŒ…å«ç½‘å…³ä¼šè§£æå®ƒä»¬ã€‚ ä½†æ˜¯ä¸»è¦çš„åŒºåˆ«æ˜¯åŒ…å«ç½‘å…³å¯ä»¥é€‰æ‹©å¤šäºä¸€æ¡é¡ºåºæµï¼Œè¿™å’Œå¹¶è¡Œç½‘å…³ä¸€æ ·ã€‚</p>\n<p>åŒ…å«ç½‘å…³çš„åŠŸèƒ½æ˜¯åŸºäºè¿›å…¥å’Œå¤–å‡ºé¡ºåºæµçš„ï¼š</p>\n<ul>\n<li><p>åˆ†æ”¯ï¼š æ‰€æœ‰å¤–å‡ºé¡ºåºæµçš„æ¡ä»¶éƒ½ä¼šè¢«è§£æï¼Œç»“æœä¸ºtrueçš„é¡ºåºæµä¼šä»¥å¹¶è¡Œæ–¹å¼ç»§ç»­æ‰§è¡Œï¼Œ ä¼šä¸ºæ¯ä¸ªé¡ºåºæµåˆ›å»ºä¸€ä¸ªåˆ†æ”¯ã€‚</p>\n</li>\n<li><p>æ±‡èšï¼šæ‰€æœ‰å¹¶è¡Œåˆ†æ”¯åˆ°è¾¾åŒ…å«ç½‘å…³ï¼Œä¼šè¿›å…¥ç­‰å¾…çŠ¶æ€ï¼Œ ç›´åˆ°æ¯ä¸ªåŒ…å«æµç¨‹tokençš„è¿›å…¥é¡ºåºæµçš„åˆ†æ”¯éƒ½åˆ°è¾¾ã€‚ è¿™æ˜¯ä¸å¹¶è¡Œç½‘å…³çš„æœ€å¤§ä¸åŒã€‚æ¢å¥è¯è¯´ï¼ŒåŒ…å«ç½‘å…³åªä¼šç­‰å¾…è¢«é€‰ä¸­æ‰§è¡Œäº†çš„è¿›å…¥é¡ºåºæµã€‚ åœ¨æ±‡èšä¹‹åï¼Œæµç¨‹ä¼šç©¿è¿‡åŒ…å«ç½‘å…³ç»§ç»­æ‰§è¡Œã€‚</p>\n</li>\n</ul>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220922005111023.png\"\n                      alt=\"image-20220922005111023\"\n                ></p>\n<p>å½“è¾“å…¥<code>day=4</code>æ—¶ï¼Œèµ°äº†ç¬¬äºŒå’Œç¬¬ä¸‰æ¡è·¯çº¿</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220922005536912.png\"\n                      alt=\"image-20220922005536912\"\n                ></p>\n<h1 id=\"äº‹ä»¶ç¯‡\"><a href=\"#äº‹ä»¶ç¯‡\" class=\"headerlink\" title=\"äº‹ä»¶ç¯‡\"></a>äº‹ä»¶ç¯‡</h1><p><code>äº‹ä»¶</code>ï¼ˆeventï¼‰é€šå¸¸ç”¨äºä¸ºæµç¨‹ç”Ÿå‘½å‘¨æœŸä¸­å‘ç”Ÿçš„äº‹æƒ…å»ºæ¨¡ã€‚äº‹ä»¶æ€»æ˜¯å›¾å½¢åŒ–ä¸ºåœ†åœˆã€‚åœ¨BPMN 2.0ä¸­ï¼Œæœ‰ä¸¤ç§ä¸»è¦çš„äº‹ä»¶åˆ†ç±»ï¼š<em>æ•è·ï¼ˆcatchingï¼‰</em>ä¸<em>æŠ›å‡ºï¼ˆthrowingï¼‰</em>äº‹ä»¶ã€‚</p>\n<ul>\n<li><strong>æ•è·:</strong> å½“æµç¨‹æ‰§è¡Œåˆ°è¾¾è¿™ä¸ªäº‹ä»¶æ—¶ï¼Œä¼šç­‰å¾…ç›´åˆ°è§¦å‘å™¨åŠ¨ä½œã€‚è§¦å‘å™¨çš„ç±»å‹ç”±å…¶ä¸­çš„å›¾æ ‡ï¼Œæˆ–è€…è¯´XMLä¸­çš„ç±»å‹å£°æ˜è€Œå®šä¹‰ã€‚æ•è·äº‹ä»¶ä¸æŠ›å‡ºäº‹ä»¶æ˜¾ç¤ºä¸Šçš„åŒºåˆ«ï¼Œæ˜¯å…¶å†…éƒ¨çš„å›¾æ ‡æ²¡æœ‰å¡«å……ï¼ˆå³æ˜¯ç™½è‰²çš„ï¼‰ã€‚</li>\n<li><strong>æŠ›å‡º:</strong> å½“æµç¨‹æ‰§è¡Œåˆ°è¾¾è¿™ä¸ªäº‹ä»¶æ—¶ï¼Œä¼šè§¦å‘ä¸€ä¸ªè§¦å‘å™¨ã€‚è§¦å‘å™¨çš„ç±»å‹ï¼Œç”±å…¶ä¸­çš„å›¾æ ‡ï¼Œæˆ–è€…è¯´XMLä¸­çš„ç±»å‹å£°æ˜è€Œå®šä¹‰ã€‚æŠ›å‡ºäº‹ä»¶ä¸æ•è·äº‹ä»¶æ˜¾ç¤ºä¸Šçš„åŒºåˆ«ï¼Œæ˜¯å…¶å†…éƒ¨çš„å›¾æ ‡å¡«å……ä¸ºé»‘è‰²ã€‚</li>\n</ul>\n<h2 id=\"å®šæ—¶å™¨äº‹ä»¶\"><a href=\"#å®šæ—¶å™¨äº‹ä»¶\" class=\"headerlink\" title=\"å®šæ—¶å™¨äº‹ä»¶\"></a>å®šæ—¶å™¨äº‹ä»¶</h2><p>å®šæ—¶è§¦å‘çš„ç›¸å…³äº‹ä»¶ï¼ŒåŒ…æ‹¬å®šæ—¶å™¨å¯åŠ¨äº‹ä»¶ï¼Œå®šæ—¶å™¨æ•è·ä¸­é—´ä»¶äº‹ä»¶ï¼Œå®šæ—¶å™¨è¾¹ç•Œäº‹ä»¶</p>\n<h3 id=\"å®šæ—¶å™¨å¯åŠ¨äº‹ä»¶\"><a href=\"#å®šæ—¶å™¨å¯åŠ¨äº‹ä»¶\" class=\"headerlink\" title=\"å®šæ—¶å™¨å¯åŠ¨äº‹ä»¶\"></a>å®šæ—¶å™¨å¯åŠ¨äº‹ä»¶</h3><p>å®šæ—¶å™¨å¯åŠ¨äº‹ä»¶ï¼ˆtimer start eventï¼‰åœ¨æŒ‡å®šæ—¶é—´åˆ›å»ºæµç¨‹å®ä¾‹ã€‚åœ¨æµç¨‹åªéœ€è¦å¯åŠ¨ä¸€æ¬¡ï¼Œæˆ–è€…æµç¨‹éœ€è¦åœ¨ç‰¹å®šçš„æ—¶é—´é—´éš”é‡å¤å¯åŠ¨æ—¶ï¼Œéƒ½å¯ä»¥ä½¿ç”¨ã€‚</p>\n<p><em><strong>è¯·æ³¨æ„</strong>ï¼š</em>å­æµç¨‹ä¸èƒ½æœ‰å®šæ—¶å™¨å¯åŠ¨äº‹ä»¶ã€‚</p>\n<p><em><strong>è¯·æ³¨æ„</strong>ï¼š</em>å®šæ—¶å™¨å¯åŠ¨äº‹ä»¶ï¼Œåœ¨æµç¨‹éƒ¨ç½²çš„åŒæ—¶å°±å¼€å§‹è®¡æ—¶ã€‚ä¸éœ€è¦è°ƒç”¨startProcessInstanceByXXXå°±ä¼šåœ¨æ—¶é—´å¯åŠ¨ã€‚è°ƒç”¨startProcessInstanceByXXXæ—¶ä¼šåœ¨å®šæ—¶å¯åŠ¨ä¹‹å¤–é¢å¤–å¯åŠ¨ä¸€ä¸ªæµç¨‹ã€‚</p>\n<p><em><strong>è¯·æ³¨æ„</strong>ï¼š</em>å½“éƒ¨ç½²å¸¦æœ‰å®šæ—¶å™¨å¯åŠ¨äº‹ä»¶çš„æµç¨‹çš„æ›´æ–°ç‰ˆæœ¬æ—¶ï¼Œä¸Šä¸€ç‰ˆæœ¬çš„å®šæ—¶å™¨ä½œä¸šä¼šè¢«ç§»é™¤ã€‚è¿™æ˜¯å› ä¸ºé€šå¸¸å¹¶ä¸å¸Œæœ›æ—§ç‰ˆæœ¬çš„æµç¨‹ä»ç„¶è‡ªåŠ¨å¯åŠ¨æ–°çš„æµç¨‹å®ä¾‹ã€‚</p>\n<p>å®šæ—¶å™¨å¯åŠ¨äº‹ä»¶ï¼Œç”¨å…¶ä¸­æœ‰ä¸€ä¸ªé’Ÿè¡¨å›¾æ ‡çš„åœ†åœˆæ¥è¡¨ç¤ºã€‚æˆ‘ä»¬é€šè¿‡å…·ä½“æ¡ˆä¾‹æ¥ä»‹ç»</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220926104055183.png\"\n                      alt=\"image-20220926104055183\"\n                ></p>\n<p>éƒ¨ç½²æµç¨‹åç­‰å¾…åˆ°å…·ä½“çš„æ—¶é—´ï¼Œæˆ‘ä»¬æŸ¥çœ‹ä»»åŠ¡å³å¯</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220926104152240.png\"\n                      alt=\"image-20220926104152240\"\n                ></p>\n<p>æ—¶é—´å®šä¹‰è¿™å—ä½¿ç”¨çš„æ˜¯  <a class=\"link\"   href=\"https://en.wikipedia.org/wiki/ISO_8601#Dates\" >https://en.wikipedia.org/wiki/ISO_8601#Dates<i class=\"fas fa-external-link-alt\"></i></a>  ISO 8601 æ ¼å¼</p>\n<p>ä¸Šé¢æˆ‘ä»¬æ˜¯é€šè¿‡æŒ‡å®šå›ºå®šæ—¶é—´æ¥å¯åŠ¨çš„ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡<code>duraction</code>é—´éš”æ—¶é—´æ¥å¤„ç†ã€‚</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220926105514506.png\"\n                      alt=\"image-20220926105514506\"\n                ></p>\n<p>é€šè¿‡é—´éš”çš„æ–¹å¼æ¥å¯åŠ¨ã€‚</p>\n<p>timeCycleï¼šæŒ‡å®šé‡å¤å‘¨æœŸï¼Œå¯ç”¨äºå‘¨æœŸæ€§å¯åŠ¨æµç¨‹ï¼Œæˆ–è€…ä¸ºè¶…æœŸç”¨æˆ·ä»»åŠ¡å¤šæ¬¡å‘é€æé†’,è¿™ä¸ªå…ƒç´ å¯ä»¥ä½¿ç”¨ä¸¤ç§æ ¼å¼</p>\n<ul>\n<li>ç¬¬ä¸€ç§æ˜¯æŒ‰ç…§<a class=\"link\"   href=\"http://en.wikipedia.org/wiki/ISO_8601#Repeating_intervals\" >ISO 8601<i class=\"fas fa-external-link-alt\"></i></a>æ ‡å‡†å®šä¹‰çš„å¾ªç¯æ—¶é—´å‘¨æœŸã€‚ä¾‹å¦‚ï¼ˆä¸‰æ¬¡é‡å¤é—´éš”ï¼Œæ¯æ¬¡é—´éš”ä¸º10å°æ—¶ï¼‰ï¼šR3&#x2F;PT10H</li>\n<li>ä¹Ÿå¯ä»¥ä½¿ç”¨<em>timeCycle</em>çš„å¯é€‰å±æ€§<em>endDate</em>ï¼Œæˆ–è€…åƒè¿™æ ·ç›´æ¥å†™åœ¨æ—¶é—´è¡¨è¾¾å¼çš„ç»“å°¾ï¼š<code>R3/PT10H/$&#123;EndDate&#125;</code>ã€‚ å½“åˆ°è¾¾endDateæ—¶ï¼Œåº”ç”¨ä¼šåœæ­¢ï¼Œå¹¶ä¸ºè¯¥ä»»åŠ¡åˆ›å»ºå…¶ä»–ä½œä¸š</li>\n<li>ä¹Ÿå¯ä»¥é€šè¿‡cronè¡¨è¾¾å¼æ¥å¤„ç†</li>\n</ul>\n<p>æ¡ˆä¾‹ï¼šé‡å¤æ—¶é—´è®¾ç½®ä¸º R3PT30S é‡å¤3æ¬¡ï¼Œé—´éš”30æè¿°ï¼Œè‡ªåŠ¨ä»»åŠ¡ç»‘å®šçš„æ˜¯JavaDelegate</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">MyJavaDelegate</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">JavaDelegate</span> &#123;</span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">execute</span><span class=\"params\">(DelegateExecution execution)</span> <span class=\"keyword\">throws</span> Exception &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;MyJavaDelegate:æ‰§è¡Œäº†ã€‚ã€‚ã€‚&quot;</span>+ LocalDateTime.now().toString());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220926110231335.png\"\n                      alt=\"image-20220926110231335\"\n                ></p>\n<p>åœ¨æ§åˆ¶å°å¯ä»¥çœ‹åˆ°å¯¹åº”çš„æ•ˆæœ</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220926110317226.png\"\n                      alt=\"image-20220926110317226\"\n                ></p>\n<p>ä¹Ÿå¯ä»¥æŒ‡å®šç»“æŸæ—¶é—´</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">timerEventDefinition</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">timeCycle</span>&gt;</span>R3/PT30S/2022-03-28T21:46:11+00:00<span class=\"tag\">&lt;/<span class=\"name\">timeCycle</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">timerEventDefinition</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n\n\n<p>æ­¤å¤–è¿˜å¯ä»¥é€šè¿‡cronè¡¨è¾¾å¼æ¥å¤„ç†ï¼š</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">0 0/5 * * * ?</span><br></pre></td></tr></table></figure>\n\n<p>æ¯éš”5ç§’å¯åŠ¨</p>\n<h3 id=\"å®šæ—¶å™¨ä¸­é—´äº‹ä»¶\"><a href=\"#å®šæ—¶å™¨ä¸­é—´äº‹ä»¶\" class=\"headerlink\" title=\"å®šæ—¶å™¨ä¸­é—´äº‹ä»¶\"></a>å®šæ—¶å™¨ä¸­é—´äº‹ä»¶</h3><p>åœ¨æˆ‘ä»¬å…·ä½“çš„æµç¨‹å¤„ç†ä¸­ï¼ŒAèŠ‚ç‚¹å¤„ç†å®Œæˆåï¼Œå®šæ—¶è§¦å‘BèŠ‚ç‚¹çš„å¤„ç†ã€‚</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220927002456358.png\"\n                      alt=\"image-20220927002456358\"\n                ></p>\n<h3 id=\"å®šæ—¶å™¨è¾¹ç•Œäº‹ä»¶\"><a href=\"#å®šæ—¶å™¨è¾¹ç•Œäº‹ä»¶\" class=\"headerlink\" title=\"å®šæ—¶å™¨è¾¹ç•Œäº‹ä»¶\"></a>å®šæ—¶å™¨è¾¹ç•Œäº‹ä»¶</h3><p>äººå·¥ä»»åŠ¡1å¦‚æœåœ¨å®šä¹‰çš„<code>2022-09-27T23:36:14</code>è¿™ä¸ªæ—¶é—´ä¹‹å‰è¿˜æ²¡æœ‰å¤„ç†ï¼Œé‚£ä¹ˆå°±ä¼šè§¦å‘å®šæ—¶è¾¹ç•Œäº‹ä»¶ï¼Œä»è€Œä»äººå·¥ä»»åŠ¡3.</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220927003701033.png\"\n                      alt=\"image-20220927003701033\"\n                ></p>\n<h2 id=\"æ¶ˆæ¯äº‹ä»¶\"><a href=\"#æ¶ˆæ¯äº‹ä»¶\" class=\"headerlink\" title=\"æ¶ˆæ¯äº‹ä»¶\"></a>æ¶ˆæ¯äº‹ä»¶</h2><h3 id=\"å¯åŠ¨äº‹ä»¶\"><a href=\"#å¯åŠ¨äº‹ä»¶\" class=\"headerlink\" title=\"å¯åŠ¨äº‹ä»¶\"></a>å¯åŠ¨äº‹ä»¶</h3><p>æ¶ˆæ¯å¯åŠ¨äº‹ä»¶ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬é€šè¿‡æ¥æ”¶åˆ°æŸäº›æ¶ˆæ¯åæ¥å¯åŠ¨æµç¨‹å®ä¾‹ï¼Œæ¯”å¦‚æ¥æ”¶åˆ°äº†ä¸€å°é‚®ä»¶ï¼Œä¸€æ¡çŸ­ä¿¡ç­‰ï¼Œå…·ä½“é€šè¿‡æ¡ˆä¾‹æ¥è®²è§£</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220927004852502.png\"\n                      alt=\"image-20220927004852502\"\n                ></p>\n<p>å¯åŠ¨æµç¨‹å®ä¾‹å¯ä»¥é€šè¿‡æ™®é€šçš„æ–¹å¼æ¥è§¦å‘ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥é€šè¿‡å¯¹åº”çš„APIæ¥å¤„ç†</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * æ¶ˆæ¯å¯åŠ¨äº‹ä»¶</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">startMessageFlow</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    runtimeService.startProcessInstanceByMessage(<span class=\"string\">&quot;firstMessage&quot;</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"ä¸­é—´äº‹ä»¶\"><a href=\"#ä¸­é—´äº‹ä»¶\" class=\"headerlink\" title=\"ä¸­é—´äº‹ä»¶\"></a>ä¸­é—´äº‹ä»¶</h3><p>æ¶ˆæ¯ä¸­é—´äº‹ä»¶å°±æ˜¯åœ¨æµç¨‹è¿ä½œä¸­éœ€è¦æ¶ˆæ¯æ¥è§¦å‘çš„åœºæ™¯ï¼Œæ¡ˆä¾‹æ¼”ç¤ºï¼Œ<code>è‡ªåŠ¨æµç¨‹1</code>å¤„ç†å®Œæˆåï¼Œéœ€è¦æ¥æ”¶ç‰¹å®šçš„æ¶ˆæ¯ä¹‹åæ‰èƒ½è¿›å…¥åˆ°<code>è‡ªåŠ¨æµç¨‹2</code></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220927005944099.png\"\n                      alt=\"image-20220927005944099\"\n                ></p>\n<p>æ­£å¸¸çš„æµç¨‹éƒ¨ç½²ï¼Œå¯åŠ¨å’Œå®¡æ‰¹åï¼Œæˆ‘ä»¬éœ€è¦å‘é€å¯¹åº”çš„æ¶ˆæ¯æ¥è§¦å‘è¿™ä¸ªä¸­é—´äº‹ä»¶ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * å‘é€æ¶ˆæ¯</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">sendMsg</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    runtimeService.messageEventReceived(<span class=\"string\">&quot;secondMessage&quot;</span>,<span class=\"string\">&quot;da2028e9-3dbc-11ed-adb0-c03c59ad2248&quot;</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n\n\n<h3 id=\"è¾¹ç•Œäº‹ä»¶\"><a href=\"#è¾¹ç•Œäº‹ä»¶\" class=\"headerlink\" title=\"è¾¹ç•Œäº‹ä»¶\"></a>è¾¹ç•Œäº‹ä»¶</h3><p>æ¶ˆæ¯è¾¹ç•Œäº‹ä»¶ï¼Œå¦‚æœåœ¨æ¶ˆæ¯è§¦å‘å‰è¿˜æ²¡æœ‰ï¼Œæ¡ˆä¾‹æ¼”ç¤ºï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220927010931908.png\"\n                      alt=\"image-20220927010931908\"\n                ></p>\n<p>ç„¶åæ­£å¸¸çš„éƒ¨ç½²ï¼Œå¯åŠ¨æµç¨‹ï¼Œå¦‚æœåœ¨å‘å¸ƒå¯¹åº”çš„æ¶ˆæ¯ä¹‹å‰è¿˜æ²¡æœ‰å®¡æ‰¹<code>ç”¨æˆ·ä»»åŠ¡1</code>,é‚£å½“æˆ‘ä»¬å‘é€å¯¹åº”çš„æ¶ˆæ¯åå°±ä¼šè§¦å‘å¯¹åº”çš„æ¶ˆæ¯è¾¹ç•Œäº‹ä»¶ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * å‘é€æ¶ˆæ¯</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">sendMsg</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    runtimeService.messageEventReceived(<span class=\"string\">&quot;thirdMessage&quot;</span>,<span class=\"string\">&quot;0d2a30e2-3dbf-11ed-9e28-c03c59ad2248&quot;</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n\n\n<h2 id=\"é”™è¯¯äº‹ä»¶\"><a href=\"#é”™è¯¯äº‹ä»¶\" class=\"headerlink\" title=\"é”™è¯¯äº‹ä»¶\"></a>é”™è¯¯äº‹ä»¶</h2><h3 id=\"å¼€å§‹äº‹ä»¶\"><a href=\"#å¼€å§‹äº‹ä»¶\" class=\"headerlink\" title=\"å¼€å§‹äº‹ä»¶\"></a>å¼€å§‹äº‹ä»¶</h3><p>é”™è¯¯å¯åŠ¨äº‹ä»¶ï¼ˆerror start eventï¼‰ï¼Œå¯ç”¨äºè§¦å‘äº‹ä»¶å­æµç¨‹ï¼ˆEvent Sub-Processï¼‰ã€‚<strong>é”™è¯¯å¯åŠ¨äº‹ä»¶ä¸èƒ½ç”¨äºå¯åŠ¨æµç¨‹å®ä¾‹</strong>ã€‚</p>\n<p>é”™è¯¯å¯åŠ¨äº‹ä»¶æ€»æ˜¯ä¸­æ–­ã€‚æˆ‘ä»¬é€šè¿‡æ¡ˆä¾‹æ¥ä»‹ç»ã€‚</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220927113303497.png\"\n                      alt=\"image-20220927113303497\"\n                ></p>\n<p>ç»˜åˆ¶äº‹ä»¶å­æµç¨‹è¦æ³¨æ„ï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220927113345613.png\"\n                      alt=\"image-20220927113345613\"\n                ></p>\n<p>é€‰æ‹©é”™è¯¯å¯åŠ¨äº‹ä»¶</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220927113423993.png\"\n                      alt=\"image-20220927113423993\"\n                ></p>\n<p>ç„¶åé…ç½®æµç¨‹èŠ‚ç‚¹ä¿¡æ¯</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220927113506045.png\"\n                      alt=\"image-20220927113506045\"\n                ></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220927113528120.png\"\n                      alt=\"image-20220927113528120\"\n                ></p>\n<p>ç„¶ååœ¨JavaDelegateä¸­æŠ›å‡ºå¯¹åº”çš„å¼‚å¸¸</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">FirstJavaDelegate</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">JavaDelegate</span> &#123;</span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">execute</span><span class=\"params\">(DelegateExecution execution)</span> <span class=\"keyword\">throws</span> Exception &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;FirstJavaDelegate:æ‰§è¡Œäº†&quot;</span> + LocalDateTime.now().toString());</span><br><span class=\"line\">        <span class=\"comment\">// æŠ›å‡ºçš„ä¿¡æ¯å¿…é¡»å¯¹åº”äºerrorçš„Codeä¿¡æ¯</span></span><br><span class=\"line\">        <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"title class_\">BpmnError</span>(<span class=\"string\">&quot;errorCode01&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ç„¶åæ­£å¸¸éƒ¨ç½²ï¼Œå¯åŠ¨æµç¨‹ã€‚ç„¶åæˆ‘ä»¬å°±å¯ä»¥çœ‹åˆ°å¯¹åº”çš„æµè½¬äº†</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220927113652951.png\"\n                      alt=\"image-20220927113652951\"\n                ></p>\n<h3 id=\"è¾¹ç•Œäº‹ä»¶-1\"><a href=\"#è¾¹ç•Œäº‹ä»¶-1\" class=\"headerlink\" title=\"è¾¹ç•Œäº‹ä»¶\"></a>è¾¹ç•Œäº‹ä»¶</h3><p>å½“å­æµç¨‹æ‰§è¡Œä¸­å¯¹å¤–æŠ›å‡ºäº†ç›¸å…³çš„å¼‚å¸¸ï¼Œé‚£ä¹ˆæˆ‘ä»¬è®¾ç½®çš„é”™è¯¯è¾¹ç•Œäº‹ä»¶å°±èƒ½å¯¹åº”çš„æ•è·åˆ°ç›¸å…³çš„äº‹ä»¶ï¼Œç„¶ååšå¯¹åº”çš„å¤„ç†ï¼Œç›¸å…³æ¡ˆä¾‹å¦‚ä¸‹ï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220927114818638.png\"\n                      alt=\"image-20220927114818638\"\n                ></p>\n<p>ç»˜åˆ¶é”™è¯¯è¾¹ç•Œæµç¨‹å›¾çš„æ—¶å€™éœ€è¦å…ˆç»˜åˆ¶ä¸­é—´äº‹ä»¶çš„å›¾æ ‡ï¼Œç„¶åæ‹–æ‹½åˆ°å­æµç¨‹çš„è¾¹ç•Œï¼Œç„¶åä¿®æ”¹å¯¹åº”çš„ç±»å‹å³å¯ï¼Œé”™è¯¯è¾¹ç•Œäº‹ä»¶ç»‘å®šæŠ›å‡ºå¯¹åº”çš„errorCode</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220927114939647.png\"\n                      alt=\"image-20220927114939647\"\n                ></p>\n<p>ç„¶åå¯¹åº”çš„æŠ›å‡ºçš„ä¿¡æ¯</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">SecondJavaDelegate</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">JavaDelegate</span> &#123;</span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">execute</span><span class=\"params\">(DelegateExecution execution)</span> <span class=\"keyword\">throws</span> Exception &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;SecondJavaDelegate:æ‰§è¡Œäº†&quot;</span> + LocalDateTime.now().toString());</span><br><span class=\"line\">        <span class=\"comment\">// æŠ›å‡ºçš„ä¿¡æ¯å¿…é¡»å¯¹åº”äºerrorçš„Codeä¿¡æ¯</span></span><br><span class=\"line\">        <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"title class_\">BpmnError</span>(<span class=\"string\">&quot;errorCode02&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<p>ç„¶åéƒ¨ç½²å¯åŠ¨æµç¨‹å³å¯çœ‹åˆ°å¯¹åº”çš„æ•ˆæœ</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220927115037027.png\"\n                      alt=\"image-20220927115037027\"\n                ></p>\n<h2 id=\"ä¿¡å·äº‹ä»¶\"><a href=\"#ä¿¡å·äº‹ä»¶\" class=\"headerlink\" title=\"ä¿¡å·äº‹ä»¶\"></a>ä¿¡å·äº‹ä»¶</h2><h3 id=\"å¼€å§‹äº‹ä»¶-1\"><a href=\"#å¼€å§‹äº‹ä»¶-1\" class=\"headerlink\" title=\"å¼€å§‹äº‹ä»¶\"></a>å¼€å§‹äº‹ä»¶</h3><p>é€šè¿‡ä¿¡å·æ¥å¯åŠ¨æµç¨‹å®ä¾‹</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220928232328300.png\"\n                      alt=\"image-20220928232328300\"\n                ></p>\n<p>éƒ¨ç½²æµç¨‹å’Œå‘é€ä¿¡å·æ¥å¯åŠ¨æµç¨‹</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * éƒ¨ç½²æµç¨‹</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">deployFlow</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"type\">Deployment</span> <span class=\"variable\">deploy</span> <span class=\"operator\">=</span> repositoryService.createDeployment()</span><br><span class=\"line\">            .name(<span class=\"string\">&quot;äº‹ä»¶-ä¿¡å·å¼€å§‹äº‹ä»¶&quot;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">            .addClasspathResource(<span class=\"string\">&quot;flow/23-äº‹ä»¶-ä¿¡å·äº‹ä»¶-å¼€å§‹äº‹ä»¶.bpmn&quot;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">            .deploy();</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;deploy.getId() = &quot;</span> + deploy.getId());</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * é€šè¿‡ä¿¡å·æ¥è§¦å‘å¯åŠ¨äº‹ä»¶çš„æ‰§è¡Œ</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">signalRecevied</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    runtimeService.signalEventReceived(<span class=\"string\">&quot;signal01&quot;</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>æ•ˆæœï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220928232951167.png\"\n                      alt=\"image-20220928232951167\"\n                ></p>\n<h3 id=\"ä¸­é—´æ•è·äº‹ä»¶\"><a href=\"#ä¸­é—´æ•è·äº‹ä»¶\" class=\"headerlink\" title=\"ä¸­é—´æ•è·äº‹ä»¶\"></a>ä¸­é—´æ•è·äº‹ä»¶</h3><p>æ¡ˆä¾‹å¦‚ä¸‹ï¼šå½“æˆ‘ä»¬å¯åŠ¨äº‹ä»¶åï¼Œä¼šé˜»å¡åœ¨è¿™ä¸ªæ¶ˆæ¯è·å–ä¸­é—´äº‹ä»¶å¤„ï¼Œç­‰å¾…ç›¸å…³ä¿¡å·åæ‰ä¼šç»§ç»­æµè½¬ã€‚</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220928233200534.png\"\n                      alt=\"image-20220928233200534\"\n                ></p>\n<p>åœ¨è¿™ä¸ªæ¡ˆä¾‹ä¸­æˆ‘ä»¬éœ€è¦éƒ¨ç½²æµç¨‹ï¼Œå¯åŠ¨æµç¨‹ï¼Œç„¶å<code>ç”¨æˆ·ä»»åŠ¡1</code>å®¡æ‰¹åï¼Œæˆ‘ä»¬å‘å¸ƒç›¸å…³çš„ä¿¡å·ï¼Œç„¶åä¼šè¿›å…¥åˆ°<code>ç”¨æˆ·ä»»åŠ¡2</code>ä¸­</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  * éƒ¨ç½²æµç¨‹</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\"> <span class=\"meta\">@Test</span></span><br><span class=\"line\"> <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">deployFlow</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">     <span class=\"type\">Deployment</span> <span class=\"variable\">deploy</span> <span class=\"operator\">=</span> repositoryService.createDeployment()</span><br><span class=\"line\">             .name(<span class=\"string\">&quot;äº‹ä»¶-ä¿¡å·ä¸­é—´æ•è·äº‹ä»¶&quot;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">             .addClasspathResource(<span class=\"string\">&quot;flow/24-äº‹ä»¶-ä¿¡å·äº‹ä»¶-ä¸­é—´æ•è·äº‹ä»¶.bpmn&quot;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">             .deploy();</span><br><span class=\"line\">     System.out.println(<span class=\"string\">&quot;deploy.getId() = &quot;</span> + deploy.getId());</span><br><span class=\"line\"> &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"> <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  * å¯åŠ¨æµç¨‹å®ä¾‹</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\"> <span class=\"meta\">@Test</span></span><br><span class=\"line\"> <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">startFlow</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">     <span class=\"type\">String</span> <span class=\"variable\">processDefId</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;Process_002gvxw:1:cfcc56ac-3f42-11ed-a689-c03c59ad2248&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">     <span class=\"type\">ProcessInstance</span> <span class=\"variable\">processInstance</span> <span class=\"operator\">=</span> runtimeService.startProcessInstanceById(processDefId);</span><br><span class=\"line\">     System.out.println(<span class=\"string\">&quot;processInstance.getId() = &quot;</span> + processInstance.getId());</span><br><span class=\"line\"> &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"> <span class=\"meta\">@Test</span></span><br><span class=\"line\"> <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">signalRecevied</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">     runtimeService.signalEventReceived(<span class=\"string\">&quot;signal02&quot;</span>);</span><br><span class=\"line\"> &#125;</span><br></pre></td></tr></table></figure>\n\n<p>æ•ˆæœï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220928233556274.png\"\n                      alt=\"image-20220928233556274\"\n                ></p>\n<h3 id=\"ä¸­é—´æŠ›å‡ºäº‹ä»¶\"><a href=\"#ä¸­é—´æŠ›å‡ºäº‹ä»¶\" class=\"headerlink\" title=\"ä¸­é—´æŠ›å‡ºäº‹ä»¶\"></a>ä¸­é—´æŠ›å‡ºäº‹ä»¶</h3><p>ä¿¡å·ä¸­é—´æŠ›å‡ºäº‹ä»¶ä¹Ÿå°±æ˜¯åœ¨æµç¨‹æ‰§è¡Œä¸­çš„æŸä¸ªèŠ‚ç‚¹æŠ›å‡ºäº†å¯¹åº”çš„ä¿¡å·ï¼Œç„¶åå¯¹åº”çš„ä¿¡å·ä¸­é—´æ•è·äº‹ä»¶å°±ä¼šè§¦å‘ï¼Œæˆ‘ä»¬é€šè¿‡å…·ä½“çš„æ¡ˆä¾‹æ¥æ¼”ç¤ºå¦‚ï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220928234118517.png\"\n                      alt=\"image-20220928234118517\"\n                ></p>\n<p>æ­£å¸¸çš„éƒ¨ç½²æµç¨‹ï¼Œç„¶ååšæµç¨‹çš„å®¡æ‰¹ï¼Œæ³¨æ„<code>ç”¨æˆ·ä»»åŠ¡4</code>éœ€è¦å…ˆå®¡æ‰¹ï¼Œç„¶åå¤„äºä¿¡å·æ•è·çš„çŠ¶æ€ï¼Œç„¶åæˆ‘ä»¬<code>ç”¨æˆ·ä»»åŠ¡2</code>çš„å®¡æ‰¹ï¼ŒæŠ›å‡ºä¿¡å·äº‹ä»¶ï¼Œé‚£ä¹ˆå¯¹åº”çš„æ•è·äº‹ä»¶æ‰èƒ½è§¦å‘ï¼Œè¿™å„¿æœ‰å…ˆåé¡ºåºã€‚</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220928235157519.png\"\n                      alt=\"image-20220928235157519\"\n                ></p>\n<h3 id=\"è¾¹ç•Œäº‹ä»¶-2\"><a href=\"#è¾¹ç•Œäº‹ä»¶-2\" class=\"headerlink\" title=\"è¾¹ç•Œäº‹ä»¶\"></a>è¾¹ç•Œäº‹ä»¶</h3><p>æœ€åæ¥çœ‹çœ‹ä¿¡å·è¾¹ç•Œäº‹ä»¶ï¼Œæ¡ˆä¾‹å¦‚ä¸‹ï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220928235443496.png\"\n                      alt=\"image-20220928235443496\"\n                ></p>\n<p>éƒ¨ç½²å¯åŠ¨æµç¨‹ï¼Œå¦‚æœ<code>ç”¨æˆ·ä»»åŠ¡1</code>å®¡æ‰¹äº†ï¼Œå°±ä¼šè¿›å…¥åˆ°<code>ç”¨æˆ·ä»»åŠ¡2</code>å®¡æ‰¹ï¼Œå¦‚æœ<code>ç”¨æˆ·ä»»åŠ¡1</code>è¿˜æ²¡å®¡æ‰¹ï¼Œç„¶åå‘é€çš„ç›¸å…³çš„ä¿¡å·ï¼Œä¼šè¢«ä¿¡å·è¾¹ç•Œäº‹ä»¶æ•è·ï¼Œä»è€Œè¿›å…¥åˆ°<code>ç”¨æˆ·ä»»åŠ¡3</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">signalRecevied</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    runtimeService.signalEventReceived(<span class=\"string\">&quot;signal04&quot;</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220928235841363.png\"\n                      alt=\"image-20220928235841363\"\n                ></p>\n<h2 id=\"ç»“æŸäº‹ä»¶\"><a href=\"#ç»“æŸäº‹ä»¶\" class=\"headerlink\" title=\"ç»“æŸäº‹ä»¶\"></a>ç»“æŸäº‹ä»¶</h2><h3 id=\"é”™è¯¯ç»“æŸäº‹ä»¶\"><a href=\"#é”™è¯¯ç»“æŸäº‹ä»¶\" class=\"headerlink\" title=\"é”™è¯¯ç»“æŸäº‹ä»¶\"></a>é”™è¯¯ç»“æŸäº‹ä»¶</h3><p>å½“æµç¨‹æ‰§è¡Œåˆ°è¾¾<strong>é”™è¯¯ç»“æŸäº‹ä»¶ï¼ˆerror end eventï¼‰</strong>æ—¶ï¼Œç»“æŸæ‰§è¡Œçš„å½“å‰åˆ†æ”¯ï¼Œå¹¶æŠ›å‡ºé”™è¯¯ã€‚è¿™ä¸ªé”™è¯¯å¯ä»¥ç”±åŒ¹é…çš„é”™è¯¯è¾¹ç•Œä¸­é—´äº‹ä»¶æ•è·ã€‚å¦‚æœæ‰¾ä¸åˆ°åŒ¹é…çš„é”™è¯¯è¾¹ç•Œäº‹ä»¶ï¼Œå°†ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚é€šè¿‡å…·ä½“æ¡ˆä¾‹æ¥è¯¦ç»†è®²è§£ï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220929002020963.png\"\n                      alt=\"image-20220929002020963\"\n                ></p>\n<p>éƒ¨ç½²æµç¨‹ï¼Œç„¶åå¯åŠ¨æµç¨‹ï¼Œ<code>ç”¨æˆ·ä»»åŠ¡1</code>å®¡æ‰¹</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220929002528362.png\"\n                      alt=\"image-20220929002528362\"\n                ></p>\n<p>è®¾ç½®æµç¨‹å˜é‡<code>flag==1</code>ç„¶åä¼šèµ°<code>é”™è¯¯ç»“æŸäº‹ä»¶</code>ã€‚ä¼šè§¦å‘å¯¹åº”çš„è¾¹ç•Œäº‹ä»¶</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220929002622297.png\"\n                      alt=\"image-20220929002622297\"\n                ></p>\n<h3 id=\"ä¸­æ–­ç»“æŸäº‹ä»¶\"><a href=\"#ä¸­æ–­ç»“æŸäº‹ä»¶\" class=\"headerlink\" title=\"ä¸­æ–­ç»“æŸäº‹ä»¶\"></a>ä¸­æ–­ç»“æŸäº‹ä»¶</h3><p>ä¸­æ–­ç»“æŸäº‹ä»¶ä¹Ÿç§°ä¸ºç»ˆæ­¢ç»“æŸäº‹ä»¶ï¼Œä¸»è¦æ˜¯å¯¹æµç¨‹è¿›è¡Œç»ˆæ­¢çš„äº‹ä»¶ï¼Œå¯ä»¥åœ¨ä¸€ä¸ªå¤æ‚çš„æµç¨‹ä¸­ï¼Œå¦‚æœæŸæ–¹æƒ³è¦æå‰ä¸­æ–­è¿™ä¸ªæµç¨‹ï¼Œå¯ä»¥é‡‡ç”¨è¿™ä¸ªäº‹ä»¶æ¥å¤„ç†ï¼Œå¯ä»¥åœ¨å¹¶è¡Œå¤„ç†ä»»åŠ¡ä¸­ã€‚å¦‚æœä½ æ˜¯åœ¨æµç¨‹å®ä¾‹å±‚å¤„ç†ï¼Œæ•´ä¸ªæµç¨‹éƒ½ä¼šè¢«ä¸­æ–­ï¼Œå¦‚æœæ˜¯åœ¨å­æµç¨‹ä¸­ä½¿ç”¨ï¼Œé‚£ä¹ˆå½“å‰ä½œç”¨å’Œä½œç”¨åŸŸå†…çš„æ‰€æœ‰çš„å†…éƒ¨æµç¨‹éƒ½ä¼šè¢«ç»ˆæ­¢ã€‚å…·ä½“è¿˜æ˜¯é€šè¿‡ä¸¤ä¸ªæ¡ˆä¾‹æ¥ç»™å¤§å®¶ä»‹ç»ï¼š</p>\n<h4 id=\"æ¡ˆä¾‹ä¸€\"><a href=\"#æ¡ˆä¾‹ä¸€\" class=\"headerlink\" title=\"æ¡ˆä¾‹ä¸€\"></a>æ¡ˆä¾‹ä¸€</h4><p>ä»‹ç»æ²¡æœ‰å­æµç¨‹çš„æƒ…å†µä¸‹ç»ˆæ­¢æµç¨‹çš„åœºæ™¯ï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220929003541120.png\"\n                      alt=\"image-20220929003541120\"\n                ></p>\n<h4 id=\"æ¡ˆä¾‹äºŒ\"><a href=\"#æ¡ˆä¾‹äºŒ\" class=\"headerlink\" title=\"æ¡ˆä¾‹äºŒ\"></a>æ¡ˆä¾‹äºŒ</h4><p>æ¡ˆä¾‹äºŒæˆ‘ä»¬æ¥çœ‹çœ‹æœ‰å­æµç¨‹çš„åœºæ™¯ä¸‹ï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220929004654376.png\"\n                      alt=\"image-20220929004654376\"\n                ></p>\n<h3 id=\"å–æ¶ˆç»“æŸäº‹ä»¶\"><a href=\"#å–æ¶ˆç»“æŸäº‹ä»¶\" class=\"headerlink\" title=\"å–æ¶ˆç»“æŸäº‹ä»¶\"></a>å–æ¶ˆç»“æŸäº‹ä»¶</h3><p>å–æ¶ˆç»“æŸäº‹ä»¶ï¼ˆcancel end eventï¼‰åªèƒ½ä¸BPMNäº‹åŠ¡å­æµç¨‹ï¼ˆBPMN transaction subprocessï¼‰ä¸€èµ·ä½¿ç”¨ã€‚å½“åˆ°è¾¾å–æ¶ˆç»“æŸäº‹ä»¶æ—¶ï¼Œä¼šæŠ›å‡ºå–æ¶ˆäº‹ä»¶ï¼Œä¸”å¿…é¡»ç”±å–æ¶ˆè¾¹ç•Œäº‹ä»¶ï¼ˆcancel boundary eventï¼‰æ•è·ã€‚å–æ¶ˆè¾¹ç•Œäº‹ä»¶å°†å–æ¶ˆäº‹åŠ¡ï¼Œå¹¶è§¦å‘è¡¥å¿ï¼ˆcompensationï¼‰ã€‚</p>\n<p>å…·ä½“é€šè¿‡æ¡ˆä¾‹æ¥è®²è§£ï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220929010451477.png\"\n                      alt=\"image-20220929010451477\"\n                ></p>\n<p>æ•ˆæœï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220929010913632.png\"\n                      alt=\"image-20220929010913632\"\n                ></p>\n<h3 id=\"è¡¥å¿äº‹ä»¶\"><a href=\"#è¡¥å¿äº‹ä»¶\" class=\"headerlink\" title=\"è¡¥å¿äº‹ä»¶\"></a>è¡¥å¿äº‹ä»¶</h3><p>é€šè¿‡è¡¥å¿è¾¾åˆ°æ§åˆ¶ä¸šåŠ¡æµç¨‹çš„ç›®çš„å°±æ˜¯è¡¥å¿äº‹ä»¶ï¼Œæ¯”å¦‚æˆ‘ä»¬æ­£å¸¸çš„ä¹°æœºç¥¨çš„æµç¨‹ä¸‹è®¢å•è´­ä¹°ï¼Œç„¶ååŒæ—¶å¼¹å‡ºæ”¯ä»˜æµç¨‹é¡µé¢ã€‚æ”¯ä»˜æˆåŠŸåå°±å¯ä»¥ç­‰å¾…å‡ºç¥¨äº†ï¼Œä½†æ˜¯å¦‚æœæˆ‘ä»¬æ”¯ä»˜å¤±è´¥çš„è¯ï¼Œè¿™æ—¶è¦ä¹ˆé‡æ–°æ”¯ä»˜ï¼Œæ›´æ¢æ”¯ä»˜æ–¹å¼æˆ–è€…å–æ¶ˆé¢„è®¢ï¼Œè¿™æ—¶å–æ¶ˆé¢„è®¢æˆ‘ä»¬å°±å¯ä»¥é€šè¿‡è¡¥å¿äº‹ä»¶æ¥å®ç°ï¼Œå…·ä½“çš„æ¡ˆä¾‹å¦‚ä¸‹ï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220929012202047.png\"\n                      alt=\"image-20220929012202047\"\n                ></p>\n<p>æ¡ˆä¾‹æ•ˆæœï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220929012149315.png\"\n                      alt=\"image-20220929012149315\"\n                ></p>\n<h1 id=\"å¤šäººä¼šç­¾\"><a href=\"#å¤šäººä¼šç­¾\" class=\"headerlink\" title=\"å¤šäººä¼šç­¾\"></a>å¤šäººä¼šç­¾</h1><p>Multiple Instance</p>\n<h2 id=\"ä¼šç­¾è¯´æ˜\"><a href=\"#ä¼šç­¾è¯´æ˜\" class=\"headerlink\" title=\"ä¼šç­¾è¯´æ˜\"></a>ä¼šç­¾è¯´æ˜</h2><p>å¤šå®ä¾‹æ´»åŠ¨æ˜¯ä¸ºä¸šåŠ¡æµç¨‹ä¸­çš„æŸä¸ªæ­¥éª¤å®šä¹‰é‡å¤çš„ä¸€ç§æ–¹å¼ã€‚åœ¨ç¼–ç¨‹æ¦‚å¿µä¸­ï¼Œå¤šå®ä¾‹ä¸ <code>for each</code> ç»“æ„ç›¸åŒ¹é…ï¼šå®ƒå…è®¸å¯¹ç»™å®šé›†åˆä¸­çš„æ¯ä¸ªé¡¹ç›®æŒ‰é¡ºåºæˆ–å¹¶è¡Œåœ°æ‰§è¡ŒæŸä¸ªæ­¥éª¤æˆ–ç”šè‡³ä¸€ä¸ªå®Œæ•´çš„å­æµç¨‹ã€‚</p>\n<p>å¤šå®ä¾‹æ˜¯ä¸€ä¸ªæœ‰é¢å¤–å±æ€§ï¼ˆæ‰€è°“çš„ â€œå¤šå®ä¾‹ç‰¹æ€§â€ï¼‰çš„å¸¸è§„æ´»åŠ¨ï¼Œå®ƒå°†å¯¼è‡´è¯¥æ´»åŠ¨åœ¨è¿è¡Œæ—¶è¢«å¤šæ¬¡æ‰§è¡Œã€‚ä»¥ä¸‹æ´»åŠ¨å¯ä»¥æˆä¸ºå¤šå®ä¾‹æ´»åŠ¨ã€‚</p>\n<ul>\n<li>Service Task æœåŠ¡ä»»åŠ¡</li>\n<li>Send Task å‘é€ä»»åŠ¡</li>\n<li>User Task ç”¨æˆ·ä»»åŠ¡</li>\n<li>Business Rule Task ä¸šåŠ¡è§„åˆ™ä»»åŠ¡</li>\n<li>Script Task è„šæœ¬ä»»åŠ¡</li>\n<li>Receive Task æ¥æ”¶ä»»åŠ¡</li>\n<li>Manual Task æ‰‹åŠ¨ä»»åŠ¡</li>\n<li>(Embedded) Sub-Process ï¼ˆåµŒå…¥ï¼‰å­æµç¨‹</li>\n<li>Call Activity å‘èµ·æ´»åŠ¨</li>\n<li>Transaction Subprocess äº‹åŠ¡å­æµç¨‹</li>\n</ul>\n<p>ç½‘å…³æˆ–äº‹ä»¶ä¸èƒ½æˆä¸ºå¤šå®ä¾‹ã€‚</p>\n<p>å¦‚æœä¸€ä¸ªæ´»åŠ¨æ˜¯å¤šå®ä¾‹çš„ï¼Œè¿™å°†ç”±æ´»åŠ¨åº•éƒ¨çš„ä¸‰æ¡çŸ­çº¿è¡¨ç¤ºã€‚ä¸‰æ¡å‚ç›´çº¿è¡¨ç¤ºå®ä¾‹å°†ä»¥<strong>å¹¶è¡Œ</strong>æ–¹å¼æ‰§è¡Œï¼Œè€Œä¸‰æ¡æ°´å¹³çº¿è¡¨ç¤º<strong>é¡ºåº</strong>æ‰§è¡Œã€‚</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221001234837327.png\"\n                      alt=\"image-20221001234837327\"\n                ></p>\n<p>æŒ‰ç…§è§„èŒƒçš„è¦æ±‚ï¼Œæ¯ä¸ªå®ä¾‹æ‰€åˆ›å»ºçš„æ‰§è¡Œçš„æ¯ä¸ªçˆ¶æ‰§è¡Œå°†æœ‰ä»¥ä¸‹å˜é‡ï¼š</p>\n<ul>\n<li><strong>nrOfInstances</strong>: å®ä¾‹çš„æ€»æ•°é‡</li>\n<li><strong>nrOfActiveInstances</strong>: å½“å‰æ´»åŠ¨çš„ï¼Œå³å°šæœªå®Œæˆçš„å®ä¾‹çš„æ•°é‡ã€‚å¯¹äºä¸€ä¸ªè¿ç»­çš„å¤šå®ä¾‹ï¼Œè¿™å°†æ°¸è¿œæ˜¯1ã€‚</li>\n<li><strong>nrOfCompletedInstances</strong>: å·²ç»å®Œæˆçš„å®ä¾‹çš„æ•°é‡ã€‚</li>\n</ul>\n<p>è¿™äº›å€¼å¯ä»¥é€šè¿‡è°ƒç”¨ â€œexecution.getVariable(x) â€œæ–¹æ³•æ£€ç´¢ã€‚</p>\n<p>æ­¤å¤–ï¼Œæ¯ä¸ªåˆ›å»ºçš„æ‰§è¡Œå°†æœ‰ä¸€ä¸ªæ‰§è¡Œæœ¬åœ°å˜é‡ï¼ˆå³å¯¹å…¶ä»–æ‰§è¡Œä¸å¯è§ï¼Œä¹Ÿä¸å­˜å‚¨åœ¨æµç¨‹å®ä¾‹çº§åˆ«ï¼‰ã€‚</p>\n<ul>\n<li><strong>loopCounter</strong>: è¡¨ç¤ºè¯¥ç‰¹å®šå®ä¾‹çš„<code>for each</code>å¾ªç¯ä¸­çš„ç´¢å¼•</li>\n</ul>\n<p>ä¸ºäº†ä½¿ä¸€ä¸ªæ´»åŠ¨æˆä¸ºå¤šå®ä¾‹ï¼Œæ´»åŠ¨xmlå…ƒç´ å¿…é¡»æœ‰ä¸€ä¸ª<code>multiInstanceLoopCharacteristics</code>å­å…ƒç´ ã€‚</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">multiInstanceLoopCharacteristics</span> <span class=\"attr\">isSequential</span>=<span class=\"string\">&quot;false|true&quot;</span>&gt;</span></span><br><span class=\"line\"> ...</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">multiInstanceLoopCharacteristics</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p><code>isSequential</code>å±æ€§è¡¨ç¤ºè¯¥æ´»åŠ¨çš„å®ä¾‹æ˜¯æŒ‰é¡ºåºæ‰§è¡Œè¿˜æ˜¯å¹¶è¡Œæ‰§è¡Œã€‚</p>\n<h2 id=\"å¹¶è¡Œä¼šç­¾\"><a href=\"#å¹¶è¡Œä¼šç­¾\" class=\"headerlink\" title=\"å¹¶è¡Œä¼šç­¾\"></a>å¹¶è¡Œä¼šç­¾</h2><h3 id=\"ç»˜åˆ¶æµç¨‹å›¾-1\"><a href=\"#ç»˜åˆ¶æµç¨‹å›¾-1\" class=\"headerlink\" title=\"ç»˜åˆ¶æµç¨‹å›¾\"></a>ç»˜åˆ¶æµç¨‹å›¾</h3><p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221002000056981.png\"\n                      alt=\"image-20221002000056981\"\n                ></p>\n<blockquote>\n<p>loop cardinalityï¼šå¾ªç¯åŸºæ•°ã€‚å¯é€‰é¡¹ã€‚å¯ä»¥ç›´æ¥å¡«æ•´æ•°ï¼Œè¡¨ç¤ºä¼šç­¾çš„äººæ•°ã€‚<br>Collectionï¼šé›†åˆã€‚å¯é€‰é¡¹ã€‚ä¼šç­¾äººæ•°çš„é›†åˆï¼Œé€šå¸¸ä¸ºlistï¼Œå’Œloop cardinalityäºŒé€‰ä¸€ã€‚<br>Element variableï¼šå…ƒç´ å˜é‡ã€‚é€‰æ‹©Collectionæ—¶å¿…é€‰ï¼Œä¸ºcollectioné›†åˆæ¯æ¬¡éå†çš„å…ƒç´ ã€‚<br>Completion conditionï¼šå®Œæˆæ¡ä»¶ã€‚å¯é€‰ã€‚æ¯”å¦‚è®¾ç½®ä¸€ä¸ªäººå®Œæˆåä¼šç­¾ç»“æŸï¼Œé‚£ä¹ˆå…¶ä»–äººçš„ä»£åŠä»»åŠ¡éƒ½ä¼šæ¶ˆå¤±ã€‚</p>\n</blockquote>\n<p>åœ¨ç”¨æˆ·ä»»åŠ¡èŠ‚ç‚¹ç»‘å®šäº†ä¸€ä¸ªç›‘å¬å™¨ï¼Œç›‘å¬<code>create</code>è¡Œä¸ºï¼Œè¯¥ç›‘å¬å™¨æˆ‘ä»¬æ˜¯é€šè¿‡UELè¡¨è¾¾å¼æ¥å®ç°çš„ï¼Œ<code>mulitiInstanceTaskListener</code>æ˜¯æˆ‘ä»¬æ³¨å…¥åˆ°Springå®¹å™¨ä¸­çš„å¯¹è±¡ã€‚</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221002000233782.png\"\n                      alt=\"image-20221002000233782\"\n                ></p>\n<p>ç›‘å¬å™¨çš„å†…å®¹ä¸ºï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Component(&quot;mulitiInstanceTaskListener&quot;)</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">MulitiInstanceTaskListener</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">Serializable</span> &#123;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">completeListener</span><span class=\"params\">(DelegateExecution execution)</span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;ä»»åŠ¡ï¼š&quot;</span>+execution.getId());</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;persons:&quot;</span> + execution.getVariable(<span class=\"string\">&quot;persons&quot;</span>));</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;person&quot;</span> + execution.getVariable(<span class=\"string\">&quot;person&quot;</span>));</span><br><span class=\"line\">        </span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ç„¶åå¯¹åº”çš„<code>Completion condition</code>æˆ‘ä»¬å¯ä»¥åœ¨Javaä»£ç ä¸­å¤„ç†</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Component(&quot;mulitiInstanceCompleteTask&quot;)</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">MulitiInstanceCompleteTask</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">Serializable</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * å®Œæˆä»»åŠ¡æ˜¯éœ€è¦è§¦å‘çš„æ–¹æ³•</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> execution</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">     *     false è¡¨ç¤ºä¼šç­¾ä»»åŠ¡è¿˜æ²¡æœ‰ç»“æŸ</span></span><br><span class=\"line\"><span class=\"comment\">     </span></span><br><span class=\"line\"><span class=\"comment\">     *     true è¡¨ç¤ºä¼šç­¾ä»»åŠ¡ç»“æŸäº†</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"type\">boolean</span> <span class=\"title function_\">completeTask</span><span class=\"params\">(DelegateExecution execution)</span> &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;æ€»çš„ä¼šç­¾ä»»åŠ¡æ•°é‡ï¼š&quot;</span> + execution.getVariable(<span class=\"string\">&quot;nrOfInstances&quot;</span>)</span><br><span class=\"line\">                + <span class=\"string\">&quot;å½“å‰è·å–çš„ä¼šç­¾ä»»åŠ¡æ•°é‡ï¼š&quot;</span> + execution.getVariable(<span class=\"string\">&quot;nrOfActiveInstances&quot;</span>)</span><br><span class=\"line\">                + <span class=\"string\">&quot; - &quot;</span> + <span class=\"string\">&quot;å·²ç»å®Œæˆçš„ä¼šç­¾ä»»åŠ¡æ•°é‡ï¼š&quot;</span> + execution.getVariable(<span class=\"string\">&quot;nrOfCompletedInstances&quot;</span>));</span><br><span class=\"line\">        <span class=\"comment\">//æœ‰ä¸€ä¸ªäººåŒæ„å°±é€šè¿‡</span></span><br><span class=\"line\">        <span class=\"type\">Boolean</span> <span class=\"variable\">flag</span> <span class=\"operator\">=</span> (Boolean) execution.getVariable(<span class=\"string\">&quot;flag&quot;</span>);</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;å½“å‰æ„è§ï¼š&quot;</span>+flag);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> flag;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ä¸Šé¢çš„ä¸‰ä¸ªå˜é‡æ˜¯Flowableä¸­è‡ªå¸¦çš„å¯ç”¨å˜é‡</p>\n<ol>\n<li><p>nrOfInstances:è¯¥ä¼šç­¾ç¯èŠ‚ä¸­æ€»å…±æœ‰å¤šå°‘ä¸ªå®ä¾‹</p>\n</li>\n<li><p>nrOfActiveInstances:å½“å‰æ´»åŠ¨çš„å®ä¾‹çš„æ•°é‡ï¼Œå³è¿˜æ²¡æœ‰å®Œæˆçš„å®ä¾‹æ•°é‡ã€‚</p>\n</li>\n<li><p>nrOfCompletedInstances:å·²ç»å®Œæˆçš„å®ä¾‹çš„æ•°é‡</p>\n</li>\n</ol>\n<h3 id=\"éƒ¨ç½²æµç¨‹\"><a href=\"#éƒ¨ç½²æµç¨‹\" class=\"headerlink\" title=\"éƒ¨ç½²æµç¨‹\"></a>éƒ¨ç½²æµç¨‹</h3><p>æ™®é€šçš„éƒ¨ç½²æµç¨‹</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * éƒ¨ç½²æµç¨‹</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">deployFlow</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"type\">Deployment</span> <span class=\"variable\">deploy</span> <span class=\"operator\">=</span> repositoryService.createDeployment()</span><br><span class=\"line\">            .name(<span class=\"string\">&quot;å¤šå®ä¾‹&quot;</span>)</span><br><span class=\"line\">            .addClasspathResource(<span class=\"string\">&quot;flow/diagram_1.bpmn&quot;</span>)</span><br><span class=\"line\">            .deploy();</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;deploy.getId() = &quot;</span> + deploy.getId());</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"å¯åŠ¨æµç¨‹\"><a href=\"#å¯åŠ¨æµç¨‹\" class=\"headerlink\" title=\"å¯åŠ¨æµç¨‹\"></a>å¯åŠ¨æµç¨‹</h3><p>åœ¨å¯åŠ¨æµç¨‹å®ä¾‹çš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦è®¾ç½®ç›¸å…³çš„å‚æ•°ï¼Œåœ¨æµç¨‹å®šä¹‰çš„æ—¶å€™è®¾ç½®çš„personsåœ¨æ­¤å¤„æˆ‘ä»¬å°±éœ€è¦è®¾ç½®äº†ï¼Œè®¾ç½®ä¸ºArrays.asList(â€œå¼ ä¸‰â€,â€æå››â€,â€ç‹äº”â€,â€èµµå…­â€)ï¼Œè¿™é‡Œè®¾ç½®äº†4ä¸ªå…ƒç´ ï¼Œåœ¨æµç¨‹å®šä¹‰é‡Œå®šä¹‰äº†3ä¸ªï¼Œè¡¨ç¤ºåªä¼šå¾ªç¯3æ¬¡ï¼Œå¯åŠ¨æµç¨‹åï¼Œåœ¨Taskä¸­å¯ä»¥çœ‹åˆ°åªæœ‰3ä¸ªä»»åŠ¡</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"title function_\">startFlow</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> Exception&#123;</span><br><span class=\"line\">    Map&lt;String,Object&gt; map = <span class=\"keyword\">new</span> <span class=\"title class_\">HashMap</span>&lt;&gt;();</span><br><span class=\"line\">    <span class=\"comment\">// è®¾ç½®å¤šäººä¼šç­¾çš„æ•°æ®</span></span><br><span class=\"line\">    map.put(<span class=\"string\">&quot;persons&quot;</span>, Arrays.asList(<span class=\"string\">&quot;å¼ ä¸‰&quot;</span>,<span class=\"string\">&quot;æå››&quot;</span>,<span class=\"string\">&quot;ç‹äº”&quot;</span>,<span class=\"string\">&quot;èµµå…­&quot;</span>));</span><br><span class=\"line\">    <span class=\"type\">ProcessInstance</span> <span class=\"variable\">processInstance</span> <span class=\"operator\">=</span> runtimeService</span><br><span class=\"line\">            .startProcessInstanceById(<span class=\"string\">&quot;myProcess:1:ba1518fc-b22d-11ec-9313-c03c59ad2248&quot;</span>,map);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<p>å¯åŠ¨åæˆ‘ä»¬å°±å¯ä»¥åœ¨æ•°æ®åº“ä¸­çœ‹åˆ°äº§ç”Ÿäº†3ä¸ªTask</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221002000640899.png\"\n                      alt=\"image-20221002000640899\"\n                ></p>\n<h3 id=\"å¤„ç†ä»»åŠ¡\"><a href=\"#å¤„ç†ä»»åŠ¡\" class=\"headerlink\" title=\"å¤„ç†ä»»åŠ¡\"></a>å¤„ç†ä»»åŠ¡</h3><p>å¯åŠ¨æµç¨‹åæˆ‘ä»¬å‘ä¸‹åœ¨Taskä¸­äº§ç”Ÿäº†3æ¡ä»»åŠ¡ï¼Œæˆ‘ä»¬å…ˆé€šè¿‡TaskServiceæ¥å®Œæˆå…¶ä¸­ä¸€ä¸ªä»»åŠ¡ï¼Œè®¾ç½®ä¸€ä¸ªæ ‡å¿—flagä¸ºfalseï¼Œæ¥æ§åˆ¶ä¼šç­¾è¿˜æ²¡æœ‰ç»“æŸï¼ŒåŒæ—¶Taskä¸­å¦å¤–ä¸¤ä¸ªä»»åŠ¡è¿˜åœ¨</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"title function_\">completeTask1</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    Map&lt;String,Object&gt; map = <span class=\"keyword\">new</span> <span class=\"title class_\">HashMap</span>&lt;&gt;();</span><br><span class=\"line\">    map.put(<span class=\"string\">&quot;flag&quot;</span>,<span class=\"literal\">false</span>);</span><br><span class=\"line\">    taskService.complete(<span class=\"string\">&quot;71337501-b22e-11ec-a534-c03c59ad2248&quot;</span>,map);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>å½“ä»»åŠ¡æ‰§è¡Œå®Œæˆæ—¶ä¼šåŒæ­¥è§¦å‘ä¼šç­¾å®Œæˆè¡¨è¾¾å¼ä¸­å¯¹è±¡æ–¹æ³•ã€‚æœ‰å¦‚ä¸‹çš„è¾“å‡º</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221002000853424.png\"\n                      alt=\"image-20221002000853424\"\n                ></p>\n<p>åŒæ—¶Taskè¡¨ä¸­çš„è®°å½•è¿˜æœ‰ä¸¤æ¡</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221002000931060.png\"\n                      alt=\"image-20221002000931060\"\n                ></p>\n<p>ç„¶åå½“æˆ‘ä»¬åœ¨å®Œæˆä¸€ä¸ªä»»åŠ¡ï¼Œè¿™æ—¶è®¾ç½®flagä¸ºtrueï¼Œä¼šå‘ç°åœ¨è¿™ä¸ªå¤šäººå¤„ç†ä¸­ï¼Œæœ€å¤š3ä¸ªäººå¤„ç†åœ¨ç¬¬äºŒä¸ªäººå¤„ç†åå°±ç»“æŸäº†</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"title function_\">completeTask1</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    Map&lt;String,Object&gt; map = <span class=\"keyword\">new</span> <span class=\"title class_\">HashMap</span>&lt;&gt;();</span><br><span class=\"line\">    map.put(<span class=\"string\">&quot;flag&quot;</span>,<span class=\"literal\">true</span>); <span class=\"comment\">// è®¾ç½®ä¸ºtrue ç»“æŸå¤šäººä¼šç­¾</span></span><br><span class=\"line\">    taskService.complete(<span class=\"string\">&quot;713570d4-b22e-11ec-a534-c03c59ad2248&quot;</span>,map);</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;complete ....&quot;</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>è¿™æ—¶ä»»åŠ¡èŠ‚ç‚¹å°±ç»“æŸäº†~</p>\n<h2 id=\"ä¸²è¡Œä¼šç­¾\"><a href=\"#ä¸²è¡Œä¼šç­¾\" class=\"headerlink\" title=\"ä¸²è¡Œä¼šç­¾\"></a>ä¸²è¡Œä¼šç­¾</h2><p>ä¸²è¡Œä¼šç­¾æŒ‡çš„æ˜¯åœ¨å¤šå®ä¾‹ä¸­ï¼Œå¤„ç†äººæŒ‰ç…§å¯¹åº”çš„é¡ºåºæ¥ä¸€ä¸ªä¸ªçš„å¤„ç†ä»»åŠ¡ã€‚</p>\n<h3 id=\"æµç¨‹å›¾\"><a href=\"#æµç¨‹å›¾\" class=\"headerlink\" title=\"æµç¨‹å›¾\"></a>æµç¨‹å›¾</h3><p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221002001501320.png\"\n                      alt=\"image-20221002001501320\"\n                ></p>\n<p>ä¸Šé¢å®šä¹‰çš„æ˜¯ä¸€ä¸ª<code>ä¸²è¡Œä¼šç­¾</code>çš„æµç¨‹å›¾ã€‚å¾ªç¯3æ¬¡ï¼Œé›†åˆæ•°æ®åœ¨<code>persons</code>ä¸­ï¼Œæ¯æ¬¡å¾ªç¯çš„æ•°æ®å­˜å‚¨åœ¨å¾ªç¯å˜é‡<code>person</code>ä¸­ï¼ŒåŒæ—¶<code>person</code>ä¹Ÿæ˜¯å¯¹åº”çš„å¤„ç†äººçš„æµç¨‹å˜é‡ã€‚</p>\n<h3 id=\"éƒ¨ç½²å’Œå¯åŠ¨æµç¨‹-1\"><a href=\"#éƒ¨ç½²å’Œå¯åŠ¨æµç¨‹-1\" class=\"headerlink\" title=\"éƒ¨ç½²å’Œå¯åŠ¨æµç¨‹\"></a>éƒ¨ç½²å’Œå¯åŠ¨æµç¨‹</h3><p>éƒ¨ç½²å°±æ˜¯æ­£å¸¸çš„éƒ¨ç½²äº†ï¼Œä¸å†èµ˜è¿°ï¼Œå¯åŠ¨æµç¨‹çš„æ—¶å€™æˆ‘ä»¬éœ€è¦å¯¹é›†åˆåšèµ‹å€¼ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">startFlow</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    Map&lt;String,Object&gt; map = <span class=\"keyword\">new</span> <span class=\"title class_\">HashMap</span>&lt;&gt;();</span><br><span class=\"line\">    <span class=\"comment\">// è®¾ç½®å¤šäººä¼šç­¾çš„æ•°æ® ä¸²è¡Œä¼šæŒ‰ç…§é›†åˆçš„å¾ªåºæ¥å¤„ç†</span></span><br><span class=\"line\">    map.put(<span class=\"string\">&quot;persons&quot;</span>, Arrays.asList(<span class=\"string\">&quot;å¼ ä¸‰&quot;</span>,<span class=\"string\">&quot;æå››&quot;</span>,<span class=\"string\">&quot;ç‹äº”&quot;</span>,<span class=\"string\">&quot;èµµå…­&quot;</span>));</span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">processDefId</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;Process_0ltwc4j:1:bd87ed49-41a3-11ed-9ec4-c03c59ad2248&quot;</span>;</span><br><span class=\"line\">    <span class=\"type\">ProcessInstance</span> <span class=\"variable\">processInstance</span> <span class=\"operator\">=</span> runtimeService.startProcessInstanceById(processDefId,map);</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;processInstance.getId() = &quot;</span> + processInstance.getId());</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>å¯åŠ¨åä¼šåˆ›å»ºä¸€ä¸ªTaskï¼Œå¤„ç†äººæ˜¯<code>å¼ ä¸‰</code>ã€‚ç„¶åå¤„ç†å®Œæˆåä¼šåˆ›å»ºä¸‹ä¸€ä¸ªtaskï¼Œå¤„ç†äººæ˜¯<code>æå››</code>æŒ‰å¾ªåºæ¥å¤„ç†äº†ã€‚</p>\n<h1 id=\"ä»»åŠ¡å›é€€\"><a href=\"#ä»»åŠ¡å›é€€\" class=\"headerlink\" title=\"ä»»åŠ¡å›é€€\"></a>ä»»åŠ¡å›é€€</h1><p>ä»»åŠ¡å›é€€é©³å›æ’¤é”€ç›¸å…³çš„æ“ä½œåœ¨å®é™…çš„å¼€å‘ä¸­è¿˜æ˜¯ä¼šç»å¸¸é‡åˆ°çš„ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹Camundaä¸­é’ˆå¯¹è¿™äº›æƒ…å†µæ˜¯å¦‚ä½•å¤„ç†çš„ã€‚</p>\n<h2 id=\"ä¸²è¡Œçš„å›é€€\"><a href=\"#ä¸²è¡Œçš„å›é€€\" class=\"headerlink\" title=\"ä¸²è¡Œçš„å›é€€\"></a>ä¸²è¡Œçš„å›é€€</h2><p>æˆ‘ä»¬å…ˆä»æœ€ç®€å•çš„ä¸²è¡Œæµç¨‹æ¥åˆ†æï¼Œæ¡ˆä¾‹å¦‚ä¸‹</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221005155134800.png\"\n                      alt=\"image-20221005155134800\"\n                ></p>\n<p>ä¸Šé¢çš„æµç¨‹å°±æ˜¯ä¸€ä¸ªéå¸¸ç®€å•çš„ä¸²è¡Œä»»åŠ¡ï¼Œå®šä¹‰äº†4ä¸ªç”¨æˆ·ä»»åŠ¡ï¼ŒæŒ‡æ´¾çš„å¤„ç†äººåˆ†åˆ«æ˜¯<code>user1</code>,<code>user2</code>,<code>user3</code>,<code>user4</code>.åœ¨æµç¨‹çš„æ‰§è¡Œè¿‡ç¨‹ä¸­æˆ‘ä»¬å¯ä»¥é€šè¿‡å›é€€æ¥æ¼”ç¤ºå…·ä½“çš„æ•ˆæœã€‚é¦–å…ˆæ¥éƒ¨ç½²æµç¨‹</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * å®Œæˆæµç¨‹çš„éƒ¨ç½²æ“ä½œ</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">deploy</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"type\">Deployment</span> <span class=\"variable\">deploy</span> <span class=\"operator\">=</span> repositoryService.createDeployment()</span><br><span class=\"line\">            .name(<span class=\"string\">&quot;å›é€€&quot;</span>)</span><br><span class=\"line\">            .addClasspathResource(<span class=\"string\">&quot;flow/ä¸²è¡Œå›é€€.bpmn&quot;</span>)</span><br><span class=\"line\">            .deploy();</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;deploy.getId() = &quot;</span> + deploy.getId());</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * é€šè¿‡æµç¨‹å®šä¹‰Id å¯åŠ¨</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">startFlow</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">processId</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;Process_1up6ocm:1:d924ab29-43f9-11ed-b4f1-c03c59ad2248&quot;</span>;</span><br><span class=\"line\">    <span class=\"type\">ProcessInstance</span> <span class=\"variable\">processInstance</span> <span class=\"operator\">=</span> runtimeService.startProcessInstanceById(processId);</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;processInstance.getId() = &quot;</span> + processInstance.getId());</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ç„¶åæˆ‘ä»¬é€šè¿‡user1å®Œæˆä»»åŠ¡ï¼Œç›´åˆ°user3å®Œæˆä»»åŠ¡ï¼Œåˆ°user4æ¥å¤„ç†ä»»åŠ¡ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * å®Œæˆä»»åŠ¡</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">completeTask</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    taskService.complete(<span class=\"string\">&quot;45bf40bf-43fa-11ed-8abe-c03c59ad2248&quot;</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221004233745178.png\"\n                      alt=\"image-20221004233745178\"\n                ></p>\n<p>ç„¶åæˆ‘ä»¬æ¥å®Œæˆå›é€€åˆ°<code>user3</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * ä»»åŠ¡å›é€€</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">rollbackTask</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">processInstanceId</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;cb7b11bf-4486-11ed-bbb6-c03c59ad2248&quot;</span>;</span><br><span class=\"line\">    runtimeService.createProcessInstanceModification(processInstanceId)</span><br><span class=\"line\">                    .startBeforeActivity(<span class=\"string\">&quot;Activity_17ubvwq&quot;</span>) <span class=\"comment\">// å›é€€åˆ°å¯¹åº”çš„èŠ‚ç‚¹å‰  é€šè¿‡ èŠ‚ç‚¹çš„key æ¥å®ç°</span></span><br><span class=\"line\">                   <span class=\"comment\">// .cancelActivityInstance(processInstanceId) // æ•´ä¸ªä»»åŠ¡ä¼šå–æ¶ˆ</span></span><br><span class=\"line\">                    .cancelAllForActivity(<span class=\"string\">&quot;Activity_0jyi1pp&quot;</span>) <span class=\"comment\">// å–æ¶ˆåŸæ¥çš„èŠ‚ç‚¹</span></span><br><span class=\"line\">                    .execute();</span><br><span class=\"line\">    <span class=\"comment\">/*String processDefinitionId = &quot;&quot;;</span></span><br><span class=\"line\"><span class=\"comment\">    runtimeService.createModification(&quot;&quot;);*/</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>æ•ˆæœï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221005155543672.png\"\n                      alt=\"image-20221005155543672\"\n                ></p>\n<p>ç„¶ååœ¨å†å²è¡¨ä¸­å¯ä»¥çœ‹åˆ°å¯¹åº”çš„èµ°å‘</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221005155709087.png\"\n                      alt=\"image-20221005155709087\"\n                ></p>\n<p>å…·ä½“è¿‡ç¨‹ä¸ºï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221005155909565.png\"\n                      alt=\"image-20221005155909565\"\n                ></p>\n<p>ç„¶åæˆ‘ä»¬å¯ä»¥ä»<code>user3</code>å›é€€åˆ°<code>user1</code></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221005160133670.png\"\n                      alt=\"image-20221005160133670\"\n                ></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221005160200316.png\"\n                      alt=\"image-20221005160200316\"\n                ></p>\n<p>è¦å–æ¶ˆå½“å‰çš„ä»»åŠ¡ç›´æ¥è°ƒç”¨<code>cancelActivityInstance(processInstanceId)</code>æ–¹æ³•å³å¯ã€‚</p>\n<p>ç›¸å…³æ–¹æ³•è¯´æ˜ï¼š</p>\n<table>\n<thead>\n<tr>\n<th>ç±»åˆ«</th>\n<th>æ–¹æ³•</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>åœ¨æ´»åŠ¨å‰å¯åŠ¨</td>\n<td>å›é€€åˆ°è¿™ä¸ªèŠ‚ç‚¹</td>\n</tr>\n<tr>\n<td></td>\n<td>startBeforeActivity(String activityId)</td>\n</tr>\n<tr>\n<td></td>\n<td>startBeforeActivity(String activityId, String ancestorActivityInstanceId)</td>\n</tr>\n<tr>\n<td>åœ¨æ´»åŠ¨åå¯åŠ¨</td>\n<td>é€šè¿‡ <code>startAfterActivity</code> åœ¨ä¸€ä¸ªæ´»åŠ¨ä¹‹åè¿è¡Œï¼Œæ„å‘³ç€å°†ä»æ´»åŠ¨çš„ä¸‹ä¸€èŠ‚ç‚¹å¼€å§‹æ‰§è¡Œ</td>\n</tr>\n<tr>\n<td></td>\n<td>startAfterActivity(String activityId)</td>\n</tr>\n<tr>\n<td></td>\n<td>startAfterActivity(String activityId, String ancestorActivityInstanceId)</td>\n</tr>\n<tr>\n<td>å¯åŠ¨ä¸€ä¸ªè¿‡æ¸¡</td>\n<td>é€šè¿‡ <code>startTransition</code> å¯åŠ¨ä¸€ä¸ªè¿‡æ¸¡ï¼Œå°±æ„å‘³ç€åœ¨ä¸€ä¸ªç»™å®šçš„åºåˆ—æµä¸Šå¼€å§‹æ‰§è¡Œã€‚å½“æœ‰å¤šä¸ªæµå‡ºçš„åºåˆ—æµæ—¶ï¼Œè¿™å¯ä»¥ä¸ <code>startAfterActivity</code> ä¸€èµ·ä½¿ç”¨ã€‚å¦‚æœæˆåŠŸï¼Œè¯¥æŒ‡ä»¤ä»åºåˆ—æµå¼€å§‹æ‰§è¡Œæµç¨‹æ¨¡å‹ï¼Œç›´åˆ°è¾¾åˆ°ç­‰å¾…çŠ¶æ€ã€‚</td>\n</tr>\n<tr>\n<td></td>\n<td>startTransition(String transitionId)</td>\n</tr>\n<tr>\n<td></td>\n<td>startTransition(String transition, String ancestorActivityInstanceId)</td>\n</tr>\n<tr>\n<td>å–æ¶ˆä¸€ä¸ªæ´»åŠ¨å®ä¾‹</td>\n<td>é€šè¿‡<code>cancelActivityInstance</code>å–æ¶ˆä¸€ä¸ªç‰¹å®šçš„æ´»åŠ¨å®ä¾‹ã€‚æ—¢å¯ä»¥æ˜¯ä¸€ä¸ªæ´»åŠ¨å®ä¾‹ï¼Œå¦‚ç”¨æˆ·ä»»åŠ¡çš„å®ä¾‹ï¼Œä¹Ÿå¯ä»¥æ˜¯å±‚æ¬¡ç»“æ„ä¸­æ›´é«˜èŒƒå›´çš„å®ä¾‹ï¼Œå¦‚å­æµç¨‹çš„å®ä¾‹</td>\n</tr>\n<tr>\n<td></td>\n<td>cancelActivityInstance(String activityInstanceId)</td>\n</tr>\n<tr>\n<td>å–æ¶ˆä¸€ä¸ªè¿‡æ¸¡å®ä¾‹</td>\n<td>è¿‡æ¸¡å®ä¾‹è¡¨ç¤ºå³å°†ä»¥å¼‚æ­¥å»¶ç»­çš„å½¢å¼è¿›å…¥&#x2F;ç¦»å¼€ä¸€ä¸ªæ´»åŠ¨çš„æ‰§è¡Œæµã€‚ä¸€ä¸ªå·²ç»åˆ›å»ºä½†å°šæœªæ‰§è¡Œçš„å¼‚æ­¥å»¶ç»­Jobè¢«è¡¨ç¤ºä¸ºä¸€ä¸ªè¿‡æ¸¡å®ä¾‹ã€‚è¿™äº›å®ä¾‹å¯ä»¥é€šè¿‡<code>cancelTransitionInstance</code>æ¥å–æ¶ˆ</td>\n</tr>\n<tr>\n<td></td>\n<td>cancelTransitionInstance(String activityInstanceId)</td>\n</tr>\n<tr>\n<td>å–æ¶ˆä¸€ä¸ªæ´»åŠ¨çš„æ‰€æœ‰æ´»åŠ¨å®ä¾‹</td>\n<td>é€šè¿‡æŒ‡ä»¤ <code>cancelAllForActivity</code> æ¥å–æ¶ˆä¸€ä¸ªç‰¹å®šæ´»åŠ¨çš„æ‰€æœ‰æ´»åŠ¨å’Œè¿‡æ¸¡å®ä¾‹ã€‚</td>\n</tr>\n<tr>\n<td></td>\n<td>cancelAllForActivity(String activityId)</td>\n</tr>\n</tbody></table>\n<h2 id=\"å¹¶è¡Œçš„å›é€€\"><a href=\"#å¹¶è¡Œçš„å›é€€\" class=\"headerlink\" title=\"å¹¶è¡Œçš„å›é€€\"></a>å¹¶è¡Œçš„å›é€€</h2><p>æ¥ä¸‹æ¥æˆ‘ä»¬åœ¨å¹¶è¡Œçš„åœºæ™¯ä¸­æ¥çœ‹çœ‹å„ç§å›é€€çš„åœºæ™¯ã€‚å…·ä½“æ¡ˆä¾‹æµç¨‹å¦‚ä¸‹ï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221005193633031.png\"\n                      alt=\"image-20221005193633031\"\n                ></p>\n<p>éƒ¨ç½²åï¼Œå¯åŠ¨æµç¨‹å®ä¾‹ã€‚è¿è¡Œåˆ°å¦‚ä¸‹çš„èŠ‚ç‚¹ï¼Œç„¶åå›é€€åˆ°<code>ç”¨æˆ·å®¡æ‰¹1</code></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221005193931957.png\"\n                      alt=\"image-20221005193931957\"\n                ></p>\n<p>ç„¶åæˆ‘ä»¬æ¥åšå›é€€æ“ä½œ</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">rollbackTask</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">processInstanceId</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;a1d40268-44a2-11ed-9b63-c03c59ad2248&quot;</span>;</span><br><span class=\"line\">    runtimeService.createProcessInstanceModification(processInstanceId)</span><br><span class=\"line\">                    .startBeforeActivity(<span class=\"string\">&quot;Activity_0n0ddnj&quot;</span>) <span class=\"comment\">// å›é€€åˆ°å¯¹åº”çš„èŠ‚ç‚¹å‰  é€šè¿‡ èŠ‚ç‚¹çš„key æ¥å®ç°</span></span><br><span class=\"line\">                   <span class=\"comment\">// .cancelActivityInstance(processInstanceId) // æ•´ä¸ªä»»åŠ¡ä¼šå–æ¶ˆ</span></span><br><span class=\"line\">                    .cancelAllForActivity(<span class=\"string\">&quot;Activity_184rpuo&quot;</span>) <span class=\"comment\">// å–æ¶ˆåŸæ¥çš„èŠ‚ç‚¹</span></span><br><span class=\"line\">                    .cancelAllForActivity(<span class=\"string\">&quot;Activity_08w6j91&quot;</span>)</span><br><span class=\"line\">                    .execute();</span><br><span class=\"line\">    <span class=\"comment\">/*String processDefinitionId = &quot;&quot;;</span></span><br><span class=\"line\"><span class=\"comment\">    runtimeService.createModification(&quot;&quot;);*/</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ä¸Šé¢æˆ‘ä»¬æ ¹æ®æµç¨‹<code>å®ä¾‹å›é€€</code>åŒæ—¶éœ€è¦å–æ¶ˆæ‰ä¹‹å‰çš„ä¸¤ä¸ªèŠ‚ç‚¹ã€‚åœ¨å†å²è¡¨ä¸­ä¹Ÿå¯ä»¥çœ‹åˆ°è¿™ä¸ªæµç¨‹</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221005194635852.png\"\n                      alt=\"image-20221005194635852\"\n                ></p>\n<p>åœ¨ä¸Šé¢ä¾‹å­çš„åŸºç¡€ä¸Šæˆ‘ä»¬æ¥å®ç°å¦‚ä¸‹çš„æµç¨‹å›é€€æ“ä½œã€‚</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221005194807783.png\"\n                      alt=\"image-20221005194807783\"\n                ></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221005194904013.png\"\n                      alt=\"image-20221005194904013\"\n                ></p>\n<p>å…·ä½“çš„å›é€€ä»£ç </p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">rollbackTask</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">processInstanceId</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;a1d40268-44a2-11ed-9b63-c03c59ad2248&quot;</span>;</span><br><span class=\"line\">    runtimeService.createProcessInstanceModification(processInstanceId)</span><br><span class=\"line\">                    .startBeforeActivity(<span class=\"string\">&quot;Activity_184rpuo&quot;</span>) <span class=\"comment\">// å›é€€åˆ°å¯¹åº”çš„èŠ‚ç‚¹å‰  é€šè¿‡ èŠ‚ç‚¹çš„key æ¥å®ç°</span></span><br><span class=\"line\">                    .startBeforeActivity(<span class=\"string\">&quot;Activity_08w6j91&quot;</span>)</span><br><span class=\"line\">                    .cancelAllForActivity(<span class=\"string\">&quot;Activity_0ma3n4p&quot;</span>) <span class=\"comment\">// å–æ¶ˆåŸæ¥çš„èŠ‚ç‚¹</span></span><br><span class=\"line\">                    .execute();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ç„¶åæŸ¥çœ‹å†å²ä»»åŠ¡åŒæ ·å¯ä»¥çœ‹åˆ°å…·ä½“çš„å®ç°</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221005195142559.png\"\n                      alt=\"image-20221005195142559\"\n                ></p>\n<h2 id=\"æ’ä»–ç½‘å…³å›é€€\"><a href=\"#æ’ä»–ç½‘å…³å›é€€\" class=\"headerlink\" title=\"æ’ä»–ç½‘å…³å›é€€\"></a>æ’ä»–ç½‘å…³å›é€€</h2><p>ç„¶åæˆ‘ä»¬æ¥çœ‹çœ‹åœ¨æœ‰æ’ä»–ç½‘å…³çš„æƒ…å†µä¸‹ï¼Œå¦‚æœæˆ‘ä»¬è¦è°ƒæ•´æµç¨‹çš„èµ°å‘åº”è¯¥è¦æ€ä¹ˆæ¥å¤„ç†ã€‚</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221005200528761.png\"\n                      alt=\"image-20221005200528761\"\n                ></p>\n<p>ä¹Ÿå°±æ˜¯å®é™…çš„åœºæ™¯ä¸­å¯èƒ½å…ˆèµ°åˆ°äº†<code>ç”¨æˆ·2</code>å®¡æ‰¹ï¼Œåé¢å‘ç°ä¸åˆç†ï¼Œå°±éœ€è¦å›é€€åˆ°<code>ç”¨æˆ·1</code>åé¢ç„¶åå†è°ƒæ•´æµç¨‹å˜é‡ï¼Œæµè½¬åˆ°<code>ç”¨æˆ·3</code>å¤„ã€‚</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221005200901486.png\"\n                      alt=\"image-20221005200901486\"\n                ></p>\n<p>ç„¶åæˆ‘ä»¬æ¥çœ‹çœ‹å…·ä½“çš„å›é€€æ“ä½œ</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">rollbackTask</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">processInstanceId</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;6a70a33b-44a6-11ed-8557-c03c59ad2248&quot;</span>;</span><br><span class=\"line\">    runtimeService.createProcessInstanceModification(processInstanceId)</span><br><span class=\"line\">                    .startBeforeActivity(<span class=\"string\">&quot;Gateway_0ah4coh&quot;</span>) <span class=\"comment\">// å›é€€åˆ°æ’ä»–ç½‘å…³ä¹‹å‰</span></span><br><span class=\"line\">                    .setVariable(<span class=\"string\">&quot;num&quot;</span>,-<span class=\"number\">1</span>) <span class=\"comment\">// è®¾ç½®æµç¨‹å˜é‡</span></span><br><span class=\"line\">                    .cancelAllForActivity(<span class=\"string\">&quot;Activity_0x9stxl&quot;</span>) <span class=\"comment\">// å–æ¶ˆåŸæ¥çš„èŠ‚ç‚¹</span></span><br><span class=\"line\">                    .execute();</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>å›é€€åˆ°<code>æ’ä»–ç½‘å…³</code>èŠ‚ç‚¹ï¼Œç„¶åè®¾ç½®æµç¨‹å˜é‡<code>num=-1</code>ç„¶åä¼šèµ°<code>ç”¨æˆ·3</code>çš„å®¡æ‰¹ã€‚åŒæ—¶å–æ¶ˆåŸæ¥èŠ‚ç‚¹çš„å®¡æ‰¹</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221005201429581.png\"\n                      alt=\"image-20221005201429581\"\n                ></p>\n<p>ç„¶åæˆ‘ä»¬æ¥çœ‹çœ‹æœ‰å­æµç¨‹çš„åœºæ™¯ä¸‹çš„å›é€€å¤„ç†</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221005204950474.png\"\n                      alt=\"image-20221005204950474\"\n                ></p>\n<p>æˆ‘ä»¬æ¥çœ‹çœ‹ä»å­æµç¨‹å›é€€åˆ°ä¸»æµç¨‹çš„æ“ä½œã€‚</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221005205324729.png\"\n                      alt=\"image-20221005205324729\"\n                ></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">rollbackTask</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">processInstanceId</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;a3311551-44ac-11ed-97c0-c03c59ad2248&quot;</span>;</span><br><span class=\"line\">    runtimeService.createProcessInstanceModification(processInstanceId)</span><br><span class=\"line\">                    .startBeforeActivity(<span class=\"string\">&quot;Activity_00kwccq&quot;</span>) <span class=\"comment\">// å›é€€åˆ°æ’ä»–ç½‘å…³ä¹‹å‰</span></span><br><span class=\"line\">                    .cancelAllForActivity(<span class=\"string\">&quot;Activity_01835pn&quot;</span>) <span class=\"comment\">// å–æ¶ˆåŸæ¥çš„èŠ‚ç‚¹</span></span><br><span class=\"line\">                    .execute();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>åœ¨å†å²è¡¨ä¸­æŸ¥çœ‹è®°å½•</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221005205659817.png\"\n                      alt=\"image-20221005205659817\"\n                ></p>\n<h2 id=\"é‡å¯-x2F-æ¢å¤å®ä¾‹\"><a href=\"#é‡å¯-x2F-æ¢å¤å®ä¾‹\" class=\"headerlink\" title=\"é‡å¯&#x2F;æ¢å¤å®ä¾‹\"></a>é‡å¯&#x2F;æ¢å¤å®ä¾‹</h2><p>åœ¨æµç¨‹å®ä¾‹ç»ˆæ­¢åï¼Œå…¶å†å²æ•°æ®ä»ç„¶å­˜åœ¨ï¼Œå¹¶ä¸”å¯ä»¥è¢«è®¿é—®ä»¥é‡å¯æµç¨‹å®ä¾‹ï¼Œå‰ææ˜¯å†å²çº§åˆ«è¢«è®¾ç½®ä¸ºFULLã€‚ ä¾‹å¦‚ï¼Œå½“æµç¨‹æ²¡æœ‰ä»¥æœŸæœ›çš„æ–¹å¼ç»ˆæ­¢æ—¶ï¼Œé‡å¯æµç¨‹å®ä¾‹æ˜¯æœ‰ç”¨çš„ã€‚è¿™ä¸ªAPIçš„ä½¿ç”¨çš„å…¶ä»–å¯èƒ½æƒ…å†µæœ‰ï¼š</p>\n<ul>\n<li>æ¢å¤è¢«é”™è¯¯åœ°å–æ¶ˆçš„æµç¨‹å®ä¾‹çš„åˆ°æœ€åçŠ¶æ€</li>\n<li>ç”±äºé”™è¯¯è·¯ç”±å¯¼è‡´æµç¨‹å®ä¾‹ç»ˆæ­¢åï¼Œé‡å¯æµç¨‹å®ä¾‹</li>\n</ul>\n<p>ä¸ºäº†æ‰§è¡Œè¿™æ ·çš„æ“ä½œï¼Œæµç¨‹å¼•æ“æä¾›äº† <em>æµç¨‹å®ä¾‹é‡å¯API</em> <code>RuntimeService.restartProcessInstances(..)</code> ã€‚è¯¥APIå…è®¸é€šè¿‡ä½¿ç”¨æµå¼æ„å»ºå™¨åœ¨ä¸€æ¬¡è°ƒç”¨ä¸­æŒ‡å®šå¤šä¸ªå®ä¾‹åŒ–æŒ‡ä»¤ã€‚</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221005210910364.png\"\n                      alt=\"image-20221005210910364\"\n                ></p>\n<p>éƒ¨ç½²å¯åŠ¨æµç¨‹å®ä¾‹åè¿›å…¥å¹¶è¡Œç½‘å…³ã€‚ç„¶åæµç¨‹å®ä¾‹è¢«ä¸­æ–­äº†</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">deleteProcessId</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">processId</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;cfd58b31-44ae-11ed-92f5-c03c59ad2248&quot;</span>;</span><br><span class=\"line\">    runtimeService.deleteProcessInstance(processId,<span class=\"string\">&quot;æµ‹è¯•åˆ é™¤&quot;</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221005211329315.png\"\n                      alt=\"image-20221005211329315\"\n                ></p>\n<p>ä¹‹åï¼Œæˆ‘ä»¬å†³å®šæ¢å¤è¯¥æµç¨‹å®ä¾‹åˆ°æœ€åçŠ¶æ€ï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">recoveryProcessInstancess</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    runtimeService</span><br><span class=\"line\">            .restartProcessInstances(<span class=\"string\">&quot;Process_08wyw1g:1:ad8f483f-44ae-11ed-aee8-c03c59ad2248&quot;</span>) <span class=\"comment\">// æµç¨‹å®šä¹‰ID</span></span><br><span class=\"line\">            .startBeforeActivity(<span class=\"string\">&quot;Activity_03vnv63&quot;</span>)</span><br><span class=\"line\">            .startBeforeActivity(<span class=\"string\">&quot;Activity_0b7mtmx&quot;</span>)</span><br><span class=\"line\">            .processInstanceIds(<span class=\"string\">&quot;cfd58b31-44ae-11ed-92f5-c03c59ad2248&quot;</span>) <span class=\"comment\">// æµç¨‹å®ä¾‹ID</span></span><br><span class=\"line\">            .execute();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>æµç¨‹å®ä¾‹å·²ç»ç”¨æœ€åä¸€ç»„å˜é‡é‡å¯äº†ã€‚ç„¶è€Œï¼Œåœ¨é‡å¯çš„æµç¨‹å®ä¾‹ä¸­ï¼Œåªæœ‰å…¨å±€å˜é‡è¢«æ¢å¤äº†ã€‚ æœ¬åœ°å˜é‡è¿˜éœ€è¦è°ƒç”¨ <code>RuntimeService.setVariableLocal(..)</code> æ‰‹åŠ¨è®¾ç½®ã€‚</p>\n<blockquote>\n<p>ä»æŠ€æœ¯ä¸Šè®²ï¼Œåˆ›å»ºçš„æ˜¯ä¸€ä¸ªæ–°çš„æµç¨‹å®ä¾‹ã€‚</p>\n<p><strong>è¯·æ³¨æ„:</strong> å†å²æµç¨‹å’Œé‡å¯çš„æµç¨‹å®ä¾‹çš„idæ˜¯ä¸åŒçš„ã€‚</p>\n</blockquote>\n<h1 id=\"åŠ¨æ€è¡¨å•\"><a href=\"#åŠ¨æ€è¡¨å•\" class=\"headerlink\" title=\"åŠ¨æ€è¡¨å•\"></a>åŠ¨æ€è¡¨å•</h1><p>æ¥ä¸‹æ¥æˆ‘ä»¬çœ‹çœ‹åŠ¨æ€è¡¨å•çš„åº”ç”¨ï¼Œåœ¨Camundaä¸­è¡¨å•åˆ†ä¸ºå†…ç½®è¡¨å•å’ŒåŠ¨æ€è¡¨å•ã€‚</p>\n<h2 id=\"å†…ç½®è¡¨å•\"><a href=\"#å†…ç½®è¡¨å•\" class=\"headerlink\" title=\"å†…ç½®è¡¨å•\"></a>å†…ç½®è¡¨å•</h2><p>å†…ç½®è¡¨å•å°±æ˜¯åœ¨ç»˜åˆ¶æµç¨‹å›¾çš„æ—¶å€™åŒæ—¶ç»˜åˆ¶è¡¨å•ã€‚è¿™ç§æ–¹å¼å…¶å®å°±æ˜¯ç»‘å®šäº†å¯¹åº”çš„æµç¨‹å˜é‡ï¼Œä¸æ˜¯å¤ªçµæ´»ã€‚ä½†è¿˜æ˜¯æ¥è®²è§£ä¸‹ã€‚</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221014160336988.png\"\n                      alt=\"image-20221014160336988\"\n                ></p>\n<h3 id=\"å¯åŠ¨æµç¨‹ç»‘å®š\"><a href=\"#å¯åŠ¨æµç¨‹ç»‘å®š\" class=\"headerlink\" title=\"å¯åŠ¨æµç¨‹ç»‘å®š\"></a>å¯åŠ¨æµç¨‹ç»‘å®š</h3><p>æˆ‘ä»¬å…ˆæ¥çœ‹ä¸‹åœ¨å¯åŠ¨æµç¨‹çš„æ—¶å€™å°±è®¾ç½®ç›¸å…³çš„è¡¨å•</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221014160501005.png\"\n                      alt=\"image-20221014160501005\"\n                ></p>\n<p>å¯¹åº”çš„æµç¨‹å›¾</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=<span class=\"string\">&quot;1.0&quot;</span> encoding=<span class=\"string\">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">bpmn:definitions</span> <span class=\"attr\">xmlns:bpmn</span>=<span class=\"string\">&quot;http://www.omg.org/spec/BPMN/20100524/MODEL&quot;</span> <span class=\"attr\">xmlns:bpmndi</span>=<span class=\"string\">&quot;http://www.omg.org/spec/BPMN/20100524/DI&quot;</span> <span class=\"attr\">xmlns:dc</span>=<span class=\"string\">&quot;http://www.omg.org/spec/DD/20100524/DC&quot;</span> <span class=\"attr\">xmlns:camunda</span>=<span class=\"string\">&quot;http://camunda.org/schema/1.0/bpmn&quot;</span> <span class=\"attr\">xmlns:di</span>=<span class=\"string\">&quot;http://www.omg.org/spec/DD/20100524/DI&quot;</span> <span class=\"attr\">xmlns:modeler</span>=<span class=\"string\">&quot;http://camunda.org/schema/modeler/1.0&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;Definitions_1pnd5o3&quot;</span> <span class=\"attr\">targetNamespace</span>=<span class=\"string\">&quot;http://bpmn.io/schema/bpmn&quot;</span> <span class=\"attr\">exporter</span>=<span class=\"string\">&quot;Camunda Modeler&quot;</span> <span class=\"attr\">exporterVersion</span>=<span class=\"string\">&quot;4.12.0&quot;</span> <span class=\"attr\">modeler:executionPlatform</span>=<span class=\"string\">&quot;Camunda Platform&quot;</span> <span class=\"attr\">modeler:executionPlatformVersion</span>=<span class=\"string\">&quot;7.15.0&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">bpmn:process</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;Process_13abncz&quot;</span> <span class=\"attr\">isExecutable</span>=<span class=\"string\">&quot;true&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">bpmn:startEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;StartEvent_1&quot;</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmn:extensionElements</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">camunda:formData</span>&gt;</span></span><br><span class=\"line\">          <span class=\"tag\">&lt;<span class=\"name\">camunda:formField</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;days&quot;</span> <span class=\"attr\">label</span>=<span class=\"string\">&quot;è¯·å‡å¤©æ•°&quot;</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;long&quot;</span> <span class=\"attr\">defaultValue</span>=<span class=\"string\">&quot;1&quot;</span> /&gt;</span></span><br><span class=\"line\">          <span class=\"tag\">&lt;<span class=\"name\">camunda:formField</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;reason&quot;</span> <span class=\"attr\">label</span>=<span class=\"string\">&quot;è¯·å‡åŸå› &quot;</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;string&quot;</span> /&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">camunda:formData</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmn:extensionElements</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmn:outgoing</span>&gt;</span>Flow_09xirvq<span class=\"tag\">&lt;/<span class=\"name\">bpmn:outgoing</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">bpmn:startEvent</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">bpmn:sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;Flow_09xirvq&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;StartEvent_1&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;Activity_0a81mdi&quot;</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">bpmn:sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;Flow_1i0viip&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;Activity_0a81mdi&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;Activity_01qg6se&quot;</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">bpmn:endEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;Event_1mj58zz&quot;</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmn:incoming</span>&gt;</span>Flow_1asp8i3<span class=\"tag\">&lt;/<span class=\"name\">bpmn:incoming</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">bpmn:endEvent</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">bpmn:sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;Flow_1asp8i3&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;Activity_01qg6se&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;Event_1mj58zz&quot;</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">bpmn:userTask</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;Activity_0a81mdi&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;ç”¨æˆ·ä»»åŠ¡1&quot;</span> <span class=\"attr\">camunda:assignee</span>=<span class=\"string\">&quot;demo&quot;</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmn:incoming</span>&gt;</span>Flow_09xirvq<span class=\"tag\">&lt;/<span class=\"name\">bpmn:incoming</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmn:outgoing</span>&gt;</span>Flow_1i0viip<span class=\"tag\">&lt;/<span class=\"name\">bpmn:outgoing</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">bpmn:userTask</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">bpmn:userTask</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;Activity_01qg6se&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;ç”¨æˆ·ä»»åŠ¡2&quot;</span> <span class=\"attr\">camunda:assignee</span>=<span class=\"string\">&quot;demo&quot;</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmn:incoming</span>&gt;</span>Flow_1i0viip<span class=\"tag\">&lt;/<span class=\"name\">bpmn:incoming</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmn:outgoing</span>&gt;</span>Flow_1asp8i3<span class=\"tag\">&lt;/<span class=\"name\">bpmn:outgoing</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">bpmn:userTask</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">bpmn:process</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNDiagram</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNDiagram_1&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNPlane</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNPlane_1&quot;</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;Process_13abncz&quot;</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;Flow_09xirvq_di&quot;</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;Flow_09xirvq&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">di:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;188&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;117&quot;</span> /&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">di:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;240&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;117&quot;</span> /&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;Flow_1i0viip_di&quot;</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;Flow_1i0viip&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">di:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;340&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;117&quot;</span> /&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">di:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;400&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;117&quot;</span> /&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;Flow_1asp8i3_di&quot;</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;Flow_1asp8i3&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">di:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;500&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;117&quot;</span> /&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">di:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;562&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;117&quot;</span> /&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;_BPMNShape_StartEvent_2&quot;</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;StartEvent_1&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">dc:Bounds</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;152&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;99&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;36&quot;</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;36&quot;</span> /&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;Event_1mj58zz_di&quot;</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;Event_1mj58zz&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">dc:Bounds</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;562&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;99&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;36&quot;</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;36&quot;</span> /&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;Activity_09e81f3_di&quot;</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;Activity_0a81mdi&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">dc:Bounds</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;240&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;77&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;100&quot;</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;80&quot;</span> /&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;Activity_0ot1277_di&quot;</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;Activity_01qg6se&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">dc:Bounds</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;400&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;77&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;100&quot;</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;80&quot;</span> /&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNPlane</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNDiagram</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">bpmn:definitions</span>&gt;</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>å¯ä»¥çœ‹åˆ°å¯¹åº”çš„xmlä¸­å°±é…ç½®äº†è¡¨å•çš„æ•°æ®</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221014160601636.png\"\n                      alt=\"image-20221014160601636\"\n                ></p>\n<p>éƒ¨ç½²æµç¨‹</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * å®Œæˆæµç¨‹çš„éƒ¨ç½²æ“ä½œ</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">deploy</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"type\">Deployment</span> <span class=\"variable\">deploy</span> <span class=\"operator\">=</span> repositoryService.createDeployment()</span><br><span class=\"line\">            .name(<span class=\"string\">&quot;è¡¨å•01&quot;</span>)</span><br><span class=\"line\">            .addClasspathResource(<span class=\"string\">&quot;flow/è¡¨å•-01.bpmn&quot;</span>)</span><br><span class=\"line\">            .deploy();</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;deploy.getId() = &quot;</span> + deploy.getId());</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>éƒ¨ç½²å®Œæµç¨‹åæˆ‘ä»¬å¯ä»¥é€šè¿‡å¯¹åº”çš„APIæŸ¥çœ‹æµç¨‹å¯¹åº”çš„è¡¨å•ä¿¡æ¯</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">getStartFromData</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">processDefId</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;Process_13abncz:1:5d39867a-4b6e-11ed-9748-c03c59ad2248&quot;</span>;</span><br><span class=\"line\">    <span class=\"comment\">// æ ¹æ®æµç¨‹å®šä¹‰æ‰¾åˆ°å¯¹åº”çš„ è¡¨å•æ•°æ®ã€‚</span></span><br><span class=\"line\">    <span class=\"type\">StartFormData</span> <span class=\"variable\">startFormData</span> <span class=\"operator\">=</span> formService</span><br><span class=\"line\">        .getStartFormData(processDefId);</span><br><span class=\"line\">    <span class=\"comment\">// æ‰¾åˆ°å¯¹åº”çš„è¡¨å•åŸŸçš„é›†åˆ</span></span><br><span class=\"line\">    List&lt;FormField&gt; formFields = startFormData.getFormFields();</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (FormField formField : formFields) &#123;</span><br><span class=\"line\">        <span class=\"comment\">// è·å–æ¯ä¸ªå…·ä½“çš„è¡¨å•åŸŸ</span></span><br><span class=\"line\">        System.out.println(formField.getId() + <span class=\"string\">&quot; &quot;</span> + formField.getLabel() + <span class=\"string\">&quot; &quot;</span> + formField.getValue().getValue());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221014161737726.png\"\n                      alt=\"image-20221014161737726\"\n                ></p>\n<p>å¯åŠ¨æµç¨‹ï¼šä¸¤ç§æ–¹å¼</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * æ­£å¸¸çš„å¯åŠ¨æµç¨‹</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"title function_\">startFormFlow</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> Exception&#123;</span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">processDefId</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;Process_13abncz:1:5d39867a-4b6e-11ed-9748-c03c59ad2248&quot;</span>;</span><br><span class=\"line\">    Map&lt;String,Object&gt; map = <span class=\"keyword\">new</span> <span class=\"title class_\">HashMap</span>&lt;&gt;();</span><br><span class=\"line\">    map.put(<span class=\"string\">&quot;days&quot;</span>,<span class=\"string\">&quot;5&quot;</span>);</span><br><span class=\"line\">    map.put(<span class=\"string\">&quot;reason&quot;</span>,<span class=\"string\">&quot;æƒ³ä¼‘æ¯ä¸‹&quot;</span>);</span><br><span class=\"line\">    <span class=\"comment\">// æ­£å¸¸å¯åŠ¨çš„æ—¶å€™å¯ä»¥é€šè¿‡æµç¨‹å˜é‡æ¥ç»™è¡¨å•è®¾ç½®æ•°æ®ï¼Œä¹Ÿå¯ä»¥ä¸è®¾ç½®</span></span><br><span class=\"line\">    <span class=\"type\">ProcessInstance</span> <span class=\"variable\">processInstance</span> <span class=\"operator\">=</span> runtimeService</span><br><span class=\"line\">            .startProcessInstanceById(processDefId,map);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * é€šè¿‡FormServiceæ¥å¯åŠ¨ä¸€ä¸ªè¡¨å•æµç¨‹</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@throws</span> Exception</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"title function_\">startFormServiceFlow</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> Exception&#123;</span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">processDefId</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;Process_13abncz:1:5d39867a-4b6e-11ed-9748-c03c59ad2248&quot;</span>;</span><br><span class=\"line\">    Map&lt;String,Object&gt; map = <span class=\"keyword\">new</span> <span class=\"title class_\">HashMap</span>&lt;&gt;();</span><br><span class=\"line\">    map.put(<span class=\"string\">&quot;days&quot;</span>,<span class=\"number\">2</span>);</span><br><span class=\"line\">    map.put(<span class=\"string\">&quot;reason&quot;</span>,<span class=\"string\">&quot;å‡ºå»ç©ç©&quot;</span>);</span><br><span class=\"line\">    <span class=\"type\">ProcessInstance</span> <span class=\"variable\">processInstance</span> <span class=\"operator\">=</span> formService.submitStartForm(processDefId,map);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>å¯åŠ¨æµç¨‹åèµ°åˆ°äº†<code>ç”¨æˆ·ä»»åŠ¡1</code>è¿™ä¸ªèŠ‚ç‚¹</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221014162003762.png\"\n                      alt=\"image-20221014162003762\"\n                ></p>\n<p>æƒ³è¦æŸ¥çœ‹å¯¹åº”çš„è¡¨å•æ•°æ®ã€‚é€šè¿‡å¦‚ä¸‹æ–¹æ³•å¯ä»¥å®ç°</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * æ ¹æ®Taskç¼–å·æ¥æŸ¥çœ‹è¡¨å•æ•°æ®</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"title function_\">getTaskFormData</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">taskId</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;426b11e6-4b85-11ed-b15a-c03c59ad2248&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">processDefId</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;Process_13abncz:1:5d39867a-4b6e-11ed-9748-c03c59ad2248&quot;</span>;</span><br><span class=\"line\">    <span class=\"comment\">// æ ¹æ®æµç¨‹å®šä¹‰æ‰¾åˆ°å¯¹åº”çš„ è¡¨å•æ•°æ®ã€‚</span></span><br><span class=\"line\">    <span class=\"type\">StartFormData</span> <span class=\"variable\">startFormData</span> <span class=\"operator\">=</span> formService.getStartFormData(processDefId);</span><br><span class=\"line\">    List&lt;FormField&gt; formFields = startFormData.getFormFields();</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (FormField formField : formFields) &#123;</span><br><span class=\"line\">        <span class=\"comment\">// è·å–æ¯ä¸ªå…·ä½“çš„è¡¨å•åŸŸ</span></span><br><span class=\"line\">        System.out.println(formField.getId() + <span class=\"string\">&quot; &quot;</span> + formField.getLabel() + <span class=\"string\">&quot; &quot;</span> + formField.getValue().getValue());</span><br><span class=\"line\">        <span class=\"comment\">// æ ¹æ®taskId æ‰¾åˆ°å¯¹åº”çš„æµç¨‹å˜é‡çš„å€¼ ä¹Ÿå°±æ˜¯ è¡¨å•çš„æ•°æ®</span></span><br><span class=\"line\">        System.out.println(formField.getId() + <span class=\"string\">&quot; = &quot;</span> + taskService.getVariable(taskId, formField.getId()));</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221014162117179.png\"\n                      alt=\"image-20221014162117179\"\n                ></p>\n<h3 id=\"ä»»åŠ¡èŠ‚ç‚¹ç»‘å®š\"><a href=\"#ä»»åŠ¡èŠ‚ç‚¹ç»‘å®š\" class=\"headerlink\" title=\"ä»»åŠ¡èŠ‚ç‚¹ç»‘å®š\"></a>ä»»åŠ¡èŠ‚ç‚¹ç»‘å®š</h3><p>ä¸Šçš„æ–¹å¼ç»‘å®šçš„è¡¨å•æ•°æ®åœ¨æ•´ä¸ªæµç¨‹å®ä¾‹è¿ä½œä¸­éƒ½å¯ä»¥ä½¿ç”¨ï¼Œè¿˜æœ‰ä¸€ç§æ–¹å¼æˆ‘ä»¬æ˜¯åœ¨å…·ä½“çš„ä»»åŠ¡èŠ‚ç‚¹ä¸Šç»‘å®šè¡¨å•æ•°æ®ã€‚æˆ‘ä»¬æ¥çœ‹çœ‹ã€‚</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221014162658765.png\"\n                      alt=\"image-20221014162658765\"\n                ></p>\n<p>æµç¨‹å›¾ä¸­æ˜¯åœ¨ <code>ç”¨æˆ·ä»»åŠ¡01</code> è¿™ä¸ªèŠ‚ç‚¹ç»‘å®šçš„è¡¨å•æ•°æ®äº†</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221014162905992.png\"\n                      alt=\"image-20221014162905992\"\n                ></p>\n<p>éƒ¨ç½²æµç¨‹ï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * å®Œæˆæµç¨‹çš„éƒ¨ç½²æ“ä½œ</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">deploy</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"type\">Deployment</span> <span class=\"variable\">deploy</span> <span class=\"operator\">=</span> repositoryService.createDeployment()</span><br><span class=\"line\">            .name(<span class=\"string\">&quot;è¡¨å•01&quot;</span>)</span><br><span class=\"line\">            .addClasspathResource(<span class=\"string\">&quot;flow/è¡¨å•-02.bpmn&quot;</span>)</span><br><span class=\"line\">            .deploy();</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;deploy.getId() = &quot;</span> + deploy.getId());</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>å¯åŠ¨ä¸€ä¸ªæµç¨‹å®ä¾‹ï¼šæ™®é€šæµç¨‹å¯åŠ¨</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * æ­£å¸¸çš„å¯åŠ¨æµç¨‹</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"title function_\">startFormFlow</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> Exception&#123;</span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">processDefId</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;Process_1xf3zgp:1:11da0157-4b9a-11ed-8750-c03c59ad2248&quot;</span>;</span><br><span class=\"line\">    <span class=\"type\">ProcessInstance</span> <span class=\"variable\">processInstance</span> <span class=\"operator\">=</span> runtimeService.startProcessInstanceById(processDefId);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ç„¶åç°åœ¨æµç¨‹æ‰§è¡Œåˆ°äº†<code>ç”¨æˆ·ä»»åŠ¡01</code>å‡ºã€‚æˆ‘ä»¬ç»‘å®šçš„æœ‰æµç¨‹è¡¨å•ã€‚æˆ‘ä»¬å¯ä»¥æŸ¥è¯¢çœ‹çœ‹ã€‚å…ˆæ¥æŸ¥è¯¢Taskå¯¹åº”çš„è¡¨å•ä¿¡æ¯</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221014165547832.png\"\n                      alt=\"image-20221014165547832\"\n                ></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"title function_\">getTaskFormData</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">taskId</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;bff75f55-4b9a-11ed-9709-c03c59ad2248&quot;</span>;</span><br><span class=\"line\">    <span class=\"type\">TaskFormData</span> <span class=\"variable\">taskFormData</span> <span class=\"operator\">=</span> formService.getTaskFormData(taskId);</span><br><span class=\"line\">    List&lt;FormField&gt; formFields = taskFormData.getFormFields();</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (FormField formField : formFields) &#123;</span><br><span class=\"line\">        <span class=\"comment\">// è·å–æ¯ä¸ªå…·ä½“çš„è¡¨å•åŸŸ</span></span><br><span class=\"line\">        System.out.println(formField.getId() + <span class=\"string\">&quot; &quot;</span> + formField.getLabel() + <span class=\"string\">&quot; &quot;</span> + formField.getValue().getValue());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221014163939776.png\"\n                      alt=\"image-20221014163939776\"\n                ></p>\n<p>ç„¶åå¯ä»¥ç»™è¡¨å•çš„ç›¸å…³ä¿¡æ¯èµ‹å€¼</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"title function_\">setTaskFormData</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">taskId</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;bff75f55-4b9a-11ed-9709-c03c59ad2248&quot;</span>;</span><br><span class=\"line\">    taskService.setVariable(taskId,<span class=\"string\">&quot;days1&quot;</span>,<span class=\"number\">5</span>);</span><br><span class=\"line\">    taskService.setVariable(taskId,<span class=\"string\">&quot;reason1&quot;</span>,<span class=\"string\">&quot;ä¸ªäººåŸå› &quot;</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ç„¶åå¯ä»¥çœ‹åˆ°è¡¨å•çš„ä¿¡æ¯</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221014165040994.png\"\n                      alt=\"image-20221014165040994\"\n                ></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221014165131403.png\"\n                      alt=\"image-20221014165131403\"\n                ></p>\n<p>å®¡æ‰¹å®Œæˆåˆ°ä¸‹ä¸€ä¸ªèŠ‚ç‚¹</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221014165620888.png\"\n                      alt=\"image-20221014165620888\"\n                ></p>\n<p>è¿™æ—¶æˆ‘ä»¬å†æŸ¥è¯¢ä¸‹çœ‹èƒ½ä¸èƒ½æ‰¾åˆ°å¯¹åº”çš„è¡¨å•ä¿¡æ¯</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221014165737958.png\"\n                      alt=\"image-20221014165737958\"\n                ></p>\n<p>å¥½äº†è¿™ä¸ªæ˜¯æˆ‘ä»¬è®²çš„ç›´æ¥åœ¨æµç¨‹ä¸­å†…åµŒè¡¨å•çš„åº”ç”¨</p>\n<h2 id=\"å¤–ç½®è¡¨å•\"><a href=\"#å¤–ç½®è¡¨å•\" class=\"headerlink\" title=\"å¤–ç½®è¡¨å•\"></a>å¤–ç½®è¡¨å•</h2><p>æˆ‘ä»¬è¿˜å¯ä»¥è‡ªå·±å®šä¹‰ä¸€ä¸ª HTML+JS çš„åŠ¨æ€è¡¨å•ï¼Œç„¶ååœ¨å®¡æ‰¹ç›¸å…³èŠ‚ç‚¹çš„æ—¶å€™æ¸²æŸ“å±•ç¤ºã€‚</p>\n<h3 id=\"å®šä¹‰ä¸€ä¸ªè¡¨å•\"><a href=\"#å®šä¹‰ä¸€ä¸ªè¡¨å•\" class=\"headerlink\" title=\"å®šä¹‰ä¸€ä¸ªè¡¨å•\"></a>å®šä¹‰ä¸€ä¸ªè¡¨å•</h3><p>æˆ‘ä»¬å…ˆå®šä¹‰ä¸€ä¸ªç®€å•çš„è¡¨å•</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221015134123018.png\"\n                      alt=\"image-20221015134123018\"\n                ></p>\n<h3 id=\"æµç¨‹ç»‘å®š\"><a href=\"#æµç¨‹ç»‘å®š\" class=\"headerlink\" title=\"æµç¨‹ç»‘å®š\"></a>æµç¨‹ç»‘å®š</h3><p>ç„¶ååœ¨æµç¨‹è®¾è®¡çš„æ—¶å€™ç»‘å®šå¯¹åº”çš„è¡¨å•</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221015134202377.png\"\n                      alt=\"image-20221015134202377\"\n                ></p>\n<p>éƒ¨ç½²æµç¨‹åå¯åŠ¨</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221015134234163.png\"\n                      alt=\"image-20221015134234163\"\n                ></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221015134256088.png\"\n                      alt=\"image-20221015134256088\"\n                ></p>\n<p>åœ¨è·³è½¬åçš„åœ°å€ä¸­æœ‰taskIdå’Œå›è°ƒçš„æ¥å£åœ°å€</p>\n","site":{"data":{"links":[{"name":"CZMæœ‰ç‚¹å†·","link":"https://czm.cool/","description":"CZMçš„åšå®¢","avatar":"https://img.czm.cool/avatar/avatar.png"},{"name":"PSH","link":"https://shamd.cloud/","description":"PSHçš„åšå®¢.","avatar":"https://shamd.cloud/upload/2022/07/afbb577733f46c9535dd1d6d6388278.jpg"},{"name":"KAI","link":"https://kainote.top/","description":"love artist, love code.","avatar":"https://cdn.jsdelivr.net/gh/kaix2301/pictures/img202201072101018.jpg"}]}},"excerpt":"","more":"<h1 id=\"Camunda-çƒ­é—¨å·¥ä½œæµå¼•æ“æ¡†æ¶\"><a href=\"#Camunda-çƒ­é—¨å·¥ä½œæµå¼•æ“æ¡†æ¶\" class=\"headerlink\" title=\"Camunda-çƒ­é—¨å·¥ä½œæµå¼•æ“æ¡†æ¶\"></a>Camunda-çƒ­é—¨å·¥ä½œæµå¼•æ“æ¡†æ¶</h1><blockquote>\n<p>Lectureï¼šæ³¢å“¥</p>\n</blockquote>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220902232358815.png\"\n                      alt=\"image-20220902232358815\"\n                ></p>\n<h1 id=\"ProcessEngine\"><a href=\"#ProcessEngine\" class=\"headerlink\" title=\"ProcessEngine\"></a>ProcessEngine</h1><p>ProcessEngineæ˜¯Camundaæµç¨‹å¼•æ“çš„æ ¸å¿ƒã€‚æˆ‘ä»¬åœ¨æµç¨‹ä¸­çš„å¾ˆå¤šå…·ä½“çš„å¤„ç†æ¯”å¦‚<code>æµç¨‹éƒ¨ç½²</code>ã€<code>æµç¨‹éƒ¨ç½²</code>ã€<code>æµç¨‹å®¡æ‰¹</code>ç­‰æ“ä½œéƒ½æ˜¯é€šè¿‡<code>XXXService</code>æ¥å¤„ç†çš„ã€‚è€Œç›¸å…³çš„<code>XXXService</code>éƒ½æ˜¯é€šè¿‡<code>ProcessEngine</code>æ¥ç®¡ç†çš„ã€‚æ‰€ä»¥å¯¹äº<code>ProcessEngine</code>çš„åˆ›å»ºæ–¹å¼è¿˜æ˜¯å¾ˆæœ‰å¿…è¦æŒæ¡çš„ã€‚</p>\n<h2 id=\"é€šè¿‡xmlé…ç½®æ–¹å¼\"><a href=\"#é€šè¿‡xmlé…ç½®æ–¹å¼\" class=\"headerlink\" title=\"é€šè¿‡xmlé…ç½®æ–¹å¼\"></a>é€šè¿‡xmlé…ç½®æ–¹å¼</h2><p>é…ç½®ä½ çš„æµç¨‹å¼•æ“çš„æœ€ç®€å•çš„æ–¹æ³•æ˜¯é€šè¿‡ä¸€ä¸ªå«åš<code>camunda.cfg.xml</code>çš„XMLæ–‡ä»¶ã€‚ä½¿ç”¨è¿™ä¸ªæ–‡ä»¶ï¼Œä½ å¯ä»¥ç®€å•è¿™æ ·åš:</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">processEngine3</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"type\">ProcessEngine</span> <span class=\"variable\">processEngine</span> <span class=\"operator\">=</span> ProcessEngines.getDefaultProcessEngine();</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;processEngine = &quot;</span> + processEngine);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>æˆ‘ä»¬å®šä¹‰å¦‚ä¸‹çš„<code>camunda.cfg.xml</code>æ–‡ä»¶ã€‚æ³¨æ„<code>camunda.cfg.xml</code>å¿…é¡»åŒ…å«ä¸€ä¸ªidä¸º<code>processEngineConfiguration</code>çš„bean</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">beans</span> <span class=\"attr\">xmlns</span>=<span class=\"string\">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">       <span class=\"attr\">xmlns:xsi</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">       <span class=\"attr\">xsi:schemaLocation</span>=<span class=\"string\">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;processEngineConfiguration&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;org.camunda.bpm.engine.impl.cfg.StandaloneProcessEngineConfiguration&quot;</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;jdbcUrl&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;jdbc:h2:mem:camunda;DB_CLOSE_DELAY=1000&quot;</span> /&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;jdbcDriver&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;org.h2.Driver&quot;</span> /&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;jdbcUsername&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;sa&quot;</span> /&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;jdbcPassword&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;&quot;</span> /&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;databaseSchemaUpdate&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;true&quot;</span> /&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;jobExecutorActivate&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;false&quot;</span> /&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;mailServerHost&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;mail.my-corp.com&quot;</span> /&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;mailServerPort&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;5025&quot;</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">bean</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>å¦‚æœæ²¡æœ‰æ‰¾åˆ°<code>camunda.cfg.xml</code>èµ„æºï¼Œé»˜è®¤å¼•æ“å°†æœç´¢<code>activiti.cfg.xml</code>æ–‡ä»¶ä½œä¸ºå¤‡ç”¨ã€‚å¦‚æœä¸¤è€…éƒ½ç¼ºå¤±ï¼Œå¼•æ“å°±ä¼šåœæ­¢è¿è¡Œï¼Œå¹¶æ‰“å°å‡ºå…³äºç¼ºå¤±é…ç½®èµ„æºçš„é”™è¯¯ä¿¡æ¯ã€‚</p>\n<p>è¯·æ³¨æ„ï¼Œé…ç½®XMLå®é™…ä¸Šæ˜¯ä¸€ä¸ªSpringé…ç½®ã€‚è¿™å¹¶ä¸æ„å‘³ç€Camundaå¼•æ“åªèƒ½åœ¨Springç¯å¢ƒä¸­ä½¿ç”¨ã€‚æˆ‘ä»¬åªæ˜¯åœ¨å†…éƒ¨åˆ©ç”¨Springçš„è§£æå’Œä¾èµ–æ³¨å…¥åŠŸèƒ½æ¥å»ºç«‹å¼•æ“ã€‚</p>\n<p>ProcessEngineConfigurationå¯¹è±¡ä¹Ÿå¯ä»¥ä½¿ç”¨é…ç½®æ–‡ä»¶ä»¥ç¼–ç¨‹æ–¹å¼åˆ›å»ºã€‚ä¹Ÿå¯ä»¥ä½¿ç”¨ä¸åŒçš„bean idã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ProcessEngineConfiguration.createProcessEngineConfigurationFromResourceDefault();</span><br><span class=\"line\">ProcessEngineConfiguration.createProcessEngineConfigurationFromResource(String resource);</span><br><span class=\"line\">ProcessEngineConfiguration.createProcessEngineConfigurationFromResource(String resource, String beanName);</span><br><span class=\"line\">ProcessEngineConfiguration.createProcessEngineConfigurationFromInputStream(InputStream inputStream);</span><br><span class=\"line\">ProcessEngineConfiguration.createProcessEngineConfigurationFromInputStream(InputStream inputStream, String beanName);</span><br></pre></td></tr></table></figure>\n\n\n\n\n\n<h2 id=\"JavaAPIæ–¹å¼\"><a href=\"#JavaAPIæ–¹å¼\" class=\"headerlink\" title=\"JavaAPIæ–¹å¼\"></a>JavaAPIæ–¹å¼</h2><p>æˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡åˆ›å»ºæ­£ç¡®çš„ProcessEngineConfigurationå¯¹è±¡æˆ–ä½¿ç”¨ä¸€äº›é¢„å®šä¹‰çš„å¯¹è±¡ï¼Œä»¥ç¼–ç¨‹æ–¹å¼é…ç½®æµç¨‹å¼•æ“ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ProcessEngineConfiguration.createStandaloneProcessEngineConfiguration();</span><br><span class=\"line\">ProcessEngineConfiguration.createStandaloneInMemProcessEngineConfiguration();</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><code>org.camunda.bpm.engine.impl.cfg.StandaloneProcessEngineConfiguration</code><br>æµç¨‹å¼•æ“æ˜¯ä»¥ç‹¬ç«‹çš„æ–¹å¼ä½¿ç”¨çš„ã€‚å¼•æ“æœ¬èº«å°†è´Ÿè´£å¤„ç†äº‹åŠ¡ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œåªæœ‰åœ¨å¼•æ“å¯åŠ¨æ—¶æ‰ä¼šæ£€æŸ¥æ•°æ®åº“ï¼ˆå¦‚æœæ²¡æœ‰æ•°æ®åº“æ¨¡å¼æˆ–æ¨¡å¼ç‰ˆæœ¬ä¸æ­£ç¡®ï¼Œä¼šæŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ï¼‰ã€‚</li>\n<li><code>org.camunda.bpm.engine.impl.cfg.StandaloneInMemProcessEngineConfiguration</code><br>è¿™æ˜¯ä¸€ä¸ªç”¨äºå•å…ƒæµ‹è¯•çš„å·¥å…·ç±»ã€‚å¼•æ“æœ¬èº«å°†è´Ÿè´£å¤„ç†äº‹åŠ¡ã€‚é»˜è®¤ä½¿ç”¨H2å†…å­˜æ•°æ®åº“ã€‚è¯¥æ•°æ®åº“å°†åœ¨å¼•æ“å¯åŠ¨å’Œå…³é—­æ—¶è¢«åˆ›å»ºå’Œåˆ é™¤ã€‚å½“ä½¿ç”¨è¿™ä¸ªæ—¶ï¼Œå¯èƒ½ä¸éœ€è¦é¢å¤–çš„é…ç½®ï¼ˆé™¤äº†ï¼Œå½“ä½¿ç”¨Jobæ‰§è¡Œå™¨ï¼ˆjob executorï¼‰æˆ–é‚®ä»¶åŠŸèƒ½æ—¶ï¼‰ã€‚</li>\n<li><code>org.camunda.bpm.engine.spring.SpringProcessEngineConfiguration</code><br>å½“æµç¨‹å¼•æ“è¢«ç”¨äºSpringç¯å¢ƒæ—¶ä½¿ç”¨ã€‚</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> <span class=\"meta\">@Test</span></span><br><span class=\"line\"> <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">processEngine1</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">     <span class=\"type\">ProcessEngineConfigurationImpl</span> <span class=\"variable\">cfg</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">StandaloneProcessEngineConfiguration</span>()</span><br><span class=\"line\">             .setJdbcUrl(<span class=\"string\">&quot;jdbc:mysql://localhost:3306/camunda1?serverTimezone=UTC&quot;</span>)</span><br><span class=\"line\">             .setJdbcUsername(<span class=\"string\">&quot;root&quot;</span>)</span><br><span class=\"line\">             .setJdbcPassword(<span class=\"string\">&quot;123456&quot;</span>)</span><br><span class=\"line\">             .setJdbcDriver(<span class=\"string\">&quot;com.mysql.cj.jdbc.Driver&quot;</span>)</span><br><span class=\"line\">             .setDatabaseSchemaUpdate(ProcessEngineConfiguration.DB_SCHEMA_UPDATE_FALSE)</span><br><span class=\"line\">             .setHistory(<span class=\"string\">&quot;full&quot;</span>);</span><br><span class=\"line\">     <span class=\"type\">ProcessEngine</span> <span class=\"variable\">processEngine</span> <span class=\"operator\">=</span> cfg.buildProcessEngine();</span><br><span class=\"line\">     System.out.println(<span class=\"string\">&quot;processEngine = &quot;</span> + processEngine);</span><br><span class=\"line\"> &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"> <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">processEngine2</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">     <span class=\"type\">ProcessEngineConfiguration</span> <span class=\"variable\">cfg</span> <span class=\"operator\">=</span> ProcessEngineConfiguration.createStandaloneProcessEngineConfiguration();</span><br><span class=\"line\">     cfg.setJdbcUrl(<span class=\"string\">&quot;jdbc:mysql://localhost:3306/camunda2?serverTimezone=UTC&quot;</span>)</span><br><span class=\"line\">             .setJdbcUsername(<span class=\"string\">&quot;root&quot;</span>)</span><br><span class=\"line\">             .setJdbcPassword(<span class=\"string\">&quot;123456&quot;</span>)</span><br><span class=\"line\">             .setJdbcDriver(<span class=\"string\">&quot;com.mysql.cj.jdbc.Driver&quot;</span>)</span><br><span class=\"line\">             .setDatabaseSchemaUpdate(ProcessEngineConfiguration.DB_SCHEMA_UPDATE_FALSE)</span><br><span class=\"line\">             .setHistory(<span class=\"string\">&quot;full&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">     <span class=\"type\">ProcessEngine</span> <span class=\"variable\">processEngine</span> <span class=\"operator\">=</span> cfg.buildProcessEngine();</span><br><span class=\"line\">     System.out.println(<span class=\"string\">&quot;processEngine = &quot;</span> + processEngine);</span><br><span class=\"line\"> &#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<h2 id=\"SpringBooté¡¹ç›®\"><a href=\"#SpringBooté¡¹ç›®\" class=\"headerlink\" title=\"SpringBooté¡¹ç›®\"></a>SpringBooté¡¹ç›®</h2><p>åœ¨SpringBooté¡¹ç›®ä¼šæ ¹æ®æˆ‘ä»¬å¯¼å…¥çš„ä¾èµ–å®Œæˆè‡ªåŠ¨è£…é…ï¼Œä»è€Œå®ŒæˆProcessEngineçš„è‡ªåŠ¨æ³¨å…¥ã€‚æˆ‘ä»¬å¯ä»¥æ¥åˆ†æä¸‹æºç ã€‚</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220911234908597.png\"\n                      alt=\"image-20220911234908597\"\n                ></p>\n<p>æˆ‘ä»¬éœ€è¦æ³¨æ„å¯¹äºCamundaçš„ç›¸å…³é…ç½®ã€‚æˆ‘ä»¬å¯ä»¥åœ¨application.yml ä¸­é…ç½®ã€‚åŸå› æ˜¯ CamundaBpmPropertiesçš„å¤„ç†ã€‚ç„¶åå°±æ˜¯ @Import(CamundaBpmConfiguration.class) ã€‚ åœ¨CamundaBpmConfigurationä¼šå®Œæˆç›¸å…³çš„ ProcessEngineConfiguration çš„ç›¸å…³æ³¨å…¥ã€‚</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220911234945653.png\"\n                      alt=\"image-20220911234945653\"\n                ></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220911235223373.png\"\n                      alt=\"image-20220911235223373\"\n                ></p>\n<p>è¿™å—æ„Ÿå…´è¶£çš„å°ä¼™ä¼´å¯ä»¥ä»”ç»†é˜…è¯»ä¸‹ã€‚</p>\n<h2 id=\"Service-API\"><a href=\"#Service-API\" class=\"headerlink\" title=\"Service API\"></a>Service API</h2><p>Java APIæ˜¯ä¸å¼•æ“äº’åŠ¨çš„æœ€å¸¸è§æ–¹å¼ã€‚ä¸­å¿ƒèµ·ç‚¹æ˜¯<code>ProcessEngine</code>ï¼Œå®ƒå¯ä»¥é€šè¿‡å‡ ç§æ–¹å¼åˆ›å»ºï¼Œå¦‚é…ç½®éƒ¨åˆ†æ‰€è¿°ã€‚ä»ProcessEngineä¸­ï¼Œä½ å¯ä»¥è·å¾—åŒ…å«å·¥ä½œæµ&#x2F;BPMæ–¹æ³•çš„å„ç§æœåŠ¡ã€‚<code>ProcessEngine</code>å’Œ<code>æœåŠ¡å¯¹è±¡</code>æ˜¯<code>çº¿ç¨‹å®‰å…¨</code>çš„ã€‚æ‰€ä»¥ä½ å¯ä»¥ä¸ºæ•´ä¸ªæœåŠ¡å™¨ä¿ç•™å¯¹å…¶ä¸­ä¸€ä¸ªå¯¹è±¡çš„å¼•ç”¨.</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/api.services.png\"\n                      alt=\"img\"\n                ></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">ProcessEngine</span> <span class=\"variable\">processEngine</span> <span class=\"operator\">=</span> ProcessEngines.getDefaultProcessEngine();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"type\">RepositoryService</span> <span class=\"variable\">repositoryService</span> <span class=\"operator\">=</span> processEngine.getRepositoryService();</span><br><span class=\"line\"><span class=\"type\">RuntimeService</span> <span class=\"variable\">runtimeService</span> <span class=\"operator\">=</span> processEngine.getRuntimeService();</span><br><span class=\"line\"><span class=\"type\">TaskService</span> <span class=\"variable\">taskService</span> <span class=\"operator\">=</span> processEngine.getTaskService();</span><br><span class=\"line\"><span class=\"type\">IdentityService</span> <span class=\"variable\">identityService</span> <span class=\"operator\">=</span> processEngine.getIdentityService();</span><br><span class=\"line\"><span class=\"type\">FormService</span> <span class=\"variable\">formService</span> <span class=\"operator\">=</span> processEngine.getFormService();</span><br><span class=\"line\"><span class=\"type\">HistoryService</span> <span class=\"variable\">historyService</span> <span class=\"operator\">=</span> processEngine.getHistoryService();</span><br><span class=\"line\"><span class=\"type\">ManagementService</span> <span class=\"variable\">managementService</span> <span class=\"operator\">=</span> processEngine.getManagementService();</span><br><span class=\"line\"><span class=\"type\">FilterService</span> <span class=\"variable\">filterService</span> <span class=\"operator\">=</span> processEngine.getFilterService();</span><br><span class=\"line\"><span class=\"type\">ExternalTaskService</span> <span class=\"variable\">externalTaskService</span> <span class=\"operator\">=</span> processEngine.getExternalTaskService();</span><br><span class=\"line\"><span class=\"type\">CaseService</span> <span class=\"variable\">caseService</span> <span class=\"operator\">=</span> processEngine.getCaseService();</span><br><span class=\"line\"><span class=\"type\">DecisionService</span> <span class=\"variable\">decisionService</span> <span class=\"operator\">=</span> processEngine.getDecisionService();</span><br></pre></td></tr></table></figure>\n\n<p><strong>æ³¨æ„</strong>ï¼šæ‰€æœ‰çš„æœåŠ¡éƒ½æ˜¯<code>æ— çŠ¶æ€çš„</code>ã€‚è¿™æ„å‘³ç€ä½ å¯ä»¥å¾ˆå®¹æ˜“åœ°åœ¨ä¸€ä¸ªé›†ç¾¤çš„å¤šä¸ªèŠ‚ç‚¹ä¸Šè¿è¡ŒCamundaå¹³å°ï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½å»åŒä¸€ä¸ªæ•°æ®åº“ï¼Œè€Œä¸å¿…æ‹…å¿ƒå“ªä¸ªæœºå™¨å®é™…æ‰§è¡Œäº†ä»¥å‰çš„è°ƒç”¨ã€‚å¯¹ä»»ä½•æœåŠ¡çš„ä»»ä½•è°ƒç”¨éƒ½æ˜¯æ— çŠ¶æ€çš„ï¼Œæ— è®ºå®ƒåœ¨å“ªé‡Œæ‰§è¡Œã€‚</p>\n<p>æ¯ä¸ªæœåŠ¡çš„ç®€å•ä»‹ç»</p>\n<table>\n<thead>\n<tr>\n<th>æœåŠ¡åç§°</th>\n<th>ä»‹ç»</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>ä»“åº“æœåŠ¡<strong>RepositoryService</strong></td>\n<td>æä¾›äº†ç®¡ç†å’Œæ“çºµéƒ¨ç½²å’Œæµç¨‹å®šä¹‰çš„æ“ä½œ</td>\n</tr>\n<tr>\n<td>è¿è¡Œæ—¶æœåŠ¡-<strong>RuntimeService</strong></td>\n<td>é¦–å…ˆå¯ä»¥é€šè¿‡ä¸€ä¸ªæµç¨‹å®šä¹‰å¯åŠ¨å¤šä¸ªæµç¨‹å®ä¾‹ã€‚ä¹Ÿèƒ½ç”¨äºå¤„ç†æ£€ç´¢å’Œå­˜å‚¨æµç¨‹å˜é‡çš„æœåŠ¡</td>\n</tr>\n<tr>\n<td>ä»»åŠ¡æœåŠ¡-<strong>TaskService</strong></td>\n<td>å›´ç»•ç”¨æˆ·å®¡æ‰¹æ“ä½œçš„ä¸€åˆ‡éƒ½ä¼šè¢«å½’çº³åˆ°TaskServiceã€‚æ¯”å¦‚ï¼šæŸ¥è¯¢åˆ†é…ç»™ç”¨æˆ·æˆ–ç»„çš„ä»»åŠ¡ï¼Œåˆ›å»ºæ–°çš„ç‹¬ç«‹ä»»åŠ¡ã€‚è¿™äº›æ˜¯ä¸æµç¨‹å®ä¾‹æ— å…³çš„ä»»åŠ¡ï¼Œæ“çºµä¸€ä¸ªä»»åŠ¡è¢«åˆ†é…ç»™å“ªä¸ªç”¨æˆ·ï¼Œæˆ–è€…å“ªä¸ªç”¨æˆ·ä»¥æŸç§æ–¹å¼å‚ä¸åˆ°ä»»åŠ¡ä¸­ï¼Œå£°ç§°å¹¶å®Œæˆä¸€é¡¹ä»»åŠ¡ã€‚å£°ç§°æ„å‘³ç€æœ‰äººå†³å®šæˆä¸ºè¯¥ä»»åŠ¡çš„å—è®©äººï¼Œæ„å‘³ç€è¿™ä¸ªç”¨æˆ·å°†å®Œæˆè¯¥ä»»åŠ¡ã€‚å®Œæˆæ„å‘³ç€ â€œå®Œæˆä»»åŠ¡çš„å·¥ä½œâ€ç­‰</td>\n</tr>\n<tr>\n<td>èº«ä»½æœåŠ¡-<strong>IdentityService</strong></td>\n<td>æ˜¯éå¸¸ç®€å•çš„ã€‚å®ƒå…è®¸å¯¹ç»„å’Œç”¨æˆ·è¿›è¡Œç®¡ç†ï¼ˆåˆ›å»ºã€æ›´æ–°ã€åˆ é™¤ã€æŸ¥è¯¢â€¦ï¼‰ã€‚é‡è¦çš„æ˜¯è¦ç†è§£ï¼Œæ ¸å¿ƒå¼•æ“å®é™…ä¸Šåœ¨è¿è¡Œæ—¶å¹¶ä¸å¯¹ç”¨æˆ·è¿›è¡Œä»»ä½•æ£€æŸ¥</td>\n</tr>\n<tr>\n<td>è¡¨å•æœåŠ¡-<strong>FormService</strong></td>\n<td>ä¸€ä¸ªå¯é€‰çš„æœåŠ¡ã€‚æä¾›äº†è¡¨å•åŠŸèƒ½</td>\n</tr>\n<tr>\n<td>å†å²æœåŠ¡-<strong>HistoryService</strong></td>\n<td>æš´éœ²äº†å¼•æ“æ”¶é›†çš„æ‰€æœ‰å†å²æ•°æ®ã€‚å½“æ‰§è¡Œæµç¨‹æ—¶ï¼Œå¼•æ“å¯ä»¥ä¿ç•™å¾ˆå¤šæ•°æ®ï¼ˆè¿™æ˜¯å¯é…ç½®çš„ï¼‰ï¼Œå¦‚æµç¨‹å®ä¾‹çš„å¼€å§‹æ—¶é—´ã€è°åšäº†å“ªäº›ä»»åŠ¡ã€å®Œæˆä»»åŠ¡èŠ±äº†å¤šé•¿æ—¶é—´ã€æ¯ä¸ªæµç¨‹å®ä¾‹éµå¾ªçš„è·¯å¾„ç­‰ã€‚è¯¥æœåŠ¡ä¸»è¦æš´éœ²äº†è®¿é—®è¿™äº›æ•°æ®çš„æŸ¥è¯¢åŠŸèƒ½ã€‚</td>\n</tr>\n<tr>\n<td>ç®¡ç†æœåŠ¡-<strong>ManagementService</strong></td>\n<td>å®ƒå…è®¸æ£€ç´¢å…³äºæ•°æ®åº“è¡¨å’Œè¡¨å…ƒæ•°æ®çš„ä¿¡æ¯ã€‚æ­¤å¤–ï¼Œå®ƒæš´éœ²äº†æŸ¥è¯¢åŠŸèƒ½å’ŒJobçš„ç®¡ç†æ“ä½œã€‚Jobåœ¨å¼•æ“ä¸­è¢«ç”¨äºå„ç§äº‹æƒ…ï¼Œå¦‚å®šæ—¶å™¨ã€å¼‚æ­¥å»¶ç»­ã€å»¶è¿Ÿæš‚åœ&#x2F;æ¿€æ´»ç­‰ã€‚</td>\n</tr>\n<tr>\n<td>è¿‡æ»¤å™¨æœåŠ¡-<strong>FilterService</strong></td>\n<td>å…è®¸åˆ›å»ºå’Œç®¡ç†è¿‡æ»¤å™¨ã€‚è¿‡æ»¤å™¨æ˜¯åƒä»»åŠ¡æŸ¥è¯¢ä¸€æ ·çš„å­˜å‚¨æŸ¥è¯¢ã€‚ä¾‹å¦‚ï¼Œè¿‡æ»¤å™¨è¢«ä»»åŠ¡åˆ—è¡¨ç”¨æ¥è¿‡æ»¤ç”¨æˆ·ä»»åŠ¡</td>\n</tr>\n<tr>\n<td>å¤–éƒ¨ä»»åŠ¡æœåŠ¡-<strong>ExternalTaskService</strong></td>\n<td>æä¾›å¯¹å¤–éƒ¨ä»»åŠ¡å®ä¾‹çš„è®¿é—®ã€‚å¤–éƒ¨ä»»åŠ¡ä»£è¡¨åœ¨å¤–éƒ¨å¤„ç†çš„å·¥ä½œé¡¹ç›®ï¼Œç‹¬ç«‹äºæµç¨‹å¼•æ“ã€‚</td>\n</tr>\n<tr>\n<td>æ¡ˆä¾‹æœåŠ¡-<strong>CaseService</strong></td>\n<td>ä¸è¿è¡Œæ—¶æœåŠ¡ï¼ˆ<strong>RuntimeService</strong>ï¼‰ç±»ä¼¼ï¼Œä½†ç”¨äºæ¡ˆä¾‹å®ä¾‹ã€‚å®ƒå¤„ç†å¯åŠ¨æ¡ˆä¾‹å®šä¹‰çš„æ–°æ¡ˆä¾‹å®ä¾‹å¹¶ç®¡ç†æ¡ˆä¾‹æ‰§è¡Œçš„ç”Ÿå‘½å‘¨æœŸã€‚è¯¥æœåŠ¡ä¹Ÿè¢«ç”¨æ¥æ£€ç´¢å’Œæ›´æ–°æ¡ˆä¾‹å®ä¾‹çš„æµç¨‹å˜é‡ã€‚</td>\n</tr>\n<tr>\n<td>å†³ç­–æœåŠ¡-<strong>DecisionService</strong></td>\n<td>å…è®¸è¯„ä¼°éƒ¨ç½²åœ¨å¼•æ“ä¸­çš„å†³ç­–ã€‚å®ƒæ˜¯è¯„ä¼°ç‹¬ç«‹äºæµç¨‹å®šä¹‰çš„ä¸šåŠ¡è§„åˆ™ä»»åŠ¡ä¸­çš„å†³ç­–çš„ä¸€ç§é€‰æ‹©ã€‚</td>\n</tr>\n</tbody></table>\n<h1 id=\"ä»»åŠ¡åˆ†é…\"><a href=\"#ä»»åŠ¡åˆ†é…\" class=\"headerlink\" title=\"ä»»åŠ¡åˆ†é…\"></a>ä»»åŠ¡åˆ†é…</h1><h2 id=\"å›ºå®šåˆ†é…\"><a href=\"#å›ºå®šåˆ†é…\" class=\"headerlink\" title=\"å›ºå®šåˆ†é…\"></a>å›ºå®šåˆ†é…</h2><p>åœ¨æŒ‡æ´¾<code>ç”¨æˆ·ä»»åŠ¡</code>çš„å®¡æ‰¹äººæ—¶ã€‚æˆ‘ä»¬æ˜¯ç›´æ¥æŒ‡æ´¾çš„å›ºå®šè´¦å·ã€‚ä½†æ˜¯ä¸ºäº†ä¿è¯æµç¨‹è®¾è®¡å®¡æ‰¹çš„çµæ´»æ€§ã€‚æˆ‘ä»¬éœ€è¦å„ç§ä¸åŒçš„åˆ†é…æ–¹å¼ï¼Œæ‰€ä»¥è¿™èŠ‚æˆ‘ä»¬å°±è¯¦ç»†çš„æ¥ä»‹ç»å…ˆåœ¨Camundaä¸­æˆ‘ä»¬å¯ä»¥ä½¿ç”¨çš„ç›¸å…³çš„åˆ†é…æ–¹å¼</p>\n<p>å›ºå®šåˆ†é…å°±æ˜¯æˆ‘ä»¬å‰é¢ä»‹ç»çš„ï¼Œåœ¨ç»˜åˆ¶æµç¨‹å›¾æˆ–è€…ç›´æ¥åœ¨æµç¨‹æ–‡ä»¶ä¸­é€šè¿‡Assigneeæ¥æŒ‡å®šçš„æ–¹å¼.</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220912003431387.png\"\n                      alt=\"image-20220912003431387\"\n                ></p>\n<p>è¿™ç§æ–¹å¼å°±éå¸¸ç®€å•ã€‚ä¸å†è¿‡å¤šèµ˜è¿°ã€‚</p>\n<h2 id=\"å€¼è¡¨è¾¾å¼\"><a href=\"#å€¼è¡¨è¾¾å¼\" class=\"headerlink\" title=\"å€¼è¡¨è¾¾å¼\"></a>å€¼è¡¨è¾¾å¼</h2><p><strong>å€¼è¡¨è¾¾å¼ Value expression</strong>: è§£æä¸ºä¸€ä¸ªå€¼ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œæ‰€æœ‰æµç¨‹å˜é‡éƒ½å¯ä»¥ä½¿ç”¨ã€‚ï¼ˆè‹¥ä½¿ç”¨Springï¼‰æ‰€æœ‰çš„Spring beanä¹Ÿå¯ä»¥ç”¨åœ¨è¡¨è¾¾å¼é‡Œã€‚ä¾‹å¦‚:</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$&#123;myVar&#125;</span><br><span class=\"line\">$&#123;myBean.myProperty&#125;</span><br></pre></td></tr></table></figure>\n\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220912003628341.png\"\n                      alt=\"image-20220912003628341\"\n                ></p>\n<p>ç„¶åå¯ä»¥æ¼”ç¤ºä¸‹è¿™ä¸ªæ¡ˆä¾‹ï¼Œå…ˆéƒ¨ç½²è¯¥æµç¨‹ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * å®Œæˆæµç¨‹çš„éƒ¨ç½²æ“ä½œ</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">deploy</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"type\">Deployment</span> <span class=\"variable\">deploy</span> <span class=\"operator\">=</span> repositoryService.createDeployment()</span><br><span class=\"line\">            .name(<span class=\"string\">&quot;è¯·å‡æµç¨‹&quot;</span>)</span><br><span class=\"line\">            .addClasspathResource(<span class=\"string\">&quot;flow/1-01-ä»»åŠ¡åˆ†é….bpmn&quot;</span>)</span><br><span class=\"line\">            .deploy();</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;deploy.getId() = &quot;</span> + deploy.getId());</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ç„¶ååœ¨å¯åŠ¨æµç¨‹å®ä¾‹ã€‚å¯åŠ¨æµç¨‹å®ä¾‹åä¼šè¿›å…¥åˆ°<code>äººäº‹å®¡æ‰¹</code>è¿™ä¸ªèŠ‚ç‚¹ï¼Œæœ‰<code>å€¼è¡¨è¾¾å¼</code>çš„å­˜åœ¨ï¼Œæˆ‘ä»¬éœ€è¦åœ¨å¯åŠ¨çš„è¿‡ç¨‹ä¸­å°±ç»™å…¶èµ‹å€¼ã€‚</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220912004447956.png\"\n                      alt=\"image-20220912004447956\"\n                ></p>\n<p>ç»‘å®šæµç¨‹å˜é‡çš„æ“ä½œ</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * å¯åŠ¨æµç¨‹å®ä¾‹</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">startFlow</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">processInstanceId</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;Process_0uiy3j1:1:712d273a-31f0-11ed-9e27-c03c59ad2248&quot;</span>;</span><br><span class=\"line\">    <span class=\"comment\">// å®šä¹‰ä¸€ä¸ªMapé›†åˆï¼Œå­˜å‚¨ç›¸å…³çš„æµç¨‹å˜é‡ä¿¡æ¯</span></span><br><span class=\"line\">    Map&lt;String,Object&gt; map = <span class=\"keyword\">new</span> <span class=\"title class_\">HashMap</span>&lt;&gt;();</span><br><span class=\"line\">    map.put(<span class=\"string\">&quot;user1&quot;</span>,<span class=\"string\">&quot;demo&quot;</span>);</span><br><span class=\"line\">    <span class=\"comment\">// é€šè¿‡ RuntimeService å¯åŠ¨ä¸€ä¸ªæµç¨‹å®ä¾‹ï¼ŒåŒæ—¶ç»‘å®šäº†å¯¹åº”çš„æµç¨‹å˜é‡ä¿¡æ¯</span></span><br><span class=\"line\">    runtimeService.startProcessInstanceById(processInstanceId,map);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>é€šè¿‡åå°æŸ¥çœ‹æ•°æ®æˆ‘ä»¬å¯ä»¥å‘ç°<code>act_ru_task</code>ä¸­æœ‰äº†ä¸€æ¡<code>äººäº‹å®¡æ‰¹</code>çš„ä»»åŠ¡ï¼Œè€Œä¸”å¯¹äºçš„å®¡æ‰¹äººå°±æ˜¯<code>demo</code>ä¹Ÿå°±æ˜¯æˆ‘ä»¬ç»™å¯¹åº”çš„æµç¨‹å˜é‡çš„èµ‹å€¼</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220912004819089.png\"\n                      alt=\"image-20220912004819089\"\n                ></p>\n<p>è€Œå¯¹åº”çš„æµç¨‹å˜é‡ä¿¡æ¯å­˜å‚¨åœ¨<code>act_ru_variable</code>ä¸­ã€‚</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220912004949936.png\"\n                      alt=\"image-20220912004949936\"\n                ></p>\n<h2 id=\"æ–¹æ³•è¡¨è¾¾å¼\"><a href=\"#æ–¹æ³•è¡¨è¾¾å¼\" class=\"headerlink\" title=\"æ–¹æ³•è¡¨è¾¾å¼\"></a>æ–¹æ³•è¡¨è¾¾å¼</h2><p><strong>æ–¹æ³•è¡¨è¾¾å¼ Method expression</strong>: è°ƒç”¨ä¸€ä¸ªæ–¹æ³•ï¼Œå¯ä»¥å¸¦æˆ–ä¸å¸¦å‚æ•°ã€‚<strong>å½“è°ƒç”¨ä¸å¸¦å‚æ•°çš„æ–¹æ³•æ—¶ï¼Œè¦ç¡®ä¿åœ¨æ–¹æ³•ååæ·»åŠ ç©ºæ‹¬å·ï¼ˆä»¥é¿å…ä¸å€¼è¡¨è¾¾å¼æ··æ·†ï¼‰ã€‚</strong>ä¼ é€’çš„å‚æ•°å¯ä»¥æ˜¯å­—é¢å€¼(literal value)ï¼Œä¹Ÿå¯ä»¥æ˜¯è¡¨è¾¾å¼ï¼Œå®ƒä»¬ä¼šè¢«è‡ªåŠ¨è§£æã€‚ä¾‹å¦‚ï¼š boge3306</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$&#123;printer.print()&#125;</span><br><span class=\"line\">$&#123;myBean.getAssignee()&#125;</span><br><span class=\"line\">$&#123;myBean.addNewOrder(<span class=\"string\">&#x27;orderName&#x27;</span>)&#125;</span><br><span class=\"line\">$&#123;myBean.doSomething(myVar, execution)&#125;</span><br></pre></td></tr></table></figure>\n\n<p>myBeanæ˜¯Springå®¹å™¨ä¸­çš„ä¸ªBeanå¯¹è±¡ï¼Œè¡¨ç¤ºè°ƒç”¨çš„æ˜¯beançš„addNewOrderæ–¹æ³•.æˆ‘ä»¬é€šè¿‡æ¡ˆä¾‹æ¥æ¼”ç¤ºä¸‹ã€‚æˆ‘ä»¬å…ˆå®šä¹‰å¯¹åº”çš„Service</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Service</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">MyBean</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> String <span class=\"title function_\">getAssignee</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;getAssignee æ–¹æ³•æ‰§è¡Œäº†....&quot;</span>);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">&quot;demo&quot;</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ç„¶åæˆ‘ä»¬åœ¨å¯¹åº”çš„æµç¨‹å›¾ä¸­æ¥å®šä¹‰ã€‚</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220912005546442.png\"\n                      alt=\"image-20220912005546442\"\n                ></p>\n<p>ç„¶åé€šè¿‡éƒ¨ç½²å¯åŠ¨æ“ä½œæ¥çœ‹çœ‹ã€‚</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220912010330601.png\"\n                      alt=\"image-20220912010330601\"\n                ></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220912010405626.png\"\n                      alt=\"image-20220912010405626\"\n                ></p>\n<p>é€šè¿‡è¿™å—çš„æ¼”ç¤ºï¼Œæˆ‘ä»¬å°±å¯ä»¥åŸºäºæˆ‘ä»¬çš„å¤–éƒ¨æ¡ä»¶æ¥ç»“åˆæˆ‘ä»¬çš„é€»è¾‘å®ç°åŠ¨æ€çš„æ¥æŒ‡å®šå¯¹åº”çš„å¤„ç†äººã€‚</p>\n<h2 id=\"ç›‘å¬å™¨é…ç½®\"><a href=\"#ç›‘å¬å™¨é…ç½®\" class=\"headerlink\" title=\"ç›‘å¬å™¨é…ç½®\"></a>ç›‘å¬å™¨é…ç½®</h2><p>å¯ä»¥ä½¿ç”¨ç›‘å¬å™¨æ¥å®Œæˆå¾ˆå¤šCamundaçš„æµç¨‹ä¸šåŠ¡ã€‚æˆ‘ä»¬åœ¨æ­¤å¤„ä½¿ç”¨ç›‘å¬å™¨æ¥å®Œæˆè´Ÿè´£äººçš„æŒ‡å®šï¼Œé‚£ä¹ˆæˆ‘ä»¬åœ¨æµç¨‹è®¾è®¡çš„æ—¶å€™å°±ä¸éœ€è¦æŒ‡å®šassigneeã€‚åˆ›å»ºè‡ªå®šä¹‰ç›‘å¬å™¨ï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * è‡ªå®šä¹‰çš„ä¸€ä¸ª Task ç›‘å¬å™¨</span></span><br><span class=\"line\"><span class=\"comment\"> * æˆ‘ä»¬éœ€è¦åœ¨ç›‘å¬å™¨ä¸­å®Œæˆ å¤„ç†äººçš„åŠ¨æ€æŒ‡æ´¾</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">MyFirstTaskListener</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">TaskListener</span> &#123;</span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">notify</span><span class=\"params\">(DelegateTask delegateTask)</span> &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;MyFirstTaskListener --- &gt; æ‰§è¡Œäº†&quot;</span>);</span><br><span class=\"line\">        <span class=\"comment\">// é’ˆå¯¹ æ˜¯åˆ›å»ºTaskèŠ‚ç‚¹çš„äº‹ä»¶</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span>(EVENTNAME_CREATE.equals(delegateTask.getEventName()))&#123;</span><br><span class=\"line\">            <span class=\"comment\">// æŒ‡æ´¾å¯¹åº”çš„å¤„ç†äºº</span></span><br><span class=\"line\">            delegateTask.setAssignee(<span class=\"string\">&quot;demo&quot;</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ç„¶ååœ¨æµç¨‹å›¾ä¸­ç»‘å®šå¯¹åº”çš„ç›‘å¬å™¨</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220912011453664.png\"\n                      alt=\"image-20220912011453664\"\n                ></p>\n<p>ç„¶åæˆ‘ä»¬éƒ¨ç½²å’Œå¯åŠ¨æµç¨‹åï¼Œå¯ä»¥çœ‹åˆ°å¯¹åº”çš„è§¦å‘æ•ˆæœ</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220912011644311.png\"\n                      alt=\"image-20220912011644311\"\n                ></p>\n<p>è¡¨ç»“æ„ä¸­ä¹Ÿå¯ä»¥çœ‹åˆ°ç›¸å…³çš„ä¿¡æ¯</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220912011735815.png\"\n                      alt=\"image-20220912011735815\"\n                ></p>\n<p>è¯´æ˜è¿™å—çš„å¤„ç†æ˜¯å®Œå…¨å¯è¡Œçš„ã€‚</p>\n<h1 id=\"æµç¨‹å˜é‡\"><a href=\"#æµç¨‹å˜é‡\" class=\"headerlink\" title=\"æµç¨‹å˜é‡\"></a>æµç¨‹å˜é‡</h1><p>æµç¨‹å˜é‡å¯ä»¥ç”¨å°†æ•°æ®æ·»åŠ åˆ°æµç¨‹çš„è¿è¡Œæ—¶çŠ¶æ€ä¸­ï¼Œæˆ–è€…æ›´å…·ä½“åœ°è¯´ï¼Œå˜é‡ä½œç”¨åŸŸä¸­ã€‚æ”¹å˜å®ä½“çš„å„ç§APIå¯ä»¥ç”¨æ¥æ›´æ–°è¿™äº›é™„åŠ çš„å˜é‡ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œä¸€ä¸ªå˜é‡ç”±ä¸€ä¸ªåç§°å’Œä¸€ä¸ªå€¼ç»„æˆã€‚åç§°ç”¨äºåœ¨æ•´ä¸ªæµç¨‹ä¸­è¯†åˆ«å˜é‡ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä¸€ä¸ªæ´»åŠ¨ï¼ˆactivityï¼‰è®¾ç½®äº†ä¸€ä¸ªåä¸º <em>var</em> çš„å˜é‡ï¼Œé‚£ä¹ˆåç»­æ´»åŠ¨ä¸­å¯ä»¥é€šè¿‡ä½¿ç”¨è¿™ä¸ªåç§°æ¥è®¿é—®å®ƒã€‚å˜é‡çš„å€¼æ˜¯ä¸€ä¸ª Java å¯¹è±¡ã€‚</p>\n<h2 id=\"è¿è¡Œæ—¶å˜é‡\"><a href=\"#è¿è¡Œæ—¶å˜é‡\" class=\"headerlink\" title=\"è¿è¡Œæ—¶å˜é‡\"></a>è¿è¡Œæ—¶å˜é‡</h2><p>æµç¨‹å®ä¾‹è¿è¡Œæ—¶çš„å˜é‡ï¼Œå­˜å…¥act_ru_variableè¡¨ä¸­ã€‚åœ¨æµç¨‹å®ä¾‹è¿è¡Œç»“æŸæ—¶ï¼Œæ­¤å®ä¾‹çš„å˜é‡åœ¨è¡¨ä¸­åˆ é™¤ã€‚åœ¨æµç¨‹å®ä¾‹åˆ›å»ºåŠå¯åŠ¨æ—¶ï¼Œå¯è®¾ç½®æµç¨‹å˜é‡ã€‚æ‰€æœ‰çš„<code>startProcessInstanceXXX</code>æ–¹æ³•éƒ½æœ‰ä¸€ä¸ªå¯é€‰å‚æ•°ç”¨äºè®¾ç½®å˜é‡ã€‚ä¾‹å¦‚ï¼Œ<code>RuntimeService</code>ä¸­</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ProcessInstance <span class=\"title function_\">startProcessInstanceById</span><span class=\"params\">(String processDefinitionId, Map&lt;String, Object&gt; variables)</span>;</span><br></pre></td></tr></table></figure>\n\n<p>ä¹Ÿå¯ä»¥åœ¨æµç¨‹æ‰§è¡Œä¸­åŠ å…¥å˜é‡ã€‚ä¾‹å¦‚ï¼Œ(<em>RuntimeService</em>):</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"title function_\">setVariable</span><span class=\"params\">(String executionId, String variableName, Object value)</span>;</span><br><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"title function_\">setVariableLocal</span><span class=\"params\">(String executionId, String variableName, Object value)</span>;</span><br><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"title function_\">setVariables</span><span class=\"params\">(String executionId, Map&lt;String, ? extends Object&gt; variables)</span>;</span><br><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"title function_\">setVariablesLocal</span><span class=\"params\">(String executionId, Map&lt;String, ? extends Object&gt; variables)</span>;</span><br></pre></td></tr></table></figure>\n\n<p>è¯»å–å˜é‡æ–¹æ³•:</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Map&lt;String, Object&gt; <span class=\"title function_\">getVariables</span><span class=\"params\">(String executionId)</span>;</span><br><span class=\"line\">Map&lt;String, Object&gt; <span class=\"title function_\">getVariablesLocal</span><span class=\"params\">(String executionId)</span>;</span><br><span class=\"line\">Map&lt;String, Object&gt; <span class=\"title function_\">getVariables</span><span class=\"params\">(String executionId, Collection&lt;String&gt; variableNames)</span>;</span><br><span class=\"line\">Map&lt;String, Object&gt; <span class=\"title function_\">getVariablesLocal</span><span class=\"params\">(String executionId, Collection&lt;String&gt; variableNames)</span>;</span><br><span class=\"line\">Object <span class=\"title function_\">getVariable</span><span class=\"params\">(String executionId, String variableName)</span>;</span><br><span class=\"line\">&lt;T&gt; T <span class=\"title function_\">getVariable</span><span class=\"params\">(String executionId, String variableName, Class&lt;T&gt; variableClass)</span>;</span><br></pre></td></tr></table></figure>\n\n<p><strong>æ³¨æ„</strong>ï¼šç”±äºæµç¨‹å®ä¾‹ç»“æŸæ—¶ï¼Œå¯¹åº”åœ¨è¿è¡Œæ—¶è¡¨çš„æ•°æ®è·Ÿç€è¢«åˆ é™¤ã€‚æ‰€ä»¥æŸ¥è¯¢ä¸€ä¸ªå·²ç»å®Œç»“æµç¨‹å®ä¾‹çš„å˜é‡ï¼Œåªèƒ½åœ¨å†å²å˜é‡è¡¨ä¸­æŸ¥æ‰¾ã€‚</p>\n<p>å½“ç„¶è¿è¡Œæ—¶å˜é‡æˆ‘ä»¬ä¹Ÿå¯ä»¥æ ¹æ®å¯¹åº”çš„ä½œç”¨åŸŸæŠŠä»–åˆ†ä¸º<code>å…¨å±€å˜é‡</code>å’Œ<code>å±€éƒ¨å˜é‡</code>.</p>\n<h3 id=\"å…¨å±€å˜é‡\"><a href=\"#å…¨å±€å˜é‡\" class=\"headerlink\" title=\"å…¨å±€å˜é‡\"></a>å…¨å±€å˜é‡</h3><p>æµç¨‹å˜é‡çš„é»˜è®¤ä½œç”¨åŸŸæ˜¯æµç¨‹å®ä¾‹ã€‚å½“ä¸€ä¸ªæµç¨‹å˜é‡çš„ä½œç”¨åŸŸä¸ºæµç¨‹å®ä¾‹æ—¶ï¼Œå¯ä»¥ç§°ä¸º global å˜é‡</p>\n<p>æ³¨æ„ï¼šå¦‚ï¼š    Globalå˜é‡ï¼šuserIdï¼ˆå˜é‡åï¼‰ã€zhangsanï¼ˆå˜é‡å€¼ï¼‰</p>\n<p>global å˜é‡ä¸­å˜é‡åä¸å…è®¸é‡å¤ï¼Œè®¾ç½®ç›¸åŒåç§°çš„å˜é‡ï¼Œåè®¾ç½®çš„å€¼ä¼šè¦†ç›–å‰è®¾ç½®çš„å˜é‡å€¼ã€‚</p>\n<p>æ¡ˆä¾‹ï¼š</p>\n<p>å®šä¹‰ç›‘å¬å™¨</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">MySecondListener</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">TaskListener</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">notify</span><span class=\"params\">(DelegateTask delegateTask)</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// è·å–æ‰€æœ‰çš„æµç¨‹å˜é‡</span></span><br><span class=\"line\">        Map&lt;String, Object&gt; variables = delegateTask.getVariables();</span><br><span class=\"line\">        Set&lt;String&gt; keys = variables.keySet();</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (String key : keys) &#123;</span><br><span class=\"line\">            <span class=\"type\">Object</span> <span class=\"variable\">obj</span> <span class=\"operator\">=</span> variables.get(key);</span><br><span class=\"line\">            System.out.println(key + <span class=\"string\">&quot; = &quot;</span> + obj);</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(obj <span class=\"keyword\">instanceof</span>  String)&#123;</span><br><span class=\"line\">              <span class=\"comment\">// ä¿®æ”¹ æµç¨‹å˜é‡çš„ä¿¡æ¯</span></span><br><span class=\"line\">              <span class=\"comment\">// variables.put(key,obj + &quot;:boge3306&quot;); ç›´æ¥ä¿®æ”¹Mapä¸­çš„æ•°æ® è¾¾ä¸åˆ°ä¿®æ”¹æµç¨‹å˜é‡çš„æ•ˆæœ</span></span><br><span class=\"line\">              delegateTask.setVariable(key,obj + <span class=\"string\">&quot;:boge3306&quot;</span>);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>è®¾è®¡æµç¨‹</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220913011512486.png\"\n                      alt=\"image-20220913011512486\"\n                ></p>\n<p>æ¡ˆä¾‹ä»£ç ï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@SpringBootTest(classes = Application.class)</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">AssigneeTaskTest</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Autowired</span></span><br><span class=\"line\">    RepositoryService repositoryService;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Autowired</span></span><br><span class=\"line\">    RuntimeService runtimeService;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Autowired</span></span><br><span class=\"line\">    TaskService taskService;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * éƒ¨ç½²æµç¨‹</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">deployFlow</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">        <span class=\"type\">Deployment</span> <span class=\"variable\">deploy</span> <span class=\"operator\">=</span> repositoryService.createDeployment()</span><br><span class=\"line\">                .name(<span class=\"string\">&quot;è¯·å‡æµç¨‹-ç›‘å¬å™¨&quot;</span>)</span><br><span class=\"line\">                .addClasspathResource(<span class=\"string\">&quot;flow/04-ä»»åŠ¡åˆ†é…-ç›‘å¬å™¨åˆ†é….bpmn&quot;</span>)</span><br><span class=\"line\">                .deploy();</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;deploy.getId() = &quot;</span> + deploy.getId());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * å¯åŠ¨æµç¨‹å®ä¾‹</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">startFlow</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">        <span class=\"type\">String</span> <span class=\"variable\">processDefId</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;Process_08kf7mp:1:d154c0f5-326d-11ed-841a-c03c59ad2248&quot;</span>;</span><br><span class=\"line\">        <span class=\"type\">ProcessInstance</span> <span class=\"variable\">processInstance</span> <span class=\"operator\">=</span> runtimeService.startProcessInstanceById(processDefId);</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;processInstance.getId() = &quot;</span> + processInstance.getId());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * å¯åŠ¨æµç¨‹å®ä¾‹ï¼Œç»‘å®šå¯¹åº”çš„æµç¨‹å˜é‡</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">startFlowVariables</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">        <span class=\"type\">String</span> <span class=\"variable\">processDefId</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;Process_1t425hs:1:539f152d-326a-11ed-ab57-c03c59ad2248&quot;</span>;</span><br><span class=\"line\">        <span class=\"comment\">// å£°æ˜ä¸€ä¸ª Map é›†åˆ</span></span><br><span class=\"line\">        Map&lt;String,Object&gt; map = <span class=\"keyword\">new</span> <span class=\"title class_\">HashMap</span>&lt;&gt;();</span><br><span class=\"line\">        map.put(<span class=\"string\">&quot;user1&quot;</span>,<span class=\"string\">&quot;demo&quot;</span>);</span><br><span class=\"line\">        <span class=\"comment\">// å¯åŠ¨æµç¨‹å®ä¾‹ï¼ŒåŒæ—¶ç»‘å®šå¯¹åº”çš„æµç¨‹å˜é‡ä¿¡æ¯</span></span><br><span class=\"line\">        <span class=\"type\">ProcessInstance</span> <span class=\"variable\">processInstance</span> <span class=\"operator\">=</span> runtimeService.startProcessInstanceById(processDefId,map);</span><br><span class=\"line\"></span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;processInstance.getId() = &quot;</span> + processInstance.getId());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * æµç¨‹å®¡æ‰¹</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">completeTask</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">        taskService.complete(<span class=\"string\">&quot;29a0614c-3267-11ed-a030-c03c59ad2248&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * æµç¨‹å®¡æ‰¹</span></span><br><span class=\"line\"><span class=\"comment\">     *    åŒæ ·éœ€è¦ç»‘å®šå¯¹åº”çš„æµç¨‹å˜é‡çš„å€¼</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">completeTaskVariables</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// å£°æ˜ä¸€ä¸ª Map é›†åˆ</span></span><br><span class=\"line\">        Map&lt;String,Object&gt; map = <span class=\"keyword\">new</span> <span class=\"title class_\">HashMap</span>&lt;&gt;();</span><br><span class=\"line\">        map.put(<span class=\"string\">&quot;user2&quot;</span>,<span class=\"string\">&quot;demo&quot;</span>);</span><br><span class=\"line\">        taskService.complete(<span class=\"string\">&quot;dd013840-326a-11ed-b589-c03c59ad2248&quot;</span>,map);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n\n\n<h3 id=\"å±€éƒ¨å˜é‡\"><a href=\"#å±€éƒ¨å˜é‡\" class=\"headerlink\" title=\"å±€éƒ¨å˜é‡\"></a>å±€éƒ¨å˜é‡</h3><p>ä»»åŠ¡å’Œæ‰§è¡Œå®ä¾‹ä»…ä»…æ˜¯é’ˆå¯¹ä¸€ä¸ªä»»åŠ¡å’Œä¸€ä¸ªæ‰§è¡Œå®ä¾‹èŒƒå›´ï¼ŒèŒƒå›´æ²¡æœ‰æµç¨‹å®ä¾‹å¤§ï¼Œ ç§°ä¸º local å˜é‡ã€‚</p>\n<p>Local å˜é‡ç”±äºåœ¨ä¸åŒçš„ä»»åŠ¡æˆ–ä¸åŒçš„æ‰§è¡Œå®ä¾‹ä¸­ï¼Œä½œç”¨åŸŸäº’ä¸å½±å“ï¼Œå˜é‡åå¯ä»¥ç›¸åŒæ²¡æœ‰å½±å“ã€‚Local å˜é‡åä¹Ÿå¯ä»¥å’Œ global å˜é‡åç›¸åŒï¼Œæ²¡æœ‰å½±å“ã€‚ </p>\n<p>æˆ‘ä»¬é€šè¿‡RuntimeService è®¾ç½®çš„Localå˜é‡ç»‘å®šçš„æ˜¯ executionIdã€‚åœ¨è¯¥æµç¨‹ä¸­æœ‰æ•ˆ</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220913120555429.png\"\n                      alt=\"image-20220913120555429\"\n                ></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * è®¾ç½®Localæµç¨‹å˜é‡</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">setVariableLocal</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">executionId</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;368f9fdc-3317-11ed-871d-c03c59ad2248&quot;</span>;</span><br><span class=\"line\">    runtimeService.setVariableLocal(executionId,<span class=\"string\">&quot;orderId&quot;</span>,<span class=\"string\">&quot;10006&quot;</span>);</span><br><span class=\"line\">    runtimeService.setVariableLocal(executionId,<span class=\"string\">&quot;user2&quot;</span>,<span class=\"string\">&quot;æ³¢æ³¢çƒ¤é¸­1&quot;</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<p>æˆ‘ä»¬é€šè¿‡TaskServiceè®¾ç½®çš„Localå˜é‡çš„ä½œç”¨åŸŸæ˜¯å’ŒTaskIdç»‘å®šçš„ï¼Œä½œç”¨åŸŸå°±åœ¨è¿™ä¸€ä¸ªTaskç”Ÿå‘½å‘¨æœŸä¸­ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">taskLocalVariables</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    taskService.setVariableLocal(<span class=\"string\">&quot;7eb1b34b-3318-11ed-b9e6-c03c59ad2248&quot;</span>,<span class=\"string\">&quot;user2&quot;</span>,<span class=\"string\">&quot;æ³¢å“¥66666&quot;</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n\n\n<h2 id=\"å†å²å˜é‡\"><a href=\"#å†å²å˜é‡\" class=\"headerlink\" title=\"å†å²å˜é‡\"></a>å†å²å˜é‡</h2><p>å†å²å˜é‡ï¼Œå­˜å…¥<code>act_hi_varinst</code>è¡¨ä¸­ã€‚åœ¨æµç¨‹å¯åŠ¨æ—¶ï¼Œæµç¨‹å˜é‡ä¼šåŒæ—¶å­˜å…¥å†å²å˜é‡è¡¨ä¸­ï¼›åœ¨æµç¨‹ç»“æŸæ—¶ï¼Œå†å²è¡¨ä¸­çš„å˜é‡ä»ç„¶å­˜åœ¨ã€‚å¯ç†è§£ä¸ºâ€œæ°¸ä¹…ä»£â€çš„æµç¨‹å˜é‡ã€‚</p>\n<p>è·å–å·²å®Œæˆçš„ã€idä¸ºâ€™XXXâ€™çš„æµç¨‹å®ä¾‹ä¸­ï¼Œæ‰€æœ‰çš„<code>HistoricVariableInstances</code>ï¼ˆå†å²å˜é‡å®ä¾‹ï¼‰ï¼Œå¹¶ä»¥å˜é‡åæ’åºã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">historyService.createHistoricVariableInstanceQuery()</span><br><span class=\"line\">    .processInstanceId(<span class=\"string\">&quot;XXX&quot;</span>)</span><br><span class=\"line\">    .orderByVariableName.desc()</span><br><span class=\"line\">    .list();</span><br></pre></td></tr></table></figure>\n\n\n\n\n\n\n\n<h1 id=\"èº«ä»½æœåŠ¡\"><a href=\"#èº«ä»½æœåŠ¡\" class=\"headerlink\" title=\"èº«ä»½æœåŠ¡\"></a>èº«ä»½æœåŠ¡</h1><p>åœ¨æµç¨‹å®šä¹‰ä¸­åœ¨ä»»åŠ¡ç»“ç‚¹çš„ assignee å›ºå®šè®¾ç½®ä»»åŠ¡è´Ÿè´£äººï¼Œåœ¨æµç¨‹å®šä¹‰æ—¶å°†å‚ä¸è€…å›ºå®šè®¾ç½®åœ¨.bpmn æ–‡ä»¶ä¸­ï¼Œå¦‚æœä¸´æ—¶ä»»åŠ¡è´Ÿè´£äººå˜æ›´åˆ™éœ€è¦ä¿®æ”¹æµç¨‹å®šä¹‰ï¼Œç³»ç»Ÿå¯æ‰©å±•æ€§å·®ã€‚é’ˆå¯¹è¿™ç§æƒ…å†µå¯ä»¥ç»™ä»»åŠ¡è®¾ç½®å¤šä¸ªå€™é€‰äººæˆ–è€…å€™é€‰äººç»„ï¼Œå¯ä»¥ä»å€™é€‰äººä¸­é€‰æ‹©å‚ä¸è€…æ¥å®Œæˆä»»åŠ¡ã€‚</p>\n<p>èº«ä»½æœåŠ¡æ˜¯å¯¹å„ç§ç”¨æˆ·&#x2F;ç»„åº“çš„APIæŠ½è±¡ã€‚å…¶åŸºæœ¬å®ä½“æ˜¯ï¼š</p>\n<ul>\n<li>User: ä½¿ç”¨ä¸åŒIDåŒºåˆ†çš„ä¸åŒç”¨æˆ·</li>\n<li>Group: ä½¿ç”¨ä¸åŒIDåŒºåˆ†çš„ä¸åŒç»„</li>\n<li>Membership: ç»„ä¸ç”¨æˆ·ä¹‹é—´çš„å…³ç³»</li>\n<li>Tenant: ä½¿ç”¨ä¸åŒIDåŒºåˆ†çš„ä¸åŒç§Ÿæˆ·</li>\n<li>Tenant Membership: ç§Ÿæˆ·ä¸ ç”¨æˆ·&#x2F;ç»„ ä¹‹é—´çš„å…³ç³»</li>\n</ul>\n<h2 id=\"å€™é€‰äºº\"><a href=\"#å€™é€‰äºº\" class=\"headerlink\" title=\"å€™é€‰äºº\"></a>å€™é€‰äºº</h2><h3 id=\"ç»˜åˆ¶æµç¨‹å›¾\"><a href=\"#ç»˜åˆ¶æµç¨‹å›¾\" class=\"headerlink\" title=\"ç»˜åˆ¶æµç¨‹å›¾\"></a>ç»˜åˆ¶æµç¨‹å›¾</h3><p>é¦–å…ˆç»˜åˆ¶ä¸€ä¸ªå¦‚ä¸‹çš„åŸºæœ¬æµç¨‹å›¾ã€‚ç„¶åæˆ‘ä»¬åˆ†åˆ«æ¥æŒ‡æ´¾å¤„ç†äººã€‚</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220917101906123.png\"\n                      alt=\"image-20220917101906123\"\n                ></p>\n<p>äººäº‹å®¡æ‰¹è¿™å—æˆ‘ä»¬å¯ä»¥ç›´æ¥æ¥æŒ‡å®šå¤šä¸ªå€™é€‰äººæ¥å¤„ç†ã€‚<code>demo,zhang,lisi</code></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220917102115513.png\"\n                      alt=\"image-20220917102115513\"\n                ></p>\n<p>åœ¨æ€»ç»ç†å®¡æ‰¹çš„ä½ç½®æˆ‘ä»¬åœ¨è®¾è®¡çš„æ—¶å€™ä¸å¤ªæ¸…æ¥šä¼šæ˜¯è°æ¥å®¡æ‰¹ï¼Œæ‰€ä»¥é€šè¿‡å€¼è¡¨è¾¾å¼æ¥å¤„ç†ã€‚</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220917102211814.png\"\n                      alt=\"image-20220917102211814\"\n                ></p>\n<p>è®¾è®¡å®Œæˆåå¯¹åº”çš„xmlä¸­çš„æ•°æ®ä¸ºï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220917102259478.png\"\n                      alt=\"image-20220917102259478\"\n                ></p>\n<h3 id=\"éƒ¨ç½²å’Œå¯åŠ¨æµç¨‹\"><a href=\"#éƒ¨ç½²å’Œå¯åŠ¨æµç¨‹\" class=\"headerlink\" title=\"éƒ¨ç½²å’Œå¯åŠ¨æµç¨‹\"></a>éƒ¨ç½²å’Œå¯åŠ¨æµç¨‹</h3><p>åˆ›å»ºäº†æµç¨‹å›¾åæˆ‘ä»¬å°±å¯ä»¥ç›´æ¥æ¥éƒ¨ç½²è¯¥æµç¨‹ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * å®Œæˆæµç¨‹çš„éƒ¨ç½²æ“ä½œ</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">deploy</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"type\">Deployment</span> <span class=\"variable\">deploy</span> <span class=\"operator\">=</span> repositoryService.createDeployment()</span><br><span class=\"line\">            .name(<span class=\"string\">&quot;å€™é€‰äººæ¡ˆä¾‹&quot;</span>)</span><br><span class=\"line\">            .addClasspathResource(<span class=\"string\">&quot;flow/å€™é€‰äººæ¡ˆä¾‹.bpmn&quot;</span>)</span><br><span class=\"line\">            .deploy();</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;deploy.getId() = &quot;</span> + deploy.getId());</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>æ¥ç€å°±å¯ä»¥ç›´æ¥æ¥å¯åŠ¨è¯¥æµç¨‹äº†ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * å¯åŠ¨æµç¨‹å®ä¾‹</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">startFlow</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">processInstanceId</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;Process_05vjqic:1:cca1e181-362e-11ed-b8fc-c03c59ad2248&quot;</span>;</span><br><span class=\"line\">    runtimeService.startProcessInstanceById(processInstanceId);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>å¯åŠ¨å®Œæˆæµç¨‹åæˆ‘ä»¬è¿›å…¥åˆ°<code>act_ru_task</code>ä¸­å¯ä»¥å‘ç°æˆ‘ä»¬åˆ›å»ºçš„æµç¨‹ä»»åŠ¡ä¿¡æ¯ï¼Œä½†æ˜¯<code>å¤„ç†äºº</code>å­—æ®µè¿˜æ˜¯ç©ºçš„ã€‚</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220917102625541.png\"\n                      alt=\"image-20220917102625541\"\n                ></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220917102655865.png\"\n                      alt=\"image-20220917102655865\"\n                ></p>\n<p>æ³¨æ„ï¼šç›¸å…³çš„å€™é€‰äººçš„ä¿¡æ¯å­˜å‚¨åœ¨äº†<code>act_ru_identitylink</code>è¡¨ä¸­ã€‚</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220917104657296.png\"\n                      alt=\"image-20220917104657296\"\n                ></p>\n<p>å¯¹åº”çš„æŸ¥è¯¢æ“ä½œå¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">getTaskCandidate</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    List&lt;IdentityLink&gt; identityLinksForTask = taskService.getIdentityLinksForTask(<span class=\"string\">&quot;023f0279-362f-11ed-8d8a-c03c59ad2248&quot;</span>);</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (IdentityLink identityLink : identityLinksForTask) &#123;</span><br><span class=\"line\">        System.out.println(identityLink.getTaskId());</span><br><span class=\"line\">        System.out.println(identityLink.getProcessDefId());</span><br><span class=\"line\">        System.out.println(identityLink.getUserId());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n\n\n<h3 id=\"ä»»åŠ¡çš„æ‹¾å–\"><a href=\"#ä»»åŠ¡çš„æ‹¾å–\" class=\"headerlink\" title=\"ä»»åŠ¡çš„æ‹¾å–\"></a>ä»»åŠ¡çš„æ‹¾å–</h3><p>å€™é€‰è¦æ“ä½œæˆ‘ä»¬éœ€è¦é€šè¿‡<code>æ‹¾å–</code>çš„è¡Œä¸ºæŠŠ<code>å€™é€‰äºº</code>è½¬æ¢ä¸º<code>å¤„ç†äºº</code>.é‚£ä¹ˆå€™é€‰äººç™»å½•åéœ€è¦èƒ½æŸ¥è¯¢å‡ºæ¥ä»–å¯ä»¥<code>æ‹¾å–</code>çš„ä»»åŠ¡ã€‚åœ¨camundaçš„webåº”ç”¨ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°è¿™æ ·çš„æ“ä½œã€‚<code>demo</code>è´¦å·ç™»å½•ã€‚</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220917103124214.png\"\n                      alt=\"image-20220917103124214\"\n                ></p>\n<p>åœ¨ä»£ç ä¸Šçš„å®ç°ï¼Œå…ˆæ¥çœ‹æŸ¥è¯¢æ“ä½œã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * æ ¹æ®ç™»å½•çš„ç”¨æˆ·æŸ¥è¯¢å¯¹åº”çš„å¯ä»¥æ‹¾å–çš„ä»»åŠ¡</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">queryTaskCandidate</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    List&lt;Task&gt; list = taskService.createTaskQuery()</span><br><span class=\"line\">            .processInstanceId(<span class=\"string\">&quot;023da2e6-362f-11ed-8d8a-c03c59ad2248&quot;</span>)</span><br><span class=\"line\">            .taskCandidateUser(<span class=\"string\">&quot;demo&quot;</span>)</span><br><span class=\"line\">            .list();</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (Task task : list) &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;task.getId() = &quot;</span> + task.getId());</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;task.getName() = &quot;</span> + task.getName());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * æŸ¥è¯¢å½“å‰ä»»åŠ¡æ‰€æœ‰çš„å€™é€‰äºº</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">getTaskCandidate</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">taskId</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;52b2642a-36fa-11ed-bde4-c03c59ad2248&quot;</span>;</span><br><span class=\"line\">    List&lt;IdentityLink&gt; linksForTask = taskService.getIdentityLinksForTask(taskId);</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(linksForTask != <span class=\"literal\">null</span> &amp;&amp; linksForTask.size() &gt; <span class=\"number\">0</span>)&#123;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (IdentityLink identityLink : linksForTask) &#123;</span><br><span class=\"line\">            System.out.println(identityLink.getUserId());</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ç„¶åæˆ‘ä»¬å°±å¯ä»¥åœ¨ä¸Šé¢çš„åŸºç¡€ä¸Šæ¥åš<code>æ‹¾å–</code>çš„æ“ä½œäº†ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * æ ¹æ®ç™»å½•çš„ç”¨æˆ·æŸ¥è¯¢å¯¹åº”çš„å¯ä»¥æ‹¾å–çš„ä»»åŠ¡</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">claimTaskCandidate</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    List&lt;Task&gt; list = taskService.createTaskQuery()</span><br><span class=\"line\">            .processInstanceId(<span class=\"string\">&quot;023da2e6-362f-11ed-8d8a-c03c59ad2248&quot;</span>)</span><br><span class=\"line\">            .taskCandidateUser(<span class=\"string\">&quot;demo&quot;</span>)</span><br><span class=\"line\">            .list();</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (Task task : list) &#123;</span><br><span class=\"line\">        taskService.claim(task.getId(),<span class=\"string\">&quot;demo&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>è¿›å…¥åˆ°è¡¨ç»“æ„ä¸­ä½ ä¼šå‘ç°è¿™æ¡Taskè®°å½•çš„å¤„ç†äººè¢«æŒ‡æ´¾ä¸ºäº†<code>demo</code>,è€Œä¸”åœ¨Webç«¯å¯ä»¥çœ‹åˆ°å¯ä»¥å®¡æ‰¹äº†ã€‚</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220917103743685.png\"\n                      alt=\"image-20220917103743685\"\n                ></p>\n<p>æ³¨æ„ï¼šè¿™æ—¶<code>demo</code>æ‹¾å–äº†ä»»åŠ¡ä¹‹åå…¶ä»–çš„ç”¨æˆ·å°±ä¸èƒ½å†æ‹¾å–äº†ï¼ŒæŸ¥è¯¢çš„æ—¶å€™ä¹ŸæŸ¥è¯¢ä¸åˆ°äº†ã€‚</p>\n<h3 id=\"ä»»åŠ¡çš„å½’è¿˜\"><a href=\"#ä»»åŠ¡çš„å½’è¿˜\" class=\"headerlink\" title=\"ä»»åŠ¡çš„å½’è¿˜\"></a>ä»»åŠ¡çš„å½’è¿˜</h3><p>æ‹¾å–ä»»åŠ¡åå¦‚æœä¸æƒ³æ“ä½œé‚£ä¹ˆå¯ä»¥å½’è¿˜ä»»åŠ¡ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * é€€è¿˜ä»»åŠ¡</span></span><br><span class=\"line\"><span class=\"comment\"> *    ä¸€ä¸ªå€™é€‰äººæ‹¾å–äº†è¿™ä¸ªä»»åŠ¡ä¹‹åå…¶ä»–çš„ç”¨æˆ·å°±æ²¡æœ‰åŠæ³•æ‹¾å–è¿™ä¸ªä»»åŠ¡äº†</span></span><br><span class=\"line\"><span class=\"comment\"> *    æ‰€ä»¥å¦‚æœä¸€ä¸ªç”¨æˆ·æ‹¾å–äº†ä»»åŠ¡ä¹‹ååˆä¸æƒ³å¤„ç†äº†ï¼Œé‚£ä¹ˆå¯ä»¥é€€è¿˜</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">unclaimTaskCandidate</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"type\">Task</span> <span class=\"variable\">task</span> <span class=\"operator\">=</span> taskService.createTaskQuery()</span><br><span class=\"line\">            .processInstanceId(<span class=\"string\">&quot;023da2e6-362f-11ed-8d8a-c03c59ad2248&quot;</span>)</span><br><span class=\"line\">            .taskAssignee(<span class=\"string\">&quot;demo&quot;</span>)</span><br><span class=\"line\">            .singleResult();</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(task != <span class=\"literal\">null</span>)&#123;</span><br><span class=\"line\">        <span class=\"comment\">// å½’è¿˜ç›¸å…³çš„ä»»åŠ¡  ç½®ç©ºå³å¯</span></span><br><span class=\"line\">        taskService.setAssignee(task.getId(),<span class=\"literal\">null</span>);</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;å½’è¿˜æ‹¾å–æˆåŠŸ&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"ä»»åŠ¡çš„äº¤æ¥\"><a href=\"#ä»»åŠ¡çš„äº¤æ¥\" class=\"headerlink\" title=\"ä»»åŠ¡çš„äº¤æ¥\"></a>ä»»åŠ¡çš„äº¤æ¥</h3><p>æ‹¾å–ä»»åŠ¡åå¦‚æœä¸æƒ³æ“ä½œä¹Ÿä¸æƒ³å½’è¿˜å¯ä»¥ç›´æ¥äº¤æ¥ç»™å¦å¤–ä¸€ä¸ªäººæ¥å¤„ç†.</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">taskCandidate</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"type\">Task</span> <span class=\"variable\">task</span> <span class=\"operator\">=</span> taskService.createTaskQuery()</span><br><span class=\"line\">            .processInstanceId(<span class=\"string\">&quot;023da2e6-362f-11ed-8d8a-c03c59ad2248&quot;</span>)</span><br><span class=\"line\">            .taskAssignee(<span class=\"string\">&quot;demo&quot;</span>)</span><br><span class=\"line\">            .singleResult();</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(task != <span class=\"literal\">null</span>)&#123;</span><br><span class=\"line\">        <span class=\"comment\">// ä»»åŠ¡äº¤æ¥</span></span><br><span class=\"line\">        taskService.setAssignee(task.getId(),<span class=\"string\">&quot;zhang&quot;</span>);</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;ä»»åŠ¡äº¤æ¥ç»™äº†zhang&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"ä»»åŠ¡å®Œæˆ\"><a href=\"#ä»»åŠ¡å®Œæˆ\" class=\"headerlink\" title=\"ä»»åŠ¡å®Œæˆ\"></a>ä»»åŠ¡å®Œæˆ</h3><p>æ­£å¸¸çš„ä»»åŠ¡å¤„ç†</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">completeTask1</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">taskId</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;023f0279-362f-11ed-8d8a-c03c59ad2248&quot;</span>;</span><br><span class=\"line\">    <span class=\"comment\">// ä½†æ˜¯ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„ å¤„ç†äººæ˜¯å€¼è¡¨è¾¾å¼ æˆ‘ä»¬éœ€è¦èµ‹å€¼</span></span><br><span class=\"line\">    Map&lt;String,Object&gt; map = <span class=\"keyword\">new</span> <span class=\"title class_\">HashMap</span>&lt;&gt;();</span><br><span class=\"line\">    map.put(<span class=\"string\">&quot;user1&quot;</span>,<span class=\"string\">&quot;demo&quot;</span>);</span><br><span class=\"line\">    map.put(<span class=\"string\">&quot;user2&quot;</span>,<span class=\"string\">&quot;zhangsan&quot;</span>);</span><br><span class=\"line\">    map.put(<span class=\"string\">&quot;user3&quot;</span>,<span class=\"string\">&quot;wangwu&quot;</span>);</span><br><span class=\"line\">    taskService.complete(taskId,map);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>å½“ç„¶æˆ‘ä»¬é€šè¿‡å€¼è¡¨è¾¾å¼æ¥å¤„ç†çš„å€™é€‰äººæ“ä½œã€‚åœ¨<code>act_ru_identitylink</code>è¡¨ä¸­åŒæ ·æœ‰ç›¸å…³è®°å½•ï¼Œæˆ‘ä»¬éœ€è¦ç»“åˆæµç¨‹å˜é‡è¡¨æ¥å¤„ç†äº†ã€‚ä½†æ˜¯å¤„ç†çš„APIå’Œä¸Šé¢æ˜¯ä¸€æ ·çš„ã€‚</p>\n<h2 id=\"å€™é€‰äººç»„\"><a href=\"#å€™é€‰äººç»„\" class=\"headerlink\" title=\"å€™é€‰äººç»„\"></a>å€™é€‰äººç»„</h2><p>å½“å€™é€‰äººå¾ˆå¤šçš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥åˆ†ç»„æ¥å¤„ç†ã€‚å…ˆåˆ›å»ºç»„ï¼Œç„¶åæŠŠç”¨æˆ·åˆ†é…åˆ°è¿™ä¸ªç»„ä¸­ã€‚</p>\n<h3 id=\"ç®¡ç†ç”¨æˆ·å’Œç»„\"><a href=\"#ç®¡ç†ç”¨æˆ·å’Œç»„\" class=\"headerlink\" title=\"ç®¡ç†ç”¨æˆ·å’Œç»„\"></a>ç®¡ç†ç”¨æˆ·å’Œç»„</h3><h4 id=\"ç”¨æˆ·ç®¡ç†\"><a href=\"#ç”¨æˆ·ç®¡ç†\" class=\"headerlink\" title=\"ç”¨æˆ·ç®¡ç†\"></a>ç”¨æˆ·ç®¡ç†</h4><p>æˆ‘ä»¬éœ€è¦å…ˆå•ç‹¬ç»´æŠ¤ç”¨æˆ·ä¿¡æ¯ã€‚åå°å¯¹åº”çš„è¡¨ç»“æ„æ˜¯<code>ACT_ID_USER</code>.</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * ç»´æŠ¤ç”¨æˆ·</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">createUser</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"type\">User</span> <span class=\"variable\">user</span> <span class=\"operator\">=</span> identityService.newUser(<span class=\"string\">&quot;zhang&quot;</span>);</span><br><span class=\"line\">    user.setFirstName(<span class=\"string\">&quot;å¼ &quot;</span>);</span><br><span class=\"line\">    user.setLastName(<span class=\"string\">&quot;ä¸‰&quot;</span>);</span><br><span class=\"line\">    user.setEmail(<span class=\"string\">&quot;zhangsan@qq.com&quot;</span>);</span><br><span class=\"line\">    user.setPassword(<span class=\"string\">&quot;123456&quot;</span>);</span><br><span class=\"line\">    identityService.saveUser(user);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>è¦æ›´æ–°æˆ–è€…åˆ é™¤ç”¨æˆ·çš„è¯ã€‚é€šè¿‡ç›¸å…³APIå³å¯å®Œæˆ</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">updateUser</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"type\">User</span> <span class=\"variable\">user</span> <span class=\"operator\">=</span> identityService.createUserQuery().userId(<span class=\"string\">&quot;zhang&quot;</span>).singleResult();</span><br><span class=\"line\">    user.setPassword(<span class=\"string\">&quot;123&quot;</span>);</span><br><span class=\"line\">    identityService.saveUser(user);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">deleteUser</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    identityService.deleteUser(<span class=\"string\">&quot;zhang&quot;</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<h4 id=\"Groupç®¡ç†\"><a href=\"#Groupç®¡ç†\" class=\"headerlink\" title=\"Groupç®¡ç†\"></a>Groupç®¡ç†</h4><p>ç»´æŠ¤å¯¹åº”çš„Groupä¿¡æ¯ï¼Œåå°å¯¹åº”çš„è¡¨ç»“æ„æ˜¯<code>ACT_ID_GROUP</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * åˆ›å»ºç”¨æˆ·ç»„</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">createGroup</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// åˆ›å»ºGroupå¯¹è±¡å¹¶æŒ‡å®šç›¸å…³çš„ä¿¡æ¯</span></span><br><span class=\"line\">    <span class=\"type\">Group</span> <span class=\"variable\">group</span> <span class=\"operator\">=</span> identityService.newGroup(<span class=\"string\">&quot;group1&quot;</span>);</span><br><span class=\"line\">    group.setName(<span class=\"string\">&quot;å¼€å‘éƒ¨&quot;</span>);</span><br><span class=\"line\">    group.setType(<span class=\"string\">&quot;type1&quot;</span>);</span><br><span class=\"line\">    <span class=\"comment\">// åˆ›å»ºGroupå¯¹åº”çš„è¡¨ç»“æ„æ•°æ®</span></span><br><span class=\"line\">    identityService.saveGroup(group);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>æ›´æ–°å’Œåˆ é™¤å‚è€ƒä¸Šé¢çš„<code>ç”¨æˆ·ç®¡ç†</code></p>\n<h4 id=\"ç”¨æˆ·åˆ†é…ç»„\"><a href=\"#ç”¨æˆ·åˆ†é…ç»„\" class=\"headerlink\" title=\"ç”¨æˆ·åˆ†é…ç»„\"></a>ç”¨æˆ·åˆ†é…ç»„</h4><p>ç”¨æˆ·å’Œç»„æ˜¯ä¸€ä¸ªå¤šå¯¹å¤šçš„å…³è”å…³è”ï¼Œæˆ‘ä»¬éœ€è¦åšç›¸å…³çš„åˆ†é…ï¼Œåå°å¯¹åº”çš„è¡¨ç»“æ„æ˜¯<code>ACT_ID_MEMBERSHIP</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * å°†ç”¨æˆ·åˆ†é…ç»™å¯¹åº”çš„Group</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">userGroup</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// æ ¹æ®ç»„çš„ç¼–å·æ‰¾åˆ°å¯¹åº”çš„Groupå¯¹è±¡</span></span><br><span class=\"line\">    <span class=\"type\">Group</span> <span class=\"variable\">group</span> <span class=\"operator\">=</span> identityService.createGroupQuery().groupId(<span class=\"string\">&quot;group1&quot;</span>).singleResult();</span><br><span class=\"line\">    <span class=\"comment\">// åˆ›å»º MemberShip å»ºç«‹ç”¨æˆ·å’Œç»„çš„å…³ç³»</span></span><br><span class=\"line\">    identityService.createMembership(<span class=\"string\">&quot;zhang&quot;</span>,group.getId());</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"å€™é€‰äººç»„åº”ç”¨\"><a href=\"#å€™é€‰äººç»„åº”ç”¨\" class=\"headerlink\" title=\"å€™é€‰äººç»„åº”ç”¨\"></a>å€™é€‰äººç»„åº”ç”¨</h3><p>ææ¸…æ¥šäº†ç”¨æˆ·å’Œç”¨æˆ·ç»„çš„å…³ç³»åæˆ‘ä»¬å°±å¯ä»¥æ¥ä½¿ç”¨å€™é€‰äººç»„çš„åº”ç”¨äº†</p>\n<h4 id=\"åˆ›å»ºæµç¨‹å›¾\"><a href=\"#åˆ›å»ºæµç¨‹å›¾\" class=\"headerlink\" title=\"åˆ›å»ºæµç¨‹å›¾\"></a>åˆ›å»ºæµç¨‹å›¾</h4><p>åˆ›å»ºä¸€ä¸ªç®€å•çš„è¯·å‡æµç¨‹ï¼Œå¤„ç†äººé€šè¿‡å€™é€‰äººç»„çš„æ–¹å¼æ¥å¤„ç†ã€‚</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220917201151251.png\"\n                      alt=\"image-20220917201151251\"\n                ></p>\n<h4 id=\"æµç¨‹çš„éƒ¨ç½²è¿è¡Œ\"><a href=\"#æµç¨‹çš„éƒ¨ç½²è¿è¡Œ\" class=\"headerlink\" title=\"æµç¨‹çš„éƒ¨ç½²è¿è¡Œ\"></a>æµç¨‹çš„éƒ¨ç½²è¿è¡Œ</h4><p>ç„¶åæˆ‘ä»¬æŠŠæµç¨‹éƒ¨ç½²å’Œè¿è¡Œã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">    * å®Œæˆæµç¨‹çš„éƒ¨ç½²æ“ä½œ</span></span><br><span class=\"line\"><span class=\"comment\">    */</span></span><br><span class=\"line\">   <span class=\"meta\">@Test</span></span><br><span class=\"line\">   <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">deploy</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">       <span class=\"type\">Deployment</span> <span class=\"variable\">deploy</span> <span class=\"operator\">=</span> repositoryService.createDeployment()</span><br><span class=\"line\">               .name(<span class=\"string\">&quot;å€™é€‰äººç»„æ¡ˆä¾‹&quot;</span>)</span><br><span class=\"line\">               .addClasspathResource(<span class=\"string\">&quot;flow/å€™é€‰äººç»„.bpmn&quot;</span>)</span><br><span class=\"line\">               .deploy();</span><br><span class=\"line\">       System.out.println(<span class=\"string\">&quot;deploy.getId() = &quot;</span> + deploy.getId());</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">    * å¯åŠ¨æµç¨‹å®ä¾‹</span></span><br><span class=\"line\"><span class=\"comment\">    */</span></span><br><span class=\"line\">   <span class=\"meta\">@Test</span></span><br><span class=\"line\">   <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">startFlow</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">       <span class=\"type\">String</span> <span class=\"variable\">processInstanceId</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;Process_1gvo8so:1:3e253edb-3682-11ed-a1ff-c03c59ad2248&quot;</span>;</span><br><span class=\"line\">       runtimeService.startProcessInstanceById(processInstanceId);</span><br><span class=\"line\">   &#125;</span><br></pre></td></tr></table></figure>\n\n<p>éƒ¨ç½²æˆåŠŸåæˆ‘ä»¬å¯ä»¥åœ¨<code>act_ru_identitylink</code>ä¸­çœ‹åˆ°å¯¹åº”çš„è®°å½•ã€‚</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220917201747129.png\"\n                      alt=\"image-20220917201747129\"\n                ></p>\n<h4 id=\"ä»»åŠ¡çš„æ‹¾å–å’Œå®Œæˆ\"><a href=\"#ä»»åŠ¡çš„æ‹¾å–å’Œå®Œæˆ\" class=\"headerlink\" title=\"ä»»åŠ¡çš„æ‹¾å–å’Œå®Œæˆ\"></a>ä»»åŠ¡çš„æ‹¾å–å’Œå®Œæˆ</h4><p>ç„¶åå®Œæˆä»»åŠ¡çš„æŸ¥è¯¢æ‹¾å–å’Œå¤„ç†æ“ä½œã€‚é€»è¾‘æ˜¯æ ¹æ®å½“å‰çš„ç™»å½•<code>ç”¨æˆ·</code>æ‰¾åˆ°å¯¹åº”çš„<code>ç»„</code>ï¼Œç„¶åæ ¹æ®<code>ç»„</code>æ‰¾åˆ°å¯¹åº”çš„ä»»åŠ¡ä¿¡æ¯ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  * æ ¹æ®ç™»å½•çš„ç”¨æˆ·æŸ¥è¯¢å¯¹åº”çš„å¯ä»¥æ‹¾å–çš„ä»»åŠ¡</span></span><br><span class=\"line\"><span class=\"comment\">  *</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\"> <span class=\"meta\">@Test</span></span><br><span class=\"line\"> <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">queryTaskCandidateGroup</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">     <span class=\"comment\">// å½“å‰ç”¨æˆ·æ‰€åœ¨çš„ç»„</span></span><br><span class=\"line\">     <span class=\"type\">Group</span> <span class=\"variable\">group</span> <span class=\"operator\">=</span> identityService.createGroupQuery().groupMember(<span class=\"string\">&quot;zhang&quot;</span>).singleResult();</span><br><span class=\"line\">     List&lt;Task&gt; list = taskService.createTaskQuery()</span><br><span class=\"line\">             .processInstanceId(<span class=\"string\">&quot;711d5726-3682-11ed-8b9b-c03c59ad2248&quot;</span>)</span><br><span class=\"line\">             .taskCandidateGroup(group.getId())</span><br><span class=\"line\">             .list();</span><br><span class=\"line\">     <span class=\"keyword\">for</span> (Task task : list) &#123;</span><br><span class=\"line\">         System.out.println(<span class=\"string\">&quot;task.getId() = &quot;</span> + task.getId());</span><br><span class=\"line\">         System.out.println(<span class=\"string\">&quot;task.getName() = &quot;</span> + task.getName());</span><br><span class=\"line\">     &#125;</span><br><span class=\"line\"> &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"> <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  * æ‹¾å–ä»»åŠ¡</span></span><br><span class=\"line\"><span class=\"comment\">  *    ä¸€ä¸ªå€™é€‰äººæ‹¾å–äº†è¿™ä¸ªä»»åŠ¡ä¹‹åå…¶ä»–çš„ç”¨æˆ·å°±æ²¡æœ‰åŠæ³•æ‹¾å–è¿™ä¸ªä»»åŠ¡äº†</span></span><br><span class=\"line\"><span class=\"comment\">  *    æ‰€ä»¥å¦‚æœä¸€ä¸ªç”¨æˆ·æ‹¾å–äº†ä»»åŠ¡ä¹‹ååˆä¸æƒ³å¤„ç†äº†ï¼Œé‚£ä¹ˆå¯ä»¥é€€è¿˜</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\"> <span class=\"meta\">@Test</span></span><br><span class=\"line\"> <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">claimTaskCandidate1</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">     <span class=\"type\">String</span> <span class=\"variable\">userId</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;zhang&quot;</span>;</span><br><span class=\"line\">     <span class=\"comment\">// å½“å‰ç”¨æˆ·æ‰€åœ¨çš„ç»„</span></span><br><span class=\"line\">     <span class=\"type\">Group</span> <span class=\"variable\">group</span> <span class=\"operator\">=</span> identityService.createGroupQuery().groupMember(userId).singleResult();</span><br><span class=\"line\">     <span class=\"type\">Task</span> <span class=\"variable\">task</span> <span class=\"operator\">=</span> taskService.createTaskQuery()</span><br><span class=\"line\">             .processInstanceId(<span class=\"string\">&quot;711d5726-3682-11ed-8b9b-c03c59ad2248&quot;</span>)</span><br><span class=\"line\">             .taskCandidateGroup(group.getId())</span><br><span class=\"line\">             .singleResult();</span><br><span class=\"line\">     <span class=\"keyword\">if</span>(task != <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">         <span class=\"comment\">// ä»»åŠ¡æ‹¾å–</span></span><br><span class=\"line\">         taskService.claim(task.getId(),userId);</span><br><span class=\"line\">         System.out.println(<span class=\"string\">&quot;ä»»åŠ¡æ‹¾å–æˆåŠŸ&quot;</span>);</span><br><span class=\"line\">     &#125;</span><br><span class=\"line\"> &#125;</span><br></pre></td></tr></table></figure>\n\n<p>æ‹¾å–åçš„æ“ä½œå’Œå‰é¢æ˜¯ä¸€æ ·çš„ï¼Œå°±æ²¡å¿…è¦èµ˜è¿°ã€‚å½“ç„¶æˆ‘ä»¬åœ¨å®šä¹‰æµç¨‹çš„æ—¶å€™ä¹Ÿå¯ä»¥é€šè¿‡å€¼è¡¨è¾¾å¼æ¥å¤„ç†ï¼Œæˆ‘ä»¬éœ€è¦æ³¨æ„èµ‹å€¼å³å¯ã€‚</p>\n<h2 id=\"ç§Ÿæˆ·\"><a href=\"#ç§Ÿæˆ·\" class=\"headerlink\" title=\"ç§Ÿæˆ·\"></a>ç§Ÿæˆ·</h2><p><em>å¤šç§Ÿæˆ·</em> æ˜¯æŒ‡ä¸€ä¸ªå•ä¸€çš„Camundaåº”ç”¨éœ€è¦ä¸ºå¤šä¸ªçš„ç§Ÿæˆ·æœåŠ¡çš„æƒ…å†µã€‚å¯¹äºæ¯ä¸ªç§Ÿæˆ·æ¥è¯´ï¼Œåº”è¯¥æœ‰æŸäº›éš”ç¦»çš„ä¿è¯ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªç§Ÿæˆ·çš„æµç¨‹å®ä¾‹ä¸åº”å¹²æ‰°å¦ä¸€ä¸ªç§Ÿæˆ·çš„æµç¨‹å®ä¾‹ã€‚</p>\n<p>å¤šç§Ÿæˆ·å¯ä»¥é€šè¿‡ä¸¤ç§ä¸åŒçš„æ–¹å¼å®ç°ã€‚ä¸€ç§æ˜¯ä½¿ç”¨æ¯ä¸ªç§Ÿæˆ·ä¸€ä¸ªæµç¨‹å¼•æ“ã€‚å¦ä¸€ç§æ–¹å¼æ˜¯åªä½¿ç”¨ä¸€ä¸ªæµç¨‹å¼•æ“ï¼Œå¹¶å°†æ•°æ®ä¸ç§Ÿæˆ·æ ‡è¯†ç¬¦ç›¸å…³è”ã€‚è¿™ä¸¤ç§æ–¹å¼åœ¨æ•°æ®éš”ç¦»ç¨‹åº¦ã€ç»´æŠ¤å·¥ä½œå’Œå¯æ‰©å±•æ€§æ–¹é¢å„æœ‰ä¸åŒã€‚ä¸¤ç§æ–¹å¼çš„ç»„åˆä¹Ÿæ˜¯å¯èƒ½çš„ã€‚</p>\n<p>å¤šç§Ÿæˆ·å¯ä»¥ä½¿ç”¨ç§Ÿæˆ·æ ‡è¯†ç¬¦ï¼ˆå³tenant-idsï¼‰çš„æµç¨‹å¼•æ“æ¥å®ç°ã€‚æ‰€æœ‰ç§Ÿæˆ·çš„æ•°æ®éƒ½å­˜å‚¨åœ¨ä¸€ä¸ªè¡¨ä¸­ï¼ˆåŒä¸€æ•°æ®åº“å’Œè¡¨ç»“æ„ï¼‰ã€‚é€šè¿‡å­˜å‚¨åœ¨åˆ—ä¸­çš„ç§Ÿæˆ·æ ‡è¯†ç¬¦æ¥æä¾›éš”ç¦»ã€‚</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220917203832905.png\"\n                      alt=\"image-20220917203832905\"\n                ></p>\n<h3 id=\"ç§Ÿæˆ·ç®¡ç†\"><a href=\"#ç§Ÿæˆ·ç®¡ç†\" class=\"headerlink\" title=\"ç§Ÿæˆ·ç®¡ç†\"></a>ç§Ÿæˆ·ç®¡ç†</h3><p>ç§Ÿæˆ·å¯¹åº”äº<code>act_id.tenant</code>è¡¨ç»“æ„ä¸­çš„æ•°æ®ã€‚æˆ‘ä»¬å¯ä»¥å…ˆæ¥ç»´æŠ¤ç§Ÿæˆ·çš„ç›¸å…³ä¿¡æ¯ã€‚åˆ›å»º<code>é•¿æ²™åˆ†å…¬å¸</code>çš„ç§Ÿæˆ·ä¿¡æ¯</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * åˆ›å»ºç§Ÿæˆ·</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">createTenant</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"type\">Tenant</span> <span class=\"variable\">tenant</span> <span class=\"operator\">=</span> identityService.newTenant(<span class=\"string\">&quot;cs&quot;</span>);</span><br><span class=\"line\">    tenant.setName(<span class=\"string\">&quot;é•¿æ²™åˆ†å…¬å¸&quot;</span>);</span><br><span class=\"line\">    identityService.saveTenant(tenant);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220918220534584.png\"\n                      alt=\"image-20220918220534584\"\n                ></p>\n<p>å½“ç„¶å‚è€ƒå‰é¢çš„åˆ é™¤å’Œæ›´æ–°æ“ä½œä¹Ÿå¯ä»¥éå¸¸è½»æ¾çš„å®Œæˆ<code>ç§Ÿæˆ·</code>ç›¸å…³ä¿¡æ¯çš„å¤„ç†ã€‚ç„¶åæˆ‘ä»¬æ¥çœ‹ä¸‹ç§Ÿæˆ·å’Œç”¨æˆ·å’Œç»„çš„å…³ç³»ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * å»ºç«‹ ç§Ÿæˆ· å’Œ ç»„çš„å…³ç³»</span></span><br><span class=\"line\"><span class=\"comment\"> * å½“ç„¶ä¹Ÿå¯ä»¥å»ºç«‹ ç§Ÿæˆ·å’Œç”¨æˆ·çš„å…³ç³»ã€‚åªæ˜¯è¿™ç§æ¯”è¾ƒå°‘ç”¨</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">createTenantAndGroupShip</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    identityService.createTenantGroupMembership(<span class=\"string\">&quot;cs&quot;</span>,<span class=\"string\">&quot;group1&quot;</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220918220924950.png\"\n                      alt=\"image-20220918220924950\"\n                ></p>\n<h3 id=\"éƒ¨ç½²æ“ä½œ\"><a href=\"#éƒ¨ç½²æ“ä½œ\" class=\"headerlink\" title=\"éƒ¨ç½²æ“ä½œ\"></a>éƒ¨ç½²æ“ä½œ</h3><p>æˆ‘ä»¬åœ¨éƒ¨ç½²æµç¨‹çš„æ—¶å€™å¯ä»¥æŒ‡å®šå¯¹åº”çš„ç§Ÿæˆ·ç¼–å·ã€‚å¦‚æœä¸æŒ‡å®šç§Ÿæˆ·ç¼–å·ï¼Œè¯´æ˜è¯¥æµç¨‹æ˜¯å±äºæ‰€æœ‰ç§Ÿæˆ·çš„ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * å®Œæˆæµç¨‹çš„éƒ¨ç½²æ“ä½œ</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">deploy</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"type\">Deployment</span> <span class=\"variable\">deploy</span> <span class=\"operator\">=</span> repositoryService.createDeployment()</span><br><span class=\"line\">            .name(<span class=\"string\">&quot;å€™é€‰äººæ¡ˆä¾‹-ç§Ÿæˆ·&quot;</span>)</span><br><span class=\"line\">            .tenantId(<span class=\"string\">&quot;tenant1&quot;</span>)</span><br><span class=\"line\">            .addClasspathResource(<span class=\"string\">&quot;flow/å€™é€‰äººæ¡ˆä¾‹.bpmn&quot;</span>)</span><br><span class=\"line\">            .deploy();</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;deploy.getId() = &quot;</span> + deploy.getId());</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n<h3 id=\"æŸ¥çœ‹éƒ¨ç½²æµç¨‹\"><a href=\"#æŸ¥çœ‹éƒ¨ç½²æµç¨‹\" class=\"headerlink\" title=\"æŸ¥çœ‹éƒ¨ç½²æµç¨‹\"></a>æŸ¥çœ‹éƒ¨ç½²æµç¨‹</h3><p>è®¾ç½®äº†ç§Ÿæˆ·ç¼–å·åï¼Œæˆ‘ä»¬è¦åšç›¸å…³çš„æŸ¥è¯¢ï¼Œå¯ä»¥é€šè¿‡å¦‚ä¸‹çš„APIæ¥å®ç°</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * åŸºäºç§Ÿæˆ· æŸ¥è¯¢ç›¸å…³çš„éƒ¨ç½²æµç¨‹</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">getByTenantId</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    List&lt;Deployment&gt; list = repositoryService.createDeploymentQuery()</span><br><span class=\"line\">            .tenantIdIn(<span class=\"string\">&quot;cs&quot;</span>)</span><br><span class=\"line\">            .list();</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (Deployment deployment : list) &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;deployment.getId() = &quot;</span> + deployment.getId());</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;deployment.getName() = &quot;</span> + deployment.getName());</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;------------&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>é€šè¿‡è°ƒç”¨<code>withoutTenantId()</code>æ¥æŸ¥è¯¢ä¸å±äºä»»ä½•ç§Ÿæˆ·çš„éƒ¨ç½²ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">getByWithoutTenantId</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">        List&lt;Deployment&gt; list = repositoryService.createDeploymentQuery()</span><br><span class=\"line\">                .withoutTenantId() <span class=\"comment\">// æŸ¥è¯¢å‡ºæ‰€æœ‰ä¸å±äºä»»ä½•tenantIdçš„è®°å½•</span></span><br><span class=\"line\">                .list();</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (Deployment deployment : list) &#123;</span><br><span class=\"line\">            System.out.println(<span class=\"string\">&quot;deployment.getId() = &quot;</span> + deployment.getId());</span><br><span class=\"line\">            System.out.println(<span class=\"string\">&quot;deployment.getName() = &quot;</span> + deployment.getName());</span><br><span class=\"line\">            System.out.println(<span class=\"string\">&quot;------------&quot;</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<p>ä¹Ÿå¯ä»¥é€šè¿‡è°ƒç”¨<code>includeDeploymentsWithoutTenantId()</code>æ¥æŸ¥è¯¢å±äºç‰¹å®šç§Ÿæˆ·æˆ–ä¸å±äºç§Ÿæˆ·çš„éƒ¨ç½²ã€‚</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@Test</span><br><span class=\"line\">public void getByIncludTenantId()&#123;</span><br><span class=\"line\">    List&lt;Deployment&gt; list = repositoryService.createDeploymentQuery()</span><br><span class=\"line\">            .tenantIdIn(&quot;cs&quot;)</span><br><span class=\"line\">            .includeDeploymentsWithoutTenantId() // æŸ¥è¯¢å‡º tenant1 å’Œ ä¸å±äº ç§Ÿæˆ·çš„è®°å½•</span><br><span class=\"line\">            .list();</span><br><span class=\"line\">    for (Deployment deployment : list) &#123;</span><br><span class=\"line\">        System.out.println(&quot;deployment.getId() = &quot; + deployment.getId());</span><br><span class=\"line\">        System.out.println(&quot;deployment.getName() = &quot; + deployment.getName());</span><br><span class=\"line\">        System.out.println(&quot;------------&quot;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ä¸ â€œéƒ¨ç½²æŸ¥è¯¢â€ ç±»ä¼¼ï¼Œå®šä¹‰æŸ¥è¯¢å…è®¸é€šè¿‡ä¸€ä¸ªæˆ–å¤šä¸ªç§Ÿæˆ·å’Œä¸å±äºä»»ä½•ç§Ÿæˆ·çš„å®šä¹‰è¿›è¡Œè¿‡æ»¤ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">List&lt;ProcessDefinition&gt; processDefinitions = repositoryService</span><br><span class=\"line\">  .createProcessDefinitionQuery()</span><br><span class=\"line\">  .tenantIdIn(<span class=\"string\">&quot;cs&quot;</span>)</span><br><span class=\"line\">  .includeProcessDefinitionsWithoutTenantId();</span><br><span class=\"line\">  .list();</span><br></pre></td></tr></table></figure>\n\n\n\n\n\n<h3 id=\"å¯åŠ¨æµç¨‹å®ä¾‹\"><a href=\"#å¯åŠ¨æµç¨‹å®ä¾‹\" class=\"headerlink\" title=\"å¯åŠ¨æµç¨‹å®ä¾‹\"></a>å¯åŠ¨æµç¨‹å®ä¾‹</h3><p>é€šè¿‡keyåˆ›å»ºä¸€ä¸ªä¸ºå¤šç§Ÿæˆ·éƒ¨ç½²çš„æµç¨‹å®šä¹‰çš„å®ä¾‹ï¼Œå¿…é¡»åœ¨<code>ProcessInstantiationBuilder</code> ä¸­ä¼ é€’ç§Ÿæˆ·æ ‡è¯†ç¬¦ ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * ç§Ÿæˆ· å¯åŠ¨ä¸€ä¸ªæµç¨‹å®ä¾‹</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">startFlow</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">processKey</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;Process_05vjqic&quot;</span>;</span><br><span class=\"line\">    <span class=\"type\">ProcessInstance</span> <span class=\"variable\">processInstance</span> <span class=\"operator\">=</span> runtimeService</span><br><span class=\"line\">            .createProcessInstanceByKey(processKey)</span><br><span class=\"line\">            .processDefinitionTenantId(<span class=\"string\">&quot;cs&quot;</span>)</span><br><span class=\"line\">            .execute();</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;processInstance.getId() = &quot;</span> + processInstance.getId());</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">startFlow1</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">processId</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;Process_05vjqic:1:a6b23794-3767-11ed-a4df-c03c59ad2248&quot;</span>;</span><br><span class=\"line\">    <span class=\"type\">ProcessInstance</span> <span class=\"variable\">processInstance</span> <span class=\"operator\">=</span> runtimeService</span><br><span class=\"line\">            .createProcessInstanceById(processId)</span><br><span class=\"line\">            .execute();</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;processInstance.getId() = &quot;</span> + processInstance.getId());</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>å¯åŠ¨åæµç¨‹åï¼Œåœ¨åˆ›å»ºçš„Taskè®°å½•ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°å¯¹åº”çš„<code>ç§Ÿæˆ·</code>ä¿¡æ¯</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220918234504559.png\"\n                      alt=\"image-20220918234504559\"\n                ></p>\n<p>å› ä¸ºæˆ‘ä»¬åœ¨æµç¨‹è®¾è®¡çš„æ—¶å€™å°±æŒ‡å®šäº†ç¬¬ä¸€ä¸ªèŠ‚ç‚¹çš„å€™é€‰äººæ˜¯<code>group1</code>,æ‰€ä»¥åœ¨<code>act_ru_identitylink</code>è¡¨ä¸­å¯ä»¥çœ‹åˆ°ç›¸å…³çš„è®°å½•ã€‚</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220918234618891.png\"\n                      alt=\"image-20220918234618891\"\n                ></p>\n<h3 id=\"ä»»åŠ¡æ‹¾å–\"><a href=\"#ä»»åŠ¡æ‹¾å–\" class=\"headerlink\" title=\"ä»»åŠ¡æ‹¾å–\"></a>ä»»åŠ¡æ‹¾å–</h3><p>æ¥ä¸‹æ¥å°±å¯ä»¥å¯¹ä»»åŠ¡åš<code>æ‹¾å–</code>çš„æ“ä½œäº†</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  * æ ¹æ®å½“å‰ç™»å½•ç”¨æˆ· æŸ¥è¯¢åˆ°éœ€è¦æ‹¾å–çš„ä»»åŠ¡</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\"> <span class=\"meta\">@Test</span></span><br><span class=\"line\"> <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">claimTask</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">     <span class=\"comment\">// æ ¹æ®ç™»å½•ç”¨æˆ·æŸ¥è¯¢åˆ°å¯¹åº”çš„Group</span></span><br><span class=\"line\">     List&lt;Group&gt; groups = identityService.createGroupQuery().groupMember(<span class=\"string\">&quot;demo&quot;</span>).list();</span><br><span class=\"line\">     <span class=\"keyword\">if</span>(groups != <span class=\"literal\">null</span> &amp;&amp; groups.size() &gt; <span class=\"number\">0</span>)&#123;</span><br><span class=\"line\">         <span class=\"keyword\">for</span> (Group group : groups) &#123;</span><br><span class=\"line\">             <span class=\"comment\">// æ ¹æ® group æ‰¾åˆ°å¯¹åº”çš„ ç§Ÿæˆ·</span></span><br><span class=\"line\">             List&lt;Tenant&gt; tenants = identityService.createTenantQuery().groupMember(group.getId()).list();</span><br><span class=\"line\">             List&lt;String&gt; tenantStrings = <span class=\"keyword\">new</span> <span class=\"title class_\">ArrayList</span>&lt;&gt;();</span><br><span class=\"line\">             <span class=\"keyword\">if</span>(tenants != <span class=\"literal\">null</span> &amp;&amp; tenants.size() &gt; <span class=\"number\">0</span>)&#123;</span><br><span class=\"line\">                 tenantStrings = tenants.stream().map((item)-&gt;&#123;</span><br><span class=\"line\">                     <span class=\"keyword\">return</span> item.getId();</span><br><span class=\"line\">                 &#125;).collect(Collectors.toList());</span><br><span class=\"line\"></span><br><span class=\"line\">                 String[] ss = <span class=\"keyword\">new</span> <span class=\"title class_\">String</span>[tenantStrings.size()];</span><br><span class=\"line\">                 tenantStrings.toArray(ss);</span><br><span class=\"line\">                 List&lt;Task&gt; list = taskService.createTaskQuery()</span><br><span class=\"line\">                         .tenantIdIn(ss)</span><br><span class=\"line\">                         .list();</span><br><span class=\"line\">                 <span class=\"keyword\">if</span>(list != <span class=\"literal\">null</span> &amp;&amp; list.size() &gt; <span class=\"number\">0</span>)&#123;</span><br><span class=\"line\">                     <span class=\"keyword\">for</span> (Task task : list) &#123;</span><br><span class=\"line\">                         System.out.println(<span class=\"string\">&quot;task.getId() = &quot;</span> + task.getId());</span><br><span class=\"line\">                     &#125;</span><br><span class=\"line\">                 &#125;</span><br><span class=\"line\">             &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">         &#125;</span><br><span class=\"line\">     &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"> &#125;</span><br></pre></td></tr></table></figure>\n\n<p>å¯ä»¥æŸ¥è¯¢åˆ°å¯¹åº”çš„æ‹¾å–å°±æ¯”è¾ƒç®€å•äº†</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">claimTask</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// æ ¹æ®ç™»å½•ç”¨æˆ·æŸ¥è¯¢åˆ°å¯¹åº”çš„Group</span></span><br><span class=\"line\">    List&lt;Group&gt; groups = identityService.createGroupQuery().groupMember(<span class=\"string\">&quot;demo&quot;</span>).list();</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(groups != <span class=\"literal\">null</span> &amp;&amp; groups.size() &gt; <span class=\"number\">0</span>)&#123;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (Group group : groups) &#123;</span><br><span class=\"line\">            <span class=\"comment\">// æ ¹æ® group æ‰¾åˆ°å¯¹åº”çš„ ç§Ÿæˆ·</span></span><br><span class=\"line\">            List&lt;Tenant&gt; tenants = identityService.createTenantQuery().groupMember(group.getId()).list();</span><br><span class=\"line\">            List&lt;String&gt; tenantStrings = <span class=\"keyword\">new</span> <span class=\"title class_\">ArrayList</span>&lt;&gt;();</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(tenants != <span class=\"literal\">null</span> &amp;&amp; tenants.size() &gt; <span class=\"number\">0</span>)&#123;</span><br><span class=\"line\">                tenantStrings = tenants.stream().map((item)-&gt;&#123;</span><br><span class=\"line\">                    <span class=\"keyword\">return</span> item.getId();</span><br><span class=\"line\">                &#125;).collect(Collectors.toList());</span><br><span class=\"line\"></span><br><span class=\"line\">                String[] ss = <span class=\"keyword\">new</span> <span class=\"title class_\">String</span>[tenantStrings.size()];</span><br><span class=\"line\">                tenantStrings.toArray(ss);</span><br><span class=\"line\">                List&lt;Task&gt; list = taskService.createTaskQuery()</span><br><span class=\"line\">                        .tenantIdIn(ss)</span><br><span class=\"line\">                        .list();</span><br><span class=\"line\">                <span class=\"keyword\">if</span>(list != <span class=\"literal\">null</span> &amp;&amp; list.size() &gt; <span class=\"number\">0</span>)&#123;</span><br><span class=\"line\">                    <span class=\"keyword\">for</span> (Task task : list) &#123;</span><br><span class=\"line\">                        taskService.claim(task.getId(),<span class=\"string\">&quot;demo&quot;</span>);</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220919003450202.png\"\n                      alt=\"image-20220919003450202\"\n                ></p>\n<p>èƒ½å¤Ÿæ‹¾å–æˆåŠŸï¼Œé‚£ä¹ˆåé¢çš„æ“ä½œå°±æ˜¯ä»»åŠ¡çš„å®¡æ‰¹ã€‚æ¥ä¸‹æ¥çš„æ“ä½œå°±å’Œå‰é¢æ˜¯ä¸€æ ·çš„äº†ã€‚ä¸å†èµ˜è¿°~</p>\n<h1 id=\"ç½‘å…³ç¯‡\"><a href=\"#ç½‘å…³ç¯‡\" class=\"headerlink\" title=\"ç½‘å…³ç¯‡\"></a>ç½‘å…³ç¯‡</h1><p>ç½‘å…³ç”¨æ¥æ§åˆ¶æµç¨‹çš„æµå‘</p>\n<h2 id=\"æ’ä»–ç½‘å…³\"><a href=\"#æ’ä»–ç½‘å…³\" class=\"headerlink\" title=\"æ’ä»–ç½‘å…³\"></a>æ’ä»–ç½‘å…³</h2><p><code>æ’ä»–ç½‘å…³</code>ï¼ˆexclusive gatewayï¼‰ï¼ˆä¹Ÿå«<em>å¼‚æˆ–ç½‘å…³ XOR gateway</em>ï¼Œæˆ–è€…æ›´ä¸“ä¸šçš„ï¼Œ<em>åŸºäºæ•°æ®çš„æ’ä»–ç½‘å…³ exclusive data-based gateway</em>ï¼‰ï¼Œç”¨äºå¯¹æµç¨‹ä¸­çš„<strong>å†³ç­–</strong>å»ºæ¨¡ã€‚å½“æ‰§è¡Œåˆ°è¾¾è¿™ä¸ªç½‘å…³æ—¶ï¼Œä¼šæŒ‰ç…§æ‰€æœ‰å‡ºå£é¡ºåºæµå®šä¹‰çš„é¡ºåºå¯¹å®ƒä»¬è¿›è¡Œè®¡ç®—ã€‚é€‰æ‹©ç¬¬ä¸€ä¸ªæ¡ä»¶è®¡ç®—ä¸ºtrueçš„é¡ºåºæµï¼ˆå½“æ²¡æœ‰è®¾ç½®æ¡ä»¶æ—¶ï¼Œè®¤ä¸ºé¡ºåºæµä¸º<em>true</em>ï¼‰ç»§ç»­æµç¨‹ã€‚</p>\n<p>ç»˜åˆ¶æµç¨‹å›¾ï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220922002931276.png\"\n                      alt=\"image-20220922002931276\"\n                ></p>\n<p>å¯¹åº”çš„XMLæ–‡ä»¶</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220922003022802.png\"\n                      alt=\"image-20220922003022802\"\n                ></p>\n<p>æµç¨‹æ¼”ç¤º</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  * å®Œæˆæµç¨‹çš„éƒ¨ç½²æ“ä½œ</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\"> <span class=\"meta\">@Test</span></span><br><span class=\"line\"> <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">deploy</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">     <span class=\"type\">Deployment</span> <span class=\"variable\">deploy</span> <span class=\"operator\">=</span> repositoryService.createDeployment()</span><br><span class=\"line\">             .name(<span class=\"string\">&quot;æ’ä»–ç½‘å…³&quot;</span>)</span><br><span class=\"line\">             .addClasspathResource(<span class=\"string\">&quot;flow/æ’ä»–ç½‘å…³.bpmn&quot;</span>)</span><br><span class=\"line\">             .deploy();</span><br><span class=\"line\">     System.out.println(<span class=\"string\">&quot;deploy.getId() = &quot;</span> + deploy.getId());</span><br><span class=\"line\"> &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"> <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  * é€šè¿‡æµç¨‹å®šä¹‰Id å¯åŠ¨</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\"> <span class=\"meta\">@Test</span></span><br><span class=\"line\"> <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">startFlow</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">     <span class=\"type\">String</span> <span class=\"variable\">processId</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;Process_0eykic0:1:efadfc92-39c9-11ed-8f13-c03c59ad2248&quot;</span>;</span><br><span class=\"line\">     <span class=\"type\">ProcessInstance</span> <span class=\"variable\">processInstance</span> <span class=\"operator\">=</span> runtimeService.startProcessInstanceById(processId);</span><br><span class=\"line\">     System.out.println(<span class=\"string\">&quot;processInstance.getId() = &quot;</span> + processInstance.getId());</span><br><span class=\"line\"> &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"> <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  * å®Œæˆä»»åŠ¡</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\"> <span class=\"meta\">@Test</span></span><br><span class=\"line\"> <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">completeTask</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">     Map&lt;String,Object&gt; map = <span class=\"keyword\">new</span> <span class=\"title class_\">HashMap</span>&lt;&gt;();</span><br><span class=\"line\">     map.put(<span class=\"string\">&quot;day&quot;</span>,<span class=\"number\">4</span>);</span><br><span class=\"line\">     taskService.complete(<span class=\"string\">&quot;21a323ee-39ca-11ed-8b49-c03c59ad2248&quot;</span>,map);</span><br><span class=\"line\"> &#125;</span><br></pre></td></tr></table></figure>\n\n<p>ä¼ é€’çš„æ˜¯<code>day=4</code>ä¼šèµ°ä¸­é—´çš„è·¯çº¿ã€‚</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220922003119262.png\"\n                      alt=\"image-20220922003119262\"\n                ></p>\n<h2 id=\"å¹¶è¡Œç½‘å…³\"><a href=\"#å¹¶è¡Œç½‘å…³\" class=\"headerlink\" title=\"å¹¶è¡Œç½‘å…³\"></a>å¹¶è¡Œç½‘å…³</h2><p>å¹¶è¡Œç½‘å…³å…è®¸å°†æµç¨‹åˆ†æˆå¤šæ¡åˆ†æ”¯ï¼Œä¹Ÿå¯ä»¥æŠŠå¤šæ¡åˆ†æ”¯æ±‡èšåˆ°ä¸€èµ·ï¼Œå¹¶è¡Œç½‘å…³çš„åŠŸèƒ½æ˜¯åŸºäºè¿›å…¥å’Œå¤–å‡ºé¡ºåºæµçš„ï¼š</p>\n<ul>\n<li><p>forkåˆ†æ”¯ï¼šå¹¶è¡Œåçš„æ‰€æœ‰å¤–å‡ºé¡ºåºæµï¼Œä¸ºæ¯ä¸ªé¡ºåºæµéƒ½åˆ›å»ºä¸€ä¸ªå¹¶å‘åˆ†æ”¯ã€‚</p>\n</li>\n<li><p>joinæ±‡èšï¼š æ‰€æœ‰åˆ°è¾¾å¹¶è¡Œç½‘å…³ï¼Œåœ¨æ­¤ç­‰å¾…çš„è¿›å…¥åˆ†æ”¯ï¼Œ ç›´åˆ°æ‰€æœ‰è¿›å…¥é¡ºåºæµçš„åˆ†æ”¯éƒ½åˆ°è¾¾ä»¥åï¼Œ æµç¨‹å°±ä¼šé€šè¿‡æ±‡èšç½‘å…³ã€‚</p>\n</li>\n</ul>\n<p>æ³¨æ„ï¼Œå¦‚æœåŒä¸€ä¸ªå¹¶è¡Œç½‘å…³æœ‰å¤šä¸ªè¿›å…¥å’Œå¤šä¸ªå¤–å‡ºé¡ºåºæµï¼Œ å®ƒå°±åŒæ—¶å…·æœ‰åˆ†æ”¯å’Œæ±‡èšåŠŸèƒ½ã€‚ è¿™æ—¶ï¼Œç½‘å…³ä¼šå…ˆæ±‡èšæ‰€æœ‰è¿›å…¥çš„é¡ºåºæµï¼Œç„¶åå†åˆ‡åˆ†æˆå¤šä¸ªå¹¶è¡Œåˆ†æ”¯ã€‚</p>\n<p><strong>ä¸å…¶ä»–ç½‘å…³çš„ä¸»è¦åŒºåˆ«æ˜¯ï¼Œå¹¶è¡Œç½‘å…³ä¸ä¼šè§£ææ¡ä»¶ã€‚</strong> <strong>å³ä½¿é¡ºåºæµä¸­å®šä¹‰äº†æ¡ä»¶ï¼Œä¹Ÿä¼šè¢«å¿½ç•¥ã€‚</strong></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220922003323785.png\"\n                      alt=\"image-20220922003323785\"\n                ></p>\n<h2 id=\"åŒ…å«ç½‘å…³\"><a href=\"#åŒ…å«ç½‘å…³\" class=\"headerlink\" title=\"åŒ…å«ç½‘å…³\"></a>åŒ…å«ç½‘å…³</h2><p>åŒ…å«ç½‘å…³å¯ä»¥çœ‹åšæ˜¯æ’ä»–ç½‘å…³å’Œå¹¶è¡Œç½‘å…³çš„ç»“åˆä½“ã€‚ å’Œæ’ä»–ç½‘å…³ä¸€æ ·ï¼Œä½ å¯ä»¥åœ¨å¤–å‡ºé¡ºåºæµä¸Šå®šä¹‰æ¡ä»¶ï¼ŒåŒ…å«ç½‘å…³ä¼šè§£æå®ƒä»¬ã€‚ ä½†æ˜¯ä¸»è¦çš„åŒºåˆ«æ˜¯åŒ…å«ç½‘å…³å¯ä»¥é€‰æ‹©å¤šäºä¸€æ¡é¡ºåºæµï¼Œè¿™å’Œå¹¶è¡Œç½‘å…³ä¸€æ ·ã€‚</p>\n<p>åŒ…å«ç½‘å…³çš„åŠŸèƒ½æ˜¯åŸºäºè¿›å…¥å’Œå¤–å‡ºé¡ºåºæµçš„ï¼š</p>\n<ul>\n<li><p>åˆ†æ”¯ï¼š æ‰€æœ‰å¤–å‡ºé¡ºåºæµçš„æ¡ä»¶éƒ½ä¼šè¢«è§£æï¼Œç»“æœä¸ºtrueçš„é¡ºåºæµä¼šä»¥å¹¶è¡Œæ–¹å¼ç»§ç»­æ‰§è¡Œï¼Œ ä¼šä¸ºæ¯ä¸ªé¡ºåºæµåˆ›å»ºä¸€ä¸ªåˆ†æ”¯ã€‚</p>\n</li>\n<li><p>æ±‡èšï¼šæ‰€æœ‰å¹¶è¡Œåˆ†æ”¯åˆ°è¾¾åŒ…å«ç½‘å…³ï¼Œä¼šè¿›å…¥ç­‰å¾…çŠ¶æ€ï¼Œ ç›´åˆ°æ¯ä¸ªåŒ…å«æµç¨‹tokençš„è¿›å…¥é¡ºåºæµçš„åˆ†æ”¯éƒ½åˆ°è¾¾ã€‚ è¿™æ˜¯ä¸å¹¶è¡Œç½‘å…³çš„æœ€å¤§ä¸åŒã€‚æ¢å¥è¯è¯´ï¼ŒåŒ…å«ç½‘å…³åªä¼šç­‰å¾…è¢«é€‰ä¸­æ‰§è¡Œäº†çš„è¿›å…¥é¡ºåºæµã€‚ åœ¨æ±‡èšä¹‹åï¼Œæµç¨‹ä¼šç©¿è¿‡åŒ…å«ç½‘å…³ç»§ç»­æ‰§è¡Œã€‚</p>\n</li>\n</ul>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220922005111023.png\"\n                      alt=\"image-20220922005111023\"\n                ></p>\n<p>å½“è¾“å…¥<code>day=4</code>æ—¶ï¼Œèµ°äº†ç¬¬äºŒå’Œç¬¬ä¸‰æ¡è·¯çº¿</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220922005536912.png\"\n                      alt=\"image-20220922005536912\"\n                ></p>\n<h1 id=\"äº‹ä»¶ç¯‡\"><a href=\"#äº‹ä»¶ç¯‡\" class=\"headerlink\" title=\"äº‹ä»¶ç¯‡\"></a>äº‹ä»¶ç¯‡</h1><p><code>äº‹ä»¶</code>ï¼ˆeventï¼‰é€šå¸¸ç”¨äºä¸ºæµç¨‹ç”Ÿå‘½å‘¨æœŸä¸­å‘ç”Ÿçš„äº‹æƒ…å»ºæ¨¡ã€‚äº‹ä»¶æ€»æ˜¯å›¾å½¢åŒ–ä¸ºåœ†åœˆã€‚åœ¨BPMN 2.0ä¸­ï¼Œæœ‰ä¸¤ç§ä¸»è¦çš„äº‹ä»¶åˆ†ç±»ï¼š<em>æ•è·ï¼ˆcatchingï¼‰</em>ä¸<em>æŠ›å‡ºï¼ˆthrowingï¼‰</em>äº‹ä»¶ã€‚</p>\n<ul>\n<li><strong>æ•è·:</strong> å½“æµç¨‹æ‰§è¡Œåˆ°è¾¾è¿™ä¸ªäº‹ä»¶æ—¶ï¼Œä¼šç­‰å¾…ç›´åˆ°è§¦å‘å™¨åŠ¨ä½œã€‚è§¦å‘å™¨çš„ç±»å‹ç”±å…¶ä¸­çš„å›¾æ ‡ï¼Œæˆ–è€…è¯´XMLä¸­çš„ç±»å‹å£°æ˜è€Œå®šä¹‰ã€‚æ•è·äº‹ä»¶ä¸æŠ›å‡ºäº‹ä»¶æ˜¾ç¤ºä¸Šçš„åŒºåˆ«ï¼Œæ˜¯å…¶å†…éƒ¨çš„å›¾æ ‡æ²¡æœ‰å¡«å……ï¼ˆå³æ˜¯ç™½è‰²çš„ï¼‰ã€‚</li>\n<li><strong>æŠ›å‡º:</strong> å½“æµç¨‹æ‰§è¡Œåˆ°è¾¾è¿™ä¸ªäº‹ä»¶æ—¶ï¼Œä¼šè§¦å‘ä¸€ä¸ªè§¦å‘å™¨ã€‚è§¦å‘å™¨çš„ç±»å‹ï¼Œç”±å…¶ä¸­çš„å›¾æ ‡ï¼Œæˆ–è€…è¯´XMLä¸­çš„ç±»å‹å£°æ˜è€Œå®šä¹‰ã€‚æŠ›å‡ºäº‹ä»¶ä¸æ•è·äº‹ä»¶æ˜¾ç¤ºä¸Šçš„åŒºåˆ«ï¼Œæ˜¯å…¶å†…éƒ¨çš„å›¾æ ‡å¡«å……ä¸ºé»‘è‰²ã€‚</li>\n</ul>\n<h2 id=\"å®šæ—¶å™¨äº‹ä»¶\"><a href=\"#å®šæ—¶å™¨äº‹ä»¶\" class=\"headerlink\" title=\"å®šæ—¶å™¨äº‹ä»¶\"></a>å®šæ—¶å™¨äº‹ä»¶</h2><p>å®šæ—¶è§¦å‘çš„ç›¸å…³äº‹ä»¶ï¼ŒåŒ…æ‹¬å®šæ—¶å™¨å¯åŠ¨äº‹ä»¶ï¼Œå®šæ—¶å™¨æ•è·ä¸­é—´ä»¶äº‹ä»¶ï¼Œå®šæ—¶å™¨è¾¹ç•Œäº‹ä»¶</p>\n<h3 id=\"å®šæ—¶å™¨å¯åŠ¨äº‹ä»¶\"><a href=\"#å®šæ—¶å™¨å¯åŠ¨äº‹ä»¶\" class=\"headerlink\" title=\"å®šæ—¶å™¨å¯åŠ¨äº‹ä»¶\"></a>å®šæ—¶å™¨å¯åŠ¨äº‹ä»¶</h3><p>å®šæ—¶å™¨å¯åŠ¨äº‹ä»¶ï¼ˆtimer start eventï¼‰åœ¨æŒ‡å®šæ—¶é—´åˆ›å»ºæµç¨‹å®ä¾‹ã€‚åœ¨æµç¨‹åªéœ€è¦å¯åŠ¨ä¸€æ¬¡ï¼Œæˆ–è€…æµç¨‹éœ€è¦åœ¨ç‰¹å®šçš„æ—¶é—´é—´éš”é‡å¤å¯åŠ¨æ—¶ï¼Œéƒ½å¯ä»¥ä½¿ç”¨ã€‚</p>\n<p><em><strong>è¯·æ³¨æ„</strong>ï¼š</em>å­æµç¨‹ä¸èƒ½æœ‰å®šæ—¶å™¨å¯åŠ¨äº‹ä»¶ã€‚</p>\n<p><em><strong>è¯·æ³¨æ„</strong>ï¼š</em>å®šæ—¶å™¨å¯åŠ¨äº‹ä»¶ï¼Œåœ¨æµç¨‹éƒ¨ç½²çš„åŒæ—¶å°±å¼€å§‹è®¡æ—¶ã€‚ä¸éœ€è¦è°ƒç”¨startProcessInstanceByXXXå°±ä¼šåœ¨æ—¶é—´å¯åŠ¨ã€‚è°ƒç”¨startProcessInstanceByXXXæ—¶ä¼šåœ¨å®šæ—¶å¯åŠ¨ä¹‹å¤–é¢å¤–å¯åŠ¨ä¸€ä¸ªæµç¨‹ã€‚</p>\n<p><em><strong>è¯·æ³¨æ„</strong>ï¼š</em>å½“éƒ¨ç½²å¸¦æœ‰å®šæ—¶å™¨å¯åŠ¨äº‹ä»¶çš„æµç¨‹çš„æ›´æ–°ç‰ˆæœ¬æ—¶ï¼Œä¸Šä¸€ç‰ˆæœ¬çš„å®šæ—¶å™¨ä½œä¸šä¼šè¢«ç§»é™¤ã€‚è¿™æ˜¯å› ä¸ºé€šå¸¸å¹¶ä¸å¸Œæœ›æ—§ç‰ˆæœ¬çš„æµç¨‹ä»ç„¶è‡ªåŠ¨å¯åŠ¨æ–°çš„æµç¨‹å®ä¾‹ã€‚</p>\n<p>å®šæ—¶å™¨å¯åŠ¨äº‹ä»¶ï¼Œç”¨å…¶ä¸­æœ‰ä¸€ä¸ªé’Ÿè¡¨å›¾æ ‡çš„åœ†åœˆæ¥è¡¨ç¤ºã€‚æˆ‘ä»¬é€šè¿‡å…·ä½“æ¡ˆä¾‹æ¥ä»‹ç»</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220926104055183.png\"\n                      alt=\"image-20220926104055183\"\n                ></p>\n<p>éƒ¨ç½²æµç¨‹åç­‰å¾…åˆ°å…·ä½“çš„æ—¶é—´ï¼Œæˆ‘ä»¬æŸ¥çœ‹ä»»åŠ¡å³å¯</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220926104152240.png\"\n                      alt=\"image-20220926104152240\"\n                ></p>\n<p>æ—¶é—´å®šä¹‰è¿™å—ä½¿ç”¨çš„æ˜¯  <a class=\"link\"   href=\"https://en.wikipedia.org/wiki/ISO_8601#Dates\" >https://en.wikipedia.org/wiki/ISO_8601#Dates<i class=\"fas fa-external-link-alt\"></i></a>  ISO 8601 æ ¼å¼</p>\n<p>ä¸Šé¢æˆ‘ä»¬æ˜¯é€šè¿‡æŒ‡å®šå›ºå®šæ—¶é—´æ¥å¯åŠ¨çš„ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡<code>duraction</code>é—´éš”æ—¶é—´æ¥å¤„ç†ã€‚</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220926105514506.png\"\n                      alt=\"image-20220926105514506\"\n                ></p>\n<p>é€šè¿‡é—´éš”çš„æ–¹å¼æ¥å¯åŠ¨ã€‚</p>\n<p>timeCycleï¼šæŒ‡å®šé‡å¤å‘¨æœŸï¼Œå¯ç”¨äºå‘¨æœŸæ€§å¯åŠ¨æµç¨‹ï¼Œæˆ–è€…ä¸ºè¶…æœŸç”¨æˆ·ä»»åŠ¡å¤šæ¬¡å‘é€æé†’,è¿™ä¸ªå…ƒç´ å¯ä»¥ä½¿ç”¨ä¸¤ç§æ ¼å¼</p>\n<ul>\n<li>ç¬¬ä¸€ç§æ˜¯æŒ‰ç…§<a class=\"link\"   href=\"http://en.wikipedia.org/wiki/ISO_8601#Repeating_intervals\" >ISO 8601<i class=\"fas fa-external-link-alt\"></i></a>æ ‡å‡†å®šä¹‰çš„å¾ªç¯æ—¶é—´å‘¨æœŸã€‚ä¾‹å¦‚ï¼ˆä¸‰æ¬¡é‡å¤é—´éš”ï¼Œæ¯æ¬¡é—´éš”ä¸º10å°æ—¶ï¼‰ï¼šR3&#x2F;PT10H</li>\n<li>ä¹Ÿå¯ä»¥ä½¿ç”¨<em>timeCycle</em>çš„å¯é€‰å±æ€§<em>endDate</em>ï¼Œæˆ–è€…åƒè¿™æ ·ç›´æ¥å†™åœ¨æ—¶é—´è¡¨è¾¾å¼çš„ç»“å°¾ï¼š<code>R3/PT10H/$&#123;EndDate&#125;</code>ã€‚ å½“åˆ°è¾¾endDateæ—¶ï¼Œåº”ç”¨ä¼šåœæ­¢ï¼Œå¹¶ä¸ºè¯¥ä»»åŠ¡åˆ›å»ºå…¶ä»–ä½œä¸š</li>\n<li>ä¹Ÿå¯ä»¥é€šè¿‡cronè¡¨è¾¾å¼æ¥å¤„ç†</li>\n</ul>\n<p>æ¡ˆä¾‹ï¼šé‡å¤æ—¶é—´è®¾ç½®ä¸º R3PT30S é‡å¤3æ¬¡ï¼Œé—´éš”30æè¿°ï¼Œè‡ªåŠ¨ä»»åŠ¡ç»‘å®šçš„æ˜¯JavaDelegate</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">MyJavaDelegate</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">JavaDelegate</span> &#123;</span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">execute</span><span class=\"params\">(DelegateExecution execution)</span> <span class=\"keyword\">throws</span> Exception &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;MyJavaDelegate:æ‰§è¡Œäº†ã€‚ã€‚ã€‚&quot;</span>+ LocalDateTime.now().toString());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220926110231335.png\"\n                      alt=\"image-20220926110231335\"\n                ></p>\n<p>åœ¨æ§åˆ¶å°å¯ä»¥çœ‹åˆ°å¯¹åº”çš„æ•ˆæœ</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220926110317226.png\"\n                      alt=\"image-20220926110317226\"\n                ></p>\n<p>ä¹Ÿå¯ä»¥æŒ‡å®šç»“æŸæ—¶é—´</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">timerEventDefinition</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">timeCycle</span>&gt;</span>R3/PT30S/2022-03-28T21:46:11+00:00<span class=\"tag\">&lt;/<span class=\"name\">timeCycle</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">timerEventDefinition</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n\n\n<p>æ­¤å¤–è¿˜å¯ä»¥é€šè¿‡cronè¡¨è¾¾å¼æ¥å¤„ç†ï¼š</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">0 0/5 * * * ?</span><br></pre></td></tr></table></figure>\n\n<p>æ¯éš”5ç§’å¯åŠ¨</p>\n<h3 id=\"å®šæ—¶å™¨ä¸­é—´äº‹ä»¶\"><a href=\"#å®šæ—¶å™¨ä¸­é—´äº‹ä»¶\" class=\"headerlink\" title=\"å®šæ—¶å™¨ä¸­é—´äº‹ä»¶\"></a>å®šæ—¶å™¨ä¸­é—´äº‹ä»¶</h3><p>åœ¨æˆ‘ä»¬å…·ä½“çš„æµç¨‹å¤„ç†ä¸­ï¼ŒAèŠ‚ç‚¹å¤„ç†å®Œæˆåï¼Œå®šæ—¶è§¦å‘BèŠ‚ç‚¹çš„å¤„ç†ã€‚</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220927002456358.png\"\n                      alt=\"image-20220927002456358\"\n                ></p>\n<h3 id=\"å®šæ—¶å™¨è¾¹ç•Œäº‹ä»¶\"><a href=\"#å®šæ—¶å™¨è¾¹ç•Œäº‹ä»¶\" class=\"headerlink\" title=\"å®šæ—¶å™¨è¾¹ç•Œäº‹ä»¶\"></a>å®šæ—¶å™¨è¾¹ç•Œäº‹ä»¶</h3><p>äººå·¥ä»»åŠ¡1å¦‚æœåœ¨å®šä¹‰çš„<code>2022-09-27T23:36:14</code>è¿™ä¸ªæ—¶é—´ä¹‹å‰è¿˜æ²¡æœ‰å¤„ç†ï¼Œé‚£ä¹ˆå°±ä¼šè§¦å‘å®šæ—¶è¾¹ç•Œäº‹ä»¶ï¼Œä»è€Œä»äººå·¥ä»»åŠ¡3.</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220927003701033.png\"\n                      alt=\"image-20220927003701033\"\n                ></p>\n<h2 id=\"æ¶ˆæ¯äº‹ä»¶\"><a href=\"#æ¶ˆæ¯äº‹ä»¶\" class=\"headerlink\" title=\"æ¶ˆæ¯äº‹ä»¶\"></a>æ¶ˆæ¯äº‹ä»¶</h2><h3 id=\"å¯åŠ¨äº‹ä»¶\"><a href=\"#å¯åŠ¨äº‹ä»¶\" class=\"headerlink\" title=\"å¯åŠ¨äº‹ä»¶\"></a>å¯åŠ¨äº‹ä»¶</h3><p>æ¶ˆæ¯å¯åŠ¨äº‹ä»¶ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬é€šè¿‡æ¥æ”¶åˆ°æŸäº›æ¶ˆæ¯åæ¥å¯åŠ¨æµç¨‹å®ä¾‹ï¼Œæ¯”å¦‚æ¥æ”¶åˆ°äº†ä¸€å°é‚®ä»¶ï¼Œä¸€æ¡çŸ­ä¿¡ç­‰ï¼Œå…·ä½“é€šè¿‡æ¡ˆä¾‹æ¥è®²è§£</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220927004852502.png\"\n                      alt=\"image-20220927004852502\"\n                ></p>\n<p>å¯åŠ¨æµç¨‹å®ä¾‹å¯ä»¥é€šè¿‡æ™®é€šçš„æ–¹å¼æ¥è§¦å‘ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥é€šè¿‡å¯¹åº”çš„APIæ¥å¤„ç†</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * æ¶ˆæ¯å¯åŠ¨äº‹ä»¶</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">startMessageFlow</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    runtimeService.startProcessInstanceByMessage(<span class=\"string\">&quot;firstMessage&quot;</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"ä¸­é—´äº‹ä»¶\"><a href=\"#ä¸­é—´äº‹ä»¶\" class=\"headerlink\" title=\"ä¸­é—´äº‹ä»¶\"></a>ä¸­é—´äº‹ä»¶</h3><p>æ¶ˆæ¯ä¸­é—´äº‹ä»¶å°±æ˜¯åœ¨æµç¨‹è¿ä½œä¸­éœ€è¦æ¶ˆæ¯æ¥è§¦å‘çš„åœºæ™¯ï¼Œæ¡ˆä¾‹æ¼”ç¤ºï¼Œ<code>è‡ªåŠ¨æµç¨‹1</code>å¤„ç†å®Œæˆåï¼Œéœ€è¦æ¥æ”¶ç‰¹å®šçš„æ¶ˆæ¯ä¹‹åæ‰èƒ½è¿›å…¥åˆ°<code>è‡ªåŠ¨æµç¨‹2</code></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220927005944099.png\"\n                      alt=\"image-20220927005944099\"\n                ></p>\n<p>æ­£å¸¸çš„æµç¨‹éƒ¨ç½²ï¼Œå¯åŠ¨å’Œå®¡æ‰¹åï¼Œæˆ‘ä»¬éœ€è¦å‘é€å¯¹åº”çš„æ¶ˆæ¯æ¥è§¦å‘è¿™ä¸ªä¸­é—´äº‹ä»¶ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * å‘é€æ¶ˆæ¯</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">sendMsg</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    runtimeService.messageEventReceived(<span class=\"string\">&quot;secondMessage&quot;</span>,<span class=\"string\">&quot;da2028e9-3dbc-11ed-adb0-c03c59ad2248&quot;</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n\n\n<h3 id=\"è¾¹ç•Œäº‹ä»¶\"><a href=\"#è¾¹ç•Œäº‹ä»¶\" class=\"headerlink\" title=\"è¾¹ç•Œäº‹ä»¶\"></a>è¾¹ç•Œäº‹ä»¶</h3><p>æ¶ˆæ¯è¾¹ç•Œäº‹ä»¶ï¼Œå¦‚æœåœ¨æ¶ˆæ¯è§¦å‘å‰è¿˜æ²¡æœ‰ï¼Œæ¡ˆä¾‹æ¼”ç¤ºï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220927010931908.png\"\n                      alt=\"image-20220927010931908\"\n                ></p>\n<p>ç„¶åæ­£å¸¸çš„éƒ¨ç½²ï¼Œå¯åŠ¨æµç¨‹ï¼Œå¦‚æœåœ¨å‘å¸ƒå¯¹åº”çš„æ¶ˆæ¯ä¹‹å‰è¿˜æ²¡æœ‰å®¡æ‰¹<code>ç”¨æˆ·ä»»åŠ¡1</code>,é‚£å½“æˆ‘ä»¬å‘é€å¯¹åº”çš„æ¶ˆæ¯åå°±ä¼šè§¦å‘å¯¹åº”çš„æ¶ˆæ¯è¾¹ç•Œäº‹ä»¶ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * å‘é€æ¶ˆæ¯</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">sendMsg</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    runtimeService.messageEventReceived(<span class=\"string\">&quot;thirdMessage&quot;</span>,<span class=\"string\">&quot;0d2a30e2-3dbf-11ed-9e28-c03c59ad2248&quot;</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n\n\n<h2 id=\"é”™è¯¯äº‹ä»¶\"><a href=\"#é”™è¯¯äº‹ä»¶\" class=\"headerlink\" title=\"é”™è¯¯äº‹ä»¶\"></a>é”™è¯¯äº‹ä»¶</h2><h3 id=\"å¼€å§‹äº‹ä»¶\"><a href=\"#å¼€å§‹äº‹ä»¶\" class=\"headerlink\" title=\"å¼€å§‹äº‹ä»¶\"></a>å¼€å§‹äº‹ä»¶</h3><p>é”™è¯¯å¯åŠ¨äº‹ä»¶ï¼ˆerror start eventï¼‰ï¼Œå¯ç”¨äºè§¦å‘äº‹ä»¶å­æµç¨‹ï¼ˆEvent Sub-Processï¼‰ã€‚<strong>é”™è¯¯å¯åŠ¨äº‹ä»¶ä¸èƒ½ç”¨äºå¯åŠ¨æµç¨‹å®ä¾‹</strong>ã€‚</p>\n<p>é”™è¯¯å¯åŠ¨äº‹ä»¶æ€»æ˜¯ä¸­æ–­ã€‚æˆ‘ä»¬é€šè¿‡æ¡ˆä¾‹æ¥ä»‹ç»ã€‚</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220927113303497.png\"\n                      alt=\"image-20220927113303497\"\n                ></p>\n<p>ç»˜åˆ¶äº‹ä»¶å­æµç¨‹è¦æ³¨æ„ï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220927113345613.png\"\n                      alt=\"image-20220927113345613\"\n                ></p>\n<p>é€‰æ‹©é”™è¯¯å¯åŠ¨äº‹ä»¶</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220927113423993.png\"\n                      alt=\"image-20220927113423993\"\n                ></p>\n<p>ç„¶åé…ç½®æµç¨‹èŠ‚ç‚¹ä¿¡æ¯</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220927113506045.png\"\n                      alt=\"image-20220927113506045\"\n                ></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220927113528120.png\"\n                      alt=\"image-20220927113528120\"\n                ></p>\n<p>ç„¶ååœ¨JavaDelegateä¸­æŠ›å‡ºå¯¹åº”çš„å¼‚å¸¸</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">FirstJavaDelegate</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">JavaDelegate</span> &#123;</span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">execute</span><span class=\"params\">(DelegateExecution execution)</span> <span class=\"keyword\">throws</span> Exception &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;FirstJavaDelegate:æ‰§è¡Œäº†&quot;</span> + LocalDateTime.now().toString());</span><br><span class=\"line\">        <span class=\"comment\">// æŠ›å‡ºçš„ä¿¡æ¯å¿…é¡»å¯¹åº”äºerrorçš„Codeä¿¡æ¯</span></span><br><span class=\"line\">        <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"title class_\">BpmnError</span>(<span class=\"string\">&quot;errorCode01&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ç„¶åæ­£å¸¸éƒ¨ç½²ï¼Œå¯åŠ¨æµç¨‹ã€‚ç„¶åæˆ‘ä»¬å°±å¯ä»¥çœ‹åˆ°å¯¹åº”çš„æµè½¬äº†</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220927113652951.png\"\n                      alt=\"image-20220927113652951\"\n                ></p>\n<h3 id=\"è¾¹ç•Œäº‹ä»¶-1\"><a href=\"#è¾¹ç•Œäº‹ä»¶-1\" class=\"headerlink\" title=\"è¾¹ç•Œäº‹ä»¶\"></a>è¾¹ç•Œäº‹ä»¶</h3><p>å½“å­æµç¨‹æ‰§è¡Œä¸­å¯¹å¤–æŠ›å‡ºäº†ç›¸å…³çš„å¼‚å¸¸ï¼Œé‚£ä¹ˆæˆ‘ä»¬è®¾ç½®çš„é”™è¯¯è¾¹ç•Œäº‹ä»¶å°±èƒ½å¯¹åº”çš„æ•è·åˆ°ç›¸å…³çš„äº‹ä»¶ï¼Œç„¶ååšå¯¹åº”çš„å¤„ç†ï¼Œç›¸å…³æ¡ˆä¾‹å¦‚ä¸‹ï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220927114818638.png\"\n                      alt=\"image-20220927114818638\"\n                ></p>\n<p>ç»˜åˆ¶é”™è¯¯è¾¹ç•Œæµç¨‹å›¾çš„æ—¶å€™éœ€è¦å…ˆç»˜åˆ¶ä¸­é—´äº‹ä»¶çš„å›¾æ ‡ï¼Œç„¶åæ‹–æ‹½åˆ°å­æµç¨‹çš„è¾¹ç•Œï¼Œç„¶åä¿®æ”¹å¯¹åº”çš„ç±»å‹å³å¯ï¼Œé”™è¯¯è¾¹ç•Œäº‹ä»¶ç»‘å®šæŠ›å‡ºå¯¹åº”çš„errorCode</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220927114939647.png\"\n                      alt=\"image-20220927114939647\"\n                ></p>\n<p>ç„¶åå¯¹åº”çš„æŠ›å‡ºçš„ä¿¡æ¯</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">SecondJavaDelegate</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">JavaDelegate</span> &#123;</span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">execute</span><span class=\"params\">(DelegateExecution execution)</span> <span class=\"keyword\">throws</span> Exception &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;SecondJavaDelegate:æ‰§è¡Œäº†&quot;</span> + LocalDateTime.now().toString());</span><br><span class=\"line\">        <span class=\"comment\">// æŠ›å‡ºçš„ä¿¡æ¯å¿…é¡»å¯¹åº”äºerrorçš„Codeä¿¡æ¯</span></span><br><span class=\"line\">        <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"title class_\">BpmnError</span>(<span class=\"string\">&quot;errorCode02&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<p>ç„¶åéƒ¨ç½²å¯åŠ¨æµç¨‹å³å¯çœ‹åˆ°å¯¹åº”çš„æ•ˆæœ</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220927115037027.png\"\n                      alt=\"image-20220927115037027\"\n                ></p>\n<h2 id=\"ä¿¡å·äº‹ä»¶\"><a href=\"#ä¿¡å·äº‹ä»¶\" class=\"headerlink\" title=\"ä¿¡å·äº‹ä»¶\"></a>ä¿¡å·äº‹ä»¶</h2><h3 id=\"å¼€å§‹äº‹ä»¶-1\"><a href=\"#å¼€å§‹äº‹ä»¶-1\" class=\"headerlink\" title=\"å¼€å§‹äº‹ä»¶\"></a>å¼€å§‹äº‹ä»¶</h3><p>é€šè¿‡ä¿¡å·æ¥å¯åŠ¨æµç¨‹å®ä¾‹</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220928232328300.png\"\n                      alt=\"image-20220928232328300\"\n                ></p>\n<p>éƒ¨ç½²æµç¨‹å’Œå‘é€ä¿¡å·æ¥å¯åŠ¨æµç¨‹</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * éƒ¨ç½²æµç¨‹</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">deployFlow</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"type\">Deployment</span> <span class=\"variable\">deploy</span> <span class=\"operator\">=</span> repositoryService.createDeployment()</span><br><span class=\"line\">            .name(<span class=\"string\">&quot;äº‹ä»¶-ä¿¡å·å¼€å§‹äº‹ä»¶&quot;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">            .addClasspathResource(<span class=\"string\">&quot;flow/23-äº‹ä»¶-ä¿¡å·äº‹ä»¶-å¼€å§‹äº‹ä»¶.bpmn&quot;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">            .deploy();</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;deploy.getId() = &quot;</span> + deploy.getId());</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * é€šè¿‡ä¿¡å·æ¥è§¦å‘å¯åŠ¨äº‹ä»¶çš„æ‰§è¡Œ</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">signalRecevied</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    runtimeService.signalEventReceived(<span class=\"string\">&quot;signal01&quot;</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>æ•ˆæœï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220928232951167.png\"\n                      alt=\"image-20220928232951167\"\n                ></p>\n<h3 id=\"ä¸­é—´æ•è·äº‹ä»¶\"><a href=\"#ä¸­é—´æ•è·äº‹ä»¶\" class=\"headerlink\" title=\"ä¸­é—´æ•è·äº‹ä»¶\"></a>ä¸­é—´æ•è·äº‹ä»¶</h3><p>æ¡ˆä¾‹å¦‚ä¸‹ï¼šå½“æˆ‘ä»¬å¯åŠ¨äº‹ä»¶åï¼Œä¼šé˜»å¡åœ¨è¿™ä¸ªæ¶ˆæ¯è·å–ä¸­é—´äº‹ä»¶å¤„ï¼Œç­‰å¾…ç›¸å…³ä¿¡å·åæ‰ä¼šç»§ç»­æµè½¬ã€‚</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220928233200534.png\"\n                      alt=\"image-20220928233200534\"\n                ></p>\n<p>åœ¨è¿™ä¸ªæ¡ˆä¾‹ä¸­æˆ‘ä»¬éœ€è¦éƒ¨ç½²æµç¨‹ï¼Œå¯åŠ¨æµç¨‹ï¼Œç„¶å<code>ç”¨æˆ·ä»»åŠ¡1</code>å®¡æ‰¹åï¼Œæˆ‘ä»¬å‘å¸ƒç›¸å…³çš„ä¿¡å·ï¼Œç„¶åä¼šè¿›å…¥åˆ°<code>ç”¨æˆ·ä»»åŠ¡2</code>ä¸­</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  * éƒ¨ç½²æµç¨‹</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\"> <span class=\"meta\">@Test</span></span><br><span class=\"line\"> <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">deployFlow</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">     <span class=\"type\">Deployment</span> <span class=\"variable\">deploy</span> <span class=\"operator\">=</span> repositoryService.createDeployment()</span><br><span class=\"line\">             .name(<span class=\"string\">&quot;äº‹ä»¶-ä¿¡å·ä¸­é—´æ•è·äº‹ä»¶&quot;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">             .addClasspathResource(<span class=\"string\">&quot;flow/24-äº‹ä»¶-ä¿¡å·äº‹ä»¶-ä¸­é—´æ•è·äº‹ä»¶.bpmn&quot;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">             .deploy();</span><br><span class=\"line\">     System.out.println(<span class=\"string\">&quot;deploy.getId() = &quot;</span> + deploy.getId());</span><br><span class=\"line\"> &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"> <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  * å¯åŠ¨æµç¨‹å®ä¾‹</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\"> <span class=\"meta\">@Test</span></span><br><span class=\"line\"> <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">startFlow</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">     <span class=\"type\">String</span> <span class=\"variable\">processDefId</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;Process_002gvxw:1:cfcc56ac-3f42-11ed-a689-c03c59ad2248&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">     <span class=\"type\">ProcessInstance</span> <span class=\"variable\">processInstance</span> <span class=\"operator\">=</span> runtimeService.startProcessInstanceById(processDefId);</span><br><span class=\"line\">     System.out.println(<span class=\"string\">&quot;processInstance.getId() = &quot;</span> + processInstance.getId());</span><br><span class=\"line\"> &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"> <span class=\"meta\">@Test</span></span><br><span class=\"line\"> <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">signalRecevied</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">     runtimeService.signalEventReceived(<span class=\"string\">&quot;signal02&quot;</span>);</span><br><span class=\"line\"> &#125;</span><br></pre></td></tr></table></figure>\n\n<p>æ•ˆæœï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220928233556274.png\"\n                      alt=\"image-20220928233556274\"\n                ></p>\n<h3 id=\"ä¸­é—´æŠ›å‡ºäº‹ä»¶\"><a href=\"#ä¸­é—´æŠ›å‡ºäº‹ä»¶\" class=\"headerlink\" title=\"ä¸­é—´æŠ›å‡ºäº‹ä»¶\"></a>ä¸­é—´æŠ›å‡ºäº‹ä»¶</h3><p>ä¿¡å·ä¸­é—´æŠ›å‡ºäº‹ä»¶ä¹Ÿå°±æ˜¯åœ¨æµç¨‹æ‰§è¡Œä¸­çš„æŸä¸ªèŠ‚ç‚¹æŠ›å‡ºäº†å¯¹åº”çš„ä¿¡å·ï¼Œç„¶åå¯¹åº”çš„ä¿¡å·ä¸­é—´æ•è·äº‹ä»¶å°±ä¼šè§¦å‘ï¼Œæˆ‘ä»¬é€šè¿‡å…·ä½“çš„æ¡ˆä¾‹æ¥æ¼”ç¤ºå¦‚ï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220928234118517.png\"\n                      alt=\"image-20220928234118517\"\n                ></p>\n<p>æ­£å¸¸çš„éƒ¨ç½²æµç¨‹ï¼Œç„¶ååšæµç¨‹çš„å®¡æ‰¹ï¼Œæ³¨æ„<code>ç”¨æˆ·ä»»åŠ¡4</code>éœ€è¦å…ˆå®¡æ‰¹ï¼Œç„¶åå¤„äºä¿¡å·æ•è·çš„çŠ¶æ€ï¼Œç„¶åæˆ‘ä»¬<code>ç”¨æˆ·ä»»åŠ¡2</code>çš„å®¡æ‰¹ï¼ŒæŠ›å‡ºä¿¡å·äº‹ä»¶ï¼Œé‚£ä¹ˆå¯¹åº”çš„æ•è·äº‹ä»¶æ‰èƒ½è§¦å‘ï¼Œè¿™å„¿æœ‰å…ˆåé¡ºåºã€‚</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220928235157519.png\"\n                      alt=\"image-20220928235157519\"\n                ></p>\n<h3 id=\"è¾¹ç•Œäº‹ä»¶-2\"><a href=\"#è¾¹ç•Œäº‹ä»¶-2\" class=\"headerlink\" title=\"è¾¹ç•Œäº‹ä»¶\"></a>è¾¹ç•Œäº‹ä»¶</h3><p>æœ€åæ¥çœ‹çœ‹ä¿¡å·è¾¹ç•Œäº‹ä»¶ï¼Œæ¡ˆä¾‹å¦‚ä¸‹ï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220928235443496.png\"\n                      alt=\"image-20220928235443496\"\n                ></p>\n<p>éƒ¨ç½²å¯åŠ¨æµç¨‹ï¼Œå¦‚æœ<code>ç”¨æˆ·ä»»åŠ¡1</code>å®¡æ‰¹äº†ï¼Œå°±ä¼šè¿›å…¥åˆ°<code>ç”¨æˆ·ä»»åŠ¡2</code>å®¡æ‰¹ï¼Œå¦‚æœ<code>ç”¨æˆ·ä»»åŠ¡1</code>è¿˜æ²¡å®¡æ‰¹ï¼Œç„¶åå‘é€çš„ç›¸å…³çš„ä¿¡å·ï¼Œä¼šè¢«ä¿¡å·è¾¹ç•Œäº‹ä»¶æ•è·ï¼Œä»è€Œè¿›å…¥åˆ°<code>ç”¨æˆ·ä»»åŠ¡3</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">signalRecevied</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    runtimeService.signalEventReceived(<span class=\"string\">&quot;signal04&quot;</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220928235841363.png\"\n                      alt=\"image-20220928235841363\"\n                ></p>\n<h2 id=\"ç»“æŸäº‹ä»¶\"><a href=\"#ç»“æŸäº‹ä»¶\" class=\"headerlink\" title=\"ç»“æŸäº‹ä»¶\"></a>ç»“æŸäº‹ä»¶</h2><h3 id=\"é”™è¯¯ç»“æŸäº‹ä»¶\"><a href=\"#é”™è¯¯ç»“æŸäº‹ä»¶\" class=\"headerlink\" title=\"é”™è¯¯ç»“æŸäº‹ä»¶\"></a>é”™è¯¯ç»“æŸäº‹ä»¶</h3><p>å½“æµç¨‹æ‰§è¡Œåˆ°è¾¾<strong>é”™è¯¯ç»“æŸäº‹ä»¶ï¼ˆerror end eventï¼‰</strong>æ—¶ï¼Œç»“æŸæ‰§è¡Œçš„å½“å‰åˆ†æ”¯ï¼Œå¹¶æŠ›å‡ºé”™è¯¯ã€‚è¿™ä¸ªé”™è¯¯å¯ä»¥ç”±åŒ¹é…çš„é”™è¯¯è¾¹ç•Œä¸­é—´äº‹ä»¶æ•è·ã€‚å¦‚æœæ‰¾ä¸åˆ°åŒ¹é…çš„é”™è¯¯è¾¹ç•Œäº‹ä»¶ï¼Œå°†ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚é€šè¿‡å…·ä½“æ¡ˆä¾‹æ¥è¯¦ç»†è®²è§£ï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220929002020963.png\"\n                      alt=\"image-20220929002020963\"\n                ></p>\n<p>éƒ¨ç½²æµç¨‹ï¼Œç„¶åå¯åŠ¨æµç¨‹ï¼Œ<code>ç”¨æˆ·ä»»åŠ¡1</code>å®¡æ‰¹</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220929002528362.png\"\n                      alt=\"image-20220929002528362\"\n                ></p>\n<p>è®¾ç½®æµç¨‹å˜é‡<code>flag==1</code>ç„¶åä¼šèµ°<code>é”™è¯¯ç»“æŸäº‹ä»¶</code>ã€‚ä¼šè§¦å‘å¯¹åº”çš„è¾¹ç•Œäº‹ä»¶</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220929002622297.png\"\n                      alt=\"image-20220929002622297\"\n                ></p>\n<h3 id=\"ä¸­æ–­ç»“æŸäº‹ä»¶\"><a href=\"#ä¸­æ–­ç»“æŸäº‹ä»¶\" class=\"headerlink\" title=\"ä¸­æ–­ç»“æŸäº‹ä»¶\"></a>ä¸­æ–­ç»“æŸäº‹ä»¶</h3><p>ä¸­æ–­ç»“æŸäº‹ä»¶ä¹Ÿç§°ä¸ºç»ˆæ­¢ç»“æŸäº‹ä»¶ï¼Œä¸»è¦æ˜¯å¯¹æµç¨‹è¿›è¡Œç»ˆæ­¢çš„äº‹ä»¶ï¼Œå¯ä»¥åœ¨ä¸€ä¸ªå¤æ‚çš„æµç¨‹ä¸­ï¼Œå¦‚æœæŸæ–¹æƒ³è¦æå‰ä¸­æ–­è¿™ä¸ªæµç¨‹ï¼Œå¯ä»¥é‡‡ç”¨è¿™ä¸ªäº‹ä»¶æ¥å¤„ç†ï¼Œå¯ä»¥åœ¨å¹¶è¡Œå¤„ç†ä»»åŠ¡ä¸­ã€‚å¦‚æœä½ æ˜¯åœ¨æµç¨‹å®ä¾‹å±‚å¤„ç†ï¼Œæ•´ä¸ªæµç¨‹éƒ½ä¼šè¢«ä¸­æ–­ï¼Œå¦‚æœæ˜¯åœ¨å­æµç¨‹ä¸­ä½¿ç”¨ï¼Œé‚£ä¹ˆå½“å‰ä½œç”¨å’Œä½œç”¨åŸŸå†…çš„æ‰€æœ‰çš„å†…éƒ¨æµç¨‹éƒ½ä¼šè¢«ç»ˆæ­¢ã€‚å…·ä½“è¿˜æ˜¯é€šè¿‡ä¸¤ä¸ªæ¡ˆä¾‹æ¥ç»™å¤§å®¶ä»‹ç»ï¼š</p>\n<h4 id=\"æ¡ˆä¾‹ä¸€\"><a href=\"#æ¡ˆä¾‹ä¸€\" class=\"headerlink\" title=\"æ¡ˆä¾‹ä¸€\"></a>æ¡ˆä¾‹ä¸€</h4><p>ä»‹ç»æ²¡æœ‰å­æµç¨‹çš„æƒ…å†µä¸‹ç»ˆæ­¢æµç¨‹çš„åœºæ™¯ï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220929003541120.png\"\n                      alt=\"image-20220929003541120\"\n                ></p>\n<h4 id=\"æ¡ˆä¾‹äºŒ\"><a href=\"#æ¡ˆä¾‹äºŒ\" class=\"headerlink\" title=\"æ¡ˆä¾‹äºŒ\"></a>æ¡ˆä¾‹äºŒ</h4><p>æ¡ˆä¾‹äºŒæˆ‘ä»¬æ¥çœ‹çœ‹æœ‰å­æµç¨‹çš„åœºæ™¯ä¸‹ï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220929004654376.png\"\n                      alt=\"image-20220929004654376\"\n                ></p>\n<h3 id=\"å–æ¶ˆç»“æŸäº‹ä»¶\"><a href=\"#å–æ¶ˆç»“æŸäº‹ä»¶\" class=\"headerlink\" title=\"å–æ¶ˆç»“æŸäº‹ä»¶\"></a>å–æ¶ˆç»“æŸäº‹ä»¶</h3><p>å–æ¶ˆç»“æŸäº‹ä»¶ï¼ˆcancel end eventï¼‰åªèƒ½ä¸BPMNäº‹åŠ¡å­æµç¨‹ï¼ˆBPMN transaction subprocessï¼‰ä¸€èµ·ä½¿ç”¨ã€‚å½“åˆ°è¾¾å–æ¶ˆç»“æŸäº‹ä»¶æ—¶ï¼Œä¼šæŠ›å‡ºå–æ¶ˆäº‹ä»¶ï¼Œä¸”å¿…é¡»ç”±å–æ¶ˆè¾¹ç•Œäº‹ä»¶ï¼ˆcancel boundary eventï¼‰æ•è·ã€‚å–æ¶ˆè¾¹ç•Œäº‹ä»¶å°†å–æ¶ˆäº‹åŠ¡ï¼Œå¹¶è§¦å‘è¡¥å¿ï¼ˆcompensationï¼‰ã€‚</p>\n<p>å…·ä½“é€šè¿‡æ¡ˆä¾‹æ¥è®²è§£ï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220929010451477.png\"\n                      alt=\"image-20220929010451477\"\n                ></p>\n<p>æ•ˆæœï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220929010913632.png\"\n                      alt=\"image-20220929010913632\"\n                ></p>\n<h3 id=\"è¡¥å¿äº‹ä»¶\"><a href=\"#è¡¥å¿äº‹ä»¶\" class=\"headerlink\" title=\"è¡¥å¿äº‹ä»¶\"></a>è¡¥å¿äº‹ä»¶</h3><p>é€šè¿‡è¡¥å¿è¾¾åˆ°æ§åˆ¶ä¸šåŠ¡æµç¨‹çš„ç›®çš„å°±æ˜¯è¡¥å¿äº‹ä»¶ï¼Œæ¯”å¦‚æˆ‘ä»¬æ­£å¸¸çš„ä¹°æœºç¥¨çš„æµç¨‹ä¸‹è®¢å•è´­ä¹°ï¼Œç„¶ååŒæ—¶å¼¹å‡ºæ”¯ä»˜æµç¨‹é¡µé¢ã€‚æ”¯ä»˜æˆåŠŸåå°±å¯ä»¥ç­‰å¾…å‡ºç¥¨äº†ï¼Œä½†æ˜¯å¦‚æœæˆ‘ä»¬æ”¯ä»˜å¤±è´¥çš„è¯ï¼Œè¿™æ—¶è¦ä¹ˆé‡æ–°æ”¯ä»˜ï¼Œæ›´æ¢æ”¯ä»˜æ–¹å¼æˆ–è€…å–æ¶ˆé¢„è®¢ï¼Œè¿™æ—¶å–æ¶ˆé¢„è®¢æˆ‘ä»¬å°±å¯ä»¥é€šè¿‡è¡¥å¿äº‹ä»¶æ¥å®ç°ï¼Œå…·ä½“çš„æ¡ˆä¾‹å¦‚ä¸‹ï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220929012202047.png\"\n                      alt=\"image-20220929012202047\"\n                ></p>\n<p>æ¡ˆä¾‹æ•ˆæœï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220929012149315.png\"\n                      alt=\"image-20220929012149315\"\n                ></p>\n<h1 id=\"å¤šäººä¼šç­¾\"><a href=\"#å¤šäººä¼šç­¾\" class=\"headerlink\" title=\"å¤šäººä¼šç­¾\"></a>å¤šäººä¼šç­¾</h1><p>Multiple Instance</p>\n<h2 id=\"ä¼šç­¾è¯´æ˜\"><a href=\"#ä¼šç­¾è¯´æ˜\" class=\"headerlink\" title=\"ä¼šç­¾è¯´æ˜\"></a>ä¼šç­¾è¯´æ˜</h2><p>å¤šå®ä¾‹æ´»åŠ¨æ˜¯ä¸ºä¸šåŠ¡æµç¨‹ä¸­çš„æŸä¸ªæ­¥éª¤å®šä¹‰é‡å¤çš„ä¸€ç§æ–¹å¼ã€‚åœ¨ç¼–ç¨‹æ¦‚å¿µä¸­ï¼Œå¤šå®ä¾‹ä¸ <code>for each</code> ç»“æ„ç›¸åŒ¹é…ï¼šå®ƒå…è®¸å¯¹ç»™å®šé›†åˆä¸­çš„æ¯ä¸ªé¡¹ç›®æŒ‰é¡ºåºæˆ–å¹¶è¡Œåœ°æ‰§è¡ŒæŸä¸ªæ­¥éª¤æˆ–ç”šè‡³ä¸€ä¸ªå®Œæ•´çš„å­æµç¨‹ã€‚</p>\n<p>å¤šå®ä¾‹æ˜¯ä¸€ä¸ªæœ‰é¢å¤–å±æ€§ï¼ˆæ‰€è°“çš„ â€œå¤šå®ä¾‹ç‰¹æ€§â€ï¼‰çš„å¸¸è§„æ´»åŠ¨ï¼Œå®ƒå°†å¯¼è‡´è¯¥æ´»åŠ¨åœ¨è¿è¡Œæ—¶è¢«å¤šæ¬¡æ‰§è¡Œã€‚ä»¥ä¸‹æ´»åŠ¨å¯ä»¥æˆä¸ºå¤šå®ä¾‹æ´»åŠ¨ã€‚</p>\n<ul>\n<li>Service Task æœåŠ¡ä»»åŠ¡</li>\n<li>Send Task å‘é€ä»»åŠ¡</li>\n<li>User Task ç”¨æˆ·ä»»åŠ¡</li>\n<li>Business Rule Task ä¸šåŠ¡è§„åˆ™ä»»åŠ¡</li>\n<li>Script Task è„šæœ¬ä»»åŠ¡</li>\n<li>Receive Task æ¥æ”¶ä»»åŠ¡</li>\n<li>Manual Task æ‰‹åŠ¨ä»»åŠ¡</li>\n<li>(Embedded) Sub-Process ï¼ˆåµŒå…¥ï¼‰å­æµç¨‹</li>\n<li>Call Activity å‘èµ·æ´»åŠ¨</li>\n<li>Transaction Subprocess äº‹åŠ¡å­æµç¨‹</li>\n</ul>\n<p>ç½‘å…³æˆ–äº‹ä»¶ä¸èƒ½æˆä¸ºå¤šå®ä¾‹ã€‚</p>\n<p>å¦‚æœä¸€ä¸ªæ´»åŠ¨æ˜¯å¤šå®ä¾‹çš„ï¼Œè¿™å°†ç”±æ´»åŠ¨åº•éƒ¨çš„ä¸‰æ¡çŸ­çº¿è¡¨ç¤ºã€‚ä¸‰æ¡å‚ç›´çº¿è¡¨ç¤ºå®ä¾‹å°†ä»¥<strong>å¹¶è¡Œ</strong>æ–¹å¼æ‰§è¡Œï¼Œè€Œä¸‰æ¡æ°´å¹³çº¿è¡¨ç¤º<strong>é¡ºåº</strong>æ‰§è¡Œã€‚</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221001234837327.png\"\n                      alt=\"image-20221001234837327\"\n                ></p>\n<p>æŒ‰ç…§è§„èŒƒçš„è¦æ±‚ï¼Œæ¯ä¸ªå®ä¾‹æ‰€åˆ›å»ºçš„æ‰§è¡Œçš„æ¯ä¸ªçˆ¶æ‰§è¡Œå°†æœ‰ä»¥ä¸‹å˜é‡ï¼š</p>\n<ul>\n<li><strong>nrOfInstances</strong>: å®ä¾‹çš„æ€»æ•°é‡</li>\n<li><strong>nrOfActiveInstances</strong>: å½“å‰æ´»åŠ¨çš„ï¼Œå³å°šæœªå®Œæˆçš„å®ä¾‹çš„æ•°é‡ã€‚å¯¹äºä¸€ä¸ªè¿ç»­çš„å¤šå®ä¾‹ï¼Œè¿™å°†æ°¸è¿œæ˜¯1ã€‚</li>\n<li><strong>nrOfCompletedInstances</strong>: å·²ç»å®Œæˆçš„å®ä¾‹çš„æ•°é‡ã€‚</li>\n</ul>\n<p>è¿™äº›å€¼å¯ä»¥é€šè¿‡è°ƒç”¨ â€œexecution.getVariable(x) â€œæ–¹æ³•æ£€ç´¢ã€‚</p>\n<p>æ­¤å¤–ï¼Œæ¯ä¸ªåˆ›å»ºçš„æ‰§è¡Œå°†æœ‰ä¸€ä¸ªæ‰§è¡Œæœ¬åœ°å˜é‡ï¼ˆå³å¯¹å…¶ä»–æ‰§è¡Œä¸å¯è§ï¼Œä¹Ÿä¸å­˜å‚¨åœ¨æµç¨‹å®ä¾‹çº§åˆ«ï¼‰ã€‚</p>\n<ul>\n<li><strong>loopCounter</strong>: è¡¨ç¤ºè¯¥ç‰¹å®šå®ä¾‹çš„<code>for each</code>å¾ªç¯ä¸­çš„ç´¢å¼•</li>\n</ul>\n<p>ä¸ºäº†ä½¿ä¸€ä¸ªæ´»åŠ¨æˆä¸ºå¤šå®ä¾‹ï¼Œæ´»åŠ¨xmlå…ƒç´ å¿…é¡»æœ‰ä¸€ä¸ª<code>multiInstanceLoopCharacteristics</code>å­å…ƒç´ ã€‚</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">multiInstanceLoopCharacteristics</span> <span class=\"attr\">isSequential</span>=<span class=\"string\">&quot;false|true&quot;</span>&gt;</span></span><br><span class=\"line\"> ...</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">multiInstanceLoopCharacteristics</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p><code>isSequential</code>å±æ€§è¡¨ç¤ºè¯¥æ´»åŠ¨çš„å®ä¾‹æ˜¯æŒ‰é¡ºåºæ‰§è¡Œè¿˜æ˜¯å¹¶è¡Œæ‰§è¡Œã€‚</p>\n<h2 id=\"å¹¶è¡Œä¼šç­¾\"><a href=\"#å¹¶è¡Œä¼šç­¾\" class=\"headerlink\" title=\"å¹¶è¡Œä¼šç­¾\"></a>å¹¶è¡Œä¼šç­¾</h2><h3 id=\"ç»˜åˆ¶æµç¨‹å›¾-1\"><a href=\"#ç»˜åˆ¶æµç¨‹å›¾-1\" class=\"headerlink\" title=\"ç»˜åˆ¶æµç¨‹å›¾\"></a>ç»˜åˆ¶æµç¨‹å›¾</h3><p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221002000056981.png\"\n                      alt=\"image-20221002000056981\"\n                ></p>\n<blockquote>\n<p>loop cardinalityï¼šå¾ªç¯åŸºæ•°ã€‚å¯é€‰é¡¹ã€‚å¯ä»¥ç›´æ¥å¡«æ•´æ•°ï¼Œè¡¨ç¤ºä¼šç­¾çš„äººæ•°ã€‚<br>Collectionï¼šé›†åˆã€‚å¯é€‰é¡¹ã€‚ä¼šç­¾äººæ•°çš„é›†åˆï¼Œé€šå¸¸ä¸ºlistï¼Œå’Œloop cardinalityäºŒé€‰ä¸€ã€‚<br>Element variableï¼šå…ƒç´ å˜é‡ã€‚é€‰æ‹©Collectionæ—¶å¿…é€‰ï¼Œä¸ºcollectioné›†åˆæ¯æ¬¡éå†çš„å…ƒç´ ã€‚<br>Completion conditionï¼šå®Œæˆæ¡ä»¶ã€‚å¯é€‰ã€‚æ¯”å¦‚è®¾ç½®ä¸€ä¸ªäººå®Œæˆåä¼šç­¾ç»“æŸï¼Œé‚£ä¹ˆå…¶ä»–äººçš„ä»£åŠä»»åŠ¡éƒ½ä¼šæ¶ˆå¤±ã€‚</p>\n</blockquote>\n<p>åœ¨ç”¨æˆ·ä»»åŠ¡èŠ‚ç‚¹ç»‘å®šäº†ä¸€ä¸ªç›‘å¬å™¨ï¼Œç›‘å¬<code>create</code>è¡Œä¸ºï¼Œè¯¥ç›‘å¬å™¨æˆ‘ä»¬æ˜¯é€šè¿‡UELè¡¨è¾¾å¼æ¥å®ç°çš„ï¼Œ<code>mulitiInstanceTaskListener</code>æ˜¯æˆ‘ä»¬æ³¨å…¥åˆ°Springå®¹å™¨ä¸­çš„å¯¹è±¡ã€‚</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221002000233782.png\"\n                      alt=\"image-20221002000233782\"\n                ></p>\n<p>ç›‘å¬å™¨çš„å†…å®¹ä¸ºï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Component(&quot;mulitiInstanceTaskListener&quot;)</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">MulitiInstanceTaskListener</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">Serializable</span> &#123;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">completeListener</span><span class=\"params\">(DelegateExecution execution)</span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;ä»»åŠ¡ï¼š&quot;</span>+execution.getId());</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;persons:&quot;</span> + execution.getVariable(<span class=\"string\">&quot;persons&quot;</span>));</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;person&quot;</span> + execution.getVariable(<span class=\"string\">&quot;person&quot;</span>));</span><br><span class=\"line\">        </span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ç„¶åå¯¹åº”çš„<code>Completion condition</code>æˆ‘ä»¬å¯ä»¥åœ¨Javaä»£ç ä¸­å¤„ç†</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Component(&quot;mulitiInstanceCompleteTask&quot;)</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">MulitiInstanceCompleteTask</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">Serializable</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * å®Œæˆä»»åŠ¡æ˜¯éœ€è¦è§¦å‘çš„æ–¹æ³•</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> execution</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">     *     false è¡¨ç¤ºä¼šç­¾ä»»åŠ¡è¿˜æ²¡æœ‰ç»“æŸ</span></span><br><span class=\"line\"><span class=\"comment\">     </span></span><br><span class=\"line\"><span class=\"comment\">     *     true è¡¨ç¤ºä¼šç­¾ä»»åŠ¡ç»“æŸäº†</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"type\">boolean</span> <span class=\"title function_\">completeTask</span><span class=\"params\">(DelegateExecution execution)</span> &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;æ€»çš„ä¼šç­¾ä»»åŠ¡æ•°é‡ï¼š&quot;</span> + execution.getVariable(<span class=\"string\">&quot;nrOfInstances&quot;</span>)</span><br><span class=\"line\">                + <span class=\"string\">&quot;å½“å‰è·å–çš„ä¼šç­¾ä»»åŠ¡æ•°é‡ï¼š&quot;</span> + execution.getVariable(<span class=\"string\">&quot;nrOfActiveInstances&quot;</span>)</span><br><span class=\"line\">                + <span class=\"string\">&quot; - &quot;</span> + <span class=\"string\">&quot;å·²ç»å®Œæˆçš„ä¼šç­¾ä»»åŠ¡æ•°é‡ï¼š&quot;</span> + execution.getVariable(<span class=\"string\">&quot;nrOfCompletedInstances&quot;</span>));</span><br><span class=\"line\">        <span class=\"comment\">//æœ‰ä¸€ä¸ªäººåŒæ„å°±é€šè¿‡</span></span><br><span class=\"line\">        <span class=\"type\">Boolean</span> <span class=\"variable\">flag</span> <span class=\"operator\">=</span> (Boolean) execution.getVariable(<span class=\"string\">&quot;flag&quot;</span>);</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;å½“å‰æ„è§ï¼š&quot;</span>+flag);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> flag;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ä¸Šé¢çš„ä¸‰ä¸ªå˜é‡æ˜¯Flowableä¸­è‡ªå¸¦çš„å¯ç”¨å˜é‡</p>\n<ol>\n<li><p>nrOfInstances:è¯¥ä¼šç­¾ç¯èŠ‚ä¸­æ€»å…±æœ‰å¤šå°‘ä¸ªå®ä¾‹</p>\n</li>\n<li><p>nrOfActiveInstances:å½“å‰æ´»åŠ¨çš„å®ä¾‹çš„æ•°é‡ï¼Œå³è¿˜æ²¡æœ‰å®Œæˆçš„å®ä¾‹æ•°é‡ã€‚</p>\n</li>\n<li><p>nrOfCompletedInstances:å·²ç»å®Œæˆçš„å®ä¾‹çš„æ•°é‡</p>\n</li>\n</ol>\n<h3 id=\"éƒ¨ç½²æµç¨‹\"><a href=\"#éƒ¨ç½²æµç¨‹\" class=\"headerlink\" title=\"éƒ¨ç½²æµç¨‹\"></a>éƒ¨ç½²æµç¨‹</h3><p>æ™®é€šçš„éƒ¨ç½²æµç¨‹</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * éƒ¨ç½²æµç¨‹</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">deployFlow</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"type\">Deployment</span> <span class=\"variable\">deploy</span> <span class=\"operator\">=</span> repositoryService.createDeployment()</span><br><span class=\"line\">            .name(<span class=\"string\">&quot;å¤šå®ä¾‹&quot;</span>)</span><br><span class=\"line\">            .addClasspathResource(<span class=\"string\">&quot;flow/diagram_1.bpmn&quot;</span>)</span><br><span class=\"line\">            .deploy();</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;deploy.getId() = &quot;</span> + deploy.getId());</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"å¯åŠ¨æµç¨‹\"><a href=\"#å¯åŠ¨æµç¨‹\" class=\"headerlink\" title=\"å¯åŠ¨æµç¨‹\"></a>å¯åŠ¨æµç¨‹</h3><p>åœ¨å¯åŠ¨æµç¨‹å®ä¾‹çš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦è®¾ç½®ç›¸å…³çš„å‚æ•°ï¼Œåœ¨æµç¨‹å®šä¹‰çš„æ—¶å€™è®¾ç½®çš„personsåœ¨æ­¤å¤„æˆ‘ä»¬å°±éœ€è¦è®¾ç½®äº†ï¼Œè®¾ç½®ä¸ºArrays.asList(â€œå¼ ä¸‰â€,â€æå››â€,â€ç‹äº”â€,â€èµµå…­â€)ï¼Œè¿™é‡Œè®¾ç½®äº†4ä¸ªå…ƒç´ ï¼Œåœ¨æµç¨‹å®šä¹‰é‡Œå®šä¹‰äº†3ä¸ªï¼Œè¡¨ç¤ºåªä¼šå¾ªç¯3æ¬¡ï¼Œå¯åŠ¨æµç¨‹åï¼Œåœ¨Taskä¸­å¯ä»¥çœ‹åˆ°åªæœ‰3ä¸ªä»»åŠ¡</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"title function_\">startFlow</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> Exception&#123;</span><br><span class=\"line\">    Map&lt;String,Object&gt; map = <span class=\"keyword\">new</span> <span class=\"title class_\">HashMap</span>&lt;&gt;();</span><br><span class=\"line\">    <span class=\"comment\">// è®¾ç½®å¤šäººä¼šç­¾çš„æ•°æ®</span></span><br><span class=\"line\">    map.put(<span class=\"string\">&quot;persons&quot;</span>, Arrays.asList(<span class=\"string\">&quot;å¼ ä¸‰&quot;</span>,<span class=\"string\">&quot;æå››&quot;</span>,<span class=\"string\">&quot;ç‹äº”&quot;</span>,<span class=\"string\">&quot;èµµå…­&quot;</span>));</span><br><span class=\"line\">    <span class=\"type\">ProcessInstance</span> <span class=\"variable\">processInstance</span> <span class=\"operator\">=</span> runtimeService</span><br><span class=\"line\">            .startProcessInstanceById(<span class=\"string\">&quot;myProcess:1:ba1518fc-b22d-11ec-9313-c03c59ad2248&quot;</span>,map);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<p>å¯åŠ¨åæˆ‘ä»¬å°±å¯ä»¥åœ¨æ•°æ®åº“ä¸­çœ‹åˆ°äº§ç”Ÿäº†3ä¸ªTask</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221002000640899.png\"\n                      alt=\"image-20221002000640899\"\n                ></p>\n<h3 id=\"å¤„ç†ä»»åŠ¡\"><a href=\"#å¤„ç†ä»»åŠ¡\" class=\"headerlink\" title=\"å¤„ç†ä»»åŠ¡\"></a>å¤„ç†ä»»åŠ¡</h3><p>å¯åŠ¨æµç¨‹åæˆ‘ä»¬å‘ä¸‹åœ¨Taskä¸­äº§ç”Ÿäº†3æ¡ä»»åŠ¡ï¼Œæˆ‘ä»¬å…ˆé€šè¿‡TaskServiceæ¥å®Œæˆå…¶ä¸­ä¸€ä¸ªä»»åŠ¡ï¼Œè®¾ç½®ä¸€ä¸ªæ ‡å¿—flagä¸ºfalseï¼Œæ¥æ§åˆ¶ä¼šç­¾è¿˜æ²¡æœ‰ç»“æŸï¼ŒåŒæ—¶Taskä¸­å¦å¤–ä¸¤ä¸ªä»»åŠ¡è¿˜åœ¨</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"title function_\">completeTask1</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    Map&lt;String,Object&gt; map = <span class=\"keyword\">new</span> <span class=\"title class_\">HashMap</span>&lt;&gt;();</span><br><span class=\"line\">    map.put(<span class=\"string\">&quot;flag&quot;</span>,<span class=\"literal\">false</span>);</span><br><span class=\"line\">    taskService.complete(<span class=\"string\">&quot;71337501-b22e-11ec-a534-c03c59ad2248&quot;</span>,map);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>å½“ä»»åŠ¡æ‰§è¡Œå®Œæˆæ—¶ä¼šåŒæ­¥è§¦å‘ä¼šç­¾å®Œæˆè¡¨è¾¾å¼ä¸­å¯¹è±¡æ–¹æ³•ã€‚æœ‰å¦‚ä¸‹çš„è¾“å‡º</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221002000853424.png\"\n                      alt=\"image-20221002000853424\"\n                ></p>\n<p>åŒæ—¶Taskè¡¨ä¸­çš„è®°å½•è¿˜æœ‰ä¸¤æ¡</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221002000931060.png\"\n                      alt=\"image-20221002000931060\"\n                ></p>\n<p>ç„¶åå½“æˆ‘ä»¬åœ¨å®Œæˆä¸€ä¸ªä»»åŠ¡ï¼Œè¿™æ—¶è®¾ç½®flagä¸ºtrueï¼Œä¼šå‘ç°åœ¨è¿™ä¸ªå¤šäººå¤„ç†ä¸­ï¼Œæœ€å¤š3ä¸ªäººå¤„ç†åœ¨ç¬¬äºŒä¸ªäººå¤„ç†åå°±ç»“æŸäº†</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"title function_\">completeTask1</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    Map&lt;String,Object&gt; map = <span class=\"keyword\">new</span> <span class=\"title class_\">HashMap</span>&lt;&gt;();</span><br><span class=\"line\">    map.put(<span class=\"string\">&quot;flag&quot;</span>,<span class=\"literal\">true</span>); <span class=\"comment\">// è®¾ç½®ä¸ºtrue ç»“æŸå¤šäººä¼šç­¾</span></span><br><span class=\"line\">    taskService.complete(<span class=\"string\">&quot;713570d4-b22e-11ec-a534-c03c59ad2248&quot;</span>,map);</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;complete ....&quot;</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>è¿™æ—¶ä»»åŠ¡èŠ‚ç‚¹å°±ç»“æŸäº†~</p>\n<h2 id=\"ä¸²è¡Œä¼šç­¾\"><a href=\"#ä¸²è¡Œä¼šç­¾\" class=\"headerlink\" title=\"ä¸²è¡Œä¼šç­¾\"></a>ä¸²è¡Œä¼šç­¾</h2><p>ä¸²è¡Œä¼šç­¾æŒ‡çš„æ˜¯åœ¨å¤šå®ä¾‹ä¸­ï¼Œå¤„ç†äººæŒ‰ç…§å¯¹åº”çš„é¡ºåºæ¥ä¸€ä¸ªä¸ªçš„å¤„ç†ä»»åŠ¡ã€‚</p>\n<h3 id=\"æµç¨‹å›¾\"><a href=\"#æµç¨‹å›¾\" class=\"headerlink\" title=\"æµç¨‹å›¾\"></a>æµç¨‹å›¾</h3><p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221002001501320.png\"\n                      alt=\"image-20221002001501320\"\n                ></p>\n<p>ä¸Šé¢å®šä¹‰çš„æ˜¯ä¸€ä¸ª<code>ä¸²è¡Œä¼šç­¾</code>çš„æµç¨‹å›¾ã€‚å¾ªç¯3æ¬¡ï¼Œé›†åˆæ•°æ®åœ¨<code>persons</code>ä¸­ï¼Œæ¯æ¬¡å¾ªç¯çš„æ•°æ®å­˜å‚¨åœ¨å¾ªç¯å˜é‡<code>person</code>ä¸­ï¼ŒåŒæ—¶<code>person</code>ä¹Ÿæ˜¯å¯¹åº”çš„å¤„ç†äººçš„æµç¨‹å˜é‡ã€‚</p>\n<h3 id=\"éƒ¨ç½²å’Œå¯åŠ¨æµç¨‹-1\"><a href=\"#éƒ¨ç½²å’Œå¯åŠ¨æµç¨‹-1\" class=\"headerlink\" title=\"éƒ¨ç½²å’Œå¯åŠ¨æµç¨‹\"></a>éƒ¨ç½²å’Œå¯åŠ¨æµç¨‹</h3><p>éƒ¨ç½²å°±æ˜¯æ­£å¸¸çš„éƒ¨ç½²äº†ï¼Œä¸å†èµ˜è¿°ï¼Œå¯åŠ¨æµç¨‹çš„æ—¶å€™æˆ‘ä»¬éœ€è¦å¯¹é›†åˆåšèµ‹å€¼ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">startFlow</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    Map&lt;String,Object&gt; map = <span class=\"keyword\">new</span> <span class=\"title class_\">HashMap</span>&lt;&gt;();</span><br><span class=\"line\">    <span class=\"comment\">// è®¾ç½®å¤šäººä¼šç­¾çš„æ•°æ® ä¸²è¡Œä¼šæŒ‰ç…§é›†åˆçš„å¾ªåºæ¥å¤„ç†</span></span><br><span class=\"line\">    map.put(<span class=\"string\">&quot;persons&quot;</span>, Arrays.asList(<span class=\"string\">&quot;å¼ ä¸‰&quot;</span>,<span class=\"string\">&quot;æå››&quot;</span>,<span class=\"string\">&quot;ç‹äº”&quot;</span>,<span class=\"string\">&quot;èµµå…­&quot;</span>));</span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">processDefId</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;Process_0ltwc4j:1:bd87ed49-41a3-11ed-9ec4-c03c59ad2248&quot;</span>;</span><br><span class=\"line\">    <span class=\"type\">ProcessInstance</span> <span class=\"variable\">processInstance</span> <span class=\"operator\">=</span> runtimeService.startProcessInstanceById(processDefId,map);</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;processInstance.getId() = &quot;</span> + processInstance.getId());</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>å¯åŠ¨åä¼šåˆ›å»ºä¸€ä¸ªTaskï¼Œå¤„ç†äººæ˜¯<code>å¼ ä¸‰</code>ã€‚ç„¶åå¤„ç†å®Œæˆåä¼šåˆ›å»ºä¸‹ä¸€ä¸ªtaskï¼Œå¤„ç†äººæ˜¯<code>æå››</code>æŒ‰å¾ªåºæ¥å¤„ç†äº†ã€‚</p>\n<h1 id=\"ä»»åŠ¡å›é€€\"><a href=\"#ä»»åŠ¡å›é€€\" class=\"headerlink\" title=\"ä»»åŠ¡å›é€€\"></a>ä»»åŠ¡å›é€€</h1><p>ä»»åŠ¡å›é€€é©³å›æ’¤é”€ç›¸å…³çš„æ“ä½œåœ¨å®é™…çš„å¼€å‘ä¸­è¿˜æ˜¯ä¼šç»å¸¸é‡åˆ°çš„ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹Camundaä¸­é’ˆå¯¹è¿™äº›æƒ…å†µæ˜¯å¦‚ä½•å¤„ç†çš„ã€‚</p>\n<h2 id=\"ä¸²è¡Œçš„å›é€€\"><a href=\"#ä¸²è¡Œçš„å›é€€\" class=\"headerlink\" title=\"ä¸²è¡Œçš„å›é€€\"></a>ä¸²è¡Œçš„å›é€€</h2><p>æˆ‘ä»¬å…ˆä»æœ€ç®€å•çš„ä¸²è¡Œæµç¨‹æ¥åˆ†æï¼Œæ¡ˆä¾‹å¦‚ä¸‹</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221005155134800.png\"\n                      alt=\"image-20221005155134800\"\n                ></p>\n<p>ä¸Šé¢çš„æµç¨‹å°±æ˜¯ä¸€ä¸ªéå¸¸ç®€å•çš„ä¸²è¡Œä»»åŠ¡ï¼Œå®šä¹‰äº†4ä¸ªç”¨æˆ·ä»»åŠ¡ï¼ŒæŒ‡æ´¾çš„å¤„ç†äººåˆ†åˆ«æ˜¯<code>user1</code>,<code>user2</code>,<code>user3</code>,<code>user4</code>.åœ¨æµç¨‹çš„æ‰§è¡Œè¿‡ç¨‹ä¸­æˆ‘ä»¬å¯ä»¥é€šè¿‡å›é€€æ¥æ¼”ç¤ºå…·ä½“çš„æ•ˆæœã€‚é¦–å…ˆæ¥éƒ¨ç½²æµç¨‹</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * å®Œæˆæµç¨‹çš„éƒ¨ç½²æ“ä½œ</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">deploy</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"type\">Deployment</span> <span class=\"variable\">deploy</span> <span class=\"operator\">=</span> repositoryService.createDeployment()</span><br><span class=\"line\">            .name(<span class=\"string\">&quot;å›é€€&quot;</span>)</span><br><span class=\"line\">            .addClasspathResource(<span class=\"string\">&quot;flow/ä¸²è¡Œå›é€€.bpmn&quot;</span>)</span><br><span class=\"line\">            .deploy();</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;deploy.getId() = &quot;</span> + deploy.getId());</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * é€šè¿‡æµç¨‹å®šä¹‰Id å¯åŠ¨</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">startFlow</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">processId</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;Process_1up6ocm:1:d924ab29-43f9-11ed-b4f1-c03c59ad2248&quot;</span>;</span><br><span class=\"line\">    <span class=\"type\">ProcessInstance</span> <span class=\"variable\">processInstance</span> <span class=\"operator\">=</span> runtimeService.startProcessInstanceById(processId);</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;processInstance.getId() = &quot;</span> + processInstance.getId());</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ç„¶åæˆ‘ä»¬é€šè¿‡user1å®Œæˆä»»åŠ¡ï¼Œç›´åˆ°user3å®Œæˆä»»åŠ¡ï¼Œåˆ°user4æ¥å¤„ç†ä»»åŠ¡ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * å®Œæˆä»»åŠ¡</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">completeTask</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    taskService.complete(<span class=\"string\">&quot;45bf40bf-43fa-11ed-8abe-c03c59ad2248&quot;</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221004233745178.png\"\n                      alt=\"image-20221004233745178\"\n                ></p>\n<p>ç„¶åæˆ‘ä»¬æ¥å®Œæˆå›é€€åˆ°<code>user3</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * ä»»åŠ¡å›é€€</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">rollbackTask</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">processInstanceId</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;cb7b11bf-4486-11ed-bbb6-c03c59ad2248&quot;</span>;</span><br><span class=\"line\">    runtimeService.createProcessInstanceModification(processInstanceId)</span><br><span class=\"line\">                    .startBeforeActivity(<span class=\"string\">&quot;Activity_17ubvwq&quot;</span>) <span class=\"comment\">// å›é€€åˆ°å¯¹åº”çš„èŠ‚ç‚¹å‰  é€šè¿‡ èŠ‚ç‚¹çš„key æ¥å®ç°</span></span><br><span class=\"line\">                   <span class=\"comment\">// .cancelActivityInstance(processInstanceId) // æ•´ä¸ªä»»åŠ¡ä¼šå–æ¶ˆ</span></span><br><span class=\"line\">                    .cancelAllForActivity(<span class=\"string\">&quot;Activity_0jyi1pp&quot;</span>) <span class=\"comment\">// å–æ¶ˆåŸæ¥çš„èŠ‚ç‚¹</span></span><br><span class=\"line\">                    .execute();</span><br><span class=\"line\">    <span class=\"comment\">/*String processDefinitionId = &quot;&quot;;</span></span><br><span class=\"line\"><span class=\"comment\">    runtimeService.createModification(&quot;&quot;);*/</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>æ•ˆæœï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221005155543672.png\"\n                      alt=\"image-20221005155543672\"\n                ></p>\n<p>ç„¶ååœ¨å†å²è¡¨ä¸­å¯ä»¥çœ‹åˆ°å¯¹åº”çš„èµ°å‘</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221005155709087.png\"\n                      alt=\"image-20221005155709087\"\n                ></p>\n<p>å…·ä½“è¿‡ç¨‹ä¸ºï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221005155909565.png\"\n                      alt=\"image-20221005155909565\"\n                ></p>\n<p>ç„¶åæˆ‘ä»¬å¯ä»¥ä»<code>user3</code>å›é€€åˆ°<code>user1</code></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221005160133670.png\"\n                      alt=\"image-20221005160133670\"\n                ></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221005160200316.png\"\n                      alt=\"image-20221005160200316\"\n                ></p>\n<p>è¦å–æ¶ˆå½“å‰çš„ä»»åŠ¡ç›´æ¥è°ƒç”¨<code>cancelActivityInstance(processInstanceId)</code>æ–¹æ³•å³å¯ã€‚</p>\n<p>ç›¸å…³æ–¹æ³•è¯´æ˜ï¼š</p>\n<table>\n<thead>\n<tr>\n<th>ç±»åˆ«</th>\n<th>æ–¹æ³•</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>åœ¨æ´»åŠ¨å‰å¯åŠ¨</td>\n<td>å›é€€åˆ°è¿™ä¸ªèŠ‚ç‚¹</td>\n</tr>\n<tr>\n<td></td>\n<td>startBeforeActivity(String activityId)</td>\n</tr>\n<tr>\n<td></td>\n<td>startBeforeActivity(String activityId, String ancestorActivityInstanceId)</td>\n</tr>\n<tr>\n<td>åœ¨æ´»åŠ¨åå¯åŠ¨</td>\n<td>é€šè¿‡ <code>startAfterActivity</code> åœ¨ä¸€ä¸ªæ´»åŠ¨ä¹‹åè¿è¡Œï¼Œæ„å‘³ç€å°†ä»æ´»åŠ¨çš„ä¸‹ä¸€èŠ‚ç‚¹å¼€å§‹æ‰§è¡Œ</td>\n</tr>\n<tr>\n<td></td>\n<td>startAfterActivity(String activityId)</td>\n</tr>\n<tr>\n<td></td>\n<td>startAfterActivity(String activityId, String ancestorActivityInstanceId)</td>\n</tr>\n<tr>\n<td>å¯åŠ¨ä¸€ä¸ªè¿‡æ¸¡</td>\n<td>é€šè¿‡ <code>startTransition</code> å¯åŠ¨ä¸€ä¸ªè¿‡æ¸¡ï¼Œå°±æ„å‘³ç€åœ¨ä¸€ä¸ªç»™å®šçš„åºåˆ—æµä¸Šå¼€å§‹æ‰§è¡Œã€‚å½“æœ‰å¤šä¸ªæµå‡ºçš„åºåˆ—æµæ—¶ï¼Œè¿™å¯ä»¥ä¸ <code>startAfterActivity</code> ä¸€èµ·ä½¿ç”¨ã€‚å¦‚æœæˆåŠŸï¼Œè¯¥æŒ‡ä»¤ä»åºåˆ—æµå¼€å§‹æ‰§è¡Œæµç¨‹æ¨¡å‹ï¼Œç›´åˆ°è¾¾åˆ°ç­‰å¾…çŠ¶æ€ã€‚</td>\n</tr>\n<tr>\n<td></td>\n<td>startTransition(String transitionId)</td>\n</tr>\n<tr>\n<td></td>\n<td>startTransition(String transition, String ancestorActivityInstanceId)</td>\n</tr>\n<tr>\n<td>å–æ¶ˆä¸€ä¸ªæ´»åŠ¨å®ä¾‹</td>\n<td>é€šè¿‡<code>cancelActivityInstance</code>å–æ¶ˆä¸€ä¸ªç‰¹å®šçš„æ´»åŠ¨å®ä¾‹ã€‚æ—¢å¯ä»¥æ˜¯ä¸€ä¸ªæ´»åŠ¨å®ä¾‹ï¼Œå¦‚ç”¨æˆ·ä»»åŠ¡çš„å®ä¾‹ï¼Œä¹Ÿå¯ä»¥æ˜¯å±‚æ¬¡ç»“æ„ä¸­æ›´é«˜èŒƒå›´çš„å®ä¾‹ï¼Œå¦‚å­æµç¨‹çš„å®ä¾‹</td>\n</tr>\n<tr>\n<td></td>\n<td>cancelActivityInstance(String activityInstanceId)</td>\n</tr>\n<tr>\n<td>å–æ¶ˆä¸€ä¸ªè¿‡æ¸¡å®ä¾‹</td>\n<td>è¿‡æ¸¡å®ä¾‹è¡¨ç¤ºå³å°†ä»¥å¼‚æ­¥å»¶ç»­çš„å½¢å¼è¿›å…¥&#x2F;ç¦»å¼€ä¸€ä¸ªæ´»åŠ¨çš„æ‰§è¡Œæµã€‚ä¸€ä¸ªå·²ç»åˆ›å»ºä½†å°šæœªæ‰§è¡Œçš„å¼‚æ­¥å»¶ç»­Jobè¢«è¡¨ç¤ºä¸ºä¸€ä¸ªè¿‡æ¸¡å®ä¾‹ã€‚è¿™äº›å®ä¾‹å¯ä»¥é€šè¿‡<code>cancelTransitionInstance</code>æ¥å–æ¶ˆ</td>\n</tr>\n<tr>\n<td></td>\n<td>cancelTransitionInstance(String activityInstanceId)</td>\n</tr>\n<tr>\n<td>å–æ¶ˆä¸€ä¸ªæ´»åŠ¨çš„æ‰€æœ‰æ´»åŠ¨å®ä¾‹</td>\n<td>é€šè¿‡æŒ‡ä»¤ <code>cancelAllForActivity</code> æ¥å–æ¶ˆä¸€ä¸ªç‰¹å®šæ´»åŠ¨çš„æ‰€æœ‰æ´»åŠ¨å’Œè¿‡æ¸¡å®ä¾‹ã€‚</td>\n</tr>\n<tr>\n<td></td>\n<td>cancelAllForActivity(String activityId)</td>\n</tr>\n</tbody></table>\n<h2 id=\"å¹¶è¡Œçš„å›é€€\"><a href=\"#å¹¶è¡Œçš„å›é€€\" class=\"headerlink\" title=\"å¹¶è¡Œçš„å›é€€\"></a>å¹¶è¡Œçš„å›é€€</h2><p>æ¥ä¸‹æ¥æˆ‘ä»¬åœ¨å¹¶è¡Œçš„åœºæ™¯ä¸­æ¥çœ‹çœ‹å„ç§å›é€€çš„åœºæ™¯ã€‚å…·ä½“æ¡ˆä¾‹æµç¨‹å¦‚ä¸‹ï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221005193633031.png\"\n                      alt=\"image-20221005193633031\"\n                ></p>\n<p>éƒ¨ç½²åï¼Œå¯åŠ¨æµç¨‹å®ä¾‹ã€‚è¿è¡Œåˆ°å¦‚ä¸‹çš„èŠ‚ç‚¹ï¼Œç„¶åå›é€€åˆ°<code>ç”¨æˆ·å®¡æ‰¹1</code></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221005193931957.png\"\n                      alt=\"image-20221005193931957\"\n                ></p>\n<p>ç„¶åæˆ‘ä»¬æ¥åšå›é€€æ“ä½œ</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">rollbackTask</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">processInstanceId</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;a1d40268-44a2-11ed-9b63-c03c59ad2248&quot;</span>;</span><br><span class=\"line\">    runtimeService.createProcessInstanceModification(processInstanceId)</span><br><span class=\"line\">                    .startBeforeActivity(<span class=\"string\">&quot;Activity_0n0ddnj&quot;</span>) <span class=\"comment\">// å›é€€åˆ°å¯¹åº”çš„èŠ‚ç‚¹å‰  é€šè¿‡ èŠ‚ç‚¹çš„key æ¥å®ç°</span></span><br><span class=\"line\">                   <span class=\"comment\">// .cancelActivityInstance(processInstanceId) // æ•´ä¸ªä»»åŠ¡ä¼šå–æ¶ˆ</span></span><br><span class=\"line\">                    .cancelAllForActivity(<span class=\"string\">&quot;Activity_184rpuo&quot;</span>) <span class=\"comment\">// å–æ¶ˆåŸæ¥çš„èŠ‚ç‚¹</span></span><br><span class=\"line\">                    .cancelAllForActivity(<span class=\"string\">&quot;Activity_08w6j91&quot;</span>)</span><br><span class=\"line\">                    .execute();</span><br><span class=\"line\">    <span class=\"comment\">/*String processDefinitionId = &quot;&quot;;</span></span><br><span class=\"line\"><span class=\"comment\">    runtimeService.createModification(&quot;&quot;);*/</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ä¸Šé¢æˆ‘ä»¬æ ¹æ®æµç¨‹<code>å®ä¾‹å›é€€</code>åŒæ—¶éœ€è¦å–æ¶ˆæ‰ä¹‹å‰çš„ä¸¤ä¸ªèŠ‚ç‚¹ã€‚åœ¨å†å²è¡¨ä¸­ä¹Ÿå¯ä»¥çœ‹åˆ°è¿™ä¸ªæµç¨‹</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221005194635852.png\"\n                      alt=\"image-20221005194635852\"\n                ></p>\n<p>åœ¨ä¸Šé¢ä¾‹å­çš„åŸºç¡€ä¸Šæˆ‘ä»¬æ¥å®ç°å¦‚ä¸‹çš„æµç¨‹å›é€€æ“ä½œã€‚</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221005194807783.png\"\n                      alt=\"image-20221005194807783\"\n                ></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221005194904013.png\"\n                      alt=\"image-20221005194904013\"\n                ></p>\n<p>å…·ä½“çš„å›é€€ä»£ç </p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">rollbackTask</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">processInstanceId</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;a1d40268-44a2-11ed-9b63-c03c59ad2248&quot;</span>;</span><br><span class=\"line\">    runtimeService.createProcessInstanceModification(processInstanceId)</span><br><span class=\"line\">                    .startBeforeActivity(<span class=\"string\">&quot;Activity_184rpuo&quot;</span>) <span class=\"comment\">// å›é€€åˆ°å¯¹åº”çš„èŠ‚ç‚¹å‰  é€šè¿‡ èŠ‚ç‚¹çš„key æ¥å®ç°</span></span><br><span class=\"line\">                    .startBeforeActivity(<span class=\"string\">&quot;Activity_08w6j91&quot;</span>)</span><br><span class=\"line\">                    .cancelAllForActivity(<span class=\"string\">&quot;Activity_0ma3n4p&quot;</span>) <span class=\"comment\">// å–æ¶ˆåŸæ¥çš„èŠ‚ç‚¹</span></span><br><span class=\"line\">                    .execute();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ç„¶åæŸ¥çœ‹å†å²ä»»åŠ¡åŒæ ·å¯ä»¥çœ‹åˆ°å…·ä½“çš„å®ç°</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221005195142559.png\"\n                      alt=\"image-20221005195142559\"\n                ></p>\n<h2 id=\"æ’ä»–ç½‘å…³å›é€€\"><a href=\"#æ’ä»–ç½‘å…³å›é€€\" class=\"headerlink\" title=\"æ’ä»–ç½‘å…³å›é€€\"></a>æ’ä»–ç½‘å…³å›é€€</h2><p>ç„¶åæˆ‘ä»¬æ¥çœ‹çœ‹åœ¨æœ‰æ’ä»–ç½‘å…³çš„æƒ…å†µä¸‹ï¼Œå¦‚æœæˆ‘ä»¬è¦è°ƒæ•´æµç¨‹çš„èµ°å‘åº”è¯¥è¦æ€ä¹ˆæ¥å¤„ç†ã€‚</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221005200528761.png\"\n                      alt=\"image-20221005200528761\"\n                ></p>\n<p>ä¹Ÿå°±æ˜¯å®é™…çš„åœºæ™¯ä¸­å¯èƒ½å…ˆèµ°åˆ°äº†<code>ç”¨æˆ·2</code>å®¡æ‰¹ï¼Œåé¢å‘ç°ä¸åˆç†ï¼Œå°±éœ€è¦å›é€€åˆ°<code>ç”¨æˆ·1</code>åé¢ç„¶åå†è°ƒæ•´æµç¨‹å˜é‡ï¼Œæµè½¬åˆ°<code>ç”¨æˆ·3</code>å¤„ã€‚</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221005200901486.png\"\n                      alt=\"image-20221005200901486\"\n                ></p>\n<p>ç„¶åæˆ‘ä»¬æ¥çœ‹çœ‹å…·ä½“çš„å›é€€æ“ä½œ</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">rollbackTask</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">processInstanceId</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;6a70a33b-44a6-11ed-8557-c03c59ad2248&quot;</span>;</span><br><span class=\"line\">    runtimeService.createProcessInstanceModification(processInstanceId)</span><br><span class=\"line\">                    .startBeforeActivity(<span class=\"string\">&quot;Gateway_0ah4coh&quot;</span>) <span class=\"comment\">// å›é€€åˆ°æ’ä»–ç½‘å…³ä¹‹å‰</span></span><br><span class=\"line\">                    .setVariable(<span class=\"string\">&quot;num&quot;</span>,-<span class=\"number\">1</span>) <span class=\"comment\">// è®¾ç½®æµç¨‹å˜é‡</span></span><br><span class=\"line\">                    .cancelAllForActivity(<span class=\"string\">&quot;Activity_0x9stxl&quot;</span>) <span class=\"comment\">// å–æ¶ˆåŸæ¥çš„èŠ‚ç‚¹</span></span><br><span class=\"line\">                    .execute();</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>å›é€€åˆ°<code>æ’ä»–ç½‘å…³</code>èŠ‚ç‚¹ï¼Œç„¶åè®¾ç½®æµç¨‹å˜é‡<code>num=-1</code>ç„¶åä¼šèµ°<code>ç”¨æˆ·3</code>çš„å®¡æ‰¹ã€‚åŒæ—¶å–æ¶ˆåŸæ¥èŠ‚ç‚¹çš„å®¡æ‰¹</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221005201429581.png\"\n                      alt=\"image-20221005201429581\"\n                ></p>\n<p>ç„¶åæˆ‘ä»¬æ¥çœ‹çœ‹æœ‰å­æµç¨‹çš„åœºæ™¯ä¸‹çš„å›é€€å¤„ç†</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221005204950474.png\"\n                      alt=\"image-20221005204950474\"\n                ></p>\n<p>æˆ‘ä»¬æ¥çœ‹çœ‹ä»å­æµç¨‹å›é€€åˆ°ä¸»æµç¨‹çš„æ“ä½œã€‚</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221005205324729.png\"\n                      alt=\"image-20221005205324729\"\n                ></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">rollbackTask</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">processInstanceId</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;a3311551-44ac-11ed-97c0-c03c59ad2248&quot;</span>;</span><br><span class=\"line\">    runtimeService.createProcessInstanceModification(processInstanceId)</span><br><span class=\"line\">                    .startBeforeActivity(<span class=\"string\">&quot;Activity_00kwccq&quot;</span>) <span class=\"comment\">// å›é€€åˆ°æ’ä»–ç½‘å…³ä¹‹å‰</span></span><br><span class=\"line\">                    .cancelAllForActivity(<span class=\"string\">&quot;Activity_01835pn&quot;</span>) <span class=\"comment\">// å–æ¶ˆåŸæ¥çš„èŠ‚ç‚¹</span></span><br><span class=\"line\">                    .execute();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>åœ¨å†å²è¡¨ä¸­æŸ¥çœ‹è®°å½•</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221005205659817.png\"\n                      alt=\"image-20221005205659817\"\n                ></p>\n<h2 id=\"é‡å¯-x2F-æ¢å¤å®ä¾‹\"><a href=\"#é‡å¯-x2F-æ¢å¤å®ä¾‹\" class=\"headerlink\" title=\"é‡å¯&#x2F;æ¢å¤å®ä¾‹\"></a>é‡å¯&#x2F;æ¢å¤å®ä¾‹</h2><p>åœ¨æµç¨‹å®ä¾‹ç»ˆæ­¢åï¼Œå…¶å†å²æ•°æ®ä»ç„¶å­˜åœ¨ï¼Œå¹¶ä¸”å¯ä»¥è¢«è®¿é—®ä»¥é‡å¯æµç¨‹å®ä¾‹ï¼Œå‰ææ˜¯å†å²çº§åˆ«è¢«è®¾ç½®ä¸ºFULLã€‚ ä¾‹å¦‚ï¼Œå½“æµç¨‹æ²¡æœ‰ä»¥æœŸæœ›çš„æ–¹å¼ç»ˆæ­¢æ—¶ï¼Œé‡å¯æµç¨‹å®ä¾‹æ˜¯æœ‰ç”¨çš„ã€‚è¿™ä¸ªAPIçš„ä½¿ç”¨çš„å…¶ä»–å¯èƒ½æƒ…å†µæœ‰ï¼š</p>\n<ul>\n<li>æ¢å¤è¢«é”™è¯¯åœ°å–æ¶ˆçš„æµç¨‹å®ä¾‹çš„åˆ°æœ€åçŠ¶æ€</li>\n<li>ç”±äºé”™è¯¯è·¯ç”±å¯¼è‡´æµç¨‹å®ä¾‹ç»ˆæ­¢åï¼Œé‡å¯æµç¨‹å®ä¾‹</li>\n</ul>\n<p>ä¸ºäº†æ‰§è¡Œè¿™æ ·çš„æ“ä½œï¼Œæµç¨‹å¼•æ“æä¾›äº† <em>æµç¨‹å®ä¾‹é‡å¯API</em> <code>RuntimeService.restartProcessInstances(..)</code> ã€‚è¯¥APIå…è®¸é€šè¿‡ä½¿ç”¨æµå¼æ„å»ºå™¨åœ¨ä¸€æ¬¡è°ƒç”¨ä¸­æŒ‡å®šå¤šä¸ªå®ä¾‹åŒ–æŒ‡ä»¤ã€‚</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221005210910364.png\"\n                      alt=\"image-20221005210910364\"\n                ></p>\n<p>éƒ¨ç½²å¯åŠ¨æµç¨‹å®ä¾‹åè¿›å…¥å¹¶è¡Œç½‘å…³ã€‚ç„¶åæµç¨‹å®ä¾‹è¢«ä¸­æ–­äº†</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">deleteProcessId</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">processId</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;cfd58b31-44ae-11ed-92f5-c03c59ad2248&quot;</span>;</span><br><span class=\"line\">    runtimeService.deleteProcessInstance(processId,<span class=\"string\">&quot;æµ‹è¯•åˆ é™¤&quot;</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221005211329315.png\"\n                      alt=\"image-20221005211329315\"\n                ></p>\n<p>ä¹‹åï¼Œæˆ‘ä»¬å†³å®šæ¢å¤è¯¥æµç¨‹å®ä¾‹åˆ°æœ€åçŠ¶æ€ï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">recoveryProcessInstancess</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    runtimeService</span><br><span class=\"line\">            .restartProcessInstances(<span class=\"string\">&quot;Process_08wyw1g:1:ad8f483f-44ae-11ed-aee8-c03c59ad2248&quot;</span>) <span class=\"comment\">// æµç¨‹å®šä¹‰ID</span></span><br><span class=\"line\">            .startBeforeActivity(<span class=\"string\">&quot;Activity_03vnv63&quot;</span>)</span><br><span class=\"line\">            .startBeforeActivity(<span class=\"string\">&quot;Activity_0b7mtmx&quot;</span>)</span><br><span class=\"line\">            .processInstanceIds(<span class=\"string\">&quot;cfd58b31-44ae-11ed-92f5-c03c59ad2248&quot;</span>) <span class=\"comment\">// æµç¨‹å®ä¾‹ID</span></span><br><span class=\"line\">            .execute();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>æµç¨‹å®ä¾‹å·²ç»ç”¨æœ€åä¸€ç»„å˜é‡é‡å¯äº†ã€‚ç„¶è€Œï¼Œåœ¨é‡å¯çš„æµç¨‹å®ä¾‹ä¸­ï¼Œåªæœ‰å…¨å±€å˜é‡è¢«æ¢å¤äº†ã€‚ æœ¬åœ°å˜é‡è¿˜éœ€è¦è°ƒç”¨ <code>RuntimeService.setVariableLocal(..)</code> æ‰‹åŠ¨è®¾ç½®ã€‚</p>\n<blockquote>\n<p>ä»æŠ€æœ¯ä¸Šè®²ï¼Œåˆ›å»ºçš„æ˜¯ä¸€ä¸ªæ–°çš„æµç¨‹å®ä¾‹ã€‚</p>\n<p><strong>è¯·æ³¨æ„:</strong> å†å²æµç¨‹å’Œé‡å¯çš„æµç¨‹å®ä¾‹çš„idæ˜¯ä¸åŒçš„ã€‚</p>\n</blockquote>\n<h1 id=\"åŠ¨æ€è¡¨å•\"><a href=\"#åŠ¨æ€è¡¨å•\" class=\"headerlink\" title=\"åŠ¨æ€è¡¨å•\"></a>åŠ¨æ€è¡¨å•</h1><p>æ¥ä¸‹æ¥æˆ‘ä»¬çœ‹çœ‹åŠ¨æ€è¡¨å•çš„åº”ç”¨ï¼Œåœ¨Camundaä¸­è¡¨å•åˆ†ä¸ºå†…ç½®è¡¨å•å’ŒåŠ¨æ€è¡¨å•ã€‚</p>\n<h2 id=\"å†…ç½®è¡¨å•\"><a href=\"#å†…ç½®è¡¨å•\" class=\"headerlink\" title=\"å†…ç½®è¡¨å•\"></a>å†…ç½®è¡¨å•</h2><p>å†…ç½®è¡¨å•å°±æ˜¯åœ¨ç»˜åˆ¶æµç¨‹å›¾çš„æ—¶å€™åŒæ—¶ç»˜åˆ¶è¡¨å•ã€‚è¿™ç§æ–¹å¼å…¶å®å°±æ˜¯ç»‘å®šäº†å¯¹åº”çš„æµç¨‹å˜é‡ï¼Œä¸æ˜¯å¤ªçµæ´»ã€‚ä½†è¿˜æ˜¯æ¥è®²è§£ä¸‹ã€‚</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221014160336988.png\"\n                      alt=\"image-20221014160336988\"\n                ></p>\n<h3 id=\"å¯åŠ¨æµç¨‹ç»‘å®š\"><a href=\"#å¯åŠ¨æµç¨‹ç»‘å®š\" class=\"headerlink\" title=\"å¯åŠ¨æµç¨‹ç»‘å®š\"></a>å¯åŠ¨æµç¨‹ç»‘å®š</h3><p>æˆ‘ä»¬å…ˆæ¥çœ‹ä¸‹åœ¨å¯åŠ¨æµç¨‹çš„æ—¶å€™å°±è®¾ç½®ç›¸å…³çš„è¡¨å•</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221014160501005.png\"\n                      alt=\"image-20221014160501005\"\n                ></p>\n<p>å¯¹åº”çš„æµç¨‹å›¾</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=<span class=\"string\">&quot;1.0&quot;</span> encoding=<span class=\"string\">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">bpmn:definitions</span> <span class=\"attr\">xmlns:bpmn</span>=<span class=\"string\">&quot;http://www.omg.org/spec/BPMN/20100524/MODEL&quot;</span> <span class=\"attr\">xmlns:bpmndi</span>=<span class=\"string\">&quot;http://www.omg.org/spec/BPMN/20100524/DI&quot;</span> <span class=\"attr\">xmlns:dc</span>=<span class=\"string\">&quot;http://www.omg.org/spec/DD/20100524/DC&quot;</span> <span class=\"attr\">xmlns:camunda</span>=<span class=\"string\">&quot;http://camunda.org/schema/1.0/bpmn&quot;</span> <span class=\"attr\">xmlns:di</span>=<span class=\"string\">&quot;http://www.omg.org/spec/DD/20100524/DI&quot;</span> <span class=\"attr\">xmlns:modeler</span>=<span class=\"string\">&quot;http://camunda.org/schema/modeler/1.0&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;Definitions_1pnd5o3&quot;</span> <span class=\"attr\">targetNamespace</span>=<span class=\"string\">&quot;http://bpmn.io/schema/bpmn&quot;</span> <span class=\"attr\">exporter</span>=<span class=\"string\">&quot;Camunda Modeler&quot;</span> <span class=\"attr\">exporterVersion</span>=<span class=\"string\">&quot;4.12.0&quot;</span> <span class=\"attr\">modeler:executionPlatform</span>=<span class=\"string\">&quot;Camunda Platform&quot;</span> <span class=\"attr\">modeler:executionPlatformVersion</span>=<span class=\"string\">&quot;7.15.0&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">bpmn:process</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;Process_13abncz&quot;</span> <span class=\"attr\">isExecutable</span>=<span class=\"string\">&quot;true&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">bpmn:startEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;StartEvent_1&quot;</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmn:extensionElements</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">camunda:formData</span>&gt;</span></span><br><span class=\"line\">          <span class=\"tag\">&lt;<span class=\"name\">camunda:formField</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;days&quot;</span> <span class=\"attr\">label</span>=<span class=\"string\">&quot;è¯·å‡å¤©æ•°&quot;</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;long&quot;</span> <span class=\"attr\">defaultValue</span>=<span class=\"string\">&quot;1&quot;</span> /&gt;</span></span><br><span class=\"line\">          <span class=\"tag\">&lt;<span class=\"name\">camunda:formField</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;reason&quot;</span> <span class=\"attr\">label</span>=<span class=\"string\">&quot;è¯·å‡åŸå› &quot;</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;string&quot;</span> /&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">camunda:formData</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmn:extensionElements</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmn:outgoing</span>&gt;</span>Flow_09xirvq<span class=\"tag\">&lt;/<span class=\"name\">bpmn:outgoing</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">bpmn:startEvent</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">bpmn:sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;Flow_09xirvq&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;StartEvent_1&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;Activity_0a81mdi&quot;</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">bpmn:sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;Flow_1i0viip&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;Activity_0a81mdi&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;Activity_01qg6se&quot;</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">bpmn:endEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;Event_1mj58zz&quot;</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmn:incoming</span>&gt;</span>Flow_1asp8i3<span class=\"tag\">&lt;/<span class=\"name\">bpmn:incoming</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">bpmn:endEvent</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">bpmn:sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;Flow_1asp8i3&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;Activity_01qg6se&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;Event_1mj58zz&quot;</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">bpmn:userTask</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;Activity_0a81mdi&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;ç”¨æˆ·ä»»åŠ¡1&quot;</span> <span class=\"attr\">camunda:assignee</span>=<span class=\"string\">&quot;demo&quot;</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmn:incoming</span>&gt;</span>Flow_09xirvq<span class=\"tag\">&lt;/<span class=\"name\">bpmn:incoming</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmn:outgoing</span>&gt;</span>Flow_1i0viip<span class=\"tag\">&lt;/<span class=\"name\">bpmn:outgoing</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">bpmn:userTask</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">bpmn:userTask</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;Activity_01qg6se&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;ç”¨æˆ·ä»»åŠ¡2&quot;</span> <span class=\"attr\">camunda:assignee</span>=<span class=\"string\">&quot;demo&quot;</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmn:incoming</span>&gt;</span>Flow_1i0viip<span class=\"tag\">&lt;/<span class=\"name\">bpmn:incoming</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmn:outgoing</span>&gt;</span>Flow_1asp8i3<span class=\"tag\">&lt;/<span class=\"name\">bpmn:outgoing</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">bpmn:userTask</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">bpmn:process</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNDiagram</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNDiagram_1&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNPlane</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNPlane_1&quot;</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;Process_13abncz&quot;</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;Flow_09xirvq_di&quot;</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;Flow_09xirvq&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">di:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;188&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;117&quot;</span> /&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">di:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;240&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;117&quot;</span> /&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;Flow_1i0viip_di&quot;</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;Flow_1i0viip&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">di:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;340&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;117&quot;</span> /&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">di:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;400&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;117&quot;</span> /&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;Flow_1asp8i3_di&quot;</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;Flow_1asp8i3&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">di:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;500&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;117&quot;</span> /&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">di:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;562&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;117&quot;</span> /&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;_BPMNShape_StartEvent_2&quot;</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;StartEvent_1&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">dc:Bounds</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;152&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;99&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;36&quot;</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;36&quot;</span> /&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;Event_1mj58zz_di&quot;</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;Event_1mj58zz&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">dc:Bounds</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;562&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;99&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;36&quot;</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;36&quot;</span> /&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;Activity_09e81f3_di&quot;</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;Activity_0a81mdi&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">dc:Bounds</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;240&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;77&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;100&quot;</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;80&quot;</span> /&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;Activity_0ot1277_di&quot;</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;Activity_01qg6se&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">dc:Bounds</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;400&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;77&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;100&quot;</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;80&quot;</span> /&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNPlane</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNDiagram</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">bpmn:definitions</span>&gt;</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>å¯ä»¥çœ‹åˆ°å¯¹åº”çš„xmlä¸­å°±é…ç½®äº†è¡¨å•çš„æ•°æ®</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221014160601636.png\"\n                      alt=\"image-20221014160601636\"\n                ></p>\n<p>éƒ¨ç½²æµç¨‹</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * å®Œæˆæµç¨‹çš„éƒ¨ç½²æ“ä½œ</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">deploy</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"type\">Deployment</span> <span class=\"variable\">deploy</span> <span class=\"operator\">=</span> repositoryService.createDeployment()</span><br><span class=\"line\">            .name(<span class=\"string\">&quot;è¡¨å•01&quot;</span>)</span><br><span class=\"line\">            .addClasspathResource(<span class=\"string\">&quot;flow/è¡¨å•-01.bpmn&quot;</span>)</span><br><span class=\"line\">            .deploy();</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;deploy.getId() = &quot;</span> + deploy.getId());</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>éƒ¨ç½²å®Œæµç¨‹åæˆ‘ä»¬å¯ä»¥é€šè¿‡å¯¹åº”çš„APIæŸ¥çœ‹æµç¨‹å¯¹åº”çš„è¡¨å•ä¿¡æ¯</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">getStartFromData</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">processDefId</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;Process_13abncz:1:5d39867a-4b6e-11ed-9748-c03c59ad2248&quot;</span>;</span><br><span class=\"line\">    <span class=\"comment\">// æ ¹æ®æµç¨‹å®šä¹‰æ‰¾åˆ°å¯¹åº”çš„ è¡¨å•æ•°æ®ã€‚</span></span><br><span class=\"line\">    <span class=\"type\">StartFormData</span> <span class=\"variable\">startFormData</span> <span class=\"operator\">=</span> formService</span><br><span class=\"line\">        .getStartFormData(processDefId);</span><br><span class=\"line\">    <span class=\"comment\">// æ‰¾åˆ°å¯¹åº”çš„è¡¨å•åŸŸçš„é›†åˆ</span></span><br><span class=\"line\">    List&lt;FormField&gt; formFields = startFormData.getFormFields();</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (FormField formField : formFields) &#123;</span><br><span class=\"line\">        <span class=\"comment\">// è·å–æ¯ä¸ªå…·ä½“çš„è¡¨å•åŸŸ</span></span><br><span class=\"line\">        System.out.println(formField.getId() + <span class=\"string\">&quot; &quot;</span> + formField.getLabel() + <span class=\"string\">&quot; &quot;</span> + formField.getValue().getValue());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221014161737726.png\"\n                      alt=\"image-20221014161737726\"\n                ></p>\n<p>å¯åŠ¨æµç¨‹ï¼šä¸¤ç§æ–¹å¼</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * æ­£å¸¸çš„å¯åŠ¨æµç¨‹</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"title function_\">startFormFlow</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> Exception&#123;</span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">processDefId</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;Process_13abncz:1:5d39867a-4b6e-11ed-9748-c03c59ad2248&quot;</span>;</span><br><span class=\"line\">    Map&lt;String,Object&gt; map = <span class=\"keyword\">new</span> <span class=\"title class_\">HashMap</span>&lt;&gt;();</span><br><span class=\"line\">    map.put(<span class=\"string\">&quot;days&quot;</span>,<span class=\"string\">&quot;5&quot;</span>);</span><br><span class=\"line\">    map.put(<span class=\"string\">&quot;reason&quot;</span>,<span class=\"string\">&quot;æƒ³ä¼‘æ¯ä¸‹&quot;</span>);</span><br><span class=\"line\">    <span class=\"comment\">// æ­£å¸¸å¯åŠ¨çš„æ—¶å€™å¯ä»¥é€šè¿‡æµç¨‹å˜é‡æ¥ç»™è¡¨å•è®¾ç½®æ•°æ®ï¼Œä¹Ÿå¯ä»¥ä¸è®¾ç½®</span></span><br><span class=\"line\">    <span class=\"type\">ProcessInstance</span> <span class=\"variable\">processInstance</span> <span class=\"operator\">=</span> runtimeService</span><br><span class=\"line\">            .startProcessInstanceById(processDefId,map);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * é€šè¿‡FormServiceæ¥å¯åŠ¨ä¸€ä¸ªè¡¨å•æµç¨‹</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@throws</span> Exception</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"title function_\">startFormServiceFlow</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> Exception&#123;</span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">processDefId</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;Process_13abncz:1:5d39867a-4b6e-11ed-9748-c03c59ad2248&quot;</span>;</span><br><span class=\"line\">    Map&lt;String,Object&gt; map = <span class=\"keyword\">new</span> <span class=\"title class_\">HashMap</span>&lt;&gt;();</span><br><span class=\"line\">    map.put(<span class=\"string\">&quot;days&quot;</span>,<span class=\"number\">2</span>);</span><br><span class=\"line\">    map.put(<span class=\"string\">&quot;reason&quot;</span>,<span class=\"string\">&quot;å‡ºå»ç©ç©&quot;</span>);</span><br><span class=\"line\">    <span class=\"type\">ProcessInstance</span> <span class=\"variable\">processInstance</span> <span class=\"operator\">=</span> formService.submitStartForm(processDefId,map);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>å¯åŠ¨æµç¨‹åèµ°åˆ°äº†<code>ç”¨æˆ·ä»»åŠ¡1</code>è¿™ä¸ªèŠ‚ç‚¹</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221014162003762.png\"\n                      alt=\"image-20221014162003762\"\n                ></p>\n<p>æƒ³è¦æŸ¥çœ‹å¯¹åº”çš„è¡¨å•æ•°æ®ã€‚é€šè¿‡å¦‚ä¸‹æ–¹æ³•å¯ä»¥å®ç°</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * æ ¹æ®Taskç¼–å·æ¥æŸ¥çœ‹è¡¨å•æ•°æ®</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"title function_\">getTaskFormData</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">taskId</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;426b11e6-4b85-11ed-b15a-c03c59ad2248&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">processDefId</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;Process_13abncz:1:5d39867a-4b6e-11ed-9748-c03c59ad2248&quot;</span>;</span><br><span class=\"line\">    <span class=\"comment\">// æ ¹æ®æµç¨‹å®šä¹‰æ‰¾åˆ°å¯¹åº”çš„ è¡¨å•æ•°æ®ã€‚</span></span><br><span class=\"line\">    <span class=\"type\">StartFormData</span> <span class=\"variable\">startFormData</span> <span class=\"operator\">=</span> formService.getStartFormData(processDefId);</span><br><span class=\"line\">    List&lt;FormField&gt; formFields = startFormData.getFormFields();</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (FormField formField : formFields) &#123;</span><br><span class=\"line\">        <span class=\"comment\">// è·å–æ¯ä¸ªå…·ä½“çš„è¡¨å•åŸŸ</span></span><br><span class=\"line\">        System.out.println(formField.getId() + <span class=\"string\">&quot; &quot;</span> + formField.getLabel() + <span class=\"string\">&quot; &quot;</span> + formField.getValue().getValue());</span><br><span class=\"line\">        <span class=\"comment\">// æ ¹æ®taskId æ‰¾åˆ°å¯¹åº”çš„æµç¨‹å˜é‡çš„å€¼ ä¹Ÿå°±æ˜¯ è¡¨å•çš„æ•°æ®</span></span><br><span class=\"line\">        System.out.println(formField.getId() + <span class=\"string\">&quot; = &quot;</span> + taskService.getVariable(taskId, formField.getId()));</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221014162117179.png\"\n                      alt=\"image-20221014162117179\"\n                ></p>\n<h3 id=\"ä»»åŠ¡èŠ‚ç‚¹ç»‘å®š\"><a href=\"#ä»»åŠ¡èŠ‚ç‚¹ç»‘å®š\" class=\"headerlink\" title=\"ä»»åŠ¡èŠ‚ç‚¹ç»‘å®š\"></a>ä»»åŠ¡èŠ‚ç‚¹ç»‘å®š</h3><p>ä¸Šçš„æ–¹å¼ç»‘å®šçš„è¡¨å•æ•°æ®åœ¨æ•´ä¸ªæµç¨‹å®ä¾‹è¿ä½œä¸­éƒ½å¯ä»¥ä½¿ç”¨ï¼Œè¿˜æœ‰ä¸€ç§æ–¹å¼æˆ‘ä»¬æ˜¯åœ¨å…·ä½“çš„ä»»åŠ¡èŠ‚ç‚¹ä¸Šç»‘å®šè¡¨å•æ•°æ®ã€‚æˆ‘ä»¬æ¥çœ‹çœ‹ã€‚</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221014162658765.png\"\n                      alt=\"image-20221014162658765\"\n                ></p>\n<p>æµç¨‹å›¾ä¸­æ˜¯åœ¨ <code>ç”¨æˆ·ä»»åŠ¡01</code> è¿™ä¸ªèŠ‚ç‚¹ç»‘å®šçš„è¡¨å•æ•°æ®äº†</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221014162905992.png\"\n                      alt=\"image-20221014162905992\"\n                ></p>\n<p>éƒ¨ç½²æµç¨‹ï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * å®Œæˆæµç¨‹çš„éƒ¨ç½²æ“ä½œ</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">deploy</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"type\">Deployment</span> <span class=\"variable\">deploy</span> <span class=\"operator\">=</span> repositoryService.createDeployment()</span><br><span class=\"line\">            .name(<span class=\"string\">&quot;è¡¨å•01&quot;</span>)</span><br><span class=\"line\">            .addClasspathResource(<span class=\"string\">&quot;flow/è¡¨å•-02.bpmn&quot;</span>)</span><br><span class=\"line\">            .deploy();</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;deploy.getId() = &quot;</span> + deploy.getId());</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>å¯åŠ¨ä¸€ä¸ªæµç¨‹å®ä¾‹ï¼šæ™®é€šæµç¨‹å¯åŠ¨</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * æ­£å¸¸çš„å¯åŠ¨æµç¨‹</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"title function_\">startFormFlow</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> Exception&#123;</span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">processDefId</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;Process_1xf3zgp:1:11da0157-4b9a-11ed-8750-c03c59ad2248&quot;</span>;</span><br><span class=\"line\">    <span class=\"type\">ProcessInstance</span> <span class=\"variable\">processInstance</span> <span class=\"operator\">=</span> runtimeService.startProcessInstanceById(processDefId);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ç„¶åç°åœ¨æµç¨‹æ‰§è¡Œåˆ°äº†<code>ç”¨æˆ·ä»»åŠ¡01</code>å‡ºã€‚æˆ‘ä»¬ç»‘å®šçš„æœ‰æµç¨‹è¡¨å•ã€‚æˆ‘ä»¬å¯ä»¥æŸ¥è¯¢çœ‹çœ‹ã€‚å…ˆæ¥æŸ¥è¯¢Taskå¯¹åº”çš„è¡¨å•ä¿¡æ¯</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221014165547832.png\"\n                      alt=\"image-20221014165547832\"\n                ></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"title function_\">getTaskFormData</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">taskId</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;bff75f55-4b9a-11ed-9709-c03c59ad2248&quot;</span>;</span><br><span class=\"line\">    <span class=\"type\">TaskFormData</span> <span class=\"variable\">taskFormData</span> <span class=\"operator\">=</span> formService.getTaskFormData(taskId);</span><br><span class=\"line\">    List&lt;FormField&gt; formFields = taskFormData.getFormFields();</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (FormField formField : formFields) &#123;</span><br><span class=\"line\">        <span class=\"comment\">// è·å–æ¯ä¸ªå…·ä½“çš„è¡¨å•åŸŸ</span></span><br><span class=\"line\">        System.out.println(formField.getId() + <span class=\"string\">&quot; &quot;</span> + formField.getLabel() + <span class=\"string\">&quot; &quot;</span> + formField.getValue().getValue());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221014163939776.png\"\n                      alt=\"image-20221014163939776\"\n                ></p>\n<p>ç„¶åå¯ä»¥ç»™è¡¨å•çš„ç›¸å…³ä¿¡æ¯èµ‹å€¼</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"title function_\">setTaskFormData</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">taskId</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;bff75f55-4b9a-11ed-9709-c03c59ad2248&quot;</span>;</span><br><span class=\"line\">    taskService.setVariable(taskId,<span class=\"string\">&quot;days1&quot;</span>,<span class=\"number\">5</span>);</span><br><span class=\"line\">    taskService.setVariable(taskId,<span class=\"string\">&quot;reason1&quot;</span>,<span class=\"string\">&quot;ä¸ªäººåŸå› &quot;</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ç„¶åå¯ä»¥çœ‹åˆ°è¡¨å•çš„ä¿¡æ¯</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221014165040994.png\"\n                      alt=\"image-20221014165040994\"\n                ></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221014165131403.png\"\n                      alt=\"image-20221014165131403\"\n                ></p>\n<p>å®¡æ‰¹å®Œæˆåˆ°ä¸‹ä¸€ä¸ªèŠ‚ç‚¹</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221014165620888.png\"\n                      alt=\"image-20221014165620888\"\n                ></p>\n<p>è¿™æ—¶æˆ‘ä»¬å†æŸ¥è¯¢ä¸‹çœ‹èƒ½ä¸èƒ½æ‰¾åˆ°å¯¹åº”çš„è¡¨å•ä¿¡æ¯</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221014165737958.png\"\n                      alt=\"image-20221014165737958\"\n                ></p>\n<p>å¥½äº†è¿™ä¸ªæ˜¯æˆ‘ä»¬è®²çš„ç›´æ¥åœ¨æµç¨‹ä¸­å†…åµŒè¡¨å•çš„åº”ç”¨</p>\n<h2 id=\"å¤–ç½®è¡¨å•\"><a href=\"#å¤–ç½®è¡¨å•\" class=\"headerlink\" title=\"å¤–ç½®è¡¨å•\"></a>å¤–ç½®è¡¨å•</h2><p>æˆ‘ä»¬è¿˜å¯ä»¥è‡ªå·±å®šä¹‰ä¸€ä¸ª HTML+JS çš„åŠ¨æ€è¡¨å•ï¼Œç„¶ååœ¨å®¡æ‰¹ç›¸å…³èŠ‚ç‚¹çš„æ—¶å€™æ¸²æŸ“å±•ç¤ºã€‚</p>\n<h3 id=\"å®šä¹‰ä¸€ä¸ªè¡¨å•\"><a href=\"#å®šä¹‰ä¸€ä¸ªè¡¨å•\" class=\"headerlink\" title=\"å®šä¹‰ä¸€ä¸ªè¡¨å•\"></a>å®šä¹‰ä¸€ä¸ªè¡¨å•</h3><p>æˆ‘ä»¬å…ˆå®šä¹‰ä¸€ä¸ªç®€å•çš„è¡¨å•</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221015134123018.png\"\n                      alt=\"image-20221015134123018\"\n                ></p>\n<h3 id=\"æµç¨‹ç»‘å®š\"><a href=\"#æµç¨‹ç»‘å®š\" class=\"headerlink\" title=\"æµç¨‹ç»‘å®š\"></a>æµç¨‹ç»‘å®š</h3><p>ç„¶ååœ¨æµç¨‹è®¾è®¡çš„æ—¶å€™ç»‘å®šå¯¹åº”çš„è¡¨å•</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221015134202377.png\"\n                      alt=\"image-20221015134202377\"\n                ></p>\n<p>éƒ¨ç½²æµç¨‹åå¯åŠ¨</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221015134234163.png\"\n                      alt=\"image-20221015134234163\"\n                ></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20221015134256088.png\"\n                      alt=\"image-20221015134256088\"\n                ></p>\n<p>åœ¨è·³è½¬åçš„åœ°å€ä¸­æœ‰taskIdå’Œå›è°ƒçš„æ¥å£åœ°å€</p>\n"},{"title":"camundaé«˜çº§ç¯‡","date":"2022-10-20T08:38:55.000Z","_content":"# Camunda-çƒ­é—¨å·¥ä½œæµå¼•æ“æ¡†æ¶\n> Lectureï¼šæ³¢å“¥\n\n![image-20220902232358815](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220902232358815.png)\n\n# IDEAå¼•å…¥æµç¨‹è®¾è®¡å™¨\n\nåœ¨å·¥ä½œæµå¼•æ“ä¸­æµç¨‹è®¾è®¡å™¨æ˜¯ä¸€ä¸ªéå¸¸é‡è¦çš„ç»„ä»¶ï¼Œè€Œ`InterlliJ IDEA`æ˜¯Javaç¨‹åºå‘˜ç”¨åˆ°çš„æœ€å¤šçš„ç¼–ç¨‹å·¥å…·äº†ã€‚å‰é¢åœ¨åŸºç¡€ç¯‡çš„ä»‹ç»ä¸­æˆ‘ä»¬éƒ½åœ¨é€šè¿‡Camundaæä¾›çš„æµç¨‹è®¾è®¡å™¨ç»˜åˆ¶å¥½æµç¨‹å›¾ï¼Œç„¶åéœ€è¦å•ç‹¬çš„æ‹·è´åˆ°é¡¹ç›®ä¸­ï¼Œè¦æ˜¯è°ƒæ•´ä¿®æ”¹ä¸æ˜¯å¾ˆæ–¹ä¾¿ï¼Œè¿™æ—¶æˆ‘ä»¬å¯ä»¥åœ¨IDEAä¸­å’Œæµç¨‹è®¾è®¡å™¨ç»‘å®šèµ·æ¥ã€‚è¿™æ ·ä¼šæ›´åŠ çš„çµæ´»ã€‚\n\n## ä¸‹è½½Camunda Model\n\nç¬¬ä¸€æ­¥è‚¯å®šæ˜¯éœ€è¦ä¸‹è½½`Camunda Model` è¿™ä¸ªæµç¨‹è®¾è®¡å™¨ï¼Œæˆ‘ä»¬å‰é¢æœ‰ä»‹ç»ã€‚å°±æ˜¯ä¹‹å‰è§£å‹å¥½çš„ç›®å½•äº†ã€‚\n\n![image-20220907002253021](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220907002253021.png)\n\n\n\n## IDEAä¸­é…ç½®\n\næˆ‘ä»¬å…ˆè¿›å…¥`settings`ä¸­ç„¶åæ‰¾åˆ°`tools`,ç»§ç»­æ‰¾åˆ°`External Tool`.\n\n![image-20220907002432482](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220907002432482.png)\n\n![image-20220907002649744](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220907002649744.png)\n\næœ€ç»ˆæ•ˆæœ\n\n![image-20220907002735603](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220907002735603.png)\n\n\n\n## ç¼–è¾‘bpmnæ–‡ä»¶\n\næ‰¾åˆ°æ‚¨æƒ³æ‰“å¼€çš„bpmnæ–‡ä»¶, ç‚¹å‡»å³é”®, æ‰¾åˆ°External Tools è¿è¡Œcamunda modlerå³å¯è¿›è¡Œæ–‡ä»¶ç¼–å†™.\n\n![image-20220907002851738](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220907002851738.png)\n\næå®š~\n\n\n\n# SpringBootæ•´åˆCamunda\n\n## å®˜æ–¹æ¡ˆä¾‹è¯´æ˜\n\næ¥ä¸‹æ¥æˆ‘ä»¬çœ‹çœ‹æ€ä¹ˆåœ¨æˆ‘ä»¬çš„å®é™…é¡¹ç›®ä¸­æ¥ä½¿ç”¨Camundaäº†ã€‚æ–¹å¼æœ‰å¤šç§ï¼Œé¦–å…ˆæˆ‘ä»¬å¯ä»¥å‚è€ƒå®˜ç½‘æä¾›çš„æ•´åˆæ¡ˆä¾‹ã€‚\n\n![image-20220907003810268](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220907003810268.png)\n\nä½†æ˜¯è¿™é‡Œæœ‰ä¸ªæ¯”è¾ƒå¤´ç–¼çš„é—®é¢˜å°±æ˜¯Camundaå’ŒSpringBootç‰ˆæœ¬çš„å…¼å®¹æ€§é—®é¢˜ï¼Œè™½ç„¶å®˜æ–¹ä¹Ÿç»™å‡ºäº†å…¼å®¹ç‰ˆæœ¬çš„å¯¹ç…§è¡¨ã€‚\n\n![image-20220907003929928](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220907003929928.png)\n\n\n\nä½†æ˜¯å¦‚æœä¸å°å¿ƒè¿˜æ˜¯ä¼šå‡ºç°å„ç§é—®é¢˜ï¼Œæ¯”å¦‚ï¼š\n\n![image-20220907004050862](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220907004050862.png)\n\nä¸Šé¢å°±æ˜¯å…¸å‹çš„ç‰ˆæœ¬ä¸å…¼å®¹çš„é—®é¢˜äº†ã€‚\n\n\n\n## å®˜æ–¹Demo\n\nä¸ºäº†èƒ½è®©æˆ‘ä»¬çš„æ¡ˆä¾‹å¿«é€Ÿæå®šï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡Camundaå®˜æ–¹æä¾›çš„ç½‘ç«™æ¥åˆ›å»ºæˆ‘ä»¬çš„æ¡ˆä¾‹ç¨‹åºã€‚åœ°å€ï¼šhttps://start.camunda.com/\n\n![image-20220907004531764](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220907004531764.png)\n\nç”Ÿæˆä»£ç åï¼Œè§£å‹åæˆ‘ä»¬é€šè¿‡ideaæ‰“å¼€é¡¹ç›®ï¼Œé¡¹ç›®ç»“æ„\n\n![image-20220907010229047](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220907010229047.png)\n\nç›¸å…³çš„pom.xmlä¸­çš„ä¾èµ–\n\n```xml\n<project xmlns=\"http://maven.apache.org/POM/4.0.0\"\n         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n\n  <modelVersion>4.0.0</modelVersion>\n\n  <groupId>com.boge.workflow</groupId>\n  <artifactId>camunda-project-demo</artifactId>\n  <version>1.0.0-SNAPSHOT</version>\n\n  <properties>\n    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>\n    <maven.compiler.source>8</maven.compiler.source>\n    <maven.compiler.target>8</maven.compiler.target>\n  </properties>\n\n  <dependencyManagement>\n    <dependencies>\n      <dependency>\n        <groupId>org.springframework.boot</groupId>\n        <artifactId>spring-boot-dependencies</artifactId>\n        <version>2.4.3</version>\n        <type>pom</type>\n        <scope>import</scope>\n      </dependency>\n\n      <dependency>\n        <groupId>org.camunda.bpm</groupId>\n        <artifactId>camunda-bom</artifactId>\n        <version>7.15.0</version>\n        <scope>import</scope>\n        <type>pom</type>\n      </dependency>\n    </dependencies>\n  </dependencyManagement>\n\n  <dependencies>\n    <dependency>\n      <groupId>org.camunda.bpm.springboot</groupId>\n      <artifactId>camunda-bpm-spring-boot-starter-rest</artifactId>\n    </dependency>\n\n    <dependency>\n      <groupId>org.camunda.bpm.springboot</groupId>\n      <artifactId>camunda-bpm-spring-boot-starter-webapp</artifactId>\n    </dependency>\n\n    <dependency>\n      <groupId>org.camunda.bpm</groupId>\n      <artifactId>camunda-engine-plugin-spin</artifactId>\n    </dependency>\n\n    <dependency>\n      <groupId>org.camunda.spin</groupId>\n      <artifactId>camunda-spin-dataformat-all</artifactId>\n    </dependency>\n\n    <dependency>\n      <groupId>org.springframework.boot</groupId>\n      <artifactId>spring-boot-starter-web</artifactId>\n    </dependency>\n\n    <dependency>\n      <groupId>com.h2database</groupId>\n      <artifactId>h2</artifactId>\n    </dependency>\n\n    <dependency>\n      <groupId>org.springframework.boot</groupId>\n      <artifactId>spring-boot-starter-jdbc</artifactId>\n    </dependency>\n\n  </dependencies>\n\n  <build>\n    <plugins>\n      <plugin>\n        <groupId>org.springframework.boot</groupId>\n        <artifactId>spring-boot-maven-plugin</artifactId>\n        <version>2.4.3</version>\n      </plugin>\n    </plugins>\n  </build>\n\n</project>\n```\n\nå±æ€§æ–‡ä»¶çš„é…ç½®ä¿¡æ¯\n\n```yaml\nspring.datasource.url: jdbc:h2:file:./camunda-h2-database\n\ncamunda.bpm.admin-user:\n  id: demo\n  password: demo\n```\n\nç„¶åé€šè¿‡å¯åŠ¨ç±»å¯åŠ¨ç¨‹åº\n\n![image-20220907010434493](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220907010434493.png)\n\nè®¿é—®æœåŠ¡ï¼šhttp://localhost:8080/\n\n![image-20220907010523901](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220907010523901.png)\n\n\n\n\n\n## MySQLæ•°æ®åº“\n\nä¸Šé¢çš„ä¾‹å­æˆ‘ä»¬æ•°æ®å­˜å‚¨åœ¨äº†H2è¿™ä¸ªå†…å­˜å‹æ•°æ®åº“ï¼Œæˆ‘ä»¬å¯ä»¥åˆ‡æ¢åˆ°`MySQL`æ•°æ®åº“ã€‚é¦–å…ˆæˆ‘ä»¬éœ€è¦å¯¼å…¥ç›¸å…³çš„SQLè„šæœ¬ã€‚ä½ç½®å°±åœ¨æˆ‘ä»¬ä¹‹å‰ä¸‹è½½çš„`Camunda Web`æœåŠ¡ä¸­ã€‚\n\n![image-20220907010729453](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220907010729453.png)\n\næ‰§è¡Œåˆ›å»ºæ‰€æœ‰å¿…éœ€çš„è¡¨å’Œé»˜è®¤ç´¢å¼•çš„SQL DDLè„šæœ¬ã€‚ä¸Šé¢ä¸¤ä¸ªè„šæœ¬éƒ½è¦æ‰§è¡Œã€‚\n\n![image-20220907011030798](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220907011030798.png)\n\nç”Ÿæˆçš„ç›¸å…³è¡¨ç»“æ„æ¯”è¾ƒå¤šï¼Œå› ä¸ºæœ¬èº«å°±æ˜¯åŸºäºActivitiæ¼”å˜è€Œæ¥ï¼Œæ‰€ä»¥æœ‰ActivitiåŸºç¡€çš„å°ä¼™ä¼´ä¼šéå¸¸è½»æ¾äº†ã€‚ç®€å•ä»‹ç»ä¸‹ç›¸å…³è¡¨ç»“æ„çš„ä½œç”¨ã€‚\n\n* **ACT_RE** ï¼š'RE'è¡¨ç¤º repositoryã€‚ è¿™ä¸ªå‰ç¼€çš„è¡¨åŒ…å«äº†æµç¨‹å®šä¹‰å’Œæµç¨‹é™æ€èµ„æº ï¼ˆå›¾ç‰‡ï¼Œè§„åˆ™ï¼Œç­‰ç­‰ï¼‰ã€‚\n* **ACT_RU**ï¼š'RU'è¡¨ç¤º runtimeã€‚ è¿™äº›è¿è¡Œæ—¶çš„è¡¨ï¼ŒåŒ…å«æµç¨‹å®ä¾‹ï¼Œä»»åŠ¡ï¼Œå˜é‡ï¼Œå¼‚æ­¥ä»»åŠ¡ï¼Œç­‰è¿è¡Œä¸­çš„æ•°æ®ã€‚ Flowableåªåœ¨æµç¨‹å®ä¾‹æ‰§è¡Œè¿‡ç¨‹ä¸­ä¿å­˜è¿™äº›æ•°æ®ï¼Œ åœ¨æµç¨‹ç»“æŸæ—¶å°±ä¼šåˆ é™¤è¿™äº›è®°å½•ã€‚ è¿™æ ·è¿è¡Œæ—¶è¡¨å¯ä»¥ä¸€ç›´å¾ˆå°é€Ÿåº¦å¾ˆå¿«ã€‚\n* **ACT_HI**ï¼š'HI'è¡¨ç¤º historyã€‚ è¿™äº›è¡¨åŒ…å«å†å²æ•°æ®ï¼Œæ¯”å¦‚å†å²æµç¨‹å®ä¾‹ï¼Œ å˜é‡ï¼Œä»»åŠ¡ç­‰ç­‰ã€‚\n* **ACT_GE**ï¼š GE è¡¨ç¤º generalã€‚ é€šç”¨æ•°æ®ï¼Œ ç”¨äºä¸åŒåœºæ™¯ä¸‹ \n* **ACT_ID:**   â€™IDâ€™è¡¨ç¤ºidentity(ç»„ç»‡æœºæ„)ã€‚è¿™äº›è¡¨åŒ…å«æ ‡è¯†çš„ä¿¡æ¯ï¼Œå¦‚ç”¨æˆ·ï¼Œç”¨æˆ·ç»„ï¼Œç­‰ç­‰ã€‚\n\nå…·ä½“çš„è¡¨ç»“æ„çš„å«ä¹‰:\n\n| **è¡¨åˆ†ç±»**   | **è¡¨å**              | **è§£é‡Š**                                           |\n| ------------ | --------------------- | -------------------------------------------------- |\n| ä¸€èˆ¬æ•°æ®     |                       |                                                    |\n|              | [ACT_GE_BYTEARRAY]    | é€šç”¨çš„æµç¨‹å®šä¹‰å’Œæµç¨‹èµ„æº                           |\n|              | [ACT_GE_PROPERTY]     | ç³»ç»Ÿç›¸å…³å±æ€§                                       |\n| æµç¨‹å†å²è®°å½• |                       |                                                    |\n|              | [ACT_HI_ACTINST]      | å†å²çš„æµç¨‹å®ä¾‹                                     |\n|              | [ACT_HI_ATTACHMENT]   | å†å²çš„æµç¨‹é™„ä»¶                                     |\n|              | [ACT_HI_COMMENT]      | å†å²çš„è¯´æ˜æ€§ä¿¡æ¯                                   |\n|              | [ACT_HI_DETAIL]       | å†å²çš„æµç¨‹è¿è¡Œä¸­çš„ç»†èŠ‚ä¿¡æ¯                         |\n|              | [ACT_HI_IDENTITYLINK] | å†å²çš„æµç¨‹è¿è¡Œè¿‡ç¨‹ä¸­ç”¨æˆ·å…³ç³»                       |\n|              | [ACT_HI_PROCINST]     | å†å²çš„æµç¨‹å®ä¾‹                                     |\n|              | [ACT_HI_TASKINST]     | å†å²çš„ä»»åŠ¡å®ä¾‹                                     |\n|              | [ACT_HI_VARINST]      | å†å²çš„æµç¨‹è¿è¡Œä¸­çš„å˜é‡ä¿¡æ¯                         |\n| æµç¨‹å®šä¹‰è¡¨   |                       |                                                    |\n|              | [ACT_RE_DEPLOYMENT]   | éƒ¨ç½²å•å…ƒä¿¡æ¯                                       |\n|              | [ACT_RE_MODEL]        | æ¨¡å‹ä¿¡æ¯                                           |\n|              | [ACT_RE_PROCDEF]      | å·²éƒ¨ç½²çš„æµç¨‹å®šä¹‰                                   |\n| è¿è¡Œå®ä¾‹è¡¨   |                       |                                                    |\n|              | [ACT_RU_EVENT_SUBSCR] | è¿è¡Œæ—¶äº‹ä»¶                                         |\n|              | [ACT_RU_EXECUTION]    | è¿è¡Œæ—¶æµç¨‹æ‰§è¡Œå®ä¾‹                                 |\n|              | [ACT_RU_IDENTITYLINK] | è¿è¡Œæ—¶ç”¨æˆ·å…³ç³»ä¿¡æ¯ï¼Œå­˜å‚¨ä»»åŠ¡èŠ‚ç‚¹ä¸å‚ä¸è€…çš„ç›¸å…³ä¿¡æ¯ |\n|              | [ACT_RU_JOB]          | è¿è¡Œæ—¶ä½œä¸š                                         |\n|              | [ACT_RU_TASK]         | è¿è¡Œæ—¶ä»»åŠ¡                                         |\n|              | [ACT_RU_VARIABLE]     | è¿è¡Œæ—¶å˜é‡è¡¨                                       |\n| ç”¨æˆ·ç”¨æˆ·ç»„è¡¨ |                       |                                                    |\n|              | [ACT_ID_BYTEARRAY]    | äºŒè¿›åˆ¶æ•°æ®è¡¨                                       |\n|              | [ACT_ID_GROUP]        | ç”¨æˆ·ç»„ä¿¡æ¯è¡¨                                       |\n|              | [ACT_ID_INFO]         | ç”¨æˆ·ä¿¡æ¯è¯¦æƒ…è¡¨                                     |\n|              | [ACT_ID_MEMBERSHIP]   | äººä¸ç»„å…³ç³»è¡¨                                       |\n|              | [ACT_ID_PRIV]         | æƒé™è¡¨                                             |\n|              | [ACT_ID_PRIV_MAPPING] | ç”¨æˆ·æˆ–ç»„æƒé™å…³ç³»è¡¨                                 |\n|              | [ACT_ID_PROPERTY]     | å±æ€§è¡¨                                             |\n|              | [ACT_ID_TOKEN]        | è®°å½•ç”¨æˆ·çš„tokenä¿¡æ¯                                |\n|              | [ACT_ID_USER]         | ç”¨æˆ·è¡¨                                             |\n\n \n\nç„¶åæˆ‘ä»¬åœ¨SpringBooté¡¹ç›®ä¸­å¯¼å…¥`MySql`çš„ä¾èµ–ï¼Œç„¶åä¿®æ”¹å¯¹åº”çš„é…ç½®ä¿¡æ¯\n\n```xml\n    <dependency>\n      <groupId>mysql</groupId>\n      <artifactId>mysql-connector-java</artifactId>\n    </dependency>\n```\n\nä¿®æ”¹`application.yaml`ã€‚æ·»åŠ æ•°æ®æºçš„ç›¸å…³ä¿¡æ¯ã€‚\n\n```yaml\n# spring.datasource.url: jdbc:h2:file:./camunda-h2-database\n\ncamunda.bpm.admin-user:\n  id: demo\n  password: demo\nspring:\n  datasource:\n    driver-class-name: com.mysql.cj.jdbc.Driver\n    url: jdbc:mysql://127.0.0.1:3306/camunda1?serverTimezone=Asia/Shanghai\n    username: root\n    password: 123456\ncamunda:\n  bpm:\n    database:\n      type: mysql\n      schema-update: true\n    auto-deployment-enabled: false # è‡ªåŠ¨éƒ¨ç½² resources ä¸‹çš„ bpmnæ–‡ä»¶\n```\n\nç„¶åå¯åŠ¨é¡¹ç›®ï¼Œå‘ç°æ•°æ®åº“ä¸­æœ‰äº†ç›¸å…³è®°å½•ï¼Œè¯´æ˜æ“ä½œæˆåŠŸ\n\n![image-20220907011831014](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220907011831014.png)\n\n\n\n\n\n# Camundaä¸“é¢˜è®²è§£\n\nç”¨äº†æ•´åˆçš„åŸºç¡€æˆ‘ä»¬å°±å¯ä»¥æ¥å®Œæˆä¸€ä¸ªæµç¨‹å®¡æ‰¹çš„æ¡ˆä¾‹äº†\n\n## éƒ¨ç½²æµç¨‹\n\n```java\n@RestController\n@RequestMapping(\"/flow\")\npublic class FlowController {\n\n    @Autowired\n    private RepositoryService repositoryService;\n\n    @GetMapping(\"/deploy\")\n    public String deplopy(){\n        Deployment deploy = repositoryService.createDeployment()\n                .name(\"éƒ¨ç½²çš„ç¬¬ä¸€ä¸ªæµç¨‹\") // å®šä¹‰éƒ¨ç½²æ–‡ä»¶çš„åç§°\n                .addClasspathResource(\"process.bpmn\") // ç»‘å®šéœ€è¦éƒ¨ç½²çš„æµç¨‹æ–‡ä»¶\n                .deploy();// éƒ¨ç½²æµç¨‹\n        return deploy.getId() + \":\" + deploy.getName();\n    }\n}\n```\n\nå¯åŠ¨åè®¿é—®æ¥å£å³å¯\n\n## å¯åŠ¨æµç¨‹\n\nå¯åŠ¨æµç¨‹æˆ‘ä»¬é€šè¿‡å•å…ƒæµ‹è¯•æ¥æ“ä½œ\n\n```java\npackage com.boge.workflow;\n\n\nimport org.camunda.bpm.engine.RepositoryService;\nimport org.camunda.bpm.engine.RuntimeService;\nimport org.camunda.bpm.engine.TaskService;\nimport org.camunda.bpm.engine.runtime.ProcessInstance;\nimport org.camunda.bpm.engine.task.Task;\nimport org.junit.jupiter.api.Test;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.test.context.SpringBootTest;\n\nimport java.util.List;\n\n@SpringBootTest(classes = Application.class)\npublic class ApplicationTest {\n\n    @Autowired\n    private RepositoryService repositoryService;\n\n    @Autowired\n    private RuntimeService runtimeService;\n\n    @Autowired\n    private TaskService taskService;\n\n    /**\n     * å¯åŠ¨æµç¨‹çš„æ¡ˆä¾‹\n     */\n    @Test\n    public void startFlow(){\n        // éƒ¨ç½²æµç¨‹\n        ProcessInstance processInstance = runtimeService\n                .startProcessInstanceById(\"1a880f27-2e57-11ed-80d9-c03c59ad2248\");\n        // éƒ¨ç½²çš„æµç¨‹å®ä¾‹çš„ç›¸å…³ä¿¡æ¯\n        System.out.println(\"processInstance.getId() = \" + processInstance.getId());\n        System.out.println(\"processInstance.getProcessDefinitionId() = \" + processInstance.getProcessDefinitionId());\n    }\n\n\n}\n\n```\n\n\n\n## æŸ¥è¯¢å¾…åŠ\n\næŸ¥è¯¢å¾…åŠä¹Ÿå°±æ˜¯æŸ¥çœ‹å½“å‰éœ€è¦å®¡æ‰¹çš„ä»»åŠ¡ï¼Œé€šè¿‡TaskServiceæ¥å¤„ç†\n\n```java\n    /**\n     * æŸ¥è¯¢ä»»åŠ¡\n     *    å¾…åŠ\n     *\n     *  æµç¨‹å®šä¹‰ID:processDefinition : æˆ‘ä»¬éƒ¨ç½²æµç¨‹çš„æ—¶å€™ä¼šï¼Œæ¯ä¸€ä¸ªæµç¨‹éƒ½ä¼šäº§ç”Ÿä¸€ä¸ªæµç¨‹å®šä¹‰ID\n     *  æµç¨‹å®ä¾‹ID:processInstance ï¼šæˆ‘ä»¬å¯åŠ¨æµç¨‹å®ä¾‹çš„æ—¶å€™ï¼Œä¼šäº§ç”Ÿä¸€ä¸ªæµç¨‹å®ä¾‹ID\n     */\n    @Test\n    public void queryTask(){\n        List<Task> list = taskService.createTaskQuery()\n                //.processInstanceId(\"eff78817-2e58-11ed-aa3f-c03c59ad2248\")\n                .taskAssignee(\"demo1\")\n                .list();\n        if(list != null && list.size() > 0){\n            for (Task task : list) {\n                System.out.println(\"task.getId() = \" + task.getId());\n                System.out.println(\"task.getAssignee() = \" + task.getAssignee());\n            }\n        }\n    }\n```\n\n\n\n## å®Œæˆä»»åŠ¡\n\n```java\n   /**\n     * å®Œæˆä»»åŠ¡\n     */\n    @Test\n    public void completeTask(){\n        // æ ¹æ®ç”¨æˆ·æ‰¾åˆ°å…³è”çš„Task\n        Task task = taskService.createTaskQuery()\n                //.processInstanceId(\"eff78817-2e58-11ed-aa3f-c03c59ad2248\")\n                .taskAssignee(\"demo\")\n                .singleResult();\n        if(task != null ){\n            taskService.complete(task.getId());\n            System.out.println(\"ä»»åŠ¡å®¡æ‰¹å®Œæˆ...\");\n        }\n    }\n```\n\n\n\n\n\n\n\n\n\n\n\nå¥½äº†~åˆ°æ­¤Camundaçš„åŸºç¡€å…¥é—¨æ¡ˆä¾‹æˆ‘ä»¬å°±è®²è§£åˆ°è¿™é‡Œï¼Œéœ€è¦è·å–æ›´å¤šCamundaç›¸å…³è¯¾ç¨‹è§†é¢‘çš„å¯ä»¥ç»§ç»­å…³æ³¨æ³¢å“¥çš„Bè´¦å·ï¼Œæˆ–è€…æ·»åŠ æ³¢å“¥å¾®ä¿¡(boge_java/boge3306)\n\n![image-20220904115333970](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220904115333970.png)\n\n","source":"_posts/2022/10/camundaé«˜çº§ç¯‡.md","raw":"---\ntitle: camundaé«˜çº§ç¯‡\ndate: 2022-10-20 16:38:55\ntags: [BPMN,camunda]\ncategories: [ç¬”è®°]\n---\n# Camunda-çƒ­é—¨å·¥ä½œæµå¼•æ“æ¡†æ¶\n> Lectureï¼šæ³¢å“¥\n\n![image-20220902232358815](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220902232358815.png)\n\n# IDEAå¼•å…¥æµç¨‹è®¾è®¡å™¨\n\nåœ¨å·¥ä½œæµå¼•æ“ä¸­æµç¨‹è®¾è®¡å™¨æ˜¯ä¸€ä¸ªéå¸¸é‡è¦çš„ç»„ä»¶ï¼Œè€Œ`InterlliJ IDEA`æ˜¯Javaç¨‹åºå‘˜ç”¨åˆ°çš„æœ€å¤šçš„ç¼–ç¨‹å·¥å…·äº†ã€‚å‰é¢åœ¨åŸºç¡€ç¯‡çš„ä»‹ç»ä¸­æˆ‘ä»¬éƒ½åœ¨é€šè¿‡Camundaæä¾›çš„æµç¨‹è®¾è®¡å™¨ç»˜åˆ¶å¥½æµç¨‹å›¾ï¼Œç„¶åéœ€è¦å•ç‹¬çš„æ‹·è´åˆ°é¡¹ç›®ä¸­ï¼Œè¦æ˜¯è°ƒæ•´ä¿®æ”¹ä¸æ˜¯å¾ˆæ–¹ä¾¿ï¼Œè¿™æ—¶æˆ‘ä»¬å¯ä»¥åœ¨IDEAä¸­å’Œæµç¨‹è®¾è®¡å™¨ç»‘å®šèµ·æ¥ã€‚è¿™æ ·ä¼šæ›´åŠ çš„çµæ´»ã€‚\n\n## ä¸‹è½½Camunda Model\n\nç¬¬ä¸€æ­¥è‚¯å®šæ˜¯éœ€è¦ä¸‹è½½`Camunda Model` è¿™ä¸ªæµç¨‹è®¾è®¡å™¨ï¼Œæˆ‘ä»¬å‰é¢æœ‰ä»‹ç»ã€‚å°±æ˜¯ä¹‹å‰è§£å‹å¥½çš„ç›®å½•äº†ã€‚\n\n![image-20220907002253021](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220907002253021.png)\n\n\n\n## IDEAä¸­é…ç½®\n\næˆ‘ä»¬å…ˆè¿›å…¥`settings`ä¸­ç„¶åæ‰¾åˆ°`tools`,ç»§ç»­æ‰¾åˆ°`External Tool`.\n\n![image-20220907002432482](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220907002432482.png)\n\n![image-20220907002649744](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220907002649744.png)\n\næœ€ç»ˆæ•ˆæœ\n\n![image-20220907002735603](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220907002735603.png)\n\n\n\n## ç¼–è¾‘bpmnæ–‡ä»¶\n\næ‰¾åˆ°æ‚¨æƒ³æ‰“å¼€çš„bpmnæ–‡ä»¶, ç‚¹å‡»å³é”®, æ‰¾åˆ°External Tools è¿è¡Œcamunda modlerå³å¯è¿›è¡Œæ–‡ä»¶ç¼–å†™.\n\n![image-20220907002851738](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220907002851738.png)\n\næå®š~\n\n\n\n# SpringBootæ•´åˆCamunda\n\n## å®˜æ–¹æ¡ˆä¾‹è¯´æ˜\n\næ¥ä¸‹æ¥æˆ‘ä»¬çœ‹çœ‹æ€ä¹ˆåœ¨æˆ‘ä»¬çš„å®é™…é¡¹ç›®ä¸­æ¥ä½¿ç”¨Camundaäº†ã€‚æ–¹å¼æœ‰å¤šç§ï¼Œé¦–å…ˆæˆ‘ä»¬å¯ä»¥å‚è€ƒå®˜ç½‘æä¾›çš„æ•´åˆæ¡ˆä¾‹ã€‚\n\n![image-20220907003810268](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220907003810268.png)\n\nä½†æ˜¯è¿™é‡Œæœ‰ä¸ªæ¯”è¾ƒå¤´ç–¼çš„é—®é¢˜å°±æ˜¯Camundaå’ŒSpringBootç‰ˆæœ¬çš„å…¼å®¹æ€§é—®é¢˜ï¼Œè™½ç„¶å®˜æ–¹ä¹Ÿç»™å‡ºäº†å…¼å®¹ç‰ˆæœ¬çš„å¯¹ç…§è¡¨ã€‚\n\n![image-20220907003929928](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220907003929928.png)\n\n\n\nä½†æ˜¯å¦‚æœä¸å°å¿ƒè¿˜æ˜¯ä¼šå‡ºç°å„ç§é—®é¢˜ï¼Œæ¯”å¦‚ï¼š\n\n![image-20220907004050862](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220907004050862.png)\n\nä¸Šé¢å°±æ˜¯å…¸å‹çš„ç‰ˆæœ¬ä¸å…¼å®¹çš„é—®é¢˜äº†ã€‚\n\n\n\n## å®˜æ–¹Demo\n\nä¸ºäº†èƒ½è®©æˆ‘ä»¬çš„æ¡ˆä¾‹å¿«é€Ÿæå®šï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡Camundaå®˜æ–¹æä¾›çš„ç½‘ç«™æ¥åˆ›å»ºæˆ‘ä»¬çš„æ¡ˆä¾‹ç¨‹åºã€‚åœ°å€ï¼šhttps://start.camunda.com/\n\n![image-20220907004531764](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220907004531764.png)\n\nç”Ÿæˆä»£ç åï¼Œè§£å‹åæˆ‘ä»¬é€šè¿‡ideaæ‰“å¼€é¡¹ç›®ï¼Œé¡¹ç›®ç»“æ„\n\n![image-20220907010229047](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220907010229047.png)\n\nç›¸å…³çš„pom.xmlä¸­çš„ä¾èµ–\n\n```xml\n<project xmlns=\"http://maven.apache.org/POM/4.0.0\"\n         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n\n  <modelVersion>4.0.0</modelVersion>\n\n  <groupId>com.boge.workflow</groupId>\n  <artifactId>camunda-project-demo</artifactId>\n  <version>1.0.0-SNAPSHOT</version>\n\n  <properties>\n    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>\n    <maven.compiler.source>8</maven.compiler.source>\n    <maven.compiler.target>8</maven.compiler.target>\n  </properties>\n\n  <dependencyManagement>\n    <dependencies>\n      <dependency>\n        <groupId>org.springframework.boot</groupId>\n        <artifactId>spring-boot-dependencies</artifactId>\n        <version>2.4.3</version>\n        <type>pom</type>\n        <scope>import</scope>\n      </dependency>\n\n      <dependency>\n        <groupId>org.camunda.bpm</groupId>\n        <artifactId>camunda-bom</artifactId>\n        <version>7.15.0</version>\n        <scope>import</scope>\n        <type>pom</type>\n      </dependency>\n    </dependencies>\n  </dependencyManagement>\n\n  <dependencies>\n    <dependency>\n      <groupId>org.camunda.bpm.springboot</groupId>\n      <artifactId>camunda-bpm-spring-boot-starter-rest</artifactId>\n    </dependency>\n\n    <dependency>\n      <groupId>org.camunda.bpm.springboot</groupId>\n      <artifactId>camunda-bpm-spring-boot-starter-webapp</artifactId>\n    </dependency>\n\n    <dependency>\n      <groupId>org.camunda.bpm</groupId>\n      <artifactId>camunda-engine-plugin-spin</artifactId>\n    </dependency>\n\n    <dependency>\n      <groupId>org.camunda.spin</groupId>\n      <artifactId>camunda-spin-dataformat-all</artifactId>\n    </dependency>\n\n    <dependency>\n      <groupId>org.springframework.boot</groupId>\n      <artifactId>spring-boot-starter-web</artifactId>\n    </dependency>\n\n    <dependency>\n      <groupId>com.h2database</groupId>\n      <artifactId>h2</artifactId>\n    </dependency>\n\n    <dependency>\n      <groupId>org.springframework.boot</groupId>\n      <artifactId>spring-boot-starter-jdbc</artifactId>\n    </dependency>\n\n  </dependencies>\n\n  <build>\n    <plugins>\n      <plugin>\n        <groupId>org.springframework.boot</groupId>\n        <artifactId>spring-boot-maven-plugin</artifactId>\n        <version>2.4.3</version>\n      </plugin>\n    </plugins>\n  </build>\n\n</project>\n```\n\nå±æ€§æ–‡ä»¶çš„é…ç½®ä¿¡æ¯\n\n```yaml\nspring.datasource.url: jdbc:h2:file:./camunda-h2-database\n\ncamunda.bpm.admin-user:\n  id: demo\n  password: demo\n```\n\nç„¶åé€šè¿‡å¯åŠ¨ç±»å¯åŠ¨ç¨‹åº\n\n![image-20220907010434493](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220907010434493.png)\n\nè®¿é—®æœåŠ¡ï¼šhttp://localhost:8080/\n\n![image-20220907010523901](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220907010523901.png)\n\n\n\n\n\n## MySQLæ•°æ®åº“\n\nä¸Šé¢çš„ä¾‹å­æˆ‘ä»¬æ•°æ®å­˜å‚¨åœ¨äº†H2è¿™ä¸ªå†…å­˜å‹æ•°æ®åº“ï¼Œæˆ‘ä»¬å¯ä»¥åˆ‡æ¢åˆ°`MySQL`æ•°æ®åº“ã€‚é¦–å…ˆæˆ‘ä»¬éœ€è¦å¯¼å…¥ç›¸å…³çš„SQLè„šæœ¬ã€‚ä½ç½®å°±åœ¨æˆ‘ä»¬ä¹‹å‰ä¸‹è½½çš„`Camunda Web`æœåŠ¡ä¸­ã€‚\n\n![image-20220907010729453](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220907010729453.png)\n\næ‰§è¡Œåˆ›å»ºæ‰€æœ‰å¿…éœ€çš„è¡¨å’Œé»˜è®¤ç´¢å¼•çš„SQL DDLè„šæœ¬ã€‚ä¸Šé¢ä¸¤ä¸ªè„šæœ¬éƒ½è¦æ‰§è¡Œã€‚\n\n![image-20220907011030798](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220907011030798.png)\n\nç”Ÿæˆçš„ç›¸å…³è¡¨ç»“æ„æ¯”è¾ƒå¤šï¼Œå› ä¸ºæœ¬èº«å°±æ˜¯åŸºäºActivitiæ¼”å˜è€Œæ¥ï¼Œæ‰€ä»¥æœ‰ActivitiåŸºç¡€çš„å°ä¼™ä¼´ä¼šéå¸¸è½»æ¾äº†ã€‚ç®€å•ä»‹ç»ä¸‹ç›¸å…³è¡¨ç»“æ„çš„ä½œç”¨ã€‚\n\n* **ACT_RE** ï¼š'RE'è¡¨ç¤º repositoryã€‚ è¿™ä¸ªå‰ç¼€çš„è¡¨åŒ…å«äº†æµç¨‹å®šä¹‰å’Œæµç¨‹é™æ€èµ„æº ï¼ˆå›¾ç‰‡ï¼Œè§„åˆ™ï¼Œç­‰ç­‰ï¼‰ã€‚\n* **ACT_RU**ï¼š'RU'è¡¨ç¤º runtimeã€‚ è¿™äº›è¿è¡Œæ—¶çš„è¡¨ï¼ŒåŒ…å«æµç¨‹å®ä¾‹ï¼Œä»»åŠ¡ï¼Œå˜é‡ï¼Œå¼‚æ­¥ä»»åŠ¡ï¼Œç­‰è¿è¡Œä¸­çš„æ•°æ®ã€‚ Flowableåªåœ¨æµç¨‹å®ä¾‹æ‰§è¡Œè¿‡ç¨‹ä¸­ä¿å­˜è¿™äº›æ•°æ®ï¼Œ åœ¨æµç¨‹ç»“æŸæ—¶å°±ä¼šåˆ é™¤è¿™äº›è®°å½•ã€‚ è¿™æ ·è¿è¡Œæ—¶è¡¨å¯ä»¥ä¸€ç›´å¾ˆå°é€Ÿåº¦å¾ˆå¿«ã€‚\n* **ACT_HI**ï¼š'HI'è¡¨ç¤º historyã€‚ è¿™äº›è¡¨åŒ…å«å†å²æ•°æ®ï¼Œæ¯”å¦‚å†å²æµç¨‹å®ä¾‹ï¼Œ å˜é‡ï¼Œä»»åŠ¡ç­‰ç­‰ã€‚\n* **ACT_GE**ï¼š GE è¡¨ç¤º generalã€‚ é€šç”¨æ•°æ®ï¼Œ ç”¨äºä¸åŒåœºæ™¯ä¸‹ \n* **ACT_ID:**   â€™IDâ€™è¡¨ç¤ºidentity(ç»„ç»‡æœºæ„)ã€‚è¿™äº›è¡¨åŒ…å«æ ‡è¯†çš„ä¿¡æ¯ï¼Œå¦‚ç”¨æˆ·ï¼Œç”¨æˆ·ç»„ï¼Œç­‰ç­‰ã€‚\n\nå…·ä½“çš„è¡¨ç»“æ„çš„å«ä¹‰:\n\n| **è¡¨åˆ†ç±»**   | **è¡¨å**              | **è§£é‡Š**                                           |\n| ------------ | --------------------- | -------------------------------------------------- |\n| ä¸€èˆ¬æ•°æ®     |                       |                                                    |\n|              | [ACT_GE_BYTEARRAY]    | é€šç”¨çš„æµç¨‹å®šä¹‰å’Œæµç¨‹èµ„æº                           |\n|              | [ACT_GE_PROPERTY]     | ç³»ç»Ÿç›¸å…³å±æ€§                                       |\n| æµç¨‹å†å²è®°å½• |                       |                                                    |\n|              | [ACT_HI_ACTINST]      | å†å²çš„æµç¨‹å®ä¾‹                                     |\n|              | [ACT_HI_ATTACHMENT]   | å†å²çš„æµç¨‹é™„ä»¶                                     |\n|              | [ACT_HI_COMMENT]      | å†å²çš„è¯´æ˜æ€§ä¿¡æ¯                                   |\n|              | [ACT_HI_DETAIL]       | å†å²çš„æµç¨‹è¿è¡Œä¸­çš„ç»†èŠ‚ä¿¡æ¯                         |\n|              | [ACT_HI_IDENTITYLINK] | å†å²çš„æµç¨‹è¿è¡Œè¿‡ç¨‹ä¸­ç”¨æˆ·å…³ç³»                       |\n|              | [ACT_HI_PROCINST]     | å†å²çš„æµç¨‹å®ä¾‹                                     |\n|              | [ACT_HI_TASKINST]     | å†å²çš„ä»»åŠ¡å®ä¾‹                                     |\n|              | [ACT_HI_VARINST]      | å†å²çš„æµç¨‹è¿è¡Œä¸­çš„å˜é‡ä¿¡æ¯                         |\n| æµç¨‹å®šä¹‰è¡¨   |                       |                                                    |\n|              | [ACT_RE_DEPLOYMENT]   | éƒ¨ç½²å•å…ƒä¿¡æ¯                                       |\n|              | [ACT_RE_MODEL]        | æ¨¡å‹ä¿¡æ¯                                           |\n|              | [ACT_RE_PROCDEF]      | å·²éƒ¨ç½²çš„æµç¨‹å®šä¹‰                                   |\n| è¿è¡Œå®ä¾‹è¡¨   |                       |                                                    |\n|              | [ACT_RU_EVENT_SUBSCR] | è¿è¡Œæ—¶äº‹ä»¶                                         |\n|              | [ACT_RU_EXECUTION]    | è¿è¡Œæ—¶æµç¨‹æ‰§è¡Œå®ä¾‹                                 |\n|              | [ACT_RU_IDENTITYLINK] | è¿è¡Œæ—¶ç”¨æˆ·å…³ç³»ä¿¡æ¯ï¼Œå­˜å‚¨ä»»åŠ¡èŠ‚ç‚¹ä¸å‚ä¸è€…çš„ç›¸å…³ä¿¡æ¯ |\n|              | [ACT_RU_JOB]          | è¿è¡Œæ—¶ä½œä¸š                                         |\n|              | [ACT_RU_TASK]         | è¿è¡Œæ—¶ä»»åŠ¡                                         |\n|              | [ACT_RU_VARIABLE]     | è¿è¡Œæ—¶å˜é‡è¡¨                                       |\n| ç”¨æˆ·ç”¨æˆ·ç»„è¡¨ |                       |                                                    |\n|              | [ACT_ID_BYTEARRAY]    | äºŒè¿›åˆ¶æ•°æ®è¡¨                                       |\n|              | [ACT_ID_GROUP]        | ç”¨æˆ·ç»„ä¿¡æ¯è¡¨                                       |\n|              | [ACT_ID_INFO]         | ç”¨æˆ·ä¿¡æ¯è¯¦æƒ…è¡¨                                     |\n|              | [ACT_ID_MEMBERSHIP]   | äººä¸ç»„å…³ç³»è¡¨                                       |\n|              | [ACT_ID_PRIV]         | æƒé™è¡¨                                             |\n|              | [ACT_ID_PRIV_MAPPING] | ç”¨æˆ·æˆ–ç»„æƒé™å…³ç³»è¡¨                                 |\n|              | [ACT_ID_PROPERTY]     | å±æ€§è¡¨                                             |\n|              | [ACT_ID_TOKEN]        | è®°å½•ç”¨æˆ·çš„tokenä¿¡æ¯                                |\n|              | [ACT_ID_USER]         | ç”¨æˆ·è¡¨                                             |\n\n \n\nç„¶åæˆ‘ä»¬åœ¨SpringBooté¡¹ç›®ä¸­å¯¼å…¥`MySql`çš„ä¾èµ–ï¼Œç„¶åä¿®æ”¹å¯¹åº”çš„é…ç½®ä¿¡æ¯\n\n```xml\n    <dependency>\n      <groupId>mysql</groupId>\n      <artifactId>mysql-connector-java</artifactId>\n    </dependency>\n```\n\nä¿®æ”¹`application.yaml`ã€‚æ·»åŠ æ•°æ®æºçš„ç›¸å…³ä¿¡æ¯ã€‚\n\n```yaml\n# spring.datasource.url: jdbc:h2:file:./camunda-h2-database\n\ncamunda.bpm.admin-user:\n  id: demo\n  password: demo\nspring:\n  datasource:\n    driver-class-name: com.mysql.cj.jdbc.Driver\n    url: jdbc:mysql://127.0.0.1:3306/camunda1?serverTimezone=Asia/Shanghai\n    username: root\n    password: 123456\ncamunda:\n  bpm:\n    database:\n      type: mysql\n      schema-update: true\n    auto-deployment-enabled: false # è‡ªåŠ¨éƒ¨ç½² resources ä¸‹çš„ bpmnæ–‡ä»¶\n```\n\nç„¶åå¯åŠ¨é¡¹ç›®ï¼Œå‘ç°æ•°æ®åº“ä¸­æœ‰äº†ç›¸å…³è®°å½•ï¼Œè¯´æ˜æ“ä½œæˆåŠŸ\n\n![image-20220907011831014](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220907011831014.png)\n\n\n\n\n\n# Camundaä¸“é¢˜è®²è§£\n\nç”¨äº†æ•´åˆçš„åŸºç¡€æˆ‘ä»¬å°±å¯ä»¥æ¥å®Œæˆä¸€ä¸ªæµç¨‹å®¡æ‰¹çš„æ¡ˆä¾‹äº†\n\n## éƒ¨ç½²æµç¨‹\n\n```java\n@RestController\n@RequestMapping(\"/flow\")\npublic class FlowController {\n\n    @Autowired\n    private RepositoryService repositoryService;\n\n    @GetMapping(\"/deploy\")\n    public String deplopy(){\n        Deployment deploy = repositoryService.createDeployment()\n                .name(\"éƒ¨ç½²çš„ç¬¬ä¸€ä¸ªæµç¨‹\") // å®šä¹‰éƒ¨ç½²æ–‡ä»¶çš„åç§°\n                .addClasspathResource(\"process.bpmn\") // ç»‘å®šéœ€è¦éƒ¨ç½²çš„æµç¨‹æ–‡ä»¶\n                .deploy();// éƒ¨ç½²æµç¨‹\n        return deploy.getId() + \":\" + deploy.getName();\n    }\n}\n```\n\nå¯åŠ¨åè®¿é—®æ¥å£å³å¯\n\n## å¯åŠ¨æµç¨‹\n\nå¯åŠ¨æµç¨‹æˆ‘ä»¬é€šè¿‡å•å…ƒæµ‹è¯•æ¥æ“ä½œ\n\n```java\npackage com.boge.workflow;\n\n\nimport org.camunda.bpm.engine.RepositoryService;\nimport org.camunda.bpm.engine.RuntimeService;\nimport org.camunda.bpm.engine.TaskService;\nimport org.camunda.bpm.engine.runtime.ProcessInstance;\nimport org.camunda.bpm.engine.task.Task;\nimport org.junit.jupiter.api.Test;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.test.context.SpringBootTest;\n\nimport java.util.List;\n\n@SpringBootTest(classes = Application.class)\npublic class ApplicationTest {\n\n    @Autowired\n    private RepositoryService repositoryService;\n\n    @Autowired\n    private RuntimeService runtimeService;\n\n    @Autowired\n    private TaskService taskService;\n\n    /**\n     * å¯åŠ¨æµç¨‹çš„æ¡ˆä¾‹\n     */\n    @Test\n    public void startFlow(){\n        // éƒ¨ç½²æµç¨‹\n        ProcessInstance processInstance = runtimeService\n                .startProcessInstanceById(\"1a880f27-2e57-11ed-80d9-c03c59ad2248\");\n        // éƒ¨ç½²çš„æµç¨‹å®ä¾‹çš„ç›¸å…³ä¿¡æ¯\n        System.out.println(\"processInstance.getId() = \" + processInstance.getId());\n        System.out.println(\"processInstance.getProcessDefinitionId() = \" + processInstance.getProcessDefinitionId());\n    }\n\n\n}\n\n```\n\n\n\n## æŸ¥è¯¢å¾…åŠ\n\næŸ¥è¯¢å¾…åŠä¹Ÿå°±æ˜¯æŸ¥çœ‹å½“å‰éœ€è¦å®¡æ‰¹çš„ä»»åŠ¡ï¼Œé€šè¿‡TaskServiceæ¥å¤„ç†\n\n```java\n    /**\n     * æŸ¥è¯¢ä»»åŠ¡\n     *    å¾…åŠ\n     *\n     *  æµç¨‹å®šä¹‰ID:processDefinition : æˆ‘ä»¬éƒ¨ç½²æµç¨‹çš„æ—¶å€™ä¼šï¼Œæ¯ä¸€ä¸ªæµç¨‹éƒ½ä¼šäº§ç”Ÿä¸€ä¸ªæµç¨‹å®šä¹‰ID\n     *  æµç¨‹å®ä¾‹ID:processInstance ï¼šæˆ‘ä»¬å¯åŠ¨æµç¨‹å®ä¾‹çš„æ—¶å€™ï¼Œä¼šäº§ç”Ÿä¸€ä¸ªæµç¨‹å®ä¾‹ID\n     */\n    @Test\n    public void queryTask(){\n        List<Task> list = taskService.createTaskQuery()\n                //.processInstanceId(\"eff78817-2e58-11ed-aa3f-c03c59ad2248\")\n                .taskAssignee(\"demo1\")\n                .list();\n        if(list != null && list.size() > 0){\n            for (Task task : list) {\n                System.out.println(\"task.getId() = \" + task.getId());\n                System.out.println(\"task.getAssignee() = \" + task.getAssignee());\n            }\n        }\n    }\n```\n\n\n\n## å®Œæˆä»»åŠ¡\n\n```java\n   /**\n     * å®Œæˆä»»åŠ¡\n     */\n    @Test\n    public void completeTask(){\n        // æ ¹æ®ç”¨æˆ·æ‰¾åˆ°å…³è”çš„Task\n        Task task = taskService.createTaskQuery()\n                //.processInstanceId(\"eff78817-2e58-11ed-aa3f-c03c59ad2248\")\n                .taskAssignee(\"demo\")\n                .singleResult();\n        if(task != null ){\n            taskService.complete(task.getId());\n            System.out.println(\"ä»»åŠ¡å®¡æ‰¹å®Œæˆ...\");\n        }\n    }\n```\n\n\n\n\n\n\n\n\n\n\n\nå¥½äº†~åˆ°æ­¤Camundaçš„åŸºç¡€å…¥é—¨æ¡ˆä¾‹æˆ‘ä»¬å°±è®²è§£åˆ°è¿™é‡Œï¼Œéœ€è¦è·å–æ›´å¤šCamundaç›¸å…³è¯¾ç¨‹è§†é¢‘çš„å¯ä»¥ç»§ç»­å…³æ³¨æ³¢å“¥çš„Bè´¦å·ï¼Œæˆ–è€…æ·»åŠ æ³¢å“¥å¾®ä¿¡(boge_java/boge3306)\n\n![image-20220904115333970](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220904115333970.png)\n\n","slug":"camundaé«˜çº§ç¯‡","published":1,"updated":"2022-11-05T14:16:59.507Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clas9ersl0007dk8f75x38ipw","content":"<h1 id=\"Camunda-çƒ­é—¨å·¥ä½œæµå¼•æ“æ¡†æ¶\"><a href=\"#Camunda-çƒ­é—¨å·¥ä½œæµå¼•æ“æ¡†æ¶\" class=\"headerlink\" title=\"Camunda-çƒ­é—¨å·¥ä½œæµå¼•æ“æ¡†æ¶\"></a>Camunda-çƒ­é—¨å·¥ä½œæµå¼•æ“æ¡†æ¶</h1><blockquote>\n<p>Lectureï¼šæ³¢å“¥</p>\n</blockquote>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220902232358815.png\"\n                      alt=\"image-20220902232358815\"\n                ></p>\n<h1 id=\"IDEAå¼•å…¥æµç¨‹è®¾è®¡å™¨\"><a href=\"#IDEAå¼•å…¥æµç¨‹è®¾è®¡å™¨\" class=\"headerlink\" title=\"IDEAå¼•å…¥æµç¨‹è®¾è®¡å™¨\"></a>IDEAå¼•å…¥æµç¨‹è®¾è®¡å™¨</h1><p>åœ¨å·¥ä½œæµå¼•æ“ä¸­æµç¨‹è®¾è®¡å™¨æ˜¯ä¸€ä¸ªéå¸¸é‡è¦çš„ç»„ä»¶ï¼Œè€Œ<code>InterlliJ IDEA</code>æ˜¯Javaç¨‹åºå‘˜ç”¨åˆ°çš„æœ€å¤šçš„ç¼–ç¨‹å·¥å…·äº†ã€‚å‰é¢åœ¨åŸºç¡€ç¯‡çš„ä»‹ç»ä¸­æˆ‘ä»¬éƒ½åœ¨é€šè¿‡Camundaæä¾›çš„æµç¨‹è®¾è®¡å™¨ç»˜åˆ¶å¥½æµç¨‹å›¾ï¼Œç„¶åéœ€è¦å•ç‹¬çš„æ‹·è´åˆ°é¡¹ç›®ä¸­ï¼Œè¦æ˜¯è°ƒæ•´ä¿®æ”¹ä¸æ˜¯å¾ˆæ–¹ä¾¿ï¼Œè¿™æ—¶æˆ‘ä»¬å¯ä»¥åœ¨IDEAä¸­å’Œæµç¨‹è®¾è®¡å™¨ç»‘å®šèµ·æ¥ã€‚è¿™æ ·ä¼šæ›´åŠ çš„çµæ´»ã€‚</p>\n<h2 id=\"ä¸‹è½½Camunda-Model\"><a href=\"#ä¸‹è½½Camunda-Model\" class=\"headerlink\" title=\"ä¸‹è½½Camunda Model\"></a>ä¸‹è½½Camunda Model</h2><p>ç¬¬ä¸€æ­¥è‚¯å®šæ˜¯éœ€è¦ä¸‹è½½<code>Camunda Model</code> è¿™ä¸ªæµç¨‹è®¾è®¡å™¨ï¼Œæˆ‘ä»¬å‰é¢æœ‰ä»‹ç»ã€‚å°±æ˜¯ä¹‹å‰è§£å‹å¥½çš„ç›®å½•äº†ã€‚</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220907002253021.png\"\n                      alt=\"image-20220907002253021\"\n                ></p>\n<h2 id=\"IDEAä¸­é…ç½®\"><a href=\"#IDEAä¸­é…ç½®\" class=\"headerlink\" title=\"IDEAä¸­é…ç½®\"></a>IDEAä¸­é…ç½®</h2><p>æˆ‘ä»¬å…ˆè¿›å…¥<code>settings</code>ä¸­ç„¶åæ‰¾åˆ°<code>tools</code>,ç»§ç»­æ‰¾åˆ°<code>External Tool</code>.</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220907002432482.png\"\n                      alt=\"image-20220907002432482\"\n                ></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220907002649744.png\"\n                      alt=\"image-20220907002649744\"\n                ></p>\n<p>æœ€ç»ˆæ•ˆæœ</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220907002735603.png\"\n                      alt=\"image-20220907002735603\"\n                ></p>\n<h2 id=\"ç¼–è¾‘bpmnæ–‡ä»¶\"><a href=\"#ç¼–è¾‘bpmnæ–‡ä»¶\" class=\"headerlink\" title=\"ç¼–è¾‘bpmnæ–‡ä»¶\"></a>ç¼–è¾‘bpmnæ–‡ä»¶</h2><p>æ‰¾åˆ°æ‚¨æƒ³æ‰“å¼€çš„bpmnæ–‡ä»¶, ç‚¹å‡»å³é”®, æ‰¾åˆ°External Tools è¿è¡Œcamunda modlerå³å¯è¿›è¡Œæ–‡ä»¶ç¼–å†™.</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220907002851738.png\"\n                      alt=\"image-20220907002851738\"\n                ></p>\n<p>æå®š~</p>\n<h1 id=\"SpringBootæ•´åˆCamunda\"><a href=\"#SpringBootæ•´åˆCamunda\" class=\"headerlink\" title=\"SpringBootæ•´åˆCamunda\"></a>SpringBootæ•´åˆCamunda</h1><h2 id=\"å®˜æ–¹æ¡ˆä¾‹è¯´æ˜\"><a href=\"#å®˜æ–¹æ¡ˆä¾‹è¯´æ˜\" class=\"headerlink\" title=\"å®˜æ–¹æ¡ˆä¾‹è¯´æ˜\"></a>å®˜æ–¹æ¡ˆä¾‹è¯´æ˜</h2><p>æ¥ä¸‹æ¥æˆ‘ä»¬çœ‹çœ‹æ€ä¹ˆåœ¨æˆ‘ä»¬çš„å®é™…é¡¹ç›®ä¸­æ¥ä½¿ç”¨Camundaäº†ã€‚æ–¹å¼æœ‰å¤šç§ï¼Œé¦–å…ˆæˆ‘ä»¬å¯ä»¥å‚è€ƒå®˜ç½‘æä¾›çš„æ•´åˆæ¡ˆä¾‹ã€‚</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220907003810268.png\"\n                      alt=\"image-20220907003810268\"\n                ></p>\n<p>ä½†æ˜¯è¿™é‡Œæœ‰ä¸ªæ¯”è¾ƒå¤´ç–¼çš„é—®é¢˜å°±æ˜¯Camundaå’ŒSpringBootç‰ˆæœ¬çš„å…¼å®¹æ€§é—®é¢˜ï¼Œè™½ç„¶å®˜æ–¹ä¹Ÿç»™å‡ºäº†å…¼å®¹ç‰ˆæœ¬çš„å¯¹ç…§è¡¨ã€‚</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220907003929928.png\"\n                      alt=\"image-20220907003929928\"\n                ></p>\n<p>ä½†æ˜¯å¦‚æœä¸å°å¿ƒè¿˜æ˜¯ä¼šå‡ºç°å„ç§é—®é¢˜ï¼Œæ¯”å¦‚ï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220907004050862.png\"\n                      alt=\"image-20220907004050862\"\n                ></p>\n<p>ä¸Šé¢å°±æ˜¯å…¸å‹çš„ç‰ˆæœ¬ä¸å…¼å®¹çš„é—®é¢˜äº†ã€‚</p>\n<h2 id=\"å®˜æ–¹Demo\"><a href=\"#å®˜æ–¹Demo\" class=\"headerlink\" title=\"å®˜æ–¹Demo\"></a>å®˜æ–¹Demo</h2><p>ä¸ºäº†èƒ½è®©æˆ‘ä»¬çš„æ¡ˆä¾‹å¿«é€Ÿæå®šï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡Camundaå®˜æ–¹æä¾›çš„ç½‘ç«™æ¥åˆ›å»ºæˆ‘ä»¬çš„æ¡ˆä¾‹ç¨‹åºã€‚åœ°å€ï¼š<a class=\"link\"   href=\"https://start.camunda.com/\" >https://start.camunda.com/<i class=\"fas fa-external-link-alt\"></i></a></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220907004531764.png\"\n                      alt=\"image-20220907004531764\"\n                ></p>\n<p>ç”Ÿæˆä»£ç åï¼Œè§£å‹åæˆ‘ä»¬é€šè¿‡ideaæ‰“å¼€é¡¹ç›®ï¼Œé¡¹ç›®ç»“æ„</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220907010229047.png\"\n                      alt=\"image-20220907010229047\"\n                ></p>\n<p>ç›¸å…³çš„pom.xmlä¸­çš„ä¾èµ–</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">project</span> <span class=\"attr\">xmlns</span>=<span class=\"string\">&quot;http://maven.apache.org/POM/4.0.0&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">         <span class=\"attr\">xmlns:xsi</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">         <span class=\"attr\">xsi:schemaLocation</span>=<span class=\"string\">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">modelVersion</span>&gt;</span>4.0.0<span class=\"tag\">&lt;/<span class=\"name\">modelVersion</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>com.boge.workflow<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>camunda-project-demo<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>1.0.0-SNAPSHOT<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">properties</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class=\"tag\">&lt;/<span class=\"name\">project.build.sourceEncoding</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">maven.compiler.source</span>&gt;</span>8<span class=\"tag\">&lt;/<span class=\"name\">maven.compiler.source</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">maven.compiler.target</span>&gt;</span>8<span class=\"tag\">&lt;/<span class=\"name\">maven.compiler.target</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">properties</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">dependencyManagement</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">dependencies</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.springframework.boot<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>spring-boot-dependencies<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>2.4.3<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">type</span>&gt;</span>pom<span class=\"tag\">&lt;/<span class=\"name\">type</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">scope</span>&gt;</span>import<span class=\"tag\">&lt;/<span class=\"name\">scope</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.camunda.bpm<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>camunda-bom<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>7.15.0<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">scope</span>&gt;</span>import<span class=\"tag\">&lt;/<span class=\"name\">scope</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">type</span>&gt;</span>pom<span class=\"tag\">&lt;/<span class=\"name\">type</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">dependencies</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">dependencyManagement</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">dependencies</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.camunda.bpm.springboot<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>camunda-bpm-spring-boot-starter-rest<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.camunda.bpm.springboot<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>camunda-bpm-spring-boot-starter-webapp<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.camunda.bpm<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>camunda-engine-plugin-spin<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.camunda.spin<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>camunda-spin-dataformat-all<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.springframework.boot<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>spring-boot-starter-web<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>com.h2database<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>h2<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.springframework.boot<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>spring-boot-starter-jdbc<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">dependencies</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">build</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">plugins</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">plugin</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.springframework.boot<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>2.4.3<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">plugin</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">plugins</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">build</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">project</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>å±æ€§æ–‡ä»¶çš„é…ç½®ä¿¡æ¯</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">spring.datasource.url:</span> <span class=\"string\">jdbc:h2:file:./camunda-h2-database</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">camunda.bpm.admin-user:</span></span><br><span class=\"line\">  <span class=\"attr\">id:</span> <span class=\"string\">demo</span></span><br><span class=\"line\">  <span class=\"attr\">password:</span> <span class=\"string\">demo</span></span><br></pre></td></tr></table></figure>\n\n<p>ç„¶åé€šè¿‡å¯åŠ¨ç±»å¯åŠ¨ç¨‹åº</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220907010434493.png\"\n                      alt=\"image-20220907010434493\"\n                ></p>\n<p>è®¿é—®æœåŠ¡ï¼š<a class=\"link\"   href=\"http://localhost:8080/\" >http://localhost:8080/<i class=\"fas fa-external-link-alt\"></i></a></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220907010523901.png\"\n                      alt=\"image-20220907010523901\"\n                ></p>\n<h2 id=\"MySQLæ•°æ®åº“\"><a href=\"#MySQLæ•°æ®åº“\" class=\"headerlink\" title=\"MySQLæ•°æ®åº“\"></a>MySQLæ•°æ®åº“</h2><p>ä¸Šé¢çš„ä¾‹å­æˆ‘ä»¬æ•°æ®å­˜å‚¨åœ¨äº†H2è¿™ä¸ªå†…å­˜å‹æ•°æ®åº“ï¼Œæˆ‘ä»¬å¯ä»¥åˆ‡æ¢åˆ°<code>MySQL</code>æ•°æ®åº“ã€‚é¦–å…ˆæˆ‘ä»¬éœ€è¦å¯¼å…¥ç›¸å…³çš„SQLè„šæœ¬ã€‚ä½ç½®å°±åœ¨æˆ‘ä»¬ä¹‹å‰ä¸‹è½½çš„<code>Camunda Web</code>æœåŠ¡ä¸­ã€‚</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220907010729453.png\"\n                      alt=\"image-20220907010729453\"\n                ></p>\n<p>æ‰§è¡Œåˆ›å»ºæ‰€æœ‰å¿…éœ€çš„è¡¨å’Œé»˜è®¤ç´¢å¼•çš„SQL DDLè„šæœ¬ã€‚ä¸Šé¢ä¸¤ä¸ªè„šæœ¬éƒ½è¦æ‰§è¡Œã€‚</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220907011030798.png\"\n                      alt=\"image-20220907011030798\"\n                ></p>\n<p>ç”Ÿæˆçš„ç›¸å…³è¡¨ç»“æ„æ¯”è¾ƒå¤šï¼Œå› ä¸ºæœ¬èº«å°±æ˜¯åŸºäºActivitiæ¼”å˜è€Œæ¥ï¼Œæ‰€ä»¥æœ‰ActivitiåŸºç¡€çš„å°ä¼™ä¼´ä¼šéå¸¸è½»æ¾äº†ã€‚ç®€å•ä»‹ç»ä¸‹ç›¸å…³è¡¨ç»“æ„çš„ä½œç”¨ã€‚</p>\n<ul>\n<li><strong>ACT_RE</strong> ï¼šâ€™REâ€™è¡¨ç¤º repositoryã€‚ è¿™ä¸ªå‰ç¼€çš„è¡¨åŒ…å«äº†æµç¨‹å®šä¹‰å’Œæµç¨‹é™æ€èµ„æº ï¼ˆå›¾ç‰‡ï¼Œè§„åˆ™ï¼Œç­‰ç­‰ï¼‰ã€‚</li>\n<li><strong>ACT_RU</strong>ï¼šâ€™RUâ€™è¡¨ç¤º runtimeã€‚ è¿™äº›è¿è¡Œæ—¶çš„è¡¨ï¼ŒåŒ…å«æµç¨‹å®ä¾‹ï¼Œä»»åŠ¡ï¼Œå˜é‡ï¼Œå¼‚æ­¥ä»»åŠ¡ï¼Œç­‰è¿è¡Œä¸­çš„æ•°æ®ã€‚ Flowableåªåœ¨æµç¨‹å®ä¾‹æ‰§è¡Œè¿‡ç¨‹ä¸­ä¿å­˜è¿™äº›æ•°æ®ï¼Œ åœ¨æµç¨‹ç»“æŸæ—¶å°±ä¼šåˆ é™¤è¿™äº›è®°å½•ã€‚ è¿™æ ·è¿è¡Œæ—¶è¡¨å¯ä»¥ä¸€ç›´å¾ˆå°é€Ÿåº¦å¾ˆå¿«ã€‚</li>\n<li><strong>ACT_HI</strong>ï¼šâ€™HIâ€™è¡¨ç¤º historyã€‚ è¿™äº›è¡¨åŒ…å«å†å²æ•°æ®ï¼Œæ¯”å¦‚å†å²æµç¨‹å®ä¾‹ï¼Œ å˜é‡ï¼Œä»»åŠ¡ç­‰ç­‰ã€‚</li>\n<li><strong>ACT_GE</strong>ï¼š GE è¡¨ç¤º generalã€‚ é€šç”¨æ•°æ®ï¼Œ ç”¨äºä¸åŒåœºæ™¯ä¸‹ </li>\n<li><strong>ACT_ID:</strong>   â€™IDâ€™è¡¨ç¤ºidentity(ç»„ç»‡æœºæ„)ã€‚è¿™äº›è¡¨åŒ…å«æ ‡è¯†çš„ä¿¡æ¯ï¼Œå¦‚ç”¨æˆ·ï¼Œç”¨æˆ·ç»„ï¼Œç­‰ç­‰ã€‚</li>\n</ul>\n<p>å…·ä½“çš„è¡¨ç»“æ„çš„å«ä¹‰:</p>\n<table>\n<thead>\n<tr>\n<th><strong>è¡¨åˆ†ç±»</strong></th>\n<th><strong>è¡¨å</strong></th>\n<th><strong>è§£é‡Š</strong></th>\n</tr>\n</thead>\n<tbody><tr>\n<td>ä¸€èˆ¬æ•°æ®</td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td></td>\n<td>[ACT_GE_BYTEARRAY]</td>\n<td>é€šç”¨çš„æµç¨‹å®šä¹‰å’Œæµç¨‹èµ„æº</td>\n</tr>\n<tr>\n<td></td>\n<td>[ACT_GE_PROPERTY]</td>\n<td>ç³»ç»Ÿç›¸å…³å±æ€§</td>\n</tr>\n<tr>\n<td>æµç¨‹å†å²è®°å½•</td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td></td>\n<td>[ACT_HI_ACTINST]</td>\n<td>å†å²çš„æµç¨‹å®ä¾‹</td>\n</tr>\n<tr>\n<td></td>\n<td>[ACT_HI_ATTACHMENT]</td>\n<td>å†å²çš„æµç¨‹é™„ä»¶</td>\n</tr>\n<tr>\n<td></td>\n<td>[ACT_HI_COMMENT]</td>\n<td>å†å²çš„è¯´æ˜æ€§ä¿¡æ¯</td>\n</tr>\n<tr>\n<td></td>\n<td>[ACT_HI_DETAIL]</td>\n<td>å†å²çš„æµç¨‹è¿è¡Œä¸­çš„ç»†èŠ‚ä¿¡æ¯</td>\n</tr>\n<tr>\n<td></td>\n<td>[ACT_HI_IDENTITYLINK]</td>\n<td>å†å²çš„æµç¨‹è¿è¡Œè¿‡ç¨‹ä¸­ç”¨æˆ·å…³ç³»</td>\n</tr>\n<tr>\n<td></td>\n<td>[ACT_HI_PROCINST]</td>\n<td>å†å²çš„æµç¨‹å®ä¾‹</td>\n</tr>\n<tr>\n<td></td>\n<td>[ACT_HI_TASKINST]</td>\n<td>å†å²çš„ä»»åŠ¡å®ä¾‹</td>\n</tr>\n<tr>\n<td></td>\n<td>[ACT_HI_VARINST]</td>\n<td>å†å²çš„æµç¨‹è¿è¡Œä¸­çš„å˜é‡ä¿¡æ¯</td>\n</tr>\n<tr>\n<td>æµç¨‹å®šä¹‰è¡¨</td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td></td>\n<td>[ACT_RE_DEPLOYMENT]</td>\n<td>éƒ¨ç½²å•å…ƒä¿¡æ¯</td>\n</tr>\n<tr>\n<td></td>\n<td>[ACT_RE_MODEL]</td>\n<td>æ¨¡å‹ä¿¡æ¯</td>\n</tr>\n<tr>\n<td></td>\n<td>[ACT_RE_PROCDEF]</td>\n<td>å·²éƒ¨ç½²çš„æµç¨‹å®šä¹‰</td>\n</tr>\n<tr>\n<td>è¿è¡Œå®ä¾‹è¡¨</td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td></td>\n<td>[ACT_RU_EVENT_SUBSCR]</td>\n<td>è¿è¡Œæ—¶äº‹ä»¶</td>\n</tr>\n<tr>\n<td></td>\n<td>[ACT_RU_EXECUTION]</td>\n<td>è¿è¡Œæ—¶æµç¨‹æ‰§è¡Œå®ä¾‹</td>\n</tr>\n<tr>\n<td></td>\n<td>[ACT_RU_IDENTITYLINK]</td>\n<td>è¿è¡Œæ—¶ç”¨æˆ·å…³ç³»ä¿¡æ¯ï¼Œå­˜å‚¨ä»»åŠ¡èŠ‚ç‚¹ä¸å‚ä¸è€…çš„ç›¸å…³ä¿¡æ¯</td>\n</tr>\n<tr>\n<td></td>\n<td>[ACT_RU_JOB]</td>\n<td>è¿è¡Œæ—¶ä½œä¸š</td>\n</tr>\n<tr>\n<td></td>\n<td>[ACT_RU_TASK]</td>\n<td>è¿è¡Œæ—¶ä»»åŠ¡</td>\n</tr>\n<tr>\n<td></td>\n<td>[ACT_RU_VARIABLE]</td>\n<td>è¿è¡Œæ—¶å˜é‡è¡¨</td>\n</tr>\n<tr>\n<td>ç”¨æˆ·ç”¨æˆ·ç»„è¡¨</td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td></td>\n<td>[ACT_ID_BYTEARRAY]</td>\n<td>äºŒè¿›åˆ¶æ•°æ®è¡¨</td>\n</tr>\n<tr>\n<td></td>\n<td>[ACT_ID_GROUP]</td>\n<td>ç”¨æˆ·ç»„ä¿¡æ¯è¡¨</td>\n</tr>\n<tr>\n<td></td>\n<td>[ACT_ID_INFO]</td>\n<td>ç”¨æˆ·ä¿¡æ¯è¯¦æƒ…è¡¨</td>\n</tr>\n<tr>\n<td></td>\n<td>[ACT_ID_MEMBERSHIP]</td>\n<td>äººä¸ç»„å…³ç³»è¡¨</td>\n</tr>\n<tr>\n<td></td>\n<td>[ACT_ID_PRIV]</td>\n<td>æƒé™è¡¨</td>\n</tr>\n<tr>\n<td></td>\n<td>[ACT_ID_PRIV_MAPPING]</td>\n<td>ç”¨æˆ·æˆ–ç»„æƒé™å…³ç³»è¡¨</td>\n</tr>\n<tr>\n<td></td>\n<td>[ACT_ID_PROPERTY]</td>\n<td>å±æ€§è¡¨</td>\n</tr>\n<tr>\n<td></td>\n<td>[ACT_ID_TOKEN]</td>\n<td>è®°å½•ç”¨æˆ·çš„tokenä¿¡æ¯</td>\n</tr>\n<tr>\n<td></td>\n<td>[ACT_ID_USER]</td>\n<td>ç”¨æˆ·è¡¨</td>\n</tr>\n</tbody></table>\n<p>ç„¶åæˆ‘ä»¬åœ¨SpringBooté¡¹ç›®ä¸­å¯¼å…¥<code>MySql</code>çš„ä¾èµ–ï¼Œç„¶åä¿®æ”¹å¯¹åº”çš„é…ç½®ä¿¡æ¯</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>mysql<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>mysql-connector-java<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>ä¿®æ”¹<code>application.yaml</code>ã€‚æ·»åŠ æ•°æ®æºçš„ç›¸å…³ä¿¡æ¯ã€‚</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># spring.datasource.url: jdbc:h2:file:./camunda-h2-database</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">camunda.bpm.admin-user:</span></span><br><span class=\"line\">  <span class=\"attr\">id:</span> <span class=\"string\">demo</span></span><br><span class=\"line\">  <span class=\"attr\">password:</span> <span class=\"string\">demo</span></span><br><span class=\"line\"><span class=\"attr\">spring:</span></span><br><span class=\"line\">  <span class=\"attr\">datasource:</span></span><br><span class=\"line\">    <span class=\"attr\">driver-class-name:</span> <span class=\"string\">com.mysql.cj.jdbc.Driver</span></span><br><span class=\"line\">    <span class=\"attr\">url:</span> <span class=\"string\">jdbc:mysql://127.0.0.1:3306/camunda1?serverTimezone=Asia/Shanghai</span></span><br><span class=\"line\">    <span class=\"attr\">username:</span> <span class=\"string\">root</span></span><br><span class=\"line\">    <span class=\"attr\">password:</span> <span class=\"number\">123456</span></span><br><span class=\"line\"><span class=\"attr\">camunda:</span></span><br><span class=\"line\">  <span class=\"attr\">bpm:</span></span><br><span class=\"line\">    <span class=\"attr\">database:</span></span><br><span class=\"line\">      <span class=\"attr\">type:</span> <span class=\"string\">mysql</span></span><br><span class=\"line\">      <span class=\"attr\">schema-update:</span> <span class=\"literal\">true</span></span><br><span class=\"line\">    <span class=\"attr\">auto-deployment-enabled:</span> <span class=\"literal\">false</span> <span class=\"comment\"># è‡ªåŠ¨éƒ¨ç½² resources ä¸‹çš„ bpmnæ–‡ä»¶</span></span><br></pre></td></tr></table></figure>\n\n<p>ç„¶åå¯åŠ¨é¡¹ç›®ï¼Œå‘ç°æ•°æ®åº“ä¸­æœ‰äº†ç›¸å…³è®°å½•ï¼Œè¯´æ˜æ“ä½œæˆåŠŸ</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220907011831014.png\"\n                      alt=\"image-20220907011831014\"\n                ></p>\n<h1 id=\"Camundaä¸“é¢˜è®²è§£\"><a href=\"#Camundaä¸“é¢˜è®²è§£\" class=\"headerlink\" title=\"Camundaä¸“é¢˜è®²è§£\"></a>Camundaä¸“é¢˜è®²è§£</h1><p>ç”¨äº†æ•´åˆçš„åŸºç¡€æˆ‘ä»¬å°±å¯ä»¥æ¥å®Œæˆä¸€ä¸ªæµç¨‹å®¡æ‰¹çš„æ¡ˆä¾‹äº†</p>\n<h2 id=\"éƒ¨ç½²æµç¨‹\"><a href=\"#éƒ¨ç½²æµç¨‹\" class=\"headerlink\" title=\"éƒ¨ç½²æµç¨‹\"></a>éƒ¨ç½²æµç¨‹</h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@RestController</span></span><br><span class=\"line\"><span class=\"meta\">@RequestMapping(&quot;/flow&quot;)</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">FlowController</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Autowired</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> RepositoryService repositoryService;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@GetMapping(&quot;/deploy&quot;)</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> String <span class=\"title function_\">deplopy</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">        <span class=\"type\">Deployment</span> <span class=\"variable\">deploy</span> <span class=\"operator\">=</span> repositoryService.createDeployment()</span><br><span class=\"line\">                .name(<span class=\"string\">&quot;éƒ¨ç½²çš„ç¬¬ä¸€ä¸ªæµç¨‹&quot;</span>) <span class=\"comment\">// å®šä¹‰éƒ¨ç½²æ–‡ä»¶çš„åç§°</span></span><br><span class=\"line\">                .addClasspathResource(<span class=\"string\">&quot;process.bpmn&quot;</span>) <span class=\"comment\">// ç»‘å®šéœ€è¦éƒ¨ç½²çš„æµç¨‹æ–‡ä»¶</span></span><br><span class=\"line\">                .deploy();<span class=\"comment\">// éƒ¨ç½²æµç¨‹</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> deploy.getId() + <span class=\"string\">&quot;:&quot;</span> + deploy.getName();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>å¯åŠ¨åè®¿é—®æ¥å£å³å¯</p>\n<h2 id=\"å¯åŠ¨æµç¨‹\"><a href=\"#å¯åŠ¨æµç¨‹\" class=\"headerlink\" title=\"å¯åŠ¨æµç¨‹\"></a>å¯åŠ¨æµç¨‹</h2><p>å¯åŠ¨æµç¨‹æˆ‘ä»¬é€šè¿‡å•å…ƒæµ‹è¯•æ¥æ“ä½œ</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.boge.workflow;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> org.camunda.bpm.engine.RepositoryService;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.camunda.bpm.engine.RuntimeService;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.camunda.bpm.engine.TaskService;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.camunda.bpm.engine.runtime.ProcessInstance;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.camunda.bpm.engine.task.Task;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.junit.jupiter.api.Test;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.boot.test.context.SpringBootTest;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.List;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@SpringBootTest(classes = Application.class)</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">ApplicationTest</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Autowired</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> RepositoryService repositoryService;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Autowired</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> RuntimeService runtimeService;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Autowired</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> TaskService taskService;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * å¯åŠ¨æµç¨‹çš„æ¡ˆä¾‹</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">startFlow</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// éƒ¨ç½²æµç¨‹</span></span><br><span class=\"line\">        <span class=\"type\">ProcessInstance</span> <span class=\"variable\">processInstance</span> <span class=\"operator\">=</span> runtimeService</span><br><span class=\"line\">                .startProcessInstanceById(<span class=\"string\">&quot;1a880f27-2e57-11ed-80d9-c03c59ad2248&quot;</span>);</span><br><span class=\"line\">        <span class=\"comment\">// éƒ¨ç½²çš„æµç¨‹å®ä¾‹çš„ç›¸å…³ä¿¡æ¯</span></span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;processInstance.getId() = &quot;</span> + processInstance.getId());</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;processInstance.getProcessDefinitionId() = &quot;</span> + processInstance.getProcessDefinitionId());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n\n\n<h2 id=\"æŸ¥è¯¢å¾…åŠ\"><a href=\"#æŸ¥è¯¢å¾…åŠ\" class=\"headerlink\" title=\"æŸ¥è¯¢å¾…åŠ\"></a>æŸ¥è¯¢å¾…åŠ</h2><p>æŸ¥è¯¢å¾…åŠä¹Ÿå°±æ˜¯æŸ¥çœ‹å½“å‰éœ€è¦å®¡æ‰¹çš„ä»»åŠ¡ï¼Œé€šè¿‡TaskServiceæ¥å¤„ç†</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * æŸ¥è¯¢ä»»åŠ¡</span></span><br><span class=\"line\"><span class=\"comment\"> *    å¾…åŠ</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> *  æµç¨‹å®šä¹‰ID:processDefinition : æˆ‘ä»¬éƒ¨ç½²æµç¨‹çš„æ—¶å€™ä¼šï¼Œæ¯ä¸€ä¸ªæµç¨‹éƒ½ä¼šäº§ç”Ÿä¸€ä¸ªæµç¨‹å®šä¹‰ID</span></span><br><span class=\"line\"><span class=\"comment\"> *  æµç¨‹å®ä¾‹ID:processInstance ï¼šæˆ‘ä»¬å¯åŠ¨æµç¨‹å®ä¾‹çš„æ—¶å€™ï¼Œä¼šäº§ç”Ÿä¸€ä¸ªæµç¨‹å®ä¾‹ID</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">queryTask</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    List&lt;Task&gt; list = taskService.createTaskQuery()</span><br><span class=\"line\">            <span class=\"comment\">//.processInstanceId(&quot;eff78817-2e58-11ed-aa3f-c03c59ad2248&quot;)</span></span><br><span class=\"line\">            .taskAssignee(<span class=\"string\">&quot;demo1&quot;</span>)</span><br><span class=\"line\">            .list();</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(list != <span class=\"literal\">null</span> &amp;&amp; list.size() &gt; <span class=\"number\">0</span>)&#123;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (Task task : list) &#123;</span><br><span class=\"line\">            System.out.println(<span class=\"string\">&quot;task.getId() = &quot;</span> + task.getId());</span><br><span class=\"line\">            System.out.println(<span class=\"string\">&quot;task.getAssignee() = &quot;</span> + task.getAssignee());</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<h2 id=\"å®Œæˆä»»åŠ¡\"><a href=\"#å®Œæˆä»»åŠ¡\" class=\"headerlink\" title=\"å®Œæˆä»»åŠ¡\"></a>å®Œæˆä»»åŠ¡</h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  * å®Œæˆä»»åŠ¡</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\"> <span class=\"meta\">@Test</span></span><br><span class=\"line\"> <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">completeTask</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">     <span class=\"comment\">// æ ¹æ®ç”¨æˆ·æ‰¾åˆ°å…³è”çš„Task</span></span><br><span class=\"line\">     <span class=\"type\">Task</span> <span class=\"variable\">task</span> <span class=\"operator\">=</span> taskService.createTaskQuery()</span><br><span class=\"line\">             <span class=\"comment\">//.processInstanceId(&quot;eff78817-2e58-11ed-aa3f-c03c59ad2248&quot;)</span></span><br><span class=\"line\">             .taskAssignee(<span class=\"string\">&quot;demo&quot;</span>)</span><br><span class=\"line\">             .singleResult();</span><br><span class=\"line\">     <span class=\"keyword\">if</span>(task != <span class=\"literal\">null</span> )&#123;</span><br><span class=\"line\">         taskService.complete(task.getId());</span><br><span class=\"line\">         System.out.println(<span class=\"string\">&quot;ä»»åŠ¡å®¡æ‰¹å®Œæˆ...&quot;</span>);</span><br><span class=\"line\">     &#125;</span><br><span class=\"line\"> &#125;</span><br></pre></td></tr></table></figure>\n\n\n\n\n\n\n\n\n\n\n\n<p>å¥½äº†~åˆ°æ­¤Camundaçš„åŸºç¡€å…¥é—¨æ¡ˆä¾‹æˆ‘ä»¬å°±è®²è§£åˆ°è¿™é‡Œï¼Œéœ€è¦è·å–æ›´å¤šCamundaç›¸å…³è¯¾ç¨‹è§†é¢‘çš„å¯ä»¥ç»§ç»­å…³æ³¨æ³¢å“¥çš„Bè´¦å·ï¼Œæˆ–è€…æ·»åŠ æ³¢å“¥å¾®ä¿¡(boge_java&#x2F;boge3306)</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220904115333970.png\"\n                      alt=\"image-20220904115333970\"\n                ></p>\n","site":{"data":{"links":[{"name":"CZMæœ‰ç‚¹å†·","link":"https://czm.cool/","description":"CZMçš„åšå®¢","avatar":"https://img.czm.cool/avatar/avatar.png"},{"name":"PSH","link":"https://shamd.cloud/","description":"PSHçš„åšå®¢.","avatar":"https://shamd.cloud/upload/2022/07/afbb577733f46c9535dd1d6d6388278.jpg"},{"name":"KAI","link":"https://kainote.top/","description":"love artist, love code.","avatar":"https://cdn.jsdelivr.net/gh/kaix2301/pictures/img202201072101018.jpg"}]}},"excerpt":"","more":"<h1 id=\"Camunda-çƒ­é—¨å·¥ä½œæµå¼•æ“æ¡†æ¶\"><a href=\"#Camunda-çƒ­é—¨å·¥ä½œæµå¼•æ“æ¡†æ¶\" class=\"headerlink\" title=\"Camunda-çƒ­é—¨å·¥ä½œæµå¼•æ“æ¡†æ¶\"></a>Camunda-çƒ­é—¨å·¥ä½œæµå¼•æ“æ¡†æ¶</h1><blockquote>\n<p>Lectureï¼šæ³¢å“¥</p>\n</blockquote>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220902232358815.png\"\n                      alt=\"image-20220902232358815\"\n                ></p>\n<h1 id=\"IDEAå¼•å…¥æµç¨‹è®¾è®¡å™¨\"><a href=\"#IDEAå¼•å…¥æµç¨‹è®¾è®¡å™¨\" class=\"headerlink\" title=\"IDEAå¼•å…¥æµç¨‹è®¾è®¡å™¨\"></a>IDEAå¼•å…¥æµç¨‹è®¾è®¡å™¨</h1><p>åœ¨å·¥ä½œæµå¼•æ“ä¸­æµç¨‹è®¾è®¡å™¨æ˜¯ä¸€ä¸ªéå¸¸é‡è¦çš„ç»„ä»¶ï¼Œè€Œ<code>InterlliJ IDEA</code>æ˜¯Javaç¨‹åºå‘˜ç”¨åˆ°çš„æœ€å¤šçš„ç¼–ç¨‹å·¥å…·äº†ã€‚å‰é¢åœ¨åŸºç¡€ç¯‡çš„ä»‹ç»ä¸­æˆ‘ä»¬éƒ½åœ¨é€šè¿‡Camundaæä¾›çš„æµç¨‹è®¾è®¡å™¨ç»˜åˆ¶å¥½æµç¨‹å›¾ï¼Œç„¶åéœ€è¦å•ç‹¬çš„æ‹·è´åˆ°é¡¹ç›®ä¸­ï¼Œè¦æ˜¯è°ƒæ•´ä¿®æ”¹ä¸æ˜¯å¾ˆæ–¹ä¾¿ï¼Œè¿™æ—¶æˆ‘ä»¬å¯ä»¥åœ¨IDEAä¸­å’Œæµç¨‹è®¾è®¡å™¨ç»‘å®šèµ·æ¥ã€‚è¿™æ ·ä¼šæ›´åŠ çš„çµæ´»ã€‚</p>\n<h2 id=\"ä¸‹è½½Camunda-Model\"><a href=\"#ä¸‹è½½Camunda-Model\" class=\"headerlink\" title=\"ä¸‹è½½Camunda Model\"></a>ä¸‹è½½Camunda Model</h2><p>ç¬¬ä¸€æ­¥è‚¯å®šæ˜¯éœ€è¦ä¸‹è½½<code>Camunda Model</code> è¿™ä¸ªæµç¨‹è®¾è®¡å™¨ï¼Œæˆ‘ä»¬å‰é¢æœ‰ä»‹ç»ã€‚å°±æ˜¯ä¹‹å‰è§£å‹å¥½çš„ç›®å½•äº†ã€‚</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220907002253021.png\"\n                      alt=\"image-20220907002253021\"\n                ></p>\n<h2 id=\"IDEAä¸­é…ç½®\"><a href=\"#IDEAä¸­é…ç½®\" class=\"headerlink\" title=\"IDEAä¸­é…ç½®\"></a>IDEAä¸­é…ç½®</h2><p>æˆ‘ä»¬å…ˆè¿›å…¥<code>settings</code>ä¸­ç„¶åæ‰¾åˆ°<code>tools</code>,ç»§ç»­æ‰¾åˆ°<code>External Tool</code>.</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220907002432482.png\"\n                      alt=\"image-20220907002432482\"\n                ></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220907002649744.png\"\n                      alt=\"image-20220907002649744\"\n                ></p>\n<p>æœ€ç»ˆæ•ˆæœ</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220907002735603.png\"\n                      alt=\"image-20220907002735603\"\n                ></p>\n<h2 id=\"ç¼–è¾‘bpmnæ–‡ä»¶\"><a href=\"#ç¼–è¾‘bpmnæ–‡ä»¶\" class=\"headerlink\" title=\"ç¼–è¾‘bpmnæ–‡ä»¶\"></a>ç¼–è¾‘bpmnæ–‡ä»¶</h2><p>æ‰¾åˆ°æ‚¨æƒ³æ‰“å¼€çš„bpmnæ–‡ä»¶, ç‚¹å‡»å³é”®, æ‰¾åˆ°External Tools è¿è¡Œcamunda modlerå³å¯è¿›è¡Œæ–‡ä»¶ç¼–å†™.</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220907002851738.png\"\n                      alt=\"image-20220907002851738\"\n                ></p>\n<p>æå®š~</p>\n<h1 id=\"SpringBootæ•´åˆCamunda\"><a href=\"#SpringBootæ•´åˆCamunda\" class=\"headerlink\" title=\"SpringBootæ•´åˆCamunda\"></a>SpringBootæ•´åˆCamunda</h1><h2 id=\"å®˜æ–¹æ¡ˆä¾‹è¯´æ˜\"><a href=\"#å®˜æ–¹æ¡ˆä¾‹è¯´æ˜\" class=\"headerlink\" title=\"å®˜æ–¹æ¡ˆä¾‹è¯´æ˜\"></a>å®˜æ–¹æ¡ˆä¾‹è¯´æ˜</h2><p>æ¥ä¸‹æ¥æˆ‘ä»¬çœ‹çœ‹æ€ä¹ˆåœ¨æˆ‘ä»¬çš„å®é™…é¡¹ç›®ä¸­æ¥ä½¿ç”¨Camundaäº†ã€‚æ–¹å¼æœ‰å¤šç§ï¼Œé¦–å…ˆæˆ‘ä»¬å¯ä»¥å‚è€ƒå®˜ç½‘æä¾›çš„æ•´åˆæ¡ˆä¾‹ã€‚</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220907003810268.png\"\n                      alt=\"image-20220907003810268\"\n                ></p>\n<p>ä½†æ˜¯è¿™é‡Œæœ‰ä¸ªæ¯”è¾ƒå¤´ç–¼çš„é—®é¢˜å°±æ˜¯Camundaå’ŒSpringBootç‰ˆæœ¬çš„å…¼å®¹æ€§é—®é¢˜ï¼Œè™½ç„¶å®˜æ–¹ä¹Ÿç»™å‡ºäº†å…¼å®¹ç‰ˆæœ¬çš„å¯¹ç…§è¡¨ã€‚</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220907003929928.png\"\n                      alt=\"image-20220907003929928\"\n                ></p>\n<p>ä½†æ˜¯å¦‚æœä¸å°å¿ƒè¿˜æ˜¯ä¼šå‡ºç°å„ç§é—®é¢˜ï¼Œæ¯”å¦‚ï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220907004050862.png\"\n                      alt=\"image-20220907004050862\"\n                ></p>\n<p>ä¸Šé¢å°±æ˜¯å…¸å‹çš„ç‰ˆæœ¬ä¸å…¼å®¹çš„é—®é¢˜äº†ã€‚</p>\n<h2 id=\"å®˜æ–¹Demo\"><a href=\"#å®˜æ–¹Demo\" class=\"headerlink\" title=\"å®˜æ–¹Demo\"></a>å®˜æ–¹Demo</h2><p>ä¸ºäº†èƒ½è®©æˆ‘ä»¬çš„æ¡ˆä¾‹å¿«é€Ÿæå®šï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡Camundaå®˜æ–¹æä¾›çš„ç½‘ç«™æ¥åˆ›å»ºæˆ‘ä»¬çš„æ¡ˆä¾‹ç¨‹åºã€‚åœ°å€ï¼š<a class=\"link\"   href=\"https://start.camunda.com/\" >https://start.camunda.com/<i class=\"fas fa-external-link-alt\"></i></a></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220907004531764.png\"\n                      alt=\"image-20220907004531764\"\n                ></p>\n<p>ç”Ÿæˆä»£ç åï¼Œè§£å‹åæˆ‘ä»¬é€šè¿‡ideaæ‰“å¼€é¡¹ç›®ï¼Œé¡¹ç›®ç»“æ„</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220907010229047.png\"\n                      alt=\"image-20220907010229047\"\n                ></p>\n<p>ç›¸å…³çš„pom.xmlä¸­çš„ä¾èµ–</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">project</span> <span class=\"attr\">xmlns</span>=<span class=\"string\">&quot;http://maven.apache.org/POM/4.0.0&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">         <span class=\"attr\">xmlns:xsi</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">         <span class=\"attr\">xsi:schemaLocation</span>=<span class=\"string\">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">modelVersion</span>&gt;</span>4.0.0<span class=\"tag\">&lt;/<span class=\"name\">modelVersion</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>com.boge.workflow<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>camunda-project-demo<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>1.0.0-SNAPSHOT<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">properties</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class=\"tag\">&lt;/<span class=\"name\">project.build.sourceEncoding</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">maven.compiler.source</span>&gt;</span>8<span class=\"tag\">&lt;/<span class=\"name\">maven.compiler.source</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">maven.compiler.target</span>&gt;</span>8<span class=\"tag\">&lt;/<span class=\"name\">maven.compiler.target</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">properties</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">dependencyManagement</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">dependencies</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.springframework.boot<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>spring-boot-dependencies<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>2.4.3<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">type</span>&gt;</span>pom<span class=\"tag\">&lt;/<span class=\"name\">type</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">scope</span>&gt;</span>import<span class=\"tag\">&lt;/<span class=\"name\">scope</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.camunda.bpm<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>camunda-bom<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>7.15.0<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">scope</span>&gt;</span>import<span class=\"tag\">&lt;/<span class=\"name\">scope</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">type</span>&gt;</span>pom<span class=\"tag\">&lt;/<span class=\"name\">type</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">dependencies</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">dependencyManagement</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">dependencies</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.camunda.bpm.springboot<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>camunda-bpm-spring-boot-starter-rest<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.camunda.bpm.springboot<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>camunda-bpm-spring-boot-starter-webapp<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.camunda.bpm<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>camunda-engine-plugin-spin<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.camunda.spin<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>camunda-spin-dataformat-all<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.springframework.boot<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>spring-boot-starter-web<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>com.h2database<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>h2<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.springframework.boot<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>spring-boot-starter-jdbc<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">dependencies</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">build</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">plugins</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">plugin</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.springframework.boot<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>2.4.3<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">plugin</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">plugins</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">build</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">project</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>å±æ€§æ–‡ä»¶çš„é…ç½®ä¿¡æ¯</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">spring.datasource.url:</span> <span class=\"string\">jdbc:h2:file:./camunda-h2-database</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">camunda.bpm.admin-user:</span></span><br><span class=\"line\">  <span class=\"attr\">id:</span> <span class=\"string\">demo</span></span><br><span class=\"line\">  <span class=\"attr\">password:</span> <span class=\"string\">demo</span></span><br></pre></td></tr></table></figure>\n\n<p>ç„¶åé€šè¿‡å¯åŠ¨ç±»å¯åŠ¨ç¨‹åº</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220907010434493.png\"\n                      alt=\"image-20220907010434493\"\n                ></p>\n<p>è®¿é—®æœåŠ¡ï¼š<a class=\"link\"   href=\"http://localhost:8080/\" >http://localhost:8080/<i class=\"fas fa-external-link-alt\"></i></a></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220907010523901.png\"\n                      alt=\"image-20220907010523901\"\n                ></p>\n<h2 id=\"MySQLæ•°æ®åº“\"><a href=\"#MySQLæ•°æ®åº“\" class=\"headerlink\" title=\"MySQLæ•°æ®åº“\"></a>MySQLæ•°æ®åº“</h2><p>ä¸Šé¢çš„ä¾‹å­æˆ‘ä»¬æ•°æ®å­˜å‚¨åœ¨äº†H2è¿™ä¸ªå†…å­˜å‹æ•°æ®åº“ï¼Œæˆ‘ä»¬å¯ä»¥åˆ‡æ¢åˆ°<code>MySQL</code>æ•°æ®åº“ã€‚é¦–å…ˆæˆ‘ä»¬éœ€è¦å¯¼å…¥ç›¸å…³çš„SQLè„šæœ¬ã€‚ä½ç½®å°±åœ¨æˆ‘ä»¬ä¹‹å‰ä¸‹è½½çš„<code>Camunda Web</code>æœåŠ¡ä¸­ã€‚</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220907010729453.png\"\n                      alt=\"image-20220907010729453\"\n                ></p>\n<p>æ‰§è¡Œåˆ›å»ºæ‰€æœ‰å¿…éœ€çš„è¡¨å’Œé»˜è®¤ç´¢å¼•çš„SQL DDLè„šæœ¬ã€‚ä¸Šé¢ä¸¤ä¸ªè„šæœ¬éƒ½è¦æ‰§è¡Œã€‚</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220907011030798.png\"\n                      alt=\"image-20220907011030798\"\n                ></p>\n<p>ç”Ÿæˆçš„ç›¸å…³è¡¨ç»“æ„æ¯”è¾ƒå¤šï¼Œå› ä¸ºæœ¬èº«å°±æ˜¯åŸºäºActivitiæ¼”å˜è€Œæ¥ï¼Œæ‰€ä»¥æœ‰ActivitiåŸºç¡€çš„å°ä¼™ä¼´ä¼šéå¸¸è½»æ¾äº†ã€‚ç®€å•ä»‹ç»ä¸‹ç›¸å…³è¡¨ç»“æ„çš„ä½œç”¨ã€‚</p>\n<ul>\n<li><strong>ACT_RE</strong> ï¼šâ€™REâ€™è¡¨ç¤º repositoryã€‚ è¿™ä¸ªå‰ç¼€çš„è¡¨åŒ…å«äº†æµç¨‹å®šä¹‰å’Œæµç¨‹é™æ€èµ„æº ï¼ˆå›¾ç‰‡ï¼Œè§„åˆ™ï¼Œç­‰ç­‰ï¼‰ã€‚</li>\n<li><strong>ACT_RU</strong>ï¼šâ€™RUâ€™è¡¨ç¤º runtimeã€‚ è¿™äº›è¿è¡Œæ—¶çš„è¡¨ï¼ŒåŒ…å«æµç¨‹å®ä¾‹ï¼Œä»»åŠ¡ï¼Œå˜é‡ï¼Œå¼‚æ­¥ä»»åŠ¡ï¼Œç­‰è¿è¡Œä¸­çš„æ•°æ®ã€‚ Flowableåªåœ¨æµç¨‹å®ä¾‹æ‰§è¡Œè¿‡ç¨‹ä¸­ä¿å­˜è¿™äº›æ•°æ®ï¼Œ åœ¨æµç¨‹ç»“æŸæ—¶å°±ä¼šåˆ é™¤è¿™äº›è®°å½•ã€‚ è¿™æ ·è¿è¡Œæ—¶è¡¨å¯ä»¥ä¸€ç›´å¾ˆå°é€Ÿåº¦å¾ˆå¿«ã€‚</li>\n<li><strong>ACT_HI</strong>ï¼šâ€™HIâ€™è¡¨ç¤º historyã€‚ è¿™äº›è¡¨åŒ…å«å†å²æ•°æ®ï¼Œæ¯”å¦‚å†å²æµç¨‹å®ä¾‹ï¼Œ å˜é‡ï¼Œä»»åŠ¡ç­‰ç­‰ã€‚</li>\n<li><strong>ACT_GE</strong>ï¼š GE è¡¨ç¤º generalã€‚ é€šç”¨æ•°æ®ï¼Œ ç”¨äºä¸åŒåœºæ™¯ä¸‹ </li>\n<li><strong>ACT_ID:</strong>   â€™IDâ€™è¡¨ç¤ºidentity(ç»„ç»‡æœºæ„)ã€‚è¿™äº›è¡¨åŒ…å«æ ‡è¯†çš„ä¿¡æ¯ï¼Œå¦‚ç”¨æˆ·ï¼Œç”¨æˆ·ç»„ï¼Œç­‰ç­‰ã€‚</li>\n</ul>\n<p>å…·ä½“çš„è¡¨ç»“æ„çš„å«ä¹‰:</p>\n<table>\n<thead>\n<tr>\n<th><strong>è¡¨åˆ†ç±»</strong></th>\n<th><strong>è¡¨å</strong></th>\n<th><strong>è§£é‡Š</strong></th>\n</tr>\n</thead>\n<tbody><tr>\n<td>ä¸€èˆ¬æ•°æ®</td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td></td>\n<td>[ACT_GE_BYTEARRAY]</td>\n<td>é€šç”¨çš„æµç¨‹å®šä¹‰å’Œæµç¨‹èµ„æº</td>\n</tr>\n<tr>\n<td></td>\n<td>[ACT_GE_PROPERTY]</td>\n<td>ç³»ç»Ÿç›¸å…³å±æ€§</td>\n</tr>\n<tr>\n<td>æµç¨‹å†å²è®°å½•</td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td></td>\n<td>[ACT_HI_ACTINST]</td>\n<td>å†å²çš„æµç¨‹å®ä¾‹</td>\n</tr>\n<tr>\n<td></td>\n<td>[ACT_HI_ATTACHMENT]</td>\n<td>å†å²çš„æµç¨‹é™„ä»¶</td>\n</tr>\n<tr>\n<td></td>\n<td>[ACT_HI_COMMENT]</td>\n<td>å†å²çš„è¯´æ˜æ€§ä¿¡æ¯</td>\n</tr>\n<tr>\n<td></td>\n<td>[ACT_HI_DETAIL]</td>\n<td>å†å²çš„æµç¨‹è¿è¡Œä¸­çš„ç»†èŠ‚ä¿¡æ¯</td>\n</tr>\n<tr>\n<td></td>\n<td>[ACT_HI_IDENTITYLINK]</td>\n<td>å†å²çš„æµç¨‹è¿è¡Œè¿‡ç¨‹ä¸­ç”¨æˆ·å…³ç³»</td>\n</tr>\n<tr>\n<td></td>\n<td>[ACT_HI_PROCINST]</td>\n<td>å†å²çš„æµç¨‹å®ä¾‹</td>\n</tr>\n<tr>\n<td></td>\n<td>[ACT_HI_TASKINST]</td>\n<td>å†å²çš„ä»»åŠ¡å®ä¾‹</td>\n</tr>\n<tr>\n<td></td>\n<td>[ACT_HI_VARINST]</td>\n<td>å†å²çš„æµç¨‹è¿è¡Œä¸­çš„å˜é‡ä¿¡æ¯</td>\n</tr>\n<tr>\n<td>æµç¨‹å®šä¹‰è¡¨</td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td></td>\n<td>[ACT_RE_DEPLOYMENT]</td>\n<td>éƒ¨ç½²å•å…ƒä¿¡æ¯</td>\n</tr>\n<tr>\n<td></td>\n<td>[ACT_RE_MODEL]</td>\n<td>æ¨¡å‹ä¿¡æ¯</td>\n</tr>\n<tr>\n<td></td>\n<td>[ACT_RE_PROCDEF]</td>\n<td>å·²éƒ¨ç½²çš„æµç¨‹å®šä¹‰</td>\n</tr>\n<tr>\n<td>è¿è¡Œå®ä¾‹è¡¨</td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td></td>\n<td>[ACT_RU_EVENT_SUBSCR]</td>\n<td>è¿è¡Œæ—¶äº‹ä»¶</td>\n</tr>\n<tr>\n<td></td>\n<td>[ACT_RU_EXECUTION]</td>\n<td>è¿è¡Œæ—¶æµç¨‹æ‰§è¡Œå®ä¾‹</td>\n</tr>\n<tr>\n<td></td>\n<td>[ACT_RU_IDENTITYLINK]</td>\n<td>è¿è¡Œæ—¶ç”¨æˆ·å…³ç³»ä¿¡æ¯ï¼Œå­˜å‚¨ä»»åŠ¡èŠ‚ç‚¹ä¸å‚ä¸è€…çš„ç›¸å…³ä¿¡æ¯</td>\n</tr>\n<tr>\n<td></td>\n<td>[ACT_RU_JOB]</td>\n<td>è¿è¡Œæ—¶ä½œä¸š</td>\n</tr>\n<tr>\n<td></td>\n<td>[ACT_RU_TASK]</td>\n<td>è¿è¡Œæ—¶ä»»åŠ¡</td>\n</tr>\n<tr>\n<td></td>\n<td>[ACT_RU_VARIABLE]</td>\n<td>è¿è¡Œæ—¶å˜é‡è¡¨</td>\n</tr>\n<tr>\n<td>ç”¨æˆ·ç”¨æˆ·ç»„è¡¨</td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td></td>\n<td>[ACT_ID_BYTEARRAY]</td>\n<td>äºŒè¿›åˆ¶æ•°æ®è¡¨</td>\n</tr>\n<tr>\n<td></td>\n<td>[ACT_ID_GROUP]</td>\n<td>ç”¨æˆ·ç»„ä¿¡æ¯è¡¨</td>\n</tr>\n<tr>\n<td></td>\n<td>[ACT_ID_INFO]</td>\n<td>ç”¨æˆ·ä¿¡æ¯è¯¦æƒ…è¡¨</td>\n</tr>\n<tr>\n<td></td>\n<td>[ACT_ID_MEMBERSHIP]</td>\n<td>äººä¸ç»„å…³ç³»è¡¨</td>\n</tr>\n<tr>\n<td></td>\n<td>[ACT_ID_PRIV]</td>\n<td>æƒé™è¡¨</td>\n</tr>\n<tr>\n<td></td>\n<td>[ACT_ID_PRIV_MAPPING]</td>\n<td>ç”¨æˆ·æˆ–ç»„æƒé™å…³ç³»è¡¨</td>\n</tr>\n<tr>\n<td></td>\n<td>[ACT_ID_PROPERTY]</td>\n<td>å±æ€§è¡¨</td>\n</tr>\n<tr>\n<td></td>\n<td>[ACT_ID_TOKEN]</td>\n<td>è®°å½•ç”¨æˆ·çš„tokenä¿¡æ¯</td>\n</tr>\n<tr>\n<td></td>\n<td>[ACT_ID_USER]</td>\n<td>ç”¨æˆ·è¡¨</td>\n</tr>\n</tbody></table>\n<p>ç„¶åæˆ‘ä»¬åœ¨SpringBooté¡¹ç›®ä¸­å¯¼å…¥<code>MySql</code>çš„ä¾èµ–ï¼Œç„¶åä¿®æ”¹å¯¹åº”çš„é…ç½®ä¿¡æ¯</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>mysql<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>mysql-connector-java<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>ä¿®æ”¹<code>application.yaml</code>ã€‚æ·»åŠ æ•°æ®æºçš„ç›¸å…³ä¿¡æ¯ã€‚</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># spring.datasource.url: jdbc:h2:file:./camunda-h2-database</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">camunda.bpm.admin-user:</span></span><br><span class=\"line\">  <span class=\"attr\">id:</span> <span class=\"string\">demo</span></span><br><span class=\"line\">  <span class=\"attr\">password:</span> <span class=\"string\">demo</span></span><br><span class=\"line\"><span class=\"attr\">spring:</span></span><br><span class=\"line\">  <span class=\"attr\">datasource:</span></span><br><span class=\"line\">    <span class=\"attr\">driver-class-name:</span> <span class=\"string\">com.mysql.cj.jdbc.Driver</span></span><br><span class=\"line\">    <span class=\"attr\">url:</span> <span class=\"string\">jdbc:mysql://127.0.0.1:3306/camunda1?serverTimezone=Asia/Shanghai</span></span><br><span class=\"line\">    <span class=\"attr\">username:</span> <span class=\"string\">root</span></span><br><span class=\"line\">    <span class=\"attr\">password:</span> <span class=\"number\">123456</span></span><br><span class=\"line\"><span class=\"attr\">camunda:</span></span><br><span class=\"line\">  <span class=\"attr\">bpm:</span></span><br><span class=\"line\">    <span class=\"attr\">database:</span></span><br><span class=\"line\">      <span class=\"attr\">type:</span> <span class=\"string\">mysql</span></span><br><span class=\"line\">      <span class=\"attr\">schema-update:</span> <span class=\"literal\">true</span></span><br><span class=\"line\">    <span class=\"attr\">auto-deployment-enabled:</span> <span class=\"literal\">false</span> <span class=\"comment\"># è‡ªåŠ¨éƒ¨ç½² resources ä¸‹çš„ bpmnæ–‡ä»¶</span></span><br></pre></td></tr></table></figure>\n\n<p>ç„¶åå¯åŠ¨é¡¹ç›®ï¼Œå‘ç°æ•°æ®åº“ä¸­æœ‰äº†ç›¸å…³è®°å½•ï¼Œè¯´æ˜æ“ä½œæˆåŠŸ</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220907011831014.png\"\n                      alt=\"image-20220907011831014\"\n                ></p>\n<h1 id=\"Camundaä¸“é¢˜è®²è§£\"><a href=\"#Camundaä¸“é¢˜è®²è§£\" class=\"headerlink\" title=\"Camundaä¸“é¢˜è®²è§£\"></a>Camundaä¸“é¢˜è®²è§£</h1><p>ç”¨äº†æ•´åˆçš„åŸºç¡€æˆ‘ä»¬å°±å¯ä»¥æ¥å®Œæˆä¸€ä¸ªæµç¨‹å®¡æ‰¹çš„æ¡ˆä¾‹äº†</p>\n<h2 id=\"éƒ¨ç½²æµç¨‹\"><a href=\"#éƒ¨ç½²æµç¨‹\" class=\"headerlink\" title=\"éƒ¨ç½²æµç¨‹\"></a>éƒ¨ç½²æµç¨‹</h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@RestController</span></span><br><span class=\"line\"><span class=\"meta\">@RequestMapping(&quot;/flow&quot;)</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">FlowController</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Autowired</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> RepositoryService repositoryService;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@GetMapping(&quot;/deploy&quot;)</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> String <span class=\"title function_\">deplopy</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">        <span class=\"type\">Deployment</span> <span class=\"variable\">deploy</span> <span class=\"operator\">=</span> repositoryService.createDeployment()</span><br><span class=\"line\">                .name(<span class=\"string\">&quot;éƒ¨ç½²çš„ç¬¬ä¸€ä¸ªæµç¨‹&quot;</span>) <span class=\"comment\">// å®šä¹‰éƒ¨ç½²æ–‡ä»¶çš„åç§°</span></span><br><span class=\"line\">                .addClasspathResource(<span class=\"string\">&quot;process.bpmn&quot;</span>) <span class=\"comment\">// ç»‘å®šéœ€è¦éƒ¨ç½²çš„æµç¨‹æ–‡ä»¶</span></span><br><span class=\"line\">                .deploy();<span class=\"comment\">// éƒ¨ç½²æµç¨‹</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> deploy.getId() + <span class=\"string\">&quot;:&quot;</span> + deploy.getName();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>å¯åŠ¨åè®¿é—®æ¥å£å³å¯</p>\n<h2 id=\"å¯åŠ¨æµç¨‹\"><a href=\"#å¯åŠ¨æµç¨‹\" class=\"headerlink\" title=\"å¯åŠ¨æµç¨‹\"></a>å¯åŠ¨æµç¨‹</h2><p>å¯åŠ¨æµç¨‹æˆ‘ä»¬é€šè¿‡å•å…ƒæµ‹è¯•æ¥æ“ä½œ</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.boge.workflow;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> org.camunda.bpm.engine.RepositoryService;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.camunda.bpm.engine.RuntimeService;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.camunda.bpm.engine.TaskService;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.camunda.bpm.engine.runtime.ProcessInstance;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.camunda.bpm.engine.task.Task;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.junit.jupiter.api.Test;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.boot.test.context.SpringBootTest;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.List;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@SpringBootTest(classes = Application.class)</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">ApplicationTest</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Autowired</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> RepositoryService repositoryService;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Autowired</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> RuntimeService runtimeService;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Autowired</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> TaskService taskService;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * å¯åŠ¨æµç¨‹çš„æ¡ˆä¾‹</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">startFlow</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// éƒ¨ç½²æµç¨‹</span></span><br><span class=\"line\">        <span class=\"type\">ProcessInstance</span> <span class=\"variable\">processInstance</span> <span class=\"operator\">=</span> runtimeService</span><br><span class=\"line\">                .startProcessInstanceById(<span class=\"string\">&quot;1a880f27-2e57-11ed-80d9-c03c59ad2248&quot;</span>);</span><br><span class=\"line\">        <span class=\"comment\">// éƒ¨ç½²çš„æµç¨‹å®ä¾‹çš„ç›¸å…³ä¿¡æ¯</span></span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;processInstance.getId() = &quot;</span> + processInstance.getId());</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;processInstance.getProcessDefinitionId() = &quot;</span> + processInstance.getProcessDefinitionId());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n\n\n<h2 id=\"æŸ¥è¯¢å¾…åŠ\"><a href=\"#æŸ¥è¯¢å¾…åŠ\" class=\"headerlink\" title=\"æŸ¥è¯¢å¾…åŠ\"></a>æŸ¥è¯¢å¾…åŠ</h2><p>æŸ¥è¯¢å¾…åŠä¹Ÿå°±æ˜¯æŸ¥çœ‹å½“å‰éœ€è¦å®¡æ‰¹çš„ä»»åŠ¡ï¼Œé€šè¿‡TaskServiceæ¥å¤„ç†</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * æŸ¥è¯¢ä»»åŠ¡</span></span><br><span class=\"line\"><span class=\"comment\"> *    å¾…åŠ</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> *  æµç¨‹å®šä¹‰ID:processDefinition : æˆ‘ä»¬éƒ¨ç½²æµç¨‹çš„æ—¶å€™ä¼šï¼Œæ¯ä¸€ä¸ªæµç¨‹éƒ½ä¼šäº§ç”Ÿä¸€ä¸ªæµç¨‹å®šä¹‰ID</span></span><br><span class=\"line\"><span class=\"comment\"> *  æµç¨‹å®ä¾‹ID:processInstance ï¼šæˆ‘ä»¬å¯åŠ¨æµç¨‹å®ä¾‹çš„æ—¶å€™ï¼Œä¼šäº§ç”Ÿä¸€ä¸ªæµç¨‹å®ä¾‹ID</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">queryTask</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    List&lt;Task&gt; list = taskService.createTaskQuery()</span><br><span class=\"line\">            <span class=\"comment\">//.processInstanceId(&quot;eff78817-2e58-11ed-aa3f-c03c59ad2248&quot;)</span></span><br><span class=\"line\">            .taskAssignee(<span class=\"string\">&quot;demo1&quot;</span>)</span><br><span class=\"line\">            .list();</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(list != <span class=\"literal\">null</span> &amp;&amp; list.size() &gt; <span class=\"number\">0</span>)&#123;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (Task task : list) &#123;</span><br><span class=\"line\">            System.out.println(<span class=\"string\">&quot;task.getId() = &quot;</span> + task.getId());</span><br><span class=\"line\">            System.out.println(<span class=\"string\">&quot;task.getAssignee() = &quot;</span> + task.getAssignee());</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<h2 id=\"å®Œæˆä»»åŠ¡\"><a href=\"#å®Œæˆä»»åŠ¡\" class=\"headerlink\" title=\"å®Œæˆä»»åŠ¡\"></a>å®Œæˆä»»åŠ¡</h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  * å®Œæˆä»»åŠ¡</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\"> <span class=\"meta\">@Test</span></span><br><span class=\"line\"> <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">completeTask</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">     <span class=\"comment\">// æ ¹æ®ç”¨æˆ·æ‰¾åˆ°å…³è”çš„Task</span></span><br><span class=\"line\">     <span class=\"type\">Task</span> <span class=\"variable\">task</span> <span class=\"operator\">=</span> taskService.createTaskQuery()</span><br><span class=\"line\">             <span class=\"comment\">//.processInstanceId(&quot;eff78817-2e58-11ed-aa3f-c03c59ad2248&quot;)</span></span><br><span class=\"line\">             .taskAssignee(<span class=\"string\">&quot;demo&quot;</span>)</span><br><span class=\"line\">             .singleResult();</span><br><span class=\"line\">     <span class=\"keyword\">if</span>(task != <span class=\"literal\">null</span> )&#123;</span><br><span class=\"line\">         taskService.complete(task.getId());</span><br><span class=\"line\">         System.out.println(<span class=\"string\">&quot;ä»»åŠ¡å®¡æ‰¹å®Œæˆ...&quot;</span>);</span><br><span class=\"line\">     &#125;</span><br><span class=\"line\"> &#125;</span><br></pre></td></tr></table></figure>\n\n\n\n\n\n\n\n\n\n\n\n<p>å¥½äº†~åˆ°æ­¤Camundaçš„åŸºç¡€å…¥é—¨æ¡ˆä¾‹æˆ‘ä»¬å°±è®²è§£åˆ°è¿™é‡Œï¼Œéœ€è¦è·å–æ›´å¤šCamundaç›¸å…³è¯¾ç¨‹è§†é¢‘çš„å¯ä»¥ç»§ç»­å…³æ³¨æ³¢å“¥çš„Bè´¦å·ï¼Œæˆ–è€…æ·»åŠ æ³¢å“¥å¾®ä¿¡(boge_java&#x2F;boge3306)</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220904115333970.png\"\n                      alt=\"image-20220904115333970\"\n                ></p>\n"},{"title":"goodjob","date":"2022-10-09T15:25:42.000Z","sticky":888,"_content":"# [å¼ºåŒ–å­¦ä¹ ](https://hrl.boyuai.com/chapter/intro)\n# [JAVAå…¨æ ˆ](https://pdai.tech/)\n","source":"_posts/2022/10/goodjob.md","raw":"---\ntitle: goodjob\ndate: 2022-10-09 23:25:42\ntags:\ncategories:\nsticky: 888\n---\n# [å¼ºåŒ–å­¦ä¹ ](https://hrl.boyuai.com/chapter/intro)\n# [JAVAå…¨æ ˆ](https://pdai.tech/)\n","slug":"goodjob","published":1,"updated":"2022-11-19T14:56:14.824Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clas9ersm0009dk8fcqju05iq","content":"<h1 id=\"å¼ºåŒ–å­¦ä¹ \"><a href=\"#å¼ºåŒ–å­¦ä¹ \" class=\"headerlink\" title=\"å¼ºåŒ–å­¦ä¹ \"></a><a class=\"link\"   href=\"https://hrl.boyuai.com/chapter/intro\" >å¼ºåŒ–å­¦ä¹ <i class=\"fas fa-external-link-alt\"></i></a></h1><h1 id=\"JAVAå…¨æ ˆ\"><a href=\"#JAVAå…¨æ ˆ\" class=\"headerlink\" title=\"JAVAå…¨æ ˆ\"></a><a class=\"link\"   href=\"https://pdai.tech/\" >JAVAå…¨æ ˆ<i class=\"fas fa-external-link-alt\"></i></a></h1>","site":{"data":{"links":[{"name":"CZMæœ‰ç‚¹å†·","link":"https://czm.cool/","description":"CZMçš„åšå®¢","avatar":"https://img.czm.cool/avatar/avatar.png"},{"name":"PSH","link":"https://shamd.cloud/","description":"PSHçš„åšå®¢.","avatar":"https://shamd.cloud/upload/2022/07/afbb577733f46c9535dd1d6d6388278.jpg"},{"name":"KAI","link":"https://kainote.top/","description":"love artist, love code.","avatar":"https://cdn.jsdelivr.net/gh/kaix2301/pictures/img202201072101018.jpg"}]}},"excerpt":"","more":"<h1 id=\"å¼ºåŒ–å­¦ä¹ \"><a href=\"#å¼ºåŒ–å­¦ä¹ \" class=\"headerlink\" title=\"å¼ºåŒ–å­¦ä¹ \"></a><a class=\"link\"   href=\"https://hrl.boyuai.com/chapter/intro\" >å¼ºåŒ–å­¦ä¹ <i class=\"fas fa-external-link-alt\"></i></a></h1><h1 id=\"JAVAå…¨æ ˆ\"><a href=\"#JAVAå…¨æ ˆ\" class=\"headerlink\" title=\"JAVAå…¨æ ˆ\"></a><a class=\"link\"   href=\"https://pdai.tech/\" >JAVAå…¨æ ˆ<i class=\"fas fa-external-link-alt\"></i></a></h1>"},{"title":"flowableå®æˆ˜ç¯‡","date":"2022-10-19T15:41:48.000Z","_content":"# Flowableå®æˆ˜ç¯‡\n> lectureï¼šæ³¢æ³¢è€å¸ˆ\n\n# Flowableæ•´åˆSpringBoot\n\n## æ·»åŠ ç›¸å…³ä¾èµ–\n\n```xml\n<dependency>\n            <groupId>org.flowable</groupId>\n            <artifactId>flowable-spring-boot-starter</artifactId>\n            <version>6.6.0</version>\n        </dependency>\n        <dependency>\n            <groupId>com.alibaba</groupId>\n            <artifactId>druid</artifactId>\n            <version>1.1.14</version>\n        </dependency>\n        <dependency>\n            <groupId>mysql</groupId>\n            <artifactId>mysql-connector-java</artifactId>\n            <version>8.0.21</version>\n        </dependency>\n        <dependency>\n            <groupId>junit</groupId>\n            <artifactId>junit</artifactId>\n            <version>4.13.2</version>\n            <scope>test</scope>\n        </dependency>\n```\n\n\n\n## æ·»åŠ å¯¹åº”çš„é…ç½®\n\n```yml\nspring:\n  datasource:\n    type: com.alibaba.druid.pool.DruidDataSource\n    driver-class-name: com.mysql.cj.jdbc.Driver\n    url: jdbc:mysql://localhost:3306/flowable1?serverTimezone=UTC&nullCatalogMeansCurrent=true\n    username: root\n    password: 123456\n    hikari:\n      minimum-idle: 5\n      idle-timeout: 600000\n      maximum-pool-size: 10\n      auto-commit: true\n      pool-name: MyHikariCP\n      max-lifetime: 1800000\n      connection-timeout: 30000\n      connection-test-query: SELECT 1\nflowable:\n  async-executor-activate: false #å…³é—­å®šæ—¶ä»»åŠ¡JOB\n  #  å°†databaseSchemaUpdateè®¾ç½®ä¸ºtrueã€‚å½“Flowableå‘ç°åº“ä¸æ•°æ®åº“è¡¨ç»“æ„ä¸ä¸€è‡´æ—¶ï¼Œä¼šè‡ªåŠ¨å°†æ•°æ®åº“è¡¨ç»“æ„å‡çº§è‡³æ–°ç‰ˆæœ¬ã€‚\n  database-schema-update: true\nserver:\n  port: 8082\n```\n\nç³»ç»Ÿå¯åŠ¨çš„æ—¶å€™æ£€æŸ¥å¦‚æœæ•°æ®åº“å¯¹åº”çš„è¡¨ç»“æ„æ²¡æœ‰åˆ›å»ºï¼Œä¼šå¸®åŠ©æˆ‘ä»¬å…ˆåˆ›å»ºå¯¹åº”çš„è¡¨ç»“æ„\n\n\n\n## æ¡ˆä¾‹åº”ç”¨\n\n### æµç¨‹éƒ¨ç½²\n\n- *processes*ç›®å½•ä¸‹çš„ä»»ä½•BPMN 2.0æµç¨‹å®šä¹‰éƒ½ä¼šè¢«è‡ªåŠ¨éƒ¨ç½²ã€‚åˆ›å»º*processes*ç›®å½•ï¼Œå¹¶åœ¨å…¶ä¸­åˆ›å»ºç¤ºä¾‹æµç¨‹å®šä¹‰ï¼ˆå‘½åä¸º*one-task-process.bpmn20.xml*ï¼‰ã€‚\n- *cases*ç›®å½•ä¸‹çš„ä»»ä½•CMMN 1.1äº‹ä¾‹éƒ½ä¼šè¢«è‡ªåŠ¨éƒ¨ç½²ã€‚\n- *forms*ç›®å½•ä¸‹çš„ä»»ä½•Formå®šä¹‰éƒ½ä¼šè¢«è‡ªåŠ¨éƒ¨ç½²ã€‚\n\n![image-20220328110737387](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220328110737387.png)\n\n\n\né€šè¿‡æ‰‹åŠ¨æ–¹å¼æ¥éƒ¨ç½²\n\n```java\n@SpringBootTest\nclass FlowableSpringBoot28ApplicationTests {\n\n    @Autowired\n    private ProcessEngine processEngine;\n\n    @Autowired\n    private RepositoryService repositoryService;\n\n\n    @Autowired\n    private TaskService taskService;\n\n\n    @Autowired\n    private RuntimeService runtimeService;\n\n\n    /**\n     * Deploy\n     */\n    @Test\n    void testDeploy() {\n        //RepositoryService repositoryService = processEngine.getRepositoryService();\n        Deployment deploy = repositoryService.createDeployment()\n                .addClasspathResource(\"è¯·å‡æµç¨‹.bpmn20.xml\")\n                .name(\"holiday\")\n                .deploy();\n        System.out.println(\"deploy.getId() = \" + deploy.getId());\n        System.out.println(\"deploy.getName() = \" + deploy.getName());\n    }\n\n}\n\n```\n\n\n\n\n\n### å¯åŠ¨æµç¨‹\n\nå¯åŠ¨æµç¨‹å’Œå‰é¢ä»‹ç»çš„å°±æ²¡ä»€ä¹ˆå·®å¼‚äº†ï¼Œé€šè¿‡RuntimeServiceæ¥å®ç°\n\n```java\n    /**\n     * start process\n     */\n    @Test\n    void startFlow(){\n        Map<String,Object> map = new HashMap();\n        map.put(\"assignee0\",\"zhangsan\");\n        map.put(\"assignee1\",\"zhangsan\");\n        runtimeService.startProcessInstanceById(\"holiday28:2:3653a34e-ae45-11ec-969d-c03c59ad2248\",map);\n    }\n```\n\n\n\n### å¤„ç†æµç¨‹\n\nå¤„ç†æµç¨‹å’Œå‰é¢ä»‹ç»çš„ä¹Ÿä¸€æ ·ï¼Œé€šè¿‡TaskServiceæ¥å¤„ç†\n\n```java\n    /**\n     * complete Task\n     */\n    @Test\n    void completeTask(){\n        Task task = taskService.createTaskQuery()\n                .processInstanceId(\"fb166cd8-ae45-11ec-92c4-c03c59ad2248\")\n                .taskAssignee(\"zhangsan\")\n                .singleResult();\n        if(task != null){\n            taskService.complete(task.getId());\n            System.out.println(\"complete ....\");\n        }\n    }\n```\n\n","source":"_posts/2022/10/flowableå®æˆ˜ç¯‡.md","raw":"---\ntitle: flowableå®æˆ˜ç¯‡\ndate: 2022-10-19 23:41:48\ntags: [BPMN,Flowable]\ncategories: [ç¬”è®°]\n---\n# Flowableå®æˆ˜ç¯‡\n> lectureï¼šæ³¢æ³¢è€å¸ˆ\n\n# Flowableæ•´åˆSpringBoot\n\n## æ·»åŠ ç›¸å…³ä¾èµ–\n\n```xml\n<dependency>\n            <groupId>org.flowable</groupId>\n            <artifactId>flowable-spring-boot-starter</artifactId>\n            <version>6.6.0</version>\n        </dependency>\n        <dependency>\n            <groupId>com.alibaba</groupId>\n            <artifactId>druid</artifactId>\n            <version>1.1.14</version>\n        </dependency>\n        <dependency>\n            <groupId>mysql</groupId>\n            <artifactId>mysql-connector-java</artifactId>\n            <version>8.0.21</version>\n        </dependency>\n        <dependency>\n            <groupId>junit</groupId>\n            <artifactId>junit</artifactId>\n            <version>4.13.2</version>\n            <scope>test</scope>\n        </dependency>\n```\n\n\n\n## æ·»åŠ å¯¹åº”çš„é…ç½®\n\n```yml\nspring:\n  datasource:\n    type: com.alibaba.druid.pool.DruidDataSource\n    driver-class-name: com.mysql.cj.jdbc.Driver\n    url: jdbc:mysql://localhost:3306/flowable1?serverTimezone=UTC&nullCatalogMeansCurrent=true\n    username: root\n    password: 123456\n    hikari:\n      minimum-idle: 5\n      idle-timeout: 600000\n      maximum-pool-size: 10\n      auto-commit: true\n      pool-name: MyHikariCP\n      max-lifetime: 1800000\n      connection-timeout: 30000\n      connection-test-query: SELECT 1\nflowable:\n  async-executor-activate: false #å…³é—­å®šæ—¶ä»»åŠ¡JOB\n  #  å°†databaseSchemaUpdateè®¾ç½®ä¸ºtrueã€‚å½“Flowableå‘ç°åº“ä¸æ•°æ®åº“è¡¨ç»“æ„ä¸ä¸€è‡´æ—¶ï¼Œä¼šè‡ªåŠ¨å°†æ•°æ®åº“è¡¨ç»“æ„å‡çº§è‡³æ–°ç‰ˆæœ¬ã€‚\n  database-schema-update: true\nserver:\n  port: 8082\n```\n\nç³»ç»Ÿå¯åŠ¨çš„æ—¶å€™æ£€æŸ¥å¦‚æœæ•°æ®åº“å¯¹åº”çš„è¡¨ç»“æ„æ²¡æœ‰åˆ›å»ºï¼Œä¼šå¸®åŠ©æˆ‘ä»¬å…ˆåˆ›å»ºå¯¹åº”çš„è¡¨ç»“æ„\n\n\n\n## æ¡ˆä¾‹åº”ç”¨\n\n### æµç¨‹éƒ¨ç½²\n\n- *processes*ç›®å½•ä¸‹çš„ä»»ä½•BPMN 2.0æµç¨‹å®šä¹‰éƒ½ä¼šè¢«è‡ªåŠ¨éƒ¨ç½²ã€‚åˆ›å»º*processes*ç›®å½•ï¼Œå¹¶åœ¨å…¶ä¸­åˆ›å»ºç¤ºä¾‹æµç¨‹å®šä¹‰ï¼ˆå‘½åä¸º*one-task-process.bpmn20.xml*ï¼‰ã€‚\n- *cases*ç›®å½•ä¸‹çš„ä»»ä½•CMMN 1.1äº‹ä¾‹éƒ½ä¼šè¢«è‡ªåŠ¨éƒ¨ç½²ã€‚\n- *forms*ç›®å½•ä¸‹çš„ä»»ä½•Formå®šä¹‰éƒ½ä¼šè¢«è‡ªåŠ¨éƒ¨ç½²ã€‚\n\n![image-20220328110737387](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220328110737387.png)\n\n\n\né€šè¿‡æ‰‹åŠ¨æ–¹å¼æ¥éƒ¨ç½²\n\n```java\n@SpringBootTest\nclass FlowableSpringBoot28ApplicationTests {\n\n    @Autowired\n    private ProcessEngine processEngine;\n\n    @Autowired\n    private RepositoryService repositoryService;\n\n\n    @Autowired\n    private TaskService taskService;\n\n\n    @Autowired\n    private RuntimeService runtimeService;\n\n\n    /**\n     * Deploy\n     */\n    @Test\n    void testDeploy() {\n        //RepositoryService repositoryService = processEngine.getRepositoryService();\n        Deployment deploy = repositoryService.createDeployment()\n                .addClasspathResource(\"è¯·å‡æµç¨‹.bpmn20.xml\")\n                .name(\"holiday\")\n                .deploy();\n        System.out.println(\"deploy.getId() = \" + deploy.getId());\n        System.out.println(\"deploy.getName() = \" + deploy.getName());\n    }\n\n}\n\n```\n\n\n\n\n\n### å¯åŠ¨æµç¨‹\n\nå¯åŠ¨æµç¨‹å’Œå‰é¢ä»‹ç»çš„å°±æ²¡ä»€ä¹ˆå·®å¼‚äº†ï¼Œé€šè¿‡RuntimeServiceæ¥å®ç°\n\n```java\n    /**\n     * start process\n     */\n    @Test\n    void startFlow(){\n        Map<String,Object> map = new HashMap();\n        map.put(\"assignee0\",\"zhangsan\");\n        map.put(\"assignee1\",\"zhangsan\");\n        runtimeService.startProcessInstanceById(\"holiday28:2:3653a34e-ae45-11ec-969d-c03c59ad2248\",map);\n    }\n```\n\n\n\n### å¤„ç†æµç¨‹\n\nå¤„ç†æµç¨‹å’Œå‰é¢ä»‹ç»çš„ä¹Ÿä¸€æ ·ï¼Œé€šè¿‡TaskServiceæ¥å¤„ç†\n\n```java\n    /**\n     * complete Task\n     */\n    @Test\n    void completeTask(){\n        Task task = taskService.createTaskQuery()\n                .processInstanceId(\"fb166cd8-ae45-11ec-92c4-c03c59ad2248\")\n                .taskAssignee(\"zhangsan\")\n                .singleResult();\n        if(task != null){\n            taskService.complete(task.getId());\n            System.out.println(\"complete ....\");\n        }\n    }\n```\n\n","slug":"flowableå®æˆ˜ç¯‡","published":1,"updated":"2022-11-05T14:16:59.510Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clas9ersn000bdk8fbm23dnlq","content":"<h1 id=\"Flowableå®æˆ˜ç¯‡\"><a href=\"#Flowableå®æˆ˜ç¯‡\" class=\"headerlink\" title=\"Flowableå®æˆ˜ç¯‡\"></a>Flowableå®æˆ˜ç¯‡</h1><blockquote>\n<p>lectureï¼šæ³¢æ³¢è€å¸ˆ</p>\n</blockquote>\n<h1 id=\"Flowableæ•´åˆSpringBoot\"><a href=\"#Flowableæ•´åˆSpringBoot\" class=\"headerlink\" title=\"Flowableæ•´åˆSpringBoot\"></a>Flowableæ•´åˆSpringBoot</h1><h2 id=\"æ·»åŠ ç›¸å…³ä¾èµ–\"><a href=\"#æ·»åŠ ç›¸å…³ä¾èµ–\" class=\"headerlink\" title=\"æ·»åŠ ç›¸å…³ä¾èµ–\"></a>æ·»åŠ ç›¸å…³ä¾èµ–</h2><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.flowable<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>flowable-spring-boot-starter<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>6.6.0<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>com.alibaba<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>druid<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>1.1.14<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>mysql<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>mysql-connector-java<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>8.0.21<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>junit<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>junit<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>4.13.2<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">scope</span>&gt;</span>test<span class=\"tag\">&lt;/<span class=\"name\">scope</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n\n\n<h2 id=\"æ·»åŠ å¯¹åº”çš„é…ç½®\"><a href=\"#æ·»åŠ å¯¹åº”çš„é…ç½®\" class=\"headerlink\" title=\"æ·»åŠ å¯¹åº”çš„é…ç½®\"></a>æ·»åŠ å¯¹åº”çš„é…ç½®</h2><figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">spring:</span></span><br><span class=\"line\">  <span class=\"attr\">datasource:</span></span><br><span class=\"line\">    <span class=\"attr\">type:</span> <span class=\"string\">com.alibaba.druid.pool.DruidDataSource</span></span><br><span class=\"line\">    <span class=\"attr\">driver-class-name:</span> <span class=\"string\">com.mysql.cj.jdbc.Driver</span></span><br><span class=\"line\">    <span class=\"attr\">url:</span> <span class=\"string\">jdbc:mysql://localhost:3306/flowable1?serverTimezone=UTC&amp;nullCatalogMeansCurrent=true</span></span><br><span class=\"line\">    <span class=\"attr\">username:</span> <span class=\"string\">root</span></span><br><span class=\"line\">    <span class=\"attr\">password:</span> <span class=\"number\">123456</span></span><br><span class=\"line\">    <span class=\"attr\">hikari:</span></span><br><span class=\"line\">      <span class=\"attr\">minimum-idle:</span> <span class=\"number\">5</span></span><br><span class=\"line\">      <span class=\"attr\">idle-timeout:</span> <span class=\"number\">600000</span></span><br><span class=\"line\">      <span class=\"attr\">maximum-pool-size:</span> <span class=\"number\">10</span></span><br><span class=\"line\">      <span class=\"attr\">auto-commit:</span> <span class=\"literal\">true</span></span><br><span class=\"line\">      <span class=\"attr\">pool-name:</span> <span class=\"string\">MyHikariCP</span></span><br><span class=\"line\">      <span class=\"attr\">max-lifetime:</span> <span class=\"number\">1800000</span></span><br><span class=\"line\">      <span class=\"attr\">connection-timeout:</span> <span class=\"number\">30000</span></span><br><span class=\"line\">      <span class=\"attr\">connection-test-query:</span> <span class=\"string\">SELECT</span> <span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"attr\">flowable:</span></span><br><span class=\"line\">  <span class=\"attr\">async-executor-activate:</span> <span class=\"literal\">false</span> <span class=\"comment\">#å…³é—­å®šæ—¶ä»»åŠ¡JOB</span></span><br><span class=\"line\">  <span class=\"comment\">#  å°†databaseSchemaUpdateè®¾ç½®ä¸ºtrueã€‚å½“Flowableå‘ç°åº“ä¸æ•°æ®åº“è¡¨ç»“æ„ä¸ä¸€è‡´æ—¶ï¼Œä¼šè‡ªåŠ¨å°†æ•°æ®åº“è¡¨ç»“æ„å‡çº§è‡³æ–°ç‰ˆæœ¬ã€‚</span></span><br><span class=\"line\">  <span class=\"attr\">database-schema-update:</span> <span class=\"literal\">true</span></span><br><span class=\"line\"><span class=\"attr\">server:</span></span><br><span class=\"line\">  <span class=\"attr\">port:</span> <span class=\"number\">8082</span></span><br></pre></td></tr></table></figure>\n\n<p>ç³»ç»Ÿå¯åŠ¨çš„æ—¶å€™æ£€æŸ¥å¦‚æœæ•°æ®åº“å¯¹åº”çš„è¡¨ç»“æ„æ²¡æœ‰åˆ›å»ºï¼Œä¼šå¸®åŠ©æˆ‘ä»¬å…ˆåˆ›å»ºå¯¹åº”çš„è¡¨ç»“æ„</p>\n<h2 id=\"æ¡ˆä¾‹åº”ç”¨\"><a href=\"#æ¡ˆä¾‹åº”ç”¨\" class=\"headerlink\" title=\"æ¡ˆä¾‹åº”ç”¨\"></a>æ¡ˆä¾‹åº”ç”¨</h2><h3 id=\"æµç¨‹éƒ¨ç½²\"><a href=\"#æµç¨‹éƒ¨ç½²\" class=\"headerlink\" title=\"æµç¨‹éƒ¨ç½²\"></a>æµç¨‹éƒ¨ç½²</h3><ul>\n<li><em>processes</em>ç›®å½•ä¸‹çš„ä»»ä½•BPMN 2.0æµç¨‹å®šä¹‰éƒ½ä¼šè¢«è‡ªåŠ¨éƒ¨ç½²ã€‚åˆ›å»º<em>processes</em>ç›®å½•ï¼Œå¹¶åœ¨å…¶ä¸­åˆ›å»ºç¤ºä¾‹æµç¨‹å®šä¹‰ï¼ˆå‘½åä¸º<em>one-task-process.bpmn20.xml</em>ï¼‰ã€‚</li>\n<li><em>cases</em>ç›®å½•ä¸‹çš„ä»»ä½•CMMN 1.1äº‹ä¾‹éƒ½ä¼šè¢«è‡ªåŠ¨éƒ¨ç½²ã€‚</li>\n<li><em>forms</em>ç›®å½•ä¸‹çš„ä»»ä½•Formå®šä¹‰éƒ½ä¼šè¢«è‡ªåŠ¨éƒ¨ç½²ã€‚</li>\n</ul>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220328110737387.png\"\n                      alt=\"image-20220328110737387\"\n                ></p>\n<p>é€šè¿‡æ‰‹åŠ¨æ–¹å¼æ¥éƒ¨ç½²</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@SpringBootTest</span></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">FlowableSpringBoot28ApplicationTests</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Autowired</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> ProcessEngine processEngine;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Autowired</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> RepositoryService repositoryService;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Autowired</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> TaskService taskService;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Autowired</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> RuntimeService runtimeService;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * Deploy</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"keyword\">void</span> <span class=\"title function_\">testDeploy</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">//RepositoryService repositoryService = processEngine.getRepositoryService();</span></span><br><span class=\"line\">        <span class=\"type\">Deployment</span> <span class=\"variable\">deploy</span> <span class=\"operator\">=</span> repositoryService.createDeployment()</span><br><span class=\"line\">                .addClasspathResource(<span class=\"string\">&quot;è¯·å‡æµç¨‹.bpmn20.xml&quot;</span>)</span><br><span class=\"line\">                .name(<span class=\"string\">&quot;holiday&quot;</span>)</span><br><span class=\"line\">                .deploy();</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;deploy.getId() = &quot;</span> + deploy.getId());</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;deploy.getName() = &quot;</span> + deploy.getName());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n\n\n\n\n<h3 id=\"å¯åŠ¨æµç¨‹\"><a href=\"#å¯åŠ¨æµç¨‹\" class=\"headerlink\" title=\"å¯åŠ¨æµç¨‹\"></a>å¯åŠ¨æµç¨‹</h3><p>å¯åŠ¨æµç¨‹å’Œå‰é¢ä»‹ç»çš„å°±æ²¡ä»€ä¹ˆå·®å¼‚äº†ï¼Œé€šè¿‡RuntimeServiceæ¥å®ç°</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * start process</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"title function_\">startFlow</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    Map&lt;String,Object&gt; map = <span class=\"keyword\">new</span> <span class=\"title class_\">HashMap</span>();</span><br><span class=\"line\">    map.put(<span class=\"string\">&quot;assignee0&quot;</span>,<span class=\"string\">&quot;zhangsan&quot;</span>);</span><br><span class=\"line\">    map.put(<span class=\"string\">&quot;assignee1&quot;</span>,<span class=\"string\">&quot;zhangsan&quot;</span>);</span><br><span class=\"line\">    runtimeService.startProcessInstanceById(<span class=\"string\">&quot;holiday28:2:3653a34e-ae45-11ec-969d-c03c59ad2248&quot;</span>,map);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"å¤„ç†æµç¨‹\"><a href=\"#å¤„ç†æµç¨‹\" class=\"headerlink\" title=\"å¤„ç†æµç¨‹\"></a>å¤„ç†æµç¨‹</h3><p>å¤„ç†æµç¨‹å’Œå‰é¢ä»‹ç»çš„ä¹Ÿä¸€æ ·ï¼Œé€šè¿‡TaskServiceæ¥å¤„ç†</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * complete Task</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"title function_\">completeTask</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"type\">Task</span> <span class=\"variable\">task</span> <span class=\"operator\">=</span> taskService.createTaskQuery()</span><br><span class=\"line\">            .processInstanceId(<span class=\"string\">&quot;fb166cd8-ae45-11ec-92c4-c03c59ad2248&quot;</span>)</span><br><span class=\"line\">            .taskAssignee(<span class=\"string\">&quot;zhangsan&quot;</span>)</span><br><span class=\"line\">            .singleResult();</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(task != <span class=\"literal\">null</span>)&#123;</span><br><span class=\"line\">        taskService.complete(task.getId());</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;complete ....&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n","site":{"data":{"links":[{"name":"CZMæœ‰ç‚¹å†·","link":"https://czm.cool/","description":"CZMçš„åšå®¢","avatar":"https://img.czm.cool/avatar/avatar.png"},{"name":"PSH","link":"https://shamd.cloud/","description":"PSHçš„åšå®¢.","avatar":"https://shamd.cloud/upload/2022/07/afbb577733f46c9535dd1d6d6388278.jpg"},{"name":"KAI","link":"https://kainote.top/","description":"love artist, love code.","avatar":"https://cdn.jsdelivr.net/gh/kaix2301/pictures/img202201072101018.jpg"}]}},"excerpt":"","more":"<h1 id=\"Flowableå®æˆ˜ç¯‡\"><a href=\"#Flowableå®æˆ˜ç¯‡\" class=\"headerlink\" title=\"Flowableå®æˆ˜ç¯‡\"></a>Flowableå®æˆ˜ç¯‡</h1><blockquote>\n<p>lectureï¼šæ³¢æ³¢è€å¸ˆ</p>\n</blockquote>\n<h1 id=\"Flowableæ•´åˆSpringBoot\"><a href=\"#Flowableæ•´åˆSpringBoot\" class=\"headerlink\" title=\"Flowableæ•´åˆSpringBoot\"></a>Flowableæ•´åˆSpringBoot</h1><h2 id=\"æ·»åŠ ç›¸å…³ä¾èµ–\"><a href=\"#æ·»åŠ ç›¸å…³ä¾èµ–\" class=\"headerlink\" title=\"æ·»åŠ ç›¸å…³ä¾èµ–\"></a>æ·»åŠ ç›¸å…³ä¾èµ–</h2><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.flowable<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>flowable-spring-boot-starter<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>6.6.0<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>com.alibaba<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>druid<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>1.1.14<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>mysql<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>mysql-connector-java<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>8.0.21<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>junit<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>junit<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>4.13.2<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">scope</span>&gt;</span>test<span class=\"tag\">&lt;/<span class=\"name\">scope</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n\n\n<h2 id=\"æ·»åŠ å¯¹åº”çš„é…ç½®\"><a href=\"#æ·»åŠ å¯¹åº”çš„é…ç½®\" class=\"headerlink\" title=\"æ·»åŠ å¯¹åº”çš„é…ç½®\"></a>æ·»åŠ å¯¹åº”çš„é…ç½®</h2><figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">spring:</span></span><br><span class=\"line\">  <span class=\"attr\">datasource:</span></span><br><span class=\"line\">    <span class=\"attr\">type:</span> <span class=\"string\">com.alibaba.druid.pool.DruidDataSource</span></span><br><span class=\"line\">    <span class=\"attr\">driver-class-name:</span> <span class=\"string\">com.mysql.cj.jdbc.Driver</span></span><br><span class=\"line\">    <span class=\"attr\">url:</span> <span class=\"string\">jdbc:mysql://localhost:3306/flowable1?serverTimezone=UTC&amp;nullCatalogMeansCurrent=true</span></span><br><span class=\"line\">    <span class=\"attr\">username:</span> <span class=\"string\">root</span></span><br><span class=\"line\">    <span class=\"attr\">password:</span> <span class=\"number\">123456</span></span><br><span class=\"line\">    <span class=\"attr\">hikari:</span></span><br><span class=\"line\">      <span class=\"attr\">minimum-idle:</span> <span class=\"number\">5</span></span><br><span class=\"line\">      <span class=\"attr\">idle-timeout:</span> <span class=\"number\">600000</span></span><br><span class=\"line\">      <span class=\"attr\">maximum-pool-size:</span> <span class=\"number\">10</span></span><br><span class=\"line\">      <span class=\"attr\">auto-commit:</span> <span class=\"literal\">true</span></span><br><span class=\"line\">      <span class=\"attr\">pool-name:</span> <span class=\"string\">MyHikariCP</span></span><br><span class=\"line\">      <span class=\"attr\">max-lifetime:</span> <span class=\"number\">1800000</span></span><br><span class=\"line\">      <span class=\"attr\">connection-timeout:</span> <span class=\"number\">30000</span></span><br><span class=\"line\">      <span class=\"attr\">connection-test-query:</span> <span class=\"string\">SELECT</span> <span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"attr\">flowable:</span></span><br><span class=\"line\">  <span class=\"attr\">async-executor-activate:</span> <span class=\"literal\">false</span> <span class=\"comment\">#å…³é—­å®šæ—¶ä»»åŠ¡JOB</span></span><br><span class=\"line\">  <span class=\"comment\">#  å°†databaseSchemaUpdateè®¾ç½®ä¸ºtrueã€‚å½“Flowableå‘ç°åº“ä¸æ•°æ®åº“è¡¨ç»“æ„ä¸ä¸€è‡´æ—¶ï¼Œä¼šè‡ªåŠ¨å°†æ•°æ®åº“è¡¨ç»“æ„å‡çº§è‡³æ–°ç‰ˆæœ¬ã€‚</span></span><br><span class=\"line\">  <span class=\"attr\">database-schema-update:</span> <span class=\"literal\">true</span></span><br><span class=\"line\"><span class=\"attr\">server:</span></span><br><span class=\"line\">  <span class=\"attr\">port:</span> <span class=\"number\">8082</span></span><br></pre></td></tr></table></figure>\n\n<p>ç³»ç»Ÿå¯åŠ¨çš„æ—¶å€™æ£€æŸ¥å¦‚æœæ•°æ®åº“å¯¹åº”çš„è¡¨ç»“æ„æ²¡æœ‰åˆ›å»ºï¼Œä¼šå¸®åŠ©æˆ‘ä»¬å…ˆåˆ›å»ºå¯¹åº”çš„è¡¨ç»“æ„</p>\n<h2 id=\"æ¡ˆä¾‹åº”ç”¨\"><a href=\"#æ¡ˆä¾‹åº”ç”¨\" class=\"headerlink\" title=\"æ¡ˆä¾‹åº”ç”¨\"></a>æ¡ˆä¾‹åº”ç”¨</h2><h3 id=\"æµç¨‹éƒ¨ç½²\"><a href=\"#æµç¨‹éƒ¨ç½²\" class=\"headerlink\" title=\"æµç¨‹éƒ¨ç½²\"></a>æµç¨‹éƒ¨ç½²</h3><ul>\n<li><em>processes</em>ç›®å½•ä¸‹çš„ä»»ä½•BPMN 2.0æµç¨‹å®šä¹‰éƒ½ä¼šè¢«è‡ªåŠ¨éƒ¨ç½²ã€‚åˆ›å»º<em>processes</em>ç›®å½•ï¼Œå¹¶åœ¨å…¶ä¸­åˆ›å»ºç¤ºä¾‹æµç¨‹å®šä¹‰ï¼ˆå‘½åä¸º<em>one-task-process.bpmn20.xml</em>ï¼‰ã€‚</li>\n<li><em>cases</em>ç›®å½•ä¸‹çš„ä»»ä½•CMMN 1.1äº‹ä¾‹éƒ½ä¼šè¢«è‡ªåŠ¨éƒ¨ç½²ã€‚</li>\n<li><em>forms</em>ç›®å½•ä¸‹çš„ä»»ä½•Formå®šä¹‰éƒ½ä¼šè¢«è‡ªåŠ¨éƒ¨ç½²ã€‚</li>\n</ul>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220328110737387.png\"\n                      alt=\"image-20220328110737387\"\n                ></p>\n<p>é€šè¿‡æ‰‹åŠ¨æ–¹å¼æ¥éƒ¨ç½²</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@SpringBootTest</span></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">FlowableSpringBoot28ApplicationTests</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Autowired</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> ProcessEngine processEngine;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Autowired</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> RepositoryService repositoryService;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Autowired</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> TaskService taskService;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Autowired</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> RuntimeService runtimeService;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * Deploy</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"keyword\">void</span> <span class=\"title function_\">testDeploy</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">//RepositoryService repositoryService = processEngine.getRepositoryService();</span></span><br><span class=\"line\">        <span class=\"type\">Deployment</span> <span class=\"variable\">deploy</span> <span class=\"operator\">=</span> repositoryService.createDeployment()</span><br><span class=\"line\">                .addClasspathResource(<span class=\"string\">&quot;è¯·å‡æµç¨‹.bpmn20.xml&quot;</span>)</span><br><span class=\"line\">                .name(<span class=\"string\">&quot;holiday&quot;</span>)</span><br><span class=\"line\">                .deploy();</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;deploy.getId() = &quot;</span> + deploy.getId());</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;deploy.getName() = &quot;</span> + deploy.getName());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n\n\n\n\n<h3 id=\"å¯åŠ¨æµç¨‹\"><a href=\"#å¯åŠ¨æµç¨‹\" class=\"headerlink\" title=\"å¯åŠ¨æµç¨‹\"></a>å¯åŠ¨æµç¨‹</h3><p>å¯åŠ¨æµç¨‹å’Œå‰é¢ä»‹ç»çš„å°±æ²¡ä»€ä¹ˆå·®å¼‚äº†ï¼Œé€šè¿‡RuntimeServiceæ¥å®ç°</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * start process</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"title function_\">startFlow</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    Map&lt;String,Object&gt; map = <span class=\"keyword\">new</span> <span class=\"title class_\">HashMap</span>();</span><br><span class=\"line\">    map.put(<span class=\"string\">&quot;assignee0&quot;</span>,<span class=\"string\">&quot;zhangsan&quot;</span>);</span><br><span class=\"line\">    map.put(<span class=\"string\">&quot;assignee1&quot;</span>,<span class=\"string\">&quot;zhangsan&quot;</span>);</span><br><span class=\"line\">    runtimeService.startProcessInstanceById(<span class=\"string\">&quot;holiday28:2:3653a34e-ae45-11ec-969d-c03c59ad2248&quot;</span>,map);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"å¤„ç†æµç¨‹\"><a href=\"#å¤„ç†æµç¨‹\" class=\"headerlink\" title=\"å¤„ç†æµç¨‹\"></a>å¤„ç†æµç¨‹</h3><p>å¤„ç†æµç¨‹å’Œå‰é¢ä»‹ç»çš„ä¹Ÿä¸€æ ·ï¼Œé€šè¿‡TaskServiceæ¥å¤„ç†</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * complete Task</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"title function_\">completeTask</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"type\">Task</span> <span class=\"variable\">task</span> <span class=\"operator\">=</span> taskService.createTaskQuery()</span><br><span class=\"line\">            .processInstanceId(<span class=\"string\">&quot;fb166cd8-ae45-11ec-92c4-c03c59ad2248&quot;</span>)</span><br><span class=\"line\">            .taskAssignee(<span class=\"string\">&quot;zhangsan&quot;</span>)</span><br><span class=\"line\">            .singleResult();</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(task != <span class=\"literal\">null</span>)&#123;</span><br><span class=\"line\">        taskService.complete(task.getId());</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;complete ....&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n"},{"title":"flowableåŸºç¡€ç¯‡","date":"2022-10-19T15:50:41.000Z","_content":"# flowableåŸºç¡€ç¯‡\n> Lectureï¼šæ³¢æ³¢è€å¸ˆ\n\n\n# Flowableä»‹ç»\n\nFlowableæ˜¯BPMNçš„ä¸€ä¸ªåŸºäºjavaçš„è½¯ä»¶å®ç°ï¼Œä¸è¿‡Flowableä¸ä»…ä»…åŒ…æ‹¬BPMNï¼Œè¿˜æœ‰DMNå†³ç­–è¡¨å’ŒCMMN Caseç®¡ç†å¼•æ“ï¼Œå¹¶ä¸”æœ‰è‡ªå·±çš„ç”¨æˆ·ç®¡ç†ã€å¾®æœåŠ¡APIç­‰ä¸€ç³»åˆ—åŠŸèƒ½ï¼Œæ˜¯ä¸€ä¸ªæœåŠ¡å¹³å°ã€‚\n\n![image-20220317101115398](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn\\image-20220317101115398.png)\n\n\n\n\n\n# FlowableåŸºç¡€\n\nå®˜æ–¹æ‰‹å†Œï¼šhttps://tkjohn.github.io/flowable-userguide/#_introduction\n\n## åˆ›å»ºProcessEngine\n\nåˆ›å»ºä¸€ä¸ªåŸºæœ¬çš„mavenå·¥ç¨‹ï¼Œå¯ä»¥æ˜¯Eclipseä¹Ÿå¯ä»¥æ˜¯å…¶ä»–IDEAã€‚ç„¶åæ·»åŠ ä¸¤ä¸ªä¾èµ–\n\n* Flowableæµç¨‹å¼•æ“ã€‚ä½¿æˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªProcessEngineæµç¨‹å¼•æ“å¯¹è±¡ï¼Œå¹¶è®¿é—®Flowable APIã€‚\n* ä¸€ä¸ªæ˜¯MySQLçš„æ•°æ®åº“é©±åŠ¨\n\nåœ¨*pom.xml*æ–‡ä»¶ä¸­æ·»åŠ ä¸‹åˆ—è¡Œï¼š\n\n```xml\n<dependency>\n    <groupId>org.flowable</groupId>\n    <artifactId>flowable-engine</artifactId>\n    <version>6.3.0</version>\n</dependency>\n<dependency>\n    <groupId>mysql</groupId>\n    <artifactId>mysql-connector-java</artifactId>\n    <version>8.0.21</version>\n</dependency>\n```\n\nç„¶ååˆ›å»ºä¸€ä¸ªæ™®é€šçš„Javaç±»ï¼Œæ·»åŠ å¯¹åº”çš„mainæ–¹æ³•ï¼Œé¦–å…ˆè¦åšçš„æ˜¯åˆå§‹åŒ–**ProcessEngine**æµç¨‹å¼•æ“å®ä¾‹ã€‚è¿™æ˜¯ä¸€ä¸ªçº¿ç¨‹å®‰å…¨çš„å¯¹è±¡ï¼Œå› æ­¤é€šå¸¸åªéœ€è¦åœ¨ä¸€ä¸ªåº”ç”¨ä¸­åˆå§‹åŒ–ä¸€æ¬¡ã€‚ *ProcessEngine*ç”±**ProcessEngineConfiguration**å®ä¾‹åˆ›å»ºã€‚è¯¥å®ä¾‹å¯ä»¥é…ç½®ä¸è°ƒæ•´æµç¨‹å¼•æ“çš„è®¾ç½®ã€‚ é€šå¸¸ä½¿ç”¨ä¸€ä¸ªé…ç½®XMLæ–‡ä»¶åˆ›å»º*ProcessEngineConfiguration*ï¼Œä½†æ˜¯ï¼ˆåƒåœ¨è¿™é‡Œåšçš„ä¸€æ ·ï¼‰ä¹Ÿå¯ä»¥ç¼–ç¨‹æ–¹å¼åˆ›å»ºå®ƒã€‚ *ProcessEngineConfiguration*æ‰€éœ€çš„æœ€å°é…ç½®ï¼Œæ˜¯æ•°æ®åº“JDBCè¿æ¥ï¼š\n\n```java\npublic static void main(String[] args) {\n    ProcessEngineConfiguration cfg = new StandaloneProcessEngineConfiguration()\n        .setJdbcUrl(\"jdbc:mysql://localhost:3306/flowable-learn?serverTimezone=UTC\")\n        .setJdbcUsername(\"root\")\n        .setJdbcPassword(\"123456\")\n        .setJdbcDriver(\"com.mysql.cj.jdbc.Driver\")\n        .setDatabaseSchemaUpdate(ProcessEngineConfiguration.DB_SCHEMA_UPDATE_TRUE);\n    ProcessEngine processEngine = cfg.buildProcessEngine();\n}\n```\n\næ³¨æ„åœ¨mysql8.0ä¸­æ‰§è¡Œå¯èƒ½å‡ºç°å¦‚ä¸‹çš„é”™è¯¯\n\n![image-20220316093416477](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316093416477.png)\n\nå‡ºç°è¿™ç§æƒ…å†µåªéœ€è¦åœ¨mysqlçš„è¿æ¥å­—ç¬¦ä¸²ä¸­æ·»åŠ ä¸ŠnullCatalogMeansCurrent=trueï¼Œè®¾ç½®ä¸ºåªæŸ¥å½“å‰è¿æ¥çš„schemaåº“å³å¯ã€‚\n\n```java\n    public static void main(String[] args) {\n        ProcessEngineConfiguration cfg = new StandaloneProcessEngineConfiguration()\n                .setJdbcUrl(\"jdbc:mysql://localhost:3306/flowable-learn1?serverTimezone=UTC&nullCatalogMeansCurrent=true\")\n                .setJdbcUsername(\"root\")\n                .setJdbcPassword(\"123456\")\n                .setJdbcDriver(\"com.mysql.cj.jdbc.Driver\")\n                .setDatabaseSchemaUpdate(ProcessEngineConfiguration.DB_SCHEMA_UPDATE_TRUE);\n        ProcessEngine processEngine = cfg.buildProcessEngine();\n    }\n```\n\nç„¶ååº”ç”¨è¿è¡Œæ²¡æœ‰é—®é¢˜ï¼Œä½†ä¹Ÿæ²¡æœ‰åœ¨æ§åˆ¶å°æä¾›æœ‰ç”¨çš„ä¿¡æ¯ï¼Œåªæœ‰ä¸€æ¡æ¶ˆæ¯æç¤ºæ—¥å¿—æ²¡æœ‰æ­£ç¡®é…ç½®ã€‚Flowableä½¿ç”¨[SLF4J](http://www.slf4j.org/)ä½œä¸ºå†…éƒ¨æ—¥å¿—æ¡†æ¶ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨log4jä½œä¸ºSLF4Jçš„å®ç°ã€‚å› æ­¤åœ¨pom.xmlæ–‡ä»¶ä¸­æ·»åŠ ä¸‹åˆ—ä¾èµ–ï¼š\n\n```xml\n<dependency>\n    <groupId>org.slf4j</groupId>\n    <artifactId>slf4j-api</artifactId>\n    <version>1.7.21</version>\n</dependency>\n<dependency>\n    <groupId>org.slf4j</groupId>\n    <artifactId>slf4j-log4j12</artifactId>\n    <version>1.7.21</version>\n</dependency>\n```\n\nLog4jéœ€è¦ä¸€ä¸ªé…ç½®æ–‡ä»¶ã€‚åœ¨*src/main/resources*æ–‡ä»¶å¤¹ä¸‹æ·»åŠ *log4j.properties*æ–‡ä»¶ï¼Œå¹¶å†™å…¥ä¸‹åˆ—å†…å®¹ï¼š\n\n```properties\nlog4j.rootLogger=DEBUG, CA\n\nlog4j.appender.CA=org.apache.log4j.ConsoleAppender\nlog4j.appender.CA.layout=org.apache.log4j.PatternLayout\nlog4j.appender.CA.layout.ConversionPattern= %d{hh:mm:ss,SSS} [%t] %-5p %c %x - %m%n\n```\n\né‡æ–°è¿è¡Œåº”ç”¨ã€‚åº”è¯¥å¯ä»¥çœ‹åˆ°å…³äºå¼•æ“å¯åŠ¨ä¸åˆ›å»ºæ•°æ®åº“è¡¨ç»“æ„çš„æç¤ºæ—¥å¿—ï¼š\n\n![image-20220316093922199](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316093922199.png)\n\nåŒæ—¶å¯ä»¥çœ‹åˆ°åˆ›å»ºäº†ç›¸å…³çš„è¡¨ç»“æ„åœ¨æ•°æ®åº“ä¸­\n\n![image-20220316093957662](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316093957662.png)\n\nè¿™æ ·å°±å¾—åˆ°äº†ä¸€ä¸ªå¯åŠ¨å¯ç”¨çš„æµç¨‹å¼•æ“ã€‚æ¥ä¸‹æ¥ä¸ºå®ƒæä¾›ä¸€ä¸ªæµç¨‹ï¼\n\n\n\n## éƒ¨ç½²æµç¨‹å®šä¹‰\n\næ¥ä¸‹æ¥æˆ‘ä»¬æ„å»ºä¸€ä¸ªéå¸¸ç®€å•çš„è¯·å‡æµç¨‹ï¼ŒFlowableå¼•æ“éœ€è¦æµç¨‹å®šä¹‰ä¸ºBPMN 2.0æ ¼å¼ï¼Œè¿™æ˜¯ä¸€ä¸ªä¸šç•Œå¹¿æ³›æ¥å—çš„XMLæ ‡å‡†ã€‚ åœ¨Flowableæœ¯è¯­ä¸­ï¼Œæˆ‘ä»¬å°†å…¶ç§°ä¸ºä¸€ä¸ª**æµç¨‹å®šä¹‰(process definition)**ã€‚ä¸€ä¸ª*æµç¨‹å®šä¹‰*å¯ä»¥å¯åŠ¨å¤šä¸ª**æµç¨‹å®ä¾‹(process instance)**ã€‚*æµç¨‹å®šä¹‰*å¯ä»¥çœ‹åšæ˜¯é‡å¤æ‰§è¡Œæµç¨‹çš„è“å›¾ã€‚ åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ*æµç¨‹å®šä¹‰*å®šä¹‰äº†è¯·å‡çš„å„ä¸ªæ­¥éª¤ï¼Œè€Œä¸€ä¸ª*æµç¨‹å®ä¾‹*å¯¹åº”æŸä¸ªé›‡å‘˜æå‡ºçš„ä¸€ä¸ªè¯·å‡ç”³è¯·ã€‚\n\nBPMN 2.0å­˜å‚¨ä¸ºXMLï¼Œå¹¶åŒ…å«å¯è§†åŒ–çš„éƒ¨åˆ†ï¼šä½¿ç”¨æ ‡å‡†æ–¹å¼å®šä¹‰äº†æ¯ä¸ªæ­¥éª¤ç±»å‹ï¼ˆäººå·¥ä»»åŠ¡ï¼Œè‡ªåŠ¨æœåŠ¡è°ƒç”¨ï¼Œç­‰ç­‰ï¼‰å¦‚ä½•å‘ˆç°ï¼Œä»¥åŠå¦‚ä½•äº’ç›¸è¿æ¥ã€‚è¿™æ ·BPMN 2.0æ ‡å‡†ä½¿æŠ€æœ¯äººå‘˜ä¸ä¸šåŠ¡äººå‘˜èƒ½ç”¨åŒæ–¹éƒ½èƒ½ç†è§£çš„æ–¹å¼äº¤æµä¸šåŠ¡æµç¨‹ã€‚\n\næˆ‘ä»¬è¦ä½¿ç”¨çš„æµç¨‹å®šä¹‰ä¸ºï¼š\n\n![getting.started.bpmn.process](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/getting.started.bpmn.process.png)\n\n\n\næµç¨‹å®šä¹‰è¯´æ˜ï¼š\n\n* æˆ‘ä»¬å‡å®šå¯åŠ¨æµç¨‹éœ€è¦æä¾›ä¸€äº›ä¿¡æ¯ï¼Œä¾‹å¦‚é›‡å‘˜åå­—ã€è¯·å‡æ—¶é•¿ä»¥åŠè¯´æ˜ã€‚å½“ç„¶ï¼Œè¿™äº›å¯ä»¥å•ç‹¬å»ºæ¨¡ä¸ºæµç¨‹ä¸­çš„ç¬¬ä¸€æ­¥ã€‚ ä½†æ˜¯å¦‚æœå°†å®ƒä»¬ä½œä¸ºæµç¨‹çš„â€œè¾“å…¥ä¿¡æ¯â€ï¼Œå°±èƒ½ä¿è¯åªæœ‰åœ¨å®é™…è¯·æ±‚æ—¶æ‰ä¼šå»ºç«‹ä¸€ä¸ªæµç¨‹å®ä¾‹ã€‚å¦åˆ™ï¼ˆå°†æäº¤ä½œä¸ºæµç¨‹çš„ç¬¬ä¸€æ­¥ï¼‰ï¼Œç”¨æˆ·å¯èƒ½åœ¨æäº¤ä¹‹å‰æ”¹å˜ä¸»æ„å¹¶å–æ¶ˆï¼Œä½†æµç¨‹å®ä¾‹å·²ç»åˆ›å»ºäº†ã€‚ åœ¨æŸäº›åœºæ™¯ä¸­ï¼Œå°±å¯èƒ½å½±å“é‡è¦çš„æŒ‡æ ‡ï¼ˆä¾‹å¦‚å¯åŠ¨äº†å¤šå°‘ç”³è¯·ï¼Œä½†è¿˜æœªå®Œæˆï¼‰ï¼Œå–å†³äºä¸šåŠ¡ç›®æ ‡ã€‚\n* å·¦ä¾§çš„åœ†åœˆå«åš**å¯åŠ¨äº‹ä»¶(start event)**ã€‚è¿™æ˜¯ä¸€ä¸ªæµç¨‹å®ä¾‹çš„èµ·ç‚¹ã€‚\n* ç¬¬ä¸€ä¸ªçŸ©å½¢æ˜¯ä¸€ä¸ª**ç”¨æˆ·ä»»åŠ¡(user task)**ã€‚è¿™æ˜¯æµç¨‹ä¸­ç”¨æˆ·æ“ä½œçš„æ­¥éª¤ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œç»ç†éœ€è¦æ‰¹å‡†æˆ–é©³å›ç”³è¯·\n* å–å†³äºç»ç†çš„å†³å®šï¼Œ**æ’ä»–ç½‘å…³(exclusive gateway)** (å¸¦å‰çš„è±å½¢)ä¼šå°†æµç¨‹å®ä¾‹è·¯ç”±è‡³æ‰¹å‡†æˆ–é©³å›è·¯å¾„\n* å¦‚æœæ‰¹å‡†ï¼Œåˆ™éœ€è¦å°†ç”³è¯·æ³¨å†Œè‡³æŸä¸ªå¤–éƒ¨ç³»ç»Ÿï¼Œå¹¶è·Ÿç€å¦ä¸€ä¸ªç”¨æˆ·ä»»åŠ¡ï¼Œå°†ç»ç†çš„å†³å®šé€šçŸ¥ç»™ç”³è¯·äººã€‚å½“ç„¶ä¹Ÿå¯ä»¥æ”¹ä¸ºå‘é€é‚®ä»¶ã€‚\n* å¦‚æœé©³å›ï¼Œåˆ™ä¸ºé›‡å‘˜å‘é€ä¸€å°é‚®ä»¶é€šçŸ¥ä»–ã€‚\n\n\n\nä¸€èˆ¬æ¥è¯´ï¼Œè¿™æ ·çš„*æµç¨‹å®šä¹‰*ä½¿ç”¨å¯è§†åŒ–å»ºæ¨¡å·¥å…·å»ºç«‹ï¼Œå¦‚Flowable Designer(Eclipse)æˆ–Flowable Web Modeler(Webåº”ç”¨)ã€‚ä½†åœ¨è¿™é‡Œæˆ‘ä»¬ç›´æ¥æ’°å†™XMLï¼Œä»¥ç†Ÿæ‚‰BPMN 2.0åŠå…¶æ¦‚å¿µã€‚\n\nä¸ä¸Šé¢å±•ç¤ºçš„æµç¨‹å›¾å¯¹åº”çš„BPMN 2.0 XMLåœ¨ä¸‹é¢æ˜¾ç¤ºã€‚è¯·æ³¨æ„è¿™åªåŒ…å«äº†â€œæµç¨‹éƒ¨åˆ†â€ã€‚å¦‚æœä½¿ç”¨å›¾å½¢åŒ–å»ºæ¨¡å·¥å…·ï¼Œå®é™…çš„XMLæ–‡ä»¶è¿˜å°†åŒ…å«â€œå¯è§†åŒ–éƒ¨åˆ†â€ï¼Œç”¨äºæè¿°å›¾å½¢ä¿¡æ¯ï¼Œå¦‚æµç¨‹å®šä¹‰ä¸­å„ä¸ªå…ƒç´ çš„åæ ‡ï¼ˆæ‰€æœ‰çš„å›¾å½¢åŒ–ä¿¡æ¯åŒ…å«åœ¨XMLçš„*BPMNDiagram*æ ‡ç­¾ä¸­ï¼Œä½œä¸º*definitions*æ ‡ç­¾çš„å­å…ƒç´ ï¼‰ã€‚\n\nå°†ä¸‹é¢çš„XMLä¿å­˜åœ¨*src/main/resources*æ–‡ä»¶å¤¹ä¸‹åä¸º*holiday-request.bpmn20.xml*çš„æ–‡ä»¶ä¸­ã€‚\n\n```xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<definitions xmlns=\"http://www.omg.org/spec/BPMN/20100524/MODEL\"\n             xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n             xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\"\n             xmlns:bpmndi=\"http://www.omg.org/spec/BPMN/20100524/DI\"\n             xmlns:omgdc=\"http://www.omg.org/spec/DD/20100524/DC\"\n             xmlns:omgdi=\"http://www.omg.org/spec/DD/20100524/DI\"\n             xmlns:flowable=\"http://flowable.org/bpmn\"\n             typeLanguage=\"http://www.w3.org/2001/XMLSchema\"\n             expressionLanguage=\"http://www.w3.org/1999/XPath\"\n             targetNamespace=\"http://www.flowable.org/processdef\">\n\n    <process id=\"holidayRequest\" name=\"Holiday Request\" isExecutable=\"true\">\n\n        <startEvent id=\"startEvent\"/>\n        <sequenceFlow sourceRef=\"startEvent\" targetRef=\"approveTask\"/>\n\n        <userTask id=\"approveTask\" name=\"Approve or reject request\"/>\n        <sequenceFlow sourceRef=\"approveTask\" targetRef=\"decision\"/>\n\n        <exclusiveGateway id=\"decision\"/>\n        <sequenceFlow sourceRef=\"decision\" targetRef=\"externalSystemCall\">\n            <conditionExpression xsi:type=\"tFormalExpression\">\n                <![CDATA[\n          ${approved}\n        ]]>\n            </conditionExpression>\n        </sequenceFlow>\n        <sequenceFlow  sourceRef=\"decision\" targetRef=\"sendRejectionMail\">\n            <conditionExpression xsi:type=\"tFormalExpression\">\n                <![CDATA[\n          ${!approved}\n        ]]>\n            </conditionExpression>\n        </sequenceFlow>\n\n        <serviceTask id=\"externalSystemCall\" name=\"Enter holidays in external system\"\n                     flowable:class=\"org.flowable.CallExternalSystemDelegate\"/>\n        <sequenceFlow sourceRef=\"externalSystemCall\" targetRef=\"holidayApprovedTask\"/>\n\n        <userTask id=\"holidayApprovedTask\" name=\"Holiday approved\"/>\n        <sequenceFlow sourceRef=\"holidayApprovedTask\" targetRef=\"approveEnd\"/>\n\n        <serviceTask id=\"sendRejectionMail\" name=\"Send out rejection email\"\n                     flowable:class=\"org.flowable.SendRejectionMail\"/>\n        <sequenceFlow sourceRef=\"sendRejectionMail\" targetRef=\"rejectEnd\"/>\n\n        <endEvent id=\"approveEnd\"/>\n\n        <endEvent id=\"rejectEnd\"/>\n    </process>\n\n</definitions>\n```\n\nç°åœ¨æˆ‘ä»¬å·²ç»æœ‰äº†æµç¨‹BPMN 2.0 XMLæ–‡ä»¶ï¼Œä¸‹æ¥éœ€è¦å°†å®ƒ***éƒ¨ç½²(deploy)\\***åˆ°å¼•æ“ä¸­ã€‚*éƒ¨ç½²*ä¸€ä¸ªæµç¨‹å®šä¹‰æ„å‘³ç€ï¼š\n\n* æµç¨‹å¼•æ“ä¼šå°†XMLæ–‡ä»¶å­˜å‚¨åœ¨æ•°æ®åº“ä¸­ï¼Œè¿™æ ·å¯ä»¥åœ¨éœ€è¦çš„æ—¶å€™è·å–å®ƒ\n* æµç¨‹å®šä¹‰è½¬æ¢ä¸ºå†…éƒ¨çš„ã€å¯æ‰§è¡Œçš„å¯¹è±¡æ¨¡å‹ï¼Œè¿™æ ·ä½¿ç”¨å®ƒå°±å¯ä»¥å¯åŠ¨*æµç¨‹å®ä¾‹*ã€‚\n\n\n\n![image-20220317110902636](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220317110902636.png)\n\n\n\nå°†æµç¨‹å®šä¹‰*éƒ¨ç½²*è‡³Flowableå¼•æ“ï¼Œéœ€è¦ä½¿ç”¨*RepositoryService*ï¼Œå…¶å¯ä»¥ä»*ProcessEngine*å¯¹è±¡è·å–ã€‚ä½¿ç”¨*RepositoryService*ï¼Œå¯ä»¥é€šè¿‡XMLæ–‡ä»¶çš„è·¯å¾„åˆ›å»ºä¸€ä¸ªæ–°çš„*éƒ¨ç½²(Deployment)*ï¼Œå¹¶è°ƒç”¨*deploy()*æ–¹æ³•å®é™…æ‰§è¡Œï¼š\n\n```java\n    /**\n     * éƒ¨ç½²æµç¨‹\n     */\n    @Test\n    public void testDeploy(){\n        // é…ç½®æ•°æ®åº“ç›¸å…³ä¿¡æ¯ è·å– ProcessEngineConfiguration\n        ProcessEngineConfiguration cfg = new StandaloneProcessEngineConfiguration()\n                .setJdbcUrl(\"jdbc:mysql://localhost:3306/flowable-learn2?serverTimezone=UTC&nullCatalogMeansCurrent=true\")\n                .setJdbcUsername(\"root\")\n                .setJdbcPassword(\"123456\")\n                .setJdbcDriver(\"com.mysql.cj.jdbc.Driver\")\n                .setDatabaseSchemaUpdate(ProcessEngineConfiguration.DB_SCHEMA_UPDATE_TRUE);\n        // è·å–æµç¨‹å¼•æ“å¯¹è±¡\n        ProcessEngine processEngine = cfg.buildProcessEngine();\n        // éƒ¨ç½²æµç¨‹ è·å–RepositoryServiceå¯¹è±¡\n        RepositoryService repositoryService = processEngine.getRepositoryService();\n        Deployment deployment = repositoryService.createDeployment()// åˆ›å»ºDeploymentå¯¹è±¡\n                .addClasspathResource(\"holiday-request.bpmn20.xml\") // æ·»åŠ æµç¨‹éƒ¨ç½²æ–‡ä»¶\n                .name(\"è¯·æ±‚æµç¨‹\") // è®¾ç½®éƒ¨ç½²æµç¨‹çš„åç§°\n                .deploy(); // æ‰§è¡Œéƒ¨ç½²æ“ä½œ\n        System.out.println(\"deployment.getId() = \" + deployment.getId());\n        System.out.println(\"deployment.getName() = \" + deployment.getName());\n\n    }\n```\n\nç„¶åæ‰§è¡Œè¯¥æ–¹æ³•æ—¥å¿—æ“ä½œæˆåŠŸï¼š\n\n![image-20220316100439048](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316100439048.png)\n\nåœ¨åå°è¡¨ç»“æ„ä¹Ÿå¯ä»¥çœ‹åˆ°ç›¸å…³çš„ä¿¡æ¯\n\nact_re_deployment: æµç¨‹å®šä¹‰éƒ¨ç½²è¡¨ï¼Œæ¯éƒ¨ç½²ä¸€æ¬¡å°±å¢åŠ ä¸€æ¡è®°å½•\n\n![image-20220316100532725](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316100532725.png)\n\n\n\nact_re_procdef ï¼šæµç¨‹å®šä¹‰è¡¨ï¼Œéƒ¨ç½²æ¯ä¸ªæ–°çš„æµç¨‹å®šä¹‰éƒ½ä¼šåœ¨è¿™å¼ è¡¨ä¸­å¢åŠ ä¸€æ¡è®°å½•\n\n![image-20220316100611004](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316100611004.png)\n\n\n\nact_ge_bytearray ï¼šæµç¨‹èµ„æºè¡¨ï¼Œæµç¨‹éƒ¨ç½²çš„ bpmnæ–‡ä»¶å’Œpngå›¾ç‰‡ä¼šä¿å­˜åœ¨è¯¥è¡¨ä¸­\n\n![image-20220316100648362](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316100648362.png)\n\n\n\n\n\næˆ‘ä»¬ç°åœ¨å¯ä»¥é€šè¿‡APIæŸ¥è¯¢éªŒè¯æµç¨‹å®šä¹‰å·²ç»éƒ¨ç½²åœ¨å¼•æ“ä¸­ï¼ˆå¹¶å­¦ä¹ ä¸€äº›APIï¼‰ã€‚é€šè¿‡*RepositoryService*åˆ›å»ºçš„*ProcessDefinitionQuery*å¯¹è±¡å®ç°ã€‚\n\n```java\n/**\n     * æŸ¥çœ‹æµç¨‹å®šä¹‰\n     */\n    @Test\n    public void testDeployQuery(){\n        // é…ç½®æ•°æ®åº“ç›¸å…³ä¿¡æ¯ è·å– ProcessEngineConfiguration\n        ProcessEngineConfiguration cfg = new StandaloneProcessEngineConfiguration()\n                .setJdbcUrl(\"jdbc:mysql://localhost:3306/flowable-learn2?serverTimezone=UTC&nullCatalogMeansCurrent=true\")\n                .setJdbcUsername(\"root\")\n                .setJdbcPassword(\"123456\")\n                .setJdbcDriver(\"com.mysql.cj.jdbc.Driver\")\n                .setDatabaseSchemaUpdate(ProcessEngineConfiguration.DB_SCHEMA_UPDATE_TRUE);\n        // è·å–æµç¨‹å¼•æ“å¯¹è±¡\n        ProcessEngine processEngine = cfg.buildProcessEngine();\n        // éƒ¨ç½²æµç¨‹ è·å–RepositoryServiceå¯¹è±¡\n        RepositoryService repositoryService = processEngine.getRepositoryService();\n        // è·å–æµç¨‹å®šä¹‰å¯¹è±¡\n        ProcessDefinition processDefinition = repositoryService.createProcessDefinitionQuery()\n                .deploymentId(\"2501\")\n                .singleResult();\n        System.out.println(\"processDefinition.getId() = \" + processDefinition.getId());\n        System.out.println(\"processDefinition.getName() = \" + processDefinition.getName());\n        System.out.println(\"processDefinition.getDeploymentId() = \" + processDefinition.getDeploymentId());\n        System.out.println(\"processDefinition.getDescription() = \" + processDefinition.getDescription());\n\n    }\n```\n\nè¾“å‡ºç»“æœä¸ºï¼š\n\n```txt\nprocessDefinition.getId() = holidayRequest:2:2503\nprocessDefinition.getName() = Holiday Request\nprocessDefinition.getDeploymentId() = 2501\nprocessDefinition.getDescription() = null\n```\n\n\n\n## å¯åŠ¨æµç¨‹å®ä¾‹\n\nç°åœ¨å·²ç»åœ¨æµç¨‹å¼•æ“ä¸­*éƒ¨ç½²*äº†æµç¨‹å®šä¹‰ï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨è¿™ä¸ª*æµç¨‹å®šä¹‰*ä½œä¸ºâ€œæ¨¡æ¿â€å¯åŠ¨*æµç¨‹å®ä¾‹*ã€‚\n\n![image-20220316102638015](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316102638015.png)\n\nè¦å¯åŠ¨æµç¨‹å®ä¾‹ï¼Œéœ€è¦æä¾›ä¸€äº›åˆå§‹åŒ–*æµç¨‹å˜é‡*ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œå¯ä»¥é€šè¿‡å‘ˆç°ç»™ç”¨æˆ·çš„è¡¨å•ï¼Œæˆ–è€…åœ¨æµç¨‹ç”±å…¶ä»–ç³»ç»Ÿè‡ªåŠ¨è§¦å‘æ—¶é€šè¿‡REST APIï¼Œæ¥è·å–è¿™äº›å˜é‡ã€‚åœ¨è¿™ä¸ªä¾‹å­é‡Œï¼Œæˆ‘ä»¬ç®€åŒ–ç›´æ¥åœ¨ä»£ç ä¸­å®šä¹‰äº†ï¼Œæˆ‘ä»¬ä½¿ç”¨*RuntimeService*å¯åŠ¨ä¸€ä¸ª*æµç¨‹å®ä¾‹*ã€‚\n\n```java\n    /**\n     * å¯åŠ¨æµç¨‹å®ä¾‹\n     */\n    @Test\n    public void testRunProcess(){\n        // é…ç½®æ•°æ®åº“ç›¸å…³ä¿¡æ¯ è·å– ProcessEngineConfiguration\n        ProcessEngineConfiguration cfg = new StandaloneProcessEngineConfiguration()\n                .setJdbcUrl(\"jdbc:mysql://localhost:3306/flowable-learn2?serverTimezone=UTC&nullCatalogMeansCurrent=true\")\n                .setJdbcUsername(\"root\")\n                .setJdbcPassword(\"123456\")\n                .setJdbcDriver(\"com.mysql.cj.jdbc.Driver\")\n                .setDatabaseSchemaUpdate(ProcessEngineConfiguration.DB_SCHEMA_UPDATE_TRUE);\n        // è·å–æµç¨‹å¼•æ“å¯¹è±¡\n        ProcessEngine processEngine = cfg.buildProcessEngine();\n        // å¯åŠ¨æµç¨‹å®ä¾‹é€šè¿‡ RuntimeService å¯¹è±¡\n        RuntimeService runtimeService = processEngine.getRuntimeService();\n        // æ„å»ºæµç¨‹å˜é‡\n        Map<String,Object> variables = new HashMap<>();\n        variables.put(\"employee\",\"å¼ ä¸‰\") ;// è°ç”³è¯·è¯·å‡\n        variables.put(\"nrOfHolidays\",3); // è¯·å‡ å¤©å‡\n        variables.put(\"description\",\"å·¥ä½œç´¯äº†ï¼Œæƒ³å‡ºå»ç©ç©\"); // è¯·å‡çš„åŸå› \n        // å¯åŠ¨æµç¨‹å®ä¾‹ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æµç¨‹å®šä¹‰çš„id\n        ProcessInstance processInstance = runtimeService\n                .startProcessInstanceByKey(\"holidayRequest\", variables);// å¯åŠ¨æµç¨‹å®ä¾‹\n        // è¾“å‡ºç›¸å…³çš„æµç¨‹å®ä¾‹ä¿¡æ¯\n        System.out.println(\"æµç¨‹å®šä¹‰çš„IDï¼š\" + processInstance.getProcessDefinitionId());\n        System.out.println(\"æµç¨‹å®ä¾‹çš„IDï¼š\" + processInstance.getId());\n        System.out.println(\"å½“å‰æ´»åŠ¨çš„IDï¼š\" + processInstance.getActivityId());\n    }\n```\n\nå¯åŠ¨æˆåŠŸï¼Œè¾“å‡ºç»“æœå¦‚ä¸‹ï¼š\n\n```txt\næµç¨‹å®šä¹‰çš„IDï¼šholidayRequest:2:2503\næµç¨‹å®ä¾‹çš„IDï¼š5001\nå½“å‰æ´»åŠ¨çš„IDï¼šnull\n```\n\nå¯¹åº”çš„æµç¨‹å®ä¾‹IDä¸ºï¼š5001\n\nå¯åŠ¨æµç¨‹å®ä¾‹æ¶‰åŠåˆ°çš„è¡¨ç»“æ„ï¼š\n\n* act_hi_actinst æµç¨‹å®ä¾‹æ‰§è¡Œå†å²\n* act_hi_identitylink æµç¨‹çš„å‚ä¸ç”¨æˆ·çš„å†å²ä¿¡æ¯\n* act_hi_procinst æµç¨‹å®ä¾‹å†å²ä¿¡æ¯\n* act_hi_taskinst æµç¨‹ä»»åŠ¡å†å²ä¿¡æ¯\n* act_ru_execution æµç¨‹æ‰§è¡Œä¿¡æ¯\n* act_ru_identitylink æµç¨‹çš„å‚ä¸ç”¨æˆ·ä¿¡æ¯\n* act_ru_task ä»»åŠ¡ä¿¡æ¯\n\n\n\n## æŸ¥çœ‹ä»»åŠ¡\n\nä¸Šé¢å‘˜å·¥å‘èµ·äº†ä¸€ä¸ªè¯·å‡æµç¨‹ï¼Œæ¥ä¸‹æ¥å°±ä¼šæµè½¬åˆ°æ€»ç»ç†è¿™å„¿æ¥å¤„ç†ï¼Œä¹‹å‰æˆ‘ä»¬æ²¡æœ‰æŒ‡å®šç»ç†è¿™çš„å¤„ç†äººï¼Œæˆ‘ä»¬å¯ä»¥åŠ ä¸€ä¸ª\n\n![image-20220316110406801](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316110406801.png)\n\n\n\nç„¶åæˆ‘ä»¬æ¥æŸ¥çœ‹ä¸‹lisiçš„ä»»åŠ¡\n\n```java\n    /**\n     * æŸ¥çœ‹ä»»åŠ¡\n     */\n    @Test\n    public void testQueryTask(){\n        // é…ç½®æ•°æ®åº“ç›¸å…³ä¿¡æ¯ è·å– ProcessEngineConfiguration\n        ProcessEngineConfiguration cfg = new StandaloneProcessEngineConfiguration()\n                .setJdbcUrl(\"jdbc:mysql://localhost:3306/flowable-learn2?serverTimezone=UTC&nullCatalogMeansCurrent=true\")\n                .setJdbcUsername(\"root\")\n                .setJdbcPassword(\"123456\")\n                .setJdbcDriver(\"com.mysql.cj.jdbc.Driver\")\n                .setDatabaseSchemaUpdate(ProcessEngineConfiguration.DB_SCHEMA_UPDATE_TRUE);\n        // è·å–æµç¨‹å¼•æ“å¯¹è±¡\n        ProcessEngine processEngine = cfg.buildProcessEngine();\n        TaskService taskService = processEngine.getTaskService();\n        List<Task> list = taskService.createTaskQuery()\n                .processDefinitionKey(\"holidayRequestNew\")\n                .taskAssignee(\"lisi\")\n                .list();\n        for (Task task : list) {\n            System.out.println(\"task.getProcessDefinitionId() = \" + task.getProcessDefinitionId());\n            System.out.println(\"task.getId() = \" + task.getId());\n            System.out.println(\"task.getAssignee() = \" + task.getAssignee());\n            System.out.println(\"task.getName() = \" + task.getName());\n        }\n    }\n```\n\nè¾“å‡ºç»“æœä¸ºï¼š\n\n```txt\ntask.getProcessDefinitionId() = holidayRequestNew:1:10003\ntask.getId() = 12508\ntask.getAssignee() = lisi\ntask.getName() = Approve or reject request\n```\n\n\n\n## å®Œæˆä»»åŠ¡\n\nç°åœ¨æå››è¿™ä¸ªè§’è‰²å¯ä»¥æ¥å®Œæˆå½“å‰çš„ä»»åŠ¡äº†\n\n![image-20220316111124019](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316111124019.png)\n\n\n\nåœ¨æ­¤å¤„æˆ‘ä»¬ç›´æ¥è§£å†³æ‰è¿™ä¸ªè¯·å‡ï¼Œç„¶åä¼šèµ°å‘é€æ‹’ç»é‚®ä»¶çš„æµç¨‹ï¼Œè¿™å—æˆ‘ä»¬éœ€è¦ç”¨åˆ°JavaDelegateæ¥è§¦å‘ã€‚\n\n![image-20220316111253702](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316111253702.png)\n\n\n\næˆ‘ä»¬å®šä¹‰è¿™æ ·ä¸€ä¸ªJavaç±»\n\n```java\npublic class SendRejectionMail implements JavaDelegate {\n    /**\n     * è§¦å‘å‘é€é‚®ä»¶çš„æ“ä½œ\n     * @param delegateExecution\n     */\n    @Override\n    public void execute(DelegateExecution delegateExecution) {\n        System.out.println(\"è¯·å‡è¢«æ‹’ç»,,,å®‰å¿ƒå·¥ä½œå§\");\n    }\n}\n```\n\nç„¶åæ¥å®Œæˆä»»åŠ¡\n\n```java\n    /**\n     * å®Œæˆä»»åŠ¡\n     */\n    @Test\n    public void testCompleteTask(){\n        // é…ç½®æ•°æ®åº“ç›¸å…³ä¿¡æ¯ è·å– ProcessEngineConfiguration\n        ProcessEngineConfiguration cfg = new StandaloneProcessEngineConfiguration()\n                .setJdbcUrl(\"jdbc:mysql://localhost:3306/flowable-learn2?serverTimezone=UTC&nullCatalogMeansCurrent=true\")\n                .setJdbcUsername(\"root\")\n                .setJdbcPassword(\"123456\")\n                .setJdbcDriver(\"com.mysql.cj.jdbc.Driver\")\n                .setDatabaseSchemaUpdate(ProcessEngineConfiguration.DB_SCHEMA_UPDATE_TRUE);\n        // è·å–æµç¨‹å¼•æ“å¯¹è±¡\n        ProcessEngine processEngine = cfg.buildProcessEngine();\n        TaskService taskService = processEngine.getTaskService();\n        Task task = taskService.createTaskQuery()\n                .processDefinitionKey(\"holidayRequestNew\")\n                .taskAssignee(\"lisi\")\n                .singleResult();\n        // æ·»åŠ æµç¨‹å˜é‡\n        Map<String,Object> variables = new HashMap<>();\n        variables.put(\"approved\",false); // æ‹’ç»è¯·å‡\n        // å®Œæˆä»»åŠ¡\n        taskService.complete(task.getId(),variables);\n    }\n```\n\nç„¶åå¯ä»¥çœ‹åˆ°JavaDelegateè§¦å‘äº†\n\n![image-20220316111913933](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316111913933.png)\n\n\n\n\n\n## æµç¨‹çš„åˆ é™¤\n\næœ‰äº›æµç¨‹å·²ç»æ²¡æœ‰ç”¨äº†ï¼Œæˆ‘ä»¬éœ€è¦åˆ é™¤æ‰ï¼Œå…¶å®ä¹Ÿéå¸¸ç®€å•\n\n```java\n    /**\n     * åˆ é™¤æµç¨‹\n     */\n    @Test\n    public void testDeleteProcess(){\n        // é…ç½®æ•°æ®åº“ç›¸å…³ä¿¡æ¯ è·å– ProcessEngineConfiguration\n        ProcessEngineConfiguration cfg = new StandaloneProcessEngineConfiguration()\n                .setJdbcUrl(\"jdbc:mysql://localhost:3306/flowable-learn2?serverTimezone=UTC&nullCatalogMeansCurrent=true\")\n                .setJdbcUsername(\"root\")\n                .setJdbcPassword(\"123456\")\n                .setJdbcDriver(\"com.mysql.cj.jdbc.Driver\")\n                .setDatabaseSchemaUpdate(ProcessEngineConfiguration.DB_SCHEMA_UPDATE_TRUE);\n        // è·å–æµç¨‹å¼•æ“å¯¹è±¡\n        ProcessEngine processEngine = cfg.buildProcessEngine();\n        RepositoryService repositoryService = processEngine.getRepositoryService();\n        // åˆ é™¤æµç¨‹å®šä¹‰ï¼Œå¦‚æœè¯¥æµç¨‹å®šä¹‰å·²ç»æœ‰äº†æµç¨‹å®ä¾‹å¯åŠ¨åˆ™åˆ é™¤æ—¶æŠ¥é”™\n        // repositoryService.deleteDeployment(\"1\");\n        // è®¾ç½®ä¸ºTRUE çº§è”åˆ é™¤æµç¨‹å®šä¹‰ï¼ŒåŠæ—¶æµç¨‹æœ‰å®ä¾‹å¯åŠ¨ï¼Œä¹Ÿå¯ä»¥åˆ é™¤ï¼Œè®¾ç½®ä¸ºfalse éçº§è”åˆ é™¤æ“ä½œã€‚\n        repositoryService.deleteDeployment(\"2501\",true);\n\n    }\n```\n\n## æŸ¥çœ‹å†å²ä¿¡æ¯\n\né€‰æ‹©ä½¿ç”¨Flowableè¿™æ ·çš„æµç¨‹å¼•æ“çš„åŸå› ä¹‹ä¸€ï¼Œæ˜¯å®ƒå¯ä»¥è‡ªåŠ¨å­˜å‚¨æ‰€æœ‰æµç¨‹å®ä¾‹çš„**å®¡è®¡æ•°æ®**æˆ–**å†å²æ•°æ®**ã€‚è¿™äº›æ•°æ®å¯ä»¥ç”¨äºåˆ›å»ºæŠ¥å‘Šï¼Œæ·±å…¥å±•ç°ç»„ç»‡è¿è¡Œçš„æƒ…å†µï¼Œç“¶é¢ˆåœ¨å“ªé‡Œï¼Œç­‰ç­‰ã€‚\n\nä¾‹å¦‚ï¼Œå¦‚æœå¸Œæœ›æ˜¾ç¤ºæµç¨‹å®ä¾‹å·²ç»æ‰§è¡Œçš„æ—¶é—´ï¼Œå°±å¯ä»¥ä»*ProcessEngine*è·å–*HistoryService*ï¼Œå¹¶åˆ›å»º*å†å²æ´»åŠ¨(historical activities)*çš„æŸ¥è¯¢ã€‚åœ¨ä¸‹é¢çš„ä»£ç ç‰‡æ®µä¸­ï¼Œå¯ä»¥çœ‹åˆ°æˆ‘ä»¬æ·»åŠ äº†ä¸€äº›é¢å¤–çš„è¿‡æ»¤æ¡ä»¶ï¼š\n\n- åªé€‰æ‹©ä¸€ä¸ªç‰¹å®šæµç¨‹å®ä¾‹çš„æ´»åŠ¨\n- åªé€‰æ‹©å·²å®Œæˆçš„æ´»åŠ¨\n\nç»“æœæŒ‰ç…§ç»“æŸæ—¶é—´æ’åºï¼Œä»£è¡¨å…¶æ‰§è¡Œé¡ºåºã€‚\n\n```java\n/**\n     * æŸ¥çœ‹å†å²\n     */\n    @Test\n    public void testQueryHistory(){\n        // é…ç½®æ•°æ®åº“ç›¸å…³ä¿¡æ¯ è·å– ProcessEngineConfiguration\n        ProcessEngineConfiguration cfg = new StandaloneProcessEngineConfiguration()\n                .setJdbcUrl(\"jdbc:mysql://localhost:3306/flowable-learn2?serverTimezone=UTC&nullCatalogMeansCurrent=true\")\n                .setJdbcUsername(\"root\")\n                .setJdbcPassword(\"123456\")\n                .setJdbcDriver(\"com.mysql.cj.jdbc.Driver\")\n                .setDatabaseSchemaUpdate(ProcessEngineConfiguration.DB_SCHEMA_UPDATE_TRUE);\n        // è·å–æµç¨‹å¼•æ“å¯¹è±¡\n        ProcessEngine processEngine = cfg.buildProcessEngine();\n        HistoryService historyService = processEngine.getHistoryService();\n        List<HistoricActivityInstance> list = historyService.createHistoricActivityInstanceQuery()\n                .processDefinitionId(\"holidayRequestNew:1:10003\")\n                .finished()\n                .orderByHistoricActivityInstanceEndTime().asc()\n                .list();\n        for (HistoricActivityInstance historicActivityInstance : list) {\n            System.out.println(historicActivityInstance.getActivityId() + \" took \"\n                    + historicActivityInstance.getDurationInMillis() + \" milliseconds\");\n        }\n\n    }\n```\n\nè¾“å‡ºç»“æœ\n\n```txt\nstartEvent took 1 milliseconds\napproveTask took 837735 milliseconds\ndecision took 13 milliseconds\nsendRejectionMail took 2 milliseconds\nrejectEnd took 1 milliseconds\n```\n\nå¥½äº†~flowableçš„åŸºæœ¬åº”ç”¨æˆ‘ä»¬å°±å…ˆä»‹ç»åˆ°è¿™é‡Œäº†ã€‚\n\n\n\n\n\n# Flowableæµç¨‹è®¾è®¡å™¨\n\n## Eclipse Designer\n\nFlowableæä¾›äº†åä¸ºFlowable Eclipse Designerçš„Eclipseæ’ä»¶ï¼Œå¯ä»¥ç”¨äºå›¾å½¢åŒ–åœ°å»ºæ¨¡ã€æµ‹è¯•ä¸éƒ¨ç½²BPMN 2.0æµç¨‹ã€‚\n\n### ä¸‹è½½å®‰è£…Eclipse\n\nå»Eclipseå®˜ç½‘ä¸‹è½½å³å¯ï¼šhttps://www.eclipse.org/downloads/packages/release æ³¨æ„2020-09åçš„ç‰ˆæœ¬ä¸å†æ”¯æŒjdk8\n\n![image-20220316202904261](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316202904261.png)\n\nè§£å‹ç¼©å°±å¯ä»¥äº†ï¼Œç„¶åè¿›å…¥è§£å‹ç¼©çš„ç›®å½•\n\n![image-20220316203036602](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316203036602.png)\n\nç›´æ¥å¯åŠ¨å³å¯\n\n![image-20220316203111301](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316203111301.png)\n\n\n\n\n\n![image-20220316203237316](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316203237316.png)\n\n\n\n### å®‰è£…Flowableæ’ä»¶\n\nç„¶åæˆ‘ä»¬å†å®‰è£…ä¸‹Flowableçš„æ’ä»¶ï¼Œé€‰æ‹©**Help â†’ Install New Software**ã€‚åœ¨ä¸‹å›¾é¢æ¿ä¸­ï¼Œç‚¹å‡»*Add*æŒ‰é’®ï¼Œå¹¶å¡«å†™ä¸‹åˆ—å­—æ®µ\n\n- **Name:** Flowable BPMN 2.0 designer\n- **Location:** http://www.flowable.org/designer/update/\n\n\n\n![image-20220316203454281](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316203454281.png)\n\n\n\nè¿™ç§åœ¨çº¿æ›´æ–°çš„æ–¹å¼å·²ç»è¢«å®˜ç½‘ç§»é™¤äº†ï¼Œæ“ä½œä¸äº†\n\n![image-20220316211319931](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316211319931.png)\n\n\n\nè¿™æ—¶æˆ‘ä»¬å°±åªèƒ½é€šè¿‡ç¦»çº¿å®‰è£…çš„æ–¹å¼æ¥å®ç°äº†ï¼Œä¸‹è½½å¯¹åº”çš„ç¦»çº¿æ–‡ä»¶\n\n![image-20220316211405001](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316211405001.png)\n\nå®‰è£…æ­¥éª¤æ¥æ“ä½œï¼Œ\n\n![image-20220316211518520](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316211518520.png)\n\n\n\nç„¶åç»§ç»­ï¼šé€‰æ‹©**Help â†’ Install New Software**\n\n![image-20220316211622115](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316211622115.png)\n\n\n\n![image-20220316211651195](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316211651195.png)\n\nä¸‹ä¸€æ­¥\n\n![image-20220316211729581](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316211729581.png)\n\n\n\nå†ä¸‹ä¸€æ­¥\n\n![image-20220316211802548](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316211802548.png)\n\nç„¶åfinishã€‚å¼¹å‡ºå¦‚ä¸‹çª—å£\n\n![image-20220316212008477](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316212008477.png)\n\né‡å¯å³å¯\n\n\n\n### åˆ›å»ºé¡¹ç›®\n\nç„¶åæˆ‘ä»¬å°±å¯ä»¥åˆ›å»ºä¸€ä¸ªFlowable Projectäº†\n\n![image-20220316212418899](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316212418899.png)\n\nç„¶åæˆ‘ä»¬å¯ä»¥åœ¨src/mian/resources/ çš„ç›®å½•ä¸‹åˆ›å»ºå¯¹åº”çš„æµç¨‹å›¾äº†\n\n![image-20220316212605146](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316212605146.png)\n\n\n\nçœ‹åˆ°å¦‚ä¸‹çš„ç•Œé¢è¯´æ˜æ’ä»¶å®‰è£…æˆåŠŸäº†\n\n![image-20220316212720767](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316212720767.png)\n\n\n\n\n\n### åˆ›å»ºæµç¨‹å›¾\n\nä½¿ç”¨æ»‘æ¿æ¥ç»˜åˆ¶æµç¨‹ï¼Œé€šè¿‡ä»å³ä¾§æŠŠå›¾æ ‡æ‹–æ‹½åˆ°å·¦ä¾§çš„é¢æ¿ï¼Œæœ€ç»ˆçš„æ•ˆæœ\n\n![image-20220316214339678](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316214339678.png)\n\næŒ‡å®šæµç¨‹çš„ä¸»é”®\n\n![image-20220316214430644](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316214430644.png)\n\n\n\næŒ‡å®šä»»åŠ¡çš„è´Ÿè´£äºº\n\nåœ¨Propertiesè§†å›¾ä¸­æŒ‡å®šæ¯ä¸ªä»»åŠ¡èŠ‚ç‚¹çš„è´Ÿè´£äºº\n\n![image-20220316214700887](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316214700887.png)\n\nåˆ›å»ºè¯·å‡å•ï¼šzhangsan\n\nå®¡æ‰¹è¯·å‡å•ï¼šlisi\n\nå½“æˆ‘ä»¬è®¾ç½®å®Œæˆåä¿å­˜æ–‡ä»¶ï¼Œä¼šåŒæ—¶ç”Ÿæˆpngå›¾ç‰‡\n\n![image-20220316214808400](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316214808400.png)\n\næ³¨æ„ï¼šç”Ÿæˆå›¾ç‰‡éœ€è¦å¦‚ä¸‹é…ç½®\n\n![image-20220316214256235](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316214256235.png)\n\n\n\n### éƒ¨ç½²æµç¨‹\n\né¦–å…ˆåœ¨Eclipseä¸­ç”Ÿæˆbaræ–‡ä»¶ï¼Œé€‰ä¸­é¡¹ç›®ç„¶åé¼ æ ‡å³å‡»\n\n![image-20220316215805503](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316215805503.png)\n\nç„¶åä¼šå‘ç°åœ¨é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹å¤šäº†ä¸€ä¸ªdeploymentæ–‡ä»¶å¤¹ï¼Œé‡Œé¢å¤šäº†ä¸€ä¸ªMyProcess.baræ–‡ä»¶\n\n![image-20220316215900052](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316215900052.png)\n\nç„¶åæˆ‘ä»¬å°±å¯ä»¥æŠŠè¿™ä¸ªbaræ–‡ä»¶æ‹·è´åˆ°IDEAä¸­ï¼Œç»§ç»­éƒ¨ç½²çš„æµç¨‹\n\n![image-20220316215945236](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316215945236.png)\n\n\n\nè€Œéƒ¨ç½²çš„ä»£ç å’Œå‰é¢æ²¡å•¥åŒºåˆ«\n\n```java\n    @Test\n    public void testDeploy(){\n        // 1.è·å– ProcessEngine å¯¹è±¡\n        ProcessEngine processEngine = configuration.buildProcessEngine();\n        // 2.è·å–RepositoryService\n        RepositoryService repositoryService = processEngine.getRepositoryService();\n        InputStream in = this.getClass().getClassLoader().getResourceAsStream(\"MyHoliday.bar\");\n        ZipInputStream zipInputStream = new ZipInputStream(in);\n        // 3.å®Œæˆæµç¨‹çš„éƒ¨ç½²æ“ä½œ ZIP æˆ–è€… Baræ–‡ä»¶\n        Deployment deploy = repositoryService.createDeployment()\n               // .addClasspathResource(\"MyHoliday.bar\")// å…³è”è¦éƒ¨ç½²çš„æµç¨‹æ–‡ä»¶\n                .addZipInputStream(zipInputStream)\n                .name(\"XXXå…¬å¸è¯·æ±‚æµç¨‹\")\n                .deploy() ;// éƒ¨ç½²æµç¨‹\n        System.out.println(\"deploy.getId() = \" + deploy.getId());\n        System.out.println(\"deploy.getName() = \" + deploy.getName());\n    }\n```\n\næ‰§è¡ŒåæŸ¥çœ‹è¡¨ç»“æ„ï¼Œç›¸å…³çš„ä¿¡æ¯å°±è¿›å»äº†\n\n![image-20220316220121734](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316220121734.png)\n\n\n\n\n\n\n\nå®Œæ•´çš„æ¡ˆä¾‹ä»£ç ï¼š\n\n```java\npackage com.bobo.flowable.test;\n\nimport org.flowable.engine.*;\nimport org.flowable.engine.history.HistoricActivityInstance;\nimport org.flowable.engine.impl.cfg.StandaloneProcessEngineConfiguration;\nimport org.flowable.engine.repository.Deployment;\nimport org.flowable.engine.runtime.ProcessInstance;\nimport org.flowable.task.api.Task;\nimport org.junit.Before;\nimport org.junit.Test;\n\nimport java.io.InputStream;\nimport java.util.HashMap;\nimport java.util.List;\nimport java.util.Map;\nimport java.util.zip.ZipInputStream;\n\npublic class Test02 {\n\n    ProcessEngineConfiguration configuration = null;\n    @Before\n    public void before(){\n        // è·å–  ProcessEngineConfiguration å¯¹è±¡\n        configuration = new StandaloneProcessEngineConfiguration();\n        // é…ç½® ç›¸å…³çš„æ•°æ®åº“çš„è¿æ¥ä¿¡æ¯\n        configuration.setJdbcDriver(\"com.mysql.cj.jdbc.Driver\");\n        configuration.setJdbcUsername(\"root\");\n        configuration.setJdbcPassword(\"123456\");\n        configuration.setJdbcUrl(\"jdbc:mysql://localhost:3306/flowable-learn?serverTimezone=UTC&nullCatalogMeansCurrent=true\");\n        // å¦‚æœæ•°æ®åº“ä¸­çš„è¡¨ç»“æ„ä¸å­˜åœ¨å°±æ–°å»º\n        configuration.setDatabaseSchemaUpdate(ProcessEngineConfiguration.DB_SCHEMA_UPDATE_TRUE);\n    }\n\n    /**\n     * éƒ¨ç½²æµç¨‹\n     *\n     */\n    @Test\n    public void testDeploy(){\n        // 1.è·å– ProcessEngine å¯¹è±¡\n        ProcessEngine processEngine = configuration.buildProcessEngine();\n        // 2.è·å–RepositoryService\n        RepositoryService repositoryService = processEngine.getRepositoryService();\n        InputStream in = this.getClass().getClassLoader().getResourceAsStream(\"MyHoliday.bar\");\n        ZipInputStream zipInputStream = new ZipInputStream(in);\n        // 3.å®Œæˆæµç¨‹çš„éƒ¨ç½²æ“ä½œ ZIP æˆ–è€… Baræ–‡ä»¶\n        Deployment deploy = repositoryService.createDeployment()\n               // .addClasspathResource(\"MyHoliday.bar\")// å…³è”è¦éƒ¨ç½²çš„æµç¨‹æ–‡ä»¶\n                .addZipInputStream(zipInputStream)\n                .name(\"XXXå…¬å¸è¯·æ±‚æµç¨‹\")\n                .deploy() ;// éƒ¨ç½²æµç¨‹\n        System.out.println(\"deploy.getId() = \" + deploy.getId());\n        System.out.println(\"deploy.getName() = \" + deploy.getName());\n    }\n\n    /**\n     * å¯åŠ¨æµç¨‹å®ä¾‹\n     */\n    @Test\n    public void testRunProcess(){\n        ProcessEngine processEngine = configuration.buildProcessEngine();\n\n        // æˆ‘ä»¬éœ€è¦é€šè¿‡RuntimeServiceæ¥å¯åŠ¨æµç¨‹å®ä¾‹\n        RuntimeService runtimeService = processEngine.getRuntimeService();\n\n        // å¯åŠ¨æµç¨‹å®ä¾‹\n        ProcessInstance holidayRequest = runtimeService.startProcessInstanceById(\"myProcess:1:25004\");\n        System.out.println(\"holidayRequest.getProcessDefinitionId() = \" + holidayRequest.getProcessDefinitionId());\n        System.out.println(\"holidayRequest.getActivityId() = \" + holidayRequest.getActivityId());\n        System.out.println(\"holidayRequest.getId() = \" + holidayRequest.getId());\n    }\n\n    /**\n     * æµ‹è¯•ä»»åŠ¡æŸ¥è¯¢\n     */\n    @Test\n    public void testQueryTask(){\n        ProcessEngine processEngine = configuration.buildProcessEngine();\n        TaskService taskService = processEngine.getTaskService();\n        List<Task> list = taskService.createTaskQuery()\n                .processDefinitionKey(\"myProcess\") // æŒ‡å®šæŸ¥è¯¢çš„æµç¨‹ç¼–ç¨‹\n                .taskAssignee(\"zhangsan\") // æŸ¥è¯¢è¿™ä¸ªä»»åŠ¡çš„å¤„ç†äºº\n                .list();\n        for (Task task : list) {\n            System.out.println(\"task.getProcessDefinitionId() = \" + task.getProcessDefinitionId());\n            System.out.println(\"task.getName() = \" + task.getName());\n            System.out.println(\"task.getAssignee() = \" + task.getAssignee());\n            System.out.println(\"task.getDescription() = \" + task.getDescription());\n            System.out.println(\"task.getId() = \" + task.getId());\n        }\n    }\n\n    /**\n     * å®Œæˆå½“å‰ä»»åŠ¡\n     */\n    @Test\n    public void testCompleteTask(){\n        ProcessEngine processEngine = configuration.buildProcessEngine();\n        TaskService taskService = processEngine.getTaskService();\n        Task task = taskService.createTaskQuery()\n                .processDefinitionKey(\"myProcess\")\n                .taskAssignee(\"lisi\")\n                .singleResult();\n        // åˆ›å»ºæµç¨‹å˜é‡\n\n        if(task != null){\n            // å®Œæˆä»»åŠ¡\n            taskService.complete(task.getId());\n        }\n\n\n    }\n\n    /**\n     * è·å–æµç¨‹ä»»åŠ¡çš„å†å²æ•°æ®\n     */\n    @Test\n    public void testHistory(){\n        ProcessEngine processEngine = configuration.buildProcessEngine();\n        HistoryService historyService = processEngine.getHistoryService();\n        List<HistoricActivityInstance> list = historyService.createHistoricActivityInstanceQuery()\n                .processDefinitionId(\"myProcess:1:25004\")\n                .finished() // æŸ¥è¯¢çš„å†å²è®°å½•çš„çŠ¶æ€æ˜¯å·²ç»å®Œæˆ\n                .orderByHistoricActivityInstanceEndTime().asc() // æŒ‡å®šæ’åºçš„å­—æ®µå’Œé¡ºåº\n                .list();\n        for (HistoricActivityInstance history : list) {\n            System.out.println(history.getActivityName()+\":\"+history.getAssignee()+\"--\"\n                    +history.getActivityId()+\":\" + history.getDurationInMillis()+\"æ¯«ç§’\");\n        }\n\n    }\n}\n\n```\n\n\n\n## Flowable UIåº”ç”¨\n\nFlowableæä¾›äº†å‡ ä¸ªwebåº”ç”¨ï¼Œç”¨äºæ¼”ç¤ºåŠä»‹ç»Flowableé¡¹ç›®æä¾›çš„åŠŸèƒ½ï¼š\n\n- Flowable IDM: èº«ä»½ç®¡ç†åº”ç”¨ã€‚ä¸ºæ‰€æœ‰Flowable UIåº”ç”¨æä¾›å•ç‚¹ç™»å½•è®¤è¯åŠŸèƒ½ï¼Œå¹¶ä¸”ä¸ºæ‹¥æœ‰IDMç®¡ç†å‘˜æƒé™çš„ç”¨æˆ·æä¾›äº†ç®¡ç†ç”¨æˆ·ã€ç»„ä¸æƒé™çš„åŠŸèƒ½ã€‚\n- Flowable Modeler: è®©å…·æœ‰å»ºæ¨¡æƒé™çš„ç”¨æˆ·å¯ä»¥åˆ›å»ºæµç¨‹æ¨¡å‹ã€è¡¨å•ã€é€‰æ‹©è¡¨ä¸åº”ç”¨å®šä¹‰ã€‚\n- Flowable Task: è¿è¡Œæ—¶ä»»åŠ¡åº”ç”¨ã€‚æä¾›äº†å¯åŠ¨æµç¨‹å®ä¾‹ã€ç¼–è¾‘ä»»åŠ¡è¡¨å•ã€å®Œæˆä»»åŠ¡ï¼Œä»¥åŠæŸ¥è¯¢æµç¨‹å®ä¾‹ä¸ä»»åŠ¡çš„åŠŸèƒ½ã€‚\n- Flowable Admin: ç®¡ç†åº”ç”¨ã€‚è®©å…·æœ‰ç®¡ç†å‘˜æƒé™çš„ç”¨æˆ·å¯ä»¥æŸ¥è¯¢BPMNã€DMNã€FormåŠContentå¼•æ“ï¼Œå¹¶æä¾›äº†è®¸å¤šé€‰é¡¹ç”¨äºä¿®æ”¹æµç¨‹å®ä¾‹ã€ä»»åŠ¡ã€ä½œä¸šç­‰ã€‚ç®¡ç†åº”ç”¨é€šè¿‡REST APIè¿æ¥è‡³å¼•æ“ï¼Œå¹¶ä¸Flowable Taskåº”ç”¨åŠFlowable RESTåº”ç”¨ä¸€åŒéƒ¨ç½²ã€‚\n\næ‰€æœ‰å…¶ä»–çš„åº”ç”¨éƒ½éœ€è¦Flowable IDMæä¾›è®¤è¯ã€‚æ¯ä¸ªåº”ç”¨çš„WARæ–‡ä»¶å¯ä»¥éƒ¨ç½²åœ¨ç›¸åŒçš„servletå®¹å™¨ï¼ˆå¦‚Apache Tomcatï¼‰ä¸­ï¼Œä¹Ÿå¯ä»¥éƒ¨ç½²åœ¨ä¸åŒçš„å®¹å™¨ä¸­ã€‚ç”±äºæ¯ä¸ªåº”ç”¨ä½¿ç”¨ç›¸åŒçš„cookieè¿›è¡Œè®¤è¯ï¼Œå› æ­¤åº”ç”¨éœ€è¦è¿è¡Œåœ¨ç›¸åŒçš„åŸŸåä¸‹ã€‚\n\n\n\n### å®‰è£…éƒ¨ç½²\n\nä¸‹è½½Tomcatï¼šhttps://tomcat.apache.org/download-80.cgi å®˜ç½‘ä¸‹è½½åè§£å‹ç¼©åˆ°éä¸­æ–‡ç›®å½•å³å¯ï¼Œç„¶åæ˜¯ä¸‹è½½FlowableUIçš„æ–‡ä»¶ï¼Œåœ¨Flowable6.6ä¹‹åæŠŠFlowableUIä¸­æä¾›çš„å››ä¸ªåŠŸèƒ½åˆå¹¶åˆ°äº†ä¸€èµ·ã€‚\n\n![image-20220318102128672](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220318102128672.png)\n\nç„¶åæŠŠè§£å‹ç¼©åçš„ä¸¤ä¸ªwaråŒ…æ‹·è´åˆ°Tomcatçš„è§£å‹ç¼©çš„webappsç›®å½•ä¸‹\n\n![image-20220318102224330](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220318102224330.png)\n\nTomcatç›®å½•ï¼š\n\n![image-20220318102255188](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220318102255188.png)\n\n\n\n### å¯åŠ¨æœåŠ¡\n\nå¯åŠ¨TomcatæœåŠ¡ï¼Œæ‰§è¡Œstartup.batæ–‡ä»¶\n\n![image-20220318102325924](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220318102325924.png)\n\nå¦‚æœå¯åŠ¨ä¸­å‡ºç°ä¹±ç ä¿®æ”¹Tomcatçš„confç›®å½•ä¸‹çš„ logging.properties æ–‡ä»¶ä¸­çš„ç¼–ç \n\n![image-20220318102446699](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220318102446699.png)\n\n\n\nå¦‚æœä¸€é—ªè€Œè¿‡åˆ™æ£€æŸ¥jdkçš„ç¯å¢ƒå˜é‡é…ç½®ã€‚å¯åŠ¨æˆåŠŸåï¼Œåœ¨æµè§ˆå™¨ä¸­è®¿é—® http://localhost:8080/flowable-ui, é»˜è®¤çš„è´¦å·å¯†ç æ˜¯ admin/test\n\n![image-20220318102609807](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220318102609807.png)\n\n\n\n### ç”¨æˆ·ç®¡ç†\n\næˆ‘ä»¬å…ˆåœ¨ `èº«ä»½ç®¡ç†åº”ç”¨ç¨‹åº` ä¸­åˆ›å»ºç”¨æˆ·å¹¶æˆæƒ\n\n![image-20220318102707368](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220318102707368.png)\n\nåˆ›å»ºç”¨æˆ·\n\n![image-20220318102734238](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220318102734238.png)\n\n\n\n\n\nå¡«å†™è¯¦ç»†ä¿¡æ¯\n\n![image-20220318102817782](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220318102817782.png)\n\n\n\næˆæƒç®¡ç†\n\n![image-20220318102859814](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220318102859814.png)\n\n\n\n\n\n### ç»˜åˆ¶æµç¨‹\n\n\n\nåˆ›å»ºæ–°çš„æµç¨‹\n\n![image-20220318101239742](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220318101239742.png)\n\næµç¨‹å›¾ç•Œé¢\n\n![image-20220318101346692](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220318101346692.png)\n\n\n\n\n\nåˆ›å»ºæµç¨‹ï¼Œåˆ†é…å¤„ç†äºº\n\n![image-20220318101639424](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220318101639424.png)\n\n\n\n\n\n![image-20220318101611564](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220318101611564.png)\n\nç»§ç»­å®Œæˆæµç¨‹å›¾çš„åˆ›å»º\n\n![image-20220318101810272](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220318101810272.png)\n\n\n\n\n\n### éƒ¨ç½²æµç¨‹\n\nç»˜åˆ¶å¥½çš„æµç¨‹å›¾ï¼Œæˆ‘ä»¬åªéœ€è¦ä¸€é”®å¯¼å‡ºå³å¯\n\n![image-20220318103413285](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220318103413285.png)\n\nä¸‹è½½ä¸‹æ¥åæ‹·è´åˆ°é¡¹ç›®çš„resourceç›®å½•ä¸‹å³å¯\n\n![image-20220318103518807](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220318103518807.png)\n\n\n\n\n\nç„¶åå°±æ˜¯æ­£å¸¸çš„æ“ä½œæµç¨‹äº†\n\n\n\n\n\n### FlowableUI æ¼”ç¤º\n\n#### éƒ¨ç½²æµç¨‹\n\nåœ¨FlowableUIä¸­æä¾›äº†æ¼”ç¤ºç¨‹åº\n\n![image-20220318104517967](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220318104517967.png)\n\nåˆ›å»ºä¸€ä¸ªæ–°çš„åº”ç”¨ç¨‹åºï¼Œå¹¶æŒ‡å®šç›¸å…³çš„ä¿¡æ¯\n\n![image-20220318104614784](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220318104614784.png)\n\nåˆ›å»ºåº”ç”¨åéœ€è¦æŒ‡å®šå¯¹åº”çš„æµç¨‹å›¾\n\n![image-20220318104703306](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220318104703306.png)\n\n\n\n![image-20220318104735714](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220318104735714.png)\n\n\n\n\n\n![image-20220318104811812](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220318104811812.png)\n\n\n\nå‘å¸ƒåº”ç”¨ç¨‹åº\n\n![image-20220318105045345](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220318105045345.png)\n\n\n\n\n\n\n\n#### å¯åŠ¨æµç¨‹\n\nå‘å¸ƒäº†åº”ç”¨ç¨‹åºåæˆ‘ä»¬å°±å¯ä»¥æ¥å¯åŠ¨æµç¨‹äº†\n\n![image-20220318105258331](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220318105258331.png)\n\n\n\n![image-20220318105315908](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220318105315908.png)\n\n\n\n\n\n![image-20220318105336107](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220318105336107.png)\n\n\n\n![image-20220318105420011](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220318105420011.png)\n\nç‚¹å‡»æ˜¾ç¤ºå›¾ï¼š\n\n![image-20220318105444672](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220318105444672.png)\n\nä¹Ÿå°±æ˜¯å¯ä»¥çœ‹åˆ°å½“å‰æ˜¯user1æ¥å¤„ç†ï¼Œuser1ç™»å½•åå¯ä»¥çœ‹åˆ°è¦å¤„ç†çš„æµç¨‹ï¼Œuser2ç™»å½•æ˜¯çœ‹ä¸åˆ°çš„ã€‚\n\n![image-20220318105646273](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220318105646273.png)\n\n\n\nç‚¹å‡»å®Œæˆåæµç¨‹å°±å‘ä¸‹ä¸€æ­¥æµè½¬äº†\n\n![image-20220318105727192](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220318105727192.png)\n\n\n\nè¿™æ—¶å†é€šè¿‡user2ç™»å½•ï¼Œå°±å¯ä»¥çœ‹åˆ°å¯¹åº”çš„ä»£åŠçš„ä¿¡æ¯\n\n![image-20220318105808830](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220318105808830.png)\n\n\n\n![image-20220318105848185](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220318105848185.png)\n\nç„¶åç‚¹å‡»å®Œæˆï¼Œé‚£ä¹ˆæ•´ä¸ªæµç¨‹å°±ä»‹ç»äº†\n\n\n\n\n\n\n\n# FlowableåŸºç¡€è¡¨ç»“æ„\n\n## è¡¨ç»“æ„è®²è§£\n\nå·¥ä½œæµç¨‹çš„ç›¸å…³æ“ä½œéƒ½æ˜¯æ“ä½œå­˜å‚¨åœ¨å¯¹åº”çš„è¡¨ç»“æ„ä¸­ï¼Œä¸ºäº†èƒ½æ›´å¥½çš„å¼„æ¸…æ¥šFlowableçš„å®ç°åŸç†å’Œç»†èŠ‚ï¼Œæˆ‘ä»¬æœ‰å¿…è¦å…ˆå¼„æ¸…æ¥šFlowableçš„ç›¸å…³è¡¨ç»“æ„åŠå…¶ä½œç”¨ã€‚åœ¨Flowableä¸­çš„è¡¨ç»“æ„åœ¨åˆå§‹åŒ–çš„æ—¶å€™ä¼šåˆ›å»ºäº”ç±»è¡¨ç»“æ„ï¼Œå…·ä½“å¦‚ä¸‹ï¼š\n\n* **ACT_RE** ï¼š'RE'è¡¨ç¤º repositoryã€‚ è¿™ä¸ªå‰ç¼€çš„è¡¨åŒ…å«äº†æµç¨‹å®šä¹‰å’Œæµç¨‹é™æ€èµ„æº ï¼ˆå›¾ç‰‡ï¼Œè§„åˆ™ï¼Œç­‰ç­‰ï¼‰ã€‚\n* **ACT_RU**ï¼š'RU'è¡¨ç¤º runtimeã€‚ è¿™äº›è¿è¡Œæ—¶çš„è¡¨ï¼ŒåŒ…å«æµç¨‹å®ä¾‹ï¼Œä»»åŠ¡ï¼Œå˜é‡ï¼Œå¼‚æ­¥ä»»åŠ¡ï¼Œç­‰è¿è¡Œä¸­çš„æ•°æ®ã€‚ Flowableåªåœ¨æµç¨‹å®ä¾‹æ‰§è¡Œè¿‡ç¨‹ä¸­ä¿å­˜è¿™äº›æ•°æ®ï¼Œ åœ¨æµç¨‹ç»“æŸæ—¶å°±ä¼šåˆ é™¤è¿™äº›è®°å½•ã€‚ è¿™æ ·è¿è¡Œæ—¶è¡¨å¯ä»¥ä¸€ç›´å¾ˆå°é€Ÿåº¦å¾ˆå¿«ã€‚\n* **ACT_HI**ï¼š'HI'è¡¨ç¤º historyã€‚ è¿™äº›è¡¨åŒ…å«å†å²æ•°æ®ï¼Œæ¯”å¦‚å†å²æµç¨‹å®ä¾‹ï¼Œ å˜é‡ï¼Œä»»åŠ¡ç­‰ç­‰ã€‚\n* **ACT_GE**ï¼š GE è¡¨ç¤º generalã€‚ é€šç”¨æ•°æ®ï¼Œ ç”¨äºä¸åŒåœºæ™¯ä¸‹ \n* **ACT_ID:**   â€™IDâ€™è¡¨ç¤ºidentity(ç»„ç»‡æœºæ„)ã€‚è¿™äº›è¡¨åŒ…å«æ ‡è¯†çš„ä¿¡æ¯ï¼Œå¦‚ç”¨æˆ·ï¼Œç”¨æˆ·ç»„ï¼Œç­‰ç­‰ã€‚\n\n\n\nå…·ä½“çš„è¡¨ç»“æ„çš„å«ä¹‰:\n\n| **è¡¨åˆ†ç±»**   | **è¡¨å**              | **è§£é‡Š**                                           |\n| ------------ | --------------------- | -------------------------------------------------- |\n| ä¸€èˆ¬æ•°æ®     |                       |                                                    |\n|              | [ACT_GE_BYTEARRAY]    | é€šç”¨çš„æµç¨‹å®šä¹‰å’Œæµç¨‹èµ„æº                           |\n|              | [ACT_GE_PROPERTY]     | ç³»ç»Ÿç›¸å…³å±æ€§                                       |\n| æµç¨‹å†å²è®°å½• |                       |                                                    |\n|              | [ACT_HI_ACTINST]      | å†å²çš„æµç¨‹å®ä¾‹                                     |\n|              | [ACT_HI_ATTACHMENT]   | å†å²çš„æµç¨‹é™„ä»¶                                     |\n|              | [ACT_HI_COMMENT]      | å†å²çš„è¯´æ˜æ€§ä¿¡æ¯                                   |\n|              | [ACT_HI_DETAIL]       | å†å²çš„æµç¨‹è¿è¡Œä¸­çš„ç»†èŠ‚ä¿¡æ¯                         |\n|              | [ACT_HI_IDENTITYLINK] | å†å²çš„æµç¨‹è¿è¡Œè¿‡ç¨‹ä¸­ç”¨æˆ·å…³ç³»                       |\n|              | [ACT_HI_PROCINST]     | å†å²çš„æµç¨‹å®ä¾‹                                     |\n|              | [ACT_HI_TASKINST]     | å†å²çš„ä»»åŠ¡å®ä¾‹                                     |\n|              | [ACT_HI_VARINST]      | å†å²çš„æµç¨‹è¿è¡Œä¸­çš„å˜é‡ä¿¡æ¯                         |\n| æµç¨‹å®šä¹‰è¡¨   |                       |                                                    |\n|              | [ACT_RE_DEPLOYMENT]   | éƒ¨ç½²å•å…ƒä¿¡æ¯                                       |\n|              | [ACT_RE_MODEL]        | æ¨¡å‹ä¿¡æ¯                                           |\n|              | [ACT_RE_PROCDEF]      | å·²éƒ¨ç½²çš„æµç¨‹å®šä¹‰                                   |\n| è¿è¡Œå®ä¾‹è¡¨   |                       |                                                    |\n|              | [ACT_RU_EVENT_SUBSCR] | è¿è¡Œæ—¶äº‹ä»¶                                         |\n|              | [ACT_RU_EXECUTION]    | è¿è¡Œæ—¶æµç¨‹æ‰§è¡Œå®ä¾‹                                 |\n|              | [ACT_RU_IDENTITYLINK] | è¿è¡Œæ—¶ç”¨æˆ·å…³ç³»ä¿¡æ¯ï¼Œå­˜å‚¨ä»»åŠ¡èŠ‚ç‚¹ä¸å‚ä¸è€…çš„ç›¸å…³ä¿¡æ¯ |\n|              | [ACT_RU_JOB]          | è¿è¡Œæ—¶ä½œä¸š                                         |\n|              | [ACT_RU_TASK]         | è¿è¡Œæ—¶ä»»åŠ¡                                         |\n|              | [ACT_RU_VARIABLE]     | è¿è¡Œæ—¶å˜é‡è¡¨                                       |\n| ç”¨æˆ·ç”¨æˆ·ç»„è¡¨ |                       |                                                    |\n|              | [ACT_ID_BYTEARRAY]    | äºŒè¿›åˆ¶æ•°æ®è¡¨                                       |\n|              | [ACT_ID_GROUP]        | ç”¨æˆ·ç»„ä¿¡æ¯è¡¨                                       |\n|              | [ACT_ID_INFO]         | ç”¨æˆ·ä¿¡æ¯è¯¦æƒ…è¡¨                                     |\n|              | [ACT_ID_MEMBERSHIP]   | äººä¸ç»„å…³ç³»è¡¨                                       |\n|              | [ACT_ID_PRIV]         | æƒé™è¡¨                                             |\n|              | [ACT_ID_PRIV_MAPPING] | ç”¨æˆ·æˆ–ç»„æƒé™å…³ç³»è¡¨                                 |\n|              | [ACT_ID_PROPERTY]     | å±æ€§è¡¨                                             |\n|              | [ACT_ID_TOKEN]        | è®°å½•ç”¨æˆ·çš„tokenä¿¡æ¯                                |\n|              | [ACT_ID_USER]         | ç”¨æˆ·è¡¨                                             |\n\n \n\n\n\n## ProcessEngineè®²è§£\n\n### ç¡¬ç¼–ç çš„æ–¹å¼\n\næˆ‘ä»¬å‰é¢è®²è§£æ¡ˆä¾‹çš„æ—¶å€™æ˜¯é€šè¿‡ProcessEngineConfigurationè¿™ä¸ªé…ç½®ç±»æ¥åŠ è½½çš„ã€‚\n\n```java\n// é…ç½®æ•°æ®åº“ç›¸å…³ä¿¡æ¯ è·å– ProcessEngineConfiguration\nProcessEngineConfiguration cfg = new StandaloneProcessEngineConfiguration()\n    .setJdbcUrl(\"jdbc:mysql://localhost:3306/flowable-learn2?serverTimezone=UTC&nullCatalogMeansCurrent=true\")\n    .setJdbcUsername(\"root\")\n    .setJdbcPassword(\"123456\")\n    .setJdbcDriver(\"com.mysql.cj.jdbc.Driver\")\n    .setDatabaseSchemaUpdate(ProcessEngineConfiguration.DB_SCHEMA_UPDATE_TRUE);\n// è·å–æµç¨‹å¼•æ“å¯¹è±¡\nProcessEngine processEngine = cfg.buildProcessEngine();\n```\n\nè¿™ç§æ–¹å¼ä¼šè°ƒç”¨buildProcessEngine()æ–¹æ³•ï¼Œé‡Œé¢çš„æ ¸å¿ƒä»£ç ä¸ºï¼š\n\n![image-20220319113106848](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220319113106848.png)\n\n\n\n![image-20220319113139646](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220319113139646.png)\n\n\n\n\n\n### é…ç½®æ–‡ä»¶\n\né™¤äº†ä¸Šé¢çš„ç¡¬ç¼–ç çš„æ–¹å¼å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥åœ¨resourcesç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª`flowable.cfg.xml`æ–‡ä»¶ï¼Œæ³¨æ„è¿™ä¸ªåç§°æ˜¯å›ºå®šçš„å“¦ã€‚å†…å®¹å¦‚ä¸‹ï¼š\n\n```xml\n<beans xmlns=\"http://www.springframework.org/schema/beans\"\n       xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n       xsi:schemaLocation=\"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd\">\n    <bean id=\"processEngineConfiguration\"\n          class=\"org.flowable.engine.impl.cfg.StandaloneProcessEngineConfiguration\">\n        <property name=\"jdbcUrl\" value=\"jdbc:mysql://localhost:3306/flow1?allowMultiQueries=true&amp;useUnicode=true&amp;characterEncoding=UTF-8&amp;useSSL=false&amp;serverTimezone=UTC&amp;nullCatalogMeansCurrent=true\" /><property name=\"jdbcDriver\" value=\"com.mysql.cj.jdbc.Driver\" />\n        <property name=\"jdbcUsername\" value=\"root\" />\n        <property name=\"jdbcPassword\" value=\"123456\" />\n        <property name=\"databaseSchemaUpdate\" value=\"true\" />\n        <property name=\"asyncExecutorActivate\" value=\"false\" />\n    </bean>\n</beans>\n```\n\nåœ¨ä¸Šé¢çš„é…ç½®æ–‡ä»¶ä¸­é…ç½®ç›¸å…³çš„ä¿¡æ¯ã€‚æˆ‘ä»¬åœ¨Javaä»£ç ä¸­å°±å¯ä»¥ç®€åŒ–ä¸ºï¼š\n\n```java\n    @Test\n    public void test01(){\n        // è·å–æµç¨‹å¼•æ“å¯¹è±¡\n        ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine();\n        System.out.println(\"processEngine = \" + processEngine);\n    }\n```\n\nå¯ä»¥çœ‹ä¸‹getDefaultProcessEngineçš„æºç ï¼Œåœ¨é‡Œé¢æœ€ç»ˆè¿˜æ˜¯æ‰§è¡Œäº†å’Œç¡¬ç¼–ç ä¸€æ ·çš„ä»£ç \n\n```java\n    public static ProcessEngine getProcessEngine(String processEngineName) {\n        if (!isInitialized()) {\n            init(); // å®Œæˆåˆå§‹åŒ–æ“ä½œ\n        }\n        return processEngines.get(processEngineName);\n    }\n```\n\nè¿›å…¥initæ–¹æ³•\n\n```java\n    public static synchronized void init() {\n        if (!isInitialized()) {\n            if (processEngines == null) {\n                // Create new map to store process-engines if current map is null\n                processEngines = new HashMap<>();\n            }\n            ClassLoader classLoader = ReflectUtil.getClassLoader();\n            Enumeration<URL> resources = null;\n            try {\n                resources = classLoader.getResources(\"flowable.cfg.xml\"); // åŠ è½½flowable.cfg.xmlé…ç½®æ–‡ä»¶\n            } catch (IOException e) {\n                throw new FlowableIllegalArgumentException(\"problem retrieving flowable.cfg.xml resources on the classpath: \" + System.getProperty(\"java.class.path\"), e);\n            }\n\n            // Remove duplicated configuration URL's using set. Some\n            // classloaders may return identical URL's twice, causing duplicate\n            // startups\n            Set<URL> configUrls = new HashSet<>();\n            while (resources.hasMoreElements()) {\n                configUrls.add(resources.nextElement());\n            }\n            for (Iterator<URL> iterator = configUrls.iterator(); iterator.hasNext();) {\n                URL resource = iterator.next();\n                LOGGER.info(\"Initializing process engine using configuration '{}'\", resource.toString());\n                initProcessEngineFromResource(resource); // åˆå§‹åŒ–ProcessEngine\n            }\n\n            try {\n                resources = classLoader.getResources(\"flowable-context.xml\"); // åœ¨æ•´åˆSpringçš„æƒ…å†µä¸‹åŠ è½½è¯¥æ–‡ä»¶\n            } catch (IOException e) {\n                throw new FlowableIllegalArgumentException(\"problem retrieving flowable-context.xml resources on the classpath: \" + System.getProperty(\"java.class.path\"), e);\n            }\n            while (resources.hasMoreElements()) {\n                URL resource = resources.nextElement();\n                LOGGER.info(\"Initializing process engine using Spring configuration '{}'\", resource.toString());\n                initProcessEngineFromSpringResource(resource); // ä»Springçš„èµ„æºæ–‡ä»¶ä¸­å®ŒæˆProcessEngineçš„åˆå§‹åŒ–\n            }\n\n            setInitialized(true);\n        } else {\n            LOGGER.info(\"Process engines already initialized\");\n        }\n    }\n```\n\nåœ¨æºç ä¸­æä¾›äº†å•ç‹¬ä½¿ç”¨å¥½æ•´åˆSpringçš„é…ç½®åŠ è½½æ–¹å¼ã€‚å†è¿›å…¥åˆ°initProcessEngineFromResource(resource)æ–¹æ³•ä¸­ï¼š\n\n![image-20220319114011806](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220319114011806.png)\n\n\n\n![image-20220319114053252](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220319114053252.png)\n\n\n\n![image-20220319114210012](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220319114210012.png)\n\n\n\nè€Œä¸”æˆ‘ä»¬ä¹Ÿå¯ä»¥çœ‹åˆ°ProcessEngineæœ€ç»ˆçš„å®ç°æ˜¯ ProcessEngineImplå¯¹è±¡ã€‚\n\n\n\n### è‡ªå®šä¹‰é…ç½®æ–‡ä»¶\n\næœ€åæˆ‘ä»¬å¦‚æœè¦åŠ è½½è‡ªå®šä¹‰åç§°çš„é…ç½®æ–‡ä»¶å¯ä»¥é€šè¿‡ProcessEngineConfigurationä¸­çš„å¯¹åº”æ„é€ æ–¹æ³•æ¥å®ç°\n\n```java\n    @Test\n    public void test2() throws Exception{\n        ProcessEngineConfiguration configuration = ProcessEngineConfiguration\n                .createProcessEngineConfigurationFromResource(\"flowable.cfg.xml\");\n        ProcessEngine processEngine = configuration.buildProcessEngine();\n        System.out.println(\"processEngine = \" + processEngine);\n    }\n```\n\n\n\n\n\n## ServcieæœåŠ¡æ¥å£\n\nServiceæ˜¯å·¥ä½œæµå¼•æ“æä¾›ç”¨äºè¿›è¡Œå·¥ä½œæµéƒ¨ç½²ã€æ‰§è¡Œã€ç®¡ç†çš„æœåŠ¡æ¥å£ï¼Œæˆ‘ä»¬ä½¿ç”¨è¿™äº›æ¥å£å¯ä»¥å°±æ˜¯æ“ä½œæœåŠ¡å¯¹åº”çš„æ•°æ®è¡¨\n\n\n\n![image-20220319223019186](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220319223019186.png)\n\n\n\n### Serviceåˆ›å»ºæ–¹å¼\n\né€šè¿‡ProcessEngineåˆ›å»ºService\n\næ–¹å¼å¦‚ä¸‹ï¼š\n\n ```java\nRuntimeService runtimeService = processEngine.getRuntimeService();\nRepositoryService repositoryService = processEngine.getRepositoryService();\nTaskService taskService = processEngine.getTaskService();\n// ...\n ```\n\n### Serviceæ€»è§ˆ\n\n| serviceåç§°       | serviceä½œç”¨              |\n| ----------------- | ------------------------ |\n| RepositoryService | Flowableçš„èµ„æºç®¡ç†ç±»     |\n| RuntimeService    | Flowableçš„æµç¨‹è¿è¡Œç®¡ç†ç±» |\n| TaskService       | Flowableçš„ä»»åŠ¡ç®¡ç†ç±»     |\n| HistoryService    | Flowableçš„å†å²ç®¡ç†ç±»     |\n| ManagerService    | Flowableçš„å¼•æ“ç®¡ç†ç±»     |\n\n ç®€å•ä»‹ç»ï¼š\n\n**RepositoryService**\n\næ˜¯activitiçš„èµ„æºç®¡ç†ç±»ï¼Œæä¾›äº†ç®¡ç†å’Œæ§åˆ¶æµç¨‹å‘å¸ƒåŒ…å’Œæµç¨‹å®šä¹‰çš„æ“ä½œã€‚ä½¿ç”¨å·¥ä½œæµå»ºæ¨¡å·¥å…·è®¾è®¡çš„ä¸šåŠ¡æµç¨‹å›¾éœ€è¦ä½¿ç”¨æ­¤serviceå°†æµç¨‹å®šä¹‰æ–‡ä»¶çš„å†…å®¹éƒ¨ç½²åˆ°è®¡ç®—æœºã€‚\n\né™¤äº†éƒ¨ç½²æµç¨‹å®šä¹‰ä»¥å¤–è¿˜å¯ä»¥ï¼šæŸ¥è¯¢å¼•æ“ä¸­çš„å‘å¸ƒåŒ…å’Œæµç¨‹å®šä¹‰ã€‚\n\næš‚åœæˆ–æ¿€æ´»å‘å¸ƒåŒ…ï¼Œå¯¹åº”å…¨éƒ¨å’Œç‰¹å®šæµç¨‹å®šä¹‰ã€‚ æš‚åœæ„å‘³ç€å®ƒä»¬ä¸èƒ½å†æ‰§è¡Œä»»ä½•æ“ä½œäº†ï¼Œæ¿€æ´»æ˜¯å¯¹åº”çš„åå‘æ“ä½œã€‚è·å¾—å¤šç§èµ„æºï¼Œåƒæ˜¯åŒ…å«åœ¨å‘å¸ƒåŒ…é‡Œçš„æ–‡ä»¶ï¼Œ æˆ–å¼•æ“è‡ªåŠ¨ç”Ÿæˆçš„æµç¨‹å›¾ã€‚\n\nè·å¾—æµç¨‹å®šä¹‰çš„pojoç‰ˆæœ¬ï¼Œ å¯ä»¥ç”¨æ¥é€šè¿‡javaè§£ææµç¨‹ï¼Œè€Œä¸å¿…é€šè¿‡xmlã€‚\n\n**RuntimeService**\n\nActivitiçš„æµç¨‹è¿è¡Œç®¡ç†ç±»ã€‚å¯ä»¥ä»è¿™ä¸ªæœåŠ¡ç±»ä¸­è·å–å¾ˆå¤šå…³äºæµç¨‹æ‰§è¡Œç›¸å…³çš„ä¿¡æ¯\n\n**TaskService**\n\nActivitiçš„ä»»åŠ¡ç®¡ç†ç±»ã€‚å¯ä»¥ä»è¿™ä¸ªç±»ä¸­è·å–ä»»åŠ¡çš„ä¿¡æ¯ã€‚\n\n**HistoryService**\n\nFlowableçš„å†å²ç®¡ç†ç±»ï¼Œå¯ä»¥æŸ¥è¯¢å†å²ä¿¡æ¯ï¼Œæ‰§è¡Œæµç¨‹æ—¶ï¼Œå¼•æ“ä¼šä¿å­˜å¾ˆå¤šæ•°æ®ï¼ˆæ ¹æ®é…ç½®ï¼‰ï¼Œæ¯”å¦‚æµç¨‹å®ä¾‹å¯åŠ¨æ—¶é—´ï¼Œä»»åŠ¡çš„å‚ä¸è€…ï¼Œ å®Œæˆä»»åŠ¡çš„æ—¶é—´ï¼Œæ¯ä¸ªæµç¨‹å®ä¾‹çš„æ‰§è¡Œè·¯å¾„ï¼Œç­‰ç­‰ã€‚ è¿™ä¸ªæœåŠ¡ä¸»è¦é€šè¿‡æŸ¥è¯¢åŠŸèƒ½æ¥è·å¾—è¿™äº›æ•°æ®ã€‚\n\n**ManagementService**\n\nActivitiçš„å¼•æ“ç®¡ç†ç±»ï¼Œæä¾›äº†å¯¹Flowable æµç¨‹å¼•æ“çš„ç®¡ç†å’Œç»´æŠ¤åŠŸèƒ½ï¼Œè¿™äº›åŠŸèƒ½ä¸åœ¨å·¥ä½œæµé©±åŠ¨çš„åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨ï¼Œä¸»è¦ç”¨äº Flowable ç³»ç»Ÿçš„æ—¥å¸¸ç»´æŠ¤ã€‚\n\n\n\n\n\n## å›¾æ ‡ä»‹ç»\n\nBPMN 2.0æ˜¯ä¸šåŠ¡æµç¨‹å»ºæ¨¡ç¬¦å·2.0çš„ç¼©å†™ã€‚å®ƒç”±Business Process Management Initiativeè¿™ä¸ªéè¥åˆ©åä¼šåˆ›å»ºå¹¶ä¸æ–­å‘å±•ã€‚ä½œä¸ºä¸€ç§æ ‡è¯†ï¼ŒBPMN 2.0æ˜¯ä½¿ç”¨ä¸€äº›**ç¬¦å·**æ¥æ˜ç¡®ä¸šåŠ¡æµç¨‹è®¾è®¡æµç¨‹å›¾çš„ä¸€æ•´å¥—ç¬¦å·è§„èŒƒï¼Œå®ƒèƒ½å¢è¿›ä¸šåŠ¡å»ºæ¨¡æ—¶çš„æ²Ÿé€šæ•ˆç‡ã€‚ç›®å‰BPMN2.0æ˜¯æœ€æ–°çš„ç‰ˆæœ¬ï¼Œå®ƒç”¨äºåœ¨BPMä¸Šä¸‹æ–‡ä¸­è¿›è¡Œå¸ƒå±€å’Œå¯è§†åŒ–çš„æ²Ÿé€šã€‚æ¥ä¸‹æ¥æˆ‘ä»¬å…ˆæ¥äº†è§£åœ¨æµç¨‹è®¾è®¡ä¸­å¸¸è§çš„ ç¬¦å·ã€‚\n\nBPMN2.0çš„**åŸºæœ¬ç¬¦åˆ**ä¸»è¦åŒ…å«ï¼š\n\n### äº‹ä»¶å›¾æ ‡\n\nåœ¨Flowableä¸­çš„äº‹ä»¶å›¾æ ‡å¯åŠ¨äº‹ä»¶ï¼Œè¾¹ç•Œäº‹ä»¶,ä¸­é—´äº‹ä»¶å’Œç»“æŸäº‹ä»¶.\n\n![image-20220320103803308](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220320103803308.png)\n\n\n\n### æ´»åŠ¨(ä»»åŠ¡)å›¾æ ‡\n\næ´»åŠ¨æ˜¯å·¥ä½œæˆ–ä»»åŠ¡çš„ä¸€ä¸ªé€šç”¨æœ¯è¯­ã€‚ä¸€ä¸ªæ´»åŠ¨å¯ä»¥æ˜¯ä¸€ä¸ªä»»åŠ¡ï¼Œè¿˜å¯ä»¥æ˜¯ä¸€ä¸ªå½“å‰æµç¨‹çš„å­å¤„ç†æµç¨‹ï¼› å…¶æ¬¡ï¼Œä½ è¿˜å¯ä»¥ä¸ºæ´»åŠ¨æŒ‡å®šä¸åŒçš„ç±»å‹ã€‚å¸¸è§æ´»åŠ¨å¦‚ä¸‹:\n\n![image-20220320103929543](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220320103929543.png)\n\n### ç»“æ„å›¾æ ‡\n\nç»“æ„å›¾æ ‡å¯ä»¥çœ‹åšæ˜¯æ•´ä¸ªæµç¨‹æ´»åŠ¨çš„ç»“æ„ï¼Œä¸€ä¸ªæµç¨‹ä¸­å¯ä»¥åŒ…æ‹¬å­æµç¨‹ã€‚å¸¸è§çš„ç»“æ„æœ‰ï¼š\n\n![image-20220320104025737](C:\\Users\\dpb\\AppData\\Roaming\\Typora\\typora-user-images\\image-20220320104025737.png)\n\n\n\n### ç½‘å…³å›¾æ ‡\n\nç½‘å…³ç”¨æ¥å¤„ç†å†³ç­–ï¼Œæœ‰å‡ ç§å¸¸ç”¨ç½‘å…³éœ€è¦äº†è§£ï¼š\n\n![image-20220320104157816](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220320104157816.png)\n\n\n\n\n\n\n\n\n\n## æµç¨‹éƒ¨ç½²è¯¦è§£\n\n### éƒ¨ç½²å®ç°\n\næˆ‘ä»¬å…ˆæ¥çœ‹ä¸‹æµç¨‹éƒ¨ç½²çš„å…·ä½“è¿‡ç¨‹ã€‚ä»£ç å®ç°\n\n```java\n/**\n     * éƒ¨ç½²æµç¨‹\n     */\n    @Test\n    public void test3(){\n        ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine();\n        RepositoryService repositoryService = processEngine.getRepositoryService();\n        Deployment deploy = repositoryService.createDeployment()\n                .addClasspathResource(\"holiday-request-new.bpmn20.xml\")\n                .name(\"è¯·å‡æµç¨‹...\")\n                .category(\"è¯·å‡\") // åˆ†ç±»\n                .tenantId(\"dpb\") // ç§Ÿæˆ·id\n                .deploy();\n        System.out.println(\"deploy.getId() = \" + deploy.getId());\n        System.out.println(\"deploy.getName() = \" + deploy.getName());\n        System.out.println(\"deploy.getCategory() = \" + deploy.getCategory());\n    }\n```\n\n### éƒ¨ç½²æ¶‰åŠè¡¨ç»“æ„\n\næ¶‰åŠåˆ°çš„ä¸‰å¼ è¡¨ï¼š\n\néƒ¨ç½²èµ„æºè¡¨ï¼šact_ge_bytearray\n\n| å­—æ®µ           | åç§°               | å¤‡æ³¨                                                         |\n| -------------- | ------------------ | ------------------------------------------------------------ |\n| ID_            | ä¸»é”®               |                                                              |\n| REV_           | ç‰ˆæœ¬å·             |                                                              |\n| NAME_          | åç§°               | éƒ¨ç½²çš„æ–‡ä»¶åç§°ï¼Œå¦‚ï¼šholiday-request-new.bpmn20.xmlã€holiday-request-new.bpmn20.png |\n| DEPLOYMENT_ID_ | éƒ¨ç½²ID             |                                                              |\n| BYTES_         | å­—èŠ‚ï¼ˆäºŒè¿›åˆ¶æ•°æ®ï¼‰ |                                                              |\n| GENERATED_     | æ˜¯å¦ç³»ç»Ÿç”Ÿæˆ       | 0ä¸ºç”¨æˆ·ä¸Šä¼ ï¼Œ<br/>1ä¸ºç³»ç»Ÿè‡ªåŠ¨ç”Ÿæˆï¼Œ æ¯”å¦‚ç³»ç»Ÿä¼š è‡ªåŠ¨æ ¹æ®xmlç”Ÿ æˆpng |\n\n\n\néƒ¨ç½²IDè¡¨ï¼šact_re_deployment\n\n\n\n| å­—æ®µ               | åç§°           | å¤‡æ³¨ |\n| ------------------ | -------------- | ---- |\n| ID_                | ä¸»é”®           |      |\n| NAME_              | åç§°           |      |\n| CATEGORY_          | åˆ†ç±»           |      |\n| TENANT_ID_         | ç§Ÿæˆ·ID         |      |\n| DEPLOY_TIME_       | éƒ¨ç½²æ—¶é—´       |      |\n| DERIVED_FROM_      | æ¥æºäº         |      |\n| DERIVED_FROM_ROOT_ | æ¥æºäº         |      |\n| ENGINE_VERSION_    | æµç¨‹å¼•æ“çš„ç‰ˆæœ¬ |      |\n\næµç¨‹è¡¨ï¼šact_re_procdef\n\n| å­—æ®µ                    | åç§°             | å¤‡æ³¨                              |\n| ----------------------- | ---------------- | --------------------------------- |\n| ID_                     | ä¸»é”®             |                                   |\n| REV_                    | ç‰ˆæœ¬å·           |                                   |\n| CATEGORY_               | åˆ†ç±»             | æµç¨‹å®šä¹‰çš„Namespaceå°±æ˜¯ç±»åˆ«       |\n| NAME_                   | åç§°             |                                   |\n| KEY_                    | æ ‡è¯†             |                                   |\n| VERSION_                | ç‰ˆæœ¬             |                                   |\n| DEPLOYMENT_ID_          | éƒ¨ç½²ID           |                                   |\n| RESOURCE_NAME_          | èµ„æºåç§°         | æµç¨‹bpmnæ–‡ä»¶åç§°                  |\n| DGRM_RESOURCE_NAME_     | å›¾ç‰‡èµ„æºåç§°     |                                   |\n| DESCRIPTION_            | æè¿°             |                                   |\n| HAS_START_FORM_KEY_     | æ‹¥æœ‰å¼€å§‹è¡¨å•æ ‡è¯† | startèŠ‚ç‚¹æ˜¯å¦å­˜åœ¨formKey  0å¦ 1æ˜¯ |\n| HAS_GRAPHICAL_NOTATION_ | æ‹¥æœ‰å›¾å½¢ä¿¡æ¯     |                                   |\n| SUSPENSION_STATE_       | æŒ‚èµ·çŠ¶æ€         | æš‚åœçŠ¶æ€ 1æ¿€æ´» 2æš‚åœ              |\n| TENANT_ID_              | ç§Ÿæˆ·ID           |                                   |\n|                         |                  |                                   |\n\næ³¨æ„ï¼š\n\nä¸šåŠ¡æµç¨‹å®šä¹‰æ•°æ®è¡¨ã€‚æ­¤è¡¨å’ŒACT_RE_DEPLOYMENTæ˜¯å¤šå¯¹ä¸€çš„å…³ç³»ï¼Œå³ï¼Œä¸€ä¸ªéƒ¨ç½²çš„baråŒ…é‡Œå¯èƒ½åŒ…å«å¤šä¸ªæµç¨‹å®šä¹‰æ–‡ä»¶ï¼Œæ¯ä¸ªæµç¨‹å®šä¹‰æ–‡ä»¶éƒ½ä¼šæœ‰ä¸€æ¡è®°å½•åœ¨ACT_REPROCDEFè¡¨å†…ï¼Œæ¯ä¸ªæµç¨‹å®šä¹‰çš„æ•°æ®ï¼Œéƒ½ä¼šå¯¹äºACT_GE_BYTEARRAYè¡¨å†…çš„ä¸€ä¸ªèµ„æºæ–‡ä»¶å’ŒPNGå›¾ç‰‡æ–‡ä»¶ã€‚å’ŒACT_GE_BYTEARRAYçš„å…³è”æ˜¯é€šè¿‡ç¨‹åºç”¨ACT_GE_BYTEARRAY.NAMEä¸ACT_RE_PROCDEF.NAME_å®Œæˆçš„\n\n\n\n### æŒ‚èµ·å’Œæ¿€æ´»\n\néƒ¨ç½²çš„æµç¨‹é»˜è®¤çš„çŠ¶æ€ä¸ºæ¿€æ´»ï¼Œå¦‚æœæˆ‘ä»¬æš‚æ—¶ä¸æƒ³ä½¿ç”¨è¯¥å®šä¹‰çš„æµç¨‹ï¼Œé‚£ä¹ˆå¯ä»¥æŒ‚èµ·è¯¥æµç¨‹ã€‚å½“ç„¶è¯¥æµç¨‹å®šä¹‰ä¸‹è¾¹æ‰€æœ‰çš„æµç¨‹å®ä¾‹å…¨éƒ¨æš‚åœã€‚\n\næµç¨‹å®šä¹‰ä¸ºæŒ‚èµ·çŠ¶æ€ï¼Œè¯¥æµç¨‹å®šä¹‰å°†ä¸å…è®¸å¯åŠ¨æ–°çš„æµç¨‹å®ä¾‹ï¼ŒåŒæ—¶è¯¥æµç¨‹å®šä¹‰ä¸‹çš„æ‰€æœ‰çš„æµç¨‹å®ä¾‹éƒ½å°†å…¨éƒ¨æŒ‚èµ·æš‚åœæ‰§è¡Œã€‚\n\n```java\n/**\n     * æŒ‚èµ·æµç¨‹\n     */\n    @Test\n    public void test05(){\n        // è·å–æµç¨‹å¼•æ“å¯¹è±¡\n        ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine();\n        RepositoryService repositoryService = processEngine.getRepositoryService();\n        ProcessDefinition processDefinition = repositoryService.createProcessDefinitionQuery()\n                .processDefinitionId(\"holiday:1:4\")\n                .singleResult();\n        // è·å–æµç¨‹å®šä¹‰çš„çŠ¶æ€\n        boolean suspended = processDefinition.isSuspended();\n        System.out.println(\"suspended = \" + suspended);\n        if(suspended){\n            // è¡¨ç¤ºè¢«æŒ‚èµ·\n            System.out.println(\"æ¿€æ´»æµç¨‹å®šä¹‰\");\n            repositoryService.activateProcessDefinitionById(\"holiday:1:4\",true,null);\n        }else{\n            // è¡¨ç¤ºæ¿€æ´»çŠ¶æ€\n            System.out.println(\"æŒ‚èµ·æµç¨‹\");\n            repositoryService.suspendProcessDefinitionById(\"holiday:1:4\",true,null);\n        }\n    }\n```\n\nå…·ä½“çš„å®ç°å…¶å®å°±æ˜¯æ›´æ–°äº†æµç¨‹å®šä¹‰è¡¨ä¸­çš„å­—æ®µ\n\n![image-20220321210010518](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220321210010518.png)\n\nè€Œä¸”é€šè¿‡REV_å­—æ®µæ¥æ§åˆ¶æ•°æ®å®‰å…¨ï¼Œä¹Ÿæ˜¯ä¸€ç§ä¹è§‚é”çš„ä½“ç°äº†ï¼Œå¦‚æœè¦å¯åŠ¨ä¸€ä¸ªå·²ç»æŒ‚èµ·çš„æµç¨‹å°±ä¼šå‡ºç°å¦‚ä¸‹çš„é”™è¯¯\n\n![image-20220321211858122](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220321211858122.png)\n\n\n\n\n\n## å¯åŠ¨æµç¨‹å®ä¾‹\n\nç„¶åæˆ‘ä»¬æ¥çœ‹çœ‹å¯åŠ¨æµç¨‹å®ä¾‹çš„è¿‡ç¨‹ã€‚å®ç°ä»£ç å¦‚ä¸‹ï¼š\n\n```java\n/**\n     * å¯åŠ¨æµç¨‹å®ä¾‹\n     */\n    @Test\n    public void testRunProcess(){\n        // è·å–æµç¨‹å¼•æ“å¯¹è±¡\n        ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine();\n        // å¯åŠ¨æµç¨‹å®ä¾‹é€šè¿‡ RuntimeService å¯¹è±¡\n        RuntimeService runtimeService = processEngine.getRuntimeService();\n        // æ„å»ºæµç¨‹å˜é‡\n        Map<String,Object> variables = new HashMap<>();\n        variables.put(\"employee\",\"å¼ ä¸‰\") ;// è°ç”³è¯·è¯·å‡\n        variables.put(\"nrOfHolidays\",3); // è¯·å‡ å¤©å‡\n        variables.put(\"description\",\"å·¥ä½œç´¯äº†ï¼Œæƒ³å‡ºå»ç©ç©\"); // è¯·å‡çš„åŸå› \n        // å¯åŠ¨æµç¨‹å®ä¾‹ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æµç¨‹å®šä¹‰çš„id\n        ProcessInstance processInstance = runtimeService\n                .startProcessInstanceById(\"holiday:1:4\", variables);// å¯åŠ¨æµç¨‹å®ä¾‹\n        // è¾“å‡ºç›¸å…³çš„æµç¨‹å®ä¾‹ä¿¡æ¯\n        System.out.println(\"æµç¨‹å®šä¹‰çš„IDï¼š\" + processInstance.getProcessDefinitionId());\n        System.out.println(\"æµç¨‹å®ä¾‹çš„IDï¼š\" + processInstance.getId());\n        System.out.println(\"å½“å‰æ´»åŠ¨çš„IDï¼š\" + processInstance.getActivityId());\n    }\n```\n\nå½“æˆ‘ä»¬å¯åŠ¨äº†ä¸€ä¸ªæµç¨‹å®ä¾‹åï¼Œä¼šåœ¨ACT_RU_*å¯¹åº”çš„è¡¨ç»“æ„ä¸­æ“ä½œ,è¿è¡Œæ—¶å®ä¾‹æ¶‰åŠçš„è¡¨ç»“æ„å…±10å¼ ï¼š\n\n* ACT_RU_DEADLETTER_JOB  æ­£åœ¨è¿è¡Œçš„ä»»åŠ¡è¡¨ \n* ACT_RU_EVENT_SUBSCR è¿è¡Œæ—¶äº‹ä»¶ \n* ACT_RU_EXECUTION è¿è¡Œæ—¶æµç¨‹æ‰§è¡Œå®ä¾‹ \n* ACT_RU_HISTORY_JOB  å†å²ä½œä¸šè¡¨ \n* ACT_RU_IDENTITYLINK è¿è¡Œæ—¶ç”¨æˆ·å…³ç³»ä¿¡æ¯ \n* ACT_RU_JOB è¿è¡Œæ—¶ä½œä¸šè¡¨ \n* ACT_RU_SUSPENDED_JOB æš‚åœä½œä¸šè¡¨ \n* ACT_RU_TASK  è¿è¡Œæ—¶ä»»åŠ¡è¡¨ \n* ACT_RU_TIMER_JOB å®šæ—¶ä½œä¸šè¡¨ \n* ACT_RU_VARIABLE  è¿è¡Œæ—¶å˜é‡è¡¨\n\n\n\nå¯åŠ¨ä¸€ä¸ªæµç¨‹å®ä¾‹çš„æ—¶å€™æ¶‰åŠåˆ°çš„è¡¨æœ‰\n\n* ACT_RU_EXECUTION è¿è¡Œæ—¶æµç¨‹æ‰§è¡Œå®ä¾‹ \n* ACT_RU_IDENTITYLINK è¿è¡Œæ—¶ç”¨æˆ·å…³ç³»ä¿¡æ¯ \n* ACT_RU_TASK  è¿è¡Œæ—¶ä»»åŠ¡è¡¨ \n* ACT_RU_VARIABLE  è¿è¡Œæ—¶å˜é‡è¡¨\n\n\n\nACT_RU_EXECUTIONè¡¨ç»“æ„\n\n| å­—æ®µ                  | åç§°                 | å¤‡æ³¨ |\n| --------------------- | -------------------- | ---- |\n| ID_                   | ä¸»é”®                 |      |\n| REV_                  | ç‰ˆæœ¬å·               |      |\n| PROC_INST_ID_         | æµç¨‹å®ä¾‹ID           |      |\n| BUSINESS_KEY_         | ä¸šåŠ¡ä¸»é”®ID           |      |\n| PARENT_ID_            | çˆ¶æ‰§è¡Œæµçš„ID         |      |\n| PROC_DEF_ID_          | æµç¨‹å®šä¹‰çš„æ•°æ®ID     |      |\n| SUPER_EXEC_           |                      |      |\n| ROOT_PROC_INST_ID_    | æµç¨‹å®ä¾‹çš„rootæµç¨‹id |      |\n| ACT_ID_               | èŠ‚ç‚¹å®ä¾‹ID           |      |\n| IS_ACTIVE_            | æ˜¯å¦å­˜æ´»             |      |\n| IS_CONCURRENT_        | æ‰§è¡Œæµæ˜¯å¦æ­£åœ¨å¹¶è¡Œ   |      |\n| IS_SCOPE_             |                      |      |\n| IS_EVENT_SCOPE_       |                      |      |\n| IS_MI_ROOT_           |                      |      |\n| SUSPENSION_STATE_     | æµç¨‹ç»ˆç«¯çŠ¶æ€         |      |\n| CACHED_ENT_STATE_     |                      |      |\n| TENANT_ID_            | ç§Ÿæˆ·ç¼–å·             |      |\n| NAME_                 |                      |      |\n| START_TIME_           | å¼€å§‹æ—¶é—´             |      |\n| START_USER_ID_        | å¼€å§‹çš„ç”¨æˆ·ç¼–å·       |      |\n| LOCK_TIME_            | é”å®šæ—¶é—´             |      |\n| IS_COUNT_ENABLED_     |                      |      |\n| EVT_SUBSCR_COUNT_     |                      |      |\n| TASK_COUNT_           |                      |      |\n| JOB_COUNT_            |                      |      |\n| TIMER_JOB_COUNT_      |                      |      |\n| SUSP_JOB_COUNT_       |                      |      |\n| DEADLETTER_JOB_COUNT_ |                      |      |\n| VAR_COUNT_            |                      |      |\n| ID_LINK_COUNT_        |                      |      |\n\nåˆ›å»ºæµç¨‹å®ä¾‹åå¯¹åº”çš„è¡¨ç»“æ„çš„æ•°æ®\n\n![image-20220322133108405](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220322133108405.png)\n\n![image-20220322133219534](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220322133219534.png)\n\n\n\nACT_RU_TASK  è¿è¡Œæ—¶ä»»åŠ¡è¡¨\n\n| å­—æ®µ              | åç§°                 | å¤‡æ³¨                |\n| ----------------- | -------------------- | ------------------- |\n| ID_               | ä¸»é”®                 |                     |\n| REV_              | ç‰ˆæœ¬å·               |                     |\n| EXECUTION_ID_     | ä»»åŠ¡æ‰€åœ¨çš„æ‰§è¡ŒæµID   |                     |\n| PROC_INST_ID_     | æµç¨‹å®ä¾‹ID           |                     |\n| PROC_DEF_ID_      | æµç¨‹å®šä¹‰æ•°æ®ID       |                     |\n| NAME_             | ä»»åŠ¡åç§°             |                     |\n| PARENT_TASK_ID_   | çˆ¶ä»»åŠ¡ID             |                     |\n| DESCRIPTION_      | è¯´æ˜                 |                     |\n| TASK_DEF_KEY_     | ä»»åŠ¡å®šä¹‰çš„IDå€¼       |                     |\n| OWNER_            | ä»»åŠ¡æ‹¥æœ‰äºº           |                     |\n| ASSIGNEE_         | è¢«æŒ‡æ´¾æ‰§è¡Œè¯¥ä»»åŠ¡çš„äºº |                     |\n| DELEGATION_       | å§”æ‰˜äºº               |                     |\n| PRIORITY_         | ä¼˜å…ˆçº§               |                     |\n| CREATE_TIME_      | åˆ›å»ºæ—¶é—´             |                     |\n| DUE_DATE_         | è€—æ—¶                 |                     |\n| CATEGORY_         | ç±»åˆ«                 |                     |\n| SUSPENSION_STATE_ | æ˜¯å¦æŒ‚èµ·             | 1ä»£è¡¨æ¿€æ´» 2ä»£è¡¨æŒ‚èµ· |\n| TENANT_ID_        | ç§Ÿæˆ·ç¼–å·             |                     |\n| FORM_KEY_         |                      |                     |\n| CLAIM_TIME_       | æ‹¾å–æ—¶é—´             |                     |\n\nåˆ›å»ºæµç¨‹å®ä¾‹åå¯¹åº”çš„è¡¨ç»“æ„çš„æ•°æ®\n\n![image-20220322133307195](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220322133307195.png)\n\n![image-20220322133335326](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220322133335326.png)\n\n\n\nACT_RU_VARIABLE  è¿è¡Œæ—¶å˜é‡è¡¨\n\n| å­—æ®µ          | åç§°                           | å¤‡æ³¨                                 |\n| ------------- | ------------------------------ | ------------------------------------ |\n| ID_           | ä¸»é”®                           |                                      |\n| REV_          | ç‰ˆæœ¬å·                         |                                      |\n| TYPE_         | å‚æ•°ç±»å‹                       | å¯ä»¥æ˜¯åŸºæœ¬çš„ç±»å‹ï¼Œä¹Ÿå¯ä»¥ç”¨æˆ·è‡ªè¡Œæ‰©å±• |\n| NAME_         | å‚æ•°åç§°                       |                                      |\n| EXECUTION_ID_ | å‚æ•°æ‰§è¡ŒID                     |                                      |\n| PROC_INST_ID_ | æµç¨‹å®ä¾‹ID                     |                                      |\n| TASK_ID_      | ä»»åŠ¡ID                         |                                      |\n| BYTEARRAY_ID_ | èµ„æºID                         |                                      |\n| DOUBLE_       | å‚æ•°ä¸ºdoubleï¼Œåˆ™ä¿å­˜åœ¨è¯¥å­—æ®µä¸­ |                                      |\n| LONG_         | å‚æ•°ä¸ºlongï¼Œåˆ™ä¿å­˜åœ¨è¯¥å­—æ®µä¸­   |                                      |\n| TEXT_         | ç”¨æˆ·ä¿å­˜æ–‡æœ¬ç±»å‹çš„å‚æ•°å€¼       |                                      |\n| TEXT2_        | ç”¨æˆ·ä¿å­˜æ–‡æœ¬ç±»å‹çš„å‚æ•°å€¼       |                                      |\n\nåˆ›å»ºæµç¨‹å®ä¾‹åå¯¹åº”çš„è¡¨ç»“æ„çš„æ•°æ®\n\n![image-20220322133406398](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220322133406398.png)\n\n![image-20220322133439827](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220322133439827.png)\n\n\n\nACT_RU_IDENTITYLINK è¿è¡Œæ—¶ç”¨æˆ·å…³ç³»ä¿¡æ¯ \n\n| å­—æ®µ          | åç§°         | å¤‡æ³¨                                                         |\n| ------------- | ------------ | ------------------------------------------------------------ |\n| ID_           | ä¸»é”®         |                                                              |\n| REV_          | ç‰ˆæœ¬å·       |                                                              |\n| GROUP_ID_     | ç”¨æˆ·ç»„ID     |                                                              |\n| TYPE_         | å…³ç³»æ•°æ®ç±»å‹ | assigneeæ”¯é…äºº(ç»„)ã€candidateå€™é€‰äºº(ç»„)ã€owneræ‹¥æœ‰äºº,participantå‚ä¸è€… |\n| USER_ID_      | ç”¨æˆ·ID       |                                                              |\n| TASK_ID_      | ä»»åŠ¡ID       |                                                              |\n| PROC_INST_ID_ | æµç¨‹å®šä¹‰ID   |                                                              |\n| PROC_DEF_ID_  | å±æ€§ID       |                                                              |\n\nåˆ›å»ºæµç¨‹å®ä¾‹åå¯¹åº”çš„è¡¨ç»“æ„çš„æ•°æ®:\n\n![image-20220322133501720](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220322133501720.png)\n\n\n\n\n\n## å¤„ç†æµç¨‹\n\nä¸Šé¢çš„æµç¨‹å·²ç»æµè½¬åˆ°äº†zhangsanè¿™ä¸ªç”¨æˆ·è¿™é‡Œï¼Œç„¶åå¯ä»¥å¼€å§‹å®¡æ‰¹äº†\n\n```java\n// è·å–æµç¨‹å¼•æ“å¯¹è±¡\n        ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine();\n        TaskService taskService = processEngine.getTaskService();\n        Task task = taskService.createTaskQuery()\n                .processDefinitionId(\"holiday:1:4\")\n                .taskAssignee(\"zhangsan\")\n                .singleResult();\n        // æ·»åŠ æµç¨‹å˜é‡\n        Map<String,Object> variables = new HashMap<>();\n        variables.put(\"approved\",false); // æ‹’ç»è¯·å‡\n        // å®Œæˆä»»åŠ¡\n        taskService.complete(task.getId(),variables);\n```\n\nåœ¨æ­£å¸¸å¤„ç†æµç¨‹ä¸­æ¶‰åŠåˆ°çš„è¡¨ç»“æ„\n\n* ACT_RU_EXECUTION è¿è¡Œæ—¶æµç¨‹æ‰§è¡Œå®ä¾‹ \n* ACT_RU_IDENTITYLINK è¿è¡Œæ—¶ç”¨æˆ·å…³ç³»ä¿¡æ¯ \n* ACT_RU_TASK  è¿è¡Œæ—¶ä»»åŠ¡è¡¨ \n* ACT_RU_VARIABLE  è¿è¡Œæ—¶å˜é‡è¡¨\n\nACT_RU_TASK  è¿è¡Œæ—¶ä»»åŠ¡è¡¨ :ä¼šæ–°ç”Ÿæˆä¸€æ¡è®°å½•\n\n![image-20220322135040119](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220322135040119.png)\n\n![image-20220322135125703](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220322135125703.png)\n\nACT_RU_VARIABLE  è¿è¡Œæ—¶å˜é‡è¡¨:ä¼šè®°å½•æ–°çš„æµç¨‹å˜é‡\n\n![image-20220322135204021](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220322135204021.png)\n\n\n\nå½“ç„¶æµç¨‹å®ä¾‹ä¹Ÿå¯ä»¥æŒ‚èµ·\n\n```java\n// 1.è·å–ProcessEngineå¯¹è±¡\nProcessEngine engine = ProcessEngines.getDefaultProcessEngine();\n// 2.è·å–RuntimeService\nRuntimeService runtimeService = engine.getRuntimeService();\n// 3.è·å–æµç¨‹å®ä¾‹å¯¹è±¡\nProcessInstance processInstance = runtimeService.createProcessInstanceQuery()\n    .processInstanceId(\"25001\")\n    .singleResult();\n// 4.è·å–ç›¸å…³çš„çŠ¶æ€æ“ä½œ\nboolean suspended = processInstance.isSuspended();\nString id = processInstance.getId();\nif(suspended){\n    // æŒ‚èµ·--ã€‹æ¿€æ´»\n    runtimeService.activateProcessInstanceById(id);\n    System.out.println(\"æµç¨‹å®šä¹‰ï¼š\" + id + \"ï¼Œå·²æ¿€æ´»\");\n}else{\n    // æ¿€æ´»--ã€‹æŒ‚èµ·\n    runtimeService.suspendProcessInstanceById(id);\n    System.out.println(\"æµç¨‹å®šä¹‰ï¼š\" + id + \"ï¼Œå·²æŒ‚èµ·\");\n}\n```\n\n\n\nå¯åŠ¨ç¬¬äºŒä¸ªæµç¨‹å®ä¾‹åå†æŸ¥çœ‹ç›¸å…³çš„è¡¨ç»“æ„æ—¶ï¼Œå¯¹ä»–ä»¬çš„å…³ç³»ç†è§£ä¼šæ›´åŠ çš„æ¸…æ¥šä¸€äº›\n\nå¯åŠ¨ä¸€ä¸ªæ–°çš„æµç¨‹å®ä¾‹å¯¹åº”çš„å°±ä¼šäº§ç”Ÿä¸¤æ¡è®°å½•\n\n![image-20220322135605252](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220322135605252.png)\n\n\n\nIDENTITYLINKä¸­ä¼šè®°å½•æ¯æ¬¡æµç¨‹æ“ä½œçš„ä¿¡æ¯\n\n![image-20220322135636841](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220322135636841.png)\n\n\n\n![image-20220322135659671](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220322135659671.png)\n\n\n\næµç¨‹å˜é‡æ•°æ®ï¼ŒåŠæ—¶key ç›¸åŒï¼Œä½†æ˜¯å±äºä¸åŒçš„æµç¨‹å®ä¾‹ç›¸äº’é—´ä¹Ÿæ˜¯éš”ç¦»çš„\n\n![image-20220322135719104](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220322135719104.png)\n\n## å®Œæˆä¸€ä¸ªæµç¨‹\n\nç„¶åæˆ‘ä»¬æŠŠç¬¬ä¸€ä¸ªæµç¨‹å¤„ç†å®Œæˆ\n\n```java\nProcessEngine processEngine = cfg.buildProcessEngine();\nTaskService taskService = processEngine.getTaskService();\nTask task = taskService.createTaskQuery()\n    .processDefinitionId(\"holiday:1:4\")\n    .taskAssignee(\"lisi\")\n    .singleResult();\n// æ·»åŠ æµç¨‹å˜é‡\nMap<String,Object> variables = new HashMap<>();\nvariables.put(\"approved\",false); // æ‹’ç»è¯·å‡\n// å®Œæˆä»»åŠ¡\ntaskService.complete(task.getId(),variables);\n```\n\nå¤„ç†å®Œäº†ä¸€ä¸ªå·¥ä½œæµç¨‹åï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹ç›¸å…³çš„è¡¨ç»“æ„ä¿¡æ¯\n\né¦–å…ˆæˆ‘ä»¬ä¼šå‘ç°\n\n* ACT_RU_EXECUTION è¿è¡Œæ—¶æµç¨‹æ‰§è¡Œå®ä¾‹ \n* ACT_RU_IDENTITYLINK è¿è¡Œæ—¶ç”¨æˆ·å…³ç³»ä¿¡æ¯ \n* ACT_RU_TASK  è¿è¡Œæ—¶ä»»åŠ¡è¡¨ \n* ACT_RU_VARIABLE  è¿è¡Œæ—¶å˜é‡è¡¨\n\nè¿™å››å¼ è¡¨ä¸­å¯¹åº”çš„æ•°æ®éƒ½æ²¡æœ‰äº†ï¼Œä¹Ÿå°±æ˜¯è¿™ä¸ªæµç¨‹å·²ç»ä¸æ˜¯è¿è¡Œä¸­çš„æµç¨‹äº†ã€‚ç„¶ååœ¨å¯¹åº”çš„å†å²è¡¨ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ç›¸å…³çš„ä¿¡æ¯\n\n* ACT_HI_ACTINST  å†å²çš„æµç¨‹å®ä¾‹\n\n* ACT_HI_ATTACHMENT å†å²çš„æµç¨‹é™„ä»¶\n* ACT_HI_COMMENT  å†å²çš„è¯´æ˜æ€§ä¿¡æ¯\n* ACT_HI_DETAIL å†å²çš„æµç¨‹è¿è¡Œä¸­çš„ç»†èŠ‚ä¿¡æ¯\n* ACT_HI_IDENTITYLINK å†å²çš„æµç¨‹è¿è¡Œè¿‡ç¨‹ä¸­ç”¨æˆ·å…³ç³»\n* ACT_HI_PROCINST  å†å²çš„æµç¨‹å®ä¾‹\n* ACT_HI_TASKINST  å†å²çš„ä»»åŠ¡å®ä¾‹\n* ACT_HI_VARINST  å†å²çš„æµç¨‹è¿è¡Œä¸­çš„å˜é‡ä¿¡æ¯\n\nåœ¨æˆ‘ä»¬ä¸Šé¢çš„å¤„ç†æµç¨‹çš„è¿‡ç¨‹ä¸­è®¾è®¡åˆ°çš„å†å²è¡¨æœ‰\n\nACT_HI_ACTINST  å†å²çš„æµç¨‹å®ä¾‹\n\n| å­—æ®µ               | åç§°                 | å¤‡æ³¨ |\n| ------------------ | -------------------- | ---- |\n| ID_                | ä¸»é”®                 |      |\n| PROC_DEF_ID_       | æµç¨‹å®šä¹‰ID           |      |\n| PROC_INST_ID_      | æµç¨‹å®ä¾‹ID           |      |\n| EXECUTION_ID_      | æ‰§è¡ŒID               |      |\n| ACT_ID_            | èŠ‚ç‚¹å®ä¾‹ID           |      |\n| TASK_ID_           | ä»»åŠ¡ID               |      |\n| CALL_PROC_INST_ID_ | è°ƒç”¨å¤–éƒ¨çš„æµç¨‹å®ä¾‹ID |      |\n| ACT_NAME_          | èŠ‚ç‚¹åç§°             |      |\n| ACT_TYPE_          | èŠ‚ç‚¹ç±»å‹             |      |\n| ASSIGNEE_          | å¤„ç†äºº               |      |\n| START_TIME_        | å¼€å§‹æ—¶é—´             |      |\n| END_TIME_          | ç»“æŸæ—¶é—´             |      |\n| DURATION_          | è€—æ—¶                 |      |\n| DELETE_REASON_     | åˆ é™¤åŸå›              |      |\n| TENANT_ID_         | ç§Ÿæˆ·ç¼–å·             |      |\n\n![image-20220322141800554](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220322141800554.png)\n\n![image-20220322141825065](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220322141825065.png)\n\n\n\nACT_HI_IDENTITYLINK å†å²çš„æµç¨‹è¿è¡Œè¿‡ç¨‹ä¸­ç”¨æˆ·å…³ç³»\n\n| å­—æ®µ                 | åç§°         | å¤‡æ³¨ |\n| -------------------- | ------------ | ---- |\n| ID_                  | ä¸»é”®         |      |\n| GROUP_ID_            | ç»„ç¼–å·       |      |\n| TYPE_                | ç±»å‹         |      |\n| USER_ID_             | ç”¨æˆ·ç¼–å·     |      |\n| TASK_ID_             | ä»»åŠ¡ç¼–å·     |      |\n| CREATE_TIME_         | åˆ›å»ºæ—¶é—´     |      |\n| PROC_INST_ID_        | æµç¨‹å®ä¾‹ç¼–å· |      |\n| SCOPE_ID_            |              |      |\n| SCOPE_TYPE_          |              |      |\n| SCOPE_DEFINITION_ID_ |              |      |\n|                      |              |      |\n\n\n\n![image-20220322141717826](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220322141717826.png)\n\nACT_HI_PROCINST  å†å²çš„æµç¨‹å®ä¾‹\n\n| å­—æ®µ                       | åç§°         | å¤‡æ³¨ |\n| -------------------------- | ------------ | ---- |\n| ID_                        | ä¸»é”®         |      |\n| PROC_INST_ID_              | æµç¨‹å®ä¾‹ID   |      |\n| BUSINESS_KEY_              | ä¸šåŠ¡ä¸»é”®     |      |\n| PROC_DEF_ID_               | å±æ€§ID       |      |\n| START_TIME_                | å¼€å§‹æ—¶é—´     |      |\n| END_TIME_                  | ç»“æŸæ—¶é—´     |      |\n| DURATION_                  | è€—æ—¶         |      |\n| START_USER_ID_             | èµ·å§‹äºº       |      |\n| START_ACT_ID_              | èµ·å§‹èŠ‚ç‚¹     |      |\n| END_ACT_ID_                | ç»“æŸèŠ‚ç‚¹     |      |\n| SUPER_PROCESS_INSTANCE_ID_ | çˆ¶æµç¨‹å®ä¾‹ID |      |\n| DELETE_REASON_             | åˆ é™¤åŸå›      |      |\n| TENANT_ID_                 | ç§Ÿæˆ·ç¼–å·     |      |\n| NAME_                      | åç§°         |      |\n\n\n\n![image-20220322141855401](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220322141855401.png)\n\n\n\n![image-20220322141912602](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220322141912602.png)\n\n\n\nACT_HI_TASKINST  å†å²çš„ä»»åŠ¡å®ä¾‹\n\n| å­—æ®µ            | åç§°                    | å¤‡æ³¨                                   |\n| --------------- | ----------------------- | -------------------------------------- |\n| ID_             | ä¸»é”®                    |                                        |\n| PROC_DEF_ID_    | æµç¨‹å®šä¹‰ID              |                                        |\n| TASK_DEF_KEY_   | ä»»åŠ¡å®šä¹‰çš„IDå€¼          |                                        |\n| PROC_INST_ID_   | æµç¨‹å®ä¾‹ID              |                                        |\n| EXECUTION_ID_   | æ‰§è¡ŒID                  |                                        |\n| PARENT_TASK_ID_ | çˆ¶ä»»åŠ¡ID                |                                        |\n| NAME_           | åç§°                    |                                        |\n| DESCRIPTION_    | è¯´æ˜                    |                                        |\n| OWNER_          | å®é™…ç­¾æ”¶äºº ä»»åŠ¡çš„æ‹¥æœ‰è€… | ç­¾æ”¶äººï¼ˆé»˜è®¤ä¸ºç©ºï¼Œåªæœ‰åœ¨å§”æ‰˜æ—¶æ‰æœ‰å€¼ï¼‰ |\n| ASSIGNEE_       | è¢«æŒ‡æ´¾æ‰§è¡Œè¯¥ä»»åŠ¡çš„äºº    |                                        |\n| START_TIME_     | å¼€å§‹æ—¶é—´                |                                        |\n| CLAIM_TIME_     | ä»»åŠ¡æ‹¾å–æ—¶é—´            |                                        |\n| END_TIME_       | ç»“æŸæ—¶é—´                |                                        |\n| DURATION_       | è€—æ—¶                    |                                        |\n| DELETE_REASON_  | åˆ é™¤åŸå›                 |                                        |\n| PRIORITY_       | ä¼˜å…ˆçº§åˆ«                |                                        |\n| DUE_DATE_       | è¿‡æœŸæ—¶é—´                |                                        |\n| FORM_KEY_       | èŠ‚ç‚¹å®šä¹‰çš„formkey       |                                        |\n| CATEGORY_       | ç±»åˆ«                    |                                        |\n| TENANT_ID_      | ç§Ÿæˆ·                    |                                        |\n\n![image-20220322142609163](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220322142609163.png)\n\n![image-20220322142650699](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220322142650699.png)\n\n\n\nACT_HI_VARINST  å†å²çš„æµç¨‹è¿è¡Œä¸­çš„å˜é‡ä¿¡æ¯ï¼šæµç¨‹å˜é‡è™½ç„¶åœ¨ä»»åŠ¡å®Œæˆååœ¨æµç¨‹å®ä¾‹è¡¨ä¸­ä¼šåˆ é™¤ï¼Œä½†æ˜¯åœ¨å†å²è¡¨ä¸­è¿˜æ˜¯ä¼šè®°å½•çš„\n\n| å­—æ®µ          | åç§°               | å¤‡æ³¨ |\n| ------------- | ------------------ | ---- |\n| ID_           | ä¸»é”®               |      |\n| PROC_INST_ID_ | æµç¨‹å®ä¾‹ID         |      |\n| EXECUTION_ID_ | æŒ‡å®šID             |      |\n| TASK_ID_      | ä»»åŠ¡ID             |      |\n| NAME_         | åç§°               |      |\n| VAR_TYPE_     | å‚æ•°ç±»å‹           |      |\n| REV_          | æ•°æ®ç‰ˆæœ¬           |      |\n| BYTEARRAY_ID_ | å­—èŠ‚è¡¨ID           |      |\n| DOUBLE_       | å­˜å‚¨doubleç±»å‹æ•°æ® |      |\n| LONG_         | å­˜å‚¨longç±»å‹æ•°æ®   |      |\n| .....         |                    |      |\n\n\n\n![image-20220322142756867](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220322142756867.png)\n\nå¥½äº†ä¸€ä¸ªç›¸å¯¹ç®€å•çš„æµç¨‹å¤„ç†æ¶‰åŠåˆ°çš„ç›¸å…³è¡¨ç»“æ„å†…å®¹å°±ä»‹ç»å®Œäº†\n\n\n\n\n\n\n\n\n\n\n\n\n\n","source":"_posts/2022/10/flowableåŸºç¡€ç¯‡.md","raw":"---\ntitle: flowableåŸºç¡€ç¯‡\ndate: 2022-10-19 23:50:41\ntags: [BPMN,Flowable]\ncategories: [ç¬”è®°]\n---\n# flowableåŸºç¡€ç¯‡\n> Lectureï¼šæ³¢æ³¢è€å¸ˆ\n\n\n# Flowableä»‹ç»\n\nFlowableæ˜¯BPMNçš„ä¸€ä¸ªåŸºäºjavaçš„è½¯ä»¶å®ç°ï¼Œä¸è¿‡Flowableä¸ä»…ä»…åŒ…æ‹¬BPMNï¼Œè¿˜æœ‰DMNå†³ç­–è¡¨å’ŒCMMN Caseç®¡ç†å¼•æ“ï¼Œå¹¶ä¸”æœ‰è‡ªå·±çš„ç”¨æˆ·ç®¡ç†ã€å¾®æœåŠ¡APIç­‰ä¸€ç³»åˆ—åŠŸèƒ½ï¼Œæ˜¯ä¸€ä¸ªæœåŠ¡å¹³å°ã€‚\n\n![image-20220317101115398](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn\\image-20220317101115398.png)\n\n\n\n\n\n# FlowableåŸºç¡€\n\nå®˜æ–¹æ‰‹å†Œï¼šhttps://tkjohn.github.io/flowable-userguide/#_introduction\n\n## åˆ›å»ºProcessEngine\n\nåˆ›å»ºä¸€ä¸ªåŸºæœ¬çš„mavenå·¥ç¨‹ï¼Œå¯ä»¥æ˜¯Eclipseä¹Ÿå¯ä»¥æ˜¯å…¶ä»–IDEAã€‚ç„¶åæ·»åŠ ä¸¤ä¸ªä¾èµ–\n\n* Flowableæµç¨‹å¼•æ“ã€‚ä½¿æˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªProcessEngineæµç¨‹å¼•æ“å¯¹è±¡ï¼Œå¹¶è®¿é—®Flowable APIã€‚\n* ä¸€ä¸ªæ˜¯MySQLçš„æ•°æ®åº“é©±åŠ¨\n\nåœ¨*pom.xml*æ–‡ä»¶ä¸­æ·»åŠ ä¸‹åˆ—è¡Œï¼š\n\n```xml\n<dependency>\n    <groupId>org.flowable</groupId>\n    <artifactId>flowable-engine</artifactId>\n    <version>6.3.0</version>\n</dependency>\n<dependency>\n    <groupId>mysql</groupId>\n    <artifactId>mysql-connector-java</artifactId>\n    <version>8.0.21</version>\n</dependency>\n```\n\nç„¶ååˆ›å»ºä¸€ä¸ªæ™®é€šçš„Javaç±»ï¼Œæ·»åŠ å¯¹åº”çš„mainæ–¹æ³•ï¼Œé¦–å…ˆè¦åšçš„æ˜¯åˆå§‹åŒ–**ProcessEngine**æµç¨‹å¼•æ“å®ä¾‹ã€‚è¿™æ˜¯ä¸€ä¸ªçº¿ç¨‹å®‰å…¨çš„å¯¹è±¡ï¼Œå› æ­¤é€šå¸¸åªéœ€è¦åœ¨ä¸€ä¸ªåº”ç”¨ä¸­åˆå§‹åŒ–ä¸€æ¬¡ã€‚ *ProcessEngine*ç”±**ProcessEngineConfiguration**å®ä¾‹åˆ›å»ºã€‚è¯¥å®ä¾‹å¯ä»¥é…ç½®ä¸è°ƒæ•´æµç¨‹å¼•æ“çš„è®¾ç½®ã€‚ é€šå¸¸ä½¿ç”¨ä¸€ä¸ªé…ç½®XMLæ–‡ä»¶åˆ›å»º*ProcessEngineConfiguration*ï¼Œä½†æ˜¯ï¼ˆåƒåœ¨è¿™é‡Œåšçš„ä¸€æ ·ï¼‰ä¹Ÿå¯ä»¥ç¼–ç¨‹æ–¹å¼åˆ›å»ºå®ƒã€‚ *ProcessEngineConfiguration*æ‰€éœ€çš„æœ€å°é…ç½®ï¼Œæ˜¯æ•°æ®åº“JDBCè¿æ¥ï¼š\n\n```java\npublic static void main(String[] args) {\n    ProcessEngineConfiguration cfg = new StandaloneProcessEngineConfiguration()\n        .setJdbcUrl(\"jdbc:mysql://localhost:3306/flowable-learn?serverTimezone=UTC\")\n        .setJdbcUsername(\"root\")\n        .setJdbcPassword(\"123456\")\n        .setJdbcDriver(\"com.mysql.cj.jdbc.Driver\")\n        .setDatabaseSchemaUpdate(ProcessEngineConfiguration.DB_SCHEMA_UPDATE_TRUE);\n    ProcessEngine processEngine = cfg.buildProcessEngine();\n}\n```\n\næ³¨æ„åœ¨mysql8.0ä¸­æ‰§è¡Œå¯èƒ½å‡ºç°å¦‚ä¸‹çš„é”™è¯¯\n\n![image-20220316093416477](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316093416477.png)\n\nå‡ºç°è¿™ç§æƒ…å†µåªéœ€è¦åœ¨mysqlçš„è¿æ¥å­—ç¬¦ä¸²ä¸­æ·»åŠ ä¸ŠnullCatalogMeansCurrent=trueï¼Œè®¾ç½®ä¸ºåªæŸ¥å½“å‰è¿æ¥çš„schemaåº“å³å¯ã€‚\n\n```java\n    public static void main(String[] args) {\n        ProcessEngineConfiguration cfg = new StandaloneProcessEngineConfiguration()\n                .setJdbcUrl(\"jdbc:mysql://localhost:3306/flowable-learn1?serverTimezone=UTC&nullCatalogMeansCurrent=true\")\n                .setJdbcUsername(\"root\")\n                .setJdbcPassword(\"123456\")\n                .setJdbcDriver(\"com.mysql.cj.jdbc.Driver\")\n                .setDatabaseSchemaUpdate(ProcessEngineConfiguration.DB_SCHEMA_UPDATE_TRUE);\n        ProcessEngine processEngine = cfg.buildProcessEngine();\n    }\n```\n\nç„¶ååº”ç”¨è¿è¡Œæ²¡æœ‰é—®é¢˜ï¼Œä½†ä¹Ÿæ²¡æœ‰åœ¨æ§åˆ¶å°æä¾›æœ‰ç”¨çš„ä¿¡æ¯ï¼Œåªæœ‰ä¸€æ¡æ¶ˆæ¯æç¤ºæ—¥å¿—æ²¡æœ‰æ­£ç¡®é…ç½®ã€‚Flowableä½¿ç”¨[SLF4J](http://www.slf4j.org/)ä½œä¸ºå†…éƒ¨æ—¥å¿—æ¡†æ¶ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨log4jä½œä¸ºSLF4Jçš„å®ç°ã€‚å› æ­¤åœ¨pom.xmlæ–‡ä»¶ä¸­æ·»åŠ ä¸‹åˆ—ä¾èµ–ï¼š\n\n```xml\n<dependency>\n    <groupId>org.slf4j</groupId>\n    <artifactId>slf4j-api</artifactId>\n    <version>1.7.21</version>\n</dependency>\n<dependency>\n    <groupId>org.slf4j</groupId>\n    <artifactId>slf4j-log4j12</artifactId>\n    <version>1.7.21</version>\n</dependency>\n```\n\nLog4jéœ€è¦ä¸€ä¸ªé…ç½®æ–‡ä»¶ã€‚åœ¨*src/main/resources*æ–‡ä»¶å¤¹ä¸‹æ·»åŠ *log4j.properties*æ–‡ä»¶ï¼Œå¹¶å†™å…¥ä¸‹åˆ—å†…å®¹ï¼š\n\n```properties\nlog4j.rootLogger=DEBUG, CA\n\nlog4j.appender.CA=org.apache.log4j.ConsoleAppender\nlog4j.appender.CA.layout=org.apache.log4j.PatternLayout\nlog4j.appender.CA.layout.ConversionPattern= %d{hh:mm:ss,SSS} [%t] %-5p %c %x - %m%n\n```\n\né‡æ–°è¿è¡Œåº”ç”¨ã€‚åº”è¯¥å¯ä»¥çœ‹åˆ°å…³äºå¼•æ“å¯åŠ¨ä¸åˆ›å»ºæ•°æ®åº“è¡¨ç»“æ„çš„æç¤ºæ—¥å¿—ï¼š\n\n![image-20220316093922199](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316093922199.png)\n\nåŒæ—¶å¯ä»¥çœ‹åˆ°åˆ›å»ºäº†ç›¸å…³çš„è¡¨ç»“æ„åœ¨æ•°æ®åº“ä¸­\n\n![image-20220316093957662](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316093957662.png)\n\nè¿™æ ·å°±å¾—åˆ°äº†ä¸€ä¸ªå¯åŠ¨å¯ç”¨çš„æµç¨‹å¼•æ“ã€‚æ¥ä¸‹æ¥ä¸ºå®ƒæä¾›ä¸€ä¸ªæµç¨‹ï¼\n\n\n\n## éƒ¨ç½²æµç¨‹å®šä¹‰\n\næ¥ä¸‹æ¥æˆ‘ä»¬æ„å»ºä¸€ä¸ªéå¸¸ç®€å•çš„è¯·å‡æµç¨‹ï¼ŒFlowableå¼•æ“éœ€è¦æµç¨‹å®šä¹‰ä¸ºBPMN 2.0æ ¼å¼ï¼Œè¿™æ˜¯ä¸€ä¸ªä¸šç•Œå¹¿æ³›æ¥å—çš„XMLæ ‡å‡†ã€‚ åœ¨Flowableæœ¯è¯­ä¸­ï¼Œæˆ‘ä»¬å°†å…¶ç§°ä¸ºä¸€ä¸ª**æµç¨‹å®šä¹‰(process definition)**ã€‚ä¸€ä¸ª*æµç¨‹å®šä¹‰*å¯ä»¥å¯åŠ¨å¤šä¸ª**æµç¨‹å®ä¾‹(process instance)**ã€‚*æµç¨‹å®šä¹‰*å¯ä»¥çœ‹åšæ˜¯é‡å¤æ‰§è¡Œæµç¨‹çš„è“å›¾ã€‚ åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ*æµç¨‹å®šä¹‰*å®šä¹‰äº†è¯·å‡çš„å„ä¸ªæ­¥éª¤ï¼Œè€Œä¸€ä¸ª*æµç¨‹å®ä¾‹*å¯¹åº”æŸä¸ªé›‡å‘˜æå‡ºçš„ä¸€ä¸ªè¯·å‡ç”³è¯·ã€‚\n\nBPMN 2.0å­˜å‚¨ä¸ºXMLï¼Œå¹¶åŒ…å«å¯è§†åŒ–çš„éƒ¨åˆ†ï¼šä½¿ç”¨æ ‡å‡†æ–¹å¼å®šä¹‰äº†æ¯ä¸ªæ­¥éª¤ç±»å‹ï¼ˆäººå·¥ä»»åŠ¡ï¼Œè‡ªåŠ¨æœåŠ¡è°ƒç”¨ï¼Œç­‰ç­‰ï¼‰å¦‚ä½•å‘ˆç°ï¼Œä»¥åŠå¦‚ä½•äº’ç›¸è¿æ¥ã€‚è¿™æ ·BPMN 2.0æ ‡å‡†ä½¿æŠ€æœ¯äººå‘˜ä¸ä¸šåŠ¡äººå‘˜èƒ½ç”¨åŒæ–¹éƒ½èƒ½ç†è§£çš„æ–¹å¼äº¤æµä¸šåŠ¡æµç¨‹ã€‚\n\næˆ‘ä»¬è¦ä½¿ç”¨çš„æµç¨‹å®šä¹‰ä¸ºï¼š\n\n![getting.started.bpmn.process](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/getting.started.bpmn.process.png)\n\n\n\næµç¨‹å®šä¹‰è¯´æ˜ï¼š\n\n* æˆ‘ä»¬å‡å®šå¯åŠ¨æµç¨‹éœ€è¦æä¾›ä¸€äº›ä¿¡æ¯ï¼Œä¾‹å¦‚é›‡å‘˜åå­—ã€è¯·å‡æ—¶é•¿ä»¥åŠè¯´æ˜ã€‚å½“ç„¶ï¼Œè¿™äº›å¯ä»¥å•ç‹¬å»ºæ¨¡ä¸ºæµç¨‹ä¸­çš„ç¬¬ä¸€æ­¥ã€‚ ä½†æ˜¯å¦‚æœå°†å®ƒä»¬ä½œä¸ºæµç¨‹çš„â€œè¾“å…¥ä¿¡æ¯â€ï¼Œå°±èƒ½ä¿è¯åªæœ‰åœ¨å®é™…è¯·æ±‚æ—¶æ‰ä¼šå»ºç«‹ä¸€ä¸ªæµç¨‹å®ä¾‹ã€‚å¦åˆ™ï¼ˆå°†æäº¤ä½œä¸ºæµç¨‹çš„ç¬¬ä¸€æ­¥ï¼‰ï¼Œç”¨æˆ·å¯èƒ½åœ¨æäº¤ä¹‹å‰æ”¹å˜ä¸»æ„å¹¶å–æ¶ˆï¼Œä½†æµç¨‹å®ä¾‹å·²ç»åˆ›å»ºäº†ã€‚ åœ¨æŸäº›åœºæ™¯ä¸­ï¼Œå°±å¯èƒ½å½±å“é‡è¦çš„æŒ‡æ ‡ï¼ˆä¾‹å¦‚å¯åŠ¨äº†å¤šå°‘ç”³è¯·ï¼Œä½†è¿˜æœªå®Œæˆï¼‰ï¼Œå–å†³äºä¸šåŠ¡ç›®æ ‡ã€‚\n* å·¦ä¾§çš„åœ†åœˆå«åš**å¯åŠ¨äº‹ä»¶(start event)**ã€‚è¿™æ˜¯ä¸€ä¸ªæµç¨‹å®ä¾‹çš„èµ·ç‚¹ã€‚\n* ç¬¬ä¸€ä¸ªçŸ©å½¢æ˜¯ä¸€ä¸ª**ç”¨æˆ·ä»»åŠ¡(user task)**ã€‚è¿™æ˜¯æµç¨‹ä¸­ç”¨æˆ·æ“ä½œçš„æ­¥éª¤ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œç»ç†éœ€è¦æ‰¹å‡†æˆ–é©³å›ç”³è¯·\n* å–å†³äºç»ç†çš„å†³å®šï¼Œ**æ’ä»–ç½‘å…³(exclusive gateway)** (å¸¦å‰çš„è±å½¢)ä¼šå°†æµç¨‹å®ä¾‹è·¯ç”±è‡³æ‰¹å‡†æˆ–é©³å›è·¯å¾„\n* å¦‚æœæ‰¹å‡†ï¼Œåˆ™éœ€è¦å°†ç”³è¯·æ³¨å†Œè‡³æŸä¸ªå¤–éƒ¨ç³»ç»Ÿï¼Œå¹¶è·Ÿç€å¦ä¸€ä¸ªç”¨æˆ·ä»»åŠ¡ï¼Œå°†ç»ç†çš„å†³å®šé€šçŸ¥ç»™ç”³è¯·äººã€‚å½“ç„¶ä¹Ÿå¯ä»¥æ”¹ä¸ºå‘é€é‚®ä»¶ã€‚\n* å¦‚æœé©³å›ï¼Œåˆ™ä¸ºé›‡å‘˜å‘é€ä¸€å°é‚®ä»¶é€šçŸ¥ä»–ã€‚\n\n\n\nä¸€èˆ¬æ¥è¯´ï¼Œè¿™æ ·çš„*æµç¨‹å®šä¹‰*ä½¿ç”¨å¯è§†åŒ–å»ºæ¨¡å·¥å…·å»ºç«‹ï¼Œå¦‚Flowable Designer(Eclipse)æˆ–Flowable Web Modeler(Webåº”ç”¨)ã€‚ä½†åœ¨è¿™é‡Œæˆ‘ä»¬ç›´æ¥æ’°å†™XMLï¼Œä»¥ç†Ÿæ‚‰BPMN 2.0åŠå…¶æ¦‚å¿µã€‚\n\nä¸ä¸Šé¢å±•ç¤ºçš„æµç¨‹å›¾å¯¹åº”çš„BPMN 2.0 XMLåœ¨ä¸‹é¢æ˜¾ç¤ºã€‚è¯·æ³¨æ„è¿™åªåŒ…å«äº†â€œæµç¨‹éƒ¨åˆ†â€ã€‚å¦‚æœä½¿ç”¨å›¾å½¢åŒ–å»ºæ¨¡å·¥å…·ï¼Œå®é™…çš„XMLæ–‡ä»¶è¿˜å°†åŒ…å«â€œå¯è§†åŒ–éƒ¨åˆ†â€ï¼Œç”¨äºæè¿°å›¾å½¢ä¿¡æ¯ï¼Œå¦‚æµç¨‹å®šä¹‰ä¸­å„ä¸ªå…ƒç´ çš„åæ ‡ï¼ˆæ‰€æœ‰çš„å›¾å½¢åŒ–ä¿¡æ¯åŒ…å«åœ¨XMLçš„*BPMNDiagram*æ ‡ç­¾ä¸­ï¼Œä½œä¸º*definitions*æ ‡ç­¾çš„å­å…ƒç´ ï¼‰ã€‚\n\nå°†ä¸‹é¢çš„XMLä¿å­˜åœ¨*src/main/resources*æ–‡ä»¶å¤¹ä¸‹åä¸º*holiday-request.bpmn20.xml*çš„æ–‡ä»¶ä¸­ã€‚\n\n```xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<definitions xmlns=\"http://www.omg.org/spec/BPMN/20100524/MODEL\"\n             xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n             xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\"\n             xmlns:bpmndi=\"http://www.omg.org/spec/BPMN/20100524/DI\"\n             xmlns:omgdc=\"http://www.omg.org/spec/DD/20100524/DC\"\n             xmlns:omgdi=\"http://www.omg.org/spec/DD/20100524/DI\"\n             xmlns:flowable=\"http://flowable.org/bpmn\"\n             typeLanguage=\"http://www.w3.org/2001/XMLSchema\"\n             expressionLanguage=\"http://www.w3.org/1999/XPath\"\n             targetNamespace=\"http://www.flowable.org/processdef\">\n\n    <process id=\"holidayRequest\" name=\"Holiday Request\" isExecutable=\"true\">\n\n        <startEvent id=\"startEvent\"/>\n        <sequenceFlow sourceRef=\"startEvent\" targetRef=\"approveTask\"/>\n\n        <userTask id=\"approveTask\" name=\"Approve or reject request\"/>\n        <sequenceFlow sourceRef=\"approveTask\" targetRef=\"decision\"/>\n\n        <exclusiveGateway id=\"decision\"/>\n        <sequenceFlow sourceRef=\"decision\" targetRef=\"externalSystemCall\">\n            <conditionExpression xsi:type=\"tFormalExpression\">\n                <![CDATA[\n          ${approved}\n        ]]>\n            </conditionExpression>\n        </sequenceFlow>\n        <sequenceFlow  sourceRef=\"decision\" targetRef=\"sendRejectionMail\">\n            <conditionExpression xsi:type=\"tFormalExpression\">\n                <![CDATA[\n          ${!approved}\n        ]]>\n            </conditionExpression>\n        </sequenceFlow>\n\n        <serviceTask id=\"externalSystemCall\" name=\"Enter holidays in external system\"\n                     flowable:class=\"org.flowable.CallExternalSystemDelegate\"/>\n        <sequenceFlow sourceRef=\"externalSystemCall\" targetRef=\"holidayApprovedTask\"/>\n\n        <userTask id=\"holidayApprovedTask\" name=\"Holiday approved\"/>\n        <sequenceFlow sourceRef=\"holidayApprovedTask\" targetRef=\"approveEnd\"/>\n\n        <serviceTask id=\"sendRejectionMail\" name=\"Send out rejection email\"\n                     flowable:class=\"org.flowable.SendRejectionMail\"/>\n        <sequenceFlow sourceRef=\"sendRejectionMail\" targetRef=\"rejectEnd\"/>\n\n        <endEvent id=\"approveEnd\"/>\n\n        <endEvent id=\"rejectEnd\"/>\n    </process>\n\n</definitions>\n```\n\nç°åœ¨æˆ‘ä»¬å·²ç»æœ‰äº†æµç¨‹BPMN 2.0 XMLæ–‡ä»¶ï¼Œä¸‹æ¥éœ€è¦å°†å®ƒ***éƒ¨ç½²(deploy)\\***åˆ°å¼•æ“ä¸­ã€‚*éƒ¨ç½²*ä¸€ä¸ªæµç¨‹å®šä¹‰æ„å‘³ç€ï¼š\n\n* æµç¨‹å¼•æ“ä¼šå°†XMLæ–‡ä»¶å­˜å‚¨åœ¨æ•°æ®åº“ä¸­ï¼Œè¿™æ ·å¯ä»¥åœ¨éœ€è¦çš„æ—¶å€™è·å–å®ƒ\n* æµç¨‹å®šä¹‰è½¬æ¢ä¸ºå†…éƒ¨çš„ã€å¯æ‰§è¡Œçš„å¯¹è±¡æ¨¡å‹ï¼Œè¿™æ ·ä½¿ç”¨å®ƒå°±å¯ä»¥å¯åŠ¨*æµç¨‹å®ä¾‹*ã€‚\n\n\n\n![image-20220317110902636](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220317110902636.png)\n\n\n\nå°†æµç¨‹å®šä¹‰*éƒ¨ç½²*è‡³Flowableå¼•æ“ï¼Œéœ€è¦ä½¿ç”¨*RepositoryService*ï¼Œå…¶å¯ä»¥ä»*ProcessEngine*å¯¹è±¡è·å–ã€‚ä½¿ç”¨*RepositoryService*ï¼Œå¯ä»¥é€šè¿‡XMLæ–‡ä»¶çš„è·¯å¾„åˆ›å»ºä¸€ä¸ªæ–°çš„*éƒ¨ç½²(Deployment)*ï¼Œå¹¶è°ƒç”¨*deploy()*æ–¹æ³•å®é™…æ‰§è¡Œï¼š\n\n```java\n    /**\n     * éƒ¨ç½²æµç¨‹\n     */\n    @Test\n    public void testDeploy(){\n        // é…ç½®æ•°æ®åº“ç›¸å…³ä¿¡æ¯ è·å– ProcessEngineConfiguration\n        ProcessEngineConfiguration cfg = new StandaloneProcessEngineConfiguration()\n                .setJdbcUrl(\"jdbc:mysql://localhost:3306/flowable-learn2?serverTimezone=UTC&nullCatalogMeansCurrent=true\")\n                .setJdbcUsername(\"root\")\n                .setJdbcPassword(\"123456\")\n                .setJdbcDriver(\"com.mysql.cj.jdbc.Driver\")\n                .setDatabaseSchemaUpdate(ProcessEngineConfiguration.DB_SCHEMA_UPDATE_TRUE);\n        // è·å–æµç¨‹å¼•æ“å¯¹è±¡\n        ProcessEngine processEngine = cfg.buildProcessEngine();\n        // éƒ¨ç½²æµç¨‹ è·å–RepositoryServiceå¯¹è±¡\n        RepositoryService repositoryService = processEngine.getRepositoryService();\n        Deployment deployment = repositoryService.createDeployment()// åˆ›å»ºDeploymentå¯¹è±¡\n                .addClasspathResource(\"holiday-request.bpmn20.xml\") // æ·»åŠ æµç¨‹éƒ¨ç½²æ–‡ä»¶\n                .name(\"è¯·æ±‚æµç¨‹\") // è®¾ç½®éƒ¨ç½²æµç¨‹çš„åç§°\n                .deploy(); // æ‰§è¡Œéƒ¨ç½²æ“ä½œ\n        System.out.println(\"deployment.getId() = \" + deployment.getId());\n        System.out.println(\"deployment.getName() = \" + deployment.getName());\n\n    }\n```\n\nç„¶åæ‰§è¡Œè¯¥æ–¹æ³•æ—¥å¿—æ“ä½œæˆåŠŸï¼š\n\n![image-20220316100439048](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316100439048.png)\n\nåœ¨åå°è¡¨ç»“æ„ä¹Ÿå¯ä»¥çœ‹åˆ°ç›¸å…³çš„ä¿¡æ¯\n\nact_re_deployment: æµç¨‹å®šä¹‰éƒ¨ç½²è¡¨ï¼Œæ¯éƒ¨ç½²ä¸€æ¬¡å°±å¢åŠ ä¸€æ¡è®°å½•\n\n![image-20220316100532725](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316100532725.png)\n\n\n\nact_re_procdef ï¼šæµç¨‹å®šä¹‰è¡¨ï¼Œéƒ¨ç½²æ¯ä¸ªæ–°çš„æµç¨‹å®šä¹‰éƒ½ä¼šåœ¨è¿™å¼ è¡¨ä¸­å¢åŠ ä¸€æ¡è®°å½•\n\n![image-20220316100611004](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316100611004.png)\n\n\n\nact_ge_bytearray ï¼šæµç¨‹èµ„æºè¡¨ï¼Œæµç¨‹éƒ¨ç½²çš„ bpmnæ–‡ä»¶å’Œpngå›¾ç‰‡ä¼šä¿å­˜åœ¨è¯¥è¡¨ä¸­\n\n![image-20220316100648362](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316100648362.png)\n\n\n\n\n\næˆ‘ä»¬ç°åœ¨å¯ä»¥é€šè¿‡APIæŸ¥è¯¢éªŒè¯æµç¨‹å®šä¹‰å·²ç»éƒ¨ç½²åœ¨å¼•æ“ä¸­ï¼ˆå¹¶å­¦ä¹ ä¸€äº›APIï¼‰ã€‚é€šè¿‡*RepositoryService*åˆ›å»ºçš„*ProcessDefinitionQuery*å¯¹è±¡å®ç°ã€‚\n\n```java\n/**\n     * æŸ¥çœ‹æµç¨‹å®šä¹‰\n     */\n    @Test\n    public void testDeployQuery(){\n        // é…ç½®æ•°æ®åº“ç›¸å…³ä¿¡æ¯ è·å– ProcessEngineConfiguration\n        ProcessEngineConfiguration cfg = new StandaloneProcessEngineConfiguration()\n                .setJdbcUrl(\"jdbc:mysql://localhost:3306/flowable-learn2?serverTimezone=UTC&nullCatalogMeansCurrent=true\")\n                .setJdbcUsername(\"root\")\n                .setJdbcPassword(\"123456\")\n                .setJdbcDriver(\"com.mysql.cj.jdbc.Driver\")\n                .setDatabaseSchemaUpdate(ProcessEngineConfiguration.DB_SCHEMA_UPDATE_TRUE);\n        // è·å–æµç¨‹å¼•æ“å¯¹è±¡\n        ProcessEngine processEngine = cfg.buildProcessEngine();\n        // éƒ¨ç½²æµç¨‹ è·å–RepositoryServiceå¯¹è±¡\n        RepositoryService repositoryService = processEngine.getRepositoryService();\n        // è·å–æµç¨‹å®šä¹‰å¯¹è±¡\n        ProcessDefinition processDefinition = repositoryService.createProcessDefinitionQuery()\n                .deploymentId(\"2501\")\n                .singleResult();\n        System.out.println(\"processDefinition.getId() = \" + processDefinition.getId());\n        System.out.println(\"processDefinition.getName() = \" + processDefinition.getName());\n        System.out.println(\"processDefinition.getDeploymentId() = \" + processDefinition.getDeploymentId());\n        System.out.println(\"processDefinition.getDescription() = \" + processDefinition.getDescription());\n\n    }\n```\n\nè¾“å‡ºç»“æœä¸ºï¼š\n\n```txt\nprocessDefinition.getId() = holidayRequest:2:2503\nprocessDefinition.getName() = Holiday Request\nprocessDefinition.getDeploymentId() = 2501\nprocessDefinition.getDescription() = null\n```\n\n\n\n## å¯åŠ¨æµç¨‹å®ä¾‹\n\nç°åœ¨å·²ç»åœ¨æµç¨‹å¼•æ“ä¸­*éƒ¨ç½²*äº†æµç¨‹å®šä¹‰ï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨è¿™ä¸ª*æµç¨‹å®šä¹‰*ä½œä¸ºâ€œæ¨¡æ¿â€å¯åŠ¨*æµç¨‹å®ä¾‹*ã€‚\n\n![image-20220316102638015](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316102638015.png)\n\nè¦å¯åŠ¨æµç¨‹å®ä¾‹ï¼Œéœ€è¦æä¾›ä¸€äº›åˆå§‹åŒ–*æµç¨‹å˜é‡*ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œå¯ä»¥é€šè¿‡å‘ˆç°ç»™ç”¨æˆ·çš„è¡¨å•ï¼Œæˆ–è€…åœ¨æµç¨‹ç”±å…¶ä»–ç³»ç»Ÿè‡ªåŠ¨è§¦å‘æ—¶é€šè¿‡REST APIï¼Œæ¥è·å–è¿™äº›å˜é‡ã€‚åœ¨è¿™ä¸ªä¾‹å­é‡Œï¼Œæˆ‘ä»¬ç®€åŒ–ç›´æ¥åœ¨ä»£ç ä¸­å®šä¹‰äº†ï¼Œæˆ‘ä»¬ä½¿ç”¨*RuntimeService*å¯åŠ¨ä¸€ä¸ª*æµç¨‹å®ä¾‹*ã€‚\n\n```java\n    /**\n     * å¯åŠ¨æµç¨‹å®ä¾‹\n     */\n    @Test\n    public void testRunProcess(){\n        // é…ç½®æ•°æ®åº“ç›¸å…³ä¿¡æ¯ è·å– ProcessEngineConfiguration\n        ProcessEngineConfiguration cfg = new StandaloneProcessEngineConfiguration()\n                .setJdbcUrl(\"jdbc:mysql://localhost:3306/flowable-learn2?serverTimezone=UTC&nullCatalogMeansCurrent=true\")\n                .setJdbcUsername(\"root\")\n                .setJdbcPassword(\"123456\")\n                .setJdbcDriver(\"com.mysql.cj.jdbc.Driver\")\n                .setDatabaseSchemaUpdate(ProcessEngineConfiguration.DB_SCHEMA_UPDATE_TRUE);\n        // è·å–æµç¨‹å¼•æ“å¯¹è±¡\n        ProcessEngine processEngine = cfg.buildProcessEngine();\n        // å¯åŠ¨æµç¨‹å®ä¾‹é€šè¿‡ RuntimeService å¯¹è±¡\n        RuntimeService runtimeService = processEngine.getRuntimeService();\n        // æ„å»ºæµç¨‹å˜é‡\n        Map<String,Object> variables = new HashMap<>();\n        variables.put(\"employee\",\"å¼ ä¸‰\") ;// è°ç”³è¯·è¯·å‡\n        variables.put(\"nrOfHolidays\",3); // è¯·å‡ å¤©å‡\n        variables.put(\"description\",\"å·¥ä½œç´¯äº†ï¼Œæƒ³å‡ºå»ç©ç©\"); // è¯·å‡çš„åŸå› \n        // å¯åŠ¨æµç¨‹å®ä¾‹ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æµç¨‹å®šä¹‰çš„id\n        ProcessInstance processInstance = runtimeService\n                .startProcessInstanceByKey(\"holidayRequest\", variables);// å¯åŠ¨æµç¨‹å®ä¾‹\n        // è¾“å‡ºç›¸å…³çš„æµç¨‹å®ä¾‹ä¿¡æ¯\n        System.out.println(\"æµç¨‹å®šä¹‰çš„IDï¼š\" + processInstance.getProcessDefinitionId());\n        System.out.println(\"æµç¨‹å®ä¾‹çš„IDï¼š\" + processInstance.getId());\n        System.out.println(\"å½“å‰æ´»åŠ¨çš„IDï¼š\" + processInstance.getActivityId());\n    }\n```\n\nå¯åŠ¨æˆåŠŸï¼Œè¾“å‡ºç»“æœå¦‚ä¸‹ï¼š\n\n```txt\næµç¨‹å®šä¹‰çš„IDï¼šholidayRequest:2:2503\næµç¨‹å®ä¾‹çš„IDï¼š5001\nå½“å‰æ´»åŠ¨çš„IDï¼šnull\n```\n\nå¯¹åº”çš„æµç¨‹å®ä¾‹IDä¸ºï¼š5001\n\nå¯åŠ¨æµç¨‹å®ä¾‹æ¶‰åŠåˆ°çš„è¡¨ç»“æ„ï¼š\n\n* act_hi_actinst æµç¨‹å®ä¾‹æ‰§è¡Œå†å²\n* act_hi_identitylink æµç¨‹çš„å‚ä¸ç”¨æˆ·çš„å†å²ä¿¡æ¯\n* act_hi_procinst æµç¨‹å®ä¾‹å†å²ä¿¡æ¯\n* act_hi_taskinst æµç¨‹ä»»åŠ¡å†å²ä¿¡æ¯\n* act_ru_execution æµç¨‹æ‰§è¡Œä¿¡æ¯\n* act_ru_identitylink æµç¨‹çš„å‚ä¸ç”¨æˆ·ä¿¡æ¯\n* act_ru_task ä»»åŠ¡ä¿¡æ¯\n\n\n\n## æŸ¥çœ‹ä»»åŠ¡\n\nä¸Šé¢å‘˜å·¥å‘èµ·äº†ä¸€ä¸ªè¯·å‡æµç¨‹ï¼Œæ¥ä¸‹æ¥å°±ä¼šæµè½¬åˆ°æ€»ç»ç†è¿™å„¿æ¥å¤„ç†ï¼Œä¹‹å‰æˆ‘ä»¬æ²¡æœ‰æŒ‡å®šç»ç†è¿™çš„å¤„ç†äººï¼Œæˆ‘ä»¬å¯ä»¥åŠ ä¸€ä¸ª\n\n![image-20220316110406801](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316110406801.png)\n\n\n\nç„¶åæˆ‘ä»¬æ¥æŸ¥çœ‹ä¸‹lisiçš„ä»»åŠ¡\n\n```java\n    /**\n     * æŸ¥çœ‹ä»»åŠ¡\n     */\n    @Test\n    public void testQueryTask(){\n        // é…ç½®æ•°æ®åº“ç›¸å…³ä¿¡æ¯ è·å– ProcessEngineConfiguration\n        ProcessEngineConfiguration cfg = new StandaloneProcessEngineConfiguration()\n                .setJdbcUrl(\"jdbc:mysql://localhost:3306/flowable-learn2?serverTimezone=UTC&nullCatalogMeansCurrent=true\")\n                .setJdbcUsername(\"root\")\n                .setJdbcPassword(\"123456\")\n                .setJdbcDriver(\"com.mysql.cj.jdbc.Driver\")\n                .setDatabaseSchemaUpdate(ProcessEngineConfiguration.DB_SCHEMA_UPDATE_TRUE);\n        // è·å–æµç¨‹å¼•æ“å¯¹è±¡\n        ProcessEngine processEngine = cfg.buildProcessEngine();\n        TaskService taskService = processEngine.getTaskService();\n        List<Task> list = taskService.createTaskQuery()\n                .processDefinitionKey(\"holidayRequestNew\")\n                .taskAssignee(\"lisi\")\n                .list();\n        for (Task task : list) {\n            System.out.println(\"task.getProcessDefinitionId() = \" + task.getProcessDefinitionId());\n            System.out.println(\"task.getId() = \" + task.getId());\n            System.out.println(\"task.getAssignee() = \" + task.getAssignee());\n            System.out.println(\"task.getName() = \" + task.getName());\n        }\n    }\n```\n\nè¾“å‡ºç»“æœä¸ºï¼š\n\n```txt\ntask.getProcessDefinitionId() = holidayRequestNew:1:10003\ntask.getId() = 12508\ntask.getAssignee() = lisi\ntask.getName() = Approve or reject request\n```\n\n\n\n## å®Œæˆä»»åŠ¡\n\nç°åœ¨æå››è¿™ä¸ªè§’è‰²å¯ä»¥æ¥å®Œæˆå½“å‰çš„ä»»åŠ¡äº†\n\n![image-20220316111124019](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316111124019.png)\n\n\n\nåœ¨æ­¤å¤„æˆ‘ä»¬ç›´æ¥è§£å†³æ‰è¿™ä¸ªè¯·å‡ï¼Œç„¶åä¼šèµ°å‘é€æ‹’ç»é‚®ä»¶çš„æµç¨‹ï¼Œè¿™å—æˆ‘ä»¬éœ€è¦ç”¨åˆ°JavaDelegateæ¥è§¦å‘ã€‚\n\n![image-20220316111253702](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316111253702.png)\n\n\n\næˆ‘ä»¬å®šä¹‰è¿™æ ·ä¸€ä¸ªJavaç±»\n\n```java\npublic class SendRejectionMail implements JavaDelegate {\n    /**\n     * è§¦å‘å‘é€é‚®ä»¶çš„æ“ä½œ\n     * @param delegateExecution\n     */\n    @Override\n    public void execute(DelegateExecution delegateExecution) {\n        System.out.println(\"è¯·å‡è¢«æ‹’ç»,,,å®‰å¿ƒå·¥ä½œå§\");\n    }\n}\n```\n\nç„¶åæ¥å®Œæˆä»»åŠ¡\n\n```java\n    /**\n     * å®Œæˆä»»åŠ¡\n     */\n    @Test\n    public void testCompleteTask(){\n        // é…ç½®æ•°æ®åº“ç›¸å…³ä¿¡æ¯ è·å– ProcessEngineConfiguration\n        ProcessEngineConfiguration cfg = new StandaloneProcessEngineConfiguration()\n                .setJdbcUrl(\"jdbc:mysql://localhost:3306/flowable-learn2?serverTimezone=UTC&nullCatalogMeansCurrent=true\")\n                .setJdbcUsername(\"root\")\n                .setJdbcPassword(\"123456\")\n                .setJdbcDriver(\"com.mysql.cj.jdbc.Driver\")\n                .setDatabaseSchemaUpdate(ProcessEngineConfiguration.DB_SCHEMA_UPDATE_TRUE);\n        // è·å–æµç¨‹å¼•æ“å¯¹è±¡\n        ProcessEngine processEngine = cfg.buildProcessEngine();\n        TaskService taskService = processEngine.getTaskService();\n        Task task = taskService.createTaskQuery()\n                .processDefinitionKey(\"holidayRequestNew\")\n                .taskAssignee(\"lisi\")\n                .singleResult();\n        // æ·»åŠ æµç¨‹å˜é‡\n        Map<String,Object> variables = new HashMap<>();\n        variables.put(\"approved\",false); // æ‹’ç»è¯·å‡\n        // å®Œæˆä»»åŠ¡\n        taskService.complete(task.getId(),variables);\n    }\n```\n\nç„¶åå¯ä»¥çœ‹åˆ°JavaDelegateè§¦å‘äº†\n\n![image-20220316111913933](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316111913933.png)\n\n\n\n\n\n## æµç¨‹çš„åˆ é™¤\n\næœ‰äº›æµç¨‹å·²ç»æ²¡æœ‰ç”¨äº†ï¼Œæˆ‘ä»¬éœ€è¦åˆ é™¤æ‰ï¼Œå…¶å®ä¹Ÿéå¸¸ç®€å•\n\n```java\n    /**\n     * åˆ é™¤æµç¨‹\n     */\n    @Test\n    public void testDeleteProcess(){\n        // é…ç½®æ•°æ®åº“ç›¸å…³ä¿¡æ¯ è·å– ProcessEngineConfiguration\n        ProcessEngineConfiguration cfg = new StandaloneProcessEngineConfiguration()\n                .setJdbcUrl(\"jdbc:mysql://localhost:3306/flowable-learn2?serverTimezone=UTC&nullCatalogMeansCurrent=true\")\n                .setJdbcUsername(\"root\")\n                .setJdbcPassword(\"123456\")\n                .setJdbcDriver(\"com.mysql.cj.jdbc.Driver\")\n                .setDatabaseSchemaUpdate(ProcessEngineConfiguration.DB_SCHEMA_UPDATE_TRUE);\n        // è·å–æµç¨‹å¼•æ“å¯¹è±¡\n        ProcessEngine processEngine = cfg.buildProcessEngine();\n        RepositoryService repositoryService = processEngine.getRepositoryService();\n        // åˆ é™¤æµç¨‹å®šä¹‰ï¼Œå¦‚æœè¯¥æµç¨‹å®šä¹‰å·²ç»æœ‰äº†æµç¨‹å®ä¾‹å¯åŠ¨åˆ™åˆ é™¤æ—¶æŠ¥é”™\n        // repositoryService.deleteDeployment(\"1\");\n        // è®¾ç½®ä¸ºTRUE çº§è”åˆ é™¤æµç¨‹å®šä¹‰ï¼ŒåŠæ—¶æµç¨‹æœ‰å®ä¾‹å¯åŠ¨ï¼Œä¹Ÿå¯ä»¥åˆ é™¤ï¼Œè®¾ç½®ä¸ºfalse éçº§è”åˆ é™¤æ“ä½œã€‚\n        repositoryService.deleteDeployment(\"2501\",true);\n\n    }\n```\n\n## æŸ¥çœ‹å†å²ä¿¡æ¯\n\né€‰æ‹©ä½¿ç”¨Flowableè¿™æ ·çš„æµç¨‹å¼•æ“çš„åŸå› ä¹‹ä¸€ï¼Œæ˜¯å®ƒå¯ä»¥è‡ªåŠ¨å­˜å‚¨æ‰€æœ‰æµç¨‹å®ä¾‹çš„**å®¡è®¡æ•°æ®**æˆ–**å†å²æ•°æ®**ã€‚è¿™äº›æ•°æ®å¯ä»¥ç”¨äºåˆ›å»ºæŠ¥å‘Šï¼Œæ·±å…¥å±•ç°ç»„ç»‡è¿è¡Œçš„æƒ…å†µï¼Œç“¶é¢ˆåœ¨å“ªé‡Œï¼Œç­‰ç­‰ã€‚\n\nä¾‹å¦‚ï¼Œå¦‚æœå¸Œæœ›æ˜¾ç¤ºæµç¨‹å®ä¾‹å·²ç»æ‰§è¡Œçš„æ—¶é—´ï¼Œå°±å¯ä»¥ä»*ProcessEngine*è·å–*HistoryService*ï¼Œå¹¶åˆ›å»º*å†å²æ´»åŠ¨(historical activities)*çš„æŸ¥è¯¢ã€‚åœ¨ä¸‹é¢çš„ä»£ç ç‰‡æ®µä¸­ï¼Œå¯ä»¥çœ‹åˆ°æˆ‘ä»¬æ·»åŠ äº†ä¸€äº›é¢å¤–çš„è¿‡æ»¤æ¡ä»¶ï¼š\n\n- åªé€‰æ‹©ä¸€ä¸ªç‰¹å®šæµç¨‹å®ä¾‹çš„æ´»åŠ¨\n- åªé€‰æ‹©å·²å®Œæˆçš„æ´»åŠ¨\n\nç»“æœæŒ‰ç…§ç»“æŸæ—¶é—´æ’åºï¼Œä»£è¡¨å…¶æ‰§è¡Œé¡ºåºã€‚\n\n```java\n/**\n     * æŸ¥çœ‹å†å²\n     */\n    @Test\n    public void testQueryHistory(){\n        // é…ç½®æ•°æ®åº“ç›¸å…³ä¿¡æ¯ è·å– ProcessEngineConfiguration\n        ProcessEngineConfiguration cfg = new StandaloneProcessEngineConfiguration()\n                .setJdbcUrl(\"jdbc:mysql://localhost:3306/flowable-learn2?serverTimezone=UTC&nullCatalogMeansCurrent=true\")\n                .setJdbcUsername(\"root\")\n                .setJdbcPassword(\"123456\")\n                .setJdbcDriver(\"com.mysql.cj.jdbc.Driver\")\n                .setDatabaseSchemaUpdate(ProcessEngineConfiguration.DB_SCHEMA_UPDATE_TRUE);\n        // è·å–æµç¨‹å¼•æ“å¯¹è±¡\n        ProcessEngine processEngine = cfg.buildProcessEngine();\n        HistoryService historyService = processEngine.getHistoryService();\n        List<HistoricActivityInstance> list = historyService.createHistoricActivityInstanceQuery()\n                .processDefinitionId(\"holidayRequestNew:1:10003\")\n                .finished()\n                .orderByHistoricActivityInstanceEndTime().asc()\n                .list();\n        for (HistoricActivityInstance historicActivityInstance : list) {\n            System.out.println(historicActivityInstance.getActivityId() + \" took \"\n                    + historicActivityInstance.getDurationInMillis() + \" milliseconds\");\n        }\n\n    }\n```\n\nè¾“å‡ºç»“æœ\n\n```txt\nstartEvent took 1 milliseconds\napproveTask took 837735 milliseconds\ndecision took 13 milliseconds\nsendRejectionMail took 2 milliseconds\nrejectEnd took 1 milliseconds\n```\n\nå¥½äº†~flowableçš„åŸºæœ¬åº”ç”¨æˆ‘ä»¬å°±å…ˆä»‹ç»åˆ°è¿™é‡Œäº†ã€‚\n\n\n\n\n\n# Flowableæµç¨‹è®¾è®¡å™¨\n\n## Eclipse Designer\n\nFlowableæä¾›äº†åä¸ºFlowable Eclipse Designerçš„Eclipseæ’ä»¶ï¼Œå¯ä»¥ç”¨äºå›¾å½¢åŒ–åœ°å»ºæ¨¡ã€æµ‹è¯•ä¸éƒ¨ç½²BPMN 2.0æµç¨‹ã€‚\n\n### ä¸‹è½½å®‰è£…Eclipse\n\nå»Eclipseå®˜ç½‘ä¸‹è½½å³å¯ï¼šhttps://www.eclipse.org/downloads/packages/release æ³¨æ„2020-09åçš„ç‰ˆæœ¬ä¸å†æ”¯æŒjdk8\n\n![image-20220316202904261](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316202904261.png)\n\nè§£å‹ç¼©å°±å¯ä»¥äº†ï¼Œç„¶åè¿›å…¥è§£å‹ç¼©çš„ç›®å½•\n\n![image-20220316203036602](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316203036602.png)\n\nç›´æ¥å¯åŠ¨å³å¯\n\n![image-20220316203111301](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316203111301.png)\n\n\n\n\n\n![image-20220316203237316](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316203237316.png)\n\n\n\n### å®‰è£…Flowableæ’ä»¶\n\nç„¶åæˆ‘ä»¬å†å®‰è£…ä¸‹Flowableçš„æ’ä»¶ï¼Œé€‰æ‹©**Help â†’ Install New Software**ã€‚åœ¨ä¸‹å›¾é¢æ¿ä¸­ï¼Œç‚¹å‡»*Add*æŒ‰é’®ï¼Œå¹¶å¡«å†™ä¸‹åˆ—å­—æ®µ\n\n- **Name:** Flowable BPMN 2.0 designer\n- **Location:** http://www.flowable.org/designer/update/\n\n\n\n![image-20220316203454281](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316203454281.png)\n\n\n\nè¿™ç§åœ¨çº¿æ›´æ–°çš„æ–¹å¼å·²ç»è¢«å®˜ç½‘ç§»é™¤äº†ï¼Œæ“ä½œä¸äº†\n\n![image-20220316211319931](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316211319931.png)\n\n\n\nè¿™æ—¶æˆ‘ä»¬å°±åªèƒ½é€šè¿‡ç¦»çº¿å®‰è£…çš„æ–¹å¼æ¥å®ç°äº†ï¼Œä¸‹è½½å¯¹åº”çš„ç¦»çº¿æ–‡ä»¶\n\n![image-20220316211405001](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316211405001.png)\n\nå®‰è£…æ­¥éª¤æ¥æ“ä½œï¼Œ\n\n![image-20220316211518520](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316211518520.png)\n\n\n\nç„¶åç»§ç»­ï¼šé€‰æ‹©**Help â†’ Install New Software**\n\n![image-20220316211622115](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316211622115.png)\n\n\n\n![image-20220316211651195](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316211651195.png)\n\nä¸‹ä¸€æ­¥\n\n![image-20220316211729581](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316211729581.png)\n\n\n\nå†ä¸‹ä¸€æ­¥\n\n![image-20220316211802548](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316211802548.png)\n\nç„¶åfinishã€‚å¼¹å‡ºå¦‚ä¸‹çª—å£\n\n![image-20220316212008477](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316212008477.png)\n\né‡å¯å³å¯\n\n\n\n### åˆ›å»ºé¡¹ç›®\n\nç„¶åæˆ‘ä»¬å°±å¯ä»¥åˆ›å»ºä¸€ä¸ªFlowable Projectäº†\n\n![image-20220316212418899](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316212418899.png)\n\nç„¶åæˆ‘ä»¬å¯ä»¥åœ¨src/mian/resources/ çš„ç›®å½•ä¸‹åˆ›å»ºå¯¹åº”çš„æµç¨‹å›¾äº†\n\n![image-20220316212605146](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316212605146.png)\n\n\n\nçœ‹åˆ°å¦‚ä¸‹çš„ç•Œé¢è¯´æ˜æ’ä»¶å®‰è£…æˆåŠŸäº†\n\n![image-20220316212720767](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316212720767.png)\n\n\n\n\n\n### åˆ›å»ºæµç¨‹å›¾\n\nä½¿ç”¨æ»‘æ¿æ¥ç»˜åˆ¶æµç¨‹ï¼Œé€šè¿‡ä»å³ä¾§æŠŠå›¾æ ‡æ‹–æ‹½åˆ°å·¦ä¾§çš„é¢æ¿ï¼Œæœ€ç»ˆçš„æ•ˆæœ\n\n![image-20220316214339678](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316214339678.png)\n\næŒ‡å®šæµç¨‹çš„ä¸»é”®\n\n![image-20220316214430644](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316214430644.png)\n\n\n\næŒ‡å®šä»»åŠ¡çš„è´Ÿè´£äºº\n\nåœ¨Propertiesè§†å›¾ä¸­æŒ‡å®šæ¯ä¸ªä»»åŠ¡èŠ‚ç‚¹çš„è´Ÿè´£äºº\n\n![image-20220316214700887](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316214700887.png)\n\nåˆ›å»ºè¯·å‡å•ï¼šzhangsan\n\nå®¡æ‰¹è¯·å‡å•ï¼šlisi\n\nå½“æˆ‘ä»¬è®¾ç½®å®Œæˆåä¿å­˜æ–‡ä»¶ï¼Œä¼šåŒæ—¶ç”Ÿæˆpngå›¾ç‰‡\n\n![image-20220316214808400](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316214808400.png)\n\næ³¨æ„ï¼šç”Ÿæˆå›¾ç‰‡éœ€è¦å¦‚ä¸‹é…ç½®\n\n![image-20220316214256235](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316214256235.png)\n\n\n\n### éƒ¨ç½²æµç¨‹\n\né¦–å…ˆåœ¨Eclipseä¸­ç”Ÿæˆbaræ–‡ä»¶ï¼Œé€‰ä¸­é¡¹ç›®ç„¶åé¼ æ ‡å³å‡»\n\n![image-20220316215805503](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316215805503.png)\n\nç„¶åä¼šå‘ç°åœ¨é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹å¤šäº†ä¸€ä¸ªdeploymentæ–‡ä»¶å¤¹ï¼Œé‡Œé¢å¤šäº†ä¸€ä¸ªMyProcess.baræ–‡ä»¶\n\n![image-20220316215900052](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316215900052.png)\n\nç„¶åæˆ‘ä»¬å°±å¯ä»¥æŠŠè¿™ä¸ªbaræ–‡ä»¶æ‹·è´åˆ°IDEAä¸­ï¼Œç»§ç»­éƒ¨ç½²çš„æµç¨‹\n\n![image-20220316215945236](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316215945236.png)\n\n\n\nè€Œéƒ¨ç½²çš„ä»£ç å’Œå‰é¢æ²¡å•¥åŒºåˆ«\n\n```java\n    @Test\n    public void testDeploy(){\n        // 1.è·å– ProcessEngine å¯¹è±¡\n        ProcessEngine processEngine = configuration.buildProcessEngine();\n        // 2.è·å–RepositoryService\n        RepositoryService repositoryService = processEngine.getRepositoryService();\n        InputStream in = this.getClass().getClassLoader().getResourceAsStream(\"MyHoliday.bar\");\n        ZipInputStream zipInputStream = new ZipInputStream(in);\n        // 3.å®Œæˆæµç¨‹çš„éƒ¨ç½²æ“ä½œ ZIP æˆ–è€… Baræ–‡ä»¶\n        Deployment deploy = repositoryService.createDeployment()\n               // .addClasspathResource(\"MyHoliday.bar\")// å…³è”è¦éƒ¨ç½²çš„æµç¨‹æ–‡ä»¶\n                .addZipInputStream(zipInputStream)\n                .name(\"XXXå…¬å¸è¯·æ±‚æµç¨‹\")\n                .deploy() ;// éƒ¨ç½²æµç¨‹\n        System.out.println(\"deploy.getId() = \" + deploy.getId());\n        System.out.println(\"deploy.getName() = \" + deploy.getName());\n    }\n```\n\næ‰§è¡ŒåæŸ¥çœ‹è¡¨ç»“æ„ï¼Œç›¸å…³çš„ä¿¡æ¯å°±è¿›å»äº†\n\n![image-20220316220121734](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316220121734.png)\n\n\n\n\n\n\n\nå®Œæ•´çš„æ¡ˆä¾‹ä»£ç ï¼š\n\n```java\npackage com.bobo.flowable.test;\n\nimport org.flowable.engine.*;\nimport org.flowable.engine.history.HistoricActivityInstance;\nimport org.flowable.engine.impl.cfg.StandaloneProcessEngineConfiguration;\nimport org.flowable.engine.repository.Deployment;\nimport org.flowable.engine.runtime.ProcessInstance;\nimport org.flowable.task.api.Task;\nimport org.junit.Before;\nimport org.junit.Test;\n\nimport java.io.InputStream;\nimport java.util.HashMap;\nimport java.util.List;\nimport java.util.Map;\nimport java.util.zip.ZipInputStream;\n\npublic class Test02 {\n\n    ProcessEngineConfiguration configuration = null;\n    @Before\n    public void before(){\n        // è·å–  ProcessEngineConfiguration å¯¹è±¡\n        configuration = new StandaloneProcessEngineConfiguration();\n        // é…ç½® ç›¸å…³çš„æ•°æ®åº“çš„è¿æ¥ä¿¡æ¯\n        configuration.setJdbcDriver(\"com.mysql.cj.jdbc.Driver\");\n        configuration.setJdbcUsername(\"root\");\n        configuration.setJdbcPassword(\"123456\");\n        configuration.setJdbcUrl(\"jdbc:mysql://localhost:3306/flowable-learn?serverTimezone=UTC&nullCatalogMeansCurrent=true\");\n        // å¦‚æœæ•°æ®åº“ä¸­çš„è¡¨ç»“æ„ä¸å­˜åœ¨å°±æ–°å»º\n        configuration.setDatabaseSchemaUpdate(ProcessEngineConfiguration.DB_SCHEMA_UPDATE_TRUE);\n    }\n\n    /**\n     * éƒ¨ç½²æµç¨‹\n     *\n     */\n    @Test\n    public void testDeploy(){\n        // 1.è·å– ProcessEngine å¯¹è±¡\n        ProcessEngine processEngine = configuration.buildProcessEngine();\n        // 2.è·å–RepositoryService\n        RepositoryService repositoryService = processEngine.getRepositoryService();\n        InputStream in = this.getClass().getClassLoader().getResourceAsStream(\"MyHoliday.bar\");\n        ZipInputStream zipInputStream = new ZipInputStream(in);\n        // 3.å®Œæˆæµç¨‹çš„éƒ¨ç½²æ“ä½œ ZIP æˆ–è€… Baræ–‡ä»¶\n        Deployment deploy = repositoryService.createDeployment()\n               // .addClasspathResource(\"MyHoliday.bar\")// å…³è”è¦éƒ¨ç½²çš„æµç¨‹æ–‡ä»¶\n                .addZipInputStream(zipInputStream)\n                .name(\"XXXå…¬å¸è¯·æ±‚æµç¨‹\")\n                .deploy() ;// éƒ¨ç½²æµç¨‹\n        System.out.println(\"deploy.getId() = \" + deploy.getId());\n        System.out.println(\"deploy.getName() = \" + deploy.getName());\n    }\n\n    /**\n     * å¯åŠ¨æµç¨‹å®ä¾‹\n     */\n    @Test\n    public void testRunProcess(){\n        ProcessEngine processEngine = configuration.buildProcessEngine();\n\n        // æˆ‘ä»¬éœ€è¦é€šè¿‡RuntimeServiceæ¥å¯åŠ¨æµç¨‹å®ä¾‹\n        RuntimeService runtimeService = processEngine.getRuntimeService();\n\n        // å¯åŠ¨æµç¨‹å®ä¾‹\n        ProcessInstance holidayRequest = runtimeService.startProcessInstanceById(\"myProcess:1:25004\");\n        System.out.println(\"holidayRequest.getProcessDefinitionId() = \" + holidayRequest.getProcessDefinitionId());\n        System.out.println(\"holidayRequest.getActivityId() = \" + holidayRequest.getActivityId());\n        System.out.println(\"holidayRequest.getId() = \" + holidayRequest.getId());\n    }\n\n    /**\n     * æµ‹è¯•ä»»åŠ¡æŸ¥è¯¢\n     */\n    @Test\n    public void testQueryTask(){\n        ProcessEngine processEngine = configuration.buildProcessEngine();\n        TaskService taskService = processEngine.getTaskService();\n        List<Task> list = taskService.createTaskQuery()\n                .processDefinitionKey(\"myProcess\") // æŒ‡å®šæŸ¥è¯¢çš„æµç¨‹ç¼–ç¨‹\n                .taskAssignee(\"zhangsan\") // æŸ¥è¯¢è¿™ä¸ªä»»åŠ¡çš„å¤„ç†äºº\n                .list();\n        for (Task task : list) {\n            System.out.println(\"task.getProcessDefinitionId() = \" + task.getProcessDefinitionId());\n            System.out.println(\"task.getName() = \" + task.getName());\n            System.out.println(\"task.getAssignee() = \" + task.getAssignee());\n            System.out.println(\"task.getDescription() = \" + task.getDescription());\n            System.out.println(\"task.getId() = \" + task.getId());\n        }\n    }\n\n    /**\n     * å®Œæˆå½“å‰ä»»åŠ¡\n     */\n    @Test\n    public void testCompleteTask(){\n        ProcessEngine processEngine = configuration.buildProcessEngine();\n        TaskService taskService = processEngine.getTaskService();\n        Task task = taskService.createTaskQuery()\n                .processDefinitionKey(\"myProcess\")\n                .taskAssignee(\"lisi\")\n                .singleResult();\n        // åˆ›å»ºæµç¨‹å˜é‡\n\n        if(task != null){\n            // å®Œæˆä»»åŠ¡\n            taskService.complete(task.getId());\n        }\n\n\n    }\n\n    /**\n     * è·å–æµç¨‹ä»»åŠ¡çš„å†å²æ•°æ®\n     */\n    @Test\n    public void testHistory(){\n        ProcessEngine processEngine = configuration.buildProcessEngine();\n        HistoryService historyService = processEngine.getHistoryService();\n        List<HistoricActivityInstance> list = historyService.createHistoricActivityInstanceQuery()\n                .processDefinitionId(\"myProcess:1:25004\")\n                .finished() // æŸ¥è¯¢çš„å†å²è®°å½•çš„çŠ¶æ€æ˜¯å·²ç»å®Œæˆ\n                .orderByHistoricActivityInstanceEndTime().asc() // æŒ‡å®šæ’åºçš„å­—æ®µå’Œé¡ºåº\n                .list();\n        for (HistoricActivityInstance history : list) {\n            System.out.println(history.getActivityName()+\":\"+history.getAssignee()+\"--\"\n                    +history.getActivityId()+\":\" + history.getDurationInMillis()+\"æ¯«ç§’\");\n        }\n\n    }\n}\n\n```\n\n\n\n## Flowable UIåº”ç”¨\n\nFlowableæä¾›äº†å‡ ä¸ªwebåº”ç”¨ï¼Œç”¨äºæ¼”ç¤ºåŠä»‹ç»Flowableé¡¹ç›®æä¾›çš„åŠŸèƒ½ï¼š\n\n- Flowable IDM: èº«ä»½ç®¡ç†åº”ç”¨ã€‚ä¸ºæ‰€æœ‰Flowable UIåº”ç”¨æä¾›å•ç‚¹ç™»å½•è®¤è¯åŠŸèƒ½ï¼Œå¹¶ä¸”ä¸ºæ‹¥æœ‰IDMç®¡ç†å‘˜æƒé™çš„ç”¨æˆ·æä¾›äº†ç®¡ç†ç”¨æˆ·ã€ç»„ä¸æƒé™çš„åŠŸèƒ½ã€‚\n- Flowable Modeler: è®©å…·æœ‰å»ºæ¨¡æƒé™çš„ç”¨æˆ·å¯ä»¥åˆ›å»ºæµç¨‹æ¨¡å‹ã€è¡¨å•ã€é€‰æ‹©è¡¨ä¸åº”ç”¨å®šä¹‰ã€‚\n- Flowable Task: è¿è¡Œæ—¶ä»»åŠ¡åº”ç”¨ã€‚æä¾›äº†å¯åŠ¨æµç¨‹å®ä¾‹ã€ç¼–è¾‘ä»»åŠ¡è¡¨å•ã€å®Œæˆä»»åŠ¡ï¼Œä»¥åŠæŸ¥è¯¢æµç¨‹å®ä¾‹ä¸ä»»åŠ¡çš„åŠŸèƒ½ã€‚\n- Flowable Admin: ç®¡ç†åº”ç”¨ã€‚è®©å…·æœ‰ç®¡ç†å‘˜æƒé™çš„ç”¨æˆ·å¯ä»¥æŸ¥è¯¢BPMNã€DMNã€FormåŠContentå¼•æ“ï¼Œå¹¶æä¾›äº†è®¸å¤šé€‰é¡¹ç”¨äºä¿®æ”¹æµç¨‹å®ä¾‹ã€ä»»åŠ¡ã€ä½œä¸šç­‰ã€‚ç®¡ç†åº”ç”¨é€šè¿‡REST APIè¿æ¥è‡³å¼•æ“ï¼Œå¹¶ä¸Flowable Taskåº”ç”¨åŠFlowable RESTåº”ç”¨ä¸€åŒéƒ¨ç½²ã€‚\n\næ‰€æœ‰å…¶ä»–çš„åº”ç”¨éƒ½éœ€è¦Flowable IDMæä¾›è®¤è¯ã€‚æ¯ä¸ªåº”ç”¨çš„WARæ–‡ä»¶å¯ä»¥éƒ¨ç½²åœ¨ç›¸åŒçš„servletå®¹å™¨ï¼ˆå¦‚Apache Tomcatï¼‰ä¸­ï¼Œä¹Ÿå¯ä»¥éƒ¨ç½²åœ¨ä¸åŒçš„å®¹å™¨ä¸­ã€‚ç”±äºæ¯ä¸ªåº”ç”¨ä½¿ç”¨ç›¸åŒçš„cookieè¿›è¡Œè®¤è¯ï¼Œå› æ­¤åº”ç”¨éœ€è¦è¿è¡Œåœ¨ç›¸åŒçš„åŸŸåä¸‹ã€‚\n\n\n\n### å®‰è£…éƒ¨ç½²\n\nä¸‹è½½Tomcatï¼šhttps://tomcat.apache.org/download-80.cgi å®˜ç½‘ä¸‹è½½åè§£å‹ç¼©åˆ°éä¸­æ–‡ç›®å½•å³å¯ï¼Œç„¶åæ˜¯ä¸‹è½½FlowableUIçš„æ–‡ä»¶ï¼Œåœ¨Flowable6.6ä¹‹åæŠŠFlowableUIä¸­æä¾›çš„å››ä¸ªåŠŸèƒ½åˆå¹¶åˆ°äº†ä¸€èµ·ã€‚\n\n![image-20220318102128672](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220318102128672.png)\n\nç„¶åæŠŠè§£å‹ç¼©åçš„ä¸¤ä¸ªwaråŒ…æ‹·è´åˆ°Tomcatçš„è§£å‹ç¼©çš„webappsç›®å½•ä¸‹\n\n![image-20220318102224330](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220318102224330.png)\n\nTomcatç›®å½•ï¼š\n\n![image-20220318102255188](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220318102255188.png)\n\n\n\n### å¯åŠ¨æœåŠ¡\n\nå¯åŠ¨TomcatæœåŠ¡ï¼Œæ‰§è¡Œstartup.batæ–‡ä»¶\n\n![image-20220318102325924](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220318102325924.png)\n\nå¦‚æœå¯åŠ¨ä¸­å‡ºç°ä¹±ç ä¿®æ”¹Tomcatçš„confç›®å½•ä¸‹çš„ logging.properties æ–‡ä»¶ä¸­çš„ç¼–ç \n\n![image-20220318102446699](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220318102446699.png)\n\n\n\nå¦‚æœä¸€é—ªè€Œè¿‡åˆ™æ£€æŸ¥jdkçš„ç¯å¢ƒå˜é‡é…ç½®ã€‚å¯åŠ¨æˆåŠŸåï¼Œåœ¨æµè§ˆå™¨ä¸­è®¿é—® http://localhost:8080/flowable-ui, é»˜è®¤çš„è´¦å·å¯†ç æ˜¯ admin/test\n\n![image-20220318102609807](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220318102609807.png)\n\n\n\n### ç”¨æˆ·ç®¡ç†\n\næˆ‘ä»¬å…ˆåœ¨ `èº«ä»½ç®¡ç†åº”ç”¨ç¨‹åº` ä¸­åˆ›å»ºç”¨æˆ·å¹¶æˆæƒ\n\n![image-20220318102707368](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220318102707368.png)\n\nåˆ›å»ºç”¨æˆ·\n\n![image-20220318102734238](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220318102734238.png)\n\n\n\n\n\nå¡«å†™è¯¦ç»†ä¿¡æ¯\n\n![image-20220318102817782](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220318102817782.png)\n\n\n\næˆæƒç®¡ç†\n\n![image-20220318102859814](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220318102859814.png)\n\n\n\n\n\n### ç»˜åˆ¶æµç¨‹\n\n\n\nåˆ›å»ºæ–°çš„æµç¨‹\n\n![image-20220318101239742](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220318101239742.png)\n\næµç¨‹å›¾ç•Œé¢\n\n![image-20220318101346692](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220318101346692.png)\n\n\n\n\n\nåˆ›å»ºæµç¨‹ï¼Œåˆ†é…å¤„ç†äºº\n\n![image-20220318101639424](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220318101639424.png)\n\n\n\n\n\n![image-20220318101611564](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220318101611564.png)\n\nç»§ç»­å®Œæˆæµç¨‹å›¾çš„åˆ›å»º\n\n![image-20220318101810272](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220318101810272.png)\n\n\n\n\n\n### éƒ¨ç½²æµç¨‹\n\nç»˜åˆ¶å¥½çš„æµç¨‹å›¾ï¼Œæˆ‘ä»¬åªéœ€è¦ä¸€é”®å¯¼å‡ºå³å¯\n\n![image-20220318103413285](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220318103413285.png)\n\nä¸‹è½½ä¸‹æ¥åæ‹·è´åˆ°é¡¹ç›®çš„resourceç›®å½•ä¸‹å³å¯\n\n![image-20220318103518807](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220318103518807.png)\n\n\n\n\n\nç„¶åå°±æ˜¯æ­£å¸¸çš„æ“ä½œæµç¨‹äº†\n\n\n\n\n\n### FlowableUI æ¼”ç¤º\n\n#### éƒ¨ç½²æµç¨‹\n\nåœ¨FlowableUIä¸­æä¾›äº†æ¼”ç¤ºç¨‹åº\n\n![image-20220318104517967](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220318104517967.png)\n\nåˆ›å»ºä¸€ä¸ªæ–°çš„åº”ç”¨ç¨‹åºï¼Œå¹¶æŒ‡å®šç›¸å…³çš„ä¿¡æ¯\n\n![image-20220318104614784](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220318104614784.png)\n\nåˆ›å»ºåº”ç”¨åéœ€è¦æŒ‡å®šå¯¹åº”çš„æµç¨‹å›¾\n\n![image-20220318104703306](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220318104703306.png)\n\n\n\n![image-20220318104735714](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220318104735714.png)\n\n\n\n\n\n![image-20220318104811812](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220318104811812.png)\n\n\n\nå‘å¸ƒåº”ç”¨ç¨‹åº\n\n![image-20220318105045345](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220318105045345.png)\n\n\n\n\n\n\n\n#### å¯åŠ¨æµç¨‹\n\nå‘å¸ƒäº†åº”ç”¨ç¨‹åºåæˆ‘ä»¬å°±å¯ä»¥æ¥å¯åŠ¨æµç¨‹äº†\n\n![image-20220318105258331](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220318105258331.png)\n\n\n\n![image-20220318105315908](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220318105315908.png)\n\n\n\n\n\n![image-20220318105336107](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220318105336107.png)\n\n\n\n![image-20220318105420011](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220318105420011.png)\n\nç‚¹å‡»æ˜¾ç¤ºå›¾ï¼š\n\n![image-20220318105444672](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220318105444672.png)\n\nä¹Ÿå°±æ˜¯å¯ä»¥çœ‹åˆ°å½“å‰æ˜¯user1æ¥å¤„ç†ï¼Œuser1ç™»å½•åå¯ä»¥çœ‹åˆ°è¦å¤„ç†çš„æµç¨‹ï¼Œuser2ç™»å½•æ˜¯çœ‹ä¸åˆ°çš„ã€‚\n\n![image-20220318105646273](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220318105646273.png)\n\n\n\nç‚¹å‡»å®Œæˆåæµç¨‹å°±å‘ä¸‹ä¸€æ­¥æµè½¬äº†\n\n![image-20220318105727192](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220318105727192.png)\n\n\n\nè¿™æ—¶å†é€šè¿‡user2ç™»å½•ï¼Œå°±å¯ä»¥çœ‹åˆ°å¯¹åº”çš„ä»£åŠçš„ä¿¡æ¯\n\n![image-20220318105808830](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220318105808830.png)\n\n\n\n![image-20220318105848185](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220318105848185.png)\n\nç„¶åç‚¹å‡»å®Œæˆï¼Œé‚£ä¹ˆæ•´ä¸ªæµç¨‹å°±ä»‹ç»äº†\n\n\n\n\n\n\n\n# FlowableåŸºç¡€è¡¨ç»“æ„\n\n## è¡¨ç»“æ„è®²è§£\n\nå·¥ä½œæµç¨‹çš„ç›¸å…³æ“ä½œéƒ½æ˜¯æ“ä½œå­˜å‚¨åœ¨å¯¹åº”çš„è¡¨ç»“æ„ä¸­ï¼Œä¸ºäº†èƒ½æ›´å¥½çš„å¼„æ¸…æ¥šFlowableçš„å®ç°åŸç†å’Œç»†èŠ‚ï¼Œæˆ‘ä»¬æœ‰å¿…è¦å…ˆå¼„æ¸…æ¥šFlowableçš„ç›¸å…³è¡¨ç»“æ„åŠå…¶ä½œç”¨ã€‚åœ¨Flowableä¸­çš„è¡¨ç»“æ„åœ¨åˆå§‹åŒ–çš„æ—¶å€™ä¼šåˆ›å»ºäº”ç±»è¡¨ç»“æ„ï¼Œå…·ä½“å¦‚ä¸‹ï¼š\n\n* **ACT_RE** ï¼š'RE'è¡¨ç¤º repositoryã€‚ è¿™ä¸ªå‰ç¼€çš„è¡¨åŒ…å«äº†æµç¨‹å®šä¹‰å’Œæµç¨‹é™æ€èµ„æº ï¼ˆå›¾ç‰‡ï¼Œè§„åˆ™ï¼Œç­‰ç­‰ï¼‰ã€‚\n* **ACT_RU**ï¼š'RU'è¡¨ç¤º runtimeã€‚ è¿™äº›è¿è¡Œæ—¶çš„è¡¨ï¼ŒåŒ…å«æµç¨‹å®ä¾‹ï¼Œä»»åŠ¡ï¼Œå˜é‡ï¼Œå¼‚æ­¥ä»»åŠ¡ï¼Œç­‰è¿è¡Œä¸­çš„æ•°æ®ã€‚ Flowableåªåœ¨æµç¨‹å®ä¾‹æ‰§è¡Œè¿‡ç¨‹ä¸­ä¿å­˜è¿™äº›æ•°æ®ï¼Œ åœ¨æµç¨‹ç»“æŸæ—¶å°±ä¼šåˆ é™¤è¿™äº›è®°å½•ã€‚ è¿™æ ·è¿è¡Œæ—¶è¡¨å¯ä»¥ä¸€ç›´å¾ˆå°é€Ÿåº¦å¾ˆå¿«ã€‚\n* **ACT_HI**ï¼š'HI'è¡¨ç¤º historyã€‚ è¿™äº›è¡¨åŒ…å«å†å²æ•°æ®ï¼Œæ¯”å¦‚å†å²æµç¨‹å®ä¾‹ï¼Œ å˜é‡ï¼Œä»»åŠ¡ç­‰ç­‰ã€‚\n* **ACT_GE**ï¼š GE è¡¨ç¤º generalã€‚ é€šç”¨æ•°æ®ï¼Œ ç”¨äºä¸åŒåœºæ™¯ä¸‹ \n* **ACT_ID:**   â€™IDâ€™è¡¨ç¤ºidentity(ç»„ç»‡æœºæ„)ã€‚è¿™äº›è¡¨åŒ…å«æ ‡è¯†çš„ä¿¡æ¯ï¼Œå¦‚ç”¨æˆ·ï¼Œç”¨æˆ·ç»„ï¼Œç­‰ç­‰ã€‚\n\n\n\nå…·ä½“çš„è¡¨ç»“æ„çš„å«ä¹‰:\n\n| **è¡¨åˆ†ç±»**   | **è¡¨å**              | **è§£é‡Š**                                           |\n| ------------ | --------------------- | -------------------------------------------------- |\n| ä¸€èˆ¬æ•°æ®     |                       |                                                    |\n|              | [ACT_GE_BYTEARRAY]    | é€šç”¨çš„æµç¨‹å®šä¹‰å’Œæµç¨‹èµ„æº                           |\n|              | [ACT_GE_PROPERTY]     | ç³»ç»Ÿç›¸å…³å±æ€§                                       |\n| æµç¨‹å†å²è®°å½• |                       |                                                    |\n|              | [ACT_HI_ACTINST]      | å†å²çš„æµç¨‹å®ä¾‹                                     |\n|              | [ACT_HI_ATTACHMENT]   | å†å²çš„æµç¨‹é™„ä»¶                                     |\n|              | [ACT_HI_COMMENT]      | å†å²çš„è¯´æ˜æ€§ä¿¡æ¯                                   |\n|              | [ACT_HI_DETAIL]       | å†å²çš„æµç¨‹è¿è¡Œä¸­çš„ç»†èŠ‚ä¿¡æ¯                         |\n|              | [ACT_HI_IDENTITYLINK] | å†å²çš„æµç¨‹è¿è¡Œè¿‡ç¨‹ä¸­ç”¨æˆ·å…³ç³»                       |\n|              | [ACT_HI_PROCINST]     | å†å²çš„æµç¨‹å®ä¾‹                                     |\n|              | [ACT_HI_TASKINST]     | å†å²çš„ä»»åŠ¡å®ä¾‹                                     |\n|              | [ACT_HI_VARINST]      | å†å²çš„æµç¨‹è¿è¡Œä¸­çš„å˜é‡ä¿¡æ¯                         |\n| æµç¨‹å®šä¹‰è¡¨   |                       |                                                    |\n|              | [ACT_RE_DEPLOYMENT]   | éƒ¨ç½²å•å…ƒä¿¡æ¯                                       |\n|              | [ACT_RE_MODEL]        | æ¨¡å‹ä¿¡æ¯                                           |\n|              | [ACT_RE_PROCDEF]      | å·²éƒ¨ç½²çš„æµç¨‹å®šä¹‰                                   |\n| è¿è¡Œå®ä¾‹è¡¨   |                       |                                                    |\n|              | [ACT_RU_EVENT_SUBSCR] | è¿è¡Œæ—¶äº‹ä»¶                                         |\n|              | [ACT_RU_EXECUTION]    | è¿è¡Œæ—¶æµç¨‹æ‰§è¡Œå®ä¾‹                                 |\n|              | [ACT_RU_IDENTITYLINK] | è¿è¡Œæ—¶ç”¨æˆ·å…³ç³»ä¿¡æ¯ï¼Œå­˜å‚¨ä»»åŠ¡èŠ‚ç‚¹ä¸å‚ä¸è€…çš„ç›¸å…³ä¿¡æ¯ |\n|              | [ACT_RU_JOB]          | è¿è¡Œæ—¶ä½œä¸š                                         |\n|              | [ACT_RU_TASK]         | è¿è¡Œæ—¶ä»»åŠ¡                                         |\n|              | [ACT_RU_VARIABLE]     | è¿è¡Œæ—¶å˜é‡è¡¨                                       |\n| ç”¨æˆ·ç”¨æˆ·ç»„è¡¨ |                       |                                                    |\n|              | [ACT_ID_BYTEARRAY]    | äºŒè¿›åˆ¶æ•°æ®è¡¨                                       |\n|              | [ACT_ID_GROUP]        | ç”¨æˆ·ç»„ä¿¡æ¯è¡¨                                       |\n|              | [ACT_ID_INFO]         | ç”¨æˆ·ä¿¡æ¯è¯¦æƒ…è¡¨                                     |\n|              | [ACT_ID_MEMBERSHIP]   | äººä¸ç»„å…³ç³»è¡¨                                       |\n|              | [ACT_ID_PRIV]         | æƒé™è¡¨                                             |\n|              | [ACT_ID_PRIV_MAPPING] | ç”¨æˆ·æˆ–ç»„æƒé™å…³ç³»è¡¨                                 |\n|              | [ACT_ID_PROPERTY]     | å±æ€§è¡¨                                             |\n|              | [ACT_ID_TOKEN]        | è®°å½•ç”¨æˆ·çš„tokenä¿¡æ¯                                |\n|              | [ACT_ID_USER]         | ç”¨æˆ·è¡¨                                             |\n\n \n\n\n\n## ProcessEngineè®²è§£\n\n### ç¡¬ç¼–ç çš„æ–¹å¼\n\næˆ‘ä»¬å‰é¢è®²è§£æ¡ˆä¾‹çš„æ—¶å€™æ˜¯é€šè¿‡ProcessEngineConfigurationè¿™ä¸ªé…ç½®ç±»æ¥åŠ è½½çš„ã€‚\n\n```java\n// é…ç½®æ•°æ®åº“ç›¸å…³ä¿¡æ¯ è·å– ProcessEngineConfiguration\nProcessEngineConfiguration cfg = new StandaloneProcessEngineConfiguration()\n    .setJdbcUrl(\"jdbc:mysql://localhost:3306/flowable-learn2?serverTimezone=UTC&nullCatalogMeansCurrent=true\")\n    .setJdbcUsername(\"root\")\n    .setJdbcPassword(\"123456\")\n    .setJdbcDriver(\"com.mysql.cj.jdbc.Driver\")\n    .setDatabaseSchemaUpdate(ProcessEngineConfiguration.DB_SCHEMA_UPDATE_TRUE);\n// è·å–æµç¨‹å¼•æ“å¯¹è±¡\nProcessEngine processEngine = cfg.buildProcessEngine();\n```\n\nè¿™ç§æ–¹å¼ä¼šè°ƒç”¨buildProcessEngine()æ–¹æ³•ï¼Œé‡Œé¢çš„æ ¸å¿ƒä»£ç ä¸ºï¼š\n\n![image-20220319113106848](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220319113106848.png)\n\n\n\n![image-20220319113139646](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220319113139646.png)\n\n\n\n\n\n### é…ç½®æ–‡ä»¶\n\né™¤äº†ä¸Šé¢çš„ç¡¬ç¼–ç çš„æ–¹å¼å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥åœ¨resourcesç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª`flowable.cfg.xml`æ–‡ä»¶ï¼Œæ³¨æ„è¿™ä¸ªåç§°æ˜¯å›ºå®šçš„å“¦ã€‚å†…å®¹å¦‚ä¸‹ï¼š\n\n```xml\n<beans xmlns=\"http://www.springframework.org/schema/beans\"\n       xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n       xsi:schemaLocation=\"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd\">\n    <bean id=\"processEngineConfiguration\"\n          class=\"org.flowable.engine.impl.cfg.StandaloneProcessEngineConfiguration\">\n        <property name=\"jdbcUrl\" value=\"jdbc:mysql://localhost:3306/flow1?allowMultiQueries=true&amp;useUnicode=true&amp;characterEncoding=UTF-8&amp;useSSL=false&amp;serverTimezone=UTC&amp;nullCatalogMeansCurrent=true\" /><property name=\"jdbcDriver\" value=\"com.mysql.cj.jdbc.Driver\" />\n        <property name=\"jdbcUsername\" value=\"root\" />\n        <property name=\"jdbcPassword\" value=\"123456\" />\n        <property name=\"databaseSchemaUpdate\" value=\"true\" />\n        <property name=\"asyncExecutorActivate\" value=\"false\" />\n    </bean>\n</beans>\n```\n\nåœ¨ä¸Šé¢çš„é…ç½®æ–‡ä»¶ä¸­é…ç½®ç›¸å…³çš„ä¿¡æ¯ã€‚æˆ‘ä»¬åœ¨Javaä»£ç ä¸­å°±å¯ä»¥ç®€åŒ–ä¸ºï¼š\n\n```java\n    @Test\n    public void test01(){\n        // è·å–æµç¨‹å¼•æ“å¯¹è±¡\n        ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine();\n        System.out.println(\"processEngine = \" + processEngine);\n    }\n```\n\nå¯ä»¥çœ‹ä¸‹getDefaultProcessEngineçš„æºç ï¼Œåœ¨é‡Œé¢æœ€ç»ˆè¿˜æ˜¯æ‰§è¡Œäº†å’Œç¡¬ç¼–ç ä¸€æ ·çš„ä»£ç \n\n```java\n    public static ProcessEngine getProcessEngine(String processEngineName) {\n        if (!isInitialized()) {\n            init(); // å®Œæˆåˆå§‹åŒ–æ“ä½œ\n        }\n        return processEngines.get(processEngineName);\n    }\n```\n\nè¿›å…¥initæ–¹æ³•\n\n```java\n    public static synchronized void init() {\n        if (!isInitialized()) {\n            if (processEngines == null) {\n                // Create new map to store process-engines if current map is null\n                processEngines = new HashMap<>();\n            }\n            ClassLoader classLoader = ReflectUtil.getClassLoader();\n            Enumeration<URL> resources = null;\n            try {\n                resources = classLoader.getResources(\"flowable.cfg.xml\"); // åŠ è½½flowable.cfg.xmlé…ç½®æ–‡ä»¶\n            } catch (IOException e) {\n                throw new FlowableIllegalArgumentException(\"problem retrieving flowable.cfg.xml resources on the classpath: \" + System.getProperty(\"java.class.path\"), e);\n            }\n\n            // Remove duplicated configuration URL's using set. Some\n            // classloaders may return identical URL's twice, causing duplicate\n            // startups\n            Set<URL> configUrls = new HashSet<>();\n            while (resources.hasMoreElements()) {\n                configUrls.add(resources.nextElement());\n            }\n            for (Iterator<URL> iterator = configUrls.iterator(); iterator.hasNext();) {\n                URL resource = iterator.next();\n                LOGGER.info(\"Initializing process engine using configuration '{}'\", resource.toString());\n                initProcessEngineFromResource(resource); // åˆå§‹åŒ–ProcessEngine\n            }\n\n            try {\n                resources = classLoader.getResources(\"flowable-context.xml\"); // åœ¨æ•´åˆSpringçš„æƒ…å†µä¸‹åŠ è½½è¯¥æ–‡ä»¶\n            } catch (IOException e) {\n                throw new FlowableIllegalArgumentException(\"problem retrieving flowable-context.xml resources on the classpath: \" + System.getProperty(\"java.class.path\"), e);\n            }\n            while (resources.hasMoreElements()) {\n                URL resource = resources.nextElement();\n                LOGGER.info(\"Initializing process engine using Spring configuration '{}'\", resource.toString());\n                initProcessEngineFromSpringResource(resource); // ä»Springçš„èµ„æºæ–‡ä»¶ä¸­å®ŒæˆProcessEngineçš„åˆå§‹åŒ–\n            }\n\n            setInitialized(true);\n        } else {\n            LOGGER.info(\"Process engines already initialized\");\n        }\n    }\n```\n\nåœ¨æºç ä¸­æä¾›äº†å•ç‹¬ä½¿ç”¨å¥½æ•´åˆSpringçš„é…ç½®åŠ è½½æ–¹å¼ã€‚å†è¿›å…¥åˆ°initProcessEngineFromResource(resource)æ–¹æ³•ä¸­ï¼š\n\n![image-20220319114011806](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220319114011806.png)\n\n\n\n![image-20220319114053252](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220319114053252.png)\n\n\n\n![image-20220319114210012](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220319114210012.png)\n\n\n\nè€Œä¸”æˆ‘ä»¬ä¹Ÿå¯ä»¥çœ‹åˆ°ProcessEngineæœ€ç»ˆçš„å®ç°æ˜¯ ProcessEngineImplå¯¹è±¡ã€‚\n\n\n\n### è‡ªå®šä¹‰é…ç½®æ–‡ä»¶\n\næœ€åæˆ‘ä»¬å¦‚æœè¦åŠ è½½è‡ªå®šä¹‰åç§°çš„é…ç½®æ–‡ä»¶å¯ä»¥é€šè¿‡ProcessEngineConfigurationä¸­çš„å¯¹åº”æ„é€ æ–¹æ³•æ¥å®ç°\n\n```java\n    @Test\n    public void test2() throws Exception{\n        ProcessEngineConfiguration configuration = ProcessEngineConfiguration\n                .createProcessEngineConfigurationFromResource(\"flowable.cfg.xml\");\n        ProcessEngine processEngine = configuration.buildProcessEngine();\n        System.out.println(\"processEngine = \" + processEngine);\n    }\n```\n\n\n\n\n\n## ServcieæœåŠ¡æ¥å£\n\nServiceæ˜¯å·¥ä½œæµå¼•æ“æä¾›ç”¨äºè¿›è¡Œå·¥ä½œæµéƒ¨ç½²ã€æ‰§è¡Œã€ç®¡ç†çš„æœåŠ¡æ¥å£ï¼Œæˆ‘ä»¬ä½¿ç”¨è¿™äº›æ¥å£å¯ä»¥å°±æ˜¯æ“ä½œæœåŠ¡å¯¹åº”çš„æ•°æ®è¡¨\n\n\n\n![image-20220319223019186](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220319223019186.png)\n\n\n\n### Serviceåˆ›å»ºæ–¹å¼\n\né€šè¿‡ProcessEngineåˆ›å»ºService\n\næ–¹å¼å¦‚ä¸‹ï¼š\n\n ```java\nRuntimeService runtimeService = processEngine.getRuntimeService();\nRepositoryService repositoryService = processEngine.getRepositoryService();\nTaskService taskService = processEngine.getTaskService();\n// ...\n ```\n\n### Serviceæ€»è§ˆ\n\n| serviceåç§°       | serviceä½œç”¨              |\n| ----------------- | ------------------------ |\n| RepositoryService | Flowableçš„èµ„æºç®¡ç†ç±»     |\n| RuntimeService    | Flowableçš„æµç¨‹è¿è¡Œç®¡ç†ç±» |\n| TaskService       | Flowableçš„ä»»åŠ¡ç®¡ç†ç±»     |\n| HistoryService    | Flowableçš„å†å²ç®¡ç†ç±»     |\n| ManagerService    | Flowableçš„å¼•æ“ç®¡ç†ç±»     |\n\n ç®€å•ä»‹ç»ï¼š\n\n**RepositoryService**\n\næ˜¯activitiçš„èµ„æºç®¡ç†ç±»ï¼Œæä¾›äº†ç®¡ç†å’Œæ§åˆ¶æµç¨‹å‘å¸ƒåŒ…å’Œæµç¨‹å®šä¹‰çš„æ“ä½œã€‚ä½¿ç”¨å·¥ä½œæµå»ºæ¨¡å·¥å…·è®¾è®¡çš„ä¸šåŠ¡æµç¨‹å›¾éœ€è¦ä½¿ç”¨æ­¤serviceå°†æµç¨‹å®šä¹‰æ–‡ä»¶çš„å†…å®¹éƒ¨ç½²åˆ°è®¡ç®—æœºã€‚\n\né™¤äº†éƒ¨ç½²æµç¨‹å®šä¹‰ä»¥å¤–è¿˜å¯ä»¥ï¼šæŸ¥è¯¢å¼•æ“ä¸­çš„å‘å¸ƒåŒ…å’Œæµç¨‹å®šä¹‰ã€‚\n\næš‚åœæˆ–æ¿€æ´»å‘å¸ƒåŒ…ï¼Œå¯¹åº”å…¨éƒ¨å’Œç‰¹å®šæµç¨‹å®šä¹‰ã€‚ æš‚åœæ„å‘³ç€å®ƒä»¬ä¸èƒ½å†æ‰§è¡Œä»»ä½•æ“ä½œäº†ï¼Œæ¿€æ´»æ˜¯å¯¹åº”çš„åå‘æ“ä½œã€‚è·å¾—å¤šç§èµ„æºï¼Œåƒæ˜¯åŒ…å«åœ¨å‘å¸ƒåŒ…é‡Œçš„æ–‡ä»¶ï¼Œ æˆ–å¼•æ“è‡ªåŠ¨ç”Ÿæˆçš„æµç¨‹å›¾ã€‚\n\nè·å¾—æµç¨‹å®šä¹‰çš„pojoç‰ˆæœ¬ï¼Œ å¯ä»¥ç”¨æ¥é€šè¿‡javaè§£ææµç¨‹ï¼Œè€Œä¸å¿…é€šè¿‡xmlã€‚\n\n**RuntimeService**\n\nActivitiçš„æµç¨‹è¿è¡Œç®¡ç†ç±»ã€‚å¯ä»¥ä»è¿™ä¸ªæœåŠ¡ç±»ä¸­è·å–å¾ˆå¤šå…³äºæµç¨‹æ‰§è¡Œç›¸å…³çš„ä¿¡æ¯\n\n**TaskService**\n\nActivitiçš„ä»»åŠ¡ç®¡ç†ç±»ã€‚å¯ä»¥ä»è¿™ä¸ªç±»ä¸­è·å–ä»»åŠ¡çš„ä¿¡æ¯ã€‚\n\n**HistoryService**\n\nFlowableçš„å†å²ç®¡ç†ç±»ï¼Œå¯ä»¥æŸ¥è¯¢å†å²ä¿¡æ¯ï¼Œæ‰§è¡Œæµç¨‹æ—¶ï¼Œå¼•æ“ä¼šä¿å­˜å¾ˆå¤šæ•°æ®ï¼ˆæ ¹æ®é…ç½®ï¼‰ï¼Œæ¯”å¦‚æµç¨‹å®ä¾‹å¯åŠ¨æ—¶é—´ï¼Œä»»åŠ¡çš„å‚ä¸è€…ï¼Œ å®Œæˆä»»åŠ¡çš„æ—¶é—´ï¼Œæ¯ä¸ªæµç¨‹å®ä¾‹çš„æ‰§è¡Œè·¯å¾„ï¼Œç­‰ç­‰ã€‚ è¿™ä¸ªæœåŠ¡ä¸»è¦é€šè¿‡æŸ¥è¯¢åŠŸèƒ½æ¥è·å¾—è¿™äº›æ•°æ®ã€‚\n\n**ManagementService**\n\nActivitiçš„å¼•æ“ç®¡ç†ç±»ï¼Œæä¾›äº†å¯¹Flowable æµç¨‹å¼•æ“çš„ç®¡ç†å’Œç»´æŠ¤åŠŸèƒ½ï¼Œè¿™äº›åŠŸèƒ½ä¸åœ¨å·¥ä½œæµé©±åŠ¨çš„åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨ï¼Œä¸»è¦ç”¨äº Flowable ç³»ç»Ÿçš„æ—¥å¸¸ç»´æŠ¤ã€‚\n\n\n\n\n\n## å›¾æ ‡ä»‹ç»\n\nBPMN 2.0æ˜¯ä¸šåŠ¡æµç¨‹å»ºæ¨¡ç¬¦å·2.0çš„ç¼©å†™ã€‚å®ƒç”±Business Process Management Initiativeè¿™ä¸ªéè¥åˆ©åä¼šåˆ›å»ºå¹¶ä¸æ–­å‘å±•ã€‚ä½œä¸ºä¸€ç§æ ‡è¯†ï¼ŒBPMN 2.0æ˜¯ä½¿ç”¨ä¸€äº›**ç¬¦å·**æ¥æ˜ç¡®ä¸šåŠ¡æµç¨‹è®¾è®¡æµç¨‹å›¾çš„ä¸€æ•´å¥—ç¬¦å·è§„èŒƒï¼Œå®ƒèƒ½å¢è¿›ä¸šåŠ¡å»ºæ¨¡æ—¶çš„æ²Ÿé€šæ•ˆç‡ã€‚ç›®å‰BPMN2.0æ˜¯æœ€æ–°çš„ç‰ˆæœ¬ï¼Œå®ƒç”¨äºåœ¨BPMä¸Šä¸‹æ–‡ä¸­è¿›è¡Œå¸ƒå±€å’Œå¯è§†åŒ–çš„æ²Ÿé€šã€‚æ¥ä¸‹æ¥æˆ‘ä»¬å…ˆæ¥äº†è§£åœ¨æµç¨‹è®¾è®¡ä¸­å¸¸è§çš„ ç¬¦å·ã€‚\n\nBPMN2.0çš„**åŸºæœ¬ç¬¦åˆ**ä¸»è¦åŒ…å«ï¼š\n\n### äº‹ä»¶å›¾æ ‡\n\nåœ¨Flowableä¸­çš„äº‹ä»¶å›¾æ ‡å¯åŠ¨äº‹ä»¶ï¼Œè¾¹ç•Œäº‹ä»¶,ä¸­é—´äº‹ä»¶å’Œç»“æŸäº‹ä»¶.\n\n![image-20220320103803308](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220320103803308.png)\n\n\n\n### æ´»åŠ¨(ä»»åŠ¡)å›¾æ ‡\n\næ´»åŠ¨æ˜¯å·¥ä½œæˆ–ä»»åŠ¡çš„ä¸€ä¸ªé€šç”¨æœ¯è¯­ã€‚ä¸€ä¸ªæ´»åŠ¨å¯ä»¥æ˜¯ä¸€ä¸ªä»»åŠ¡ï¼Œè¿˜å¯ä»¥æ˜¯ä¸€ä¸ªå½“å‰æµç¨‹çš„å­å¤„ç†æµç¨‹ï¼› å…¶æ¬¡ï¼Œä½ è¿˜å¯ä»¥ä¸ºæ´»åŠ¨æŒ‡å®šä¸åŒçš„ç±»å‹ã€‚å¸¸è§æ´»åŠ¨å¦‚ä¸‹:\n\n![image-20220320103929543](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220320103929543.png)\n\n### ç»“æ„å›¾æ ‡\n\nç»“æ„å›¾æ ‡å¯ä»¥çœ‹åšæ˜¯æ•´ä¸ªæµç¨‹æ´»åŠ¨çš„ç»“æ„ï¼Œä¸€ä¸ªæµç¨‹ä¸­å¯ä»¥åŒ…æ‹¬å­æµç¨‹ã€‚å¸¸è§çš„ç»“æ„æœ‰ï¼š\n\n![image-20220320104025737](C:\\Users\\dpb\\AppData\\Roaming\\Typora\\typora-user-images\\image-20220320104025737.png)\n\n\n\n### ç½‘å…³å›¾æ ‡\n\nç½‘å…³ç”¨æ¥å¤„ç†å†³ç­–ï¼Œæœ‰å‡ ç§å¸¸ç”¨ç½‘å…³éœ€è¦äº†è§£ï¼š\n\n![image-20220320104157816](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220320104157816.png)\n\n\n\n\n\n\n\n\n\n## æµç¨‹éƒ¨ç½²è¯¦è§£\n\n### éƒ¨ç½²å®ç°\n\næˆ‘ä»¬å…ˆæ¥çœ‹ä¸‹æµç¨‹éƒ¨ç½²çš„å…·ä½“è¿‡ç¨‹ã€‚ä»£ç å®ç°\n\n```java\n/**\n     * éƒ¨ç½²æµç¨‹\n     */\n    @Test\n    public void test3(){\n        ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine();\n        RepositoryService repositoryService = processEngine.getRepositoryService();\n        Deployment deploy = repositoryService.createDeployment()\n                .addClasspathResource(\"holiday-request-new.bpmn20.xml\")\n                .name(\"è¯·å‡æµç¨‹...\")\n                .category(\"è¯·å‡\") // åˆ†ç±»\n                .tenantId(\"dpb\") // ç§Ÿæˆ·id\n                .deploy();\n        System.out.println(\"deploy.getId() = \" + deploy.getId());\n        System.out.println(\"deploy.getName() = \" + deploy.getName());\n        System.out.println(\"deploy.getCategory() = \" + deploy.getCategory());\n    }\n```\n\n### éƒ¨ç½²æ¶‰åŠè¡¨ç»“æ„\n\næ¶‰åŠåˆ°çš„ä¸‰å¼ è¡¨ï¼š\n\néƒ¨ç½²èµ„æºè¡¨ï¼šact_ge_bytearray\n\n| å­—æ®µ           | åç§°               | å¤‡æ³¨                                                         |\n| -------------- | ------------------ | ------------------------------------------------------------ |\n| ID_            | ä¸»é”®               |                                                              |\n| REV_           | ç‰ˆæœ¬å·             |                                                              |\n| NAME_          | åç§°               | éƒ¨ç½²çš„æ–‡ä»¶åç§°ï¼Œå¦‚ï¼šholiday-request-new.bpmn20.xmlã€holiday-request-new.bpmn20.png |\n| DEPLOYMENT_ID_ | éƒ¨ç½²ID             |                                                              |\n| BYTES_         | å­—èŠ‚ï¼ˆäºŒè¿›åˆ¶æ•°æ®ï¼‰ |                                                              |\n| GENERATED_     | æ˜¯å¦ç³»ç»Ÿç”Ÿæˆ       | 0ä¸ºç”¨æˆ·ä¸Šä¼ ï¼Œ<br/>1ä¸ºç³»ç»Ÿè‡ªåŠ¨ç”Ÿæˆï¼Œ æ¯”å¦‚ç³»ç»Ÿä¼š è‡ªåŠ¨æ ¹æ®xmlç”Ÿ æˆpng |\n\n\n\néƒ¨ç½²IDè¡¨ï¼šact_re_deployment\n\n\n\n| å­—æ®µ               | åç§°           | å¤‡æ³¨ |\n| ------------------ | -------------- | ---- |\n| ID_                | ä¸»é”®           |      |\n| NAME_              | åç§°           |      |\n| CATEGORY_          | åˆ†ç±»           |      |\n| TENANT_ID_         | ç§Ÿæˆ·ID         |      |\n| DEPLOY_TIME_       | éƒ¨ç½²æ—¶é—´       |      |\n| DERIVED_FROM_      | æ¥æºäº         |      |\n| DERIVED_FROM_ROOT_ | æ¥æºäº         |      |\n| ENGINE_VERSION_    | æµç¨‹å¼•æ“çš„ç‰ˆæœ¬ |      |\n\næµç¨‹è¡¨ï¼šact_re_procdef\n\n| å­—æ®µ                    | åç§°             | å¤‡æ³¨                              |\n| ----------------------- | ---------------- | --------------------------------- |\n| ID_                     | ä¸»é”®             |                                   |\n| REV_                    | ç‰ˆæœ¬å·           |                                   |\n| CATEGORY_               | åˆ†ç±»             | æµç¨‹å®šä¹‰çš„Namespaceå°±æ˜¯ç±»åˆ«       |\n| NAME_                   | åç§°             |                                   |\n| KEY_                    | æ ‡è¯†             |                                   |\n| VERSION_                | ç‰ˆæœ¬             |                                   |\n| DEPLOYMENT_ID_          | éƒ¨ç½²ID           |                                   |\n| RESOURCE_NAME_          | èµ„æºåç§°         | æµç¨‹bpmnæ–‡ä»¶åç§°                  |\n| DGRM_RESOURCE_NAME_     | å›¾ç‰‡èµ„æºåç§°     |                                   |\n| DESCRIPTION_            | æè¿°             |                                   |\n| HAS_START_FORM_KEY_     | æ‹¥æœ‰å¼€å§‹è¡¨å•æ ‡è¯† | startèŠ‚ç‚¹æ˜¯å¦å­˜åœ¨formKey  0å¦ 1æ˜¯ |\n| HAS_GRAPHICAL_NOTATION_ | æ‹¥æœ‰å›¾å½¢ä¿¡æ¯     |                                   |\n| SUSPENSION_STATE_       | æŒ‚èµ·çŠ¶æ€         | æš‚åœçŠ¶æ€ 1æ¿€æ´» 2æš‚åœ              |\n| TENANT_ID_              | ç§Ÿæˆ·ID           |                                   |\n|                         |                  |                                   |\n\næ³¨æ„ï¼š\n\nä¸šåŠ¡æµç¨‹å®šä¹‰æ•°æ®è¡¨ã€‚æ­¤è¡¨å’ŒACT_RE_DEPLOYMENTæ˜¯å¤šå¯¹ä¸€çš„å…³ç³»ï¼Œå³ï¼Œä¸€ä¸ªéƒ¨ç½²çš„baråŒ…é‡Œå¯èƒ½åŒ…å«å¤šä¸ªæµç¨‹å®šä¹‰æ–‡ä»¶ï¼Œæ¯ä¸ªæµç¨‹å®šä¹‰æ–‡ä»¶éƒ½ä¼šæœ‰ä¸€æ¡è®°å½•åœ¨ACT_REPROCDEFè¡¨å†…ï¼Œæ¯ä¸ªæµç¨‹å®šä¹‰çš„æ•°æ®ï¼Œéƒ½ä¼šå¯¹äºACT_GE_BYTEARRAYè¡¨å†…çš„ä¸€ä¸ªèµ„æºæ–‡ä»¶å’ŒPNGå›¾ç‰‡æ–‡ä»¶ã€‚å’ŒACT_GE_BYTEARRAYçš„å…³è”æ˜¯é€šè¿‡ç¨‹åºç”¨ACT_GE_BYTEARRAY.NAMEä¸ACT_RE_PROCDEF.NAME_å®Œæˆçš„\n\n\n\n### æŒ‚èµ·å’Œæ¿€æ´»\n\néƒ¨ç½²çš„æµç¨‹é»˜è®¤çš„çŠ¶æ€ä¸ºæ¿€æ´»ï¼Œå¦‚æœæˆ‘ä»¬æš‚æ—¶ä¸æƒ³ä½¿ç”¨è¯¥å®šä¹‰çš„æµç¨‹ï¼Œé‚£ä¹ˆå¯ä»¥æŒ‚èµ·è¯¥æµç¨‹ã€‚å½“ç„¶è¯¥æµç¨‹å®šä¹‰ä¸‹è¾¹æ‰€æœ‰çš„æµç¨‹å®ä¾‹å…¨éƒ¨æš‚åœã€‚\n\næµç¨‹å®šä¹‰ä¸ºæŒ‚èµ·çŠ¶æ€ï¼Œè¯¥æµç¨‹å®šä¹‰å°†ä¸å…è®¸å¯åŠ¨æ–°çš„æµç¨‹å®ä¾‹ï¼ŒåŒæ—¶è¯¥æµç¨‹å®šä¹‰ä¸‹çš„æ‰€æœ‰çš„æµç¨‹å®ä¾‹éƒ½å°†å…¨éƒ¨æŒ‚èµ·æš‚åœæ‰§è¡Œã€‚\n\n```java\n/**\n     * æŒ‚èµ·æµç¨‹\n     */\n    @Test\n    public void test05(){\n        // è·å–æµç¨‹å¼•æ“å¯¹è±¡\n        ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine();\n        RepositoryService repositoryService = processEngine.getRepositoryService();\n        ProcessDefinition processDefinition = repositoryService.createProcessDefinitionQuery()\n                .processDefinitionId(\"holiday:1:4\")\n                .singleResult();\n        // è·å–æµç¨‹å®šä¹‰çš„çŠ¶æ€\n        boolean suspended = processDefinition.isSuspended();\n        System.out.println(\"suspended = \" + suspended);\n        if(suspended){\n            // è¡¨ç¤ºè¢«æŒ‚èµ·\n            System.out.println(\"æ¿€æ´»æµç¨‹å®šä¹‰\");\n            repositoryService.activateProcessDefinitionById(\"holiday:1:4\",true,null);\n        }else{\n            // è¡¨ç¤ºæ¿€æ´»çŠ¶æ€\n            System.out.println(\"æŒ‚èµ·æµç¨‹\");\n            repositoryService.suspendProcessDefinitionById(\"holiday:1:4\",true,null);\n        }\n    }\n```\n\nå…·ä½“çš„å®ç°å…¶å®å°±æ˜¯æ›´æ–°äº†æµç¨‹å®šä¹‰è¡¨ä¸­çš„å­—æ®µ\n\n![image-20220321210010518](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220321210010518.png)\n\nè€Œä¸”é€šè¿‡REV_å­—æ®µæ¥æ§åˆ¶æ•°æ®å®‰å…¨ï¼Œä¹Ÿæ˜¯ä¸€ç§ä¹è§‚é”çš„ä½“ç°äº†ï¼Œå¦‚æœè¦å¯åŠ¨ä¸€ä¸ªå·²ç»æŒ‚èµ·çš„æµç¨‹å°±ä¼šå‡ºç°å¦‚ä¸‹çš„é”™è¯¯\n\n![image-20220321211858122](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220321211858122.png)\n\n\n\n\n\n## å¯åŠ¨æµç¨‹å®ä¾‹\n\nç„¶åæˆ‘ä»¬æ¥çœ‹çœ‹å¯åŠ¨æµç¨‹å®ä¾‹çš„è¿‡ç¨‹ã€‚å®ç°ä»£ç å¦‚ä¸‹ï¼š\n\n```java\n/**\n     * å¯åŠ¨æµç¨‹å®ä¾‹\n     */\n    @Test\n    public void testRunProcess(){\n        // è·å–æµç¨‹å¼•æ“å¯¹è±¡\n        ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine();\n        // å¯åŠ¨æµç¨‹å®ä¾‹é€šè¿‡ RuntimeService å¯¹è±¡\n        RuntimeService runtimeService = processEngine.getRuntimeService();\n        // æ„å»ºæµç¨‹å˜é‡\n        Map<String,Object> variables = new HashMap<>();\n        variables.put(\"employee\",\"å¼ ä¸‰\") ;// è°ç”³è¯·è¯·å‡\n        variables.put(\"nrOfHolidays\",3); // è¯·å‡ å¤©å‡\n        variables.put(\"description\",\"å·¥ä½œç´¯äº†ï¼Œæƒ³å‡ºå»ç©ç©\"); // è¯·å‡çš„åŸå› \n        // å¯åŠ¨æµç¨‹å®ä¾‹ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æµç¨‹å®šä¹‰çš„id\n        ProcessInstance processInstance = runtimeService\n                .startProcessInstanceById(\"holiday:1:4\", variables);// å¯åŠ¨æµç¨‹å®ä¾‹\n        // è¾“å‡ºç›¸å…³çš„æµç¨‹å®ä¾‹ä¿¡æ¯\n        System.out.println(\"æµç¨‹å®šä¹‰çš„IDï¼š\" + processInstance.getProcessDefinitionId());\n        System.out.println(\"æµç¨‹å®ä¾‹çš„IDï¼š\" + processInstance.getId());\n        System.out.println(\"å½“å‰æ´»åŠ¨çš„IDï¼š\" + processInstance.getActivityId());\n    }\n```\n\nå½“æˆ‘ä»¬å¯åŠ¨äº†ä¸€ä¸ªæµç¨‹å®ä¾‹åï¼Œä¼šåœ¨ACT_RU_*å¯¹åº”çš„è¡¨ç»“æ„ä¸­æ“ä½œ,è¿è¡Œæ—¶å®ä¾‹æ¶‰åŠçš„è¡¨ç»“æ„å…±10å¼ ï¼š\n\n* ACT_RU_DEADLETTER_JOB  æ­£åœ¨è¿è¡Œçš„ä»»åŠ¡è¡¨ \n* ACT_RU_EVENT_SUBSCR è¿è¡Œæ—¶äº‹ä»¶ \n* ACT_RU_EXECUTION è¿è¡Œæ—¶æµç¨‹æ‰§è¡Œå®ä¾‹ \n* ACT_RU_HISTORY_JOB  å†å²ä½œä¸šè¡¨ \n* ACT_RU_IDENTITYLINK è¿è¡Œæ—¶ç”¨æˆ·å…³ç³»ä¿¡æ¯ \n* ACT_RU_JOB è¿è¡Œæ—¶ä½œä¸šè¡¨ \n* ACT_RU_SUSPENDED_JOB æš‚åœä½œä¸šè¡¨ \n* ACT_RU_TASK  è¿è¡Œæ—¶ä»»åŠ¡è¡¨ \n* ACT_RU_TIMER_JOB å®šæ—¶ä½œä¸šè¡¨ \n* ACT_RU_VARIABLE  è¿è¡Œæ—¶å˜é‡è¡¨\n\n\n\nå¯åŠ¨ä¸€ä¸ªæµç¨‹å®ä¾‹çš„æ—¶å€™æ¶‰åŠåˆ°çš„è¡¨æœ‰\n\n* ACT_RU_EXECUTION è¿è¡Œæ—¶æµç¨‹æ‰§è¡Œå®ä¾‹ \n* ACT_RU_IDENTITYLINK è¿è¡Œæ—¶ç”¨æˆ·å…³ç³»ä¿¡æ¯ \n* ACT_RU_TASK  è¿è¡Œæ—¶ä»»åŠ¡è¡¨ \n* ACT_RU_VARIABLE  è¿è¡Œæ—¶å˜é‡è¡¨\n\n\n\nACT_RU_EXECUTIONè¡¨ç»“æ„\n\n| å­—æ®µ                  | åç§°                 | å¤‡æ³¨ |\n| --------------------- | -------------------- | ---- |\n| ID_                   | ä¸»é”®                 |      |\n| REV_                  | ç‰ˆæœ¬å·               |      |\n| PROC_INST_ID_         | æµç¨‹å®ä¾‹ID           |      |\n| BUSINESS_KEY_         | ä¸šåŠ¡ä¸»é”®ID           |      |\n| PARENT_ID_            | çˆ¶æ‰§è¡Œæµçš„ID         |      |\n| PROC_DEF_ID_          | æµç¨‹å®šä¹‰çš„æ•°æ®ID     |      |\n| SUPER_EXEC_           |                      |      |\n| ROOT_PROC_INST_ID_    | æµç¨‹å®ä¾‹çš„rootæµç¨‹id |      |\n| ACT_ID_               | èŠ‚ç‚¹å®ä¾‹ID           |      |\n| IS_ACTIVE_            | æ˜¯å¦å­˜æ´»             |      |\n| IS_CONCURRENT_        | æ‰§è¡Œæµæ˜¯å¦æ­£åœ¨å¹¶è¡Œ   |      |\n| IS_SCOPE_             |                      |      |\n| IS_EVENT_SCOPE_       |                      |      |\n| IS_MI_ROOT_           |                      |      |\n| SUSPENSION_STATE_     | æµç¨‹ç»ˆç«¯çŠ¶æ€         |      |\n| CACHED_ENT_STATE_     |                      |      |\n| TENANT_ID_            | ç§Ÿæˆ·ç¼–å·             |      |\n| NAME_                 |                      |      |\n| START_TIME_           | å¼€å§‹æ—¶é—´             |      |\n| START_USER_ID_        | å¼€å§‹çš„ç”¨æˆ·ç¼–å·       |      |\n| LOCK_TIME_            | é”å®šæ—¶é—´             |      |\n| IS_COUNT_ENABLED_     |                      |      |\n| EVT_SUBSCR_COUNT_     |                      |      |\n| TASK_COUNT_           |                      |      |\n| JOB_COUNT_            |                      |      |\n| TIMER_JOB_COUNT_      |                      |      |\n| SUSP_JOB_COUNT_       |                      |      |\n| DEADLETTER_JOB_COUNT_ |                      |      |\n| VAR_COUNT_            |                      |      |\n| ID_LINK_COUNT_        |                      |      |\n\nåˆ›å»ºæµç¨‹å®ä¾‹åå¯¹åº”çš„è¡¨ç»“æ„çš„æ•°æ®\n\n![image-20220322133108405](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220322133108405.png)\n\n![image-20220322133219534](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220322133219534.png)\n\n\n\nACT_RU_TASK  è¿è¡Œæ—¶ä»»åŠ¡è¡¨\n\n| å­—æ®µ              | åç§°                 | å¤‡æ³¨                |\n| ----------------- | -------------------- | ------------------- |\n| ID_               | ä¸»é”®                 |                     |\n| REV_              | ç‰ˆæœ¬å·               |                     |\n| EXECUTION_ID_     | ä»»åŠ¡æ‰€åœ¨çš„æ‰§è¡ŒæµID   |                     |\n| PROC_INST_ID_     | æµç¨‹å®ä¾‹ID           |                     |\n| PROC_DEF_ID_      | æµç¨‹å®šä¹‰æ•°æ®ID       |                     |\n| NAME_             | ä»»åŠ¡åç§°             |                     |\n| PARENT_TASK_ID_   | çˆ¶ä»»åŠ¡ID             |                     |\n| DESCRIPTION_      | è¯´æ˜                 |                     |\n| TASK_DEF_KEY_     | ä»»åŠ¡å®šä¹‰çš„IDå€¼       |                     |\n| OWNER_            | ä»»åŠ¡æ‹¥æœ‰äºº           |                     |\n| ASSIGNEE_         | è¢«æŒ‡æ´¾æ‰§è¡Œè¯¥ä»»åŠ¡çš„äºº |                     |\n| DELEGATION_       | å§”æ‰˜äºº               |                     |\n| PRIORITY_         | ä¼˜å…ˆçº§               |                     |\n| CREATE_TIME_      | åˆ›å»ºæ—¶é—´             |                     |\n| DUE_DATE_         | è€—æ—¶                 |                     |\n| CATEGORY_         | ç±»åˆ«                 |                     |\n| SUSPENSION_STATE_ | æ˜¯å¦æŒ‚èµ·             | 1ä»£è¡¨æ¿€æ´» 2ä»£è¡¨æŒ‚èµ· |\n| TENANT_ID_        | ç§Ÿæˆ·ç¼–å·             |                     |\n| FORM_KEY_         |                      |                     |\n| CLAIM_TIME_       | æ‹¾å–æ—¶é—´             |                     |\n\nåˆ›å»ºæµç¨‹å®ä¾‹åå¯¹åº”çš„è¡¨ç»“æ„çš„æ•°æ®\n\n![image-20220322133307195](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220322133307195.png)\n\n![image-20220322133335326](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220322133335326.png)\n\n\n\nACT_RU_VARIABLE  è¿è¡Œæ—¶å˜é‡è¡¨\n\n| å­—æ®µ          | åç§°                           | å¤‡æ³¨                                 |\n| ------------- | ------------------------------ | ------------------------------------ |\n| ID_           | ä¸»é”®                           |                                      |\n| REV_          | ç‰ˆæœ¬å·                         |                                      |\n| TYPE_         | å‚æ•°ç±»å‹                       | å¯ä»¥æ˜¯åŸºæœ¬çš„ç±»å‹ï¼Œä¹Ÿå¯ä»¥ç”¨æˆ·è‡ªè¡Œæ‰©å±• |\n| NAME_         | å‚æ•°åç§°                       |                                      |\n| EXECUTION_ID_ | å‚æ•°æ‰§è¡ŒID                     |                                      |\n| PROC_INST_ID_ | æµç¨‹å®ä¾‹ID                     |                                      |\n| TASK_ID_      | ä»»åŠ¡ID                         |                                      |\n| BYTEARRAY_ID_ | èµ„æºID                         |                                      |\n| DOUBLE_       | å‚æ•°ä¸ºdoubleï¼Œåˆ™ä¿å­˜åœ¨è¯¥å­—æ®µä¸­ |                                      |\n| LONG_         | å‚æ•°ä¸ºlongï¼Œåˆ™ä¿å­˜åœ¨è¯¥å­—æ®µä¸­   |                                      |\n| TEXT_         | ç”¨æˆ·ä¿å­˜æ–‡æœ¬ç±»å‹çš„å‚æ•°å€¼       |                                      |\n| TEXT2_        | ç”¨æˆ·ä¿å­˜æ–‡æœ¬ç±»å‹çš„å‚æ•°å€¼       |                                      |\n\nåˆ›å»ºæµç¨‹å®ä¾‹åå¯¹åº”çš„è¡¨ç»“æ„çš„æ•°æ®\n\n![image-20220322133406398](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220322133406398.png)\n\n![image-20220322133439827](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220322133439827.png)\n\n\n\nACT_RU_IDENTITYLINK è¿è¡Œæ—¶ç”¨æˆ·å…³ç³»ä¿¡æ¯ \n\n| å­—æ®µ          | åç§°         | å¤‡æ³¨                                                         |\n| ------------- | ------------ | ------------------------------------------------------------ |\n| ID_           | ä¸»é”®         |                                                              |\n| REV_          | ç‰ˆæœ¬å·       |                                                              |\n| GROUP_ID_     | ç”¨æˆ·ç»„ID     |                                                              |\n| TYPE_         | å…³ç³»æ•°æ®ç±»å‹ | assigneeæ”¯é…äºº(ç»„)ã€candidateå€™é€‰äºº(ç»„)ã€owneræ‹¥æœ‰äºº,participantå‚ä¸è€… |\n| USER_ID_      | ç”¨æˆ·ID       |                                                              |\n| TASK_ID_      | ä»»åŠ¡ID       |                                                              |\n| PROC_INST_ID_ | æµç¨‹å®šä¹‰ID   |                                                              |\n| PROC_DEF_ID_  | å±æ€§ID       |                                                              |\n\nåˆ›å»ºæµç¨‹å®ä¾‹åå¯¹åº”çš„è¡¨ç»“æ„çš„æ•°æ®:\n\n![image-20220322133501720](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220322133501720.png)\n\n\n\n\n\n## å¤„ç†æµç¨‹\n\nä¸Šé¢çš„æµç¨‹å·²ç»æµè½¬åˆ°äº†zhangsanè¿™ä¸ªç”¨æˆ·è¿™é‡Œï¼Œç„¶åå¯ä»¥å¼€å§‹å®¡æ‰¹äº†\n\n```java\n// è·å–æµç¨‹å¼•æ“å¯¹è±¡\n        ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine();\n        TaskService taskService = processEngine.getTaskService();\n        Task task = taskService.createTaskQuery()\n                .processDefinitionId(\"holiday:1:4\")\n                .taskAssignee(\"zhangsan\")\n                .singleResult();\n        // æ·»åŠ æµç¨‹å˜é‡\n        Map<String,Object> variables = new HashMap<>();\n        variables.put(\"approved\",false); // æ‹’ç»è¯·å‡\n        // å®Œæˆä»»åŠ¡\n        taskService.complete(task.getId(),variables);\n```\n\nåœ¨æ­£å¸¸å¤„ç†æµç¨‹ä¸­æ¶‰åŠåˆ°çš„è¡¨ç»“æ„\n\n* ACT_RU_EXECUTION è¿è¡Œæ—¶æµç¨‹æ‰§è¡Œå®ä¾‹ \n* ACT_RU_IDENTITYLINK è¿è¡Œæ—¶ç”¨æˆ·å…³ç³»ä¿¡æ¯ \n* ACT_RU_TASK  è¿è¡Œæ—¶ä»»åŠ¡è¡¨ \n* ACT_RU_VARIABLE  è¿è¡Œæ—¶å˜é‡è¡¨\n\nACT_RU_TASK  è¿è¡Œæ—¶ä»»åŠ¡è¡¨ :ä¼šæ–°ç”Ÿæˆä¸€æ¡è®°å½•\n\n![image-20220322135040119](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220322135040119.png)\n\n![image-20220322135125703](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220322135125703.png)\n\nACT_RU_VARIABLE  è¿è¡Œæ—¶å˜é‡è¡¨:ä¼šè®°å½•æ–°çš„æµç¨‹å˜é‡\n\n![image-20220322135204021](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220322135204021.png)\n\n\n\nå½“ç„¶æµç¨‹å®ä¾‹ä¹Ÿå¯ä»¥æŒ‚èµ·\n\n```java\n// 1.è·å–ProcessEngineå¯¹è±¡\nProcessEngine engine = ProcessEngines.getDefaultProcessEngine();\n// 2.è·å–RuntimeService\nRuntimeService runtimeService = engine.getRuntimeService();\n// 3.è·å–æµç¨‹å®ä¾‹å¯¹è±¡\nProcessInstance processInstance = runtimeService.createProcessInstanceQuery()\n    .processInstanceId(\"25001\")\n    .singleResult();\n// 4.è·å–ç›¸å…³çš„çŠ¶æ€æ“ä½œ\nboolean suspended = processInstance.isSuspended();\nString id = processInstance.getId();\nif(suspended){\n    // æŒ‚èµ·--ã€‹æ¿€æ´»\n    runtimeService.activateProcessInstanceById(id);\n    System.out.println(\"æµç¨‹å®šä¹‰ï¼š\" + id + \"ï¼Œå·²æ¿€æ´»\");\n}else{\n    // æ¿€æ´»--ã€‹æŒ‚èµ·\n    runtimeService.suspendProcessInstanceById(id);\n    System.out.println(\"æµç¨‹å®šä¹‰ï¼š\" + id + \"ï¼Œå·²æŒ‚èµ·\");\n}\n```\n\n\n\nå¯åŠ¨ç¬¬äºŒä¸ªæµç¨‹å®ä¾‹åå†æŸ¥çœ‹ç›¸å…³çš„è¡¨ç»“æ„æ—¶ï¼Œå¯¹ä»–ä»¬çš„å…³ç³»ç†è§£ä¼šæ›´åŠ çš„æ¸…æ¥šä¸€äº›\n\nå¯åŠ¨ä¸€ä¸ªæ–°çš„æµç¨‹å®ä¾‹å¯¹åº”çš„å°±ä¼šäº§ç”Ÿä¸¤æ¡è®°å½•\n\n![image-20220322135605252](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220322135605252.png)\n\n\n\nIDENTITYLINKä¸­ä¼šè®°å½•æ¯æ¬¡æµç¨‹æ“ä½œçš„ä¿¡æ¯\n\n![image-20220322135636841](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220322135636841.png)\n\n\n\n![image-20220322135659671](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220322135659671.png)\n\n\n\næµç¨‹å˜é‡æ•°æ®ï¼ŒåŠæ—¶key ç›¸åŒï¼Œä½†æ˜¯å±äºä¸åŒçš„æµç¨‹å®ä¾‹ç›¸äº’é—´ä¹Ÿæ˜¯éš”ç¦»çš„\n\n![image-20220322135719104](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220322135719104.png)\n\n## å®Œæˆä¸€ä¸ªæµç¨‹\n\nç„¶åæˆ‘ä»¬æŠŠç¬¬ä¸€ä¸ªæµç¨‹å¤„ç†å®Œæˆ\n\n```java\nProcessEngine processEngine = cfg.buildProcessEngine();\nTaskService taskService = processEngine.getTaskService();\nTask task = taskService.createTaskQuery()\n    .processDefinitionId(\"holiday:1:4\")\n    .taskAssignee(\"lisi\")\n    .singleResult();\n// æ·»åŠ æµç¨‹å˜é‡\nMap<String,Object> variables = new HashMap<>();\nvariables.put(\"approved\",false); // æ‹’ç»è¯·å‡\n// å®Œæˆä»»åŠ¡\ntaskService.complete(task.getId(),variables);\n```\n\nå¤„ç†å®Œäº†ä¸€ä¸ªå·¥ä½œæµç¨‹åï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹ç›¸å…³çš„è¡¨ç»“æ„ä¿¡æ¯\n\né¦–å…ˆæˆ‘ä»¬ä¼šå‘ç°\n\n* ACT_RU_EXECUTION è¿è¡Œæ—¶æµç¨‹æ‰§è¡Œå®ä¾‹ \n* ACT_RU_IDENTITYLINK è¿è¡Œæ—¶ç”¨æˆ·å…³ç³»ä¿¡æ¯ \n* ACT_RU_TASK  è¿è¡Œæ—¶ä»»åŠ¡è¡¨ \n* ACT_RU_VARIABLE  è¿è¡Œæ—¶å˜é‡è¡¨\n\nè¿™å››å¼ è¡¨ä¸­å¯¹åº”çš„æ•°æ®éƒ½æ²¡æœ‰äº†ï¼Œä¹Ÿå°±æ˜¯è¿™ä¸ªæµç¨‹å·²ç»ä¸æ˜¯è¿è¡Œä¸­çš„æµç¨‹äº†ã€‚ç„¶ååœ¨å¯¹åº”çš„å†å²è¡¨ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ç›¸å…³çš„ä¿¡æ¯\n\n* ACT_HI_ACTINST  å†å²çš„æµç¨‹å®ä¾‹\n\n* ACT_HI_ATTACHMENT å†å²çš„æµç¨‹é™„ä»¶\n* ACT_HI_COMMENT  å†å²çš„è¯´æ˜æ€§ä¿¡æ¯\n* ACT_HI_DETAIL å†å²çš„æµç¨‹è¿è¡Œä¸­çš„ç»†èŠ‚ä¿¡æ¯\n* ACT_HI_IDENTITYLINK å†å²çš„æµç¨‹è¿è¡Œè¿‡ç¨‹ä¸­ç”¨æˆ·å…³ç³»\n* ACT_HI_PROCINST  å†å²çš„æµç¨‹å®ä¾‹\n* ACT_HI_TASKINST  å†å²çš„ä»»åŠ¡å®ä¾‹\n* ACT_HI_VARINST  å†å²çš„æµç¨‹è¿è¡Œä¸­çš„å˜é‡ä¿¡æ¯\n\nåœ¨æˆ‘ä»¬ä¸Šé¢çš„å¤„ç†æµç¨‹çš„è¿‡ç¨‹ä¸­è®¾è®¡åˆ°çš„å†å²è¡¨æœ‰\n\nACT_HI_ACTINST  å†å²çš„æµç¨‹å®ä¾‹\n\n| å­—æ®µ               | åç§°                 | å¤‡æ³¨ |\n| ------------------ | -------------------- | ---- |\n| ID_                | ä¸»é”®                 |      |\n| PROC_DEF_ID_       | æµç¨‹å®šä¹‰ID           |      |\n| PROC_INST_ID_      | æµç¨‹å®ä¾‹ID           |      |\n| EXECUTION_ID_      | æ‰§è¡ŒID               |      |\n| ACT_ID_            | èŠ‚ç‚¹å®ä¾‹ID           |      |\n| TASK_ID_           | ä»»åŠ¡ID               |      |\n| CALL_PROC_INST_ID_ | è°ƒç”¨å¤–éƒ¨çš„æµç¨‹å®ä¾‹ID |      |\n| ACT_NAME_          | èŠ‚ç‚¹åç§°             |      |\n| ACT_TYPE_          | èŠ‚ç‚¹ç±»å‹             |      |\n| ASSIGNEE_          | å¤„ç†äºº               |      |\n| START_TIME_        | å¼€å§‹æ—¶é—´             |      |\n| END_TIME_          | ç»“æŸæ—¶é—´             |      |\n| DURATION_          | è€—æ—¶                 |      |\n| DELETE_REASON_     | åˆ é™¤åŸå›              |      |\n| TENANT_ID_         | ç§Ÿæˆ·ç¼–å·             |      |\n\n![image-20220322141800554](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220322141800554.png)\n\n![image-20220322141825065](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220322141825065.png)\n\n\n\nACT_HI_IDENTITYLINK å†å²çš„æµç¨‹è¿è¡Œè¿‡ç¨‹ä¸­ç”¨æˆ·å…³ç³»\n\n| å­—æ®µ                 | åç§°         | å¤‡æ³¨ |\n| -------------------- | ------------ | ---- |\n| ID_                  | ä¸»é”®         |      |\n| GROUP_ID_            | ç»„ç¼–å·       |      |\n| TYPE_                | ç±»å‹         |      |\n| USER_ID_             | ç”¨æˆ·ç¼–å·     |      |\n| TASK_ID_             | ä»»åŠ¡ç¼–å·     |      |\n| CREATE_TIME_         | åˆ›å»ºæ—¶é—´     |      |\n| PROC_INST_ID_        | æµç¨‹å®ä¾‹ç¼–å· |      |\n| SCOPE_ID_            |              |      |\n| SCOPE_TYPE_          |              |      |\n| SCOPE_DEFINITION_ID_ |              |      |\n|                      |              |      |\n\n\n\n![image-20220322141717826](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220322141717826.png)\n\nACT_HI_PROCINST  å†å²çš„æµç¨‹å®ä¾‹\n\n| å­—æ®µ                       | åç§°         | å¤‡æ³¨ |\n| -------------------------- | ------------ | ---- |\n| ID_                        | ä¸»é”®         |      |\n| PROC_INST_ID_              | æµç¨‹å®ä¾‹ID   |      |\n| BUSINESS_KEY_              | ä¸šåŠ¡ä¸»é”®     |      |\n| PROC_DEF_ID_               | å±æ€§ID       |      |\n| START_TIME_                | å¼€å§‹æ—¶é—´     |      |\n| END_TIME_                  | ç»“æŸæ—¶é—´     |      |\n| DURATION_                  | è€—æ—¶         |      |\n| START_USER_ID_             | èµ·å§‹äºº       |      |\n| START_ACT_ID_              | èµ·å§‹èŠ‚ç‚¹     |      |\n| END_ACT_ID_                | ç»“æŸèŠ‚ç‚¹     |      |\n| SUPER_PROCESS_INSTANCE_ID_ | çˆ¶æµç¨‹å®ä¾‹ID |      |\n| DELETE_REASON_             | åˆ é™¤åŸå›      |      |\n| TENANT_ID_                 | ç§Ÿæˆ·ç¼–å·     |      |\n| NAME_                      | åç§°         |      |\n\n\n\n![image-20220322141855401](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220322141855401.png)\n\n\n\n![image-20220322141912602](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220322141912602.png)\n\n\n\nACT_HI_TASKINST  å†å²çš„ä»»åŠ¡å®ä¾‹\n\n| å­—æ®µ            | åç§°                    | å¤‡æ³¨                                   |\n| --------------- | ----------------------- | -------------------------------------- |\n| ID_             | ä¸»é”®                    |                                        |\n| PROC_DEF_ID_    | æµç¨‹å®šä¹‰ID              |                                        |\n| TASK_DEF_KEY_   | ä»»åŠ¡å®šä¹‰çš„IDå€¼          |                                        |\n| PROC_INST_ID_   | æµç¨‹å®ä¾‹ID              |                                        |\n| EXECUTION_ID_   | æ‰§è¡ŒID                  |                                        |\n| PARENT_TASK_ID_ | çˆ¶ä»»åŠ¡ID                |                                        |\n| NAME_           | åç§°                    |                                        |\n| DESCRIPTION_    | è¯´æ˜                    |                                        |\n| OWNER_          | å®é™…ç­¾æ”¶äºº ä»»åŠ¡çš„æ‹¥æœ‰è€… | ç­¾æ”¶äººï¼ˆé»˜è®¤ä¸ºç©ºï¼Œåªæœ‰åœ¨å§”æ‰˜æ—¶æ‰æœ‰å€¼ï¼‰ |\n| ASSIGNEE_       | è¢«æŒ‡æ´¾æ‰§è¡Œè¯¥ä»»åŠ¡çš„äºº    |                                        |\n| START_TIME_     | å¼€å§‹æ—¶é—´                |                                        |\n| CLAIM_TIME_     | ä»»åŠ¡æ‹¾å–æ—¶é—´            |                                        |\n| END_TIME_       | ç»“æŸæ—¶é—´                |                                        |\n| DURATION_       | è€—æ—¶                    |                                        |\n| DELETE_REASON_  | åˆ é™¤åŸå›                 |                                        |\n| PRIORITY_       | ä¼˜å…ˆçº§åˆ«                |                                        |\n| DUE_DATE_       | è¿‡æœŸæ—¶é—´                |                                        |\n| FORM_KEY_       | èŠ‚ç‚¹å®šä¹‰çš„formkey       |                                        |\n| CATEGORY_       | ç±»åˆ«                    |                                        |\n| TENANT_ID_      | ç§Ÿæˆ·                    |                                        |\n\n![image-20220322142609163](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220322142609163.png)\n\n![image-20220322142650699](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220322142650699.png)\n\n\n\nACT_HI_VARINST  å†å²çš„æµç¨‹è¿è¡Œä¸­çš„å˜é‡ä¿¡æ¯ï¼šæµç¨‹å˜é‡è™½ç„¶åœ¨ä»»åŠ¡å®Œæˆååœ¨æµç¨‹å®ä¾‹è¡¨ä¸­ä¼šåˆ é™¤ï¼Œä½†æ˜¯åœ¨å†å²è¡¨ä¸­è¿˜æ˜¯ä¼šè®°å½•çš„\n\n| å­—æ®µ          | åç§°               | å¤‡æ³¨ |\n| ------------- | ------------------ | ---- |\n| ID_           | ä¸»é”®               |      |\n| PROC_INST_ID_ | æµç¨‹å®ä¾‹ID         |      |\n| EXECUTION_ID_ | æŒ‡å®šID             |      |\n| TASK_ID_      | ä»»åŠ¡ID             |      |\n| NAME_         | åç§°               |      |\n| VAR_TYPE_     | å‚æ•°ç±»å‹           |      |\n| REV_          | æ•°æ®ç‰ˆæœ¬           |      |\n| BYTEARRAY_ID_ | å­—èŠ‚è¡¨ID           |      |\n| DOUBLE_       | å­˜å‚¨doubleç±»å‹æ•°æ® |      |\n| LONG_         | å­˜å‚¨longç±»å‹æ•°æ®   |      |\n| .....         |                    |      |\n\n\n\n![image-20220322142756867](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220322142756867.png)\n\nå¥½äº†ä¸€ä¸ªç›¸å¯¹ç®€å•çš„æµç¨‹å¤„ç†æ¶‰åŠåˆ°çš„ç›¸å…³è¡¨ç»“æ„å†…å®¹å°±ä»‹ç»å®Œäº†\n\n\n\n\n\n\n\n\n\n\n\n\n\n","slug":"flowableåŸºç¡€ç¯‡","published":1,"updated":"2022-11-05T14:16:59.509Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clas9ersq000fdk8f3n0gcqrp","content":"<h1 id=\"flowableåŸºç¡€ç¯‡\"><a href=\"#flowableåŸºç¡€ç¯‡\" class=\"headerlink\" title=\"flowableåŸºç¡€ç¯‡\"></a>flowableåŸºç¡€ç¯‡</h1><blockquote>\n<p>Lectureï¼šæ³¢æ³¢è€å¸ˆ</p>\n</blockquote>\n<h1 id=\"Flowableä»‹ç»\"><a href=\"#Flowableä»‹ç»\" class=\"headerlink\" title=\"Flowableä»‹ç»\"></a>Flowableä»‹ç»</h1><p>Flowableæ˜¯BPMNçš„ä¸€ä¸ªåŸºäºjavaçš„è½¯ä»¶å®ç°ï¼Œä¸è¿‡Flowableä¸ä»…ä»…åŒ…æ‹¬BPMNï¼Œè¿˜æœ‰DMNå†³ç­–è¡¨å’ŒCMMN Caseç®¡ç†å¼•æ“ï¼Œå¹¶ä¸”æœ‰è‡ªå·±çš„ç”¨æˆ·ç®¡ç†ã€å¾®æœåŠ¡APIç­‰ä¸€ç³»åˆ—åŠŸèƒ½ï¼Œæ˜¯ä¸€ä¸ªæœåŠ¡å¹³å°ã€‚</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220317101115398.png\"\n                      alt=\"image-20220317101115398\"\n                ></p>\n<h1 id=\"FlowableåŸºç¡€\"><a href=\"#FlowableåŸºç¡€\" class=\"headerlink\" title=\"FlowableåŸºç¡€\"></a>FlowableåŸºç¡€</h1><p>å®˜æ–¹æ‰‹å†Œï¼š<a class=\"link\"   href=\"https://tkjohn.github.io/flowable-userguide/#_introduction\" >https://tkjohn.github.io/flowable-userguide/#_introduction<i class=\"fas fa-external-link-alt\"></i></a></p>\n<h2 id=\"åˆ›å»ºProcessEngine\"><a href=\"#åˆ›å»ºProcessEngine\" class=\"headerlink\" title=\"åˆ›å»ºProcessEngine\"></a>åˆ›å»ºProcessEngine</h2><p>åˆ›å»ºä¸€ä¸ªåŸºæœ¬çš„mavenå·¥ç¨‹ï¼Œå¯ä»¥æ˜¯Eclipseä¹Ÿå¯ä»¥æ˜¯å…¶ä»–IDEAã€‚ç„¶åæ·»åŠ ä¸¤ä¸ªä¾èµ–</p>\n<ul>\n<li>Flowableæµç¨‹å¼•æ“ã€‚ä½¿æˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªProcessEngineæµç¨‹å¼•æ“å¯¹è±¡ï¼Œå¹¶è®¿é—®Flowable APIã€‚</li>\n<li>ä¸€ä¸ªæ˜¯MySQLçš„æ•°æ®åº“é©±åŠ¨</li>\n</ul>\n<p>åœ¨<em>pom.xml</em>æ–‡ä»¶ä¸­æ·»åŠ ä¸‹åˆ—è¡Œï¼š</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.flowable<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>flowable-engine<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>6.3.0<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>mysql<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>mysql-connector-java<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>8.0.21<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>ç„¶ååˆ›å»ºä¸€ä¸ªæ™®é€šçš„Javaç±»ï¼Œæ·»åŠ å¯¹åº”çš„mainæ–¹æ³•ï¼Œé¦–å…ˆè¦åšçš„æ˜¯åˆå§‹åŒ–<strong>ProcessEngine</strong>æµç¨‹å¼•æ“å®ä¾‹ã€‚è¿™æ˜¯ä¸€ä¸ªçº¿ç¨‹å®‰å…¨çš„å¯¹è±¡ï¼Œå› æ­¤é€šå¸¸åªéœ€è¦åœ¨ä¸€ä¸ªåº”ç”¨ä¸­åˆå§‹åŒ–ä¸€æ¬¡ã€‚ <em>ProcessEngine</em>ç”±<strong>ProcessEngineConfiguration</strong>å®ä¾‹åˆ›å»ºã€‚è¯¥å®ä¾‹å¯ä»¥é…ç½®ä¸è°ƒæ•´æµç¨‹å¼•æ“çš„è®¾ç½®ã€‚ é€šå¸¸ä½¿ç”¨ä¸€ä¸ªé…ç½®XMLæ–‡ä»¶åˆ›å»º<em>ProcessEngineConfiguration</em>ï¼Œä½†æ˜¯ï¼ˆåƒåœ¨è¿™é‡Œåšçš„ä¸€æ ·ï¼‰ä¹Ÿå¯ä»¥ç¼–ç¨‹æ–¹å¼åˆ›å»ºå®ƒã€‚ <em>ProcessEngineConfiguration</em>æ‰€éœ€çš„æœ€å°é…ç½®ï¼Œæ˜¯æ•°æ®åº“JDBCè¿æ¥ï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> &#123;</span><br><span class=\"line\">    <span class=\"type\">ProcessEngineConfiguration</span> <span class=\"variable\">cfg</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">StandaloneProcessEngineConfiguration</span>()</span><br><span class=\"line\">        .setJdbcUrl(<span class=\"string\">&quot;jdbc:mysql://localhost:3306/flowable-learn?serverTimezone=UTC&quot;</span>)</span><br><span class=\"line\">        .setJdbcUsername(<span class=\"string\">&quot;root&quot;</span>)</span><br><span class=\"line\">        .setJdbcPassword(<span class=\"string\">&quot;123456&quot;</span>)</span><br><span class=\"line\">        .setJdbcDriver(<span class=\"string\">&quot;com.mysql.cj.jdbc.Driver&quot;</span>)</span><br><span class=\"line\">        .setDatabaseSchemaUpdate(ProcessEngineConfiguration.DB_SCHEMA_UPDATE_TRUE);</span><br><span class=\"line\">    <span class=\"type\">ProcessEngine</span> <span class=\"variable\">processEngine</span> <span class=\"operator\">=</span> cfg.buildProcessEngine();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>æ³¨æ„åœ¨mysql8.0ä¸­æ‰§è¡Œå¯èƒ½å‡ºç°å¦‚ä¸‹çš„é”™è¯¯</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316093416477.png\"\n                      alt=\"image-20220316093416477\"\n                ></p>\n<p>å‡ºç°è¿™ç§æƒ…å†µåªéœ€è¦åœ¨mysqlçš„è¿æ¥å­—ç¬¦ä¸²ä¸­æ·»åŠ ä¸ŠnullCatalogMeansCurrent&#x3D;trueï¼Œè®¾ç½®ä¸ºåªæŸ¥å½“å‰è¿æ¥çš„schemaåº“å³å¯ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> &#123;</span><br><span class=\"line\">    <span class=\"type\">ProcessEngineConfiguration</span> <span class=\"variable\">cfg</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">StandaloneProcessEngineConfiguration</span>()</span><br><span class=\"line\">            .setJdbcUrl(<span class=\"string\">&quot;jdbc:mysql://localhost:3306/flowable-learn1?serverTimezone=UTC&amp;nullCatalogMeansCurrent=true&quot;</span>)</span><br><span class=\"line\">            .setJdbcUsername(<span class=\"string\">&quot;root&quot;</span>)</span><br><span class=\"line\">            .setJdbcPassword(<span class=\"string\">&quot;123456&quot;</span>)</span><br><span class=\"line\">            .setJdbcDriver(<span class=\"string\">&quot;com.mysql.cj.jdbc.Driver&quot;</span>)</span><br><span class=\"line\">            .setDatabaseSchemaUpdate(ProcessEngineConfiguration.DB_SCHEMA_UPDATE_TRUE);</span><br><span class=\"line\">    <span class=\"type\">ProcessEngine</span> <span class=\"variable\">processEngine</span> <span class=\"operator\">=</span> cfg.buildProcessEngine();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ç„¶ååº”ç”¨è¿è¡Œæ²¡æœ‰é—®é¢˜ï¼Œä½†ä¹Ÿæ²¡æœ‰åœ¨æ§åˆ¶å°æä¾›æœ‰ç”¨çš„ä¿¡æ¯ï¼Œåªæœ‰ä¸€æ¡æ¶ˆæ¯æç¤ºæ—¥å¿—æ²¡æœ‰æ­£ç¡®é…ç½®ã€‚Flowableä½¿ç”¨<a class=\"link\"   href=\"http://www.slf4j.org/\" >SLF4J<i class=\"fas fa-external-link-alt\"></i></a>ä½œä¸ºå†…éƒ¨æ—¥å¿—æ¡†æ¶ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨log4jä½œä¸ºSLF4Jçš„å®ç°ã€‚å› æ­¤åœ¨pom.xmlæ–‡ä»¶ä¸­æ·»åŠ ä¸‹åˆ—ä¾èµ–ï¼š</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.slf4j<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>slf4j-api<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>1.7.21<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.slf4j<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>slf4j-log4j12<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>1.7.21<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>Log4jéœ€è¦ä¸€ä¸ªé…ç½®æ–‡ä»¶ã€‚åœ¨<em>src&#x2F;main&#x2F;resources</em>æ–‡ä»¶å¤¹ä¸‹æ·»åŠ <em>log4j.properties</em>æ–‡ä»¶ï¼Œå¹¶å†™å…¥ä¸‹åˆ—å†…å®¹ï¼š</p>\n<figure class=\"highlight properties\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">log4j.rootLogger</span>=<span class=\"string\">DEBUG, CA</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">log4j.appender.CA</span>=<span class=\"string\">org.apache.log4j.ConsoleAppender</span></span><br><span class=\"line\"><span class=\"attr\">log4j.appender.CA.layout</span>=<span class=\"string\">org.apache.log4j.PatternLayout</span></span><br><span class=\"line\"><span class=\"attr\">log4j.appender.CA.layout.ConversionPattern</span>= <span class=\"string\">%d&#123;hh:mm:ss,SSS&#125; [%t] %-5p %c %x - %m%n</span></span><br></pre></td></tr></table></figure>\n\n<p>é‡æ–°è¿è¡Œåº”ç”¨ã€‚åº”è¯¥å¯ä»¥çœ‹åˆ°å…³äºå¼•æ“å¯åŠ¨ä¸åˆ›å»ºæ•°æ®åº“è¡¨ç»“æ„çš„æç¤ºæ—¥å¿—ï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316093922199.png\"\n                      alt=\"image-20220316093922199\"\n                ></p>\n<p>åŒæ—¶å¯ä»¥çœ‹åˆ°åˆ›å»ºäº†ç›¸å…³çš„è¡¨ç»“æ„åœ¨æ•°æ®åº“ä¸­</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316093957662.png\"\n                      alt=\"image-20220316093957662\"\n                ></p>\n<p>è¿™æ ·å°±å¾—åˆ°äº†ä¸€ä¸ªå¯åŠ¨å¯ç”¨çš„æµç¨‹å¼•æ“ã€‚æ¥ä¸‹æ¥ä¸ºå®ƒæä¾›ä¸€ä¸ªæµç¨‹ï¼</p>\n<h2 id=\"éƒ¨ç½²æµç¨‹å®šä¹‰\"><a href=\"#éƒ¨ç½²æµç¨‹å®šä¹‰\" class=\"headerlink\" title=\"éƒ¨ç½²æµç¨‹å®šä¹‰\"></a>éƒ¨ç½²æµç¨‹å®šä¹‰</h2><p>æ¥ä¸‹æ¥æˆ‘ä»¬æ„å»ºä¸€ä¸ªéå¸¸ç®€å•çš„è¯·å‡æµç¨‹ï¼ŒFlowableå¼•æ“éœ€è¦æµç¨‹å®šä¹‰ä¸ºBPMN 2.0æ ¼å¼ï¼Œè¿™æ˜¯ä¸€ä¸ªä¸šç•Œå¹¿æ³›æ¥å—çš„XMLæ ‡å‡†ã€‚ åœ¨Flowableæœ¯è¯­ä¸­ï¼Œæˆ‘ä»¬å°†å…¶ç§°ä¸ºä¸€ä¸ª*<em>æµç¨‹å®šä¹‰(process definition)<strong>ã€‚ä¸€ä¸ª<em>æµç¨‹å®šä¹‰</em>å¯ä»¥å¯åŠ¨å¤šä¸ª</strong>æµç¨‹å®ä¾‹(process instance)*<em>ã€‚</em>æµç¨‹å®šä¹‰*å¯ä»¥çœ‹åšæ˜¯é‡å¤æ‰§è¡Œæµç¨‹çš„è“å›¾ã€‚ åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ</em>æµç¨‹å®šä¹‰<em>å®šä¹‰äº†è¯·å‡çš„å„ä¸ªæ­¥éª¤ï¼Œè€Œä¸€ä¸ª</em>æµç¨‹å®ä¾‹*å¯¹åº”æŸä¸ªé›‡å‘˜æå‡ºçš„ä¸€ä¸ªè¯·å‡ç”³è¯·ã€‚</p>\n<p>BPMN 2.0å­˜å‚¨ä¸ºXMLï¼Œå¹¶åŒ…å«å¯è§†åŒ–çš„éƒ¨åˆ†ï¼šä½¿ç”¨æ ‡å‡†æ–¹å¼å®šä¹‰äº†æ¯ä¸ªæ­¥éª¤ç±»å‹ï¼ˆäººå·¥ä»»åŠ¡ï¼Œè‡ªåŠ¨æœåŠ¡è°ƒç”¨ï¼Œç­‰ç­‰ï¼‰å¦‚ä½•å‘ˆç°ï¼Œä»¥åŠå¦‚ä½•äº’ç›¸è¿æ¥ã€‚è¿™æ ·BPMN 2.0æ ‡å‡†ä½¿æŠ€æœ¯äººå‘˜ä¸ä¸šåŠ¡äººå‘˜èƒ½ç”¨åŒæ–¹éƒ½èƒ½ç†è§£çš„æ–¹å¼äº¤æµä¸šåŠ¡æµç¨‹ã€‚</p>\n<p>æˆ‘ä»¬è¦ä½¿ç”¨çš„æµç¨‹å®šä¹‰ä¸ºï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/getting.started.bpmn.process.png\"\n                      alt=\"getting.started.bpmn.process\"\n                ></p>\n<p>æµç¨‹å®šä¹‰è¯´æ˜ï¼š</p>\n<ul>\n<li>æˆ‘ä»¬å‡å®šå¯åŠ¨æµç¨‹éœ€è¦æä¾›ä¸€äº›ä¿¡æ¯ï¼Œä¾‹å¦‚é›‡å‘˜åå­—ã€è¯·å‡æ—¶é•¿ä»¥åŠè¯´æ˜ã€‚å½“ç„¶ï¼Œè¿™äº›å¯ä»¥å•ç‹¬å»ºæ¨¡ä¸ºæµç¨‹ä¸­çš„ç¬¬ä¸€æ­¥ã€‚ ä½†æ˜¯å¦‚æœå°†å®ƒä»¬ä½œä¸ºæµç¨‹çš„â€œè¾“å…¥ä¿¡æ¯â€ï¼Œå°±èƒ½ä¿è¯åªæœ‰åœ¨å®é™…è¯·æ±‚æ—¶æ‰ä¼šå»ºç«‹ä¸€ä¸ªæµç¨‹å®ä¾‹ã€‚å¦åˆ™ï¼ˆå°†æäº¤ä½œä¸ºæµç¨‹çš„ç¬¬ä¸€æ­¥ï¼‰ï¼Œç”¨æˆ·å¯èƒ½åœ¨æäº¤ä¹‹å‰æ”¹å˜ä¸»æ„å¹¶å–æ¶ˆï¼Œä½†æµç¨‹å®ä¾‹å·²ç»åˆ›å»ºäº†ã€‚ åœ¨æŸäº›åœºæ™¯ä¸­ï¼Œå°±å¯èƒ½å½±å“é‡è¦çš„æŒ‡æ ‡ï¼ˆä¾‹å¦‚å¯åŠ¨äº†å¤šå°‘ç”³è¯·ï¼Œä½†è¿˜æœªå®Œæˆï¼‰ï¼Œå–å†³äºä¸šåŠ¡ç›®æ ‡ã€‚</li>\n<li>å·¦ä¾§çš„åœ†åœˆå«åš**å¯åŠ¨äº‹ä»¶(start event)**ã€‚è¿™æ˜¯ä¸€ä¸ªæµç¨‹å®ä¾‹çš„èµ·ç‚¹ã€‚</li>\n<li>ç¬¬ä¸€ä¸ªçŸ©å½¢æ˜¯ä¸€ä¸ª**ç”¨æˆ·ä»»åŠ¡(user task)**ã€‚è¿™æ˜¯æµç¨‹ä¸­ç”¨æˆ·æ“ä½œçš„æ­¥éª¤ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œç»ç†éœ€è¦æ‰¹å‡†æˆ–é©³å›ç”³è¯·</li>\n<li>å–å†³äºç»ç†çš„å†³å®šï¼Œ<strong>æ’ä»–ç½‘å…³(exclusive gateway)</strong> (å¸¦å‰çš„è±å½¢)ä¼šå°†æµç¨‹å®ä¾‹è·¯ç”±è‡³æ‰¹å‡†æˆ–é©³å›è·¯å¾„</li>\n<li>å¦‚æœæ‰¹å‡†ï¼Œåˆ™éœ€è¦å°†ç”³è¯·æ³¨å†Œè‡³æŸä¸ªå¤–éƒ¨ç³»ç»Ÿï¼Œå¹¶è·Ÿç€å¦ä¸€ä¸ªç”¨æˆ·ä»»åŠ¡ï¼Œå°†ç»ç†çš„å†³å®šé€šçŸ¥ç»™ç”³è¯·äººã€‚å½“ç„¶ä¹Ÿå¯ä»¥æ”¹ä¸ºå‘é€é‚®ä»¶ã€‚</li>\n<li>å¦‚æœé©³å›ï¼Œåˆ™ä¸ºé›‡å‘˜å‘é€ä¸€å°é‚®ä»¶é€šçŸ¥ä»–ã€‚</li>\n</ul>\n<p>ä¸€èˆ¬æ¥è¯´ï¼Œè¿™æ ·çš„<em>æµç¨‹å®šä¹‰</em>ä½¿ç”¨å¯è§†åŒ–å»ºæ¨¡å·¥å…·å»ºç«‹ï¼Œå¦‚Flowable Designer(Eclipse)æˆ–Flowable Web Modeler(Webåº”ç”¨)ã€‚ä½†åœ¨è¿™é‡Œæˆ‘ä»¬ç›´æ¥æ’°å†™XMLï¼Œä»¥ç†Ÿæ‚‰BPMN 2.0åŠå…¶æ¦‚å¿µã€‚</p>\n<p>ä¸ä¸Šé¢å±•ç¤ºçš„æµç¨‹å›¾å¯¹åº”çš„BPMN 2.0 XMLåœ¨ä¸‹é¢æ˜¾ç¤ºã€‚è¯·æ³¨æ„è¿™åªåŒ…å«äº†â€œæµç¨‹éƒ¨åˆ†â€ã€‚å¦‚æœä½¿ç”¨å›¾å½¢åŒ–å»ºæ¨¡å·¥å…·ï¼Œå®é™…çš„XMLæ–‡ä»¶è¿˜å°†åŒ…å«â€œå¯è§†åŒ–éƒ¨åˆ†â€ï¼Œç”¨äºæè¿°å›¾å½¢ä¿¡æ¯ï¼Œå¦‚æµç¨‹å®šä¹‰ä¸­å„ä¸ªå…ƒç´ çš„åæ ‡ï¼ˆæ‰€æœ‰çš„å›¾å½¢åŒ–ä¿¡æ¯åŒ…å«åœ¨XMLçš„<em>BPMNDiagram</em>æ ‡ç­¾ä¸­ï¼Œä½œä¸º<em>definitions</em>æ ‡ç­¾çš„å­å…ƒç´ ï¼‰ã€‚</p>\n<p>å°†ä¸‹é¢çš„XMLä¿å­˜åœ¨<em>src&#x2F;main&#x2F;resources</em>æ–‡ä»¶å¤¹ä¸‹åä¸º<em>holiday-request.bpmn20.xml</em>çš„æ–‡ä»¶ä¸­ã€‚</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=<span class=\"string\">&quot;1.0&quot;</span> encoding=<span class=\"string\">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">definitions</span> <span class=\"attr\">xmlns</span>=<span class=\"string\">&quot;http://www.omg.org/spec/BPMN/20100524/MODEL&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">             <span class=\"attr\">xmlns:xsi</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">             <span class=\"attr\">xmlns:xsd</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">             <span class=\"attr\">xmlns:bpmndi</span>=<span class=\"string\">&quot;http://www.omg.org/spec/BPMN/20100524/DI&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">             <span class=\"attr\">xmlns:omgdc</span>=<span class=\"string\">&quot;http://www.omg.org/spec/DD/20100524/DC&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">             <span class=\"attr\">xmlns:omgdi</span>=<span class=\"string\">&quot;http://www.omg.org/spec/DD/20100524/DI&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">             <span class=\"attr\">xmlns:flowable</span>=<span class=\"string\">&quot;http://flowable.org/bpmn&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">             <span class=\"attr\">typeLanguage</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">             <span class=\"attr\">expressionLanguage</span>=<span class=\"string\">&quot;http://www.w3.org/1999/XPath&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">             <span class=\"attr\">targetNamespace</span>=<span class=\"string\">&quot;http://www.flowable.org/processdef&quot;</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">process</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;holidayRequest&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;Holiday Request&quot;</span> <span class=\"attr\">isExecutable</span>=<span class=\"string\">&quot;true&quot;</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">startEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;startEvent&quot;</span>/&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;startEvent&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;approveTask&quot;</span>/&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">userTask</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;approveTask&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;Approve or reject request&quot;</span>/&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;approveTask&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;decision&quot;</span>/&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">exclusiveGateway</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;decision&quot;</span>/&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;decision&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;externalSystemCall&quot;</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">conditionExpression</span> <span class=\"attr\">xsi:type</span>=<span class=\"string\">&quot;tFormalExpression&quot;</span>&gt;</span></span><br><span class=\"line\">                &lt;![CDATA[</span><br><span class=\"line\">          $&#123;approved&#125;</span><br><span class=\"line\">        ]]&gt;</span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">conditionExpression</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span>  <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;decision&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;sendRejectionMail&quot;</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">conditionExpression</span> <span class=\"attr\">xsi:type</span>=<span class=\"string\">&quot;tFormalExpression&quot;</span>&gt;</span></span><br><span class=\"line\">                &lt;![CDATA[</span><br><span class=\"line\">          $&#123;!approved&#125;</span><br><span class=\"line\">        ]]&gt;</span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">conditionExpression</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">serviceTask</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;externalSystemCall&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;Enter holidays in external system&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">                     <span class=\"attr\">flowable:class</span>=<span class=\"string\">&quot;org.flowable.CallExternalSystemDelegate&quot;</span>/&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;externalSystemCall&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;holidayApprovedTask&quot;</span>/&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">userTask</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;holidayApprovedTask&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;Holiday approved&quot;</span>/&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;holidayApprovedTask&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;approveEnd&quot;</span>/&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">serviceTask</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;sendRejectionMail&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;Send out rejection email&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">                     <span class=\"attr\">flowable:class</span>=<span class=\"string\">&quot;org.flowable.SendRejectionMail&quot;</span>/&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;sendRejectionMail&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;rejectEnd&quot;</span>/&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">endEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;approveEnd&quot;</span>/&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">endEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;rejectEnd&quot;</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">process</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">definitions</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>ç°åœ¨æˆ‘ä»¬å·²ç»æœ‰äº†æµç¨‹BPMN 2.0 XMLæ–‡ä»¶ï¼Œä¸‹æ¥éœ€è¦å°†å®ƒ***éƒ¨ç½²(deploy)**<em>åˆ°å¼•æ“ä¸­ã€‚</em>éƒ¨ç½²*ä¸€ä¸ªæµç¨‹å®šä¹‰æ„å‘³ç€ï¼š</p>\n<ul>\n<li>æµç¨‹å¼•æ“ä¼šå°†XMLæ–‡ä»¶å­˜å‚¨åœ¨æ•°æ®åº“ä¸­ï¼Œè¿™æ ·å¯ä»¥åœ¨éœ€è¦çš„æ—¶å€™è·å–å®ƒ</li>\n<li>æµç¨‹å®šä¹‰è½¬æ¢ä¸ºå†…éƒ¨çš„ã€å¯æ‰§è¡Œçš„å¯¹è±¡æ¨¡å‹ï¼Œè¿™æ ·ä½¿ç”¨å®ƒå°±å¯ä»¥å¯åŠ¨<em>æµç¨‹å®ä¾‹</em>ã€‚</li>\n</ul>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220317110902636.png\"\n                      alt=\"image-20220317110902636\"\n                ></p>\n<p>å°†æµç¨‹å®šä¹‰<em>éƒ¨ç½²</em>è‡³Flowableå¼•æ“ï¼Œéœ€è¦ä½¿ç”¨<em>RepositoryService</em>ï¼Œå…¶å¯ä»¥ä»<em>ProcessEngine</em>å¯¹è±¡è·å–ã€‚ä½¿ç”¨<em>RepositoryService</em>ï¼Œå¯ä»¥é€šè¿‡XMLæ–‡ä»¶çš„è·¯å¾„åˆ›å»ºä¸€ä¸ªæ–°çš„*éƒ¨ç½²(Deployment)<em>ï¼Œå¹¶è°ƒç”¨</em>deploy()*æ–¹æ³•å®é™…æ‰§è¡Œï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * éƒ¨ç½²æµç¨‹</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">testDeploy</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// é…ç½®æ•°æ®åº“ç›¸å…³ä¿¡æ¯ è·å– ProcessEngineConfiguration</span></span><br><span class=\"line\">    <span class=\"type\">ProcessEngineConfiguration</span> <span class=\"variable\">cfg</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">StandaloneProcessEngineConfiguration</span>()</span><br><span class=\"line\">            .setJdbcUrl(<span class=\"string\">&quot;jdbc:mysql://localhost:3306/flowable-learn2?serverTimezone=UTC&amp;nullCatalogMeansCurrent=true&quot;</span>)</span><br><span class=\"line\">            .setJdbcUsername(<span class=\"string\">&quot;root&quot;</span>)</span><br><span class=\"line\">            .setJdbcPassword(<span class=\"string\">&quot;123456&quot;</span>)</span><br><span class=\"line\">            .setJdbcDriver(<span class=\"string\">&quot;com.mysql.cj.jdbc.Driver&quot;</span>)</span><br><span class=\"line\">            .setDatabaseSchemaUpdate(ProcessEngineConfiguration.DB_SCHEMA_UPDATE_TRUE);</span><br><span class=\"line\">    <span class=\"comment\">// è·å–æµç¨‹å¼•æ“å¯¹è±¡</span></span><br><span class=\"line\">    <span class=\"type\">ProcessEngine</span> <span class=\"variable\">processEngine</span> <span class=\"operator\">=</span> cfg.buildProcessEngine();</span><br><span class=\"line\">    <span class=\"comment\">// éƒ¨ç½²æµç¨‹ è·å–RepositoryServiceå¯¹è±¡</span></span><br><span class=\"line\">    <span class=\"type\">RepositoryService</span> <span class=\"variable\">repositoryService</span> <span class=\"operator\">=</span> processEngine.getRepositoryService();</span><br><span class=\"line\">    <span class=\"type\">Deployment</span> <span class=\"variable\">deployment</span> <span class=\"operator\">=</span> repositoryService.createDeployment()<span class=\"comment\">// åˆ›å»ºDeploymentå¯¹è±¡</span></span><br><span class=\"line\">            .addClasspathResource(<span class=\"string\">&quot;holiday-request.bpmn20.xml&quot;</span>) <span class=\"comment\">// æ·»åŠ æµç¨‹éƒ¨ç½²æ–‡ä»¶</span></span><br><span class=\"line\">            .name(<span class=\"string\">&quot;è¯·æ±‚æµç¨‹&quot;</span>) <span class=\"comment\">// è®¾ç½®éƒ¨ç½²æµç¨‹çš„åç§°</span></span><br><span class=\"line\">            .deploy(); <span class=\"comment\">// æ‰§è¡Œéƒ¨ç½²æ“ä½œ</span></span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;deployment.getId() = &quot;</span> + deployment.getId());</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;deployment.getName() = &quot;</span> + deployment.getName());</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ç„¶åæ‰§è¡Œè¯¥æ–¹æ³•æ—¥å¿—æ“ä½œæˆåŠŸï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316100439048.png\"\n                      alt=\"image-20220316100439048\"\n                ></p>\n<p>åœ¨åå°è¡¨ç»“æ„ä¹Ÿå¯ä»¥çœ‹åˆ°ç›¸å…³çš„ä¿¡æ¯</p>\n<p>act_re_deployment: æµç¨‹å®šä¹‰éƒ¨ç½²è¡¨ï¼Œæ¯éƒ¨ç½²ä¸€æ¬¡å°±å¢åŠ ä¸€æ¡è®°å½•</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316100532725.png\"\n                      alt=\"image-20220316100532725\"\n                ></p>\n<p>act_re_procdef ï¼šæµç¨‹å®šä¹‰è¡¨ï¼Œéƒ¨ç½²æ¯ä¸ªæ–°çš„æµç¨‹å®šä¹‰éƒ½ä¼šåœ¨è¿™å¼ è¡¨ä¸­å¢åŠ ä¸€æ¡è®°å½•</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316100611004.png\"\n                      alt=\"image-20220316100611004\"\n                ></p>\n<p>act_ge_bytearray ï¼šæµç¨‹èµ„æºè¡¨ï¼Œæµç¨‹éƒ¨ç½²çš„ bpmnæ–‡ä»¶å’Œpngå›¾ç‰‡ä¼šä¿å­˜åœ¨è¯¥è¡¨ä¸­</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316100648362.png\"\n                      alt=\"image-20220316100648362\"\n                ></p>\n<p>æˆ‘ä»¬ç°åœ¨å¯ä»¥é€šè¿‡APIæŸ¥è¯¢éªŒè¯æµç¨‹å®šä¹‰å·²ç»éƒ¨ç½²åœ¨å¼•æ“ä¸­ï¼ˆå¹¶å­¦ä¹ ä¸€äº›APIï¼‰ã€‚é€šè¿‡<em>RepositoryService</em>åˆ›å»ºçš„<em>ProcessDefinitionQuery</em>å¯¹è±¡å®ç°ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * æŸ¥çœ‹æµç¨‹å®šä¹‰</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">testDeployQuery</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// é…ç½®æ•°æ®åº“ç›¸å…³ä¿¡æ¯ è·å– ProcessEngineConfiguration</span></span><br><span class=\"line\">        <span class=\"type\">ProcessEngineConfiguration</span> <span class=\"variable\">cfg</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">StandaloneProcessEngineConfiguration</span>()</span><br><span class=\"line\">                .setJdbcUrl(<span class=\"string\">&quot;jdbc:mysql://localhost:3306/flowable-learn2?serverTimezone=UTC&amp;nullCatalogMeansCurrent=true&quot;</span>)</span><br><span class=\"line\">                .setJdbcUsername(<span class=\"string\">&quot;root&quot;</span>)</span><br><span class=\"line\">                .setJdbcPassword(<span class=\"string\">&quot;123456&quot;</span>)</span><br><span class=\"line\">                .setJdbcDriver(<span class=\"string\">&quot;com.mysql.cj.jdbc.Driver&quot;</span>)</span><br><span class=\"line\">                .setDatabaseSchemaUpdate(ProcessEngineConfiguration.DB_SCHEMA_UPDATE_TRUE);</span><br><span class=\"line\">        <span class=\"comment\">// è·å–æµç¨‹å¼•æ“å¯¹è±¡</span></span><br><span class=\"line\">        <span class=\"type\">ProcessEngine</span> <span class=\"variable\">processEngine</span> <span class=\"operator\">=</span> cfg.buildProcessEngine();</span><br><span class=\"line\">        <span class=\"comment\">// éƒ¨ç½²æµç¨‹ è·å–RepositoryServiceå¯¹è±¡</span></span><br><span class=\"line\">        <span class=\"type\">RepositoryService</span> <span class=\"variable\">repositoryService</span> <span class=\"operator\">=</span> processEngine.getRepositoryService();</span><br><span class=\"line\">        <span class=\"comment\">// è·å–æµç¨‹å®šä¹‰å¯¹è±¡</span></span><br><span class=\"line\">        <span class=\"type\">ProcessDefinition</span> <span class=\"variable\">processDefinition</span> <span class=\"operator\">=</span> repositoryService.createProcessDefinitionQuery()</span><br><span class=\"line\">                .deploymentId(<span class=\"string\">&quot;2501&quot;</span>)</span><br><span class=\"line\">                .singleResult();</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;processDefinition.getId() = &quot;</span> + processDefinition.getId());</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;processDefinition.getName() = &quot;</span> + processDefinition.getName());</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;processDefinition.getDeploymentId() = &quot;</span> + processDefinition.getDeploymentId());</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;processDefinition.getDescription() = &quot;</span> + processDefinition.getDescription());</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n\n<p>è¾“å‡ºç»“æœä¸ºï¼š</p>\n<figure class=\"highlight txt\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">processDefinition.getId() = holidayRequest:2:2503</span><br><span class=\"line\">processDefinition.getName() = Holiday Request</span><br><span class=\"line\">processDefinition.getDeploymentId() = 2501</span><br><span class=\"line\">processDefinition.getDescription() = null</span><br></pre></td></tr></table></figure>\n\n\n\n<h2 id=\"å¯åŠ¨æµç¨‹å®ä¾‹\"><a href=\"#å¯åŠ¨æµç¨‹å®ä¾‹\" class=\"headerlink\" title=\"å¯åŠ¨æµç¨‹å®ä¾‹\"></a>å¯åŠ¨æµç¨‹å®ä¾‹</h2><p>ç°åœ¨å·²ç»åœ¨æµç¨‹å¼•æ“ä¸­<em>éƒ¨ç½²</em>äº†æµç¨‹å®šä¹‰ï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨è¿™ä¸ª<em>æµç¨‹å®šä¹‰</em>ä½œä¸ºâ€œæ¨¡æ¿â€å¯åŠ¨<em>æµç¨‹å®ä¾‹</em>ã€‚</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316102638015.png\"\n                      alt=\"image-20220316102638015\"\n                ></p>\n<p>è¦å¯åŠ¨æµç¨‹å®ä¾‹ï¼Œéœ€è¦æä¾›ä¸€äº›åˆå§‹åŒ–<em>æµç¨‹å˜é‡</em>ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œå¯ä»¥é€šè¿‡å‘ˆç°ç»™ç”¨æˆ·çš„è¡¨å•ï¼Œæˆ–è€…åœ¨æµç¨‹ç”±å…¶ä»–ç³»ç»Ÿè‡ªåŠ¨è§¦å‘æ—¶é€šè¿‡REST APIï¼Œæ¥è·å–è¿™äº›å˜é‡ã€‚åœ¨è¿™ä¸ªä¾‹å­é‡Œï¼Œæˆ‘ä»¬ç®€åŒ–ç›´æ¥åœ¨ä»£ç ä¸­å®šä¹‰äº†ï¼Œæˆ‘ä»¬ä½¿ç”¨<em>RuntimeService</em>å¯åŠ¨ä¸€ä¸ª<em>æµç¨‹å®ä¾‹</em>ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * å¯åŠ¨æµç¨‹å®ä¾‹</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">testRunProcess</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// é…ç½®æ•°æ®åº“ç›¸å…³ä¿¡æ¯ è·å– ProcessEngineConfiguration</span></span><br><span class=\"line\">    <span class=\"type\">ProcessEngineConfiguration</span> <span class=\"variable\">cfg</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">StandaloneProcessEngineConfiguration</span>()</span><br><span class=\"line\">            .setJdbcUrl(<span class=\"string\">&quot;jdbc:mysql://localhost:3306/flowable-learn2?serverTimezone=UTC&amp;nullCatalogMeansCurrent=true&quot;</span>)</span><br><span class=\"line\">            .setJdbcUsername(<span class=\"string\">&quot;root&quot;</span>)</span><br><span class=\"line\">            .setJdbcPassword(<span class=\"string\">&quot;123456&quot;</span>)</span><br><span class=\"line\">            .setJdbcDriver(<span class=\"string\">&quot;com.mysql.cj.jdbc.Driver&quot;</span>)</span><br><span class=\"line\">            .setDatabaseSchemaUpdate(ProcessEngineConfiguration.DB_SCHEMA_UPDATE_TRUE);</span><br><span class=\"line\">    <span class=\"comment\">// è·å–æµç¨‹å¼•æ“å¯¹è±¡</span></span><br><span class=\"line\">    <span class=\"type\">ProcessEngine</span> <span class=\"variable\">processEngine</span> <span class=\"operator\">=</span> cfg.buildProcessEngine();</span><br><span class=\"line\">    <span class=\"comment\">// å¯åŠ¨æµç¨‹å®ä¾‹é€šè¿‡ RuntimeService å¯¹è±¡</span></span><br><span class=\"line\">    <span class=\"type\">RuntimeService</span> <span class=\"variable\">runtimeService</span> <span class=\"operator\">=</span> processEngine.getRuntimeService();</span><br><span class=\"line\">    <span class=\"comment\">// æ„å»ºæµç¨‹å˜é‡</span></span><br><span class=\"line\">    Map&lt;String,Object&gt; variables = <span class=\"keyword\">new</span> <span class=\"title class_\">HashMap</span>&lt;&gt;();</span><br><span class=\"line\">    variables.put(<span class=\"string\">&quot;employee&quot;</span>,<span class=\"string\">&quot;å¼ ä¸‰&quot;</span>) ;<span class=\"comment\">// è°ç”³è¯·è¯·å‡</span></span><br><span class=\"line\">    variables.put(<span class=\"string\">&quot;nrOfHolidays&quot;</span>,<span class=\"number\">3</span>); <span class=\"comment\">// è¯·å‡ å¤©å‡</span></span><br><span class=\"line\">    variables.put(<span class=\"string\">&quot;description&quot;</span>,<span class=\"string\">&quot;å·¥ä½œç´¯äº†ï¼Œæƒ³å‡ºå»ç©ç©&quot;</span>); <span class=\"comment\">// è¯·å‡çš„åŸå› </span></span><br><span class=\"line\">    <span class=\"comment\">// å¯åŠ¨æµç¨‹å®ä¾‹ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æµç¨‹å®šä¹‰çš„id</span></span><br><span class=\"line\">    <span class=\"type\">ProcessInstance</span> <span class=\"variable\">processInstance</span> <span class=\"operator\">=</span> runtimeService</span><br><span class=\"line\">            .startProcessInstanceByKey(<span class=\"string\">&quot;holidayRequest&quot;</span>, variables);<span class=\"comment\">// å¯åŠ¨æµç¨‹å®ä¾‹</span></span><br><span class=\"line\">    <span class=\"comment\">// è¾“å‡ºç›¸å…³çš„æµç¨‹å®ä¾‹ä¿¡æ¯</span></span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;æµç¨‹å®šä¹‰çš„IDï¼š&quot;</span> + processInstance.getProcessDefinitionId());</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;æµç¨‹å®ä¾‹çš„IDï¼š&quot;</span> + processInstance.getId());</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;å½“å‰æ´»åŠ¨çš„IDï¼š&quot;</span> + processInstance.getActivityId());</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>å¯åŠ¨æˆåŠŸï¼Œè¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight txt\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">æµç¨‹å®šä¹‰çš„IDï¼šholidayRequest:2:2503</span><br><span class=\"line\">æµç¨‹å®ä¾‹çš„IDï¼š5001</span><br><span class=\"line\">å½“å‰æ´»åŠ¨çš„IDï¼šnull</span><br></pre></td></tr></table></figure>\n\n<p>å¯¹åº”çš„æµç¨‹å®ä¾‹IDä¸ºï¼š5001</p>\n<p>å¯åŠ¨æµç¨‹å®ä¾‹æ¶‰åŠåˆ°çš„è¡¨ç»“æ„ï¼š</p>\n<ul>\n<li>act_hi_actinst æµç¨‹å®ä¾‹æ‰§è¡Œå†å²</li>\n<li>act_hi_identitylink æµç¨‹çš„å‚ä¸ç”¨æˆ·çš„å†å²ä¿¡æ¯</li>\n<li>act_hi_procinst æµç¨‹å®ä¾‹å†å²ä¿¡æ¯</li>\n<li>act_hi_taskinst æµç¨‹ä»»åŠ¡å†å²ä¿¡æ¯</li>\n<li>act_ru_execution æµç¨‹æ‰§è¡Œä¿¡æ¯</li>\n<li>act_ru_identitylink æµç¨‹çš„å‚ä¸ç”¨æˆ·ä¿¡æ¯</li>\n<li>act_ru_task ä»»åŠ¡ä¿¡æ¯</li>\n</ul>\n<h2 id=\"æŸ¥çœ‹ä»»åŠ¡\"><a href=\"#æŸ¥çœ‹ä»»åŠ¡\" class=\"headerlink\" title=\"æŸ¥çœ‹ä»»åŠ¡\"></a>æŸ¥çœ‹ä»»åŠ¡</h2><p>ä¸Šé¢å‘˜å·¥å‘èµ·äº†ä¸€ä¸ªè¯·å‡æµç¨‹ï¼Œæ¥ä¸‹æ¥å°±ä¼šæµè½¬åˆ°æ€»ç»ç†è¿™å„¿æ¥å¤„ç†ï¼Œä¹‹å‰æˆ‘ä»¬æ²¡æœ‰æŒ‡å®šç»ç†è¿™çš„å¤„ç†äººï¼Œæˆ‘ä»¬å¯ä»¥åŠ ä¸€ä¸ª</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316110406801.png\"\n                      alt=\"image-20220316110406801\"\n                ></p>\n<p>ç„¶åæˆ‘ä»¬æ¥æŸ¥çœ‹ä¸‹lisiçš„ä»»åŠ¡</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * æŸ¥çœ‹ä»»åŠ¡</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">testQueryTask</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// é…ç½®æ•°æ®åº“ç›¸å…³ä¿¡æ¯ è·å– ProcessEngineConfiguration</span></span><br><span class=\"line\">    <span class=\"type\">ProcessEngineConfiguration</span> <span class=\"variable\">cfg</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">StandaloneProcessEngineConfiguration</span>()</span><br><span class=\"line\">            .setJdbcUrl(<span class=\"string\">&quot;jdbc:mysql://localhost:3306/flowable-learn2?serverTimezone=UTC&amp;nullCatalogMeansCurrent=true&quot;</span>)</span><br><span class=\"line\">            .setJdbcUsername(<span class=\"string\">&quot;root&quot;</span>)</span><br><span class=\"line\">            .setJdbcPassword(<span class=\"string\">&quot;123456&quot;</span>)</span><br><span class=\"line\">            .setJdbcDriver(<span class=\"string\">&quot;com.mysql.cj.jdbc.Driver&quot;</span>)</span><br><span class=\"line\">            .setDatabaseSchemaUpdate(ProcessEngineConfiguration.DB_SCHEMA_UPDATE_TRUE);</span><br><span class=\"line\">    <span class=\"comment\">// è·å–æµç¨‹å¼•æ“å¯¹è±¡</span></span><br><span class=\"line\">    <span class=\"type\">ProcessEngine</span> <span class=\"variable\">processEngine</span> <span class=\"operator\">=</span> cfg.buildProcessEngine();</span><br><span class=\"line\">    <span class=\"type\">TaskService</span> <span class=\"variable\">taskService</span> <span class=\"operator\">=</span> processEngine.getTaskService();</span><br><span class=\"line\">    List&lt;Task&gt; list = taskService.createTaskQuery()</span><br><span class=\"line\">            .processDefinitionKey(<span class=\"string\">&quot;holidayRequestNew&quot;</span>)</span><br><span class=\"line\">            .taskAssignee(<span class=\"string\">&quot;lisi&quot;</span>)</span><br><span class=\"line\">            .list();</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (Task task : list) &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;task.getProcessDefinitionId() = &quot;</span> + task.getProcessDefinitionId());</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;task.getId() = &quot;</span> + task.getId());</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;task.getAssignee() = &quot;</span> + task.getAssignee());</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;task.getName() = &quot;</span> + task.getName());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>è¾“å‡ºç»“æœä¸ºï¼š</p>\n<figure class=\"highlight txt\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">task.getProcessDefinitionId() = holidayRequestNew:1:10003</span><br><span class=\"line\">task.getId() = 12508</span><br><span class=\"line\">task.getAssignee() = lisi</span><br><span class=\"line\">task.getName() = Approve or reject request</span><br></pre></td></tr></table></figure>\n\n\n\n<h2 id=\"å®Œæˆä»»åŠ¡\"><a href=\"#å®Œæˆä»»åŠ¡\" class=\"headerlink\" title=\"å®Œæˆä»»åŠ¡\"></a>å®Œæˆä»»åŠ¡</h2><p>ç°åœ¨æå››è¿™ä¸ªè§’è‰²å¯ä»¥æ¥å®Œæˆå½“å‰çš„ä»»åŠ¡äº†</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316111124019.png\"\n                      alt=\"image-20220316111124019\"\n                ></p>\n<p>åœ¨æ­¤å¤„æˆ‘ä»¬ç›´æ¥è§£å†³æ‰è¿™ä¸ªè¯·å‡ï¼Œç„¶åä¼šèµ°å‘é€æ‹’ç»é‚®ä»¶çš„æµç¨‹ï¼Œè¿™å—æˆ‘ä»¬éœ€è¦ç”¨åˆ°JavaDelegateæ¥è§¦å‘ã€‚</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316111253702.png\"\n                      alt=\"image-20220316111253702\"\n                ></p>\n<p>æˆ‘ä»¬å®šä¹‰è¿™æ ·ä¸€ä¸ªJavaç±»</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">SendRejectionMail</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">JavaDelegate</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * è§¦å‘å‘é€é‚®ä»¶çš„æ“ä½œ</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> delegateExecution</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">execute</span><span class=\"params\">(DelegateExecution delegateExecution)</span> &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;è¯·å‡è¢«æ‹’ç»,,,å®‰å¿ƒå·¥ä½œå§&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ç„¶åæ¥å®Œæˆä»»åŠ¡</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * å®Œæˆä»»åŠ¡</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">testCompleteTask</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// é…ç½®æ•°æ®åº“ç›¸å…³ä¿¡æ¯ è·å– ProcessEngineConfiguration</span></span><br><span class=\"line\">    <span class=\"type\">ProcessEngineConfiguration</span> <span class=\"variable\">cfg</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">StandaloneProcessEngineConfiguration</span>()</span><br><span class=\"line\">            .setJdbcUrl(<span class=\"string\">&quot;jdbc:mysql://localhost:3306/flowable-learn2?serverTimezone=UTC&amp;nullCatalogMeansCurrent=true&quot;</span>)</span><br><span class=\"line\">            .setJdbcUsername(<span class=\"string\">&quot;root&quot;</span>)</span><br><span class=\"line\">            .setJdbcPassword(<span class=\"string\">&quot;123456&quot;</span>)</span><br><span class=\"line\">            .setJdbcDriver(<span class=\"string\">&quot;com.mysql.cj.jdbc.Driver&quot;</span>)</span><br><span class=\"line\">            .setDatabaseSchemaUpdate(ProcessEngineConfiguration.DB_SCHEMA_UPDATE_TRUE);</span><br><span class=\"line\">    <span class=\"comment\">// è·å–æµç¨‹å¼•æ“å¯¹è±¡</span></span><br><span class=\"line\">    <span class=\"type\">ProcessEngine</span> <span class=\"variable\">processEngine</span> <span class=\"operator\">=</span> cfg.buildProcessEngine();</span><br><span class=\"line\">    <span class=\"type\">TaskService</span> <span class=\"variable\">taskService</span> <span class=\"operator\">=</span> processEngine.getTaskService();</span><br><span class=\"line\">    <span class=\"type\">Task</span> <span class=\"variable\">task</span> <span class=\"operator\">=</span> taskService.createTaskQuery()</span><br><span class=\"line\">            .processDefinitionKey(<span class=\"string\">&quot;holidayRequestNew&quot;</span>)</span><br><span class=\"line\">            .taskAssignee(<span class=\"string\">&quot;lisi&quot;</span>)</span><br><span class=\"line\">            .singleResult();</span><br><span class=\"line\">    <span class=\"comment\">// æ·»åŠ æµç¨‹å˜é‡</span></span><br><span class=\"line\">    Map&lt;String,Object&gt; variables = <span class=\"keyword\">new</span> <span class=\"title class_\">HashMap</span>&lt;&gt;();</span><br><span class=\"line\">    variables.put(<span class=\"string\">&quot;approved&quot;</span>,<span class=\"literal\">false</span>); <span class=\"comment\">// æ‹’ç»è¯·å‡</span></span><br><span class=\"line\">    <span class=\"comment\">// å®Œæˆä»»åŠ¡</span></span><br><span class=\"line\">    taskService.complete(task.getId(),variables);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ç„¶åå¯ä»¥çœ‹åˆ°JavaDelegateè§¦å‘äº†</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316111913933.png\"\n                      alt=\"image-20220316111913933\"\n                ></p>\n<h2 id=\"æµç¨‹çš„åˆ é™¤\"><a href=\"#æµç¨‹çš„åˆ é™¤\" class=\"headerlink\" title=\"æµç¨‹çš„åˆ é™¤\"></a>æµç¨‹çš„åˆ é™¤</h2><p>æœ‰äº›æµç¨‹å·²ç»æ²¡æœ‰ç”¨äº†ï¼Œæˆ‘ä»¬éœ€è¦åˆ é™¤æ‰ï¼Œå…¶å®ä¹Ÿéå¸¸ç®€å•</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * åˆ é™¤æµç¨‹</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">testDeleteProcess</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// é…ç½®æ•°æ®åº“ç›¸å…³ä¿¡æ¯ è·å– ProcessEngineConfiguration</span></span><br><span class=\"line\">    <span class=\"type\">ProcessEngineConfiguration</span> <span class=\"variable\">cfg</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">StandaloneProcessEngineConfiguration</span>()</span><br><span class=\"line\">            .setJdbcUrl(<span class=\"string\">&quot;jdbc:mysql://localhost:3306/flowable-learn2?serverTimezone=UTC&amp;nullCatalogMeansCurrent=true&quot;</span>)</span><br><span class=\"line\">            .setJdbcUsername(<span class=\"string\">&quot;root&quot;</span>)</span><br><span class=\"line\">            .setJdbcPassword(<span class=\"string\">&quot;123456&quot;</span>)</span><br><span class=\"line\">            .setJdbcDriver(<span class=\"string\">&quot;com.mysql.cj.jdbc.Driver&quot;</span>)</span><br><span class=\"line\">            .setDatabaseSchemaUpdate(ProcessEngineConfiguration.DB_SCHEMA_UPDATE_TRUE);</span><br><span class=\"line\">    <span class=\"comment\">// è·å–æµç¨‹å¼•æ“å¯¹è±¡</span></span><br><span class=\"line\">    <span class=\"type\">ProcessEngine</span> <span class=\"variable\">processEngine</span> <span class=\"operator\">=</span> cfg.buildProcessEngine();</span><br><span class=\"line\">    <span class=\"type\">RepositoryService</span> <span class=\"variable\">repositoryService</span> <span class=\"operator\">=</span> processEngine.getRepositoryService();</span><br><span class=\"line\">    <span class=\"comment\">// åˆ é™¤æµç¨‹å®šä¹‰ï¼Œå¦‚æœè¯¥æµç¨‹å®šä¹‰å·²ç»æœ‰äº†æµç¨‹å®ä¾‹å¯åŠ¨åˆ™åˆ é™¤æ—¶æŠ¥é”™</span></span><br><span class=\"line\">    <span class=\"comment\">// repositoryService.deleteDeployment(&quot;1&quot;);</span></span><br><span class=\"line\">    <span class=\"comment\">// è®¾ç½®ä¸ºTRUE çº§è”åˆ é™¤æµç¨‹å®šä¹‰ï¼ŒåŠæ—¶æµç¨‹æœ‰å®ä¾‹å¯åŠ¨ï¼Œä¹Ÿå¯ä»¥åˆ é™¤ï¼Œè®¾ç½®ä¸ºfalse éçº§è”åˆ é™¤æ“ä½œã€‚</span></span><br><span class=\"line\">    repositoryService.deleteDeployment(<span class=\"string\">&quot;2501&quot;</span>,<span class=\"literal\">true</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"æŸ¥çœ‹å†å²ä¿¡æ¯\"><a href=\"#æŸ¥çœ‹å†å²ä¿¡æ¯\" class=\"headerlink\" title=\"æŸ¥çœ‹å†å²ä¿¡æ¯\"></a>æŸ¥çœ‹å†å²ä¿¡æ¯</h2><p>é€‰æ‹©ä½¿ç”¨Flowableè¿™æ ·çš„æµç¨‹å¼•æ“çš„åŸå› ä¹‹ä¸€ï¼Œæ˜¯å®ƒå¯ä»¥è‡ªåŠ¨å­˜å‚¨æ‰€æœ‰æµç¨‹å®ä¾‹çš„<strong>å®¡è®¡æ•°æ®</strong>æˆ–<strong>å†å²æ•°æ®</strong>ã€‚è¿™äº›æ•°æ®å¯ä»¥ç”¨äºåˆ›å»ºæŠ¥å‘Šï¼Œæ·±å…¥å±•ç°ç»„ç»‡è¿è¡Œçš„æƒ…å†µï¼Œç“¶é¢ˆåœ¨å“ªé‡Œï¼Œç­‰ç­‰ã€‚</p>\n<p>ä¾‹å¦‚ï¼Œå¦‚æœå¸Œæœ›æ˜¾ç¤ºæµç¨‹å®ä¾‹å·²ç»æ‰§è¡Œçš„æ—¶é—´ï¼Œå°±å¯ä»¥ä»<em>ProcessEngine</em>è·å–<em>HistoryService</em>ï¼Œå¹¶åˆ›å»º*å†å²æ´»åŠ¨(historical activities)*çš„æŸ¥è¯¢ã€‚åœ¨ä¸‹é¢çš„ä»£ç ç‰‡æ®µä¸­ï¼Œå¯ä»¥çœ‹åˆ°æˆ‘ä»¬æ·»åŠ äº†ä¸€äº›é¢å¤–çš„è¿‡æ»¤æ¡ä»¶ï¼š</p>\n<ul>\n<li>åªé€‰æ‹©ä¸€ä¸ªç‰¹å®šæµç¨‹å®ä¾‹çš„æ´»åŠ¨</li>\n<li>åªé€‰æ‹©å·²å®Œæˆçš„æ´»åŠ¨</li>\n</ul>\n<p>ç»“æœæŒ‰ç…§ç»“æŸæ—¶é—´æ’åºï¼Œä»£è¡¨å…¶æ‰§è¡Œé¡ºåºã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * æŸ¥çœ‹å†å²</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">testQueryHistory</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// é…ç½®æ•°æ®åº“ç›¸å…³ä¿¡æ¯ è·å– ProcessEngineConfiguration</span></span><br><span class=\"line\">        <span class=\"type\">ProcessEngineConfiguration</span> <span class=\"variable\">cfg</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">StandaloneProcessEngineConfiguration</span>()</span><br><span class=\"line\">                .setJdbcUrl(<span class=\"string\">&quot;jdbc:mysql://localhost:3306/flowable-learn2?serverTimezone=UTC&amp;nullCatalogMeansCurrent=true&quot;</span>)</span><br><span class=\"line\">                .setJdbcUsername(<span class=\"string\">&quot;root&quot;</span>)</span><br><span class=\"line\">                .setJdbcPassword(<span class=\"string\">&quot;123456&quot;</span>)</span><br><span class=\"line\">                .setJdbcDriver(<span class=\"string\">&quot;com.mysql.cj.jdbc.Driver&quot;</span>)</span><br><span class=\"line\">                .setDatabaseSchemaUpdate(ProcessEngineConfiguration.DB_SCHEMA_UPDATE_TRUE);</span><br><span class=\"line\">        <span class=\"comment\">// è·å–æµç¨‹å¼•æ“å¯¹è±¡</span></span><br><span class=\"line\">        <span class=\"type\">ProcessEngine</span> <span class=\"variable\">processEngine</span> <span class=\"operator\">=</span> cfg.buildProcessEngine();</span><br><span class=\"line\">        <span class=\"type\">HistoryService</span> <span class=\"variable\">historyService</span> <span class=\"operator\">=</span> processEngine.getHistoryService();</span><br><span class=\"line\">        List&lt;HistoricActivityInstance&gt; list = historyService.createHistoricActivityInstanceQuery()</span><br><span class=\"line\">                .processDefinitionId(<span class=\"string\">&quot;holidayRequestNew:1:10003&quot;</span>)</span><br><span class=\"line\">                .finished()</span><br><span class=\"line\">                .orderByHistoricActivityInstanceEndTime().asc()</span><br><span class=\"line\">                .list();</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (HistoricActivityInstance historicActivityInstance : list) &#123;</span><br><span class=\"line\">            System.out.println(historicActivityInstance.getActivityId() + <span class=\"string\">&quot; took &quot;</span></span><br><span class=\"line\">                    + historicActivityInstance.getDurationInMillis() + <span class=\"string\">&quot; milliseconds&quot;</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n\n<p>è¾“å‡ºç»“æœ</p>\n<figure class=\"highlight txt\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">startEvent took 1 milliseconds</span><br><span class=\"line\">approveTask took 837735 milliseconds</span><br><span class=\"line\">decision took 13 milliseconds</span><br><span class=\"line\">sendRejectionMail took 2 milliseconds</span><br><span class=\"line\">rejectEnd took 1 milliseconds</span><br></pre></td></tr></table></figure>\n\n<p>å¥½äº†~flowableçš„åŸºæœ¬åº”ç”¨æˆ‘ä»¬å°±å…ˆä»‹ç»åˆ°è¿™é‡Œäº†ã€‚</p>\n<h1 id=\"Flowableæµç¨‹è®¾è®¡å™¨\"><a href=\"#Flowableæµç¨‹è®¾è®¡å™¨\" class=\"headerlink\" title=\"Flowableæµç¨‹è®¾è®¡å™¨\"></a>Flowableæµç¨‹è®¾è®¡å™¨</h1><h2 id=\"Eclipse-Designer\"><a href=\"#Eclipse-Designer\" class=\"headerlink\" title=\"Eclipse Designer\"></a>Eclipse Designer</h2><p>Flowableæä¾›äº†åä¸ºFlowable Eclipse Designerçš„Eclipseæ’ä»¶ï¼Œå¯ä»¥ç”¨äºå›¾å½¢åŒ–åœ°å»ºæ¨¡ã€æµ‹è¯•ä¸éƒ¨ç½²BPMN 2.0æµç¨‹ã€‚</p>\n<h3 id=\"ä¸‹è½½å®‰è£…Eclipse\"><a href=\"#ä¸‹è½½å®‰è£…Eclipse\" class=\"headerlink\" title=\"ä¸‹è½½å®‰è£…Eclipse\"></a>ä¸‹è½½å®‰è£…Eclipse</h3><p>å»Eclipseå®˜ç½‘ä¸‹è½½å³å¯ï¼š<a class=\"link\"   href=\"https://www.eclipse.org/downloads/packages/release\" >https://www.eclipse.org/downloads/packages/release<i class=\"fas fa-external-link-alt\"></i></a> æ³¨æ„2020-09åçš„ç‰ˆæœ¬ä¸å†æ”¯æŒjdk8</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316202904261.png\"\n                      alt=\"image-20220316202904261\"\n                ></p>\n<p>è§£å‹ç¼©å°±å¯ä»¥äº†ï¼Œç„¶åè¿›å…¥è§£å‹ç¼©çš„ç›®å½•</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316203036602.png\"\n                      alt=\"image-20220316203036602\"\n                ></p>\n<p>ç›´æ¥å¯åŠ¨å³å¯</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316203111301.png\"\n                      alt=\"image-20220316203111301\"\n                ></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316203237316.png\"\n                      alt=\"image-20220316203237316\"\n                ></p>\n<h3 id=\"å®‰è£…Flowableæ’ä»¶\"><a href=\"#å®‰è£…Flowableæ’ä»¶\" class=\"headerlink\" title=\"å®‰è£…Flowableæ’ä»¶\"></a>å®‰è£…Flowableæ’ä»¶</h3><p>ç„¶åæˆ‘ä»¬å†å®‰è£…ä¸‹Flowableçš„æ’ä»¶ï¼Œé€‰æ‹©<strong>Help â†’ Install New Software</strong>ã€‚åœ¨ä¸‹å›¾é¢æ¿ä¸­ï¼Œç‚¹å‡»<em>Add</em>æŒ‰é’®ï¼Œå¹¶å¡«å†™ä¸‹åˆ—å­—æ®µ</p>\n<ul>\n<li><strong>Name:</strong> Flowable BPMN 2.0 designer</li>\n<li><strong>Location:</strong> <a class=\"link\"   href=\"http://www.flowable.org/designer/update/\" >http://www.flowable.org/designer/update/<i class=\"fas fa-external-link-alt\"></i></a></li>\n</ul>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316203454281.png\"\n                      alt=\"image-20220316203454281\"\n                ></p>\n<p>è¿™ç§åœ¨çº¿æ›´æ–°çš„æ–¹å¼å·²ç»è¢«å®˜ç½‘ç§»é™¤äº†ï¼Œæ“ä½œä¸äº†</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316211319931.png\"\n                      alt=\"image-20220316211319931\"\n                ></p>\n<p>è¿™æ—¶æˆ‘ä»¬å°±åªèƒ½é€šè¿‡ç¦»çº¿å®‰è£…çš„æ–¹å¼æ¥å®ç°äº†ï¼Œä¸‹è½½å¯¹åº”çš„ç¦»çº¿æ–‡ä»¶</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316211405001.png\"\n                      alt=\"image-20220316211405001\"\n                ></p>\n<p>å®‰è£…æ­¥éª¤æ¥æ“ä½œï¼Œ</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316211518520.png\"\n                      alt=\"image-20220316211518520\"\n                ></p>\n<p>ç„¶åç»§ç»­ï¼šé€‰æ‹©<strong>Help â†’ Install New Software</strong></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316211622115.png\"\n                      alt=\"image-20220316211622115\"\n                ></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316211651195.png\"\n                      alt=\"image-20220316211651195\"\n                ></p>\n<p>ä¸‹ä¸€æ­¥</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316211729581.png\"\n                      alt=\"image-20220316211729581\"\n                ></p>\n<p>å†ä¸‹ä¸€æ­¥</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316211802548.png\"\n                      alt=\"image-20220316211802548\"\n                ></p>\n<p>ç„¶åfinishã€‚å¼¹å‡ºå¦‚ä¸‹çª—å£</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316212008477.png\"\n                      alt=\"image-20220316212008477\"\n                ></p>\n<p>é‡å¯å³å¯</p>\n<h3 id=\"åˆ›å»ºé¡¹ç›®\"><a href=\"#åˆ›å»ºé¡¹ç›®\" class=\"headerlink\" title=\"åˆ›å»ºé¡¹ç›®\"></a>åˆ›å»ºé¡¹ç›®</h3><p>ç„¶åæˆ‘ä»¬å°±å¯ä»¥åˆ›å»ºä¸€ä¸ªFlowable Projectäº†</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316212418899.png\"\n                      alt=\"image-20220316212418899\"\n                ></p>\n<p>ç„¶åæˆ‘ä»¬å¯ä»¥åœ¨src&#x2F;mian&#x2F;resources&#x2F; çš„ç›®å½•ä¸‹åˆ›å»ºå¯¹åº”çš„æµç¨‹å›¾äº†</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316212605146.png\"\n                      alt=\"image-20220316212605146\"\n                ></p>\n<p>çœ‹åˆ°å¦‚ä¸‹çš„ç•Œé¢è¯´æ˜æ’ä»¶å®‰è£…æˆåŠŸäº†</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316212720767.png\"\n                      alt=\"image-20220316212720767\"\n                ></p>\n<h3 id=\"åˆ›å»ºæµç¨‹å›¾\"><a href=\"#åˆ›å»ºæµç¨‹å›¾\" class=\"headerlink\" title=\"åˆ›å»ºæµç¨‹å›¾\"></a>åˆ›å»ºæµç¨‹å›¾</h3><p>ä½¿ç”¨æ»‘æ¿æ¥ç»˜åˆ¶æµç¨‹ï¼Œé€šè¿‡ä»å³ä¾§æŠŠå›¾æ ‡æ‹–æ‹½åˆ°å·¦ä¾§çš„é¢æ¿ï¼Œæœ€ç»ˆçš„æ•ˆæœ</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316214339678.png\"\n                      alt=\"image-20220316214339678\"\n                ></p>\n<p>æŒ‡å®šæµç¨‹çš„ä¸»é”®</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316214430644.png\"\n                      alt=\"image-20220316214430644\"\n                ></p>\n<p>æŒ‡å®šä»»åŠ¡çš„è´Ÿè´£äºº</p>\n<p>åœ¨Propertiesè§†å›¾ä¸­æŒ‡å®šæ¯ä¸ªä»»åŠ¡èŠ‚ç‚¹çš„è´Ÿè´£äºº</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316214700887.png\"\n                      alt=\"image-20220316214700887\"\n                ></p>\n<p>åˆ›å»ºè¯·å‡å•ï¼šzhangsan</p>\n<p>å®¡æ‰¹è¯·å‡å•ï¼šlisi</p>\n<p>å½“æˆ‘ä»¬è®¾ç½®å®Œæˆåä¿å­˜æ–‡ä»¶ï¼Œä¼šåŒæ—¶ç”Ÿæˆpngå›¾ç‰‡</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316214808400.png\"\n                      alt=\"image-20220316214808400\"\n                ></p>\n<p>æ³¨æ„ï¼šç”Ÿæˆå›¾ç‰‡éœ€è¦å¦‚ä¸‹é…ç½®</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316214256235.png\"\n                      alt=\"image-20220316214256235\"\n                ></p>\n<h3 id=\"éƒ¨ç½²æµç¨‹\"><a href=\"#éƒ¨ç½²æµç¨‹\" class=\"headerlink\" title=\"éƒ¨ç½²æµç¨‹\"></a>éƒ¨ç½²æµç¨‹</h3><p>é¦–å…ˆåœ¨Eclipseä¸­ç”Ÿæˆbaræ–‡ä»¶ï¼Œé€‰ä¸­é¡¹ç›®ç„¶åé¼ æ ‡å³å‡»</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316215805503.png\"\n                      alt=\"image-20220316215805503\"\n                ></p>\n<p>ç„¶åä¼šå‘ç°åœ¨é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹å¤šäº†ä¸€ä¸ªdeploymentæ–‡ä»¶å¤¹ï¼Œé‡Œé¢å¤šäº†ä¸€ä¸ªMyProcess.baræ–‡ä»¶</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316215900052.png\"\n                      alt=\"image-20220316215900052\"\n                ></p>\n<p>ç„¶åæˆ‘ä»¬å°±å¯ä»¥æŠŠè¿™ä¸ªbaræ–‡ä»¶æ‹·è´åˆ°IDEAä¸­ï¼Œç»§ç»­éƒ¨ç½²çš„æµç¨‹</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316215945236.png\"\n                      alt=\"image-20220316215945236\"\n                ></p>\n<p>è€Œéƒ¨ç½²çš„ä»£ç å’Œå‰é¢æ²¡å•¥åŒºåˆ«</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">testDeploy</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// 1.è·å– ProcessEngine å¯¹è±¡</span></span><br><span class=\"line\">    <span class=\"type\">ProcessEngine</span> <span class=\"variable\">processEngine</span> <span class=\"operator\">=</span> configuration.buildProcessEngine();</span><br><span class=\"line\">    <span class=\"comment\">// 2.è·å–RepositoryService</span></span><br><span class=\"line\">    <span class=\"type\">RepositoryService</span> <span class=\"variable\">repositoryService</span> <span class=\"operator\">=</span> processEngine.getRepositoryService();</span><br><span class=\"line\">    <span class=\"type\">InputStream</span> <span class=\"variable\">in</span> <span class=\"operator\">=</span> <span class=\"built_in\">this</span>.getClass().getClassLoader().getResourceAsStream(<span class=\"string\">&quot;MyHoliday.bar&quot;</span>);</span><br><span class=\"line\">    <span class=\"type\">ZipInputStream</span> <span class=\"variable\">zipInputStream</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">ZipInputStream</span>(in);</span><br><span class=\"line\">    <span class=\"comment\">// 3.å®Œæˆæµç¨‹çš„éƒ¨ç½²æ“ä½œ ZIP æˆ–è€… Baræ–‡ä»¶</span></span><br><span class=\"line\">    <span class=\"type\">Deployment</span> <span class=\"variable\">deploy</span> <span class=\"operator\">=</span> repositoryService.createDeployment()</span><br><span class=\"line\">           <span class=\"comment\">// .addClasspathResource(&quot;MyHoliday.bar&quot;)// å…³è”è¦éƒ¨ç½²çš„æµç¨‹æ–‡ä»¶</span></span><br><span class=\"line\">            .addZipInputStream(zipInputStream)</span><br><span class=\"line\">            .name(<span class=\"string\">&quot;XXXå…¬å¸è¯·æ±‚æµç¨‹&quot;</span>)</span><br><span class=\"line\">            .deploy() ;<span class=\"comment\">// éƒ¨ç½²æµç¨‹</span></span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;deploy.getId() = &quot;</span> + deploy.getId());</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;deploy.getName() = &quot;</span> + deploy.getName());</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>æ‰§è¡ŒåæŸ¥çœ‹è¡¨ç»“æ„ï¼Œç›¸å…³çš„ä¿¡æ¯å°±è¿›å»äº†</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316220121734.png\"\n                      alt=\"image-20220316220121734\"\n                ></p>\n<p>å®Œæ•´çš„æ¡ˆä¾‹ä»£ç ï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.bobo.flowable.test;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> org.flowable.engine.*;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.flowable.engine.history.HistoricActivityInstance;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.flowable.engine.impl.cfg.StandaloneProcessEngineConfiguration;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.flowable.engine.repository.Deployment;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.flowable.engine.runtime.ProcessInstance;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.flowable.task.api.Task;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.junit.Before;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.junit.Test;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.InputStream;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.HashMap;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.List;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.Map;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.zip.ZipInputStream;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">Test02</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"type\">ProcessEngineConfiguration</span> <span class=\"variable\">configuration</span> <span class=\"operator\">=</span> <span class=\"literal\">null</span>;</span><br><span class=\"line\">    <span class=\"meta\">@Before</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">before</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// è·å–  ProcessEngineConfiguration å¯¹è±¡</span></span><br><span class=\"line\">        configuration = <span class=\"keyword\">new</span> <span class=\"title class_\">StandaloneProcessEngineConfiguration</span>();</span><br><span class=\"line\">        <span class=\"comment\">// é…ç½® ç›¸å…³çš„æ•°æ®åº“çš„è¿æ¥ä¿¡æ¯</span></span><br><span class=\"line\">        configuration.setJdbcDriver(<span class=\"string\">&quot;com.mysql.cj.jdbc.Driver&quot;</span>);</span><br><span class=\"line\">        configuration.setJdbcUsername(<span class=\"string\">&quot;root&quot;</span>);</span><br><span class=\"line\">        configuration.setJdbcPassword(<span class=\"string\">&quot;123456&quot;</span>);</span><br><span class=\"line\">        configuration.setJdbcUrl(<span class=\"string\">&quot;jdbc:mysql://localhost:3306/flowable-learn?serverTimezone=UTC&amp;nullCatalogMeansCurrent=true&quot;</span>);</span><br><span class=\"line\">        <span class=\"comment\">// å¦‚æœæ•°æ®åº“ä¸­çš„è¡¨ç»“æ„ä¸å­˜åœ¨å°±æ–°å»º</span></span><br><span class=\"line\">        configuration.setDatabaseSchemaUpdate(ProcessEngineConfiguration.DB_SCHEMA_UPDATE_TRUE);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * éƒ¨ç½²æµç¨‹</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">testDeploy</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// 1.è·å– ProcessEngine å¯¹è±¡</span></span><br><span class=\"line\">        <span class=\"type\">ProcessEngine</span> <span class=\"variable\">processEngine</span> <span class=\"operator\">=</span> configuration.buildProcessEngine();</span><br><span class=\"line\">        <span class=\"comment\">// 2.è·å–RepositoryService</span></span><br><span class=\"line\">        <span class=\"type\">RepositoryService</span> <span class=\"variable\">repositoryService</span> <span class=\"operator\">=</span> processEngine.getRepositoryService();</span><br><span class=\"line\">        <span class=\"type\">InputStream</span> <span class=\"variable\">in</span> <span class=\"operator\">=</span> <span class=\"built_in\">this</span>.getClass().getClassLoader().getResourceAsStream(<span class=\"string\">&quot;MyHoliday.bar&quot;</span>);</span><br><span class=\"line\">        <span class=\"type\">ZipInputStream</span> <span class=\"variable\">zipInputStream</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">ZipInputStream</span>(in);</span><br><span class=\"line\">        <span class=\"comment\">// 3.å®Œæˆæµç¨‹çš„éƒ¨ç½²æ“ä½œ ZIP æˆ–è€… Baræ–‡ä»¶</span></span><br><span class=\"line\">        <span class=\"type\">Deployment</span> <span class=\"variable\">deploy</span> <span class=\"operator\">=</span> repositoryService.createDeployment()</span><br><span class=\"line\">               <span class=\"comment\">// .addClasspathResource(&quot;MyHoliday.bar&quot;)// å…³è”è¦éƒ¨ç½²çš„æµç¨‹æ–‡ä»¶</span></span><br><span class=\"line\">                .addZipInputStream(zipInputStream)</span><br><span class=\"line\">                .name(<span class=\"string\">&quot;XXXå…¬å¸è¯·æ±‚æµç¨‹&quot;</span>)</span><br><span class=\"line\">                .deploy() ;<span class=\"comment\">// éƒ¨ç½²æµç¨‹</span></span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;deploy.getId() = &quot;</span> + deploy.getId());</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;deploy.getName() = &quot;</span> + deploy.getName());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * å¯åŠ¨æµç¨‹å®ä¾‹</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">testRunProcess</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">        <span class=\"type\">ProcessEngine</span> <span class=\"variable\">processEngine</span> <span class=\"operator\">=</span> configuration.buildProcessEngine();</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// æˆ‘ä»¬éœ€è¦é€šè¿‡RuntimeServiceæ¥å¯åŠ¨æµç¨‹å®ä¾‹</span></span><br><span class=\"line\">        <span class=\"type\">RuntimeService</span> <span class=\"variable\">runtimeService</span> <span class=\"operator\">=</span> processEngine.getRuntimeService();</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// å¯åŠ¨æµç¨‹å®ä¾‹</span></span><br><span class=\"line\">        <span class=\"type\">ProcessInstance</span> <span class=\"variable\">holidayRequest</span> <span class=\"operator\">=</span> runtimeService.startProcessInstanceById(<span class=\"string\">&quot;myProcess:1:25004&quot;</span>);</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;holidayRequest.getProcessDefinitionId() = &quot;</span> + holidayRequest.getProcessDefinitionId());</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;holidayRequest.getActivityId() = &quot;</span> + holidayRequest.getActivityId());</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;holidayRequest.getId() = &quot;</span> + holidayRequest.getId());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * æµ‹è¯•ä»»åŠ¡æŸ¥è¯¢</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">testQueryTask</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">        <span class=\"type\">ProcessEngine</span> <span class=\"variable\">processEngine</span> <span class=\"operator\">=</span> configuration.buildProcessEngine();</span><br><span class=\"line\">        <span class=\"type\">TaskService</span> <span class=\"variable\">taskService</span> <span class=\"operator\">=</span> processEngine.getTaskService();</span><br><span class=\"line\">        List&lt;Task&gt; list = taskService.createTaskQuery()</span><br><span class=\"line\">                .processDefinitionKey(<span class=\"string\">&quot;myProcess&quot;</span>) <span class=\"comment\">// æŒ‡å®šæŸ¥è¯¢çš„æµç¨‹ç¼–ç¨‹</span></span><br><span class=\"line\">                .taskAssignee(<span class=\"string\">&quot;zhangsan&quot;</span>) <span class=\"comment\">// æŸ¥è¯¢è¿™ä¸ªä»»åŠ¡çš„å¤„ç†äºº</span></span><br><span class=\"line\">                .list();</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (Task task : list) &#123;</span><br><span class=\"line\">            System.out.println(<span class=\"string\">&quot;task.getProcessDefinitionId() = &quot;</span> + task.getProcessDefinitionId());</span><br><span class=\"line\">            System.out.println(<span class=\"string\">&quot;task.getName() = &quot;</span> + task.getName());</span><br><span class=\"line\">            System.out.println(<span class=\"string\">&quot;task.getAssignee() = &quot;</span> + task.getAssignee());</span><br><span class=\"line\">            System.out.println(<span class=\"string\">&quot;task.getDescription() = &quot;</span> + task.getDescription());</span><br><span class=\"line\">            System.out.println(<span class=\"string\">&quot;task.getId() = &quot;</span> + task.getId());</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * å®Œæˆå½“å‰ä»»åŠ¡</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">testCompleteTask</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">        <span class=\"type\">ProcessEngine</span> <span class=\"variable\">processEngine</span> <span class=\"operator\">=</span> configuration.buildProcessEngine();</span><br><span class=\"line\">        <span class=\"type\">TaskService</span> <span class=\"variable\">taskService</span> <span class=\"operator\">=</span> processEngine.getTaskService();</span><br><span class=\"line\">        <span class=\"type\">Task</span> <span class=\"variable\">task</span> <span class=\"operator\">=</span> taskService.createTaskQuery()</span><br><span class=\"line\">                .processDefinitionKey(<span class=\"string\">&quot;myProcess&quot;</span>)</span><br><span class=\"line\">                .taskAssignee(<span class=\"string\">&quot;lisi&quot;</span>)</span><br><span class=\"line\">                .singleResult();</span><br><span class=\"line\">        <span class=\"comment\">// åˆ›å»ºæµç¨‹å˜é‡</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span>(task != <span class=\"literal\">null</span>)&#123;</span><br><span class=\"line\">            <span class=\"comment\">// å®Œæˆä»»åŠ¡</span></span><br><span class=\"line\">            taskService.complete(task.getId());</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * è·å–æµç¨‹ä»»åŠ¡çš„å†å²æ•°æ®</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">testHistory</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">        <span class=\"type\">ProcessEngine</span> <span class=\"variable\">processEngine</span> <span class=\"operator\">=</span> configuration.buildProcessEngine();</span><br><span class=\"line\">        <span class=\"type\">HistoryService</span> <span class=\"variable\">historyService</span> <span class=\"operator\">=</span> processEngine.getHistoryService();</span><br><span class=\"line\">        List&lt;HistoricActivityInstance&gt; list = historyService.createHistoricActivityInstanceQuery()</span><br><span class=\"line\">                .processDefinitionId(<span class=\"string\">&quot;myProcess:1:25004&quot;</span>)</span><br><span class=\"line\">                .finished() <span class=\"comment\">// æŸ¥è¯¢çš„å†å²è®°å½•çš„çŠ¶æ€æ˜¯å·²ç»å®Œæˆ</span></span><br><span class=\"line\">                .orderByHistoricActivityInstanceEndTime().asc() <span class=\"comment\">// æŒ‡å®šæ’åºçš„å­—æ®µå’Œé¡ºåº</span></span><br><span class=\"line\">                .list();</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (HistoricActivityInstance history : list) &#123;</span><br><span class=\"line\">            System.out.println(history.getActivityName()+<span class=\"string\">&quot;:&quot;</span>+history.getAssignee()+<span class=\"string\">&quot;--&quot;</span></span><br><span class=\"line\">                    +history.getActivityId()+<span class=\"string\">&quot;:&quot;</span> + history.getDurationInMillis()+<span class=\"string\">&quot;æ¯«ç§’&quot;</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n\n\n<h2 id=\"Flowable-UIåº”ç”¨\"><a href=\"#Flowable-UIåº”ç”¨\" class=\"headerlink\" title=\"Flowable UIåº”ç”¨\"></a>Flowable UIåº”ç”¨</h2><p>Flowableæä¾›äº†å‡ ä¸ªwebåº”ç”¨ï¼Œç”¨äºæ¼”ç¤ºåŠä»‹ç»Flowableé¡¹ç›®æä¾›çš„åŠŸèƒ½ï¼š</p>\n<ul>\n<li>Flowable IDM: èº«ä»½ç®¡ç†åº”ç”¨ã€‚ä¸ºæ‰€æœ‰Flowable UIåº”ç”¨æä¾›å•ç‚¹ç™»å½•è®¤è¯åŠŸèƒ½ï¼Œå¹¶ä¸”ä¸ºæ‹¥æœ‰IDMç®¡ç†å‘˜æƒé™çš„ç”¨æˆ·æä¾›äº†ç®¡ç†ç”¨æˆ·ã€ç»„ä¸æƒé™çš„åŠŸèƒ½ã€‚</li>\n<li>Flowable Modeler: è®©å…·æœ‰å»ºæ¨¡æƒé™çš„ç”¨æˆ·å¯ä»¥åˆ›å»ºæµç¨‹æ¨¡å‹ã€è¡¨å•ã€é€‰æ‹©è¡¨ä¸åº”ç”¨å®šä¹‰ã€‚</li>\n<li>Flowable Task: è¿è¡Œæ—¶ä»»åŠ¡åº”ç”¨ã€‚æä¾›äº†å¯åŠ¨æµç¨‹å®ä¾‹ã€ç¼–è¾‘ä»»åŠ¡è¡¨å•ã€å®Œæˆä»»åŠ¡ï¼Œä»¥åŠæŸ¥è¯¢æµç¨‹å®ä¾‹ä¸ä»»åŠ¡çš„åŠŸèƒ½ã€‚</li>\n<li>Flowable Admin: ç®¡ç†åº”ç”¨ã€‚è®©å…·æœ‰ç®¡ç†å‘˜æƒé™çš„ç”¨æˆ·å¯ä»¥æŸ¥è¯¢BPMNã€DMNã€FormåŠContentå¼•æ“ï¼Œå¹¶æä¾›äº†è®¸å¤šé€‰é¡¹ç”¨äºä¿®æ”¹æµç¨‹å®ä¾‹ã€ä»»åŠ¡ã€ä½œä¸šç­‰ã€‚ç®¡ç†åº”ç”¨é€šè¿‡REST APIè¿æ¥è‡³å¼•æ“ï¼Œå¹¶ä¸Flowable Taskåº”ç”¨åŠFlowable RESTåº”ç”¨ä¸€åŒéƒ¨ç½²ã€‚</li>\n</ul>\n<p>æ‰€æœ‰å…¶ä»–çš„åº”ç”¨éƒ½éœ€è¦Flowable IDMæä¾›è®¤è¯ã€‚æ¯ä¸ªåº”ç”¨çš„WARæ–‡ä»¶å¯ä»¥éƒ¨ç½²åœ¨ç›¸åŒçš„servletå®¹å™¨ï¼ˆå¦‚Apache Tomcatï¼‰ä¸­ï¼Œä¹Ÿå¯ä»¥éƒ¨ç½²åœ¨ä¸åŒçš„å®¹å™¨ä¸­ã€‚ç”±äºæ¯ä¸ªåº”ç”¨ä½¿ç”¨ç›¸åŒçš„cookieè¿›è¡Œè®¤è¯ï¼Œå› æ­¤åº”ç”¨éœ€è¦è¿è¡Œåœ¨ç›¸åŒçš„åŸŸåä¸‹ã€‚</p>\n<h3 id=\"å®‰è£…éƒ¨ç½²\"><a href=\"#å®‰è£…éƒ¨ç½²\" class=\"headerlink\" title=\"å®‰è£…éƒ¨ç½²\"></a>å®‰è£…éƒ¨ç½²</h3><p>ä¸‹è½½Tomcatï¼š<a class=\"link\"   href=\"https://tomcat.apache.org/download-80.cgi\" >https://tomcat.apache.org/download-80.cgi<i class=\"fas fa-external-link-alt\"></i></a> å®˜ç½‘ä¸‹è½½åè§£å‹ç¼©åˆ°éä¸­æ–‡ç›®å½•å³å¯ï¼Œç„¶åæ˜¯ä¸‹è½½FlowableUIçš„æ–‡ä»¶ï¼Œåœ¨Flowable6.6ä¹‹åæŠŠFlowableUIä¸­æä¾›çš„å››ä¸ªåŠŸèƒ½åˆå¹¶åˆ°äº†ä¸€èµ·ã€‚</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220318102128672.png\"\n                      alt=\"image-20220318102128672\"\n                ></p>\n<p>ç„¶åæŠŠè§£å‹ç¼©åçš„ä¸¤ä¸ªwaråŒ…æ‹·è´åˆ°Tomcatçš„è§£å‹ç¼©çš„webappsç›®å½•ä¸‹</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220318102224330.png\"\n                      alt=\"image-20220318102224330\"\n                ></p>\n<p>Tomcatç›®å½•ï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220318102255188.png\"\n                      alt=\"image-20220318102255188\"\n                ></p>\n<h3 id=\"å¯åŠ¨æœåŠ¡\"><a href=\"#å¯åŠ¨æœåŠ¡\" class=\"headerlink\" title=\"å¯åŠ¨æœåŠ¡\"></a>å¯åŠ¨æœåŠ¡</h3><p>å¯åŠ¨TomcatæœåŠ¡ï¼Œæ‰§è¡Œstartup.batæ–‡ä»¶</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220318102325924.png\"\n                      alt=\"image-20220318102325924\"\n                ></p>\n<p>å¦‚æœå¯åŠ¨ä¸­å‡ºç°ä¹±ç ä¿®æ”¹Tomcatçš„confç›®å½•ä¸‹çš„ logging.properties æ–‡ä»¶ä¸­çš„ç¼–ç </p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220318102446699.png\"\n                      alt=\"image-20220318102446699\"\n                ></p>\n<p>å¦‚æœä¸€é—ªè€Œè¿‡åˆ™æ£€æŸ¥jdkçš„ç¯å¢ƒå˜é‡é…ç½®ã€‚å¯åŠ¨æˆåŠŸåï¼Œåœ¨æµè§ˆå™¨ä¸­è®¿é—® <a class=\"link\"   href=\"http://localhost:8080/flowable-ui\" >http://localhost:8080/flowable-ui<i class=\"fas fa-external-link-alt\"></i></a>, é»˜è®¤çš„è´¦å·å¯†ç æ˜¯ admin&#x2F;test</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220318102609807.png\"\n                      alt=\"image-20220318102609807\"\n                ></p>\n<h3 id=\"ç”¨æˆ·ç®¡ç†\"><a href=\"#ç”¨æˆ·ç®¡ç†\" class=\"headerlink\" title=\"ç”¨æˆ·ç®¡ç†\"></a>ç”¨æˆ·ç®¡ç†</h3><p>æˆ‘ä»¬å…ˆåœ¨ <code>èº«ä»½ç®¡ç†åº”ç”¨ç¨‹åº</code> ä¸­åˆ›å»ºç”¨æˆ·å¹¶æˆæƒ</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220318102707368.png\"\n                      alt=\"image-20220318102707368\"\n                ></p>\n<p>åˆ›å»ºç”¨æˆ·</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220318102734238.png\"\n                      alt=\"image-20220318102734238\"\n                ></p>\n<p>å¡«å†™è¯¦ç»†ä¿¡æ¯</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220318102817782.png\"\n                      alt=\"image-20220318102817782\"\n                ></p>\n<p>æˆæƒç®¡ç†</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220318102859814.png\"\n                      alt=\"image-20220318102859814\"\n                ></p>\n<h3 id=\"ç»˜åˆ¶æµç¨‹\"><a href=\"#ç»˜åˆ¶æµç¨‹\" class=\"headerlink\" title=\"ç»˜åˆ¶æµç¨‹\"></a>ç»˜åˆ¶æµç¨‹</h3><p>åˆ›å»ºæ–°çš„æµç¨‹</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220318101239742.png\"\n                      alt=\"image-20220318101239742\"\n                ></p>\n<p>æµç¨‹å›¾ç•Œé¢</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220318101346692.png\"\n                      alt=\"image-20220318101346692\"\n                ></p>\n<p>åˆ›å»ºæµç¨‹ï¼Œåˆ†é…å¤„ç†äºº</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220318101639424.png\"\n                      alt=\"image-20220318101639424\"\n                ></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220318101611564.png\"\n                      alt=\"image-20220318101611564\"\n                ></p>\n<p>ç»§ç»­å®Œæˆæµç¨‹å›¾çš„åˆ›å»º</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220318101810272.png\"\n                      alt=\"image-20220318101810272\"\n                ></p>\n<h3 id=\"éƒ¨ç½²æµç¨‹-1\"><a href=\"#éƒ¨ç½²æµç¨‹-1\" class=\"headerlink\" title=\"éƒ¨ç½²æµç¨‹\"></a>éƒ¨ç½²æµç¨‹</h3><p>ç»˜åˆ¶å¥½çš„æµç¨‹å›¾ï¼Œæˆ‘ä»¬åªéœ€è¦ä¸€é”®å¯¼å‡ºå³å¯</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220318103413285.png\"\n                      alt=\"image-20220318103413285\"\n                ></p>\n<p>ä¸‹è½½ä¸‹æ¥åæ‹·è´åˆ°é¡¹ç›®çš„resourceç›®å½•ä¸‹å³å¯</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220318103518807.png\"\n                      alt=\"image-20220318103518807\"\n                ></p>\n<p>ç„¶åå°±æ˜¯æ­£å¸¸çš„æ“ä½œæµç¨‹äº†</p>\n<h3 id=\"FlowableUI-æ¼”ç¤º\"><a href=\"#FlowableUI-æ¼”ç¤º\" class=\"headerlink\" title=\"FlowableUI æ¼”ç¤º\"></a>FlowableUI æ¼”ç¤º</h3><h4 id=\"éƒ¨ç½²æµç¨‹-2\"><a href=\"#éƒ¨ç½²æµç¨‹-2\" class=\"headerlink\" title=\"éƒ¨ç½²æµç¨‹\"></a>éƒ¨ç½²æµç¨‹</h4><p>åœ¨FlowableUIä¸­æä¾›äº†æ¼”ç¤ºç¨‹åº</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220318104517967.png\"\n                      alt=\"image-20220318104517967\"\n                ></p>\n<p>åˆ›å»ºä¸€ä¸ªæ–°çš„åº”ç”¨ç¨‹åºï¼Œå¹¶æŒ‡å®šç›¸å…³çš„ä¿¡æ¯</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220318104614784.png\"\n                      alt=\"image-20220318104614784\"\n                ></p>\n<p>åˆ›å»ºåº”ç”¨åéœ€è¦æŒ‡å®šå¯¹åº”çš„æµç¨‹å›¾</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220318104703306.png\"\n                      alt=\"image-20220318104703306\"\n                ></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220318104735714.png\"\n                      alt=\"image-20220318104735714\"\n                ></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220318104811812.png\"\n                      alt=\"image-20220318104811812\"\n                ></p>\n<p>å‘å¸ƒåº”ç”¨ç¨‹åº</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220318105045345.png\"\n                      alt=\"image-20220318105045345\"\n                ></p>\n<h4 id=\"å¯åŠ¨æµç¨‹\"><a href=\"#å¯åŠ¨æµç¨‹\" class=\"headerlink\" title=\"å¯åŠ¨æµç¨‹\"></a>å¯åŠ¨æµç¨‹</h4><p>å‘å¸ƒäº†åº”ç”¨ç¨‹åºåæˆ‘ä»¬å°±å¯ä»¥æ¥å¯åŠ¨æµç¨‹äº†</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220318105258331.png\"\n                      alt=\"image-20220318105258331\"\n                ></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220318105315908.png\"\n                      alt=\"image-20220318105315908\"\n                ></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220318105336107.png\"\n                      alt=\"image-20220318105336107\"\n                ></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220318105420011.png\"\n                      alt=\"image-20220318105420011\"\n                ></p>\n<p>ç‚¹å‡»æ˜¾ç¤ºå›¾ï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220318105444672.png\"\n                      alt=\"image-20220318105444672\"\n                ></p>\n<p>ä¹Ÿå°±æ˜¯å¯ä»¥çœ‹åˆ°å½“å‰æ˜¯user1æ¥å¤„ç†ï¼Œuser1ç™»å½•åå¯ä»¥çœ‹åˆ°è¦å¤„ç†çš„æµç¨‹ï¼Œuser2ç™»å½•æ˜¯çœ‹ä¸åˆ°çš„ã€‚</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220318105646273.png\"\n                      alt=\"image-20220318105646273\"\n                ></p>\n<p>ç‚¹å‡»å®Œæˆåæµç¨‹å°±å‘ä¸‹ä¸€æ­¥æµè½¬äº†</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220318105727192.png\"\n                      alt=\"image-20220318105727192\"\n                ></p>\n<p>è¿™æ—¶å†é€šè¿‡user2ç™»å½•ï¼Œå°±å¯ä»¥çœ‹åˆ°å¯¹åº”çš„ä»£åŠçš„ä¿¡æ¯</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220318105808830.png\"\n                      alt=\"image-20220318105808830\"\n                ></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220318105848185.png\"\n                      alt=\"image-20220318105848185\"\n                ></p>\n<p>ç„¶åç‚¹å‡»å®Œæˆï¼Œé‚£ä¹ˆæ•´ä¸ªæµç¨‹å°±ä»‹ç»äº†</p>\n<h1 id=\"FlowableåŸºç¡€è¡¨ç»“æ„\"><a href=\"#FlowableåŸºç¡€è¡¨ç»“æ„\" class=\"headerlink\" title=\"FlowableåŸºç¡€è¡¨ç»“æ„\"></a>FlowableåŸºç¡€è¡¨ç»“æ„</h1><h2 id=\"è¡¨ç»“æ„è®²è§£\"><a href=\"#è¡¨ç»“æ„è®²è§£\" class=\"headerlink\" title=\"è¡¨ç»“æ„è®²è§£\"></a>è¡¨ç»“æ„è®²è§£</h2><p>å·¥ä½œæµç¨‹çš„ç›¸å…³æ“ä½œéƒ½æ˜¯æ“ä½œå­˜å‚¨åœ¨å¯¹åº”çš„è¡¨ç»“æ„ä¸­ï¼Œä¸ºäº†èƒ½æ›´å¥½çš„å¼„æ¸…æ¥šFlowableçš„å®ç°åŸç†å’Œç»†èŠ‚ï¼Œæˆ‘ä»¬æœ‰å¿…è¦å…ˆå¼„æ¸…æ¥šFlowableçš„ç›¸å…³è¡¨ç»“æ„åŠå…¶ä½œç”¨ã€‚åœ¨Flowableä¸­çš„è¡¨ç»“æ„åœ¨åˆå§‹åŒ–çš„æ—¶å€™ä¼šåˆ›å»ºäº”ç±»è¡¨ç»“æ„ï¼Œå…·ä½“å¦‚ä¸‹ï¼š</p>\n<ul>\n<li><strong>ACT_RE</strong> ï¼šâ€™REâ€™è¡¨ç¤º repositoryã€‚ è¿™ä¸ªå‰ç¼€çš„è¡¨åŒ…å«äº†æµç¨‹å®šä¹‰å’Œæµç¨‹é™æ€èµ„æº ï¼ˆå›¾ç‰‡ï¼Œè§„åˆ™ï¼Œç­‰ç­‰ï¼‰ã€‚</li>\n<li><strong>ACT_RU</strong>ï¼šâ€™RUâ€™è¡¨ç¤º runtimeã€‚ è¿™äº›è¿è¡Œæ—¶çš„è¡¨ï¼ŒåŒ…å«æµç¨‹å®ä¾‹ï¼Œä»»åŠ¡ï¼Œå˜é‡ï¼Œå¼‚æ­¥ä»»åŠ¡ï¼Œç­‰è¿è¡Œä¸­çš„æ•°æ®ã€‚ Flowableåªåœ¨æµç¨‹å®ä¾‹æ‰§è¡Œè¿‡ç¨‹ä¸­ä¿å­˜è¿™äº›æ•°æ®ï¼Œ åœ¨æµç¨‹ç»“æŸæ—¶å°±ä¼šåˆ é™¤è¿™äº›è®°å½•ã€‚ è¿™æ ·è¿è¡Œæ—¶è¡¨å¯ä»¥ä¸€ç›´å¾ˆå°é€Ÿåº¦å¾ˆå¿«ã€‚</li>\n<li><strong>ACT_HI</strong>ï¼šâ€™HIâ€™è¡¨ç¤º historyã€‚ è¿™äº›è¡¨åŒ…å«å†å²æ•°æ®ï¼Œæ¯”å¦‚å†å²æµç¨‹å®ä¾‹ï¼Œ å˜é‡ï¼Œä»»åŠ¡ç­‰ç­‰ã€‚</li>\n<li><strong>ACT_GE</strong>ï¼š GE è¡¨ç¤º generalã€‚ é€šç”¨æ•°æ®ï¼Œ ç”¨äºä¸åŒåœºæ™¯ä¸‹ </li>\n<li><strong>ACT_ID:</strong>   â€™IDâ€™è¡¨ç¤ºidentity(ç»„ç»‡æœºæ„)ã€‚è¿™äº›è¡¨åŒ…å«æ ‡è¯†çš„ä¿¡æ¯ï¼Œå¦‚ç”¨æˆ·ï¼Œç”¨æˆ·ç»„ï¼Œç­‰ç­‰ã€‚</li>\n</ul>\n<p>å…·ä½“çš„è¡¨ç»“æ„çš„å«ä¹‰:</p>\n<table>\n<thead>\n<tr>\n<th><strong>è¡¨åˆ†ç±»</strong></th>\n<th><strong>è¡¨å</strong></th>\n<th><strong>è§£é‡Š</strong></th>\n</tr>\n</thead>\n<tbody><tr>\n<td>ä¸€èˆ¬æ•°æ®</td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td></td>\n<td>[ACT_GE_BYTEARRAY]</td>\n<td>é€šç”¨çš„æµç¨‹å®šä¹‰å’Œæµç¨‹èµ„æº</td>\n</tr>\n<tr>\n<td></td>\n<td>[ACT_GE_PROPERTY]</td>\n<td>ç³»ç»Ÿç›¸å…³å±æ€§</td>\n</tr>\n<tr>\n<td>æµç¨‹å†å²è®°å½•</td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td></td>\n<td>[ACT_HI_ACTINST]</td>\n<td>å†å²çš„æµç¨‹å®ä¾‹</td>\n</tr>\n<tr>\n<td></td>\n<td>[ACT_HI_ATTACHMENT]</td>\n<td>å†å²çš„æµç¨‹é™„ä»¶</td>\n</tr>\n<tr>\n<td></td>\n<td>[ACT_HI_COMMENT]</td>\n<td>å†å²çš„è¯´æ˜æ€§ä¿¡æ¯</td>\n</tr>\n<tr>\n<td></td>\n<td>[ACT_HI_DETAIL]</td>\n<td>å†å²çš„æµç¨‹è¿è¡Œä¸­çš„ç»†èŠ‚ä¿¡æ¯</td>\n</tr>\n<tr>\n<td></td>\n<td>[ACT_HI_IDENTITYLINK]</td>\n<td>å†å²çš„æµç¨‹è¿è¡Œè¿‡ç¨‹ä¸­ç”¨æˆ·å…³ç³»</td>\n</tr>\n<tr>\n<td></td>\n<td>[ACT_HI_PROCINST]</td>\n<td>å†å²çš„æµç¨‹å®ä¾‹</td>\n</tr>\n<tr>\n<td></td>\n<td>[ACT_HI_TASKINST]</td>\n<td>å†å²çš„ä»»åŠ¡å®ä¾‹</td>\n</tr>\n<tr>\n<td></td>\n<td>[ACT_HI_VARINST]</td>\n<td>å†å²çš„æµç¨‹è¿è¡Œä¸­çš„å˜é‡ä¿¡æ¯</td>\n</tr>\n<tr>\n<td>æµç¨‹å®šä¹‰è¡¨</td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td></td>\n<td>[ACT_RE_DEPLOYMENT]</td>\n<td>éƒ¨ç½²å•å…ƒä¿¡æ¯</td>\n</tr>\n<tr>\n<td></td>\n<td>[ACT_RE_MODEL]</td>\n<td>æ¨¡å‹ä¿¡æ¯</td>\n</tr>\n<tr>\n<td></td>\n<td>[ACT_RE_PROCDEF]</td>\n<td>å·²éƒ¨ç½²çš„æµç¨‹å®šä¹‰</td>\n</tr>\n<tr>\n<td>è¿è¡Œå®ä¾‹è¡¨</td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td></td>\n<td>[ACT_RU_EVENT_SUBSCR]</td>\n<td>è¿è¡Œæ—¶äº‹ä»¶</td>\n</tr>\n<tr>\n<td></td>\n<td>[ACT_RU_EXECUTION]</td>\n<td>è¿è¡Œæ—¶æµç¨‹æ‰§è¡Œå®ä¾‹</td>\n</tr>\n<tr>\n<td></td>\n<td>[ACT_RU_IDENTITYLINK]</td>\n<td>è¿è¡Œæ—¶ç”¨æˆ·å…³ç³»ä¿¡æ¯ï¼Œå­˜å‚¨ä»»åŠ¡èŠ‚ç‚¹ä¸å‚ä¸è€…çš„ç›¸å…³ä¿¡æ¯</td>\n</tr>\n<tr>\n<td></td>\n<td>[ACT_RU_JOB]</td>\n<td>è¿è¡Œæ—¶ä½œä¸š</td>\n</tr>\n<tr>\n<td></td>\n<td>[ACT_RU_TASK]</td>\n<td>è¿è¡Œæ—¶ä»»åŠ¡</td>\n</tr>\n<tr>\n<td></td>\n<td>[ACT_RU_VARIABLE]</td>\n<td>è¿è¡Œæ—¶å˜é‡è¡¨</td>\n</tr>\n<tr>\n<td>ç”¨æˆ·ç”¨æˆ·ç»„è¡¨</td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td></td>\n<td>[ACT_ID_BYTEARRAY]</td>\n<td>äºŒè¿›åˆ¶æ•°æ®è¡¨</td>\n</tr>\n<tr>\n<td></td>\n<td>[ACT_ID_GROUP]</td>\n<td>ç”¨æˆ·ç»„ä¿¡æ¯è¡¨</td>\n</tr>\n<tr>\n<td></td>\n<td>[ACT_ID_INFO]</td>\n<td>ç”¨æˆ·ä¿¡æ¯è¯¦æƒ…è¡¨</td>\n</tr>\n<tr>\n<td></td>\n<td>[ACT_ID_MEMBERSHIP]</td>\n<td>äººä¸ç»„å…³ç³»è¡¨</td>\n</tr>\n<tr>\n<td></td>\n<td>[ACT_ID_PRIV]</td>\n<td>æƒé™è¡¨</td>\n</tr>\n<tr>\n<td></td>\n<td>[ACT_ID_PRIV_MAPPING]</td>\n<td>ç”¨æˆ·æˆ–ç»„æƒé™å…³ç³»è¡¨</td>\n</tr>\n<tr>\n<td></td>\n<td>[ACT_ID_PROPERTY]</td>\n<td>å±æ€§è¡¨</td>\n</tr>\n<tr>\n<td></td>\n<td>[ACT_ID_TOKEN]</td>\n<td>è®°å½•ç”¨æˆ·çš„tokenä¿¡æ¯</td>\n</tr>\n<tr>\n<td></td>\n<td>[ACT_ID_USER]</td>\n<td>ç”¨æˆ·è¡¨</td>\n</tr>\n</tbody></table>\n<h2 id=\"ProcessEngineè®²è§£\"><a href=\"#ProcessEngineè®²è§£\" class=\"headerlink\" title=\"ProcessEngineè®²è§£\"></a>ProcessEngineè®²è§£</h2><h3 id=\"ç¡¬ç¼–ç çš„æ–¹å¼\"><a href=\"#ç¡¬ç¼–ç çš„æ–¹å¼\" class=\"headerlink\" title=\"ç¡¬ç¼–ç çš„æ–¹å¼\"></a>ç¡¬ç¼–ç çš„æ–¹å¼</h3><p>æˆ‘ä»¬å‰é¢è®²è§£æ¡ˆä¾‹çš„æ—¶å€™æ˜¯é€šè¿‡ProcessEngineConfigurationè¿™ä¸ªé…ç½®ç±»æ¥åŠ è½½çš„ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// é…ç½®æ•°æ®åº“ç›¸å…³ä¿¡æ¯ è·å– ProcessEngineConfiguration</span></span><br><span class=\"line\"><span class=\"type\">ProcessEngineConfiguration</span> <span class=\"variable\">cfg</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">StandaloneProcessEngineConfiguration</span>()</span><br><span class=\"line\">    .setJdbcUrl(<span class=\"string\">&quot;jdbc:mysql://localhost:3306/flowable-learn2?serverTimezone=UTC&amp;nullCatalogMeansCurrent=true&quot;</span>)</span><br><span class=\"line\">    .setJdbcUsername(<span class=\"string\">&quot;root&quot;</span>)</span><br><span class=\"line\">    .setJdbcPassword(<span class=\"string\">&quot;123456&quot;</span>)</span><br><span class=\"line\">    .setJdbcDriver(<span class=\"string\">&quot;com.mysql.cj.jdbc.Driver&quot;</span>)</span><br><span class=\"line\">    .setDatabaseSchemaUpdate(ProcessEngineConfiguration.DB_SCHEMA_UPDATE_TRUE);</span><br><span class=\"line\"><span class=\"comment\">// è·å–æµç¨‹å¼•æ“å¯¹è±¡</span></span><br><span class=\"line\"><span class=\"type\">ProcessEngine</span> <span class=\"variable\">processEngine</span> <span class=\"operator\">=</span> cfg.buildProcessEngine();</span><br></pre></td></tr></table></figure>\n\n<p>è¿™ç§æ–¹å¼ä¼šè°ƒç”¨buildProcessEngine()æ–¹æ³•ï¼Œé‡Œé¢çš„æ ¸å¿ƒä»£ç ä¸ºï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220319113106848.png\"\n                      alt=\"image-20220319113106848\"\n                ></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220319113139646.png\"\n                      alt=\"image-20220319113139646\"\n                ></p>\n<h3 id=\"é…ç½®æ–‡ä»¶\"><a href=\"#é…ç½®æ–‡ä»¶\" class=\"headerlink\" title=\"é…ç½®æ–‡ä»¶\"></a>é…ç½®æ–‡ä»¶</h3><p>é™¤äº†ä¸Šé¢çš„ç¡¬ç¼–ç çš„æ–¹å¼å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥åœ¨resourcesç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª<code>flowable.cfg.xml</code>æ–‡ä»¶ï¼Œæ³¨æ„è¿™ä¸ªåç§°æ˜¯å›ºå®šçš„å“¦ã€‚å†…å®¹å¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">beans</span> <span class=\"attr\">xmlns</span>=<span class=\"string\">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">       <span class=\"attr\">xmlns:xsi</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">       <span class=\"attr\">xsi:schemaLocation</span>=<span class=\"string\">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;processEngineConfiguration&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">          <span class=\"attr\">class</span>=<span class=\"string\">&quot;org.flowable.engine.impl.cfg.StandaloneProcessEngineConfiguration&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;jdbcUrl&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;jdbc:mysql://localhost:3306/flow1?allowMultiQueries=true<span class=\"symbol\">&amp;amp;</span>useUnicode=true<span class=\"symbol\">&amp;amp;</span>characterEncoding=UTF-8<span class=\"symbol\">&amp;amp;</span>useSSL=false<span class=\"symbol\">&amp;amp;</span>serverTimezone=UTC<span class=\"symbol\">&amp;amp;</span>nullCatalogMeansCurrent=true&quot;</span> /&gt;</span><span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;jdbcDriver&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;com.mysql.cj.jdbc.Driver&quot;</span> /&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;jdbcUsername&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;root&quot;</span> /&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;jdbcPassword&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;123456&quot;</span> /&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;databaseSchemaUpdate&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;true&quot;</span> /&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;asyncExecutorActivate&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;false&quot;</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">bean</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>åœ¨ä¸Šé¢çš„é…ç½®æ–‡ä»¶ä¸­é…ç½®ç›¸å…³çš„ä¿¡æ¯ã€‚æˆ‘ä»¬åœ¨Javaä»£ç ä¸­å°±å¯ä»¥ç®€åŒ–ä¸ºï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">test01</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// è·å–æµç¨‹å¼•æ“å¯¹è±¡</span></span><br><span class=\"line\">    <span class=\"type\">ProcessEngine</span> <span class=\"variable\">processEngine</span> <span class=\"operator\">=</span> ProcessEngines.getDefaultProcessEngine();</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;processEngine = &quot;</span> + processEngine);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>å¯ä»¥çœ‹ä¸‹getDefaultProcessEngineçš„æºç ï¼Œåœ¨é‡Œé¢æœ€ç»ˆè¿˜æ˜¯æ‰§è¡Œäº†å’Œç¡¬ç¼–ç ä¸€æ ·çš„ä»£ç </p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> ProcessEngine <span class=\"title function_\">getProcessEngine</span><span class=\"params\">(String processEngineName)</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!isInitialized()) &#123;</span><br><span class=\"line\">        init(); <span class=\"comment\">// å®Œæˆåˆå§‹åŒ–æ“ä½œ</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> processEngines.get(processEngineName);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>è¿›å…¥initæ–¹æ³•</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">synchronized</span> <span class=\"keyword\">void</span> <span class=\"title function_\">init</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!isInitialized()) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (processEngines == <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">            <span class=\"comment\">// Create new map to store process-engines if current map is null</span></span><br><span class=\"line\">            processEngines = <span class=\"keyword\">new</span> <span class=\"title class_\">HashMap</span>&lt;&gt;();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"type\">ClassLoader</span> <span class=\"variable\">classLoader</span> <span class=\"operator\">=</span> ReflectUtil.getClassLoader();</span><br><span class=\"line\">        Enumeration&lt;URL&gt; resources = <span class=\"literal\">null</span>;</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            resources = classLoader.getResources(<span class=\"string\">&quot;flowable.cfg.xml&quot;</span>); <span class=\"comment\">// åŠ è½½flowable.cfg.xmlé…ç½®æ–‡ä»¶</span></span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (IOException e) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"title class_\">FlowableIllegalArgumentException</span>(<span class=\"string\">&quot;problem retrieving flowable.cfg.xml resources on the classpath: &quot;</span> + System.getProperty(<span class=\"string\">&quot;java.class.path&quot;</span>), e);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// Remove duplicated configuration URL&#x27;s using set. Some</span></span><br><span class=\"line\">        <span class=\"comment\">// classloaders may return identical URL&#x27;s twice, causing duplicate</span></span><br><span class=\"line\">        <span class=\"comment\">// startups</span></span><br><span class=\"line\">        Set&lt;URL&gt; configUrls = <span class=\"keyword\">new</span> <span class=\"title class_\">HashSet</span>&lt;&gt;();</span><br><span class=\"line\">        <span class=\"keyword\">while</span> (resources.hasMoreElements()) &#123;</span><br><span class=\"line\">            configUrls.add(resources.nextElement());</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (Iterator&lt;URL&gt; iterator = configUrls.iterator(); iterator.hasNext();) &#123;</span><br><span class=\"line\">            <span class=\"type\">URL</span> <span class=\"variable\">resource</span> <span class=\"operator\">=</span> iterator.next();</span><br><span class=\"line\">            LOGGER.info(<span class=\"string\">&quot;Initializing process engine using configuration &#x27;&#123;&#125;&#x27;&quot;</span>, resource.toString());</span><br><span class=\"line\">            initProcessEngineFromResource(resource); <span class=\"comment\">// åˆå§‹åŒ–ProcessEngine</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            resources = classLoader.getResources(<span class=\"string\">&quot;flowable-context.xml&quot;</span>); <span class=\"comment\">// åœ¨æ•´åˆSpringçš„æƒ…å†µä¸‹åŠ è½½è¯¥æ–‡ä»¶</span></span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (IOException e) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"title class_\">FlowableIllegalArgumentException</span>(<span class=\"string\">&quot;problem retrieving flowable-context.xml resources on the classpath: &quot;</span> + System.getProperty(<span class=\"string\">&quot;java.class.path&quot;</span>), e);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">while</span> (resources.hasMoreElements()) &#123;</span><br><span class=\"line\">            <span class=\"type\">URL</span> <span class=\"variable\">resource</span> <span class=\"operator\">=</span> resources.nextElement();</span><br><span class=\"line\">            LOGGER.info(<span class=\"string\">&quot;Initializing process engine using Spring configuration &#x27;&#123;&#125;&#x27;&quot;</span>, resource.toString());</span><br><span class=\"line\">            initProcessEngineFromSpringResource(resource); <span class=\"comment\">// ä»Springçš„èµ„æºæ–‡ä»¶ä¸­å®ŒæˆProcessEngineçš„åˆå§‹åŒ–</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        setInitialized(<span class=\"literal\">true</span>);</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        LOGGER.info(<span class=\"string\">&quot;Process engines already initialized&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>åœ¨æºç ä¸­æä¾›äº†å•ç‹¬ä½¿ç”¨å¥½æ•´åˆSpringçš„é…ç½®åŠ è½½æ–¹å¼ã€‚å†è¿›å…¥åˆ°initProcessEngineFromResource(resource)æ–¹æ³•ä¸­ï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220319114011806.png\"\n                      alt=\"image-20220319114011806\"\n                ></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220319114053252.png\"\n                      alt=\"image-20220319114053252\"\n                ></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220319114210012.png\"\n                      alt=\"image-20220319114210012\"\n                ></p>\n<p>è€Œä¸”æˆ‘ä»¬ä¹Ÿå¯ä»¥çœ‹åˆ°ProcessEngineæœ€ç»ˆçš„å®ç°æ˜¯ ProcessEngineImplå¯¹è±¡ã€‚</p>\n<h3 id=\"è‡ªå®šä¹‰é…ç½®æ–‡ä»¶\"><a href=\"#è‡ªå®šä¹‰é…ç½®æ–‡ä»¶\" class=\"headerlink\" title=\"è‡ªå®šä¹‰é…ç½®æ–‡ä»¶\"></a>è‡ªå®šä¹‰é…ç½®æ–‡ä»¶</h3><p>æœ€åæˆ‘ä»¬å¦‚æœè¦åŠ è½½è‡ªå®šä¹‰åç§°çš„é…ç½®æ–‡ä»¶å¯ä»¥é€šè¿‡ProcessEngineConfigurationä¸­çš„å¯¹åº”æ„é€ æ–¹æ³•æ¥å®ç°</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">test2</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> Exception&#123;</span><br><span class=\"line\">    <span class=\"type\">ProcessEngineConfiguration</span> <span class=\"variable\">configuration</span> <span class=\"operator\">=</span> ProcessEngineConfiguration</span><br><span class=\"line\">            .createProcessEngineConfigurationFromResource(<span class=\"string\">&quot;flowable.cfg.xml&quot;</span>);</span><br><span class=\"line\">    <span class=\"type\">ProcessEngine</span> <span class=\"variable\">processEngine</span> <span class=\"operator\">=</span> configuration.buildProcessEngine();</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;processEngine = &quot;</span> + processEngine);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n\n\n<h2 id=\"ServcieæœåŠ¡æ¥å£\"><a href=\"#ServcieæœåŠ¡æ¥å£\" class=\"headerlink\" title=\"ServcieæœåŠ¡æ¥å£\"></a>ServcieæœåŠ¡æ¥å£</h2><p>Serviceæ˜¯å·¥ä½œæµå¼•æ“æä¾›ç”¨äºè¿›è¡Œå·¥ä½œæµéƒ¨ç½²ã€æ‰§è¡Œã€ç®¡ç†çš„æœåŠ¡æ¥å£ï¼Œæˆ‘ä»¬ä½¿ç”¨è¿™äº›æ¥å£å¯ä»¥å°±æ˜¯æ“ä½œæœåŠ¡å¯¹åº”çš„æ•°æ®è¡¨</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220319223019186.png\"\n                      alt=\"image-20220319223019186\"\n                ></p>\n<h3 id=\"Serviceåˆ›å»ºæ–¹å¼\"><a href=\"#Serviceåˆ›å»ºæ–¹å¼\" class=\"headerlink\" title=\"Serviceåˆ›å»ºæ–¹å¼\"></a>Serviceåˆ›å»ºæ–¹å¼</h3><p>é€šè¿‡ProcessEngineåˆ›å»ºService</p>\n<p>æ–¹å¼å¦‚ä¸‹ï¼š</p>\n <figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">RuntimeService</span> <span class=\"variable\">runtimeService</span> <span class=\"operator\">=</span> processEngine.getRuntimeService();</span><br><span class=\"line\"><span class=\"type\">RepositoryService</span> <span class=\"variable\">repositoryService</span> <span class=\"operator\">=</span> processEngine.getRepositoryService();</span><br><span class=\"line\"><span class=\"type\">TaskService</span> <span class=\"variable\">taskService</span> <span class=\"operator\">=</span> processEngine.getTaskService();</span><br><span class=\"line\"><span class=\"comment\">// ...</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Serviceæ€»è§ˆ\"><a href=\"#Serviceæ€»è§ˆ\" class=\"headerlink\" title=\"Serviceæ€»è§ˆ\"></a>Serviceæ€»è§ˆ</h3><table>\n<thead>\n<tr>\n<th>serviceåç§°</th>\n<th>serviceä½œç”¨</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>RepositoryService</td>\n<td>Flowableçš„èµ„æºç®¡ç†ç±»</td>\n</tr>\n<tr>\n<td>RuntimeService</td>\n<td>Flowableçš„æµç¨‹è¿è¡Œç®¡ç†ç±»</td>\n</tr>\n<tr>\n<td>TaskService</td>\n<td>Flowableçš„ä»»åŠ¡ç®¡ç†ç±»</td>\n</tr>\n<tr>\n<td>HistoryService</td>\n<td>Flowableçš„å†å²ç®¡ç†ç±»</td>\n</tr>\n<tr>\n<td>ManagerService</td>\n<td>Flowableçš„å¼•æ“ç®¡ç†ç±»</td>\n</tr>\n</tbody></table>\n<p> ç®€å•ä»‹ç»ï¼š</p>\n<p><strong>RepositoryService</strong></p>\n<p>æ˜¯activitiçš„èµ„æºç®¡ç†ç±»ï¼Œæä¾›äº†ç®¡ç†å’Œæ§åˆ¶æµç¨‹å‘å¸ƒåŒ…å’Œæµç¨‹å®šä¹‰çš„æ“ä½œã€‚ä½¿ç”¨å·¥ä½œæµå»ºæ¨¡å·¥å…·è®¾è®¡çš„ä¸šåŠ¡æµç¨‹å›¾éœ€è¦ä½¿ç”¨æ­¤serviceå°†æµç¨‹å®šä¹‰æ–‡ä»¶çš„å†…å®¹éƒ¨ç½²åˆ°è®¡ç®—æœºã€‚</p>\n<p>é™¤äº†éƒ¨ç½²æµç¨‹å®šä¹‰ä»¥å¤–è¿˜å¯ä»¥ï¼šæŸ¥è¯¢å¼•æ“ä¸­çš„å‘å¸ƒåŒ…å’Œæµç¨‹å®šä¹‰ã€‚</p>\n<p>æš‚åœæˆ–æ¿€æ´»å‘å¸ƒåŒ…ï¼Œå¯¹åº”å…¨éƒ¨å’Œç‰¹å®šæµç¨‹å®šä¹‰ã€‚ æš‚åœæ„å‘³ç€å®ƒä»¬ä¸èƒ½å†æ‰§è¡Œä»»ä½•æ“ä½œäº†ï¼Œæ¿€æ´»æ˜¯å¯¹åº”çš„åå‘æ“ä½œã€‚è·å¾—å¤šç§èµ„æºï¼Œåƒæ˜¯åŒ…å«åœ¨å‘å¸ƒåŒ…é‡Œçš„æ–‡ä»¶ï¼Œ æˆ–å¼•æ“è‡ªåŠ¨ç”Ÿæˆçš„æµç¨‹å›¾ã€‚</p>\n<p>è·å¾—æµç¨‹å®šä¹‰çš„pojoç‰ˆæœ¬ï¼Œ å¯ä»¥ç”¨æ¥é€šè¿‡javaè§£ææµç¨‹ï¼Œè€Œä¸å¿…é€šè¿‡xmlã€‚</p>\n<p><strong>RuntimeService</strong></p>\n<p>Activitiçš„æµç¨‹è¿è¡Œç®¡ç†ç±»ã€‚å¯ä»¥ä»è¿™ä¸ªæœåŠ¡ç±»ä¸­è·å–å¾ˆå¤šå…³äºæµç¨‹æ‰§è¡Œç›¸å…³çš„ä¿¡æ¯</p>\n<p><strong>TaskService</strong></p>\n<p>Activitiçš„ä»»åŠ¡ç®¡ç†ç±»ã€‚å¯ä»¥ä»è¿™ä¸ªç±»ä¸­è·å–ä»»åŠ¡çš„ä¿¡æ¯ã€‚</p>\n<p><strong>HistoryService</strong></p>\n<p>Flowableçš„å†å²ç®¡ç†ç±»ï¼Œå¯ä»¥æŸ¥è¯¢å†å²ä¿¡æ¯ï¼Œæ‰§è¡Œæµç¨‹æ—¶ï¼Œå¼•æ“ä¼šä¿å­˜å¾ˆå¤šæ•°æ®ï¼ˆæ ¹æ®é…ç½®ï¼‰ï¼Œæ¯”å¦‚æµç¨‹å®ä¾‹å¯åŠ¨æ—¶é—´ï¼Œä»»åŠ¡çš„å‚ä¸è€…ï¼Œ å®Œæˆä»»åŠ¡çš„æ—¶é—´ï¼Œæ¯ä¸ªæµç¨‹å®ä¾‹çš„æ‰§è¡Œè·¯å¾„ï¼Œç­‰ç­‰ã€‚ è¿™ä¸ªæœåŠ¡ä¸»è¦é€šè¿‡æŸ¥è¯¢åŠŸèƒ½æ¥è·å¾—è¿™äº›æ•°æ®ã€‚</p>\n<p><strong>ManagementService</strong></p>\n<p>Activitiçš„å¼•æ“ç®¡ç†ç±»ï¼Œæä¾›äº†å¯¹Flowable æµç¨‹å¼•æ“çš„ç®¡ç†å’Œç»´æŠ¤åŠŸèƒ½ï¼Œè¿™äº›åŠŸèƒ½ä¸åœ¨å·¥ä½œæµé©±åŠ¨çš„åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨ï¼Œä¸»è¦ç”¨äº Flowable ç³»ç»Ÿçš„æ—¥å¸¸ç»´æŠ¤ã€‚</p>\n<h2 id=\"å›¾æ ‡ä»‹ç»\"><a href=\"#å›¾æ ‡ä»‹ç»\" class=\"headerlink\" title=\"å›¾æ ‡ä»‹ç»\"></a>å›¾æ ‡ä»‹ç»</h2><p>BPMN 2.0æ˜¯ä¸šåŠ¡æµç¨‹å»ºæ¨¡ç¬¦å·2.0çš„ç¼©å†™ã€‚å®ƒç”±Business Process Management Initiativeè¿™ä¸ªéè¥åˆ©åä¼šåˆ›å»ºå¹¶ä¸æ–­å‘å±•ã€‚ä½œä¸ºä¸€ç§æ ‡è¯†ï¼ŒBPMN 2.0æ˜¯ä½¿ç”¨ä¸€äº›<strong>ç¬¦å·</strong>æ¥æ˜ç¡®ä¸šåŠ¡æµç¨‹è®¾è®¡æµç¨‹å›¾çš„ä¸€æ•´å¥—ç¬¦å·è§„èŒƒï¼Œå®ƒèƒ½å¢è¿›ä¸šåŠ¡å»ºæ¨¡æ—¶çš„æ²Ÿé€šæ•ˆç‡ã€‚ç›®å‰BPMN2.0æ˜¯æœ€æ–°çš„ç‰ˆæœ¬ï¼Œå®ƒç”¨äºåœ¨BPMä¸Šä¸‹æ–‡ä¸­è¿›è¡Œå¸ƒå±€å’Œå¯è§†åŒ–çš„æ²Ÿé€šã€‚æ¥ä¸‹æ¥æˆ‘ä»¬å…ˆæ¥äº†è§£åœ¨æµç¨‹è®¾è®¡ä¸­å¸¸è§çš„ ç¬¦å·ã€‚</p>\n<p>BPMN2.0çš„<strong>åŸºæœ¬ç¬¦åˆ</strong>ä¸»è¦åŒ…å«ï¼š</p>\n<h3 id=\"äº‹ä»¶å›¾æ ‡\"><a href=\"#äº‹ä»¶å›¾æ ‡\" class=\"headerlink\" title=\"äº‹ä»¶å›¾æ ‡\"></a>äº‹ä»¶å›¾æ ‡</h3><p>åœ¨Flowableä¸­çš„äº‹ä»¶å›¾æ ‡å¯åŠ¨äº‹ä»¶ï¼Œè¾¹ç•Œäº‹ä»¶,ä¸­é—´äº‹ä»¶å’Œç»“æŸäº‹ä»¶.</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220320103803308.png\"\n                      alt=\"image-20220320103803308\"\n                ></p>\n<h3 id=\"æ´»åŠ¨-ä»»åŠ¡-å›¾æ ‡\"><a href=\"#æ´»åŠ¨-ä»»åŠ¡-å›¾æ ‡\" class=\"headerlink\" title=\"æ´»åŠ¨(ä»»åŠ¡)å›¾æ ‡\"></a>æ´»åŠ¨(ä»»åŠ¡)å›¾æ ‡</h3><p>æ´»åŠ¨æ˜¯å·¥ä½œæˆ–ä»»åŠ¡çš„ä¸€ä¸ªé€šç”¨æœ¯è¯­ã€‚ä¸€ä¸ªæ´»åŠ¨å¯ä»¥æ˜¯ä¸€ä¸ªä»»åŠ¡ï¼Œè¿˜å¯ä»¥æ˜¯ä¸€ä¸ªå½“å‰æµç¨‹çš„å­å¤„ç†æµç¨‹ï¼› å…¶æ¬¡ï¼Œä½ è¿˜å¯ä»¥ä¸ºæ´»åŠ¨æŒ‡å®šä¸åŒçš„ç±»å‹ã€‚å¸¸è§æ´»åŠ¨å¦‚ä¸‹:</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220320103929543.png\"\n                      alt=\"image-20220320103929543\"\n                ></p>\n<h3 id=\"ç»“æ„å›¾æ ‡\"><a href=\"#ç»“æ„å›¾æ ‡\" class=\"headerlink\" title=\"ç»“æ„å›¾æ ‡\"></a>ç»“æ„å›¾æ ‡</h3><p>ç»“æ„å›¾æ ‡å¯ä»¥çœ‹åšæ˜¯æ•´ä¸ªæµç¨‹æ´»åŠ¨çš„ç»“æ„ï¼Œä¸€ä¸ªæµç¨‹ä¸­å¯ä»¥åŒ…æ‹¬å­æµç¨‹ã€‚å¸¸è§çš„ç»“æ„æœ‰ï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"C:\\Users\\dpb\\AppData\\Roaming\\Typora\\typora-user-images\\image-20220320104025737.png\"\n                      alt=\"image-20220320104025737\"\n                ></p>\n<h3 id=\"ç½‘å…³å›¾æ ‡\"><a href=\"#ç½‘å…³å›¾æ ‡\" class=\"headerlink\" title=\"ç½‘å…³å›¾æ ‡\"></a>ç½‘å…³å›¾æ ‡</h3><p>ç½‘å…³ç”¨æ¥å¤„ç†å†³ç­–ï¼Œæœ‰å‡ ç§å¸¸ç”¨ç½‘å…³éœ€è¦äº†è§£ï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220320104157816.png\"\n                      alt=\"image-20220320104157816\"\n                ></p>\n<h2 id=\"æµç¨‹éƒ¨ç½²è¯¦è§£\"><a href=\"#æµç¨‹éƒ¨ç½²è¯¦è§£\" class=\"headerlink\" title=\"æµç¨‹éƒ¨ç½²è¯¦è§£\"></a>æµç¨‹éƒ¨ç½²è¯¦è§£</h2><h3 id=\"éƒ¨ç½²å®ç°\"><a href=\"#éƒ¨ç½²å®ç°\" class=\"headerlink\" title=\"éƒ¨ç½²å®ç°\"></a>éƒ¨ç½²å®ç°</h3><p>æˆ‘ä»¬å…ˆæ¥çœ‹ä¸‹æµç¨‹éƒ¨ç½²çš„å…·ä½“è¿‡ç¨‹ã€‚ä»£ç å®ç°</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * éƒ¨ç½²æµç¨‹</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">test3</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">        <span class=\"type\">ProcessEngine</span> <span class=\"variable\">processEngine</span> <span class=\"operator\">=</span> ProcessEngines.getDefaultProcessEngine();</span><br><span class=\"line\">        <span class=\"type\">RepositoryService</span> <span class=\"variable\">repositoryService</span> <span class=\"operator\">=</span> processEngine.getRepositoryService();</span><br><span class=\"line\">        <span class=\"type\">Deployment</span> <span class=\"variable\">deploy</span> <span class=\"operator\">=</span> repositoryService.createDeployment()</span><br><span class=\"line\">                .addClasspathResource(<span class=\"string\">&quot;holiday-request-new.bpmn20.xml&quot;</span>)</span><br><span class=\"line\">                .name(<span class=\"string\">&quot;è¯·å‡æµç¨‹...&quot;</span>)</span><br><span class=\"line\">                .category(<span class=\"string\">&quot;è¯·å‡&quot;</span>) <span class=\"comment\">// åˆ†ç±»</span></span><br><span class=\"line\">                .tenantId(<span class=\"string\">&quot;dpb&quot;</span>) <span class=\"comment\">// ç§Ÿæˆ·id</span></span><br><span class=\"line\">                .deploy();</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;deploy.getId() = &quot;</span> + deploy.getId());</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;deploy.getName() = &quot;</span> + deploy.getName());</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;deploy.getCategory() = &quot;</span> + deploy.getCategory());</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"éƒ¨ç½²æ¶‰åŠè¡¨ç»“æ„\"><a href=\"#éƒ¨ç½²æ¶‰åŠè¡¨ç»“æ„\" class=\"headerlink\" title=\"éƒ¨ç½²æ¶‰åŠè¡¨ç»“æ„\"></a>éƒ¨ç½²æ¶‰åŠè¡¨ç»“æ„</h3><p>æ¶‰åŠåˆ°çš„ä¸‰å¼ è¡¨ï¼š</p>\n<p>éƒ¨ç½²èµ„æºè¡¨ï¼šact_ge_bytearray</p>\n<table>\n<thead>\n<tr>\n<th>å­—æ®µ</th>\n<th>åç§°</th>\n<th>å¤‡æ³¨</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>ID_</td>\n<td>ä¸»é”®</td>\n<td></td>\n</tr>\n<tr>\n<td>REV_</td>\n<td>ç‰ˆæœ¬å·</td>\n<td></td>\n</tr>\n<tr>\n<td>NAME_</td>\n<td>åç§°</td>\n<td>éƒ¨ç½²çš„æ–‡ä»¶åç§°ï¼Œå¦‚ï¼šholiday-request-new.bpmn20.xmlã€holiday-request-new.bpmn20.png</td>\n</tr>\n<tr>\n<td>DEPLOYMENT_ID_</td>\n<td>éƒ¨ç½²ID</td>\n<td></td>\n</tr>\n<tr>\n<td>BYTES_</td>\n<td>å­—èŠ‚ï¼ˆäºŒè¿›åˆ¶æ•°æ®ï¼‰</td>\n<td></td>\n</tr>\n<tr>\n<td>GENERATED_</td>\n<td>æ˜¯å¦ç³»ç»Ÿç”Ÿæˆ</td>\n<td>0ä¸ºç”¨æˆ·ä¸Šä¼ ï¼Œ<br/>1ä¸ºç³»ç»Ÿè‡ªåŠ¨ç”Ÿæˆï¼Œ æ¯”å¦‚ç³»ç»Ÿä¼š è‡ªåŠ¨æ ¹æ®xmlç”Ÿ æˆpng</td>\n</tr>\n</tbody></table>\n<p>éƒ¨ç½²IDè¡¨ï¼šact_re_deployment</p>\n<table>\n<thead>\n<tr>\n<th>å­—æ®µ</th>\n<th>åç§°</th>\n<th>å¤‡æ³¨</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>ID_</td>\n<td>ä¸»é”®</td>\n<td></td>\n</tr>\n<tr>\n<td>NAME_</td>\n<td>åç§°</td>\n<td></td>\n</tr>\n<tr>\n<td>CATEGORY_</td>\n<td>åˆ†ç±»</td>\n<td></td>\n</tr>\n<tr>\n<td>TENANT_ID_</td>\n<td>ç§Ÿæˆ·ID</td>\n<td></td>\n</tr>\n<tr>\n<td>DEPLOY_TIME_</td>\n<td>éƒ¨ç½²æ—¶é—´</td>\n<td></td>\n</tr>\n<tr>\n<td>DERIVED_FROM_</td>\n<td>æ¥æºäº</td>\n<td></td>\n</tr>\n<tr>\n<td>DERIVED_FROM_ROOT_</td>\n<td>æ¥æºäº</td>\n<td></td>\n</tr>\n<tr>\n<td>ENGINE_VERSION_</td>\n<td>æµç¨‹å¼•æ“çš„ç‰ˆæœ¬</td>\n<td></td>\n</tr>\n</tbody></table>\n<p>æµç¨‹è¡¨ï¼šact_re_procdef</p>\n<table>\n<thead>\n<tr>\n<th>å­—æ®µ</th>\n<th>åç§°</th>\n<th>å¤‡æ³¨</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>ID_</td>\n<td>ä¸»é”®</td>\n<td></td>\n</tr>\n<tr>\n<td>REV_</td>\n<td>ç‰ˆæœ¬å·</td>\n<td></td>\n</tr>\n<tr>\n<td>CATEGORY_</td>\n<td>åˆ†ç±»</td>\n<td>æµç¨‹å®šä¹‰çš„Namespaceå°±æ˜¯ç±»åˆ«</td>\n</tr>\n<tr>\n<td>NAME_</td>\n<td>åç§°</td>\n<td></td>\n</tr>\n<tr>\n<td>KEY_</td>\n<td>æ ‡è¯†</td>\n<td></td>\n</tr>\n<tr>\n<td>VERSION_</td>\n<td>ç‰ˆæœ¬</td>\n<td></td>\n</tr>\n<tr>\n<td>DEPLOYMENT_ID_</td>\n<td>éƒ¨ç½²ID</td>\n<td></td>\n</tr>\n<tr>\n<td>RESOURCE_NAME_</td>\n<td>èµ„æºåç§°</td>\n<td>æµç¨‹bpmnæ–‡ä»¶åç§°</td>\n</tr>\n<tr>\n<td>DGRM_RESOURCE_NAME_</td>\n<td>å›¾ç‰‡èµ„æºåç§°</td>\n<td></td>\n</tr>\n<tr>\n<td>DESCRIPTION_</td>\n<td>æè¿°</td>\n<td></td>\n</tr>\n<tr>\n<td>HAS_START_FORM_KEY_</td>\n<td>æ‹¥æœ‰å¼€å§‹è¡¨å•æ ‡è¯†</td>\n<td>startèŠ‚ç‚¹æ˜¯å¦å­˜åœ¨formKey  0å¦ 1æ˜¯</td>\n</tr>\n<tr>\n<td>HAS_GRAPHICAL_NOTATION_</td>\n<td>æ‹¥æœ‰å›¾å½¢ä¿¡æ¯</td>\n<td></td>\n</tr>\n<tr>\n<td>SUSPENSION_STATE_</td>\n<td>æŒ‚èµ·çŠ¶æ€</td>\n<td>æš‚åœçŠ¶æ€ 1æ¿€æ´» 2æš‚åœ</td>\n</tr>\n<tr>\n<td>TENANT_ID_</td>\n<td>ç§Ÿæˆ·ID</td>\n<td></td>\n</tr>\n<tr>\n<td></td>\n<td></td>\n<td></td>\n</tr>\n</tbody></table>\n<p>æ³¨æ„ï¼š</p>\n<p>ä¸šåŠ¡æµç¨‹å®šä¹‰æ•°æ®è¡¨ã€‚æ­¤è¡¨å’ŒACT_RE_DEPLOYMENTæ˜¯å¤šå¯¹ä¸€çš„å…³ç³»ï¼Œå³ï¼Œä¸€ä¸ªéƒ¨ç½²çš„baråŒ…é‡Œå¯èƒ½åŒ…å«å¤šä¸ªæµç¨‹å®šä¹‰æ–‡ä»¶ï¼Œæ¯ä¸ªæµç¨‹å®šä¹‰æ–‡ä»¶éƒ½ä¼šæœ‰ä¸€æ¡è®°å½•åœ¨ACT_REPROCDEFè¡¨å†…ï¼Œæ¯ä¸ªæµç¨‹å®šä¹‰çš„æ•°æ®ï¼Œéƒ½ä¼šå¯¹äºACT_GE_BYTEARRAYè¡¨å†…çš„ä¸€ä¸ªèµ„æºæ–‡ä»¶å’ŒPNGå›¾ç‰‡æ–‡ä»¶ã€‚å’ŒACT_GE_BYTEARRAYçš„å…³è”æ˜¯é€šè¿‡ç¨‹åºç”¨ACT_GE_BYTEARRAY.NAMEä¸ACT_RE_PROCDEF.NAME_å®Œæˆçš„</p>\n<h3 id=\"æŒ‚èµ·å’Œæ¿€æ´»\"><a href=\"#æŒ‚èµ·å’Œæ¿€æ´»\" class=\"headerlink\" title=\"æŒ‚èµ·å’Œæ¿€æ´»\"></a>æŒ‚èµ·å’Œæ¿€æ´»</h3><p>éƒ¨ç½²çš„æµç¨‹é»˜è®¤çš„çŠ¶æ€ä¸ºæ¿€æ´»ï¼Œå¦‚æœæˆ‘ä»¬æš‚æ—¶ä¸æƒ³ä½¿ç”¨è¯¥å®šä¹‰çš„æµç¨‹ï¼Œé‚£ä¹ˆå¯ä»¥æŒ‚èµ·è¯¥æµç¨‹ã€‚å½“ç„¶è¯¥æµç¨‹å®šä¹‰ä¸‹è¾¹æ‰€æœ‰çš„æµç¨‹å®ä¾‹å…¨éƒ¨æš‚åœã€‚</p>\n<p>æµç¨‹å®šä¹‰ä¸ºæŒ‚èµ·çŠ¶æ€ï¼Œè¯¥æµç¨‹å®šä¹‰å°†ä¸å…è®¸å¯åŠ¨æ–°çš„æµç¨‹å®ä¾‹ï¼ŒåŒæ—¶è¯¥æµç¨‹å®šä¹‰ä¸‹çš„æ‰€æœ‰çš„æµç¨‹å®ä¾‹éƒ½å°†å…¨éƒ¨æŒ‚èµ·æš‚åœæ‰§è¡Œã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * æŒ‚èµ·æµç¨‹</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">test05</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// è·å–æµç¨‹å¼•æ“å¯¹è±¡</span></span><br><span class=\"line\">        <span class=\"type\">ProcessEngine</span> <span class=\"variable\">processEngine</span> <span class=\"operator\">=</span> ProcessEngines.getDefaultProcessEngine();</span><br><span class=\"line\">        <span class=\"type\">RepositoryService</span> <span class=\"variable\">repositoryService</span> <span class=\"operator\">=</span> processEngine.getRepositoryService();</span><br><span class=\"line\">        <span class=\"type\">ProcessDefinition</span> <span class=\"variable\">processDefinition</span> <span class=\"operator\">=</span> repositoryService.createProcessDefinitionQuery()</span><br><span class=\"line\">                .processDefinitionId(<span class=\"string\">&quot;holiday:1:4&quot;</span>)</span><br><span class=\"line\">                .singleResult();</span><br><span class=\"line\">        <span class=\"comment\">// è·å–æµç¨‹å®šä¹‰çš„çŠ¶æ€</span></span><br><span class=\"line\">        <span class=\"type\">boolean</span> <span class=\"variable\">suspended</span> <span class=\"operator\">=</span> processDefinition.isSuspended();</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;suspended = &quot;</span> + suspended);</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(suspended)&#123;</span><br><span class=\"line\">            <span class=\"comment\">// è¡¨ç¤ºè¢«æŒ‚èµ·</span></span><br><span class=\"line\">            System.out.println(<span class=\"string\">&quot;æ¿€æ´»æµç¨‹å®šä¹‰&quot;</span>);</span><br><span class=\"line\">            repositoryService.activateProcessDefinitionById(<span class=\"string\">&quot;holiday:1:4&quot;</span>,<span class=\"literal\">true</span>,<span class=\"literal\">null</span>);</span><br><span class=\"line\">        &#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">            <span class=\"comment\">// è¡¨ç¤ºæ¿€æ´»çŠ¶æ€</span></span><br><span class=\"line\">            System.out.println(<span class=\"string\">&quot;æŒ‚èµ·æµç¨‹&quot;</span>);</span><br><span class=\"line\">            repositoryService.suspendProcessDefinitionById(<span class=\"string\">&quot;holiday:1:4&quot;</span>,<span class=\"literal\">true</span>,<span class=\"literal\">null</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n\n<p>å…·ä½“çš„å®ç°å…¶å®å°±æ˜¯æ›´æ–°äº†æµç¨‹å®šä¹‰è¡¨ä¸­çš„å­—æ®µ</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220321210010518.png\"\n                      alt=\"image-20220321210010518\"\n                ></p>\n<p>è€Œä¸”é€šè¿‡REV_å­—æ®µæ¥æ§åˆ¶æ•°æ®å®‰å…¨ï¼Œä¹Ÿæ˜¯ä¸€ç§ä¹è§‚é”çš„ä½“ç°äº†ï¼Œå¦‚æœè¦å¯åŠ¨ä¸€ä¸ªå·²ç»æŒ‚èµ·çš„æµç¨‹å°±ä¼šå‡ºç°å¦‚ä¸‹çš„é”™è¯¯</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220321211858122.png\"\n                      alt=\"image-20220321211858122\"\n                ></p>\n<h2 id=\"å¯åŠ¨æµç¨‹å®ä¾‹-1\"><a href=\"#å¯åŠ¨æµç¨‹å®ä¾‹-1\" class=\"headerlink\" title=\"å¯åŠ¨æµç¨‹å®ä¾‹\"></a>å¯åŠ¨æµç¨‹å®ä¾‹</h2><p>ç„¶åæˆ‘ä»¬æ¥çœ‹çœ‹å¯åŠ¨æµç¨‹å®ä¾‹çš„è¿‡ç¨‹ã€‚å®ç°ä»£ç å¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * å¯åŠ¨æµç¨‹å®ä¾‹</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">testRunProcess</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// è·å–æµç¨‹å¼•æ“å¯¹è±¡</span></span><br><span class=\"line\">        <span class=\"type\">ProcessEngine</span> <span class=\"variable\">processEngine</span> <span class=\"operator\">=</span> ProcessEngines.getDefaultProcessEngine();</span><br><span class=\"line\">        <span class=\"comment\">// å¯åŠ¨æµç¨‹å®ä¾‹é€šè¿‡ RuntimeService å¯¹è±¡</span></span><br><span class=\"line\">        <span class=\"type\">RuntimeService</span> <span class=\"variable\">runtimeService</span> <span class=\"operator\">=</span> processEngine.getRuntimeService();</span><br><span class=\"line\">        <span class=\"comment\">// æ„å»ºæµç¨‹å˜é‡</span></span><br><span class=\"line\">        Map&lt;String,Object&gt; variables = <span class=\"keyword\">new</span> <span class=\"title class_\">HashMap</span>&lt;&gt;();</span><br><span class=\"line\">        variables.put(<span class=\"string\">&quot;employee&quot;</span>,<span class=\"string\">&quot;å¼ ä¸‰&quot;</span>) ;<span class=\"comment\">// è°ç”³è¯·è¯·å‡</span></span><br><span class=\"line\">        variables.put(<span class=\"string\">&quot;nrOfHolidays&quot;</span>,<span class=\"number\">3</span>); <span class=\"comment\">// è¯·å‡ å¤©å‡</span></span><br><span class=\"line\">        variables.put(<span class=\"string\">&quot;description&quot;</span>,<span class=\"string\">&quot;å·¥ä½œç´¯äº†ï¼Œæƒ³å‡ºå»ç©ç©&quot;</span>); <span class=\"comment\">// è¯·å‡çš„åŸå› </span></span><br><span class=\"line\">        <span class=\"comment\">// å¯åŠ¨æµç¨‹å®ä¾‹ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æµç¨‹å®šä¹‰çš„id</span></span><br><span class=\"line\">        <span class=\"type\">ProcessInstance</span> <span class=\"variable\">processInstance</span> <span class=\"operator\">=</span> runtimeService</span><br><span class=\"line\">                .startProcessInstanceById(<span class=\"string\">&quot;holiday:1:4&quot;</span>, variables);<span class=\"comment\">// å¯åŠ¨æµç¨‹å®ä¾‹</span></span><br><span class=\"line\">        <span class=\"comment\">// è¾“å‡ºç›¸å…³çš„æµç¨‹å®ä¾‹ä¿¡æ¯</span></span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;æµç¨‹å®šä¹‰çš„IDï¼š&quot;</span> + processInstance.getProcessDefinitionId());</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;æµç¨‹å®ä¾‹çš„IDï¼š&quot;</span> + processInstance.getId());</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;å½“å‰æ´»åŠ¨çš„IDï¼š&quot;</span> + processInstance.getActivityId());</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n\n<p>å½“æˆ‘ä»¬å¯åŠ¨äº†ä¸€ä¸ªæµç¨‹å®ä¾‹åï¼Œä¼šåœ¨ACT_RU_*å¯¹åº”çš„è¡¨ç»“æ„ä¸­æ“ä½œ,è¿è¡Œæ—¶å®ä¾‹æ¶‰åŠçš„è¡¨ç»“æ„å…±10å¼ ï¼š</p>\n<ul>\n<li>ACT_RU_DEADLETTER_JOB  æ­£åœ¨è¿è¡Œçš„ä»»åŠ¡è¡¨ </li>\n<li>ACT_RU_EVENT_SUBSCR è¿è¡Œæ—¶äº‹ä»¶ </li>\n<li>ACT_RU_EXECUTION è¿è¡Œæ—¶æµç¨‹æ‰§è¡Œå®ä¾‹ </li>\n<li>ACT_RU_HISTORY_JOB  å†å²ä½œä¸šè¡¨ </li>\n<li>ACT_RU_IDENTITYLINK è¿è¡Œæ—¶ç”¨æˆ·å…³ç³»ä¿¡æ¯ </li>\n<li>ACT_RU_JOB è¿è¡Œæ—¶ä½œä¸šè¡¨ </li>\n<li>ACT_RU_SUSPENDED_JOB æš‚åœä½œä¸šè¡¨ </li>\n<li>ACT_RU_TASK  è¿è¡Œæ—¶ä»»åŠ¡è¡¨ </li>\n<li>ACT_RU_TIMER_JOB å®šæ—¶ä½œä¸šè¡¨ </li>\n<li>ACT_RU_VARIABLE  è¿è¡Œæ—¶å˜é‡è¡¨</li>\n</ul>\n<p>å¯åŠ¨ä¸€ä¸ªæµç¨‹å®ä¾‹çš„æ—¶å€™æ¶‰åŠåˆ°çš„è¡¨æœ‰</p>\n<ul>\n<li>ACT_RU_EXECUTION è¿è¡Œæ—¶æµç¨‹æ‰§è¡Œå®ä¾‹ </li>\n<li>ACT_RU_IDENTITYLINK è¿è¡Œæ—¶ç”¨æˆ·å…³ç³»ä¿¡æ¯ </li>\n<li>ACT_RU_TASK  è¿è¡Œæ—¶ä»»åŠ¡è¡¨ </li>\n<li>ACT_RU_VARIABLE  è¿è¡Œæ—¶å˜é‡è¡¨</li>\n</ul>\n<p>ACT_RU_EXECUTIONè¡¨ç»“æ„</p>\n<table>\n<thead>\n<tr>\n<th>å­—æ®µ</th>\n<th>åç§°</th>\n<th>å¤‡æ³¨</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>ID_</td>\n<td>ä¸»é”®</td>\n<td></td>\n</tr>\n<tr>\n<td>REV_</td>\n<td>ç‰ˆæœ¬å·</td>\n<td></td>\n</tr>\n<tr>\n<td>PROC_INST_ID_</td>\n<td>æµç¨‹å®ä¾‹ID</td>\n<td></td>\n</tr>\n<tr>\n<td>BUSINESS_KEY_</td>\n<td>ä¸šåŠ¡ä¸»é”®ID</td>\n<td></td>\n</tr>\n<tr>\n<td>PARENT_ID_</td>\n<td>çˆ¶æ‰§è¡Œæµçš„ID</td>\n<td></td>\n</tr>\n<tr>\n<td>PROC_DEF_ID_</td>\n<td>æµç¨‹å®šä¹‰çš„æ•°æ®ID</td>\n<td></td>\n</tr>\n<tr>\n<td>SUPER_EXEC_</td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td>ROOT_PROC_INST_ID_</td>\n<td>æµç¨‹å®ä¾‹çš„rootæµç¨‹id</td>\n<td></td>\n</tr>\n<tr>\n<td>ACT_ID_</td>\n<td>èŠ‚ç‚¹å®ä¾‹ID</td>\n<td></td>\n</tr>\n<tr>\n<td>IS_ACTIVE_</td>\n<td>æ˜¯å¦å­˜æ´»</td>\n<td></td>\n</tr>\n<tr>\n<td>IS_CONCURRENT_</td>\n<td>æ‰§è¡Œæµæ˜¯å¦æ­£åœ¨å¹¶è¡Œ</td>\n<td></td>\n</tr>\n<tr>\n<td>IS_SCOPE_</td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td>IS_EVENT_SCOPE_</td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td>IS_MI_ROOT_</td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td>SUSPENSION_STATE_</td>\n<td>æµç¨‹ç»ˆç«¯çŠ¶æ€</td>\n<td></td>\n</tr>\n<tr>\n<td>CACHED_ENT_STATE_</td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td>TENANT_ID_</td>\n<td>ç§Ÿæˆ·ç¼–å·</td>\n<td></td>\n</tr>\n<tr>\n<td>NAME_</td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td>START_TIME_</td>\n<td>å¼€å§‹æ—¶é—´</td>\n<td></td>\n</tr>\n<tr>\n<td>START_USER_ID_</td>\n<td>å¼€å§‹çš„ç”¨æˆ·ç¼–å·</td>\n<td></td>\n</tr>\n<tr>\n<td>LOCK_TIME_</td>\n<td>é”å®šæ—¶é—´</td>\n<td></td>\n</tr>\n<tr>\n<td>IS_COUNT_ENABLED_</td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td>EVT_SUBSCR_COUNT_</td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td>TASK_COUNT_</td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td>JOB_COUNT_</td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td>TIMER_JOB_COUNT_</td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td>SUSP_JOB_COUNT_</td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td>DEADLETTER_JOB_COUNT_</td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td>VAR_COUNT_</td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td>ID_LINK_COUNT_</td>\n<td></td>\n<td></td>\n</tr>\n</tbody></table>\n<p>åˆ›å»ºæµç¨‹å®ä¾‹åå¯¹åº”çš„è¡¨ç»“æ„çš„æ•°æ®</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220322133108405.png\"\n                      alt=\"image-20220322133108405\"\n                ></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220322133219534.png\"\n                      alt=\"image-20220322133219534\"\n                ></p>\n<p>ACT_RU_TASK  è¿è¡Œæ—¶ä»»åŠ¡è¡¨</p>\n<table>\n<thead>\n<tr>\n<th>å­—æ®µ</th>\n<th>åç§°</th>\n<th>å¤‡æ³¨</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>ID_</td>\n<td>ä¸»é”®</td>\n<td></td>\n</tr>\n<tr>\n<td>REV_</td>\n<td>ç‰ˆæœ¬å·</td>\n<td></td>\n</tr>\n<tr>\n<td>EXECUTION_ID_</td>\n<td>ä»»åŠ¡æ‰€åœ¨çš„æ‰§è¡ŒæµID</td>\n<td></td>\n</tr>\n<tr>\n<td>PROC_INST_ID_</td>\n<td>æµç¨‹å®ä¾‹ID</td>\n<td></td>\n</tr>\n<tr>\n<td>PROC_DEF_ID_</td>\n<td>æµç¨‹å®šä¹‰æ•°æ®ID</td>\n<td></td>\n</tr>\n<tr>\n<td>NAME_</td>\n<td>ä»»åŠ¡åç§°</td>\n<td></td>\n</tr>\n<tr>\n<td>PARENT_TASK_ID_</td>\n<td>çˆ¶ä»»åŠ¡ID</td>\n<td></td>\n</tr>\n<tr>\n<td>DESCRIPTION_</td>\n<td>è¯´æ˜</td>\n<td></td>\n</tr>\n<tr>\n<td>TASK_DEF_KEY_</td>\n<td>ä»»åŠ¡å®šä¹‰çš„IDå€¼</td>\n<td></td>\n</tr>\n<tr>\n<td>OWNER_</td>\n<td>ä»»åŠ¡æ‹¥æœ‰äºº</td>\n<td></td>\n</tr>\n<tr>\n<td>ASSIGNEE_</td>\n<td>è¢«æŒ‡æ´¾æ‰§è¡Œè¯¥ä»»åŠ¡çš„äºº</td>\n<td></td>\n</tr>\n<tr>\n<td>DELEGATION_</td>\n<td>å§”æ‰˜äºº</td>\n<td></td>\n</tr>\n<tr>\n<td>PRIORITY_</td>\n<td>ä¼˜å…ˆçº§</td>\n<td></td>\n</tr>\n<tr>\n<td>CREATE_TIME_</td>\n<td>åˆ›å»ºæ—¶é—´</td>\n<td></td>\n</tr>\n<tr>\n<td>DUE_DATE_</td>\n<td>è€—æ—¶</td>\n<td></td>\n</tr>\n<tr>\n<td>CATEGORY_</td>\n<td>ç±»åˆ«</td>\n<td></td>\n</tr>\n<tr>\n<td>SUSPENSION_STATE_</td>\n<td>æ˜¯å¦æŒ‚èµ·</td>\n<td>1ä»£è¡¨æ¿€æ´» 2ä»£è¡¨æŒ‚èµ·</td>\n</tr>\n<tr>\n<td>TENANT_ID_</td>\n<td>ç§Ÿæˆ·ç¼–å·</td>\n<td></td>\n</tr>\n<tr>\n<td>FORM_KEY_</td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td>CLAIM_TIME_</td>\n<td>æ‹¾å–æ—¶é—´</td>\n<td></td>\n</tr>\n</tbody></table>\n<p>åˆ›å»ºæµç¨‹å®ä¾‹åå¯¹åº”çš„è¡¨ç»“æ„çš„æ•°æ®</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220322133307195.png\"\n                      alt=\"image-20220322133307195\"\n                ></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220322133335326.png\"\n                      alt=\"image-20220322133335326\"\n                ></p>\n<p>ACT_RU_VARIABLE  è¿è¡Œæ—¶å˜é‡è¡¨</p>\n<table>\n<thead>\n<tr>\n<th>å­—æ®µ</th>\n<th>åç§°</th>\n<th>å¤‡æ³¨</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>ID_</td>\n<td>ä¸»é”®</td>\n<td></td>\n</tr>\n<tr>\n<td>REV_</td>\n<td>ç‰ˆæœ¬å·</td>\n<td></td>\n</tr>\n<tr>\n<td>TYPE_</td>\n<td>å‚æ•°ç±»å‹</td>\n<td>å¯ä»¥æ˜¯åŸºæœ¬çš„ç±»å‹ï¼Œä¹Ÿå¯ä»¥ç”¨æˆ·è‡ªè¡Œæ‰©å±•</td>\n</tr>\n<tr>\n<td>NAME_</td>\n<td>å‚æ•°åç§°</td>\n<td></td>\n</tr>\n<tr>\n<td>EXECUTION_ID_</td>\n<td>å‚æ•°æ‰§è¡ŒID</td>\n<td></td>\n</tr>\n<tr>\n<td>PROC_INST_ID_</td>\n<td>æµç¨‹å®ä¾‹ID</td>\n<td></td>\n</tr>\n<tr>\n<td>TASK_ID_</td>\n<td>ä»»åŠ¡ID</td>\n<td></td>\n</tr>\n<tr>\n<td>BYTEARRAY_ID_</td>\n<td>èµ„æºID</td>\n<td></td>\n</tr>\n<tr>\n<td>DOUBLE_</td>\n<td>å‚æ•°ä¸ºdoubleï¼Œåˆ™ä¿å­˜åœ¨è¯¥å­—æ®µä¸­</td>\n<td></td>\n</tr>\n<tr>\n<td>LONG_</td>\n<td>å‚æ•°ä¸ºlongï¼Œåˆ™ä¿å­˜åœ¨è¯¥å­—æ®µä¸­</td>\n<td></td>\n</tr>\n<tr>\n<td>TEXT_</td>\n<td>ç”¨æˆ·ä¿å­˜æ–‡æœ¬ç±»å‹çš„å‚æ•°å€¼</td>\n<td></td>\n</tr>\n<tr>\n<td>TEXT2_</td>\n<td>ç”¨æˆ·ä¿å­˜æ–‡æœ¬ç±»å‹çš„å‚æ•°å€¼</td>\n<td></td>\n</tr>\n</tbody></table>\n<p>åˆ›å»ºæµç¨‹å®ä¾‹åå¯¹åº”çš„è¡¨ç»“æ„çš„æ•°æ®</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220322133406398.png\"\n                      alt=\"image-20220322133406398\"\n                ></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220322133439827.png\"\n                      alt=\"image-20220322133439827\"\n                ></p>\n<p>ACT_RU_IDENTITYLINK è¿è¡Œæ—¶ç”¨æˆ·å…³ç³»ä¿¡æ¯ </p>\n<table>\n<thead>\n<tr>\n<th>å­—æ®µ</th>\n<th>åç§°</th>\n<th>å¤‡æ³¨</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>ID_</td>\n<td>ä¸»é”®</td>\n<td></td>\n</tr>\n<tr>\n<td>REV_</td>\n<td>ç‰ˆæœ¬å·</td>\n<td></td>\n</tr>\n<tr>\n<td>GROUP_ID_</td>\n<td>ç”¨æˆ·ç»„ID</td>\n<td></td>\n</tr>\n<tr>\n<td>TYPE_</td>\n<td>å…³ç³»æ•°æ®ç±»å‹</td>\n<td>assigneeæ”¯é…äºº(ç»„)ã€candidateå€™é€‰äºº(ç»„)ã€owneræ‹¥æœ‰äºº,participantå‚ä¸è€…</td>\n</tr>\n<tr>\n<td>USER_ID_</td>\n<td>ç”¨æˆ·ID</td>\n<td></td>\n</tr>\n<tr>\n<td>TASK_ID_</td>\n<td>ä»»åŠ¡ID</td>\n<td></td>\n</tr>\n<tr>\n<td>PROC_INST_ID_</td>\n<td>æµç¨‹å®šä¹‰ID</td>\n<td></td>\n</tr>\n<tr>\n<td>PROC_DEF_ID_</td>\n<td>å±æ€§ID</td>\n<td></td>\n</tr>\n</tbody></table>\n<p>åˆ›å»ºæµç¨‹å®ä¾‹åå¯¹åº”çš„è¡¨ç»“æ„çš„æ•°æ®:</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220322133501720.png\"\n                      alt=\"image-20220322133501720\"\n                ></p>\n<h2 id=\"å¤„ç†æµç¨‹\"><a href=\"#å¤„ç†æµç¨‹\" class=\"headerlink\" title=\"å¤„ç†æµç¨‹\"></a>å¤„ç†æµç¨‹</h2><p>ä¸Šé¢çš„æµç¨‹å·²ç»æµè½¬åˆ°äº†zhangsanè¿™ä¸ªç”¨æˆ·è¿™é‡Œï¼Œç„¶åå¯ä»¥å¼€å§‹å®¡æ‰¹äº†</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// è·å–æµç¨‹å¼•æ“å¯¹è±¡</span></span><br><span class=\"line\">        <span class=\"type\">ProcessEngine</span> <span class=\"variable\">processEngine</span> <span class=\"operator\">=</span> ProcessEngines.getDefaultProcessEngine();</span><br><span class=\"line\">        <span class=\"type\">TaskService</span> <span class=\"variable\">taskService</span> <span class=\"operator\">=</span> processEngine.getTaskService();</span><br><span class=\"line\">        <span class=\"type\">Task</span> <span class=\"variable\">task</span> <span class=\"operator\">=</span> taskService.createTaskQuery()</span><br><span class=\"line\">                .processDefinitionId(<span class=\"string\">&quot;holiday:1:4&quot;</span>)</span><br><span class=\"line\">                .taskAssignee(<span class=\"string\">&quot;zhangsan&quot;</span>)</span><br><span class=\"line\">                .singleResult();</span><br><span class=\"line\">        <span class=\"comment\">// æ·»åŠ æµç¨‹å˜é‡</span></span><br><span class=\"line\">        Map&lt;String,Object&gt; variables = <span class=\"keyword\">new</span> <span class=\"title class_\">HashMap</span>&lt;&gt;();</span><br><span class=\"line\">        variables.put(<span class=\"string\">&quot;approved&quot;</span>,<span class=\"literal\">false</span>); <span class=\"comment\">// æ‹’ç»è¯·å‡</span></span><br><span class=\"line\">        <span class=\"comment\">// å®Œæˆä»»åŠ¡</span></span><br><span class=\"line\">        taskService.complete(task.getId(),variables);</span><br></pre></td></tr></table></figure>\n\n<p>åœ¨æ­£å¸¸å¤„ç†æµç¨‹ä¸­æ¶‰åŠåˆ°çš„è¡¨ç»“æ„</p>\n<ul>\n<li>ACT_RU_EXECUTION è¿è¡Œæ—¶æµç¨‹æ‰§è¡Œå®ä¾‹ </li>\n<li>ACT_RU_IDENTITYLINK è¿è¡Œæ—¶ç”¨æˆ·å…³ç³»ä¿¡æ¯ </li>\n<li>ACT_RU_TASK  è¿è¡Œæ—¶ä»»åŠ¡è¡¨ </li>\n<li>ACT_RU_VARIABLE  è¿è¡Œæ—¶å˜é‡è¡¨</li>\n</ul>\n<p>ACT_RU_TASK  è¿è¡Œæ—¶ä»»åŠ¡è¡¨ :ä¼šæ–°ç”Ÿæˆä¸€æ¡è®°å½•</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220322135040119.png\"\n                      alt=\"image-20220322135040119\"\n                ></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220322135125703.png\"\n                      alt=\"image-20220322135125703\"\n                ></p>\n<p>ACT_RU_VARIABLE  è¿è¡Œæ—¶å˜é‡è¡¨:ä¼šè®°å½•æ–°çš„æµç¨‹å˜é‡</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220322135204021.png\"\n                      alt=\"image-20220322135204021\"\n                ></p>\n<p>å½“ç„¶æµç¨‹å®ä¾‹ä¹Ÿå¯ä»¥æŒ‚èµ·</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 1.è·å–ProcessEngineå¯¹è±¡</span></span><br><span class=\"line\"><span class=\"type\">ProcessEngine</span> <span class=\"variable\">engine</span> <span class=\"operator\">=</span> ProcessEngines.getDefaultProcessEngine();</span><br><span class=\"line\"><span class=\"comment\">// 2.è·å–RuntimeService</span></span><br><span class=\"line\"><span class=\"type\">RuntimeService</span> <span class=\"variable\">runtimeService</span> <span class=\"operator\">=</span> engine.getRuntimeService();</span><br><span class=\"line\"><span class=\"comment\">// 3.è·å–æµç¨‹å®ä¾‹å¯¹è±¡</span></span><br><span class=\"line\"><span class=\"type\">ProcessInstance</span> <span class=\"variable\">processInstance</span> <span class=\"operator\">=</span> runtimeService.createProcessInstanceQuery()</span><br><span class=\"line\">    .processInstanceId(<span class=\"string\">&quot;25001&quot;</span>)</span><br><span class=\"line\">    .singleResult();</span><br><span class=\"line\"><span class=\"comment\">// 4.è·å–ç›¸å…³çš„çŠ¶æ€æ“ä½œ</span></span><br><span class=\"line\"><span class=\"type\">boolean</span> <span class=\"variable\">suspended</span> <span class=\"operator\">=</span> processInstance.isSuspended();</span><br><span class=\"line\"><span class=\"type\">String</span> <span class=\"variable\">id</span> <span class=\"operator\">=</span> processInstance.getId();</span><br><span class=\"line\"><span class=\"keyword\">if</span>(suspended)&#123;</span><br><span class=\"line\">    <span class=\"comment\">// æŒ‚èµ·--ã€‹æ¿€æ´»</span></span><br><span class=\"line\">    runtimeService.activateProcessInstanceById(id);</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;æµç¨‹å®šä¹‰ï¼š&quot;</span> + id + <span class=\"string\">&quot;ï¼Œå·²æ¿€æ´»&quot;</span>);</span><br><span class=\"line\">&#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// æ¿€æ´»--ã€‹æŒ‚èµ·</span></span><br><span class=\"line\">    runtimeService.suspendProcessInstanceById(id);</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;æµç¨‹å®šä¹‰ï¼š&quot;</span> + id + <span class=\"string\">&quot;ï¼Œå·²æŒ‚èµ·&quot;</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<p>å¯åŠ¨ç¬¬äºŒä¸ªæµç¨‹å®ä¾‹åå†æŸ¥çœ‹ç›¸å…³çš„è¡¨ç»“æ„æ—¶ï¼Œå¯¹ä»–ä»¬çš„å…³ç³»ç†è§£ä¼šæ›´åŠ çš„æ¸…æ¥šä¸€äº›</p>\n<p>å¯åŠ¨ä¸€ä¸ªæ–°çš„æµç¨‹å®ä¾‹å¯¹åº”çš„å°±ä¼šäº§ç”Ÿä¸¤æ¡è®°å½•</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220322135605252.png\"\n                      alt=\"image-20220322135605252\"\n                ></p>\n<p>IDENTITYLINKä¸­ä¼šè®°å½•æ¯æ¬¡æµç¨‹æ“ä½œçš„ä¿¡æ¯</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220322135636841.png\"\n                      alt=\"image-20220322135636841\"\n                ></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220322135659671.png\"\n                      alt=\"image-20220322135659671\"\n                ></p>\n<p>æµç¨‹å˜é‡æ•°æ®ï¼ŒåŠæ—¶key ç›¸åŒï¼Œä½†æ˜¯å±äºä¸åŒçš„æµç¨‹å®ä¾‹ç›¸äº’é—´ä¹Ÿæ˜¯éš”ç¦»çš„</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220322135719104.png\"\n                      alt=\"image-20220322135719104\"\n                ></p>\n<h2 id=\"å®Œæˆä¸€ä¸ªæµç¨‹\"><a href=\"#å®Œæˆä¸€ä¸ªæµç¨‹\" class=\"headerlink\" title=\"å®Œæˆä¸€ä¸ªæµç¨‹\"></a>å®Œæˆä¸€ä¸ªæµç¨‹</h2><p>ç„¶åæˆ‘ä»¬æŠŠç¬¬ä¸€ä¸ªæµç¨‹å¤„ç†å®Œæˆ</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">ProcessEngine</span> <span class=\"variable\">processEngine</span> <span class=\"operator\">=</span> cfg.buildProcessEngine();</span><br><span class=\"line\"><span class=\"type\">TaskService</span> <span class=\"variable\">taskService</span> <span class=\"operator\">=</span> processEngine.getTaskService();</span><br><span class=\"line\"><span class=\"type\">Task</span> <span class=\"variable\">task</span> <span class=\"operator\">=</span> taskService.createTaskQuery()</span><br><span class=\"line\">    .processDefinitionId(<span class=\"string\">&quot;holiday:1:4&quot;</span>)</span><br><span class=\"line\">    .taskAssignee(<span class=\"string\">&quot;lisi&quot;</span>)</span><br><span class=\"line\">    .singleResult();</span><br><span class=\"line\"><span class=\"comment\">// æ·»åŠ æµç¨‹å˜é‡</span></span><br><span class=\"line\">Map&lt;String,Object&gt; variables = <span class=\"keyword\">new</span> <span class=\"title class_\">HashMap</span>&lt;&gt;();</span><br><span class=\"line\">variables.put(<span class=\"string\">&quot;approved&quot;</span>,<span class=\"literal\">false</span>); <span class=\"comment\">// æ‹’ç»è¯·å‡</span></span><br><span class=\"line\"><span class=\"comment\">// å®Œæˆä»»åŠ¡</span></span><br><span class=\"line\">taskService.complete(task.getId(),variables);</span><br></pre></td></tr></table></figure>\n\n<p>å¤„ç†å®Œäº†ä¸€ä¸ªå·¥ä½œæµç¨‹åï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹ç›¸å…³çš„è¡¨ç»“æ„ä¿¡æ¯</p>\n<p>é¦–å…ˆæˆ‘ä»¬ä¼šå‘ç°</p>\n<ul>\n<li>ACT_RU_EXECUTION è¿è¡Œæ—¶æµç¨‹æ‰§è¡Œå®ä¾‹ </li>\n<li>ACT_RU_IDENTITYLINK è¿è¡Œæ—¶ç”¨æˆ·å…³ç³»ä¿¡æ¯ </li>\n<li>ACT_RU_TASK  è¿è¡Œæ—¶ä»»åŠ¡è¡¨ </li>\n<li>ACT_RU_VARIABLE  è¿è¡Œæ—¶å˜é‡è¡¨</li>\n</ul>\n<p>è¿™å››å¼ è¡¨ä¸­å¯¹åº”çš„æ•°æ®éƒ½æ²¡æœ‰äº†ï¼Œä¹Ÿå°±æ˜¯è¿™ä¸ªæµç¨‹å·²ç»ä¸æ˜¯è¿è¡Œä¸­çš„æµç¨‹äº†ã€‚ç„¶ååœ¨å¯¹åº”çš„å†å²è¡¨ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ç›¸å…³çš„ä¿¡æ¯</p>\n<ul>\n<li><p>ACT_HI_ACTINST  å†å²çš„æµç¨‹å®ä¾‹</p>\n</li>\n<li><p>ACT_HI_ATTACHMENT å†å²çš„æµç¨‹é™„ä»¶</p>\n</li>\n<li><p>ACT_HI_COMMENT  å†å²çš„è¯´æ˜æ€§ä¿¡æ¯</p>\n</li>\n<li><p>ACT_HI_DETAIL å†å²çš„æµç¨‹è¿è¡Œä¸­çš„ç»†èŠ‚ä¿¡æ¯</p>\n</li>\n<li><p>ACT_HI_IDENTITYLINK å†å²çš„æµç¨‹è¿è¡Œè¿‡ç¨‹ä¸­ç”¨æˆ·å…³ç³»</p>\n</li>\n<li><p>ACT_HI_PROCINST  å†å²çš„æµç¨‹å®ä¾‹</p>\n</li>\n<li><p>ACT_HI_TASKINST  å†å²çš„ä»»åŠ¡å®ä¾‹</p>\n</li>\n<li><p>ACT_HI_VARINST  å†å²çš„æµç¨‹è¿è¡Œä¸­çš„å˜é‡ä¿¡æ¯</p>\n</li>\n</ul>\n<p>åœ¨æˆ‘ä»¬ä¸Šé¢çš„å¤„ç†æµç¨‹çš„è¿‡ç¨‹ä¸­è®¾è®¡åˆ°çš„å†å²è¡¨æœ‰</p>\n<p>ACT_HI_ACTINST  å†å²çš„æµç¨‹å®ä¾‹</p>\n<table>\n<thead>\n<tr>\n<th>å­—æ®µ</th>\n<th>åç§°</th>\n<th>å¤‡æ³¨</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>ID_</td>\n<td>ä¸»é”®</td>\n<td></td>\n</tr>\n<tr>\n<td>PROC_DEF_ID_</td>\n<td>æµç¨‹å®šä¹‰ID</td>\n<td></td>\n</tr>\n<tr>\n<td>PROC_INST_ID_</td>\n<td>æµç¨‹å®ä¾‹ID</td>\n<td></td>\n</tr>\n<tr>\n<td>EXECUTION_ID_</td>\n<td>æ‰§è¡ŒID</td>\n<td></td>\n</tr>\n<tr>\n<td>ACT_ID_</td>\n<td>èŠ‚ç‚¹å®ä¾‹ID</td>\n<td></td>\n</tr>\n<tr>\n<td>TASK_ID_</td>\n<td>ä»»åŠ¡ID</td>\n<td></td>\n</tr>\n<tr>\n<td>CALL_PROC_INST_ID_</td>\n<td>è°ƒç”¨å¤–éƒ¨çš„æµç¨‹å®ä¾‹ID</td>\n<td></td>\n</tr>\n<tr>\n<td>ACT_NAME_</td>\n<td>èŠ‚ç‚¹åç§°</td>\n<td></td>\n</tr>\n<tr>\n<td>ACT_TYPE_</td>\n<td>èŠ‚ç‚¹ç±»å‹</td>\n<td></td>\n</tr>\n<tr>\n<td>ASSIGNEE_</td>\n<td>å¤„ç†äºº</td>\n<td></td>\n</tr>\n<tr>\n<td>START_TIME_</td>\n<td>å¼€å§‹æ—¶é—´</td>\n<td></td>\n</tr>\n<tr>\n<td>END_TIME_</td>\n<td>ç»“æŸæ—¶é—´</td>\n<td></td>\n</tr>\n<tr>\n<td>DURATION_</td>\n<td>è€—æ—¶</td>\n<td></td>\n</tr>\n<tr>\n<td>DELETE_REASON_</td>\n<td>åˆ é™¤åŸå› </td>\n<td></td>\n</tr>\n<tr>\n<td>TENANT_ID_</td>\n<td>ç§Ÿæˆ·ç¼–å·</td>\n<td></td>\n</tr>\n</tbody></table>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220322141800554.png\"\n                      alt=\"image-20220322141800554\"\n                ></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220322141825065.png\"\n                      alt=\"image-20220322141825065\"\n                ></p>\n<p>ACT_HI_IDENTITYLINK å†å²çš„æµç¨‹è¿è¡Œè¿‡ç¨‹ä¸­ç”¨æˆ·å…³ç³»</p>\n<table>\n<thead>\n<tr>\n<th>å­—æ®µ</th>\n<th>åç§°</th>\n<th>å¤‡æ³¨</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>ID_</td>\n<td>ä¸»é”®</td>\n<td></td>\n</tr>\n<tr>\n<td>GROUP_ID_</td>\n<td>ç»„ç¼–å·</td>\n<td></td>\n</tr>\n<tr>\n<td>TYPE_</td>\n<td>ç±»å‹</td>\n<td></td>\n</tr>\n<tr>\n<td>USER_ID_</td>\n<td>ç”¨æˆ·ç¼–å·</td>\n<td></td>\n</tr>\n<tr>\n<td>TASK_ID_</td>\n<td>ä»»åŠ¡ç¼–å·</td>\n<td></td>\n</tr>\n<tr>\n<td>CREATE_TIME_</td>\n<td>åˆ›å»ºæ—¶é—´</td>\n<td></td>\n</tr>\n<tr>\n<td>PROC_INST_ID_</td>\n<td>æµç¨‹å®ä¾‹ç¼–å·</td>\n<td></td>\n</tr>\n<tr>\n<td>SCOPE_ID_</td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td>SCOPE_TYPE_</td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td>SCOPE_DEFINITION_ID_</td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td></td>\n<td></td>\n<td></td>\n</tr>\n</tbody></table>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220322141717826.png\"\n                      alt=\"image-20220322141717826\"\n                ></p>\n<p>ACT_HI_PROCINST  å†å²çš„æµç¨‹å®ä¾‹</p>\n<table>\n<thead>\n<tr>\n<th>å­—æ®µ</th>\n<th>åç§°</th>\n<th>å¤‡æ³¨</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>ID_</td>\n<td>ä¸»é”®</td>\n<td></td>\n</tr>\n<tr>\n<td>PROC_INST_ID_</td>\n<td>æµç¨‹å®ä¾‹ID</td>\n<td></td>\n</tr>\n<tr>\n<td>BUSINESS_KEY_</td>\n<td>ä¸šåŠ¡ä¸»é”®</td>\n<td></td>\n</tr>\n<tr>\n<td>PROC_DEF_ID_</td>\n<td>å±æ€§ID</td>\n<td></td>\n</tr>\n<tr>\n<td>START_TIME_</td>\n<td>å¼€å§‹æ—¶é—´</td>\n<td></td>\n</tr>\n<tr>\n<td>END_TIME_</td>\n<td>ç»“æŸæ—¶é—´</td>\n<td></td>\n</tr>\n<tr>\n<td>DURATION_</td>\n<td>è€—æ—¶</td>\n<td></td>\n</tr>\n<tr>\n<td>START_USER_ID_</td>\n<td>èµ·å§‹äºº</td>\n<td></td>\n</tr>\n<tr>\n<td>START_ACT_ID_</td>\n<td>èµ·å§‹èŠ‚ç‚¹</td>\n<td></td>\n</tr>\n<tr>\n<td>END_ACT_ID_</td>\n<td>ç»“æŸèŠ‚ç‚¹</td>\n<td></td>\n</tr>\n<tr>\n<td>SUPER_PROCESS_INSTANCE_ID_</td>\n<td>çˆ¶æµç¨‹å®ä¾‹ID</td>\n<td></td>\n</tr>\n<tr>\n<td>DELETE_REASON_</td>\n<td>åˆ é™¤åŸå› </td>\n<td></td>\n</tr>\n<tr>\n<td>TENANT_ID_</td>\n<td>ç§Ÿæˆ·ç¼–å·</td>\n<td></td>\n</tr>\n<tr>\n<td>NAME_</td>\n<td>åç§°</td>\n<td></td>\n</tr>\n</tbody></table>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220322141855401.png\"\n                      alt=\"image-20220322141855401\"\n                ></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220322141912602.png\"\n                      alt=\"image-20220322141912602\"\n                ></p>\n<p>ACT_HI_TASKINST  å†å²çš„ä»»åŠ¡å®ä¾‹</p>\n<table>\n<thead>\n<tr>\n<th>å­—æ®µ</th>\n<th>åç§°</th>\n<th>å¤‡æ³¨</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>ID_</td>\n<td>ä¸»é”®</td>\n<td></td>\n</tr>\n<tr>\n<td>PROC_DEF_ID_</td>\n<td>æµç¨‹å®šä¹‰ID</td>\n<td></td>\n</tr>\n<tr>\n<td>TASK_DEF_KEY_</td>\n<td>ä»»åŠ¡å®šä¹‰çš„IDå€¼</td>\n<td></td>\n</tr>\n<tr>\n<td>PROC_INST_ID_</td>\n<td>æµç¨‹å®ä¾‹ID</td>\n<td></td>\n</tr>\n<tr>\n<td>EXECUTION_ID_</td>\n<td>æ‰§è¡ŒID</td>\n<td></td>\n</tr>\n<tr>\n<td>PARENT_TASK_ID_</td>\n<td>çˆ¶ä»»åŠ¡ID</td>\n<td></td>\n</tr>\n<tr>\n<td>NAME_</td>\n<td>åç§°</td>\n<td></td>\n</tr>\n<tr>\n<td>DESCRIPTION_</td>\n<td>è¯´æ˜</td>\n<td></td>\n</tr>\n<tr>\n<td>OWNER_</td>\n<td>å®é™…ç­¾æ”¶äºº ä»»åŠ¡çš„æ‹¥æœ‰è€…</td>\n<td>ç­¾æ”¶äººï¼ˆé»˜è®¤ä¸ºç©ºï¼Œåªæœ‰åœ¨å§”æ‰˜æ—¶æ‰æœ‰å€¼ï¼‰</td>\n</tr>\n<tr>\n<td>ASSIGNEE_</td>\n<td>è¢«æŒ‡æ´¾æ‰§è¡Œè¯¥ä»»åŠ¡çš„äºº</td>\n<td></td>\n</tr>\n<tr>\n<td>START_TIME_</td>\n<td>å¼€å§‹æ—¶é—´</td>\n<td></td>\n</tr>\n<tr>\n<td>CLAIM_TIME_</td>\n<td>ä»»åŠ¡æ‹¾å–æ—¶é—´</td>\n<td></td>\n</tr>\n<tr>\n<td>END_TIME_</td>\n<td>ç»“æŸæ—¶é—´</td>\n<td></td>\n</tr>\n<tr>\n<td>DURATION_</td>\n<td>è€—æ—¶</td>\n<td></td>\n</tr>\n<tr>\n<td>DELETE_REASON_</td>\n<td>åˆ é™¤åŸå› </td>\n<td></td>\n</tr>\n<tr>\n<td>PRIORITY_</td>\n<td>ä¼˜å…ˆçº§åˆ«</td>\n<td></td>\n</tr>\n<tr>\n<td>DUE_DATE_</td>\n<td>è¿‡æœŸæ—¶é—´</td>\n<td></td>\n</tr>\n<tr>\n<td>FORM_KEY_</td>\n<td>èŠ‚ç‚¹å®šä¹‰çš„formkey</td>\n<td></td>\n</tr>\n<tr>\n<td>CATEGORY_</td>\n<td>ç±»åˆ«</td>\n<td></td>\n</tr>\n<tr>\n<td>TENANT_ID_</td>\n<td>ç§Ÿæˆ·</td>\n<td></td>\n</tr>\n</tbody></table>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220322142609163.png\"\n                      alt=\"image-20220322142609163\"\n                ></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220322142650699.png\"\n                      alt=\"image-20220322142650699\"\n                ></p>\n<p>ACT_HI_VARINST  å†å²çš„æµç¨‹è¿è¡Œä¸­çš„å˜é‡ä¿¡æ¯ï¼šæµç¨‹å˜é‡è™½ç„¶åœ¨ä»»åŠ¡å®Œæˆååœ¨æµç¨‹å®ä¾‹è¡¨ä¸­ä¼šåˆ é™¤ï¼Œä½†æ˜¯åœ¨å†å²è¡¨ä¸­è¿˜æ˜¯ä¼šè®°å½•çš„</p>\n<table>\n<thead>\n<tr>\n<th>å­—æ®µ</th>\n<th>åç§°</th>\n<th>å¤‡æ³¨</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>ID_</td>\n<td>ä¸»é”®</td>\n<td></td>\n</tr>\n<tr>\n<td>PROC_INST_ID_</td>\n<td>æµç¨‹å®ä¾‹ID</td>\n<td></td>\n</tr>\n<tr>\n<td>EXECUTION_ID_</td>\n<td>æŒ‡å®šID</td>\n<td></td>\n</tr>\n<tr>\n<td>TASK_ID_</td>\n<td>ä»»åŠ¡ID</td>\n<td></td>\n</tr>\n<tr>\n<td>NAME_</td>\n<td>åç§°</td>\n<td></td>\n</tr>\n<tr>\n<td>VAR_TYPE_</td>\n<td>å‚æ•°ç±»å‹</td>\n<td></td>\n</tr>\n<tr>\n<td>REV_</td>\n<td>æ•°æ®ç‰ˆæœ¬</td>\n<td></td>\n</tr>\n<tr>\n<td>BYTEARRAY_ID_</td>\n<td>å­—èŠ‚è¡¨ID</td>\n<td></td>\n</tr>\n<tr>\n<td>DOUBLE_</td>\n<td>å­˜å‚¨doubleç±»å‹æ•°æ®</td>\n<td></td>\n</tr>\n<tr>\n<td>LONG_</td>\n<td>å­˜å‚¨longç±»å‹æ•°æ®</td>\n<td></td>\n</tr>\n<tr>\n<td>â€¦..</td>\n<td></td>\n<td></td>\n</tr>\n</tbody></table>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220322142756867.png\"\n                      alt=\"image-20220322142756867\"\n                ></p>\n<p>å¥½äº†ä¸€ä¸ªç›¸å¯¹ç®€å•çš„æµç¨‹å¤„ç†æ¶‰åŠåˆ°çš„ç›¸å…³è¡¨ç»“æ„å†…å®¹å°±ä»‹ç»å®Œäº†</p>\n","site":{"data":{"links":[{"name":"CZMæœ‰ç‚¹å†·","link":"https://czm.cool/","description":"CZMçš„åšå®¢","avatar":"https://img.czm.cool/avatar/avatar.png"},{"name":"PSH","link":"https://shamd.cloud/","description":"PSHçš„åšå®¢.","avatar":"https://shamd.cloud/upload/2022/07/afbb577733f46c9535dd1d6d6388278.jpg"},{"name":"KAI","link":"https://kainote.top/","description":"love artist, love code.","avatar":"https://cdn.jsdelivr.net/gh/kaix2301/pictures/img202201072101018.jpg"}]}},"excerpt":"","more":"<h1 id=\"flowableåŸºç¡€ç¯‡\"><a href=\"#flowableåŸºç¡€ç¯‡\" class=\"headerlink\" title=\"flowableåŸºç¡€ç¯‡\"></a>flowableåŸºç¡€ç¯‡</h1><blockquote>\n<p>Lectureï¼šæ³¢æ³¢è€å¸ˆ</p>\n</blockquote>\n<h1 id=\"Flowableä»‹ç»\"><a href=\"#Flowableä»‹ç»\" class=\"headerlink\" title=\"Flowableä»‹ç»\"></a>Flowableä»‹ç»</h1><p>Flowableæ˜¯BPMNçš„ä¸€ä¸ªåŸºäºjavaçš„è½¯ä»¶å®ç°ï¼Œä¸è¿‡Flowableä¸ä»…ä»…åŒ…æ‹¬BPMNï¼Œè¿˜æœ‰DMNå†³ç­–è¡¨å’ŒCMMN Caseç®¡ç†å¼•æ“ï¼Œå¹¶ä¸”æœ‰è‡ªå·±çš„ç”¨æˆ·ç®¡ç†ã€å¾®æœåŠ¡APIç­‰ä¸€ç³»åˆ—åŠŸèƒ½ï¼Œæ˜¯ä¸€ä¸ªæœåŠ¡å¹³å°ã€‚</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220317101115398.png\"\n                      alt=\"image-20220317101115398\"\n                ></p>\n<h1 id=\"FlowableåŸºç¡€\"><a href=\"#FlowableåŸºç¡€\" class=\"headerlink\" title=\"FlowableåŸºç¡€\"></a>FlowableåŸºç¡€</h1><p>å®˜æ–¹æ‰‹å†Œï¼š<a class=\"link\"   href=\"https://tkjohn.github.io/flowable-userguide/#_introduction\" >https://tkjohn.github.io/flowable-userguide/#_introduction<i class=\"fas fa-external-link-alt\"></i></a></p>\n<h2 id=\"åˆ›å»ºProcessEngine\"><a href=\"#åˆ›å»ºProcessEngine\" class=\"headerlink\" title=\"åˆ›å»ºProcessEngine\"></a>åˆ›å»ºProcessEngine</h2><p>åˆ›å»ºä¸€ä¸ªåŸºæœ¬çš„mavenå·¥ç¨‹ï¼Œå¯ä»¥æ˜¯Eclipseä¹Ÿå¯ä»¥æ˜¯å…¶ä»–IDEAã€‚ç„¶åæ·»åŠ ä¸¤ä¸ªä¾èµ–</p>\n<ul>\n<li>Flowableæµç¨‹å¼•æ“ã€‚ä½¿æˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªProcessEngineæµç¨‹å¼•æ“å¯¹è±¡ï¼Œå¹¶è®¿é—®Flowable APIã€‚</li>\n<li>ä¸€ä¸ªæ˜¯MySQLçš„æ•°æ®åº“é©±åŠ¨</li>\n</ul>\n<p>åœ¨<em>pom.xml</em>æ–‡ä»¶ä¸­æ·»åŠ ä¸‹åˆ—è¡Œï¼š</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.flowable<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>flowable-engine<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>6.3.0<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>mysql<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>mysql-connector-java<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>8.0.21<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>ç„¶ååˆ›å»ºä¸€ä¸ªæ™®é€šçš„Javaç±»ï¼Œæ·»åŠ å¯¹åº”çš„mainæ–¹æ³•ï¼Œé¦–å…ˆè¦åšçš„æ˜¯åˆå§‹åŒ–<strong>ProcessEngine</strong>æµç¨‹å¼•æ“å®ä¾‹ã€‚è¿™æ˜¯ä¸€ä¸ªçº¿ç¨‹å®‰å…¨çš„å¯¹è±¡ï¼Œå› æ­¤é€šå¸¸åªéœ€è¦åœ¨ä¸€ä¸ªåº”ç”¨ä¸­åˆå§‹åŒ–ä¸€æ¬¡ã€‚ <em>ProcessEngine</em>ç”±<strong>ProcessEngineConfiguration</strong>å®ä¾‹åˆ›å»ºã€‚è¯¥å®ä¾‹å¯ä»¥é…ç½®ä¸è°ƒæ•´æµç¨‹å¼•æ“çš„è®¾ç½®ã€‚ é€šå¸¸ä½¿ç”¨ä¸€ä¸ªé…ç½®XMLæ–‡ä»¶åˆ›å»º<em>ProcessEngineConfiguration</em>ï¼Œä½†æ˜¯ï¼ˆåƒåœ¨è¿™é‡Œåšçš„ä¸€æ ·ï¼‰ä¹Ÿå¯ä»¥ç¼–ç¨‹æ–¹å¼åˆ›å»ºå®ƒã€‚ <em>ProcessEngineConfiguration</em>æ‰€éœ€çš„æœ€å°é…ç½®ï¼Œæ˜¯æ•°æ®åº“JDBCè¿æ¥ï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> &#123;</span><br><span class=\"line\">    <span class=\"type\">ProcessEngineConfiguration</span> <span class=\"variable\">cfg</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">StandaloneProcessEngineConfiguration</span>()</span><br><span class=\"line\">        .setJdbcUrl(<span class=\"string\">&quot;jdbc:mysql://localhost:3306/flowable-learn?serverTimezone=UTC&quot;</span>)</span><br><span class=\"line\">        .setJdbcUsername(<span class=\"string\">&quot;root&quot;</span>)</span><br><span class=\"line\">        .setJdbcPassword(<span class=\"string\">&quot;123456&quot;</span>)</span><br><span class=\"line\">        .setJdbcDriver(<span class=\"string\">&quot;com.mysql.cj.jdbc.Driver&quot;</span>)</span><br><span class=\"line\">        .setDatabaseSchemaUpdate(ProcessEngineConfiguration.DB_SCHEMA_UPDATE_TRUE);</span><br><span class=\"line\">    <span class=\"type\">ProcessEngine</span> <span class=\"variable\">processEngine</span> <span class=\"operator\">=</span> cfg.buildProcessEngine();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>æ³¨æ„åœ¨mysql8.0ä¸­æ‰§è¡Œå¯èƒ½å‡ºç°å¦‚ä¸‹çš„é”™è¯¯</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316093416477.png\"\n                      alt=\"image-20220316093416477\"\n                ></p>\n<p>å‡ºç°è¿™ç§æƒ…å†µåªéœ€è¦åœ¨mysqlçš„è¿æ¥å­—ç¬¦ä¸²ä¸­æ·»åŠ ä¸ŠnullCatalogMeansCurrent&#x3D;trueï¼Œè®¾ç½®ä¸ºåªæŸ¥å½“å‰è¿æ¥çš„schemaåº“å³å¯ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> &#123;</span><br><span class=\"line\">    <span class=\"type\">ProcessEngineConfiguration</span> <span class=\"variable\">cfg</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">StandaloneProcessEngineConfiguration</span>()</span><br><span class=\"line\">            .setJdbcUrl(<span class=\"string\">&quot;jdbc:mysql://localhost:3306/flowable-learn1?serverTimezone=UTC&amp;nullCatalogMeansCurrent=true&quot;</span>)</span><br><span class=\"line\">            .setJdbcUsername(<span class=\"string\">&quot;root&quot;</span>)</span><br><span class=\"line\">            .setJdbcPassword(<span class=\"string\">&quot;123456&quot;</span>)</span><br><span class=\"line\">            .setJdbcDriver(<span class=\"string\">&quot;com.mysql.cj.jdbc.Driver&quot;</span>)</span><br><span class=\"line\">            .setDatabaseSchemaUpdate(ProcessEngineConfiguration.DB_SCHEMA_UPDATE_TRUE);</span><br><span class=\"line\">    <span class=\"type\">ProcessEngine</span> <span class=\"variable\">processEngine</span> <span class=\"operator\">=</span> cfg.buildProcessEngine();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ç„¶ååº”ç”¨è¿è¡Œæ²¡æœ‰é—®é¢˜ï¼Œä½†ä¹Ÿæ²¡æœ‰åœ¨æ§åˆ¶å°æä¾›æœ‰ç”¨çš„ä¿¡æ¯ï¼Œåªæœ‰ä¸€æ¡æ¶ˆæ¯æç¤ºæ—¥å¿—æ²¡æœ‰æ­£ç¡®é…ç½®ã€‚Flowableä½¿ç”¨<a class=\"link\"   href=\"http://www.slf4j.org/\" >SLF4J<i class=\"fas fa-external-link-alt\"></i></a>ä½œä¸ºå†…éƒ¨æ—¥å¿—æ¡†æ¶ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨log4jä½œä¸ºSLF4Jçš„å®ç°ã€‚å› æ­¤åœ¨pom.xmlæ–‡ä»¶ä¸­æ·»åŠ ä¸‹åˆ—ä¾èµ–ï¼š</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.slf4j<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>slf4j-api<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>1.7.21<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.slf4j<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>slf4j-log4j12<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>1.7.21<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>Log4jéœ€è¦ä¸€ä¸ªé…ç½®æ–‡ä»¶ã€‚åœ¨<em>src&#x2F;main&#x2F;resources</em>æ–‡ä»¶å¤¹ä¸‹æ·»åŠ <em>log4j.properties</em>æ–‡ä»¶ï¼Œå¹¶å†™å…¥ä¸‹åˆ—å†…å®¹ï¼š</p>\n<figure class=\"highlight properties\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">log4j.rootLogger</span>=<span class=\"string\">DEBUG, CA</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">log4j.appender.CA</span>=<span class=\"string\">org.apache.log4j.ConsoleAppender</span></span><br><span class=\"line\"><span class=\"attr\">log4j.appender.CA.layout</span>=<span class=\"string\">org.apache.log4j.PatternLayout</span></span><br><span class=\"line\"><span class=\"attr\">log4j.appender.CA.layout.ConversionPattern</span>= <span class=\"string\">%d&#123;hh:mm:ss,SSS&#125; [%t] %-5p %c %x - %m%n</span></span><br></pre></td></tr></table></figure>\n\n<p>é‡æ–°è¿è¡Œåº”ç”¨ã€‚åº”è¯¥å¯ä»¥çœ‹åˆ°å…³äºå¼•æ“å¯åŠ¨ä¸åˆ›å»ºæ•°æ®åº“è¡¨ç»“æ„çš„æç¤ºæ—¥å¿—ï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316093922199.png\"\n                      alt=\"image-20220316093922199\"\n                ></p>\n<p>åŒæ—¶å¯ä»¥çœ‹åˆ°åˆ›å»ºäº†ç›¸å…³çš„è¡¨ç»“æ„åœ¨æ•°æ®åº“ä¸­</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316093957662.png\"\n                      alt=\"image-20220316093957662\"\n                ></p>\n<p>è¿™æ ·å°±å¾—åˆ°äº†ä¸€ä¸ªå¯åŠ¨å¯ç”¨çš„æµç¨‹å¼•æ“ã€‚æ¥ä¸‹æ¥ä¸ºå®ƒæä¾›ä¸€ä¸ªæµç¨‹ï¼</p>\n<h2 id=\"éƒ¨ç½²æµç¨‹å®šä¹‰\"><a href=\"#éƒ¨ç½²æµç¨‹å®šä¹‰\" class=\"headerlink\" title=\"éƒ¨ç½²æµç¨‹å®šä¹‰\"></a>éƒ¨ç½²æµç¨‹å®šä¹‰</h2><p>æ¥ä¸‹æ¥æˆ‘ä»¬æ„å»ºä¸€ä¸ªéå¸¸ç®€å•çš„è¯·å‡æµç¨‹ï¼ŒFlowableå¼•æ“éœ€è¦æµç¨‹å®šä¹‰ä¸ºBPMN 2.0æ ¼å¼ï¼Œè¿™æ˜¯ä¸€ä¸ªä¸šç•Œå¹¿æ³›æ¥å—çš„XMLæ ‡å‡†ã€‚ åœ¨Flowableæœ¯è¯­ä¸­ï¼Œæˆ‘ä»¬å°†å…¶ç§°ä¸ºä¸€ä¸ª*<em>æµç¨‹å®šä¹‰(process definition)<strong>ã€‚ä¸€ä¸ª<em>æµç¨‹å®šä¹‰</em>å¯ä»¥å¯åŠ¨å¤šä¸ª</strong>æµç¨‹å®ä¾‹(process instance)*<em>ã€‚</em>æµç¨‹å®šä¹‰*å¯ä»¥çœ‹åšæ˜¯é‡å¤æ‰§è¡Œæµç¨‹çš„è“å›¾ã€‚ åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ</em>æµç¨‹å®šä¹‰<em>å®šä¹‰äº†è¯·å‡çš„å„ä¸ªæ­¥éª¤ï¼Œè€Œä¸€ä¸ª</em>æµç¨‹å®ä¾‹*å¯¹åº”æŸä¸ªé›‡å‘˜æå‡ºçš„ä¸€ä¸ªè¯·å‡ç”³è¯·ã€‚</p>\n<p>BPMN 2.0å­˜å‚¨ä¸ºXMLï¼Œå¹¶åŒ…å«å¯è§†åŒ–çš„éƒ¨åˆ†ï¼šä½¿ç”¨æ ‡å‡†æ–¹å¼å®šä¹‰äº†æ¯ä¸ªæ­¥éª¤ç±»å‹ï¼ˆäººå·¥ä»»åŠ¡ï¼Œè‡ªåŠ¨æœåŠ¡è°ƒç”¨ï¼Œç­‰ç­‰ï¼‰å¦‚ä½•å‘ˆç°ï¼Œä»¥åŠå¦‚ä½•äº’ç›¸è¿æ¥ã€‚è¿™æ ·BPMN 2.0æ ‡å‡†ä½¿æŠ€æœ¯äººå‘˜ä¸ä¸šåŠ¡äººå‘˜èƒ½ç”¨åŒæ–¹éƒ½èƒ½ç†è§£çš„æ–¹å¼äº¤æµä¸šåŠ¡æµç¨‹ã€‚</p>\n<p>æˆ‘ä»¬è¦ä½¿ç”¨çš„æµç¨‹å®šä¹‰ä¸ºï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/getting.started.bpmn.process.png\"\n                      alt=\"getting.started.bpmn.process\"\n                ></p>\n<p>æµç¨‹å®šä¹‰è¯´æ˜ï¼š</p>\n<ul>\n<li>æˆ‘ä»¬å‡å®šå¯åŠ¨æµç¨‹éœ€è¦æä¾›ä¸€äº›ä¿¡æ¯ï¼Œä¾‹å¦‚é›‡å‘˜åå­—ã€è¯·å‡æ—¶é•¿ä»¥åŠè¯´æ˜ã€‚å½“ç„¶ï¼Œè¿™äº›å¯ä»¥å•ç‹¬å»ºæ¨¡ä¸ºæµç¨‹ä¸­çš„ç¬¬ä¸€æ­¥ã€‚ ä½†æ˜¯å¦‚æœå°†å®ƒä»¬ä½œä¸ºæµç¨‹çš„â€œè¾“å…¥ä¿¡æ¯â€ï¼Œå°±èƒ½ä¿è¯åªæœ‰åœ¨å®é™…è¯·æ±‚æ—¶æ‰ä¼šå»ºç«‹ä¸€ä¸ªæµç¨‹å®ä¾‹ã€‚å¦åˆ™ï¼ˆå°†æäº¤ä½œä¸ºæµç¨‹çš„ç¬¬ä¸€æ­¥ï¼‰ï¼Œç”¨æˆ·å¯èƒ½åœ¨æäº¤ä¹‹å‰æ”¹å˜ä¸»æ„å¹¶å–æ¶ˆï¼Œä½†æµç¨‹å®ä¾‹å·²ç»åˆ›å»ºäº†ã€‚ åœ¨æŸäº›åœºæ™¯ä¸­ï¼Œå°±å¯èƒ½å½±å“é‡è¦çš„æŒ‡æ ‡ï¼ˆä¾‹å¦‚å¯åŠ¨äº†å¤šå°‘ç”³è¯·ï¼Œä½†è¿˜æœªå®Œæˆï¼‰ï¼Œå–å†³äºä¸šåŠ¡ç›®æ ‡ã€‚</li>\n<li>å·¦ä¾§çš„åœ†åœˆå«åš**å¯åŠ¨äº‹ä»¶(start event)**ã€‚è¿™æ˜¯ä¸€ä¸ªæµç¨‹å®ä¾‹çš„èµ·ç‚¹ã€‚</li>\n<li>ç¬¬ä¸€ä¸ªçŸ©å½¢æ˜¯ä¸€ä¸ª**ç”¨æˆ·ä»»åŠ¡(user task)**ã€‚è¿™æ˜¯æµç¨‹ä¸­ç”¨æˆ·æ“ä½œçš„æ­¥éª¤ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œç»ç†éœ€è¦æ‰¹å‡†æˆ–é©³å›ç”³è¯·</li>\n<li>å–å†³äºç»ç†çš„å†³å®šï¼Œ<strong>æ’ä»–ç½‘å…³(exclusive gateway)</strong> (å¸¦å‰çš„è±å½¢)ä¼šå°†æµç¨‹å®ä¾‹è·¯ç”±è‡³æ‰¹å‡†æˆ–é©³å›è·¯å¾„</li>\n<li>å¦‚æœæ‰¹å‡†ï¼Œåˆ™éœ€è¦å°†ç”³è¯·æ³¨å†Œè‡³æŸä¸ªå¤–éƒ¨ç³»ç»Ÿï¼Œå¹¶è·Ÿç€å¦ä¸€ä¸ªç”¨æˆ·ä»»åŠ¡ï¼Œå°†ç»ç†çš„å†³å®šé€šçŸ¥ç»™ç”³è¯·äººã€‚å½“ç„¶ä¹Ÿå¯ä»¥æ”¹ä¸ºå‘é€é‚®ä»¶ã€‚</li>\n<li>å¦‚æœé©³å›ï¼Œåˆ™ä¸ºé›‡å‘˜å‘é€ä¸€å°é‚®ä»¶é€šçŸ¥ä»–ã€‚</li>\n</ul>\n<p>ä¸€èˆ¬æ¥è¯´ï¼Œè¿™æ ·çš„<em>æµç¨‹å®šä¹‰</em>ä½¿ç”¨å¯è§†åŒ–å»ºæ¨¡å·¥å…·å»ºç«‹ï¼Œå¦‚Flowable Designer(Eclipse)æˆ–Flowable Web Modeler(Webåº”ç”¨)ã€‚ä½†åœ¨è¿™é‡Œæˆ‘ä»¬ç›´æ¥æ’°å†™XMLï¼Œä»¥ç†Ÿæ‚‰BPMN 2.0åŠå…¶æ¦‚å¿µã€‚</p>\n<p>ä¸ä¸Šé¢å±•ç¤ºçš„æµç¨‹å›¾å¯¹åº”çš„BPMN 2.0 XMLåœ¨ä¸‹é¢æ˜¾ç¤ºã€‚è¯·æ³¨æ„è¿™åªåŒ…å«äº†â€œæµç¨‹éƒ¨åˆ†â€ã€‚å¦‚æœä½¿ç”¨å›¾å½¢åŒ–å»ºæ¨¡å·¥å…·ï¼Œå®é™…çš„XMLæ–‡ä»¶è¿˜å°†åŒ…å«â€œå¯è§†åŒ–éƒ¨åˆ†â€ï¼Œç”¨äºæè¿°å›¾å½¢ä¿¡æ¯ï¼Œå¦‚æµç¨‹å®šä¹‰ä¸­å„ä¸ªå…ƒç´ çš„åæ ‡ï¼ˆæ‰€æœ‰çš„å›¾å½¢åŒ–ä¿¡æ¯åŒ…å«åœ¨XMLçš„<em>BPMNDiagram</em>æ ‡ç­¾ä¸­ï¼Œä½œä¸º<em>definitions</em>æ ‡ç­¾çš„å­å…ƒç´ ï¼‰ã€‚</p>\n<p>å°†ä¸‹é¢çš„XMLä¿å­˜åœ¨<em>src&#x2F;main&#x2F;resources</em>æ–‡ä»¶å¤¹ä¸‹åä¸º<em>holiday-request.bpmn20.xml</em>çš„æ–‡ä»¶ä¸­ã€‚</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=<span class=\"string\">&quot;1.0&quot;</span> encoding=<span class=\"string\">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">definitions</span> <span class=\"attr\">xmlns</span>=<span class=\"string\">&quot;http://www.omg.org/spec/BPMN/20100524/MODEL&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">             <span class=\"attr\">xmlns:xsi</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">             <span class=\"attr\">xmlns:xsd</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">             <span class=\"attr\">xmlns:bpmndi</span>=<span class=\"string\">&quot;http://www.omg.org/spec/BPMN/20100524/DI&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">             <span class=\"attr\">xmlns:omgdc</span>=<span class=\"string\">&quot;http://www.omg.org/spec/DD/20100524/DC&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">             <span class=\"attr\">xmlns:omgdi</span>=<span class=\"string\">&quot;http://www.omg.org/spec/DD/20100524/DI&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">             <span class=\"attr\">xmlns:flowable</span>=<span class=\"string\">&quot;http://flowable.org/bpmn&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">             <span class=\"attr\">typeLanguage</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">             <span class=\"attr\">expressionLanguage</span>=<span class=\"string\">&quot;http://www.w3.org/1999/XPath&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">             <span class=\"attr\">targetNamespace</span>=<span class=\"string\">&quot;http://www.flowable.org/processdef&quot;</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">process</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;holidayRequest&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;Holiday Request&quot;</span> <span class=\"attr\">isExecutable</span>=<span class=\"string\">&quot;true&quot;</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">startEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;startEvent&quot;</span>/&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;startEvent&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;approveTask&quot;</span>/&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">userTask</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;approveTask&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;Approve or reject request&quot;</span>/&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;approveTask&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;decision&quot;</span>/&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">exclusiveGateway</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;decision&quot;</span>/&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;decision&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;externalSystemCall&quot;</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">conditionExpression</span> <span class=\"attr\">xsi:type</span>=<span class=\"string\">&quot;tFormalExpression&quot;</span>&gt;</span></span><br><span class=\"line\">                &lt;![CDATA[</span><br><span class=\"line\">          $&#123;approved&#125;</span><br><span class=\"line\">        ]]&gt;</span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">conditionExpression</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span>  <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;decision&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;sendRejectionMail&quot;</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">conditionExpression</span> <span class=\"attr\">xsi:type</span>=<span class=\"string\">&quot;tFormalExpression&quot;</span>&gt;</span></span><br><span class=\"line\">                &lt;![CDATA[</span><br><span class=\"line\">          $&#123;!approved&#125;</span><br><span class=\"line\">        ]]&gt;</span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">conditionExpression</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">serviceTask</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;externalSystemCall&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;Enter holidays in external system&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">                     <span class=\"attr\">flowable:class</span>=<span class=\"string\">&quot;org.flowable.CallExternalSystemDelegate&quot;</span>/&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;externalSystemCall&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;holidayApprovedTask&quot;</span>/&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">userTask</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;holidayApprovedTask&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;Holiday approved&quot;</span>/&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;holidayApprovedTask&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;approveEnd&quot;</span>/&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">serviceTask</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;sendRejectionMail&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;Send out rejection email&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">                     <span class=\"attr\">flowable:class</span>=<span class=\"string\">&quot;org.flowable.SendRejectionMail&quot;</span>/&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;sendRejectionMail&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;rejectEnd&quot;</span>/&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">endEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;approveEnd&quot;</span>/&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">endEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;rejectEnd&quot;</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">process</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">definitions</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>ç°åœ¨æˆ‘ä»¬å·²ç»æœ‰äº†æµç¨‹BPMN 2.0 XMLæ–‡ä»¶ï¼Œä¸‹æ¥éœ€è¦å°†å®ƒ***éƒ¨ç½²(deploy)**<em>åˆ°å¼•æ“ä¸­ã€‚</em>éƒ¨ç½²*ä¸€ä¸ªæµç¨‹å®šä¹‰æ„å‘³ç€ï¼š</p>\n<ul>\n<li>æµç¨‹å¼•æ“ä¼šå°†XMLæ–‡ä»¶å­˜å‚¨åœ¨æ•°æ®åº“ä¸­ï¼Œè¿™æ ·å¯ä»¥åœ¨éœ€è¦çš„æ—¶å€™è·å–å®ƒ</li>\n<li>æµç¨‹å®šä¹‰è½¬æ¢ä¸ºå†…éƒ¨çš„ã€å¯æ‰§è¡Œçš„å¯¹è±¡æ¨¡å‹ï¼Œè¿™æ ·ä½¿ç”¨å®ƒå°±å¯ä»¥å¯åŠ¨<em>æµç¨‹å®ä¾‹</em>ã€‚</li>\n</ul>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220317110902636.png\"\n                      alt=\"image-20220317110902636\"\n                ></p>\n<p>å°†æµç¨‹å®šä¹‰<em>éƒ¨ç½²</em>è‡³Flowableå¼•æ“ï¼Œéœ€è¦ä½¿ç”¨<em>RepositoryService</em>ï¼Œå…¶å¯ä»¥ä»<em>ProcessEngine</em>å¯¹è±¡è·å–ã€‚ä½¿ç”¨<em>RepositoryService</em>ï¼Œå¯ä»¥é€šè¿‡XMLæ–‡ä»¶çš„è·¯å¾„åˆ›å»ºä¸€ä¸ªæ–°çš„*éƒ¨ç½²(Deployment)<em>ï¼Œå¹¶è°ƒç”¨</em>deploy()*æ–¹æ³•å®é™…æ‰§è¡Œï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * éƒ¨ç½²æµç¨‹</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">testDeploy</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// é…ç½®æ•°æ®åº“ç›¸å…³ä¿¡æ¯ è·å– ProcessEngineConfiguration</span></span><br><span class=\"line\">    <span class=\"type\">ProcessEngineConfiguration</span> <span class=\"variable\">cfg</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">StandaloneProcessEngineConfiguration</span>()</span><br><span class=\"line\">            .setJdbcUrl(<span class=\"string\">&quot;jdbc:mysql://localhost:3306/flowable-learn2?serverTimezone=UTC&amp;nullCatalogMeansCurrent=true&quot;</span>)</span><br><span class=\"line\">            .setJdbcUsername(<span class=\"string\">&quot;root&quot;</span>)</span><br><span class=\"line\">            .setJdbcPassword(<span class=\"string\">&quot;123456&quot;</span>)</span><br><span class=\"line\">            .setJdbcDriver(<span class=\"string\">&quot;com.mysql.cj.jdbc.Driver&quot;</span>)</span><br><span class=\"line\">            .setDatabaseSchemaUpdate(ProcessEngineConfiguration.DB_SCHEMA_UPDATE_TRUE);</span><br><span class=\"line\">    <span class=\"comment\">// è·å–æµç¨‹å¼•æ“å¯¹è±¡</span></span><br><span class=\"line\">    <span class=\"type\">ProcessEngine</span> <span class=\"variable\">processEngine</span> <span class=\"operator\">=</span> cfg.buildProcessEngine();</span><br><span class=\"line\">    <span class=\"comment\">// éƒ¨ç½²æµç¨‹ è·å–RepositoryServiceå¯¹è±¡</span></span><br><span class=\"line\">    <span class=\"type\">RepositoryService</span> <span class=\"variable\">repositoryService</span> <span class=\"operator\">=</span> processEngine.getRepositoryService();</span><br><span class=\"line\">    <span class=\"type\">Deployment</span> <span class=\"variable\">deployment</span> <span class=\"operator\">=</span> repositoryService.createDeployment()<span class=\"comment\">// åˆ›å»ºDeploymentå¯¹è±¡</span></span><br><span class=\"line\">            .addClasspathResource(<span class=\"string\">&quot;holiday-request.bpmn20.xml&quot;</span>) <span class=\"comment\">// æ·»åŠ æµç¨‹éƒ¨ç½²æ–‡ä»¶</span></span><br><span class=\"line\">            .name(<span class=\"string\">&quot;è¯·æ±‚æµç¨‹&quot;</span>) <span class=\"comment\">// è®¾ç½®éƒ¨ç½²æµç¨‹çš„åç§°</span></span><br><span class=\"line\">            .deploy(); <span class=\"comment\">// æ‰§è¡Œéƒ¨ç½²æ“ä½œ</span></span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;deployment.getId() = &quot;</span> + deployment.getId());</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;deployment.getName() = &quot;</span> + deployment.getName());</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ç„¶åæ‰§è¡Œè¯¥æ–¹æ³•æ—¥å¿—æ“ä½œæˆåŠŸï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316100439048.png\"\n                      alt=\"image-20220316100439048\"\n                ></p>\n<p>åœ¨åå°è¡¨ç»“æ„ä¹Ÿå¯ä»¥çœ‹åˆ°ç›¸å…³çš„ä¿¡æ¯</p>\n<p>act_re_deployment: æµç¨‹å®šä¹‰éƒ¨ç½²è¡¨ï¼Œæ¯éƒ¨ç½²ä¸€æ¬¡å°±å¢åŠ ä¸€æ¡è®°å½•</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316100532725.png\"\n                      alt=\"image-20220316100532725\"\n                ></p>\n<p>act_re_procdef ï¼šæµç¨‹å®šä¹‰è¡¨ï¼Œéƒ¨ç½²æ¯ä¸ªæ–°çš„æµç¨‹å®šä¹‰éƒ½ä¼šåœ¨è¿™å¼ è¡¨ä¸­å¢åŠ ä¸€æ¡è®°å½•</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316100611004.png\"\n                      alt=\"image-20220316100611004\"\n                ></p>\n<p>act_ge_bytearray ï¼šæµç¨‹èµ„æºè¡¨ï¼Œæµç¨‹éƒ¨ç½²çš„ bpmnæ–‡ä»¶å’Œpngå›¾ç‰‡ä¼šä¿å­˜åœ¨è¯¥è¡¨ä¸­</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316100648362.png\"\n                      alt=\"image-20220316100648362\"\n                ></p>\n<p>æˆ‘ä»¬ç°åœ¨å¯ä»¥é€šè¿‡APIæŸ¥è¯¢éªŒè¯æµç¨‹å®šä¹‰å·²ç»éƒ¨ç½²åœ¨å¼•æ“ä¸­ï¼ˆå¹¶å­¦ä¹ ä¸€äº›APIï¼‰ã€‚é€šè¿‡<em>RepositoryService</em>åˆ›å»ºçš„<em>ProcessDefinitionQuery</em>å¯¹è±¡å®ç°ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * æŸ¥çœ‹æµç¨‹å®šä¹‰</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">testDeployQuery</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// é…ç½®æ•°æ®åº“ç›¸å…³ä¿¡æ¯ è·å– ProcessEngineConfiguration</span></span><br><span class=\"line\">        <span class=\"type\">ProcessEngineConfiguration</span> <span class=\"variable\">cfg</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">StandaloneProcessEngineConfiguration</span>()</span><br><span class=\"line\">                .setJdbcUrl(<span class=\"string\">&quot;jdbc:mysql://localhost:3306/flowable-learn2?serverTimezone=UTC&amp;nullCatalogMeansCurrent=true&quot;</span>)</span><br><span class=\"line\">                .setJdbcUsername(<span class=\"string\">&quot;root&quot;</span>)</span><br><span class=\"line\">                .setJdbcPassword(<span class=\"string\">&quot;123456&quot;</span>)</span><br><span class=\"line\">                .setJdbcDriver(<span class=\"string\">&quot;com.mysql.cj.jdbc.Driver&quot;</span>)</span><br><span class=\"line\">                .setDatabaseSchemaUpdate(ProcessEngineConfiguration.DB_SCHEMA_UPDATE_TRUE);</span><br><span class=\"line\">        <span class=\"comment\">// è·å–æµç¨‹å¼•æ“å¯¹è±¡</span></span><br><span class=\"line\">        <span class=\"type\">ProcessEngine</span> <span class=\"variable\">processEngine</span> <span class=\"operator\">=</span> cfg.buildProcessEngine();</span><br><span class=\"line\">        <span class=\"comment\">// éƒ¨ç½²æµç¨‹ è·å–RepositoryServiceå¯¹è±¡</span></span><br><span class=\"line\">        <span class=\"type\">RepositoryService</span> <span class=\"variable\">repositoryService</span> <span class=\"operator\">=</span> processEngine.getRepositoryService();</span><br><span class=\"line\">        <span class=\"comment\">// è·å–æµç¨‹å®šä¹‰å¯¹è±¡</span></span><br><span class=\"line\">        <span class=\"type\">ProcessDefinition</span> <span class=\"variable\">processDefinition</span> <span class=\"operator\">=</span> repositoryService.createProcessDefinitionQuery()</span><br><span class=\"line\">                .deploymentId(<span class=\"string\">&quot;2501&quot;</span>)</span><br><span class=\"line\">                .singleResult();</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;processDefinition.getId() = &quot;</span> + processDefinition.getId());</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;processDefinition.getName() = &quot;</span> + processDefinition.getName());</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;processDefinition.getDeploymentId() = &quot;</span> + processDefinition.getDeploymentId());</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;processDefinition.getDescription() = &quot;</span> + processDefinition.getDescription());</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n\n<p>è¾“å‡ºç»“æœä¸ºï¼š</p>\n<figure class=\"highlight txt\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">processDefinition.getId() = holidayRequest:2:2503</span><br><span class=\"line\">processDefinition.getName() = Holiday Request</span><br><span class=\"line\">processDefinition.getDeploymentId() = 2501</span><br><span class=\"line\">processDefinition.getDescription() = null</span><br></pre></td></tr></table></figure>\n\n\n\n<h2 id=\"å¯åŠ¨æµç¨‹å®ä¾‹\"><a href=\"#å¯åŠ¨æµç¨‹å®ä¾‹\" class=\"headerlink\" title=\"å¯åŠ¨æµç¨‹å®ä¾‹\"></a>å¯åŠ¨æµç¨‹å®ä¾‹</h2><p>ç°åœ¨å·²ç»åœ¨æµç¨‹å¼•æ“ä¸­<em>éƒ¨ç½²</em>äº†æµç¨‹å®šä¹‰ï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨è¿™ä¸ª<em>æµç¨‹å®šä¹‰</em>ä½œä¸ºâ€œæ¨¡æ¿â€å¯åŠ¨<em>æµç¨‹å®ä¾‹</em>ã€‚</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316102638015.png\"\n                      alt=\"image-20220316102638015\"\n                ></p>\n<p>è¦å¯åŠ¨æµç¨‹å®ä¾‹ï¼Œéœ€è¦æä¾›ä¸€äº›åˆå§‹åŒ–<em>æµç¨‹å˜é‡</em>ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œå¯ä»¥é€šè¿‡å‘ˆç°ç»™ç”¨æˆ·çš„è¡¨å•ï¼Œæˆ–è€…åœ¨æµç¨‹ç”±å…¶ä»–ç³»ç»Ÿè‡ªåŠ¨è§¦å‘æ—¶é€šè¿‡REST APIï¼Œæ¥è·å–è¿™äº›å˜é‡ã€‚åœ¨è¿™ä¸ªä¾‹å­é‡Œï¼Œæˆ‘ä»¬ç®€åŒ–ç›´æ¥åœ¨ä»£ç ä¸­å®šä¹‰äº†ï¼Œæˆ‘ä»¬ä½¿ç”¨<em>RuntimeService</em>å¯åŠ¨ä¸€ä¸ª<em>æµç¨‹å®ä¾‹</em>ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * å¯åŠ¨æµç¨‹å®ä¾‹</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">testRunProcess</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// é…ç½®æ•°æ®åº“ç›¸å…³ä¿¡æ¯ è·å– ProcessEngineConfiguration</span></span><br><span class=\"line\">    <span class=\"type\">ProcessEngineConfiguration</span> <span class=\"variable\">cfg</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">StandaloneProcessEngineConfiguration</span>()</span><br><span class=\"line\">            .setJdbcUrl(<span class=\"string\">&quot;jdbc:mysql://localhost:3306/flowable-learn2?serverTimezone=UTC&amp;nullCatalogMeansCurrent=true&quot;</span>)</span><br><span class=\"line\">            .setJdbcUsername(<span class=\"string\">&quot;root&quot;</span>)</span><br><span class=\"line\">            .setJdbcPassword(<span class=\"string\">&quot;123456&quot;</span>)</span><br><span class=\"line\">            .setJdbcDriver(<span class=\"string\">&quot;com.mysql.cj.jdbc.Driver&quot;</span>)</span><br><span class=\"line\">            .setDatabaseSchemaUpdate(ProcessEngineConfiguration.DB_SCHEMA_UPDATE_TRUE);</span><br><span class=\"line\">    <span class=\"comment\">// è·å–æµç¨‹å¼•æ“å¯¹è±¡</span></span><br><span class=\"line\">    <span class=\"type\">ProcessEngine</span> <span class=\"variable\">processEngine</span> <span class=\"operator\">=</span> cfg.buildProcessEngine();</span><br><span class=\"line\">    <span class=\"comment\">// å¯åŠ¨æµç¨‹å®ä¾‹é€šè¿‡ RuntimeService å¯¹è±¡</span></span><br><span class=\"line\">    <span class=\"type\">RuntimeService</span> <span class=\"variable\">runtimeService</span> <span class=\"operator\">=</span> processEngine.getRuntimeService();</span><br><span class=\"line\">    <span class=\"comment\">// æ„å»ºæµç¨‹å˜é‡</span></span><br><span class=\"line\">    Map&lt;String,Object&gt; variables = <span class=\"keyword\">new</span> <span class=\"title class_\">HashMap</span>&lt;&gt;();</span><br><span class=\"line\">    variables.put(<span class=\"string\">&quot;employee&quot;</span>,<span class=\"string\">&quot;å¼ ä¸‰&quot;</span>) ;<span class=\"comment\">// è°ç”³è¯·è¯·å‡</span></span><br><span class=\"line\">    variables.put(<span class=\"string\">&quot;nrOfHolidays&quot;</span>,<span class=\"number\">3</span>); <span class=\"comment\">// è¯·å‡ å¤©å‡</span></span><br><span class=\"line\">    variables.put(<span class=\"string\">&quot;description&quot;</span>,<span class=\"string\">&quot;å·¥ä½œç´¯äº†ï¼Œæƒ³å‡ºå»ç©ç©&quot;</span>); <span class=\"comment\">// è¯·å‡çš„åŸå› </span></span><br><span class=\"line\">    <span class=\"comment\">// å¯åŠ¨æµç¨‹å®ä¾‹ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æµç¨‹å®šä¹‰çš„id</span></span><br><span class=\"line\">    <span class=\"type\">ProcessInstance</span> <span class=\"variable\">processInstance</span> <span class=\"operator\">=</span> runtimeService</span><br><span class=\"line\">            .startProcessInstanceByKey(<span class=\"string\">&quot;holidayRequest&quot;</span>, variables);<span class=\"comment\">// å¯åŠ¨æµç¨‹å®ä¾‹</span></span><br><span class=\"line\">    <span class=\"comment\">// è¾“å‡ºç›¸å…³çš„æµç¨‹å®ä¾‹ä¿¡æ¯</span></span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;æµç¨‹å®šä¹‰çš„IDï¼š&quot;</span> + processInstance.getProcessDefinitionId());</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;æµç¨‹å®ä¾‹çš„IDï¼š&quot;</span> + processInstance.getId());</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;å½“å‰æ´»åŠ¨çš„IDï¼š&quot;</span> + processInstance.getActivityId());</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>å¯åŠ¨æˆåŠŸï¼Œè¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight txt\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">æµç¨‹å®šä¹‰çš„IDï¼šholidayRequest:2:2503</span><br><span class=\"line\">æµç¨‹å®ä¾‹çš„IDï¼š5001</span><br><span class=\"line\">å½“å‰æ´»åŠ¨çš„IDï¼šnull</span><br></pre></td></tr></table></figure>\n\n<p>å¯¹åº”çš„æµç¨‹å®ä¾‹IDä¸ºï¼š5001</p>\n<p>å¯åŠ¨æµç¨‹å®ä¾‹æ¶‰åŠåˆ°çš„è¡¨ç»“æ„ï¼š</p>\n<ul>\n<li>act_hi_actinst æµç¨‹å®ä¾‹æ‰§è¡Œå†å²</li>\n<li>act_hi_identitylink æµç¨‹çš„å‚ä¸ç”¨æˆ·çš„å†å²ä¿¡æ¯</li>\n<li>act_hi_procinst æµç¨‹å®ä¾‹å†å²ä¿¡æ¯</li>\n<li>act_hi_taskinst æµç¨‹ä»»åŠ¡å†å²ä¿¡æ¯</li>\n<li>act_ru_execution æµç¨‹æ‰§è¡Œä¿¡æ¯</li>\n<li>act_ru_identitylink æµç¨‹çš„å‚ä¸ç”¨æˆ·ä¿¡æ¯</li>\n<li>act_ru_task ä»»åŠ¡ä¿¡æ¯</li>\n</ul>\n<h2 id=\"æŸ¥çœ‹ä»»åŠ¡\"><a href=\"#æŸ¥çœ‹ä»»åŠ¡\" class=\"headerlink\" title=\"æŸ¥çœ‹ä»»åŠ¡\"></a>æŸ¥çœ‹ä»»åŠ¡</h2><p>ä¸Šé¢å‘˜å·¥å‘èµ·äº†ä¸€ä¸ªè¯·å‡æµç¨‹ï¼Œæ¥ä¸‹æ¥å°±ä¼šæµè½¬åˆ°æ€»ç»ç†è¿™å„¿æ¥å¤„ç†ï¼Œä¹‹å‰æˆ‘ä»¬æ²¡æœ‰æŒ‡å®šç»ç†è¿™çš„å¤„ç†äººï¼Œæˆ‘ä»¬å¯ä»¥åŠ ä¸€ä¸ª</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316110406801.png\"\n                      alt=\"image-20220316110406801\"\n                ></p>\n<p>ç„¶åæˆ‘ä»¬æ¥æŸ¥çœ‹ä¸‹lisiçš„ä»»åŠ¡</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * æŸ¥çœ‹ä»»åŠ¡</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">testQueryTask</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// é…ç½®æ•°æ®åº“ç›¸å…³ä¿¡æ¯ è·å– ProcessEngineConfiguration</span></span><br><span class=\"line\">    <span class=\"type\">ProcessEngineConfiguration</span> <span class=\"variable\">cfg</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">StandaloneProcessEngineConfiguration</span>()</span><br><span class=\"line\">            .setJdbcUrl(<span class=\"string\">&quot;jdbc:mysql://localhost:3306/flowable-learn2?serverTimezone=UTC&amp;nullCatalogMeansCurrent=true&quot;</span>)</span><br><span class=\"line\">            .setJdbcUsername(<span class=\"string\">&quot;root&quot;</span>)</span><br><span class=\"line\">            .setJdbcPassword(<span class=\"string\">&quot;123456&quot;</span>)</span><br><span class=\"line\">            .setJdbcDriver(<span class=\"string\">&quot;com.mysql.cj.jdbc.Driver&quot;</span>)</span><br><span class=\"line\">            .setDatabaseSchemaUpdate(ProcessEngineConfiguration.DB_SCHEMA_UPDATE_TRUE);</span><br><span class=\"line\">    <span class=\"comment\">// è·å–æµç¨‹å¼•æ“å¯¹è±¡</span></span><br><span class=\"line\">    <span class=\"type\">ProcessEngine</span> <span class=\"variable\">processEngine</span> <span class=\"operator\">=</span> cfg.buildProcessEngine();</span><br><span class=\"line\">    <span class=\"type\">TaskService</span> <span class=\"variable\">taskService</span> <span class=\"operator\">=</span> processEngine.getTaskService();</span><br><span class=\"line\">    List&lt;Task&gt; list = taskService.createTaskQuery()</span><br><span class=\"line\">            .processDefinitionKey(<span class=\"string\">&quot;holidayRequestNew&quot;</span>)</span><br><span class=\"line\">            .taskAssignee(<span class=\"string\">&quot;lisi&quot;</span>)</span><br><span class=\"line\">            .list();</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (Task task : list) &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;task.getProcessDefinitionId() = &quot;</span> + task.getProcessDefinitionId());</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;task.getId() = &quot;</span> + task.getId());</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;task.getAssignee() = &quot;</span> + task.getAssignee());</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;task.getName() = &quot;</span> + task.getName());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>è¾“å‡ºç»“æœä¸ºï¼š</p>\n<figure class=\"highlight txt\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">task.getProcessDefinitionId() = holidayRequestNew:1:10003</span><br><span class=\"line\">task.getId() = 12508</span><br><span class=\"line\">task.getAssignee() = lisi</span><br><span class=\"line\">task.getName() = Approve or reject request</span><br></pre></td></tr></table></figure>\n\n\n\n<h2 id=\"å®Œæˆä»»åŠ¡\"><a href=\"#å®Œæˆä»»åŠ¡\" class=\"headerlink\" title=\"å®Œæˆä»»åŠ¡\"></a>å®Œæˆä»»åŠ¡</h2><p>ç°åœ¨æå››è¿™ä¸ªè§’è‰²å¯ä»¥æ¥å®Œæˆå½“å‰çš„ä»»åŠ¡äº†</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316111124019.png\"\n                      alt=\"image-20220316111124019\"\n                ></p>\n<p>åœ¨æ­¤å¤„æˆ‘ä»¬ç›´æ¥è§£å†³æ‰è¿™ä¸ªè¯·å‡ï¼Œç„¶åä¼šèµ°å‘é€æ‹’ç»é‚®ä»¶çš„æµç¨‹ï¼Œè¿™å—æˆ‘ä»¬éœ€è¦ç”¨åˆ°JavaDelegateæ¥è§¦å‘ã€‚</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316111253702.png\"\n                      alt=\"image-20220316111253702\"\n                ></p>\n<p>æˆ‘ä»¬å®šä¹‰è¿™æ ·ä¸€ä¸ªJavaç±»</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">SendRejectionMail</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">JavaDelegate</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * è§¦å‘å‘é€é‚®ä»¶çš„æ“ä½œ</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> delegateExecution</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">execute</span><span class=\"params\">(DelegateExecution delegateExecution)</span> &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;è¯·å‡è¢«æ‹’ç»,,,å®‰å¿ƒå·¥ä½œå§&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ç„¶åæ¥å®Œæˆä»»åŠ¡</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * å®Œæˆä»»åŠ¡</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">testCompleteTask</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// é…ç½®æ•°æ®åº“ç›¸å…³ä¿¡æ¯ è·å– ProcessEngineConfiguration</span></span><br><span class=\"line\">    <span class=\"type\">ProcessEngineConfiguration</span> <span class=\"variable\">cfg</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">StandaloneProcessEngineConfiguration</span>()</span><br><span class=\"line\">            .setJdbcUrl(<span class=\"string\">&quot;jdbc:mysql://localhost:3306/flowable-learn2?serverTimezone=UTC&amp;nullCatalogMeansCurrent=true&quot;</span>)</span><br><span class=\"line\">            .setJdbcUsername(<span class=\"string\">&quot;root&quot;</span>)</span><br><span class=\"line\">            .setJdbcPassword(<span class=\"string\">&quot;123456&quot;</span>)</span><br><span class=\"line\">            .setJdbcDriver(<span class=\"string\">&quot;com.mysql.cj.jdbc.Driver&quot;</span>)</span><br><span class=\"line\">            .setDatabaseSchemaUpdate(ProcessEngineConfiguration.DB_SCHEMA_UPDATE_TRUE);</span><br><span class=\"line\">    <span class=\"comment\">// è·å–æµç¨‹å¼•æ“å¯¹è±¡</span></span><br><span class=\"line\">    <span class=\"type\">ProcessEngine</span> <span class=\"variable\">processEngine</span> <span class=\"operator\">=</span> cfg.buildProcessEngine();</span><br><span class=\"line\">    <span class=\"type\">TaskService</span> <span class=\"variable\">taskService</span> <span class=\"operator\">=</span> processEngine.getTaskService();</span><br><span class=\"line\">    <span class=\"type\">Task</span> <span class=\"variable\">task</span> <span class=\"operator\">=</span> taskService.createTaskQuery()</span><br><span class=\"line\">            .processDefinitionKey(<span class=\"string\">&quot;holidayRequestNew&quot;</span>)</span><br><span class=\"line\">            .taskAssignee(<span class=\"string\">&quot;lisi&quot;</span>)</span><br><span class=\"line\">            .singleResult();</span><br><span class=\"line\">    <span class=\"comment\">// æ·»åŠ æµç¨‹å˜é‡</span></span><br><span class=\"line\">    Map&lt;String,Object&gt; variables = <span class=\"keyword\">new</span> <span class=\"title class_\">HashMap</span>&lt;&gt;();</span><br><span class=\"line\">    variables.put(<span class=\"string\">&quot;approved&quot;</span>,<span class=\"literal\">false</span>); <span class=\"comment\">// æ‹’ç»è¯·å‡</span></span><br><span class=\"line\">    <span class=\"comment\">// å®Œæˆä»»åŠ¡</span></span><br><span class=\"line\">    taskService.complete(task.getId(),variables);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ç„¶åå¯ä»¥çœ‹åˆ°JavaDelegateè§¦å‘äº†</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316111913933.png\"\n                      alt=\"image-20220316111913933\"\n                ></p>\n<h2 id=\"æµç¨‹çš„åˆ é™¤\"><a href=\"#æµç¨‹çš„åˆ é™¤\" class=\"headerlink\" title=\"æµç¨‹çš„åˆ é™¤\"></a>æµç¨‹çš„åˆ é™¤</h2><p>æœ‰äº›æµç¨‹å·²ç»æ²¡æœ‰ç”¨äº†ï¼Œæˆ‘ä»¬éœ€è¦åˆ é™¤æ‰ï¼Œå…¶å®ä¹Ÿéå¸¸ç®€å•</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * åˆ é™¤æµç¨‹</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">testDeleteProcess</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// é…ç½®æ•°æ®åº“ç›¸å…³ä¿¡æ¯ è·å– ProcessEngineConfiguration</span></span><br><span class=\"line\">    <span class=\"type\">ProcessEngineConfiguration</span> <span class=\"variable\">cfg</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">StandaloneProcessEngineConfiguration</span>()</span><br><span class=\"line\">            .setJdbcUrl(<span class=\"string\">&quot;jdbc:mysql://localhost:3306/flowable-learn2?serverTimezone=UTC&amp;nullCatalogMeansCurrent=true&quot;</span>)</span><br><span class=\"line\">            .setJdbcUsername(<span class=\"string\">&quot;root&quot;</span>)</span><br><span class=\"line\">            .setJdbcPassword(<span class=\"string\">&quot;123456&quot;</span>)</span><br><span class=\"line\">            .setJdbcDriver(<span class=\"string\">&quot;com.mysql.cj.jdbc.Driver&quot;</span>)</span><br><span class=\"line\">            .setDatabaseSchemaUpdate(ProcessEngineConfiguration.DB_SCHEMA_UPDATE_TRUE);</span><br><span class=\"line\">    <span class=\"comment\">// è·å–æµç¨‹å¼•æ“å¯¹è±¡</span></span><br><span class=\"line\">    <span class=\"type\">ProcessEngine</span> <span class=\"variable\">processEngine</span> <span class=\"operator\">=</span> cfg.buildProcessEngine();</span><br><span class=\"line\">    <span class=\"type\">RepositoryService</span> <span class=\"variable\">repositoryService</span> <span class=\"operator\">=</span> processEngine.getRepositoryService();</span><br><span class=\"line\">    <span class=\"comment\">// åˆ é™¤æµç¨‹å®šä¹‰ï¼Œå¦‚æœè¯¥æµç¨‹å®šä¹‰å·²ç»æœ‰äº†æµç¨‹å®ä¾‹å¯åŠ¨åˆ™åˆ é™¤æ—¶æŠ¥é”™</span></span><br><span class=\"line\">    <span class=\"comment\">// repositoryService.deleteDeployment(&quot;1&quot;);</span></span><br><span class=\"line\">    <span class=\"comment\">// è®¾ç½®ä¸ºTRUE çº§è”åˆ é™¤æµç¨‹å®šä¹‰ï¼ŒåŠæ—¶æµç¨‹æœ‰å®ä¾‹å¯åŠ¨ï¼Œä¹Ÿå¯ä»¥åˆ é™¤ï¼Œè®¾ç½®ä¸ºfalse éçº§è”åˆ é™¤æ“ä½œã€‚</span></span><br><span class=\"line\">    repositoryService.deleteDeployment(<span class=\"string\">&quot;2501&quot;</span>,<span class=\"literal\">true</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"æŸ¥çœ‹å†å²ä¿¡æ¯\"><a href=\"#æŸ¥çœ‹å†å²ä¿¡æ¯\" class=\"headerlink\" title=\"æŸ¥çœ‹å†å²ä¿¡æ¯\"></a>æŸ¥çœ‹å†å²ä¿¡æ¯</h2><p>é€‰æ‹©ä½¿ç”¨Flowableè¿™æ ·çš„æµç¨‹å¼•æ“çš„åŸå› ä¹‹ä¸€ï¼Œæ˜¯å®ƒå¯ä»¥è‡ªåŠ¨å­˜å‚¨æ‰€æœ‰æµç¨‹å®ä¾‹çš„<strong>å®¡è®¡æ•°æ®</strong>æˆ–<strong>å†å²æ•°æ®</strong>ã€‚è¿™äº›æ•°æ®å¯ä»¥ç”¨äºåˆ›å»ºæŠ¥å‘Šï¼Œæ·±å…¥å±•ç°ç»„ç»‡è¿è¡Œçš„æƒ…å†µï¼Œç“¶é¢ˆåœ¨å“ªé‡Œï¼Œç­‰ç­‰ã€‚</p>\n<p>ä¾‹å¦‚ï¼Œå¦‚æœå¸Œæœ›æ˜¾ç¤ºæµç¨‹å®ä¾‹å·²ç»æ‰§è¡Œçš„æ—¶é—´ï¼Œå°±å¯ä»¥ä»<em>ProcessEngine</em>è·å–<em>HistoryService</em>ï¼Œå¹¶åˆ›å»º*å†å²æ´»åŠ¨(historical activities)*çš„æŸ¥è¯¢ã€‚åœ¨ä¸‹é¢çš„ä»£ç ç‰‡æ®µä¸­ï¼Œå¯ä»¥çœ‹åˆ°æˆ‘ä»¬æ·»åŠ äº†ä¸€äº›é¢å¤–çš„è¿‡æ»¤æ¡ä»¶ï¼š</p>\n<ul>\n<li>åªé€‰æ‹©ä¸€ä¸ªç‰¹å®šæµç¨‹å®ä¾‹çš„æ´»åŠ¨</li>\n<li>åªé€‰æ‹©å·²å®Œæˆçš„æ´»åŠ¨</li>\n</ul>\n<p>ç»“æœæŒ‰ç…§ç»“æŸæ—¶é—´æ’åºï¼Œä»£è¡¨å…¶æ‰§è¡Œé¡ºåºã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * æŸ¥çœ‹å†å²</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">testQueryHistory</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// é…ç½®æ•°æ®åº“ç›¸å…³ä¿¡æ¯ è·å– ProcessEngineConfiguration</span></span><br><span class=\"line\">        <span class=\"type\">ProcessEngineConfiguration</span> <span class=\"variable\">cfg</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">StandaloneProcessEngineConfiguration</span>()</span><br><span class=\"line\">                .setJdbcUrl(<span class=\"string\">&quot;jdbc:mysql://localhost:3306/flowable-learn2?serverTimezone=UTC&amp;nullCatalogMeansCurrent=true&quot;</span>)</span><br><span class=\"line\">                .setJdbcUsername(<span class=\"string\">&quot;root&quot;</span>)</span><br><span class=\"line\">                .setJdbcPassword(<span class=\"string\">&quot;123456&quot;</span>)</span><br><span class=\"line\">                .setJdbcDriver(<span class=\"string\">&quot;com.mysql.cj.jdbc.Driver&quot;</span>)</span><br><span class=\"line\">                .setDatabaseSchemaUpdate(ProcessEngineConfiguration.DB_SCHEMA_UPDATE_TRUE);</span><br><span class=\"line\">        <span class=\"comment\">// è·å–æµç¨‹å¼•æ“å¯¹è±¡</span></span><br><span class=\"line\">        <span class=\"type\">ProcessEngine</span> <span class=\"variable\">processEngine</span> <span class=\"operator\">=</span> cfg.buildProcessEngine();</span><br><span class=\"line\">        <span class=\"type\">HistoryService</span> <span class=\"variable\">historyService</span> <span class=\"operator\">=</span> processEngine.getHistoryService();</span><br><span class=\"line\">        List&lt;HistoricActivityInstance&gt; list = historyService.createHistoricActivityInstanceQuery()</span><br><span class=\"line\">                .processDefinitionId(<span class=\"string\">&quot;holidayRequestNew:1:10003&quot;</span>)</span><br><span class=\"line\">                .finished()</span><br><span class=\"line\">                .orderByHistoricActivityInstanceEndTime().asc()</span><br><span class=\"line\">                .list();</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (HistoricActivityInstance historicActivityInstance : list) &#123;</span><br><span class=\"line\">            System.out.println(historicActivityInstance.getActivityId() + <span class=\"string\">&quot; took &quot;</span></span><br><span class=\"line\">                    + historicActivityInstance.getDurationInMillis() + <span class=\"string\">&quot; milliseconds&quot;</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n\n<p>è¾“å‡ºç»“æœ</p>\n<figure class=\"highlight txt\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">startEvent took 1 milliseconds</span><br><span class=\"line\">approveTask took 837735 milliseconds</span><br><span class=\"line\">decision took 13 milliseconds</span><br><span class=\"line\">sendRejectionMail took 2 milliseconds</span><br><span class=\"line\">rejectEnd took 1 milliseconds</span><br></pre></td></tr></table></figure>\n\n<p>å¥½äº†~flowableçš„åŸºæœ¬åº”ç”¨æˆ‘ä»¬å°±å…ˆä»‹ç»åˆ°è¿™é‡Œäº†ã€‚</p>\n<h1 id=\"Flowableæµç¨‹è®¾è®¡å™¨\"><a href=\"#Flowableæµç¨‹è®¾è®¡å™¨\" class=\"headerlink\" title=\"Flowableæµç¨‹è®¾è®¡å™¨\"></a>Flowableæµç¨‹è®¾è®¡å™¨</h1><h2 id=\"Eclipse-Designer\"><a href=\"#Eclipse-Designer\" class=\"headerlink\" title=\"Eclipse Designer\"></a>Eclipse Designer</h2><p>Flowableæä¾›äº†åä¸ºFlowable Eclipse Designerçš„Eclipseæ’ä»¶ï¼Œå¯ä»¥ç”¨äºå›¾å½¢åŒ–åœ°å»ºæ¨¡ã€æµ‹è¯•ä¸éƒ¨ç½²BPMN 2.0æµç¨‹ã€‚</p>\n<h3 id=\"ä¸‹è½½å®‰è£…Eclipse\"><a href=\"#ä¸‹è½½å®‰è£…Eclipse\" class=\"headerlink\" title=\"ä¸‹è½½å®‰è£…Eclipse\"></a>ä¸‹è½½å®‰è£…Eclipse</h3><p>å»Eclipseå®˜ç½‘ä¸‹è½½å³å¯ï¼š<a class=\"link\"   href=\"https://www.eclipse.org/downloads/packages/release\" >https://www.eclipse.org/downloads/packages/release<i class=\"fas fa-external-link-alt\"></i></a> æ³¨æ„2020-09åçš„ç‰ˆæœ¬ä¸å†æ”¯æŒjdk8</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316202904261.png\"\n                      alt=\"image-20220316202904261\"\n                ></p>\n<p>è§£å‹ç¼©å°±å¯ä»¥äº†ï¼Œç„¶åè¿›å…¥è§£å‹ç¼©çš„ç›®å½•</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316203036602.png\"\n                      alt=\"image-20220316203036602\"\n                ></p>\n<p>ç›´æ¥å¯åŠ¨å³å¯</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316203111301.png\"\n                      alt=\"image-20220316203111301\"\n                ></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316203237316.png\"\n                      alt=\"image-20220316203237316\"\n                ></p>\n<h3 id=\"å®‰è£…Flowableæ’ä»¶\"><a href=\"#å®‰è£…Flowableæ’ä»¶\" class=\"headerlink\" title=\"å®‰è£…Flowableæ’ä»¶\"></a>å®‰è£…Flowableæ’ä»¶</h3><p>ç„¶åæˆ‘ä»¬å†å®‰è£…ä¸‹Flowableçš„æ’ä»¶ï¼Œé€‰æ‹©<strong>Help â†’ Install New Software</strong>ã€‚åœ¨ä¸‹å›¾é¢æ¿ä¸­ï¼Œç‚¹å‡»<em>Add</em>æŒ‰é’®ï¼Œå¹¶å¡«å†™ä¸‹åˆ—å­—æ®µ</p>\n<ul>\n<li><strong>Name:</strong> Flowable BPMN 2.0 designer</li>\n<li><strong>Location:</strong> <a class=\"link\"   href=\"http://www.flowable.org/designer/update/\" >http://www.flowable.org/designer/update/<i class=\"fas fa-external-link-alt\"></i></a></li>\n</ul>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316203454281.png\"\n                      alt=\"image-20220316203454281\"\n                ></p>\n<p>è¿™ç§åœ¨çº¿æ›´æ–°çš„æ–¹å¼å·²ç»è¢«å®˜ç½‘ç§»é™¤äº†ï¼Œæ“ä½œä¸äº†</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316211319931.png\"\n                      alt=\"image-20220316211319931\"\n                ></p>\n<p>è¿™æ—¶æˆ‘ä»¬å°±åªèƒ½é€šè¿‡ç¦»çº¿å®‰è£…çš„æ–¹å¼æ¥å®ç°äº†ï¼Œä¸‹è½½å¯¹åº”çš„ç¦»çº¿æ–‡ä»¶</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316211405001.png\"\n                      alt=\"image-20220316211405001\"\n                ></p>\n<p>å®‰è£…æ­¥éª¤æ¥æ“ä½œï¼Œ</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316211518520.png\"\n                      alt=\"image-20220316211518520\"\n                ></p>\n<p>ç„¶åç»§ç»­ï¼šé€‰æ‹©<strong>Help â†’ Install New Software</strong></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316211622115.png\"\n                      alt=\"image-20220316211622115\"\n                ></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316211651195.png\"\n                      alt=\"image-20220316211651195\"\n                ></p>\n<p>ä¸‹ä¸€æ­¥</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316211729581.png\"\n                      alt=\"image-20220316211729581\"\n                ></p>\n<p>å†ä¸‹ä¸€æ­¥</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316211802548.png\"\n                      alt=\"image-20220316211802548\"\n                ></p>\n<p>ç„¶åfinishã€‚å¼¹å‡ºå¦‚ä¸‹çª—å£</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316212008477.png\"\n                      alt=\"image-20220316212008477\"\n                ></p>\n<p>é‡å¯å³å¯</p>\n<h3 id=\"åˆ›å»ºé¡¹ç›®\"><a href=\"#åˆ›å»ºé¡¹ç›®\" class=\"headerlink\" title=\"åˆ›å»ºé¡¹ç›®\"></a>åˆ›å»ºé¡¹ç›®</h3><p>ç„¶åæˆ‘ä»¬å°±å¯ä»¥åˆ›å»ºä¸€ä¸ªFlowable Projectäº†</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316212418899.png\"\n                      alt=\"image-20220316212418899\"\n                ></p>\n<p>ç„¶åæˆ‘ä»¬å¯ä»¥åœ¨src&#x2F;mian&#x2F;resources&#x2F; çš„ç›®å½•ä¸‹åˆ›å»ºå¯¹åº”çš„æµç¨‹å›¾äº†</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316212605146.png\"\n                      alt=\"image-20220316212605146\"\n                ></p>\n<p>çœ‹åˆ°å¦‚ä¸‹çš„ç•Œé¢è¯´æ˜æ’ä»¶å®‰è£…æˆåŠŸäº†</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316212720767.png\"\n                      alt=\"image-20220316212720767\"\n                ></p>\n<h3 id=\"åˆ›å»ºæµç¨‹å›¾\"><a href=\"#åˆ›å»ºæµç¨‹å›¾\" class=\"headerlink\" title=\"åˆ›å»ºæµç¨‹å›¾\"></a>åˆ›å»ºæµç¨‹å›¾</h3><p>ä½¿ç”¨æ»‘æ¿æ¥ç»˜åˆ¶æµç¨‹ï¼Œé€šè¿‡ä»å³ä¾§æŠŠå›¾æ ‡æ‹–æ‹½åˆ°å·¦ä¾§çš„é¢æ¿ï¼Œæœ€ç»ˆçš„æ•ˆæœ</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316214339678.png\"\n                      alt=\"image-20220316214339678\"\n                ></p>\n<p>æŒ‡å®šæµç¨‹çš„ä¸»é”®</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316214430644.png\"\n                      alt=\"image-20220316214430644\"\n                ></p>\n<p>æŒ‡å®šä»»åŠ¡çš„è´Ÿè´£äºº</p>\n<p>åœ¨Propertiesè§†å›¾ä¸­æŒ‡å®šæ¯ä¸ªä»»åŠ¡èŠ‚ç‚¹çš„è´Ÿè´£äºº</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316214700887.png\"\n                      alt=\"image-20220316214700887\"\n                ></p>\n<p>åˆ›å»ºè¯·å‡å•ï¼šzhangsan</p>\n<p>å®¡æ‰¹è¯·å‡å•ï¼šlisi</p>\n<p>å½“æˆ‘ä»¬è®¾ç½®å®Œæˆåä¿å­˜æ–‡ä»¶ï¼Œä¼šåŒæ—¶ç”Ÿæˆpngå›¾ç‰‡</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316214808400.png\"\n                      alt=\"image-20220316214808400\"\n                ></p>\n<p>æ³¨æ„ï¼šç”Ÿæˆå›¾ç‰‡éœ€è¦å¦‚ä¸‹é…ç½®</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316214256235.png\"\n                      alt=\"image-20220316214256235\"\n                ></p>\n<h3 id=\"éƒ¨ç½²æµç¨‹\"><a href=\"#éƒ¨ç½²æµç¨‹\" class=\"headerlink\" title=\"éƒ¨ç½²æµç¨‹\"></a>éƒ¨ç½²æµç¨‹</h3><p>é¦–å…ˆåœ¨Eclipseä¸­ç”Ÿæˆbaræ–‡ä»¶ï¼Œé€‰ä¸­é¡¹ç›®ç„¶åé¼ æ ‡å³å‡»</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316215805503.png\"\n                      alt=\"image-20220316215805503\"\n                ></p>\n<p>ç„¶åä¼šå‘ç°åœ¨é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹å¤šäº†ä¸€ä¸ªdeploymentæ–‡ä»¶å¤¹ï¼Œé‡Œé¢å¤šäº†ä¸€ä¸ªMyProcess.baræ–‡ä»¶</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316215900052.png\"\n                      alt=\"image-20220316215900052\"\n                ></p>\n<p>ç„¶åæˆ‘ä»¬å°±å¯ä»¥æŠŠè¿™ä¸ªbaræ–‡ä»¶æ‹·è´åˆ°IDEAä¸­ï¼Œç»§ç»­éƒ¨ç½²çš„æµç¨‹</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316215945236.png\"\n                      alt=\"image-20220316215945236\"\n                ></p>\n<p>è€Œéƒ¨ç½²çš„ä»£ç å’Œå‰é¢æ²¡å•¥åŒºåˆ«</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">testDeploy</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// 1.è·å– ProcessEngine å¯¹è±¡</span></span><br><span class=\"line\">    <span class=\"type\">ProcessEngine</span> <span class=\"variable\">processEngine</span> <span class=\"operator\">=</span> configuration.buildProcessEngine();</span><br><span class=\"line\">    <span class=\"comment\">// 2.è·å–RepositoryService</span></span><br><span class=\"line\">    <span class=\"type\">RepositoryService</span> <span class=\"variable\">repositoryService</span> <span class=\"operator\">=</span> processEngine.getRepositoryService();</span><br><span class=\"line\">    <span class=\"type\">InputStream</span> <span class=\"variable\">in</span> <span class=\"operator\">=</span> <span class=\"built_in\">this</span>.getClass().getClassLoader().getResourceAsStream(<span class=\"string\">&quot;MyHoliday.bar&quot;</span>);</span><br><span class=\"line\">    <span class=\"type\">ZipInputStream</span> <span class=\"variable\">zipInputStream</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">ZipInputStream</span>(in);</span><br><span class=\"line\">    <span class=\"comment\">// 3.å®Œæˆæµç¨‹çš„éƒ¨ç½²æ“ä½œ ZIP æˆ–è€… Baræ–‡ä»¶</span></span><br><span class=\"line\">    <span class=\"type\">Deployment</span> <span class=\"variable\">deploy</span> <span class=\"operator\">=</span> repositoryService.createDeployment()</span><br><span class=\"line\">           <span class=\"comment\">// .addClasspathResource(&quot;MyHoliday.bar&quot;)// å…³è”è¦éƒ¨ç½²çš„æµç¨‹æ–‡ä»¶</span></span><br><span class=\"line\">            .addZipInputStream(zipInputStream)</span><br><span class=\"line\">            .name(<span class=\"string\">&quot;XXXå…¬å¸è¯·æ±‚æµç¨‹&quot;</span>)</span><br><span class=\"line\">            .deploy() ;<span class=\"comment\">// éƒ¨ç½²æµç¨‹</span></span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;deploy.getId() = &quot;</span> + deploy.getId());</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;deploy.getName() = &quot;</span> + deploy.getName());</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>æ‰§è¡ŒåæŸ¥çœ‹è¡¨ç»“æ„ï¼Œç›¸å…³çš„ä¿¡æ¯å°±è¿›å»äº†</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220316220121734.png\"\n                      alt=\"image-20220316220121734\"\n                ></p>\n<p>å®Œæ•´çš„æ¡ˆä¾‹ä»£ç ï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.bobo.flowable.test;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> org.flowable.engine.*;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.flowable.engine.history.HistoricActivityInstance;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.flowable.engine.impl.cfg.StandaloneProcessEngineConfiguration;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.flowable.engine.repository.Deployment;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.flowable.engine.runtime.ProcessInstance;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.flowable.task.api.Task;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.junit.Before;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.junit.Test;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> java.io.InputStream;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.HashMap;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.List;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.Map;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.zip.ZipInputStream;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">Test02</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"type\">ProcessEngineConfiguration</span> <span class=\"variable\">configuration</span> <span class=\"operator\">=</span> <span class=\"literal\">null</span>;</span><br><span class=\"line\">    <span class=\"meta\">@Before</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">before</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// è·å–  ProcessEngineConfiguration å¯¹è±¡</span></span><br><span class=\"line\">        configuration = <span class=\"keyword\">new</span> <span class=\"title class_\">StandaloneProcessEngineConfiguration</span>();</span><br><span class=\"line\">        <span class=\"comment\">// é…ç½® ç›¸å…³çš„æ•°æ®åº“çš„è¿æ¥ä¿¡æ¯</span></span><br><span class=\"line\">        configuration.setJdbcDriver(<span class=\"string\">&quot;com.mysql.cj.jdbc.Driver&quot;</span>);</span><br><span class=\"line\">        configuration.setJdbcUsername(<span class=\"string\">&quot;root&quot;</span>);</span><br><span class=\"line\">        configuration.setJdbcPassword(<span class=\"string\">&quot;123456&quot;</span>);</span><br><span class=\"line\">        configuration.setJdbcUrl(<span class=\"string\">&quot;jdbc:mysql://localhost:3306/flowable-learn?serverTimezone=UTC&amp;nullCatalogMeansCurrent=true&quot;</span>);</span><br><span class=\"line\">        <span class=\"comment\">// å¦‚æœæ•°æ®åº“ä¸­çš„è¡¨ç»“æ„ä¸å­˜åœ¨å°±æ–°å»º</span></span><br><span class=\"line\">        configuration.setDatabaseSchemaUpdate(ProcessEngineConfiguration.DB_SCHEMA_UPDATE_TRUE);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * éƒ¨ç½²æµç¨‹</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">testDeploy</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// 1.è·å– ProcessEngine å¯¹è±¡</span></span><br><span class=\"line\">        <span class=\"type\">ProcessEngine</span> <span class=\"variable\">processEngine</span> <span class=\"operator\">=</span> configuration.buildProcessEngine();</span><br><span class=\"line\">        <span class=\"comment\">// 2.è·å–RepositoryService</span></span><br><span class=\"line\">        <span class=\"type\">RepositoryService</span> <span class=\"variable\">repositoryService</span> <span class=\"operator\">=</span> processEngine.getRepositoryService();</span><br><span class=\"line\">        <span class=\"type\">InputStream</span> <span class=\"variable\">in</span> <span class=\"operator\">=</span> <span class=\"built_in\">this</span>.getClass().getClassLoader().getResourceAsStream(<span class=\"string\">&quot;MyHoliday.bar&quot;</span>);</span><br><span class=\"line\">        <span class=\"type\">ZipInputStream</span> <span class=\"variable\">zipInputStream</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">ZipInputStream</span>(in);</span><br><span class=\"line\">        <span class=\"comment\">// 3.å®Œæˆæµç¨‹çš„éƒ¨ç½²æ“ä½œ ZIP æˆ–è€… Baræ–‡ä»¶</span></span><br><span class=\"line\">        <span class=\"type\">Deployment</span> <span class=\"variable\">deploy</span> <span class=\"operator\">=</span> repositoryService.createDeployment()</span><br><span class=\"line\">               <span class=\"comment\">// .addClasspathResource(&quot;MyHoliday.bar&quot;)// å…³è”è¦éƒ¨ç½²çš„æµç¨‹æ–‡ä»¶</span></span><br><span class=\"line\">                .addZipInputStream(zipInputStream)</span><br><span class=\"line\">                .name(<span class=\"string\">&quot;XXXå…¬å¸è¯·æ±‚æµç¨‹&quot;</span>)</span><br><span class=\"line\">                .deploy() ;<span class=\"comment\">// éƒ¨ç½²æµç¨‹</span></span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;deploy.getId() = &quot;</span> + deploy.getId());</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;deploy.getName() = &quot;</span> + deploy.getName());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * å¯åŠ¨æµç¨‹å®ä¾‹</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">testRunProcess</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">        <span class=\"type\">ProcessEngine</span> <span class=\"variable\">processEngine</span> <span class=\"operator\">=</span> configuration.buildProcessEngine();</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// æˆ‘ä»¬éœ€è¦é€šè¿‡RuntimeServiceæ¥å¯åŠ¨æµç¨‹å®ä¾‹</span></span><br><span class=\"line\">        <span class=\"type\">RuntimeService</span> <span class=\"variable\">runtimeService</span> <span class=\"operator\">=</span> processEngine.getRuntimeService();</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// å¯åŠ¨æµç¨‹å®ä¾‹</span></span><br><span class=\"line\">        <span class=\"type\">ProcessInstance</span> <span class=\"variable\">holidayRequest</span> <span class=\"operator\">=</span> runtimeService.startProcessInstanceById(<span class=\"string\">&quot;myProcess:1:25004&quot;</span>);</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;holidayRequest.getProcessDefinitionId() = &quot;</span> + holidayRequest.getProcessDefinitionId());</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;holidayRequest.getActivityId() = &quot;</span> + holidayRequest.getActivityId());</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;holidayRequest.getId() = &quot;</span> + holidayRequest.getId());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * æµ‹è¯•ä»»åŠ¡æŸ¥è¯¢</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">testQueryTask</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">        <span class=\"type\">ProcessEngine</span> <span class=\"variable\">processEngine</span> <span class=\"operator\">=</span> configuration.buildProcessEngine();</span><br><span class=\"line\">        <span class=\"type\">TaskService</span> <span class=\"variable\">taskService</span> <span class=\"operator\">=</span> processEngine.getTaskService();</span><br><span class=\"line\">        List&lt;Task&gt; list = taskService.createTaskQuery()</span><br><span class=\"line\">                .processDefinitionKey(<span class=\"string\">&quot;myProcess&quot;</span>) <span class=\"comment\">// æŒ‡å®šæŸ¥è¯¢çš„æµç¨‹ç¼–ç¨‹</span></span><br><span class=\"line\">                .taskAssignee(<span class=\"string\">&quot;zhangsan&quot;</span>) <span class=\"comment\">// æŸ¥è¯¢è¿™ä¸ªä»»åŠ¡çš„å¤„ç†äºº</span></span><br><span class=\"line\">                .list();</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (Task task : list) &#123;</span><br><span class=\"line\">            System.out.println(<span class=\"string\">&quot;task.getProcessDefinitionId() = &quot;</span> + task.getProcessDefinitionId());</span><br><span class=\"line\">            System.out.println(<span class=\"string\">&quot;task.getName() = &quot;</span> + task.getName());</span><br><span class=\"line\">            System.out.println(<span class=\"string\">&quot;task.getAssignee() = &quot;</span> + task.getAssignee());</span><br><span class=\"line\">            System.out.println(<span class=\"string\">&quot;task.getDescription() = &quot;</span> + task.getDescription());</span><br><span class=\"line\">            System.out.println(<span class=\"string\">&quot;task.getId() = &quot;</span> + task.getId());</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * å®Œæˆå½“å‰ä»»åŠ¡</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">testCompleteTask</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">        <span class=\"type\">ProcessEngine</span> <span class=\"variable\">processEngine</span> <span class=\"operator\">=</span> configuration.buildProcessEngine();</span><br><span class=\"line\">        <span class=\"type\">TaskService</span> <span class=\"variable\">taskService</span> <span class=\"operator\">=</span> processEngine.getTaskService();</span><br><span class=\"line\">        <span class=\"type\">Task</span> <span class=\"variable\">task</span> <span class=\"operator\">=</span> taskService.createTaskQuery()</span><br><span class=\"line\">                .processDefinitionKey(<span class=\"string\">&quot;myProcess&quot;</span>)</span><br><span class=\"line\">                .taskAssignee(<span class=\"string\">&quot;lisi&quot;</span>)</span><br><span class=\"line\">                .singleResult();</span><br><span class=\"line\">        <span class=\"comment\">// åˆ›å»ºæµç¨‹å˜é‡</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span>(task != <span class=\"literal\">null</span>)&#123;</span><br><span class=\"line\">            <span class=\"comment\">// å®Œæˆä»»åŠ¡</span></span><br><span class=\"line\">            taskService.complete(task.getId());</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * è·å–æµç¨‹ä»»åŠ¡çš„å†å²æ•°æ®</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">testHistory</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">        <span class=\"type\">ProcessEngine</span> <span class=\"variable\">processEngine</span> <span class=\"operator\">=</span> configuration.buildProcessEngine();</span><br><span class=\"line\">        <span class=\"type\">HistoryService</span> <span class=\"variable\">historyService</span> <span class=\"operator\">=</span> processEngine.getHistoryService();</span><br><span class=\"line\">        List&lt;HistoricActivityInstance&gt; list = historyService.createHistoricActivityInstanceQuery()</span><br><span class=\"line\">                .processDefinitionId(<span class=\"string\">&quot;myProcess:1:25004&quot;</span>)</span><br><span class=\"line\">                .finished() <span class=\"comment\">// æŸ¥è¯¢çš„å†å²è®°å½•çš„çŠ¶æ€æ˜¯å·²ç»å®Œæˆ</span></span><br><span class=\"line\">                .orderByHistoricActivityInstanceEndTime().asc() <span class=\"comment\">// æŒ‡å®šæ’åºçš„å­—æ®µå’Œé¡ºåº</span></span><br><span class=\"line\">                .list();</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (HistoricActivityInstance history : list) &#123;</span><br><span class=\"line\">            System.out.println(history.getActivityName()+<span class=\"string\">&quot;:&quot;</span>+history.getAssignee()+<span class=\"string\">&quot;--&quot;</span></span><br><span class=\"line\">                    +history.getActivityId()+<span class=\"string\">&quot;:&quot;</span> + history.getDurationInMillis()+<span class=\"string\">&quot;æ¯«ç§’&quot;</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n\n\n<h2 id=\"Flowable-UIåº”ç”¨\"><a href=\"#Flowable-UIåº”ç”¨\" class=\"headerlink\" title=\"Flowable UIåº”ç”¨\"></a>Flowable UIåº”ç”¨</h2><p>Flowableæä¾›äº†å‡ ä¸ªwebåº”ç”¨ï¼Œç”¨äºæ¼”ç¤ºåŠä»‹ç»Flowableé¡¹ç›®æä¾›çš„åŠŸèƒ½ï¼š</p>\n<ul>\n<li>Flowable IDM: èº«ä»½ç®¡ç†åº”ç”¨ã€‚ä¸ºæ‰€æœ‰Flowable UIåº”ç”¨æä¾›å•ç‚¹ç™»å½•è®¤è¯åŠŸèƒ½ï¼Œå¹¶ä¸”ä¸ºæ‹¥æœ‰IDMç®¡ç†å‘˜æƒé™çš„ç”¨æˆ·æä¾›äº†ç®¡ç†ç”¨æˆ·ã€ç»„ä¸æƒé™çš„åŠŸèƒ½ã€‚</li>\n<li>Flowable Modeler: è®©å…·æœ‰å»ºæ¨¡æƒé™çš„ç”¨æˆ·å¯ä»¥åˆ›å»ºæµç¨‹æ¨¡å‹ã€è¡¨å•ã€é€‰æ‹©è¡¨ä¸åº”ç”¨å®šä¹‰ã€‚</li>\n<li>Flowable Task: è¿è¡Œæ—¶ä»»åŠ¡åº”ç”¨ã€‚æä¾›äº†å¯åŠ¨æµç¨‹å®ä¾‹ã€ç¼–è¾‘ä»»åŠ¡è¡¨å•ã€å®Œæˆä»»åŠ¡ï¼Œä»¥åŠæŸ¥è¯¢æµç¨‹å®ä¾‹ä¸ä»»åŠ¡çš„åŠŸèƒ½ã€‚</li>\n<li>Flowable Admin: ç®¡ç†åº”ç”¨ã€‚è®©å…·æœ‰ç®¡ç†å‘˜æƒé™çš„ç”¨æˆ·å¯ä»¥æŸ¥è¯¢BPMNã€DMNã€FormåŠContentå¼•æ“ï¼Œå¹¶æä¾›äº†è®¸å¤šé€‰é¡¹ç”¨äºä¿®æ”¹æµç¨‹å®ä¾‹ã€ä»»åŠ¡ã€ä½œä¸šç­‰ã€‚ç®¡ç†åº”ç”¨é€šè¿‡REST APIè¿æ¥è‡³å¼•æ“ï¼Œå¹¶ä¸Flowable Taskåº”ç”¨åŠFlowable RESTåº”ç”¨ä¸€åŒéƒ¨ç½²ã€‚</li>\n</ul>\n<p>æ‰€æœ‰å…¶ä»–çš„åº”ç”¨éƒ½éœ€è¦Flowable IDMæä¾›è®¤è¯ã€‚æ¯ä¸ªåº”ç”¨çš„WARæ–‡ä»¶å¯ä»¥éƒ¨ç½²åœ¨ç›¸åŒçš„servletå®¹å™¨ï¼ˆå¦‚Apache Tomcatï¼‰ä¸­ï¼Œä¹Ÿå¯ä»¥éƒ¨ç½²åœ¨ä¸åŒçš„å®¹å™¨ä¸­ã€‚ç”±äºæ¯ä¸ªåº”ç”¨ä½¿ç”¨ç›¸åŒçš„cookieè¿›è¡Œè®¤è¯ï¼Œå› æ­¤åº”ç”¨éœ€è¦è¿è¡Œåœ¨ç›¸åŒçš„åŸŸåä¸‹ã€‚</p>\n<h3 id=\"å®‰è£…éƒ¨ç½²\"><a href=\"#å®‰è£…éƒ¨ç½²\" class=\"headerlink\" title=\"å®‰è£…éƒ¨ç½²\"></a>å®‰è£…éƒ¨ç½²</h3><p>ä¸‹è½½Tomcatï¼š<a class=\"link\"   href=\"https://tomcat.apache.org/download-80.cgi\" >https://tomcat.apache.org/download-80.cgi<i class=\"fas fa-external-link-alt\"></i></a> å®˜ç½‘ä¸‹è½½åè§£å‹ç¼©åˆ°éä¸­æ–‡ç›®å½•å³å¯ï¼Œç„¶åæ˜¯ä¸‹è½½FlowableUIçš„æ–‡ä»¶ï¼Œåœ¨Flowable6.6ä¹‹åæŠŠFlowableUIä¸­æä¾›çš„å››ä¸ªåŠŸèƒ½åˆå¹¶åˆ°äº†ä¸€èµ·ã€‚</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220318102128672.png\"\n                      alt=\"image-20220318102128672\"\n                ></p>\n<p>ç„¶åæŠŠè§£å‹ç¼©åçš„ä¸¤ä¸ªwaråŒ…æ‹·è´åˆ°Tomcatçš„è§£å‹ç¼©çš„webappsç›®å½•ä¸‹</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220318102224330.png\"\n                      alt=\"image-20220318102224330\"\n                ></p>\n<p>Tomcatç›®å½•ï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220318102255188.png\"\n                      alt=\"image-20220318102255188\"\n                ></p>\n<h3 id=\"å¯åŠ¨æœåŠ¡\"><a href=\"#å¯åŠ¨æœåŠ¡\" class=\"headerlink\" title=\"å¯åŠ¨æœåŠ¡\"></a>å¯åŠ¨æœåŠ¡</h3><p>å¯åŠ¨TomcatæœåŠ¡ï¼Œæ‰§è¡Œstartup.batæ–‡ä»¶</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220318102325924.png\"\n                      alt=\"image-20220318102325924\"\n                ></p>\n<p>å¦‚æœå¯åŠ¨ä¸­å‡ºç°ä¹±ç ä¿®æ”¹Tomcatçš„confç›®å½•ä¸‹çš„ logging.properties æ–‡ä»¶ä¸­çš„ç¼–ç </p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220318102446699.png\"\n                      alt=\"image-20220318102446699\"\n                ></p>\n<p>å¦‚æœä¸€é—ªè€Œè¿‡åˆ™æ£€æŸ¥jdkçš„ç¯å¢ƒå˜é‡é…ç½®ã€‚å¯åŠ¨æˆåŠŸåï¼Œåœ¨æµè§ˆå™¨ä¸­è®¿é—® <a class=\"link\"   href=\"http://localhost:8080/flowable-ui\" >http://localhost:8080/flowable-ui<i class=\"fas fa-external-link-alt\"></i></a>, é»˜è®¤çš„è´¦å·å¯†ç æ˜¯ admin&#x2F;test</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220318102609807.png\"\n                      alt=\"image-20220318102609807\"\n                ></p>\n<h3 id=\"ç”¨æˆ·ç®¡ç†\"><a href=\"#ç”¨æˆ·ç®¡ç†\" class=\"headerlink\" title=\"ç”¨æˆ·ç®¡ç†\"></a>ç”¨æˆ·ç®¡ç†</h3><p>æˆ‘ä»¬å…ˆåœ¨ <code>èº«ä»½ç®¡ç†åº”ç”¨ç¨‹åº</code> ä¸­åˆ›å»ºç”¨æˆ·å¹¶æˆæƒ</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220318102707368.png\"\n                      alt=\"image-20220318102707368\"\n                ></p>\n<p>åˆ›å»ºç”¨æˆ·</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220318102734238.png\"\n                      alt=\"image-20220318102734238\"\n                ></p>\n<p>å¡«å†™è¯¦ç»†ä¿¡æ¯</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220318102817782.png\"\n                      alt=\"image-20220318102817782\"\n                ></p>\n<p>æˆæƒç®¡ç†</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220318102859814.png\"\n                      alt=\"image-20220318102859814\"\n                ></p>\n<h3 id=\"ç»˜åˆ¶æµç¨‹\"><a href=\"#ç»˜åˆ¶æµç¨‹\" class=\"headerlink\" title=\"ç»˜åˆ¶æµç¨‹\"></a>ç»˜åˆ¶æµç¨‹</h3><p>åˆ›å»ºæ–°çš„æµç¨‹</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220318101239742.png\"\n                      alt=\"image-20220318101239742\"\n                ></p>\n<p>æµç¨‹å›¾ç•Œé¢</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220318101346692.png\"\n                      alt=\"image-20220318101346692\"\n                ></p>\n<p>åˆ›å»ºæµç¨‹ï¼Œåˆ†é…å¤„ç†äºº</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220318101639424.png\"\n                      alt=\"image-20220318101639424\"\n                ></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220318101611564.png\"\n                      alt=\"image-20220318101611564\"\n                ></p>\n<p>ç»§ç»­å®Œæˆæµç¨‹å›¾çš„åˆ›å»º</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220318101810272.png\"\n                      alt=\"image-20220318101810272\"\n                ></p>\n<h3 id=\"éƒ¨ç½²æµç¨‹-1\"><a href=\"#éƒ¨ç½²æµç¨‹-1\" class=\"headerlink\" title=\"éƒ¨ç½²æµç¨‹\"></a>éƒ¨ç½²æµç¨‹</h3><p>ç»˜åˆ¶å¥½çš„æµç¨‹å›¾ï¼Œæˆ‘ä»¬åªéœ€è¦ä¸€é”®å¯¼å‡ºå³å¯</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220318103413285.png\"\n                      alt=\"image-20220318103413285\"\n                ></p>\n<p>ä¸‹è½½ä¸‹æ¥åæ‹·è´åˆ°é¡¹ç›®çš„resourceç›®å½•ä¸‹å³å¯</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220318103518807.png\"\n                      alt=\"image-20220318103518807\"\n                ></p>\n<p>ç„¶åå°±æ˜¯æ­£å¸¸çš„æ“ä½œæµç¨‹äº†</p>\n<h3 id=\"FlowableUI-æ¼”ç¤º\"><a href=\"#FlowableUI-æ¼”ç¤º\" class=\"headerlink\" title=\"FlowableUI æ¼”ç¤º\"></a>FlowableUI æ¼”ç¤º</h3><h4 id=\"éƒ¨ç½²æµç¨‹-2\"><a href=\"#éƒ¨ç½²æµç¨‹-2\" class=\"headerlink\" title=\"éƒ¨ç½²æµç¨‹\"></a>éƒ¨ç½²æµç¨‹</h4><p>åœ¨FlowableUIä¸­æä¾›äº†æ¼”ç¤ºç¨‹åº</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220318104517967.png\"\n                      alt=\"image-20220318104517967\"\n                ></p>\n<p>åˆ›å»ºä¸€ä¸ªæ–°çš„åº”ç”¨ç¨‹åºï¼Œå¹¶æŒ‡å®šç›¸å…³çš„ä¿¡æ¯</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220318104614784.png\"\n                      alt=\"image-20220318104614784\"\n                ></p>\n<p>åˆ›å»ºåº”ç”¨åéœ€è¦æŒ‡å®šå¯¹åº”çš„æµç¨‹å›¾</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220318104703306.png\"\n                      alt=\"image-20220318104703306\"\n                ></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220318104735714.png\"\n                      alt=\"image-20220318104735714\"\n                ></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220318104811812.png\"\n                      alt=\"image-20220318104811812\"\n                ></p>\n<p>å‘å¸ƒåº”ç”¨ç¨‹åº</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220318105045345.png\"\n                      alt=\"image-20220318105045345\"\n                ></p>\n<h4 id=\"å¯åŠ¨æµç¨‹\"><a href=\"#å¯åŠ¨æµç¨‹\" class=\"headerlink\" title=\"å¯åŠ¨æµç¨‹\"></a>å¯åŠ¨æµç¨‹</h4><p>å‘å¸ƒäº†åº”ç”¨ç¨‹åºåæˆ‘ä»¬å°±å¯ä»¥æ¥å¯åŠ¨æµç¨‹äº†</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220318105258331.png\"\n                      alt=\"image-20220318105258331\"\n                ></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220318105315908.png\"\n                      alt=\"image-20220318105315908\"\n                ></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220318105336107.png\"\n                      alt=\"image-20220318105336107\"\n                ></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220318105420011.png\"\n                      alt=\"image-20220318105420011\"\n                ></p>\n<p>ç‚¹å‡»æ˜¾ç¤ºå›¾ï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220318105444672.png\"\n                      alt=\"image-20220318105444672\"\n                ></p>\n<p>ä¹Ÿå°±æ˜¯å¯ä»¥çœ‹åˆ°å½“å‰æ˜¯user1æ¥å¤„ç†ï¼Œuser1ç™»å½•åå¯ä»¥çœ‹åˆ°è¦å¤„ç†çš„æµç¨‹ï¼Œuser2ç™»å½•æ˜¯çœ‹ä¸åˆ°çš„ã€‚</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220318105646273.png\"\n                      alt=\"image-20220318105646273\"\n                ></p>\n<p>ç‚¹å‡»å®Œæˆåæµç¨‹å°±å‘ä¸‹ä¸€æ­¥æµè½¬äº†</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220318105727192.png\"\n                      alt=\"image-20220318105727192\"\n                ></p>\n<p>è¿™æ—¶å†é€šè¿‡user2ç™»å½•ï¼Œå°±å¯ä»¥çœ‹åˆ°å¯¹åº”çš„ä»£åŠçš„ä¿¡æ¯</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220318105808830.png\"\n                      alt=\"image-20220318105808830\"\n                ></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220318105848185.png\"\n                      alt=\"image-20220318105848185\"\n                ></p>\n<p>ç„¶åç‚¹å‡»å®Œæˆï¼Œé‚£ä¹ˆæ•´ä¸ªæµç¨‹å°±ä»‹ç»äº†</p>\n<h1 id=\"FlowableåŸºç¡€è¡¨ç»“æ„\"><a href=\"#FlowableåŸºç¡€è¡¨ç»“æ„\" class=\"headerlink\" title=\"FlowableåŸºç¡€è¡¨ç»“æ„\"></a>FlowableåŸºç¡€è¡¨ç»“æ„</h1><h2 id=\"è¡¨ç»“æ„è®²è§£\"><a href=\"#è¡¨ç»“æ„è®²è§£\" class=\"headerlink\" title=\"è¡¨ç»“æ„è®²è§£\"></a>è¡¨ç»“æ„è®²è§£</h2><p>å·¥ä½œæµç¨‹çš„ç›¸å…³æ“ä½œéƒ½æ˜¯æ“ä½œå­˜å‚¨åœ¨å¯¹åº”çš„è¡¨ç»“æ„ä¸­ï¼Œä¸ºäº†èƒ½æ›´å¥½çš„å¼„æ¸…æ¥šFlowableçš„å®ç°åŸç†å’Œç»†èŠ‚ï¼Œæˆ‘ä»¬æœ‰å¿…è¦å…ˆå¼„æ¸…æ¥šFlowableçš„ç›¸å…³è¡¨ç»“æ„åŠå…¶ä½œç”¨ã€‚åœ¨Flowableä¸­çš„è¡¨ç»“æ„åœ¨åˆå§‹åŒ–çš„æ—¶å€™ä¼šåˆ›å»ºäº”ç±»è¡¨ç»“æ„ï¼Œå…·ä½“å¦‚ä¸‹ï¼š</p>\n<ul>\n<li><strong>ACT_RE</strong> ï¼šâ€™REâ€™è¡¨ç¤º repositoryã€‚ è¿™ä¸ªå‰ç¼€çš„è¡¨åŒ…å«äº†æµç¨‹å®šä¹‰å’Œæµç¨‹é™æ€èµ„æº ï¼ˆå›¾ç‰‡ï¼Œè§„åˆ™ï¼Œç­‰ç­‰ï¼‰ã€‚</li>\n<li><strong>ACT_RU</strong>ï¼šâ€™RUâ€™è¡¨ç¤º runtimeã€‚ è¿™äº›è¿è¡Œæ—¶çš„è¡¨ï¼ŒåŒ…å«æµç¨‹å®ä¾‹ï¼Œä»»åŠ¡ï¼Œå˜é‡ï¼Œå¼‚æ­¥ä»»åŠ¡ï¼Œç­‰è¿è¡Œä¸­çš„æ•°æ®ã€‚ Flowableåªåœ¨æµç¨‹å®ä¾‹æ‰§è¡Œè¿‡ç¨‹ä¸­ä¿å­˜è¿™äº›æ•°æ®ï¼Œ åœ¨æµç¨‹ç»“æŸæ—¶å°±ä¼šåˆ é™¤è¿™äº›è®°å½•ã€‚ è¿™æ ·è¿è¡Œæ—¶è¡¨å¯ä»¥ä¸€ç›´å¾ˆå°é€Ÿåº¦å¾ˆå¿«ã€‚</li>\n<li><strong>ACT_HI</strong>ï¼šâ€™HIâ€™è¡¨ç¤º historyã€‚ è¿™äº›è¡¨åŒ…å«å†å²æ•°æ®ï¼Œæ¯”å¦‚å†å²æµç¨‹å®ä¾‹ï¼Œ å˜é‡ï¼Œä»»åŠ¡ç­‰ç­‰ã€‚</li>\n<li><strong>ACT_GE</strong>ï¼š GE è¡¨ç¤º generalã€‚ é€šç”¨æ•°æ®ï¼Œ ç”¨äºä¸åŒåœºæ™¯ä¸‹ </li>\n<li><strong>ACT_ID:</strong>   â€™IDâ€™è¡¨ç¤ºidentity(ç»„ç»‡æœºæ„)ã€‚è¿™äº›è¡¨åŒ…å«æ ‡è¯†çš„ä¿¡æ¯ï¼Œå¦‚ç”¨æˆ·ï¼Œç”¨æˆ·ç»„ï¼Œç­‰ç­‰ã€‚</li>\n</ul>\n<p>å…·ä½“çš„è¡¨ç»“æ„çš„å«ä¹‰:</p>\n<table>\n<thead>\n<tr>\n<th><strong>è¡¨åˆ†ç±»</strong></th>\n<th><strong>è¡¨å</strong></th>\n<th><strong>è§£é‡Š</strong></th>\n</tr>\n</thead>\n<tbody><tr>\n<td>ä¸€èˆ¬æ•°æ®</td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td></td>\n<td>[ACT_GE_BYTEARRAY]</td>\n<td>é€šç”¨çš„æµç¨‹å®šä¹‰å’Œæµç¨‹èµ„æº</td>\n</tr>\n<tr>\n<td></td>\n<td>[ACT_GE_PROPERTY]</td>\n<td>ç³»ç»Ÿç›¸å…³å±æ€§</td>\n</tr>\n<tr>\n<td>æµç¨‹å†å²è®°å½•</td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td></td>\n<td>[ACT_HI_ACTINST]</td>\n<td>å†å²çš„æµç¨‹å®ä¾‹</td>\n</tr>\n<tr>\n<td></td>\n<td>[ACT_HI_ATTACHMENT]</td>\n<td>å†å²çš„æµç¨‹é™„ä»¶</td>\n</tr>\n<tr>\n<td></td>\n<td>[ACT_HI_COMMENT]</td>\n<td>å†å²çš„è¯´æ˜æ€§ä¿¡æ¯</td>\n</tr>\n<tr>\n<td></td>\n<td>[ACT_HI_DETAIL]</td>\n<td>å†å²çš„æµç¨‹è¿è¡Œä¸­çš„ç»†èŠ‚ä¿¡æ¯</td>\n</tr>\n<tr>\n<td></td>\n<td>[ACT_HI_IDENTITYLINK]</td>\n<td>å†å²çš„æµç¨‹è¿è¡Œè¿‡ç¨‹ä¸­ç”¨æˆ·å…³ç³»</td>\n</tr>\n<tr>\n<td></td>\n<td>[ACT_HI_PROCINST]</td>\n<td>å†å²çš„æµç¨‹å®ä¾‹</td>\n</tr>\n<tr>\n<td></td>\n<td>[ACT_HI_TASKINST]</td>\n<td>å†å²çš„ä»»åŠ¡å®ä¾‹</td>\n</tr>\n<tr>\n<td></td>\n<td>[ACT_HI_VARINST]</td>\n<td>å†å²çš„æµç¨‹è¿è¡Œä¸­çš„å˜é‡ä¿¡æ¯</td>\n</tr>\n<tr>\n<td>æµç¨‹å®šä¹‰è¡¨</td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td></td>\n<td>[ACT_RE_DEPLOYMENT]</td>\n<td>éƒ¨ç½²å•å…ƒä¿¡æ¯</td>\n</tr>\n<tr>\n<td></td>\n<td>[ACT_RE_MODEL]</td>\n<td>æ¨¡å‹ä¿¡æ¯</td>\n</tr>\n<tr>\n<td></td>\n<td>[ACT_RE_PROCDEF]</td>\n<td>å·²éƒ¨ç½²çš„æµç¨‹å®šä¹‰</td>\n</tr>\n<tr>\n<td>è¿è¡Œå®ä¾‹è¡¨</td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td></td>\n<td>[ACT_RU_EVENT_SUBSCR]</td>\n<td>è¿è¡Œæ—¶äº‹ä»¶</td>\n</tr>\n<tr>\n<td></td>\n<td>[ACT_RU_EXECUTION]</td>\n<td>è¿è¡Œæ—¶æµç¨‹æ‰§è¡Œå®ä¾‹</td>\n</tr>\n<tr>\n<td></td>\n<td>[ACT_RU_IDENTITYLINK]</td>\n<td>è¿è¡Œæ—¶ç”¨æˆ·å…³ç³»ä¿¡æ¯ï¼Œå­˜å‚¨ä»»åŠ¡èŠ‚ç‚¹ä¸å‚ä¸è€…çš„ç›¸å…³ä¿¡æ¯</td>\n</tr>\n<tr>\n<td></td>\n<td>[ACT_RU_JOB]</td>\n<td>è¿è¡Œæ—¶ä½œä¸š</td>\n</tr>\n<tr>\n<td></td>\n<td>[ACT_RU_TASK]</td>\n<td>è¿è¡Œæ—¶ä»»åŠ¡</td>\n</tr>\n<tr>\n<td></td>\n<td>[ACT_RU_VARIABLE]</td>\n<td>è¿è¡Œæ—¶å˜é‡è¡¨</td>\n</tr>\n<tr>\n<td>ç”¨æˆ·ç”¨æˆ·ç»„è¡¨</td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td></td>\n<td>[ACT_ID_BYTEARRAY]</td>\n<td>äºŒè¿›åˆ¶æ•°æ®è¡¨</td>\n</tr>\n<tr>\n<td></td>\n<td>[ACT_ID_GROUP]</td>\n<td>ç”¨æˆ·ç»„ä¿¡æ¯è¡¨</td>\n</tr>\n<tr>\n<td></td>\n<td>[ACT_ID_INFO]</td>\n<td>ç”¨æˆ·ä¿¡æ¯è¯¦æƒ…è¡¨</td>\n</tr>\n<tr>\n<td></td>\n<td>[ACT_ID_MEMBERSHIP]</td>\n<td>äººä¸ç»„å…³ç³»è¡¨</td>\n</tr>\n<tr>\n<td></td>\n<td>[ACT_ID_PRIV]</td>\n<td>æƒé™è¡¨</td>\n</tr>\n<tr>\n<td></td>\n<td>[ACT_ID_PRIV_MAPPING]</td>\n<td>ç”¨æˆ·æˆ–ç»„æƒé™å…³ç³»è¡¨</td>\n</tr>\n<tr>\n<td></td>\n<td>[ACT_ID_PROPERTY]</td>\n<td>å±æ€§è¡¨</td>\n</tr>\n<tr>\n<td></td>\n<td>[ACT_ID_TOKEN]</td>\n<td>è®°å½•ç”¨æˆ·çš„tokenä¿¡æ¯</td>\n</tr>\n<tr>\n<td></td>\n<td>[ACT_ID_USER]</td>\n<td>ç”¨æˆ·è¡¨</td>\n</tr>\n</tbody></table>\n<h2 id=\"ProcessEngineè®²è§£\"><a href=\"#ProcessEngineè®²è§£\" class=\"headerlink\" title=\"ProcessEngineè®²è§£\"></a>ProcessEngineè®²è§£</h2><h3 id=\"ç¡¬ç¼–ç çš„æ–¹å¼\"><a href=\"#ç¡¬ç¼–ç çš„æ–¹å¼\" class=\"headerlink\" title=\"ç¡¬ç¼–ç çš„æ–¹å¼\"></a>ç¡¬ç¼–ç çš„æ–¹å¼</h3><p>æˆ‘ä»¬å‰é¢è®²è§£æ¡ˆä¾‹çš„æ—¶å€™æ˜¯é€šè¿‡ProcessEngineConfigurationè¿™ä¸ªé…ç½®ç±»æ¥åŠ è½½çš„ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// é…ç½®æ•°æ®åº“ç›¸å…³ä¿¡æ¯ è·å– ProcessEngineConfiguration</span></span><br><span class=\"line\"><span class=\"type\">ProcessEngineConfiguration</span> <span class=\"variable\">cfg</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">StandaloneProcessEngineConfiguration</span>()</span><br><span class=\"line\">    .setJdbcUrl(<span class=\"string\">&quot;jdbc:mysql://localhost:3306/flowable-learn2?serverTimezone=UTC&amp;nullCatalogMeansCurrent=true&quot;</span>)</span><br><span class=\"line\">    .setJdbcUsername(<span class=\"string\">&quot;root&quot;</span>)</span><br><span class=\"line\">    .setJdbcPassword(<span class=\"string\">&quot;123456&quot;</span>)</span><br><span class=\"line\">    .setJdbcDriver(<span class=\"string\">&quot;com.mysql.cj.jdbc.Driver&quot;</span>)</span><br><span class=\"line\">    .setDatabaseSchemaUpdate(ProcessEngineConfiguration.DB_SCHEMA_UPDATE_TRUE);</span><br><span class=\"line\"><span class=\"comment\">// è·å–æµç¨‹å¼•æ“å¯¹è±¡</span></span><br><span class=\"line\"><span class=\"type\">ProcessEngine</span> <span class=\"variable\">processEngine</span> <span class=\"operator\">=</span> cfg.buildProcessEngine();</span><br></pre></td></tr></table></figure>\n\n<p>è¿™ç§æ–¹å¼ä¼šè°ƒç”¨buildProcessEngine()æ–¹æ³•ï¼Œé‡Œé¢çš„æ ¸å¿ƒä»£ç ä¸ºï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220319113106848.png\"\n                      alt=\"image-20220319113106848\"\n                ></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220319113139646.png\"\n                      alt=\"image-20220319113139646\"\n                ></p>\n<h3 id=\"é…ç½®æ–‡ä»¶\"><a href=\"#é…ç½®æ–‡ä»¶\" class=\"headerlink\" title=\"é…ç½®æ–‡ä»¶\"></a>é…ç½®æ–‡ä»¶</h3><p>é™¤äº†ä¸Šé¢çš„ç¡¬ç¼–ç çš„æ–¹å¼å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥åœ¨resourcesç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª<code>flowable.cfg.xml</code>æ–‡ä»¶ï¼Œæ³¨æ„è¿™ä¸ªåç§°æ˜¯å›ºå®šçš„å“¦ã€‚å†…å®¹å¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">beans</span> <span class=\"attr\">xmlns</span>=<span class=\"string\">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">       <span class=\"attr\">xmlns:xsi</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">       <span class=\"attr\">xsi:schemaLocation</span>=<span class=\"string\">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">bean</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;processEngineConfiguration&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">          <span class=\"attr\">class</span>=<span class=\"string\">&quot;org.flowable.engine.impl.cfg.StandaloneProcessEngineConfiguration&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;jdbcUrl&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;jdbc:mysql://localhost:3306/flow1?allowMultiQueries=true<span class=\"symbol\">&amp;amp;</span>useUnicode=true<span class=\"symbol\">&amp;amp;</span>characterEncoding=UTF-8<span class=\"symbol\">&amp;amp;</span>useSSL=false<span class=\"symbol\">&amp;amp;</span>serverTimezone=UTC<span class=\"symbol\">&amp;amp;</span>nullCatalogMeansCurrent=true&quot;</span> /&gt;</span><span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;jdbcDriver&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;com.mysql.cj.jdbc.Driver&quot;</span> /&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;jdbcUsername&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;root&quot;</span> /&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;jdbcPassword&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;123456&quot;</span> /&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;databaseSchemaUpdate&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;true&quot;</span> /&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;asyncExecutorActivate&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;false&quot;</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">bean</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>åœ¨ä¸Šé¢çš„é…ç½®æ–‡ä»¶ä¸­é…ç½®ç›¸å…³çš„ä¿¡æ¯ã€‚æˆ‘ä»¬åœ¨Javaä»£ç ä¸­å°±å¯ä»¥ç®€åŒ–ä¸ºï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">test01</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// è·å–æµç¨‹å¼•æ“å¯¹è±¡</span></span><br><span class=\"line\">    <span class=\"type\">ProcessEngine</span> <span class=\"variable\">processEngine</span> <span class=\"operator\">=</span> ProcessEngines.getDefaultProcessEngine();</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;processEngine = &quot;</span> + processEngine);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>å¯ä»¥çœ‹ä¸‹getDefaultProcessEngineçš„æºç ï¼Œåœ¨é‡Œé¢æœ€ç»ˆè¿˜æ˜¯æ‰§è¡Œäº†å’Œç¡¬ç¼–ç ä¸€æ ·çš„ä»£ç </p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> ProcessEngine <span class=\"title function_\">getProcessEngine</span><span class=\"params\">(String processEngineName)</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!isInitialized()) &#123;</span><br><span class=\"line\">        init(); <span class=\"comment\">// å®Œæˆåˆå§‹åŒ–æ“ä½œ</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> processEngines.get(processEngineName);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>è¿›å…¥initæ–¹æ³•</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">synchronized</span> <span class=\"keyword\">void</span> <span class=\"title function_\">init</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!isInitialized()) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (processEngines == <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">            <span class=\"comment\">// Create new map to store process-engines if current map is null</span></span><br><span class=\"line\">            processEngines = <span class=\"keyword\">new</span> <span class=\"title class_\">HashMap</span>&lt;&gt;();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"type\">ClassLoader</span> <span class=\"variable\">classLoader</span> <span class=\"operator\">=</span> ReflectUtil.getClassLoader();</span><br><span class=\"line\">        Enumeration&lt;URL&gt; resources = <span class=\"literal\">null</span>;</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            resources = classLoader.getResources(<span class=\"string\">&quot;flowable.cfg.xml&quot;</span>); <span class=\"comment\">// åŠ è½½flowable.cfg.xmlé…ç½®æ–‡ä»¶</span></span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (IOException e) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"title class_\">FlowableIllegalArgumentException</span>(<span class=\"string\">&quot;problem retrieving flowable.cfg.xml resources on the classpath: &quot;</span> + System.getProperty(<span class=\"string\">&quot;java.class.path&quot;</span>), e);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// Remove duplicated configuration URL&#x27;s using set. Some</span></span><br><span class=\"line\">        <span class=\"comment\">// classloaders may return identical URL&#x27;s twice, causing duplicate</span></span><br><span class=\"line\">        <span class=\"comment\">// startups</span></span><br><span class=\"line\">        Set&lt;URL&gt; configUrls = <span class=\"keyword\">new</span> <span class=\"title class_\">HashSet</span>&lt;&gt;();</span><br><span class=\"line\">        <span class=\"keyword\">while</span> (resources.hasMoreElements()) &#123;</span><br><span class=\"line\">            configUrls.add(resources.nextElement());</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (Iterator&lt;URL&gt; iterator = configUrls.iterator(); iterator.hasNext();) &#123;</span><br><span class=\"line\">            <span class=\"type\">URL</span> <span class=\"variable\">resource</span> <span class=\"operator\">=</span> iterator.next();</span><br><span class=\"line\">            LOGGER.info(<span class=\"string\">&quot;Initializing process engine using configuration &#x27;&#123;&#125;&#x27;&quot;</span>, resource.toString());</span><br><span class=\"line\">            initProcessEngineFromResource(resource); <span class=\"comment\">// åˆå§‹åŒ–ProcessEngine</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            resources = classLoader.getResources(<span class=\"string\">&quot;flowable-context.xml&quot;</span>); <span class=\"comment\">// åœ¨æ•´åˆSpringçš„æƒ…å†µä¸‹åŠ è½½è¯¥æ–‡ä»¶</span></span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (IOException e) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"title class_\">FlowableIllegalArgumentException</span>(<span class=\"string\">&quot;problem retrieving flowable-context.xml resources on the classpath: &quot;</span> + System.getProperty(<span class=\"string\">&quot;java.class.path&quot;</span>), e);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">while</span> (resources.hasMoreElements()) &#123;</span><br><span class=\"line\">            <span class=\"type\">URL</span> <span class=\"variable\">resource</span> <span class=\"operator\">=</span> resources.nextElement();</span><br><span class=\"line\">            LOGGER.info(<span class=\"string\">&quot;Initializing process engine using Spring configuration &#x27;&#123;&#125;&#x27;&quot;</span>, resource.toString());</span><br><span class=\"line\">            initProcessEngineFromSpringResource(resource); <span class=\"comment\">// ä»Springçš„èµ„æºæ–‡ä»¶ä¸­å®ŒæˆProcessEngineçš„åˆå§‹åŒ–</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        setInitialized(<span class=\"literal\">true</span>);</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        LOGGER.info(<span class=\"string\">&quot;Process engines already initialized&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>åœ¨æºç ä¸­æä¾›äº†å•ç‹¬ä½¿ç”¨å¥½æ•´åˆSpringçš„é…ç½®åŠ è½½æ–¹å¼ã€‚å†è¿›å…¥åˆ°initProcessEngineFromResource(resource)æ–¹æ³•ä¸­ï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220319114011806.png\"\n                      alt=\"image-20220319114011806\"\n                ></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220319114053252.png\"\n                      alt=\"image-20220319114053252\"\n                ></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220319114210012.png\"\n                      alt=\"image-20220319114210012\"\n                ></p>\n<p>è€Œä¸”æˆ‘ä»¬ä¹Ÿå¯ä»¥çœ‹åˆ°ProcessEngineæœ€ç»ˆçš„å®ç°æ˜¯ ProcessEngineImplå¯¹è±¡ã€‚</p>\n<h3 id=\"è‡ªå®šä¹‰é…ç½®æ–‡ä»¶\"><a href=\"#è‡ªå®šä¹‰é…ç½®æ–‡ä»¶\" class=\"headerlink\" title=\"è‡ªå®šä¹‰é…ç½®æ–‡ä»¶\"></a>è‡ªå®šä¹‰é…ç½®æ–‡ä»¶</h3><p>æœ€åæˆ‘ä»¬å¦‚æœè¦åŠ è½½è‡ªå®šä¹‰åç§°çš„é…ç½®æ–‡ä»¶å¯ä»¥é€šè¿‡ProcessEngineConfigurationä¸­çš„å¯¹åº”æ„é€ æ–¹æ³•æ¥å®ç°</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">test2</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> Exception&#123;</span><br><span class=\"line\">    <span class=\"type\">ProcessEngineConfiguration</span> <span class=\"variable\">configuration</span> <span class=\"operator\">=</span> ProcessEngineConfiguration</span><br><span class=\"line\">            .createProcessEngineConfigurationFromResource(<span class=\"string\">&quot;flowable.cfg.xml&quot;</span>);</span><br><span class=\"line\">    <span class=\"type\">ProcessEngine</span> <span class=\"variable\">processEngine</span> <span class=\"operator\">=</span> configuration.buildProcessEngine();</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;processEngine = &quot;</span> + processEngine);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n\n\n<h2 id=\"ServcieæœåŠ¡æ¥å£\"><a href=\"#ServcieæœåŠ¡æ¥å£\" class=\"headerlink\" title=\"ServcieæœåŠ¡æ¥å£\"></a>ServcieæœåŠ¡æ¥å£</h2><p>Serviceæ˜¯å·¥ä½œæµå¼•æ“æä¾›ç”¨äºè¿›è¡Œå·¥ä½œæµéƒ¨ç½²ã€æ‰§è¡Œã€ç®¡ç†çš„æœåŠ¡æ¥å£ï¼Œæˆ‘ä»¬ä½¿ç”¨è¿™äº›æ¥å£å¯ä»¥å°±æ˜¯æ“ä½œæœåŠ¡å¯¹åº”çš„æ•°æ®è¡¨</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220319223019186.png\"\n                      alt=\"image-20220319223019186\"\n                ></p>\n<h3 id=\"Serviceåˆ›å»ºæ–¹å¼\"><a href=\"#Serviceåˆ›å»ºæ–¹å¼\" class=\"headerlink\" title=\"Serviceåˆ›å»ºæ–¹å¼\"></a>Serviceåˆ›å»ºæ–¹å¼</h3><p>é€šè¿‡ProcessEngineåˆ›å»ºService</p>\n<p>æ–¹å¼å¦‚ä¸‹ï¼š</p>\n <figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">RuntimeService</span> <span class=\"variable\">runtimeService</span> <span class=\"operator\">=</span> processEngine.getRuntimeService();</span><br><span class=\"line\"><span class=\"type\">RepositoryService</span> <span class=\"variable\">repositoryService</span> <span class=\"operator\">=</span> processEngine.getRepositoryService();</span><br><span class=\"line\"><span class=\"type\">TaskService</span> <span class=\"variable\">taskService</span> <span class=\"operator\">=</span> processEngine.getTaskService();</span><br><span class=\"line\"><span class=\"comment\">// ...</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Serviceæ€»è§ˆ\"><a href=\"#Serviceæ€»è§ˆ\" class=\"headerlink\" title=\"Serviceæ€»è§ˆ\"></a>Serviceæ€»è§ˆ</h3><table>\n<thead>\n<tr>\n<th>serviceåç§°</th>\n<th>serviceä½œç”¨</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>RepositoryService</td>\n<td>Flowableçš„èµ„æºç®¡ç†ç±»</td>\n</tr>\n<tr>\n<td>RuntimeService</td>\n<td>Flowableçš„æµç¨‹è¿è¡Œç®¡ç†ç±»</td>\n</tr>\n<tr>\n<td>TaskService</td>\n<td>Flowableçš„ä»»åŠ¡ç®¡ç†ç±»</td>\n</tr>\n<tr>\n<td>HistoryService</td>\n<td>Flowableçš„å†å²ç®¡ç†ç±»</td>\n</tr>\n<tr>\n<td>ManagerService</td>\n<td>Flowableçš„å¼•æ“ç®¡ç†ç±»</td>\n</tr>\n</tbody></table>\n<p> ç®€å•ä»‹ç»ï¼š</p>\n<p><strong>RepositoryService</strong></p>\n<p>æ˜¯activitiçš„èµ„æºç®¡ç†ç±»ï¼Œæä¾›äº†ç®¡ç†å’Œæ§åˆ¶æµç¨‹å‘å¸ƒåŒ…å’Œæµç¨‹å®šä¹‰çš„æ“ä½œã€‚ä½¿ç”¨å·¥ä½œæµå»ºæ¨¡å·¥å…·è®¾è®¡çš„ä¸šåŠ¡æµç¨‹å›¾éœ€è¦ä½¿ç”¨æ­¤serviceå°†æµç¨‹å®šä¹‰æ–‡ä»¶çš„å†…å®¹éƒ¨ç½²åˆ°è®¡ç®—æœºã€‚</p>\n<p>é™¤äº†éƒ¨ç½²æµç¨‹å®šä¹‰ä»¥å¤–è¿˜å¯ä»¥ï¼šæŸ¥è¯¢å¼•æ“ä¸­çš„å‘å¸ƒåŒ…å’Œæµç¨‹å®šä¹‰ã€‚</p>\n<p>æš‚åœæˆ–æ¿€æ´»å‘å¸ƒåŒ…ï¼Œå¯¹åº”å…¨éƒ¨å’Œç‰¹å®šæµç¨‹å®šä¹‰ã€‚ æš‚åœæ„å‘³ç€å®ƒä»¬ä¸èƒ½å†æ‰§è¡Œä»»ä½•æ“ä½œäº†ï¼Œæ¿€æ´»æ˜¯å¯¹åº”çš„åå‘æ“ä½œã€‚è·å¾—å¤šç§èµ„æºï¼Œåƒæ˜¯åŒ…å«åœ¨å‘å¸ƒåŒ…é‡Œçš„æ–‡ä»¶ï¼Œ æˆ–å¼•æ“è‡ªåŠ¨ç”Ÿæˆçš„æµç¨‹å›¾ã€‚</p>\n<p>è·å¾—æµç¨‹å®šä¹‰çš„pojoç‰ˆæœ¬ï¼Œ å¯ä»¥ç”¨æ¥é€šè¿‡javaè§£ææµç¨‹ï¼Œè€Œä¸å¿…é€šè¿‡xmlã€‚</p>\n<p><strong>RuntimeService</strong></p>\n<p>Activitiçš„æµç¨‹è¿è¡Œç®¡ç†ç±»ã€‚å¯ä»¥ä»è¿™ä¸ªæœåŠ¡ç±»ä¸­è·å–å¾ˆå¤šå…³äºæµç¨‹æ‰§è¡Œç›¸å…³çš„ä¿¡æ¯</p>\n<p><strong>TaskService</strong></p>\n<p>Activitiçš„ä»»åŠ¡ç®¡ç†ç±»ã€‚å¯ä»¥ä»è¿™ä¸ªç±»ä¸­è·å–ä»»åŠ¡çš„ä¿¡æ¯ã€‚</p>\n<p><strong>HistoryService</strong></p>\n<p>Flowableçš„å†å²ç®¡ç†ç±»ï¼Œå¯ä»¥æŸ¥è¯¢å†å²ä¿¡æ¯ï¼Œæ‰§è¡Œæµç¨‹æ—¶ï¼Œå¼•æ“ä¼šä¿å­˜å¾ˆå¤šæ•°æ®ï¼ˆæ ¹æ®é…ç½®ï¼‰ï¼Œæ¯”å¦‚æµç¨‹å®ä¾‹å¯åŠ¨æ—¶é—´ï¼Œä»»åŠ¡çš„å‚ä¸è€…ï¼Œ å®Œæˆä»»åŠ¡çš„æ—¶é—´ï¼Œæ¯ä¸ªæµç¨‹å®ä¾‹çš„æ‰§è¡Œè·¯å¾„ï¼Œç­‰ç­‰ã€‚ è¿™ä¸ªæœåŠ¡ä¸»è¦é€šè¿‡æŸ¥è¯¢åŠŸèƒ½æ¥è·å¾—è¿™äº›æ•°æ®ã€‚</p>\n<p><strong>ManagementService</strong></p>\n<p>Activitiçš„å¼•æ“ç®¡ç†ç±»ï¼Œæä¾›äº†å¯¹Flowable æµç¨‹å¼•æ“çš„ç®¡ç†å’Œç»´æŠ¤åŠŸèƒ½ï¼Œè¿™äº›åŠŸèƒ½ä¸åœ¨å·¥ä½œæµé©±åŠ¨çš„åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨ï¼Œä¸»è¦ç”¨äº Flowable ç³»ç»Ÿçš„æ—¥å¸¸ç»´æŠ¤ã€‚</p>\n<h2 id=\"å›¾æ ‡ä»‹ç»\"><a href=\"#å›¾æ ‡ä»‹ç»\" class=\"headerlink\" title=\"å›¾æ ‡ä»‹ç»\"></a>å›¾æ ‡ä»‹ç»</h2><p>BPMN 2.0æ˜¯ä¸šåŠ¡æµç¨‹å»ºæ¨¡ç¬¦å·2.0çš„ç¼©å†™ã€‚å®ƒç”±Business Process Management Initiativeè¿™ä¸ªéè¥åˆ©åä¼šåˆ›å»ºå¹¶ä¸æ–­å‘å±•ã€‚ä½œä¸ºä¸€ç§æ ‡è¯†ï¼ŒBPMN 2.0æ˜¯ä½¿ç”¨ä¸€äº›<strong>ç¬¦å·</strong>æ¥æ˜ç¡®ä¸šåŠ¡æµç¨‹è®¾è®¡æµç¨‹å›¾çš„ä¸€æ•´å¥—ç¬¦å·è§„èŒƒï¼Œå®ƒèƒ½å¢è¿›ä¸šåŠ¡å»ºæ¨¡æ—¶çš„æ²Ÿé€šæ•ˆç‡ã€‚ç›®å‰BPMN2.0æ˜¯æœ€æ–°çš„ç‰ˆæœ¬ï¼Œå®ƒç”¨äºåœ¨BPMä¸Šä¸‹æ–‡ä¸­è¿›è¡Œå¸ƒå±€å’Œå¯è§†åŒ–çš„æ²Ÿé€šã€‚æ¥ä¸‹æ¥æˆ‘ä»¬å…ˆæ¥äº†è§£åœ¨æµç¨‹è®¾è®¡ä¸­å¸¸è§çš„ ç¬¦å·ã€‚</p>\n<p>BPMN2.0çš„<strong>åŸºæœ¬ç¬¦åˆ</strong>ä¸»è¦åŒ…å«ï¼š</p>\n<h3 id=\"äº‹ä»¶å›¾æ ‡\"><a href=\"#äº‹ä»¶å›¾æ ‡\" class=\"headerlink\" title=\"äº‹ä»¶å›¾æ ‡\"></a>äº‹ä»¶å›¾æ ‡</h3><p>åœ¨Flowableä¸­çš„äº‹ä»¶å›¾æ ‡å¯åŠ¨äº‹ä»¶ï¼Œè¾¹ç•Œäº‹ä»¶,ä¸­é—´äº‹ä»¶å’Œç»“æŸäº‹ä»¶.</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220320103803308.png\"\n                      alt=\"image-20220320103803308\"\n                ></p>\n<h3 id=\"æ´»åŠ¨-ä»»åŠ¡-å›¾æ ‡\"><a href=\"#æ´»åŠ¨-ä»»åŠ¡-å›¾æ ‡\" class=\"headerlink\" title=\"æ´»åŠ¨(ä»»åŠ¡)å›¾æ ‡\"></a>æ´»åŠ¨(ä»»åŠ¡)å›¾æ ‡</h3><p>æ´»åŠ¨æ˜¯å·¥ä½œæˆ–ä»»åŠ¡çš„ä¸€ä¸ªé€šç”¨æœ¯è¯­ã€‚ä¸€ä¸ªæ´»åŠ¨å¯ä»¥æ˜¯ä¸€ä¸ªä»»åŠ¡ï¼Œè¿˜å¯ä»¥æ˜¯ä¸€ä¸ªå½“å‰æµç¨‹çš„å­å¤„ç†æµç¨‹ï¼› å…¶æ¬¡ï¼Œä½ è¿˜å¯ä»¥ä¸ºæ´»åŠ¨æŒ‡å®šä¸åŒçš„ç±»å‹ã€‚å¸¸è§æ´»åŠ¨å¦‚ä¸‹:</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220320103929543.png\"\n                      alt=\"image-20220320103929543\"\n                ></p>\n<h3 id=\"ç»“æ„å›¾æ ‡\"><a href=\"#ç»“æ„å›¾æ ‡\" class=\"headerlink\" title=\"ç»“æ„å›¾æ ‡\"></a>ç»“æ„å›¾æ ‡</h3><p>ç»“æ„å›¾æ ‡å¯ä»¥çœ‹åšæ˜¯æ•´ä¸ªæµç¨‹æ´»åŠ¨çš„ç»“æ„ï¼Œä¸€ä¸ªæµç¨‹ä¸­å¯ä»¥åŒ…æ‹¬å­æµç¨‹ã€‚å¸¸è§çš„ç»“æ„æœ‰ï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"C:\\Users\\dpb\\AppData\\Roaming\\Typora\\typora-user-images\\image-20220320104025737.png\"\n                      alt=\"image-20220320104025737\"\n                ></p>\n<h3 id=\"ç½‘å…³å›¾æ ‡\"><a href=\"#ç½‘å…³å›¾æ ‡\" class=\"headerlink\" title=\"ç½‘å…³å›¾æ ‡\"></a>ç½‘å…³å›¾æ ‡</h3><p>ç½‘å…³ç”¨æ¥å¤„ç†å†³ç­–ï¼Œæœ‰å‡ ç§å¸¸ç”¨ç½‘å…³éœ€è¦äº†è§£ï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220320104157816.png\"\n                      alt=\"image-20220320104157816\"\n                ></p>\n<h2 id=\"æµç¨‹éƒ¨ç½²è¯¦è§£\"><a href=\"#æµç¨‹éƒ¨ç½²è¯¦è§£\" class=\"headerlink\" title=\"æµç¨‹éƒ¨ç½²è¯¦è§£\"></a>æµç¨‹éƒ¨ç½²è¯¦è§£</h2><h3 id=\"éƒ¨ç½²å®ç°\"><a href=\"#éƒ¨ç½²å®ç°\" class=\"headerlink\" title=\"éƒ¨ç½²å®ç°\"></a>éƒ¨ç½²å®ç°</h3><p>æˆ‘ä»¬å…ˆæ¥çœ‹ä¸‹æµç¨‹éƒ¨ç½²çš„å…·ä½“è¿‡ç¨‹ã€‚ä»£ç å®ç°</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * éƒ¨ç½²æµç¨‹</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">test3</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">        <span class=\"type\">ProcessEngine</span> <span class=\"variable\">processEngine</span> <span class=\"operator\">=</span> ProcessEngines.getDefaultProcessEngine();</span><br><span class=\"line\">        <span class=\"type\">RepositoryService</span> <span class=\"variable\">repositoryService</span> <span class=\"operator\">=</span> processEngine.getRepositoryService();</span><br><span class=\"line\">        <span class=\"type\">Deployment</span> <span class=\"variable\">deploy</span> <span class=\"operator\">=</span> repositoryService.createDeployment()</span><br><span class=\"line\">                .addClasspathResource(<span class=\"string\">&quot;holiday-request-new.bpmn20.xml&quot;</span>)</span><br><span class=\"line\">                .name(<span class=\"string\">&quot;è¯·å‡æµç¨‹...&quot;</span>)</span><br><span class=\"line\">                .category(<span class=\"string\">&quot;è¯·å‡&quot;</span>) <span class=\"comment\">// åˆ†ç±»</span></span><br><span class=\"line\">                .tenantId(<span class=\"string\">&quot;dpb&quot;</span>) <span class=\"comment\">// ç§Ÿæˆ·id</span></span><br><span class=\"line\">                .deploy();</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;deploy.getId() = &quot;</span> + deploy.getId());</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;deploy.getName() = &quot;</span> + deploy.getName());</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;deploy.getCategory() = &quot;</span> + deploy.getCategory());</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"éƒ¨ç½²æ¶‰åŠè¡¨ç»“æ„\"><a href=\"#éƒ¨ç½²æ¶‰åŠè¡¨ç»“æ„\" class=\"headerlink\" title=\"éƒ¨ç½²æ¶‰åŠè¡¨ç»“æ„\"></a>éƒ¨ç½²æ¶‰åŠè¡¨ç»“æ„</h3><p>æ¶‰åŠåˆ°çš„ä¸‰å¼ è¡¨ï¼š</p>\n<p>éƒ¨ç½²èµ„æºè¡¨ï¼šact_ge_bytearray</p>\n<table>\n<thead>\n<tr>\n<th>å­—æ®µ</th>\n<th>åç§°</th>\n<th>å¤‡æ³¨</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>ID_</td>\n<td>ä¸»é”®</td>\n<td></td>\n</tr>\n<tr>\n<td>REV_</td>\n<td>ç‰ˆæœ¬å·</td>\n<td></td>\n</tr>\n<tr>\n<td>NAME_</td>\n<td>åç§°</td>\n<td>éƒ¨ç½²çš„æ–‡ä»¶åç§°ï¼Œå¦‚ï¼šholiday-request-new.bpmn20.xmlã€holiday-request-new.bpmn20.png</td>\n</tr>\n<tr>\n<td>DEPLOYMENT_ID_</td>\n<td>éƒ¨ç½²ID</td>\n<td></td>\n</tr>\n<tr>\n<td>BYTES_</td>\n<td>å­—èŠ‚ï¼ˆäºŒè¿›åˆ¶æ•°æ®ï¼‰</td>\n<td></td>\n</tr>\n<tr>\n<td>GENERATED_</td>\n<td>æ˜¯å¦ç³»ç»Ÿç”Ÿæˆ</td>\n<td>0ä¸ºç”¨æˆ·ä¸Šä¼ ï¼Œ<br/>1ä¸ºç³»ç»Ÿè‡ªåŠ¨ç”Ÿæˆï¼Œ æ¯”å¦‚ç³»ç»Ÿä¼š è‡ªåŠ¨æ ¹æ®xmlç”Ÿ æˆpng</td>\n</tr>\n</tbody></table>\n<p>éƒ¨ç½²IDè¡¨ï¼šact_re_deployment</p>\n<table>\n<thead>\n<tr>\n<th>å­—æ®µ</th>\n<th>åç§°</th>\n<th>å¤‡æ³¨</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>ID_</td>\n<td>ä¸»é”®</td>\n<td></td>\n</tr>\n<tr>\n<td>NAME_</td>\n<td>åç§°</td>\n<td></td>\n</tr>\n<tr>\n<td>CATEGORY_</td>\n<td>åˆ†ç±»</td>\n<td></td>\n</tr>\n<tr>\n<td>TENANT_ID_</td>\n<td>ç§Ÿæˆ·ID</td>\n<td></td>\n</tr>\n<tr>\n<td>DEPLOY_TIME_</td>\n<td>éƒ¨ç½²æ—¶é—´</td>\n<td></td>\n</tr>\n<tr>\n<td>DERIVED_FROM_</td>\n<td>æ¥æºäº</td>\n<td></td>\n</tr>\n<tr>\n<td>DERIVED_FROM_ROOT_</td>\n<td>æ¥æºäº</td>\n<td></td>\n</tr>\n<tr>\n<td>ENGINE_VERSION_</td>\n<td>æµç¨‹å¼•æ“çš„ç‰ˆæœ¬</td>\n<td></td>\n</tr>\n</tbody></table>\n<p>æµç¨‹è¡¨ï¼šact_re_procdef</p>\n<table>\n<thead>\n<tr>\n<th>å­—æ®µ</th>\n<th>åç§°</th>\n<th>å¤‡æ³¨</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>ID_</td>\n<td>ä¸»é”®</td>\n<td></td>\n</tr>\n<tr>\n<td>REV_</td>\n<td>ç‰ˆæœ¬å·</td>\n<td></td>\n</tr>\n<tr>\n<td>CATEGORY_</td>\n<td>åˆ†ç±»</td>\n<td>æµç¨‹å®šä¹‰çš„Namespaceå°±æ˜¯ç±»åˆ«</td>\n</tr>\n<tr>\n<td>NAME_</td>\n<td>åç§°</td>\n<td></td>\n</tr>\n<tr>\n<td>KEY_</td>\n<td>æ ‡è¯†</td>\n<td></td>\n</tr>\n<tr>\n<td>VERSION_</td>\n<td>ç‰ˆæœ¬</td>\n<td></td>\n</tr>\n<tr>\n<td>DEPLOYMENT_ID_</td>\n<td>éƒ¨ç½²ID</td>\n<td></td>\n</tr>\n<tr>\n<td>RESOURCE_NAME_</td>\n<td>èµ„æºåç§°</td>\n<td>æµç¨‹bpmnæ–‡ä»¶åç§°</td>\n</tr>\n<tr>\n<td>DGRM_RESOURCE_NAME_</td>\n<td>å›¾ç‰‡èµ„æºåç§°</td>\n<td></td>\n</tr>\n<tr>\n<td>DESCRIPTION_</td>\n<td>æè¿°</td>\n<td></td>\n</tr>\n<tr>\n<td>HAS_START_FORM_KEY_</td>\n<td>æ‹¥æœ‰å¼€å§‹è¡¨å•æ ‡è¯†</td>\n<td>startèŠ‚ç‚¹æ˜¯å¦å­˜åœ¨formKey  0å¦ 1æ˜¯</td>\n</tr>\n<tr>\n<td>HAS_GRAPHICAL_NOTATION_</td>\n<td>æ‹¥æœ‰å›¾å½¢ä¿¡æ¯</td>\n<td></td>\n</tr>\n<tr>\n<td>SUSPENSION_STATE_</td>\n<td>æŒ‚èµ·çŠ¶æ€</td>\n<td>æš‚åœçŠ¶æ€ 1æ¿€æ´» 2æš‚åœ</td>\n</tr>\n<tr>\n<td>TENANT_ID_</td>\n<td>ç§Ÿæˆ·ID</td>\n<td></td>\n</tr>\n<tr>\n<td></td>\n<td></td>\n<td></td>\n</tr>\n</tbody></table>\n<p>æ³¨æ„ï¼š</p>\n<p>ä¸šåŠ¡æµç¨‹å®šä¹‰æ•°æ®è¡¨ã€‚æ­¤è¡¨å’ŒACT_RE_DEPLOYMENTæ˜¯å¤šå¯¹ä¸€çš„å…³ç³»ï¼Œå³ï¼Œä¸€ä¸ªéƒ¨ç½²çš„baråŒ…é‡Œå¯èƒ½åŒ…å«å¤šä¸ªæµç¨‹å®šä¹‰æ–‡ä»¶ï¼Œæ¯ä¸ªæµç¨‹å®šä¹‰æ–‡ä»¶éƒ½ä¼šæœ‰ä¸€æ¡è®°å½•åœ¨ACT_REPROCDEFè¡¨å†…ï¼Œæ¯ä¸ªæµç¨‹å®šä¹‰çš„æ•°æ®ï¼Œéƒ½ä¼šå¯¹äºACT_GE_BYTEARRAYè¡¨å†…çš„ä¸€ä¸ªèµ„æºæ–‡ä»¶å’ŒPNGå›¾ç‰‡æ–‡ä»¶ã€‚å’ŒACT_GE_BYTEARRAYçš„å…³è”æ˜¯é€šè¿‡ç¨‹åºç”¨ACT_GE_BYTEARRAY.NAMEä¸ACT_RE_PROCDEF.NAME_å®Œæˆçš„</p>\n<h3 id=\"æŒ‚èµ·å’Œæ¿€æ´»\"><a href=\"#æŒ‚èµ·å’Œæ¿€æ´»\" class=\"headerlink\" title=\"æŒ‚èµ·å’Œæ¿€æ´»\"></a>æŒ‚èµ·å’Œæ¿€æ´»</h3><p>éƒ¨ç½²çš„æµç¨‹é»˜è®¤çš„çŠ¶æ€ä¸ºæ¿€æ´»ï¼Œå¦‚æœæˆ‘ä»¬æš‚æ—¶ä¸æƒ³ä½¿ç”¨è¯¥å®šä¹‰çš„æµç¨‹ï¼Œé‚£ä¹ˆå¯ä»¥æŒ‚èµ·è¯¥æµç¨‹ã€‚å½“ç„¶è¯¥æµç¨‹å®šä¹‰ä¸‹è¾¹æ‰€æœ‰çš„æµç¨‹å®ä¾‹å…¨éƒ¨æš‚åœã€‚</p>\n<p>æµç¨‹å®šä¹‰ä¸ºæŒ‚èµ·çŠ¶æ€ï¼Œè¯¥æµç¨‹å®šä¹‰å°†ä¸å…è®¸å¯åŠ¨æ–°çš„æµç¨‹å®ä¾‹ï¼ŒåŒæ—¶è¯¥æµç¨‹å®šä¹‰ä¸‹çš„æ‰€æœ‰çš„æµç¨‹å®ä¾‹éƒ½å°†å…¨éƒ¨æŒ‚èµ·æš‚åœæ‰§è¡Œã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * æŒ‚èµ·æµç¨‹</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">test05</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// è·å–æµç¨‹å¼•æ“å¯¹è±¡</span></span><br><span class=\"line\">        <span class=\"type\">ProcessEngine</span> <span class=\"variable\">processEngine</span> <span class=\"operator\">=</span> ProcessEngines.getDefaultProcessEngine();</span><br><span class=\"line\">        <span class=\"type\">RepositoryService</span> <span class=\"variable\">repositoryService</span> <span class=\"operator\">=</span> processEngine.getRepositoryService();</span><br><span class=\"line\">        <span class=\"type\">ProcessDefinition</span> <span class=\"variable\">processDefinition</span> <span class=\"operator\">=</span> repositoryService.createProcessDefinitionQuery()</span><br><span class=\"line\">                .processDefinitionId(<span class=\"string\">&quot;holiday:1:4&quot;</span>)</span><br><span class=\"line\">                .singleResult();</span><br><span class=\"line\">        <span class=\"comment\">// è·å–æµç¨‹å®šä¹‰çš„çŠ¶æ€</span></span><br><span class=\"line\">        <span class=\"type\">boolean</span> <span class=\"variable\">suspended</span> <span class=\"operator\">=</span> processDefinition.isSuspended();</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;suspended = &quot;</span> + suspended);</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(suspended)&#123;</span><br><span class=\"line\">            <span class=\"comment\">// è¡¨ç¤ºè¢«æŒ‚èµ·</span></span><br><span class=\"line\">            System.out.println(<span class=\"string\">&quot;æ¿€æ´»æµç¨‹å®šä¹‰&quot;</span>);</span><br><span class=\"line\">            repositoryService.activateProcessDefinitionById(<span class=\"string\">&quot;holiday:1:4&quot;</span>,<span class=\"literal\">true</span>,<span class=\"literal\">null</span>);</span><br><span class=\"line\">        &#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">            <span class=\"comment\">// è¡¨ç¤ºæ¿€æ´»çŠ¶æ€</span></span><br><span class=\"line\">            System.out.println(<span class=\"string\">&quot;æŒ‚èµ·æµç¨‹&quot;</span>);</span><br><span class=\"line\">            repositoryService.suspendProcessDefinitionById(<span class=\"string\">&quot;holiday:1:4&quot;</span>,<span class=\"literal\">true</span>,<span class=\"literal\">null</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n\n<p>å…·ä½“çš„å®ç°å…¶å®å°±æ˜¯æ›´æ–°äº†æµç¨‹å®šä¹‰è¡¨ä¸­çš„å­—æ®µ</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220321210010518.png\"\n                      alt=\"image-20220321210010518\"\n                ></p>\n<p>è€Œä¸”é€šè¿‡REV_å­—æ®µæ¥æ§åˆ¶æ•°æ®å®‰å…¨ï¼Œä¹Ÿæ˜¯ä¸€ç§ä¹è§‚é”çš„ä½“ç°äº†ï¼Œå¦‚æœè¦å¯åŠ¨ä¸€ä¸ªå·²ç»æŒ‚èµ·çš„æµç¨‹å°±ä¼šå‡ºç°å¦‚ä¸‹çš„é”™è¯¯</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220321211858122.png\"\n                      alt=\"image-20220321211858122\"\n                ></p>\n<h2 id=\"å¯åŠ¨æµç¨‹å®ä¾‹-1\"><a href=\"#å¯åŠ¨æµç¨‹å®ä¾‹-1\" class=\"headerlink\" title=\"å¯åŠ¨æµç¨‹å®ä¾‹\"></a>å¯åŠ¨æµç¨‹å®ä¾‹</h2><p>ç„¶åæˆ‘ä»¬æ¥çœ‹çœ‹å¯åŠ¨æµç¨‹å®ä¾‹çš„è¿‡ç¨‹ã€‚å®ç°ä»£ç å¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * å¯åŠ¨æµç¨‹å®ä¾‹</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">testRunProcess</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// è·å–æµç¨‹å¼•æ“å¯¹è±¡</span></span><br><span class=\"line\">        <span class=\"type\">ProcessEngine</span> <span class=\"variable\">processEngine</span> <span class=\"operator\">=</span> ProcessEngines.getDefaultProcessEngine();</span><br><span class=\"line\">        <span class=\"comment\">// å¯åŠ¨æµç¨‹å®ä¾‹é€šè¿‡ RuntimeService å¯¹è±¡</span></span><br><span class=\"line\">        <span class=\"type\">RuntimeService</span> <span class=\"variable\">runtimeService</span> <span class=\"operator\">=</span> processEngine.getRuntimeService();</span><br><span class=\"line\">        <span class=\"comment\">// æ„å»ºæµç¨‹å˜é‡</span></span><br><span class=\"line\">        Map&lt;String,Object&gt; variables = <span class=\"keyword\">new</span> <span class=\"title class_\">HashMap</span>&lt;&gt;();</span><br><span class=\"line\">        variables.put(<span class=\"string\">&quot;employee&quot;</span>,<span class=\"string\">&quot;å¼ ä¸‰&quot;</span>) ;<span class=\"comment\">// è°ç”³è¯·è¯·å‡</span></span><br><span class=\"line\">        variables.put(<span class=\"string\">&quot;nrOfHolidays&quot;</span>,<span class=\"number\">3</span>); <span class=\"comment\">// è¯·å‡ å¤©å‡</span></span><br><span class=\"line\">        variables.put(<span class=\"string\">&quot;description&quot;</span>,<span class=\"string\">&quot;å·¥ä½œç´¯äº†ï¼Œæƒ³å‡ºå»ç©ç©&quot;</span>); <span class=\"comment\">// è¯·å‡çš„åŸå› </span></span><br><span class=\"line\">        <span class=\"comment\">// å¯åŠ¨æµç¨‹å®ä¾‹ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æµç¨‹å®šä¹‰çš„id</span></span><br><span class=\"line\">        <span class=\"type\">ProcessInstance</span> <span class=\"variable\">processInstance</span> <span class=\"operator\">=</span> runtimeService</span><br><span class=\"line\">                .startProcessInstanceById(<span class=\"string\">&quot;holiday:1:4&quot;</span>, variables);<span class=\"comment\">// å¯åŠ¨æµç¨‹å®ä¾‹</span></span><br><span class=\"line\">        <span class=\"comment\">// è¾“å‡ºç›¸å…³çš„æµç¨‹å®ä¾‹ä¿¡æ¯</span></span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;æµç¨‹å®šä¹‰çš„IDï¼š&quot;</span> + processInstance.getProcessDefinitionId());</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;æµç¨‹å®ä¾‹çš„IDï¼š&quot;</span> + processInstance.getId());</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;å½“å‰æ´»åŠ¨çš„IDï¼š&quot;</span> + processInstance.getActivityId());</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n\n<p>å½“æˆ‘ä»¬å¯åŠ¨äº†ä¸€ä¸ªæµç¨‹å®ä¾‹åï¼Œä¼šåœ¨ACT_RU_*å¯¹åº”çš„è¡¨ç»“æ„ä¸­æ“ä½œ,è¿è¡Œæ—¶å®ä¾‹æ¶‰åŠçš„è¡¨ç»“æ„å…±10å¼ ï¼š</p>\n<ul>\n<li>ACT_RU_DEADLETTER_JOB  æ­£åœ¨è¿è¡Œçš„ä»»åŠ¡è¡¨ </li>\n<li>ACT_RU_EVENT_SUBSCR è¿è¡Œæ—¶äº‹ä»¶ </li>\n<li>ACT_RU_EXECUTION è¿è¡Œæ—¶æµç¨‹æ‰§è¡Œå®ä¾‹ </li>\n<li>ACT_RU_HISTORY_JOB  å†å²ä½œä¸šè¡¨ </li>\n<li>ACT_RU_IDENTITYLINK è¿è¡Œæ—¶ç”¨æˆ·å…³ç³»ä¿¡æ¯ </li>\n<li>ACT_RU_JOB è¿è¡Œæ—¶ä½œä¸šè¡¨ </li>\n<li>ACT_RU_SUSPENDED_JOB æš‚åœä½œä¸šè¡¨ </li>\n<li>ACT_RU_TASK  è¿è¡Œæ—¶ä»»åŠ¡è¡¨ </li>\n<li>ACT_RU_TIMER_JOB å®šæ—¶ä½œä¸šè¡¨ </li>\n<li>ACT_RU_VARIABLE  è¿è¡Œæ—¶å˜é‡è¡¨</li>\n</ul>\n<p>å¯åŠ¨ä¸€ä¸ªæµç¨‹å®ä¾‹çš„æ—¶å€™æ¶‰åŠåˆ°çš„è¡¨æœ‰</p>\n<ul>\n<li>ACT_RU_EXECUTION è¿è¡Œæ—¶æµç¨‹æ‰§è¡Œå®ä¾‹ </li>\n<li>ACT_RU_IDENTITYLINK è¿è¡Œæ—¶ç”¨æˆ·å…³ç³»ä¿¡æ¯ </li>\n<li>ACT_RU_TASK  è¿è¡Œæ—¶ä»»åŠ¡è¡¨ </li>\n<li>ACT_RU_VARIABLE  è¿è¡Œæ—¶å˜é‡è¡¨</li>\n</ul>\n<p>ACT_RU_EXECUTIONè¡¨ç»“æ„</p>\n<table>\n<thead>\n<tr>\n<th>å­—æ®µ</th>\n<th>åç§°</th>\n<th>å¤‡æ³¨</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>ID_</td>\n<td>ä¸»é”®</td>\n<td></td>\n</tr>\n<tr>\n<td>REV_</td>\n<td>ç‰ˆæœ¬å·</td>\n<td></td>\n</tr>\n<tr>\n<td>PROC_INST_ID_</td>\n<td>æµç¨‹å®ä¾‹ID</td>\n<td></td>\n</tr>\n<tr>\n<td>BUSINESS_KEY_</td>\n<td>ä¸šåŠ¡ä¸»é”®ID</td>\n<td></td>\n</tr>\n<tr>\n<td>PARENT_ID_</td>\n<td>çˆ¶æ‰§è¡Œæµçš„ID</td>\n<td></td>\n</tr>\n<tr>\n<td>PROC_DEF_ID_</td>\n<td>æµç¨‹å®šä¹‰çš„æ•°æ®ID</td>\n<td></td>\n</tr>\n<tr>\n<td>SUPER_EXEC_</td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td>ROOT_PROC_INST_ID_</td>\n<td>æµç¨‹å®ä¾‹çš„rootæµç¨‹id</td>\n<td></td>\n</tr>\n<tr>\n<td>ACT_ID_</td>\n<td>èŠ‚ç‚¹å®ä¾‹ID</td>\n<td></td>\n</tr>\n<tr>\n<td>IS_ACTIVE_</td>\n<td>æ˜¯å¦å­˜æ´»</td>\n<td></td>\n</tr>\n<tr>\n<td>IS_CONCURRENT_</td>\n<td>æ‰§è¡Œæµæ˜¯å¦æ­£åœ¨å¹¶è¡Œ</td>\n<td></td>\n</tr>\n<tr>\n<td>IS_SCOPE_</td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td>IS_EVENT_SCOPE_</td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td>IS_MI_ROOT_</td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td>SUSPENSION_STATE_</td>\n<td>æµç¨‹ç»ˆç«¯çŠ¶æ€</td>\n<td></td>\n</tr>\n<tr>\n<td>CACHED_ENT_STATE_</td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td>TENANT_ID_</td>\n<td>ç§Ÿæˆ·ç¼–å·</td>\n<td></td>\n</tr>\n<tr>\n<td>NAME_</td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td>START_TIME_</td>\n<td>å¼€å§‹æ—¶é—´</td>\n<td></td>\n</tr>\n<tr>\n<td>START_USER_ID_</td>\n<td>å¼€å§‹çš„ç”¨æˆ·ç¼–å·</td>\n<td></td>\n</tr>\n<tr>\n<td>LOCK_TIME_</td>\n<td>é”å®šæ—¶é—´</td>\n<td></td>\n</tr>\n<tr>\n<td>IS_COUNT_ENABLED_</td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td>EVT_SUBSCR_COUNT_</td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td>TASK_COUNT_</td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td>JOB_COUNT_</td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td>TIMER_JOB_COUNT_</td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td>SUSP_JOB_COUNT_</td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td>DEADLETTER_JOB_COUNT_</td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td>VAR_COUNT_</td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td>ID_LINK_COUNT_</td>\n<td></td>\n<td></td>\n</tr>\n</tbody></table>\n<p>åˆ›å»ºæµç¨‹å®ä¾‹åå¯¹åº”çš„è¡¨ç»“æ„çš„æ•°æ®</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220322133108405.png\"\n                      alt=\"image-20220322133108405\"\n                ></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220322133219534.png\"\n                      alt=\"image-20220322133219534\"\n                ></p>\n<p>ACT_RU_TASK  è¿è¡Œæ—¶ä»»åŠ¡è¡¨</p>\n<table>\n<thead>\n<tr>\n<th>å­—æ®µ</th>\n<th>åç§°</th>\n<th>å¤‡æ³¨</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>ID_</td>\n<td>ä¸»é”®</td>\n<td></td>\n</tr>\n<tr>\n<td>REV_</td>\n<td>ç‰ˆæœ¬å·</td>\n<td></td>\n</tr>\n<tr>\n<td>EXECUTION_ID_</td>\n<td>ä»»åŠ¡æ‰€åœ¨çš„æ‰§è¡ŒæµID</td>\n<td></td>\n</tr>\n<tr>\n<td>PROC_INST_ID_</td>\n<td>æµç¨‹å®ä¾‹ID</td>\n<td></td>\n</tr>\n<tr>\n<td>PROC_DEF_ID_</td>\n<td>æµç¨‹å®šä¹‰æ•°æ®ID</td>\n<td></td>\n</tr>\n<tr>\n<td>NAME_</td>\n<td>ä»»åŠ¡åç§°</td>\n<td></td>\n</tr>\n<tr>\n<td>PARENT_TASK_ID_</td>\n<td>çˆ¶ä»»åŠ¡ID</td>\n<td></td>\n</tr>\n<tr>\n<td>DESCRIPTION_</td>\n<td>è¯´æ˜</td>\n<td></td>\n</tr>\n<tr>\n<td>TASK_DEF_KEY_</td>\n<td>ä»»åŠ¡å®šä¹‰çš„IDå€¼</td>\n<td></td>\n</tr>\n<tr>\n<td>OWNER_</td>\n<td>ä»»åŠ¡æ‹¥æœ‰äºº</td>\n<td></td>\n</tr>\n<tr>\n<td>ASSIGNEE_</td>\n<td>è¢«æŒ‡æ´¾æ‰§è¡Œè¯¥ä»»åŠ¡çš„äºº</td>\n<td></td>\n</tr>\n<tr>\n<td>DELEGATION_</td>\n<td>å§”æ‰˜äºº</td>\n<td></td>\n</tr>\n<tr>\n<td>PRIORITY_</td>\n<td>ä¼˜å…ˆçº§</td>\n<td></td>\n</tr>\n<tr>\n<td>CREATE_TIME_</td>\n<td>åˆ›å»ºæ—¶é—´</td>\n<td></td>\n</tr>\n<tr>\n<td>DUE_DATE_</td>\n<td>è€—æ—¶</td>\n<td></td>\n</tr>\n<tr>\n<td>CATEGORY_</td>\n<td>ç±»åˆ«</td>\n<td></td>\n</tr>\n<tr>\n<td>SUSPENSION_STATE_</td>\n<td>æ˜¯å¦æŒ‚èµ·</td>\n<td>1ä»£è¡¨æ¿€æ´» 2ä»£è¡¨æŒ‚èµ·</td>\n</tr>\n<tr>\n<td>TENANT_ID_</td>\n<td>ç§Ÿæˆ·ç¼–å·</td>\n<td></td>\n</tr>\n<tr>\n<td>FORM_KEY_</td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td>CLAIM_TIME_</td>\n<td>æ‹¾å–æ—¶é—´</td>\n<td></td>\n</tr>\n</tbody></table>\n<p>åˆ›å»ºæµç¨‹å®ä¾‹åå¯¹åº”çš„è¡¨ç»“æ„çš„æ•°æ®</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220322133307195.png\"\n                      alt=\"image-20220322133307195\"\n                ></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220322133335326.png\"\n                      alt=\"image-20220322133335326\"\n                ></p>\n<p>ACT_RU_VARIABLE  è¿è¡Œæ—¶å˜é‡è¡¨</p>\n<table>\n<thead>\n<tr>\n<th>å­—æ®µ</th>\n<th>åç§°</th>\n<th>å¤‡æ³¨</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>ID_</td>\n<td>ä¸»é”®</td>\n<td></td>\n</tr>\n<tr>\n<td>REV_</td>\n<td>ç‰ˆæœ¬å·</td>\n<td></td>\n</tr>\n<tr>\n<td>TYPE_</td>\n<td>å‚æ•°ç±»å‹</td>\n<td>å¯ä»¥æ˜¯åŸºæœ¬çš„ç±»å‹ï¼Œä¹Ÿå¯ä»¥ç”¨æˆ·è‡ªè¡Œæ‰©å±•</td>\n</tr>\n<tr>\n<td>NAME_</td>\n<td>å‚æ•°åç§°</td>\n<td></td>\n</tr>\n<tr>\n<td>EXECUTION_ID_</td>\n<td>å‚æ•°æ‰§è¡ŒID</td>\n<td></td>\n</tr>\n<tr>\n<td>PROC_INST_ID_</td>\n<td>æµç¨‹å®ä¾‹ID</td>\n<td></td>\n</tr>\n<tr>\n<td>TASK_ID_</td>\n<td>ä»»åŠ¡ID</td>\n<td></td>\n</tr>\n<tr>\n<td>BYTEARRAY_ID_</td>\n<td>èµ„æºID</td>\n<td></td>\n</tr>\n<tr>\n<td>DOUBLE_</td>\n<td>å‚æ•°ä¸ºdoubleï¼Œåˆ™ä¿å­˜åœ¨è¯¥å­—æ®µä¸­</td>\n<td></td>\n</tr>\n<tr>\n<td>LONG_</td>\n<td>å‚æ•°ä¸ºlongï¼Œåˆ™ä¿å­˜åœ¨è¯¥å­—æ®µä¸­</td>\n<td></td>\n</tr>\n<tr>\n<td>TEXT_</td>\n<td>ç”¨æˆ·ä¿å­˜æ–‡æœ¬ç±»å‹çš„å‚æ•°å€¼</td>\n<td></td>\n</tr>\n<tr>\n<td>TEXT2_</td>\n<td>ç”¨æˆ·ä¿å­˜æ–‡æœ¬ç±»å‹çš„å‚æ•°å€¼</td>\n<td></td>\n</tr>\n</tbody></table>\n<p>åˆ›å»ºæµç¨‹å®ä¾‹åå¯¹åº”çš„è¡¨ç»“æ„çš„æ•°æ®</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220322133406398.png\"\n                      alt=\"image-20220322133406398\"\n                ></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220322133439827.png\"\n                      alt=\"image-20220322133439827\"\n                ></p>\n<p>ACT_RU_IDENTITYLINK è¿è¡Œæ—¶ç”¨æˆ·å…³ç³»ä¿¡æ¯ </p>\n<table>\n<thead>\n<tr>\n<th>å­—æ®µ</th>\n<th>åç§°</th>\n<th>å¤‡æ³¨</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>ID_</td>\n<td>ä¸»é”®</td>\n<td></td>\n</tr>\n<tr>\n<td>REV_</td>\n<td>ç‰ˆæœ¬å·</td>\n<td></td>\n</tr>\n<tr>\n<td>GROUP_ID_</td>\n<td>ç”¨æˆ·ç»„ID</td>\n<td></td>\n</tr>\n<tr>\n<td>TYPE_</td>\n<td>å…³ç³»æ•°æ®ç±»å‹</td>\n<td>assigneeæ”¯é…äºº(ç»„)ã€candidateå€™é€‰äºº(ç»„)ã€owneræ‹¥æœ‰äºº,participantå‚ä¸è€…</td>\n</tr>\n<tr>\n<td>USER_ID_</td>\n<td>ç”¨æˆ·ID</td>\n<td></td>\n</tr>\n<tr>\n<td>TASK_ID_</td>\n<td>ä»»åŠ¡ID</td>\n<td></td>\n</tr>\n<tr>\n<td>PROC_INST_ID_</td>\n<td>æµç¨‹å®šä¹‰ID</td>\n<td></td>\n</tr>\n<tr>\n<td>PROC_DEF_ID_</td>\n<td>å±æ€§ID</td>\n<td></td>\n</tr>\n</tbody></table>\n<p>åˆ›å»ºæµç¨‹å®ä¾‹åå¯¹åº”çš„è¡¨ç»“æ„çš„æ•°æ®:</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220322133501720.png\"\n                      alt=\"image-20220322133501720\"\n                ></p>\n<h2 id=\"å¤„ç†æµç¨‹\"><a href=\"#å¤„ç†æµç¨‹\" class=\"headerlink\" title=\"å¤„ç†æµç¨‹\"></a>å¤„ç†æµç¨‹</h2><p>ä¸Šé¢çš„æµç¨‹å·²ç»æµè½¬åˆ°äº†zhangsanè¿™ä¸ªç”¨æˆ·è¿™é‡Œï¼Œç„¶åå¯ä»¥å¼€å§‹å®¡æ‰¹äº†</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// è·å–æµç¨‹å¼•æ“å¯¹è±¡</span></span><br><span class=\"line\">        <span class=\"type\">ProcessEngine</span> <span class=\"variable\">processEngine</span> <span class=\"operator\">=</span> ProcessEngines.getDefaultProcessEngine();</span><br><span class=\"line\">        <span class=\"type\">TaskService</span> <span class=\"variable\">taskService</span> <span class=\"operator\">=</span> processEngine.getTaskService();</span><br><span class=\"line\">        <span class=\"type\">Task</span> <span class=\"variable\">task</span> <span class=\"operator\">=</span> taskService.createTaskQuery()</span><br><span class=\"line\">                .processDefinitionId(<span class=\"string\">&quot;holiday:1:4&quot;</span>)</span><br><span class=\"line\">                .taskAssignee(<span class=\"string\">&quot;zhangsan&quot;</span>)</span><br><span class=\"line\">                .singleResult();</span><br><span class=\"line\">        <span class=\"comment\">// æ·»åŠ æµç¨‹å˜é‡</span></span><br><span class=\"line\">        Map&lt;String,Object&gt; variables = <span class=\"keyword\">new</span> <span class=\"title class_\">HashMap</span>&lt;&gt;();</span><br><span class=\"line\">        variables.put(<span class=\"string\">&quot;approved&quot;</span>,<span class=\"literal\">false</span>); <span class=\"comment\">// æ‹’ç»è¯·å‡</span></span><br><span class=\"line\">        <span class=\"comment\">// å®Œæˆä»»åŠ¡</span></span><br><span class=\"line\">        taskService.complete(task.getId(),variables);</span><br></pre></td></tr></table></figure>\n\n<p>åœ¨æ­£å¸¸å¤„ç†æµç¨‹ä¸­æ¶‰åŠåˆ°çš„è¡¨ç»“æ„</p>\n<ul>\n<li>ACT_RU_EXECUTION è¿è¡Œæ—¶æµç¨‹æ‰§è¡Œå®ä¾‹ </li>\n<li>ACT_RU_IDENTITYLINK è¿è¡Œæ—¶ç”¨æˆ·å…³ç³»ä¿¡æ¯ </li>\n<li>ACT_RU_TASK  è¿è¡Œæ—¶ä»»åŠ¡è¡¨ </li>\n<li>ACT_RU_VARIABLE  è¿è¡Œæ—¶å˜é‡è¡¨</li>\n</ul>\n<p>ACT_RU_TASK  è¿è¡Œæ—¶ä»»åŠ¡è¡¨ :ä¼šæ–°ç”Ÿæˆä¸€æ¡è®°å½•</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220322135040119.png\"\n                      alt=\"image-20220322135040119\"\n                ></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220322135125703.png\"\n                      alt=\"image-20220322135125703\"\n                ></p>\n<p>ACT_RU_VARIABLE  è¿è¡Œæ—¶å˜é‡è¡¨:ä¼šè®°å½•æ–°çš„æµç¨‹å˜é‡</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220322135204021.png\"\n                      alt=\"image-20220322135204021\"\n                ></p>\n<p>å½“ç„¶æµç¨‹å®ä¾‹ä¹Ÿå¯ä»¥æŒ‚èµ·</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 1.è·å–ProcessEngineå¯¹è±¡</span></span><br><span class=\"line\"><span class=\"type\">ProcessEngine</span> <span class=\"variable\">engine</span> <span class=\"operator\">=</span> ProcessEngines.getDefaultProcessEngine();</span><br><span class=\"line\"><span class=\"comment\">// 2.è·å–RuntimeService</span></span><br><span class=\"line\"><span class=\"type\">RuntimeService</span> <span class=\"variable\">runtimeService</span> <span class=\"operator\">=</span> engine.getRuntimeService();</span><br><span class=\"line\"><span class=\"comment\">// 3.è·å–æµç¨‹å®ä¾‹å¯¹è±¡</span></span><br><span class=\"line\"><span class=\"type\">ProcessInstance</span> <span class=\"variable\">processInstance</span> <span class=\"operator\">=</span> runtimeService.createProcessInstanceQuery()</span><br><span class=\"line\">    .processInstanceId(<span class=\"string\">&quot;25001&quot;</span>)</span><br><span class=\"line\">    .singleResult();</span><br><span class=\"line\"><span class=\"comment\">// 4.è·å–ç›¸å…³çš„çŠ¶æ€æ“ä½œ</span></span><br><span class=\"line\"><span class=\"type\">boolean</span> <span class=\"variable\">suspended</span> <span class=\"operator\">=</span> processInstance.isSuspended();</span><br><span class=\"line\"><span class=\"type\">String</span> <span class=\"variable\">id</span> <span class=\"operator\">=</span> processInstance.getId();</span><br><span class=\"line\"><span class=\"keyword\">if</span>(suspended)&#123;</span><br><span class=\"line\">    <span class=\"comment\">// æŒ‚èµ·--ã€‹æ¿€æ´»</span></span><br><span class=\"line\">    runtimeService.activateProcessInstanceById(id);</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;æµç¨‹å®šä¹‰ï¼š&quot;</span> + id + <span class=\"string\">&quot;ï¼Œå·²æ¿€æ´»&quot;</span>);</span><br><span class=\"line\">&#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// æ¿€æ´»--ã€‹æŒ‚èµ·</span></span><br><span class=\"line\">    runtimeService.suspendProcessInstanceById(id);</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;æµç¨‹å®šä¹‰ï¼š&quot;</span> + id + <span class=\"string\">&quot;ï¼Œå·²æŒ‚èµ·&quot;</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<p>å¯åŠ¨ç¬¬äºŒä¸ªæµç¨‹å®ä¾‹åå†æŸ¥çœ‹ç›¸å…³çš„è¡¨ç»“æ„æ—¶ï¼Œå¯¹ä»–ä»¬çš„å…³ç³»ç†è§£ä¼šæ›´åŠ çš„æ¸…æ¥šä¸€äº›</p>\n<p>å¯åŠ¨ä¸€ä¸ªæ–°çš„æµç¨‹å®ä¾‹å¯¹åº”çš„å°±ä¼šäº§ç”Ÿä¸¤æ¡è®°å½•</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220322135605252.png\"\n                      alt=\"image-20220322135605252\"\n                ></p>\n<p>IDENTITYLINKä¸­ä¼šè®°å½•æ¯æ¬¡æµç¨‹æ“ä½œçš„ä¿¡æ¯</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220322135636841.png\"\n                      alt=\"image-20220322135636841\"\n                ></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220322135659671.png\"\n                      alt=\"image-20220322135659671\"\n                ></p>\n<p>æµç¨‹å˜é‡æ•°æ®ï¼ŒåŠæ—¶key ç›¸åŒï¼Œä½†æ˜¯å±äºä¸åŒçš„æµç¨‹å®ä¾‹ç›¸äº’é—´ä¹Ÿæ˜¯éš”ç¦»çš„</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220322135719104.png\"\n                      alt=\"image-20220322135719104\"\n                ></p>\n<h2 id=\"å®Œæˆä¸€ä¸ªæµç¨‹\"><a href=\"#å®Œæˆä¸€ä¸ªæµç¨‹\" class=\"headerlink\" title=\"å®Œæˆä¸€ä¸ªæµç¨‹\"></a>å®Œæˆä¸€ä¸ªæµç¨‹</h2><p>ç„¶åæˆ‘ä»¬æŠŠç¬¬ä¸€ä¸ªæµç¨‹å¤„ç†å®Œæˆ</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">ProcessEngine</span> <span class=\"variable\">processEngine</span> <span class=\"operator\">=</span> cfg.buildProcessEngine();</span><br><span class=\"line\"><span class=\"type\">TaskService</span> <span class=\"variable\">taskService</span> <span class=\"operator\">=</span> processEngine.getTaskService();</span><br><span class=\"line\"><span class=\"type\">Task</span> <span class=\"variable\">task</span> <span class=\"operator\">=</span> taskService.createTaskQuery()</span><br><span class=\"line\">    .processDefinitionId(<span class=\"string\">&quot;holiday:1:4&quot;</span>)</span><br><span class=\"line\">    .taskAssignee(<span class=\"string\">&quot;lisi&quot;</span>)</span><br><span class=\"line\">    .singleResult();</span><br><span class=\"line\"><span class=\"comment\">// æ·»åŠ æµç¨‹å˜é‡</span></span><br><span class=\"line\">Map&lt;String,Object&gt; variables = <span class=\"keyword\">new</span> <span class=\"title class_\">HashMap</span>&lt;&gt;();</span><br><span class=\"line\">variables.put(<span class=\"string\">&quot;approved&quot;</span>,<span class=\"literal\">false</span>); <span class=\"comment\">// æ‹’ç»è¯·å‡</span></span><br><span class=\"line\"><span class=\"comment\">// å®Œæˆä»»åŠ¡</span></span><br><span class=\"line\">taskService.complete(task.getId(),variables);</span><br></pre></td></tr></table></figure>\n\n<p>å¤„ç†å®Œäº†ä¸€ä¸ªå·¥ä½œæµç¨‹åï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹ç›¸å…³çš„è¡¨ç»“æ„ä¿¡æ¯</p>\n<p>é¦–å…ˆæˆ‘ä»¬ä¼šå‘ç°</p>\n<ul>\n<li>ACT_RU_EXECUTION è¿è¡Œæ—¶æµç¨‹æ‰§è¡Œå®ä¾‹ </li>\n<li>ACT_RU_IDENTITYLINK è¿è¡Œæ—¶ç”¨æˆ·å…³ç³»ä¿¡æ¯ </li>\n<li>ACT_RU_TASK  è¿è¡Œæ—¶ä»»åŠ¡è¡¨ </li>\n<li>ACT_RU_VARIABLE  è¿è¡Œæ—¶å˜é‡è¡¨</li>\n</ul>\n<p>è¿™å››å¼ è¡¨ä¸­å¯¹åº”çš„æ•°æ®éƒ½æ²¡æœ‰äº†ï¼Œä¹Ÿå°±æ˜¯è¿™ä¸ªæµç¨‹å·²ç»ä¸æ˜¯è¿è¡Œä¸­çš„æµç¨‹äº†ã€‚ç„¶ååœ¨å¯¹åº”çš„å†å²è¡¨ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ç›¸å…³çš„ä¿¡æ¯</p>\n<ul>\n<li><p>ACT_HI_ACTINST  å†å²çš„æµç¨‹å®ä¾‹</p>\n</li>\n<li><p>ACT_HI_ATTACHMENT å†å²çš„æµç¨‹é™„ä»¶</p>\n</li>\n<li><p>ACT_HI_COMMENT  å†å²çš„è¯´æ˜æ€§ä¿¡æ¯</p>\n</li>\n<li><p>ACT_HI_DETAIL å†å²çš„æµç¨‹è¿è¡Œä¸­çš„ç»†èŠ‚ä¿¡æ¯</p>\n</li>\n<li><p>ACT_HI_IDENTITYLINK å†å²çš„æµç¨‹è¿è¡Œè¿‡ç¨‹ä¸­ç”¨æˆ·å…³ç³»</p>\n</li>\n<li><p>ACT_HI_PROCINST  å†å²çš„æµç¨‹å®ä¾‹</p>\n</li>\n<li><p>ACT_HI_TASKINST  å†å²çš„ä»»åŠ¡å®ä¾‹</p>\n</li>\n<li><p>ACT_HI_VARINST  å†å²çš„æµç¨‹è¿è¡Œä¸­çš„å˜é‡ä¿¡æ¯</p>\n</li>\n</ul>\n<p>åœ¨æˆ‘ä»¬ä¸Šé¢çš„å¤„ç†æµç¨‹çš„è¿‡ç¨‹ä¸­è®¾è®¡åˆ°çš„å†å²è¡¨æœ‰</p>\n<p>ACT_HI_ACTINST  å†å²çš„æµç¨‹å®ä¾‹</p>\n<table>\n<thead>\n<tr>\n<th>å­—æ®µ</th>\n<th>åç§°</th>\n<th>å¤‡æ³¨</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>ID_</td>\n<td>ä¸»é”®</td>\n<td></td>\n</tr>\n<tr>\n<td>PROC_DEF_ID_</td>\n<td>æµç¨‹å®šä¹‰ID</td>\n<td></td>\n</tr>\n<tr>\n<td>PROC_INST_ID_</td>\n<td>æµç¨‹å®ä¾‹ID</td>\n<td></td>\n</tr>\n<tr>\n<td>EXECUTION_ID_</td>\n<td>æ‰§è¡ŒID</td>\n<td></td>\n</tr>\n<tr>\n<td>ACT_ID_</td>\n<td>èŠ‚ç‚¹å®ä¾‹ID</td>\n<td></td>\n</tr>\n<tr>\n<td>TASK_ID_</td>\n<td>ä»»åŠ¡ID</td>\n<td></td>\n</tr>\n<tr>\n<td>CALL_PROC_INST_ID_</td>\n<td>è°ƒç”¨å¤–éƒ¨çš„æµç¨‹å®ä¾‹ID</td>\n<td></td>\n</tr>\n<tr>\n<td>ACT_NAME_</td>\n<td>èŠ‚ç‚¹åç§°</td>\n<td></td>\n</tr>\n<tr>\n<td>ACT_TYPE_</td>\n<td>èŠ‚ç‚¹ç±»å‹</td>\n<td></td>\n</tr>\n<tr>\n<td>ASSIGNEE_</td>\n<td>å¤„ç†äºº</td>\n<td></td>\n</tr>\n<tr>\n<td>START_TIME_</td>\n<td>å¼€å§‹æ—¶é—´</td>\n<td></td>\n</tr>\n<tr>\n<td>END_TIME_</td>\n<td>ç»“æŸæ—¶é—´</td>\n<td></td>\n</tr>\n<tr>\n<td>DURATION_</td>\n<td>è€—æ—¶</td>\n<td></td>\n</tr>\n<tr>\n<td>DELETE_REASON_</td>\n<td>åˆ é™¤åŸå› </td>\n<td></td>\n</tr>\n<tr>\n<td>TENANT_ID_</td>\n<td>ç§Ÿæˆ·ç¼–å·</td>\n<td></td>\n</tr>\n</tbody></table>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220322141800554.png\"\n                      alt=\"image-20220322141800554\"\n                ></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220322141825065.png\"\n                      alt=\"image-20220322141825065\"\n                ></p>\n<p>ACT_HI_IDENTITYLINK å†å²çš„æµç¨‹è¿è¡Œè¿‡ç¨‹ä¸­ç”¨æˆ·å…³ç³»</p>\n<table>\n<thead>\n<tr>\n<th>å­—æ®µ</th>\n<th>åç§°</th>\n<th>å¤‡æ³¨</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>ID_</td>\n<td>ä¸»é”®</td>\n<td></td>\n</tr>\n<tr>\n<td>GROUP_ID_</td>\n<td>ç»„ç¼–å·</td>\n<td></td>\n</tr>\n<tr>\n<td>TYPE_</td>\n<td>ç±»å‹</td>\n<td></td>\n</tr>\n<tr>\n<td>USER_ID_</td>\n<td>ç”¨æˆ·ç¼–å·</td>\n<td></td>\n</tr>\n<tr>\n<td>TASK_ID_</td>\n<td>ä»»åŠ¡ç¼–å·</td>\n<td></td>\n</tr>\n<tr>\n<td>CREATE_TIME_</td>\n<td>åˆ›å»ºæ—¶é—´</td>\n<td></td>\n</tr>\n<tr>\n<td>PROC_INST_ID_</td>\n<td>æµç¨‹å®ä¾‹ç¼–å·</td>\n<td></td>\n</tr>\n<tr>\n<td>SCOPE_ID_</td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td>SCOPE_TYPE_</td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td>SCOPE_DEFINITION_ID_</td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td></td>\n<td></td>\n<td></td>\n</tr>\n</tbody></table>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220322141717826.png\"\n                      alt=\"image-20220322141717826\"\n                ></p>\n<p>ACT_HI_PROCINST  å†å²çš„æµç¨‹å®ä¾‹</p>\n<table>\n<thead>\n<tr>\n<th>å­—æ®µ</th>\n<th>åç§°</th>\n<th>å¤‡æ³¨</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>ID_</td>\n<td>ä¸»é”®</td>\n<td></td>\n</tr>\n<tr>\n<td>PROC_INST_ID_</td>\n<td>æµç¨‹å®ä¾‹ID</td>\n<td></td>\n</tr>\n<tr>\n<td>BUSINESS_KEY_</td>\n<td>ä¸šåŠ¡ä¸»é”®</td>\n<td></td>\n</tr>\n<tr>\n<td>PROC_DEF_ID_</td>\n<td>å±æ€§ID</td>\n<td></td>\n</tr>\n<tr>\n<td>START_TIME_</td>\n<td>å¼€å§‹æ—¶é—´</td>\n<td></td>\n</tr>\n<tr>\n<td>END_TIME_</td>\n<td>ç»“æŸæ—¶é—´</td>\n<td></td>\n</tr>\n<tr>\n<td>DURATION_</td>\n<td>è€—æ—¶</td>\n<td></td>\n</tr>\n<tr>\n<td>START_USER_ID_</td>\n<td>èµ·å§‹äºº</td>\n<td></td>\n</tr>\n<tr>\n<td>START_ACT_ID_</td>\n<td>èµ·å§‹èŠ‚ç‚¹</td>\n<td></td>\n</tr>\n<tr>\n<td>END_ACT_ID_</td>\n<td>ç»“æŸèŠ‚ç‚¹</td>\n<td></td>\n</tr>\n<tr>\n<td>SUPER_PROCESS_INSTANCE_ID_</td>\n<td>çˆ¶æµç¨‹å®ä¾‹ID</td>\n<td></td>\n</tr>\n<tr>\n<td>DELETE_REASON_</td>\n<td>åˆ é™¤åŸå› </td>\n<td></td>\n</tr>\n<tr>\n<td>TENANT_ID_</td>\n<td>ç§Ÿæˆ·ç¼–å·</td>\n<td></td>\n</tr>\n<tr>\n<td>NAME_</td>\n<td>åç§°</td>\n<td></td>\n</tr>\n</tbody></table>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220322141855401.png\"\n                      alt=\"image-20220322141855401\"\n                ></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220322141912602.png\"\n                      alt=\"image-20220322141912602\"\n                ></p>\n<p>ACT_HI_TASKINST  å†å²çš„ä»»åŠ¡å®ä¾‹</p>\n<table>\n<thead>\n<tr>\n<th>å­—æ®µ</th>\n<th>åç§°</th>\n<th>å¤‡æ³¨</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>ID_</td>\n<td>ä¸»é”®</td>\n<td></td>\n</tr>\n<tr>\n<td>PROC_DEF_ID_</td>\n<td>æµç¨‹å®šä¹‰ID</td>\n<td></td>\n</tr>\n<tr>\n<td>TASK_DEF_KEY_</td>\n<td>ä»»åŠ¡å®šä¹‰çš„IDå€¼</td>\n<td></td>\n</tr>\n<tr>\n<td>PROC_INST_ID_</td>\n<td>æµç¨‹å®ä¾‹ID</td>\n<td></td>\n</tr>\n<tr>\n<td>EXECUTION_ID_</td>\n<td>æ‰§è¡ŒID</td>\n<td></td>\n</tr>\n<tr>\n<td>PARENT_TASK_ID_</td>\n<td>çˆ¶ä»»åŠ¡ID</td>\n<td></td>\n</tr>\n<tr>\n<td>NAME_</td>\n<td>åç§°</td>\n<td></td>\n</tr>\n<tr>\n<td>DESCRIPTION_</td>\n<td>è¯´æ˜</td>\n<td></td>\n</tr>\n<tr>\n<td>OWNER_</td>\n<td>å®é™…ç­¾æ”¶äºº ä»»åŠ¡çš„æ‹¥æœ‰è€…</td>\n<td>ç­¾æ”¶äººï¼ˆé»˜è®¤ä¸ºç©ºï¼Œåªæœ‰åœ¨å§”æ‰˜æ—¶æ‰æœ‰å€¼ï¼‰</td>\n</tr>\n<tr>\n<td>ASSIGNEE_</td>\n<td>è¢«æŒ‡æ´¾æ‰§è¡Œè¯¥ä»»åŠ¡çš„äºº</td>\n<td></td>\n</tr>\n<tr>\n<td>START_TIME_</td>\n<td>å¼€å§‹æ—¶é—´</td>\n<td></td>\n</tr>\n<tr>\n<td>CLAIM_TIME_</td>\n<td>ä»»åŠ¡æ‹¾å–æ—¶é—´</td>\n<td></td>\n</tr>\n<tr>\n<td>END_TIME_</td>\n<td>ç»“æŸæ—¶é—´</td>\n<td></td>\n</tr>\n<tr>\n<td>DURATION_</td>\n<td>è€—æ—¶</td>\n<td></td>\n</tr>\n<tr>\n<td>DELETE_REASON_</td>\n<td>åˆ é™¤åŸå› </td>\n<td></td>\n</tr>\n<tr>\n<td>PRIORITY_</td>\n<td>ä¼˜å…ˆçº§åˆ«</td>\n<td></td>\n</tr>\n<tr>\n<td>DUE_DATE_</td>\n<td>è¿‡æœŸæ—¶é—´</td>\n<td></td>\n</tr>\n<tr>\n<td>FORM_KEY_</td>\n<td>èŠ‚ç‚¹å®šä¹‰çš„formkey</td>\n<td></td>\n</tr>\n<tr>\n<td>CATEGORY_</td>\n<td>ç±»åˆ«</td>\n<td></td>\n</tr>\n<tr>\n<td>TENANT_ID_</td>\n<td>ç§Ÿæˆ·</td>\n<td></td>\n</tr>\n</tbody></table>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220322142609163.png\"\n                      alt=\"image-20220322142609163\"\n                ></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220322142650699.png\"\n                      alt=\"image-20220322142650699\"\n                ></p>\n<p>ACT_HI_VARINST  å†å²çš„æµç¨‹è¿è¡Œä¸­çš„å˜é‡ä¿¡æ¯ï¼šæµç¨‹å˜é‡è™½ç„¶åœ¨ä»»åŠ¡å®Œæˆååœ¨æµç¨‹å®ä¾‹è¡¨ä¸­ä¼šåˆ é™¤ï¼Œä½†æ˜¯åœ¨å†å²è¡¨ä¸­è¿˜æ˜¯ä¼šè®°å½•çš„</p>\n<table>\n<thead>\n<tr>\n<th>å­—æ®µ</th>\n<th>åç§°</th>\n<th>å¤‡æ³¨</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>ID_</td>\n<td>ä¸»é”®</td>\n<td></td>\n</tr>\n<tr>\n<td>PROC_INST_ID_</td>\n<td>æµç¨‹å®ä¾‹ID</td>\n<td></td>\n</tr>\n<tr>\n<td>EXECUTION_ID_</td>\n<td>æŒ‡å®šID</td>\n<td></td>\n</tr>\n<tr>\n<td>TASK_ID_</td>\n<td>ä»»åŠ¡ID</td>\n<td></td>\n</tr>\n<tr>\n<td>NAME_</td>\n<td>åç§°</td>\n<td></td>\n</tr>\n<tr>\n<td>VAR_TYPE_</td>\n<td>å‚æ•°ç±»å‹</td>\n<td></td>\n</tr>\n<tr>\n<td>REV_</td>\n<td>æ•°æ®ç‰ˆæœ¬</td>\n<td></td>\n</tr>\n<tr>\n<td>BYTEARRAY_ID_</td>\n<td>å­—èŠ‚è¡¨ID</td>\n<td></td>\n</tr>\n<tr>\n<td>DOUBLE_</td>\n<td>å­˜å‚¨doubleç±»å‹æ•°æ®</td>\n<td></td>\n</tr>\n<tr>\n<td>LONG_</td>\n<td>å­˜å‚¨longç±»å‹æ•°æ®</td>\n<td></td>\n</tr>\n<tr>\n<td>â€¦..</td>\n<td></td>\n<td></td>\n</tr>\n</tbody></table>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220322142756867.png\"\n                      alt=\"image-20220322142756867\"\n                ></p>\n<p>å¥½äº†ä¸€ä¸ªç›¸å¯¹ç®€å•çš„æµç¨‹å¤„ç†æ¶‰åŠåˆ°çš„ç›¸å…³è¡¨ç»“æ„å†…å®¹å°±ä»‹ç»å®Œäº†</p>\n"},{"title":"flowableè¿›é˜¶ç¯‡","date":"2022-10-19T15:43:58.000Z","_content":"# Flowableè¿›é˜¶ç¯‡\n> Lectureï¼šæ³¢æ³¢è€å¸ˆ\n\n\n\n# å¤šäººä¼šç­¾\n\n## æµç¨‹å›¾ç»˜åˆ¶\n\nå¤šäººä¼šç­¾æ˜¯æŒ‡ä¸€ä¸ªä»»åŠ¡éœ€è¦å¤šä¸ªäººæ¥å¤„ç†ï¼Œæ¡ˆä¾‹è®²è§£\n\n![image-20220402092950976](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220402092950976.png)\n\nå®Œæ•´çš„xmlå†…å®¹\n\n```xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<definitions xmlns=\"http://www.omg.org/spec/BPMN/20100524/MODEL\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:activiti=\"http://activiti.org/bpmn\" xmlns:bpmndi=\"http://www.omg.org/spec/BPMN/20100524/DI\" xmlns:omgdc=\"http://www.omg.org/spec/DD/20100524/DC\" xmlns:omgdi=\"http://www.omg.org/spec/DD/20100524/DI\" typeLanguage=\"http://www.w3.org/2001/XMLSchema\" expressionLanguage=\"http://www.w3.org/1999/XPath\" targetNamespace=\"http://www.activiti.org/test\">\n    <process id=\"myProcess\" name=\"My process\" isExecutable=\"true\">\n        <startEvent id=\"startevent1\" name=\"Start\"></startEvent>\n        <userTask id=\"usertask1\" name=\"User Task\">\n            <extensionElements>\n                <activiti:taskListener event=\"create\" expression=\"${mulitiInstanceTaskListener.completeListener(execution)}\"></activiti:taskListener>\n            </extensionElements>\n            <multiInstanceLoopCharacteristics isSequential=\"false\" activiti:collection=\"persons\" activiti:elementVariable=\"person\">\n                <loopCardinality>3</loopCardinality>\n                <completionCondition>${mulitiInstanceCompleteTask.completeTask(execution)}</completionCondition>\n            </multiInstanceLoopCharacteristics>\n        </userTask>\n        <sequenceFlow id=\"flow1\" sourceRef=\"startevent1\" targetRef=\"usertask1\"></sequenceFlow>\n        <endEvent id=\"endevent1\" name=\"End\"></endEvent>\n        <sequenceFlow id=\"flow2\" sourceRef=\"usertask1\" targetRef=\"endevent1\"></sequenceFlow>\n    </process>\n    <bpmndi:BPMNDiagram id=\"BPMNDiagram_myProcess\">\n        <bpmndi:BPMNPlane bpmnElement=\"myProcess\" id=\"BPMNPlane_myProcess\">\n            <bpmndi:BPMNShape bpmnElement=\"startevent1\" id=\"BPMNShape_startevent1\">\n                <omgdc:Bounds height=\"35.0\" width=\"35.0\" x=\"420.0\" y=\"310.0\"></omgdc:Bounds>\n            </bpmndi:BPMNShape>\n            <bpmndi:BPMNShape bpmnElement=\"usertask1\" id=\"BPMNShape_usertask1\">\n                <omgdc:Bounds height=\"55.0\" width=\"105.0\" x=\"700.0\" y=\"300.0\"></omgdc:Bounds>\n            </bpmndi:BPMNShape>\n            <bpmndi:BPMNShape bpmnElement=\"endevent1\" id=\"BPMNShape_endevent1\">\n                <omgdc:Bounds height=\"35.0\" width=\"35.0\" x=\"950.0\" y=\"310.0\"></omgdc:Bounds>\n            </bpmndi:BPMNShape>\n            <bpmndi:BPMNEdge bpmnElement=\"flow1\" id=\"BPMNEdge_flow1\">\n                <omgdi:waypoint x=\"455.0\" y=\"327.0\"></omgdi:waypoint>\n                <omgdi:waypoint x=\"700.0\" y=\"327.0\"></omgdi:waypoint>\n            </bpmndi:BPMNEdge>\n            <bpmndi:BPMNEdge bpmnElement=\"flow2\" id=\"BPMNEdge_flow2\">\n                <omgdi:waypoint x=\"805.0\" y=\"327.0\"></omgdi:waypoint>\n                <omgdi:waypoint x=\"950.0\" y=\"327.0\"></omgdi:waypoint>\n            </bpmndi:BPMNEdge>\n        </bpmndi:BPMNPlane>\n    </bpmndi:BPMNDiagram>\n</definitions>\n```\n\n## æµç¨‹è¯´æ˜\n\n1.åœ¨ç”¨æˆ·ä»»åŠ¡èŠ‚ç‚¹ç»‘å®šäº†ä¸€ä¸ªç›‘å¬å™¨ï¼Œç›‘å¬`create`è¡Œä¸ºï¼Œè¯¥ç›‘å¬å™¨æˆ‘ä»¬æ˜¯é€šè¿‡UELè¡¨è¾¾å¼æ¥å®ç°çš„ï¼Œ`mulitiInstanceTaskListener`æ˜¯æˆ‘ä»¬æ³¨å…¥åˆ°Springå®¹å™¨ä¸­çš„å¯¹è±¡\n\n![image-20220402095348908](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220402095348908.png)\n\nå¯¹åº”çš„ç›‘å¬çš„ä»£ç å¦‚ä¸‹ï¼š\n\n```java\n@Component(\"mulitiInstanceTaskListener\")\npublic class MulitiInstanceTaskListener implements Serializable {\n    \n    public void completeListener(DelegateExecution execution){\n        System.out.println(\"ä»»åŠ¡ï¼š\"+execution.getId());\n        System.out.println(\"persons:\" + execution.getVariable(\"persons\"));\n        System.out.println(\"person\" + execution.getVariable(\"person\"));\n    }\n}\n```\n\n2.åœ¨Multi instanceä¸­çš„é…ç½®\n\n* Loop cardinality:è®¾ç½®ä¸º3è¡¨ç¤ºåªå¾ªç¯3æ¬¡ï¼Œä¹Ÿå°±æ˜¯ä¸‰ä¸ªäººä¼šç­¾\n* Collectionï¼šè¡¨ç¤ºè¦å¾ªç¯çš„é›†åˆï¼Œæˆ‘ä»¬ç»™çš„æ˜¯personsï¼Œåé¢éœ€è¦åœ¨æµç¨‹å˜é‡ä¸­èµ‹å€¼\n* Element variableï¼šè¡¨ç¤ºå¾ªç¯çš„å˜é‡\n* Completion conditionï¼šè¡¨ç¤ºä»»åŠ¡ç»“æŸçš„æ¡ä»¶ï¼Œä¹Ÿå°±æ˜¯å¤šäººä¼šç­¾çš„ç»“æŸæ¡ä»¶ï¼Œåœ¨æ­¤å¤„æˆ‘ä»¬ç”¨çš„æ˜¯UELè¡¨è¾¾å¼ï¼Œ`mulitiInstanceCompleteTask`è¡¨ç¤ºçš„æ˜¯æˆ‘ä»¬æ³¨å…¥åˆ°Springå®¹å™¨ä¸­çš„å¯¹è±¡\n\n![image-20220402100649924](C:\\Users\\dpb\\AppData\\Roaming\\Typora\\typora-user-images\\image-20220402100649924.png)\n\n\n\n`mulitiInstanceCompleteTask`å¯¹è±¡çš„å®Œæ•´ä»£ç ä¸ºï¼š\n\n```java\n@Component(\"mulitiInstanceCompleteTask\")\npublic class MulitiInstanceCompleteTask implements Serializable {\n    /**\n     * å®Œæˆä»»åŠ¡æ˜¯éœ€è¦è§¦å‘çš„æ–¹æ³•\n     * @param execution\n     * @return\n     *     false è¡¨ç¤ºä¼šç­¾ä»»åŠ¡è¿˜æ²¡æœ‰ç»“æŸ\n     \n     *     true è¡¨ç¤ºä¼šç­¾ä»»åŠ¡ç»“æŸäº†\n     */\n    public boolean completeTask(DelegateExecution execution) {\n        System.out.println(\"æ€»çš„ä¼šç­¾ä»»åŠ¡æ•°é‡ï¼š\" + execution.getVariable(\"nrOfInstances\")\n                + \"å½“å‰è·å–çš„ä¼šç­¾ä»»åŠ¡æ•°é‡ï¼š\" + execution.getVariable(\"nrOfActiveInstances\")\n                + \" - \" + \"å·²ç»å®Œæˆçš„ä¼šç­¾ä»»åŠ¡æ•°é‡ï¼š\" + execution.getVariable(\"nrOfCompletedInstances\"));\n        //æœ‰ä¸€ä¸ªäººåŒæ„å°±é€šè¿‡\n        Boolean flag = (Boolean) execution.getVariable(\"flag\");\n        System.out.println(\"å½“å‰æ„è§ï¼š\"+flag);\n        return flag;\n    }\n}\n```\n\nä¸Šé¢çš„ä¸‰ä¸ªå˜é‡æ˜¯Flowableä¸­è‡ªå¸¦çš„å¯ç”¨å˜é‡\n\n1. nrOfInstances:è¯¥ä¼šç­¾ç¯èŠ‚ä¸­æ€»å…±æœ‰å¤šå°‘ä¸ªå®ä¾‹\n\n2. nrOfActiveInstances:å½“å‰æ´»åŠ¨çš„å®ä¾‹çš„æ•°é‡ï¼Œå³è¿˜æ²¡æœ‰å®Œæˆçš„å®ä¾‹æ•°é‡ã€‚\n\n3. nrOfCompletedInstances:å·²ç»å®Œæˆçš„å®ä¾‹çš„æ•°é‡\n\n\n\n## æ¡ˆä¾‹æ¼”ç¤º\n\n### éƒ¨ç½²æµç¨‹\n\n```java\n    /**\n     * Deploy\n     */\n    @Test\n    void testDeploy() throws Exception {\n        Deployment deploy = repositoryService.createDeployment()\n                .addClasspathResource(\"ä¼šç­¾æ¡ˆä¾‹.bpmn20.xml\")\n                .name(\"ä¼šç­¾æ¡ˆä¾‹\")\n                .deploy();\n        System.out.println(\"deploy.getId() = \" + deploy.getId());\n        System.out.println(\"deploy.getName() = \" + deploy.getName());\n        System.out.println(\"éƒ¨ç½²å¼€å§‹çš„æ—¶é—´ï¼š\" + new Date());\n        //TimeUnit.MINUTES.sleep(3);\n    }\n```\n\n### å¯åŠ¨æµç¨‹\n\nåœ¨å¯åŠ¨æµç¨‹å®ä¾‹çš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦è®¾ç½®ç›¸å…³çš„å‚æ•°ï¼Œåœ¨æµç¨‹å®šä¹‰çš„æ—¶å€™è®¾ç½®çš„personsåœ¨æ­¤å¤„æˆ‘ä»¬å°±éœ€è¦è®¾ç½®äº†ï¼Œè®¾ç½®ä¸ºArrays.asList(\"å¼ ä¸‰\",\"æå››\",\"ç‹äº”\",\"èµµå…­\")ï¼Œè¿™é‡Œè®¾ç½®äº†4ä¸ªå…ƒç´ ï¼Œåœ¨æµç¨‹å®šä¹‰é‡Œå®šä¹‰äº†3ä¸ªï¼Œè¡¨ç¤ºåªä¼šå¾ªç¯3æ¬¡ï¼Œå¯åŠ¨æµç¨‹åï¼Œåœ¨Taskä¸­å¯ä»¥çœ‹åˆ°åªæœ‰3ä¸ªä»»åŠ¡\n\n```java\n    @Test\n    void startFlow() throws Exception{\n        Map<String,Object> map = new HashMap<>();\n        // è®¾ç½®å¤šäººä¼šç­¾çš„æ•°æ®\n        map.put(\"persons\", Arrays.asList(\"å¼ ä¸‰\",\"æå››\",\"ç‹äº”\",\"èµµå…­\"));\n        ProcessInstance processInstance = runtimeService\n                .startProcessInstanceById(\"myProcess:1:ba1518fc-b22d-11ec-9313-c03c59ad2248\",map);\n    }\n```\n\n![image-20220402104240267](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220402104240267.png)\n\n\n\nåŒæ—¶æ§åˆ¶ä¹Ÿæœ‰å¯¹åº”çš„è¾“å‡ºï¼Œè§¦å‘äº†Taskçš„åˆ›å»ºäº‹ä»¶\n\n![image-20220402104319944](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220402104319944.png)\n\n\n\n### ä¼šç­¾å¤„ç†ä»»åŠ¡\n\nå¯åŠ¨æµç¨‹åæˆ‘ä»¬å‘ä¸‹åœ¨Taskä¸­äº§ç”Ÿäº†3æ¡ä»»åŠ¡ï¼Œæˆ‘ä»¬å…ˆé€šè¿‡TaskServiceæ¥å®Œæˆå…¶ä¸­ä¸€ä¸ªä»»åŠ¡ï¼Œè®¾ç½®ä¸€ä¸ªæ ‡å¿—flagä¸ºfalseï¼Œæ¥æ§åˆ¶ä¼šç­¾è¿˜æ²¡æœ‰ç»“æŸï¼ŒåŒæ—¶Taskä¸­å¦å¤–ä¸¤ä¸ªä»»åŠ¡è¿˜åœ¨\n\n```java \n    @Test\n    void completeTask1(){\n        Map<String,Object> map = new HashMap<>();\n        map.put(\"flag\",false);\n        taskService.complete(\"71337501-b22e-11ec-a534-c03c59ad2248\",map);\n        System.out.println(\"complete ....\");\n    }\n```\n\n![image-20220402104554823](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220402104554823.png)\n\nå½“ä»»åŠ¡æ‰§è¡Œå®Œæˆæ—¶ä¼šåŒæ­¥è§¦å‘ä¼šç­¾å®Œæˆè¡¨è¾¾å¼ä¸­å¯¹è±¡æ–¹æ³•ã€‚æœ‰å¦‚ä¸‹çš„è¾“å‡º\n\n![image-20220402104729627](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220402104729627.png)\n\nåŒæ—¶Taskè¡¨ä¸­çš„è®°å½•è¿˜æœ‰ä¸¤æ¡\n\n![image-20220402104819239](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220402104819239.png)\n\nç„¶åå½“æˆ‘ä»¬åœ¨å®Œæˆä¸€ä¸ªä»»åŠ¡ï¼Œè¿™æ—¶è®¾ç½®flagä¸ºtrueï¼Œä¼šå‘ç°åœ¨è¿™ä¸ªå¤šäººå¤„ç†ä¸­ï¼Œæœ€å¤š3ä¸ªäººå¤„ç†åœ¨ç¬¬äºŒä¸ªäººå¤„ç†åå°±ç»“æŸäº†\n\n```java\n    @Test\n    void completeTask1(){\n        Map<String,Object> map = new HashMap<>();\n        map.put(\"flag\",true); // è®¾ç½®ä¸ºtrue ç»“æŸå¤šäººä¼šç­¾\n        taskService.complete(\"713570d4-b22e-11ec-a534-c03c59ad2248\",map);\n        System.out.println(\"complete ....\");\n    }\n```\n\n\n\n\n\n![image-20220402105058601](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220402105058601.png)\n\n\n\nåŒæ—¶æ¥çœ‹çœ‹è¡¨ç»“æ„ä¸­çš„è®°å½•ï¼Œå‘ç°æ²¡æœ‰äº†\n\n![image-20220402105148471](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220402105148471.png)\n\n\n\næå®š~\n\n\n\n\n\n\n\n# åŠ¨æ€è¡¨å•\n\n\n\nFlowableæä¾›äº†ä¸€ç§ç®€ä¾¿çµæ´»çš„æ–¹å¼ï¼Œç”¨æ¥ä¸ºä¸šåŠ¡æµç¨‹ä¸­çš„äººå·¥æ­¥éª¤æ·»åŠ è¡¨å•ã€‚ æœ‰ä¸¤ç§ä½¿ç”¨è¡¨å•çš„æ–¹æ³•ï¼šä½¿ç”¨ï¼ˆç”±è¡¨å•è®¾è®¡å™¨åˆ›å»ºçš„ï¼‰è¡¨å•å®šä¹‰çš„å†…ç½®è¡¨å•æ¸²æŸ“ï¼Œä»¥åŠå¤–éƒ¨è¡¨å•æ¸²æŸ“ã€‚ ä½¿ç”¨å¤–éƒ¨è¡¨å•æ¸²æŸ“æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ï¼ˆè‡ªExplorer webåº”ç”¨V5ç‰ˆæœ¬æ”¯æŒçš„ï¼‰è¡¨å•å‚æ•°ï¼›ä¹Ÿå¯ä»¥ä½¿ç”¨è¡¨å•keyå®šä¹‰ï¼Œå¼•ç”¨å¤–éƒ¨çš„ã€ä½¿ç”¨è‡ªå®šä¹‰ä»£ç è§£æçš„è¡¨å•ã€‚\n\n## æµç¨‹ç»˜åˆ¶\n\n\n\n![image-20220403133804306](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220403133804306.png)\n\n\n\nè¡¨å•è®¾è®¡\n\n![image-20220403133735195](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220403133735195.png)\n\n\n\n![image-20220403133710713](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220403133710713.png)\n\n\n\n\n\n\n\n\n\n## æ¡ˆä¾‹æ¼”ç¤º\n\n\n\n### éƒ¨ç½²æµç¨‹\n\næµç¨‹å›¾ç»˜åˆ¶å¥½ä¹‹åæˆ‘ä»¬å°±å¯ä»¥ç›´æ¥æ¥éƒ¨ç½²è¿™ä¸ªæµç¨‹äº†\n\n```java\n/**\n     * Deploy\n     */\n    @Test\n    void testDeploy() throws Exception {\n        Deployment deploy = repositoryService.createDeployment()\n                .addClasspathResource(\"åŠ¨æ€è¡¨å•01.bpmn20.xml\")\n                .name(\"åŠ¨æ€è¡¨å•01\")\n                .deploy();\n        System.out.println(\"deploy.getId() = \" + deploy.getId());\n        System.out.println(\"deploy.getName() = \" + deploy.getName());\n        System.out.println(\"éƒ¨ç½²å¼€å§‹çš„æ—¶é—´ï¼š\" + new Date());\n        //TimeUnit.MINUTES.sleep(3);\n    }\n```\n\n\n\n### æŸ¥çœ‹æµç¨‹å…³è”çš„è¡¨å•ä¿¡æ¯\n\næˆ‘ä»¬éƒ¨ç½²äº†ä¸€ä¸ªæµç¨‹åï¼Œå¦‚æœä¸æ¸…æ¥šä¹‹å‰å…³è”äº†ä»€ä¹ˆè¡¨å•ï¼Œè¡¨å•ä¸­æœ‰å“ªäº›å­—æ®µï¼Œå±æ€§æ˜¯ä»€ä¹ˆï¼Ÿè¿™æ—¶æˆ‘ä»¬å¯ä»¥é€šè¿‡å®šä¹‰çš„æµç¨‹æŸ¥è¯¢å‡ºå¯¹åº”çš„formè¡¨å•ä¿¡æ¯\n\n```java\n    @Test\n    public void getStartFromData(){\n        String departemntId = \"4da14de4-b313-11ec-882d-c03c59ad2248\";\n        ProcessDefinition processDefinition = repositoryService\n                .createProcessDefinitionQuery()\n                .deploymentId(departemntId)\n                .singleResult();\n        StartFormData startFormData = processEngine.getFormService()\n                .getStartFormData(processDefinition.getId());\n        List<FormProperty> formProperties = startFormData.getFormProperties();\n        for (FormProperty formProperty : formProperties) {\n            String id = formProperty.getId();\n            String name = formProperty.getName();\n            FormType type = formProperty.getType();\n            System.out.println(\"id = \" + id);\n            System.out.println(\"name = \" + name);\n            System.out.println(\"type.getClass() = \" + type.getClass());\n        }\n    }\n```\n\n\n\n\n\n### å¯åŠ¨æµç¨‹\n\nå¯åŠ¨æµç¨‹çš„æ–¹å¼æœ‰ä¸¤ç§ï¼Œä¸€ç§æ˜¯æ­£å¸¸çš„é€šè¿‡RuntimeServiceæ¥å¯åŠ¨ï¼Œè¿˜æœ‰ä¸€ç§å°±æ˜¯é€šè¿‡FormServiceæ¥å¯åŠ¨ï¼Œå…·ä½“ä»£ç å¦‚ä¸‹ï¼š\n\n```java\n    /**\n     * æ­£å¸¸çš„å¯åŠ¨æµç¨‹\n     */\n    @Test\n    void startFlow() throws Exception{\n        Map<String,Object> map = new HashMap<>();\n        map.put(\"days\",\"5\");\n        map.put(\"startDate\",\"20220403\");\n        map.put(\"reason\",\"æƒ³ä¼‘æ¯ä¸‹\");\n        ProcessInstance processInstance = runtimeService\n                .startProcessInstanceById(\"myProcess:5:4dd61987-b313-11ec-882d-c03c59ad2248\",map);\n    }\n\n\n    /**\n     * é€šè¿‡FormServiceæ¥å¯åŠ¨ä¸€ä¸ªè¡¨å•æµç¨‹\n     * @throws Exception\n     */\n    @Test\n    void startFormFlow() throws Exception{\n        ProcessDefinition processDefinition = repositoryService.createProcessDefinitionQuery()\n                .deploymentId(\"4da14de4-b313-11ec-882d-c03c59ad2248\")\n                .singleResult();\n        Map<String,String> map = new HashMap<>();\n        map.put(\"days\",\"2\");\n        map.put(\"startDate\",\"20220406\");\n        map.put(\"reason\",\"å‡ºå»ç©ç©\");\n        ProcessInstance processInstance = processEngine.getFormService().submitStartFormData(processDefinition.getId(), map);\n\n    }\n```\n\n\n\n### ä¿å­˜è¡¨å•æ•°æ®\n\nåœ¨Taskæ‰§è¡Œä¹‹å‰æˆ‘ä»¬ä¹Ÿå¯ä»¥ä¿å­˜è¡¨å•æ•°æ®åˆ°Taskå¯¹åº”çš„Formè¡¨å•ä¸­ã€‚\n\n```java\n/**\n * ä¿å­˜è¡¨å•æ•°æ®\n */\n@Test\nvoid saveFormData(){\n    String taskId = \"80efeb32-b313-11ec-a7ff-c03c59ad2248\";\n    Map<String,String> map = new HashMap<>();\n    map.put(\"days\",\"3\");\n    map.put(\"startDate\",\"20220407\");\n    map.put(\"reason\",\"å‡ºå»ç©ç©11\");\n    processEngine.getFormService().saveFormData(taskId,map);\n}\n```\n\n\n\n### æŸ¥çœ‹ä»»åŠ¡è¡¨å•æ•°æ®\n\n\n\n```java\n/**\n * æ ¹æ®Taskç¼–å·æ¥æŸ¥çœ‹è¡¨å•æ•°æ®\n */\n@Test\nvoid getTaskFormData(){\n    String taskId = \"80efeb32-b313-11ec-a7ff-c03c59ad2248\";\n    TaskFormData taskFormData = processEngine.getFormService().getTaskFormData(taskId);\n    List<FormProperty> formProperties = taskFormData.getFormProperties();\n    for (FormProperty formProperty : formProperties) {\n        System.out.println(\"formProperty.getId() = \" + formProperty.getId());\n        System.out.println(\"formProperty.getName() = \" + formProperty.getName());\n        System.out.println(\"formProperty.getValue() = \" + formProperty.getValue());\n    }\n}\n```\n\nè¾“å‡ºç»“æœ\n\n```txt\nformProperty.getId() = days\nformProperty.getName() = è¯·å‡å¤©æ•°\nformProperty.getValue() = 3\nformProperty.getId() = reason\nformProperty.getName() = è¯·å‡ç†ç”±\nformProperty.getValue() = å‡ºå»ç©ç©11\nformProperty.getId() = startDate\nformProperty.getName() = å¼€å§‹æ—¥æœŸ\nformProperty.getValue() = 20220407\n```\n\n\n\n### å®Œæˆä»»åŠ¡\n\nç°åœ¨å°±å¯ä»¥é€šè¿‡æŒ‡æ´¾äººæˆ–è€…ä»»åŠ¡ç¼–å·æ¥å®Œæˆå½“å‰ä»»åŠ¡,å½“ç„¶è¿™æ—¶æˆ‘ä»¬è¿˜æ˜¯å¯ä»¥ä¿®æ”¹formè¡¨å•ä¸­çš„æ•°æ®\n\n```java\n    /**\n     * ä¿å­˜è¡¨å•æ•°æ®å¹¶å®Œæˆä»»åŠ¡\n     */\n    @Test\n    void submitTaskFormData(){\n        String taskId = \"80efeb32-b313-11ec-a7ff-c03c59ad2248\";\n        Map<String,String> map = new HashMap<>();\n        map.put(\"days\",\"4\");\n        map.put(\"startDate\",\"20220408\");\n        map.put(\"reason\",\"å‡ºå»ç©ç©\");\n        processEngine.getFormService().submitTaskFormData(taskId,map);\n    }\n```\n\n\n\n### æŸ¥çœ‹å®Œæˆçš„Taskçš„è¡¨å•æ•°æ®\n\nä¸€ä¸ªTaskå®Œæˆåï¼Œå¦‚æœæˆ‘ä»¬æƒ³è¦æŸ¥çœ‹ä¹‹å‰çš„è¡¨å•çš„å†å²æ•°æ®å¯ä»¥é€šè¿‡å¦‚ä¸‹çš„æ–¹æ³•æ¥å®ç°\n\n```java\n    /**\n     * æŸ¥çœ‹å·²ç»å®Œæˆçš„Taskçš„è¡¨å•æ•°æ®\n     */\n    @Test\n    void getHisTaskFormData(){\n        String taskId = \"80efeb32-b313-11ec-a7ff-c03c59ad2248\";\n        List<HistoricDetail> list = processEngine.getHistoryService()\n                .createHistoricDetailQuery()\n                .taskId(taskId)\n                .formProperties()\n                .list();\n        for (HistoricDetail historicDetail : list) {\n            HistoricFormPropertyEntityImpl his = (HistoricFormPropertyEntityImpl) historicDetail;\n            System.out.println(\"his.getPropertyId() = \" + his.getPropertyId());\n            System.out.println(\"his.getPropertyValue() = \" + his.getPropertyValue());\n        }\n    }\n```\n\n\n\n\n\n\n\n## å¤–ç½®è¡¨å•\n\næˆ‘ä»¬ä¼šå‘ç°åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­é€šè¿‡å†…ç½®çš„è¡¨å•ï¼Œæˆ‘ä»¬éœ€è¦åœ¨æ¯ä¸ªèŠ‚ç‚¹éƒ½è®¾ç½®ä¸€ä»½è¡¨å•æ•°æ®ï¼Œä¸æ˜¯å¾ˆçµæ´»ï¼Œè¿™æ—¶æˆ‘ä»¬å¯ä»¥å•ç‹¬åˆ›å»ºä¸€ä»½è¡¨å•ï¼Œç„¶ååœ¨å¯¹åº”çš„èŠ‚ç‚¹åšåº”ç”¨å°±å¯ä»¥äº†ã€‚\n\n### åˆ›å»ºè¡¨å•\n\nè¡¨å•å®šä¹‰æ–‡ä»¶æ˜¯ä»¥.formä¸ºåç¼€ï¼Œ å†…å®¹æ ¼å¼ä¸ºJsonæ ¼å¼\n\n```json\n{\n\"key\": \"form1\",\n\"name\": \"è¯·å‡æµç¨‹\",\n\"fields\": [\n            {\n            \"id\": \"startTime\",\n            \"name\": \"å¼€å§‹æ—¶é—´\",\n            \"type\": \"date\",\n            \"required\": true,\n            \"placeholder\": \"empty\"\n            },\n            {\n            \"id\": \"days\",\n            \"name\": \"è¯·å‡å¤©æ•°\",\n            \"type\": \"string\",\n            \"required\": true,\n            \"placeholder\": \"empty\"\n            },\n            {\n            \"id\": \"reason\",\n            \"name\": \"è¯·å‡åŸå› \",\n            \"type\": \"text\",\n            \"required\": true,\n            \"placeholder\": \"empty\"\n            }\n    ]\n}\n```\n\næ³¨æ„ï¼šä¸Šé¢æ–‡ä»¶ä¸­çš„keyæ˜¯å”¯ä¸€æ ‡è¯†ï¼Œæˆ‘ä»¬åœ¨è¡¨å•å¤„ç†çš„æ—¶å€™æ˜¯æ ¹æ®è¿™ä¸ªkeyæ¥è·å–çš„å“¦ï¼Œ\n\n\n\n### ç„¶ååˆ›å»ºæµç¨‹æ–‡ä»¶\n\næµç¨‹æ–‡ä»¶è¿˜æ˜¯ä»¥æˆ‘ä»¬ä¸Šé¢çš„æ¡ˆä¾‹æ¥æ¼”ç¤ºï¼Œä¸»è¦æ˜¯å¯¹è¡¨å•è¿™å—åšäº†è°ƒæ•´\n\n![image-20220403231037718](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220403231037718.png)\n\nformè¡¨å•é€šè¿‡å¼•ç”¨æ¥å…³è”\n\n![image-20220403231121921](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220403231121921.png)\n\n\n\nå®Œæ•´çš„xmlæ–‡ä»¶ï¼š\n\n```xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<definitions xmlns=\"http://www.omg.org/spec/BPMN/20100524/MODEL\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:activiti=\"http://activiti.org/bpmn\" xmlns:bpmndi=\"http://www.omg.org/spec/BPMN/20100524/DI\" xmlns:omgdc=\"http://www.omg.org/spec/DD/20100524/DC\" xmlns:omgdi=\"http://www.omg.org/spec/DD/20100524/DI\" typeLanguage=\"http://www.w3.org/2001/XMLSchema\" expressionLanguage=\"http://www.w3.org/1999/XPath\" targetNamespace=\"http://www.activiti.org/test\">\n    <process id=\"myProcess\" name=\"My process\" isExecutable=\"true\">\n        <startEvent id=\"startevent1\" name=\"Start\" activiti:formKey=\"form1\"></startEvent>\n        <userTask id=\"usertask1\" name=\"ç”¨æˆ·ç”³è¯·\" activiti:assignee=\"zhangsan\" activiti:formKey=\"form1\"></userTask>\n        <sequenceFlow id=\"flow1\" sourceRef=\"startevent1\" targetRef=\"usertask1\"></sequenceFlow>\n        <sequenceFlow id=\"flow2\" sourceRef=\"usertask1\" targetRef=\"exclusivegateway1\"></sequenceFlow>\n        <userTask id=\"usertask2\" name=\"æ€»ç›‘å®¡æ‰¹\" activiti:assignee=\"lisi\"></userTask>\n        <sequenceFlow id=\"flow3\" sourceRef=\"exclusivegateway1\" targetRef=\"usertask2\">\n            <conditionExpression xsi:type=\"tFormalExpression\"><![CDATA[${days>3}]]></conditionExpression>\n        </sequenceFlow>\n        <userTask id=\"usertask3\" name=\"éƒ¨é—¨ç»ç†å®¡æ‰¹\" activiti:assignee=\"wangwu\"></userTask>\n        <sequenceFlow id=\"flow4\" sourceRef=\"exclusivegateway1\" targetRef=\"usertask3\">\n            <conditionExpression xsi:type=\"tFormalExpression\"><![CDATA[${days<=3}]]></conditionExpression>\n        </sequenceFlow>\n        <sequenceFlow id=\"flow5\" sourceRef=\"usertask2\" targetRef=\"exclusivegateway2\"></sequenceFlow>\n        <sequenceFlow id=\"flow6\" sourceRef=\"usertask3\" targetRef=\"exclusivegateway2\"></sequenceFlow>\n        <endEvent id=\"endevent1\" name=\"End\"></endEvent>\n        <sequenceFlow id=\"flow7\" sourceRef=\"exclusivegateway2\" targetRef=\"endevent1\"></sequenceFlow>\n        <exclusiveGateway id=\"exclusivegateway1\" name=\"Exclusive Gateway\"></exclusiveGateway>\n        <exclusiveGateway id=\"exclusivegateway2\" name=\"Exclusive Gateway\"></exclusiveGateway>\n    </process>\n    <bpmndi:BPMNDiagram id=\"BPMNDiagram_myProcess\">\n        <bpmndi:BPMNPlane bpmnElement=\"myProcess\" id=\"BPMNPlane_myProcess\">\n            <bpmndi:BPMNShape bpmnElement=\"startevent1\" id=\"BPMNShape_startevent1\">\n                <omgdc:Bounds height=\"35.0\" width=\"35.0\" x=\"300.0\" y=\"280.0\"></omgdc:Bounds>\n            </bpmndi:BPMNShape>\n            <bpmndi:BPMNShape bpmnElement=\"usertask1\" id=\"BPMNShape_usertask1\">\n                <omgdc:Bounds height=\"55.0\" width=\"105.0\" x=\"380.0\" y=\"270.0\"></omgdc:Bounds>\n            </bpmndi:BPMNShape>\n            <bpmndi:BPMNShape bpmnElement=\"usertask2\" id=\"BPMNShape_usertask2\">\n                <omgdc:Bounds height=\"55.0\" width=\"105.0\" x=\"650.0\" y=\"140.0\"></omgdc:Bounds>\n            </bpmndi:BPMNShape>\n            <bpmndi:BPMNShape bpmnElement=\"usertask3\" id=\"BPMNShape_usertask3\">\n                <omgdc:Bounds height=\"55.0\" width=\"105.0\" x=\"660.0\" y=\"370.0\"></omgdc:Bounds>\n            </bpmndi:BPMNShape>\n            <bpmndi:BPMNShape bpmnElement=\"endevent1\" id=\"BPMNShape_endevent1\">\n                <omgdc:Bounds height=\"35.0\" width=\"35.0\" x=\"965.0\" y=\"260.0\"></omgdc:Bounds>\n            </bpmndi:BPMNShape>\n            <bpmndi:BPMNShape bpmnElement=\"exclusivegateway1\" id=\"BPMNShape_exclusivegateway1\">\n                <omgdc:Bounds height=\"40.0\" width=\"40.0\" x=\"530.0\" y=\"278.0\"></omgdc:Bounds>\n            </bpmndi:BPMNShape>\n            <bpmndi:BPMNShape bpmnElement=\"exclusivegateway2\" id=\"BPMNShape_exclusivegateway2\">\n                <omgdc:Bounds height=\"40.0\" width=\"40.0\" x=\"880.0\" y=\"257.0\"></omgdc:Bounds>\n            </bpmndi:BPMNShape>\n            <bpmndi:BPMNEdge bpmnElement=\"flow1\" id=\"BPMNEdge_flow1\">\n                <omgdi:waypoint x=\"335.0\" y=\"297.0\"></omgdi:waypoint>\n                <omgdi:waypoint x=\"380.0\" y=\"297.0\"></omgdi:waypoint>\n            </bpmndi:BPMNEdge>\n            <bpmndi:BPMNEdge bpmnElement=\"flow2\" id=\"BPMNEdge_flow2\">\n                <omgdi:waypoint x=\"485.0\" y=\"297.0\"></omgdi:waypoint>\n                <omgdi:waypoint x=\"530.0\" y=\"298.0\"></omgdi:waypoint>\n            </bpmndi:BPMNEdge>\n            <bpmndi:BPMNEdge bpmnElement=\"flow3\" id=\"BPMNEdge_flow3\">\n                <omgdi:waypoint x=\"550.0\" y=\"278.0\"></omgdi:waypoint>\n                <omgdi:waypoint x=\"550.0\" y=\"167.0\"></omgdi:waypoint>\n                <omgdi:waypoint x=\"650.0\" y=\"167.0\"></omgdi:waypoint>\n            </bpmndi:BPMNEdge>\n            <bpmndi:BPMNEdge bpmnElement=\"flow4\" id=\"BPMNEdge_flow4\">\n                <omgdi:waypoint x=\"550.0\" y=\"318.0\"></omgdi:waypoint>\n                <omgdi:waypoint x=\"550.0\" y=\"397.0\"></omgdi:waypoint>\n                <omgdi:waypoint x=\"660.0\" y=\"397.0\"></omgdi:waypoint>\n            </bpmndi:BPMNEdge>\n            <bpmndi:BPMNEdge bpmnElement=\"flow5\" id=\"BPMNEdge_flow5\">\n                <omgdi:waypoint x=\"755.0\" y=\"167.0\"></omgdi:waypoint>\n                <omgdi:waypoint x=\"899.0\" y=\"167.0\"></omgdi:waypoint>\n                <omgdi:waypoint x=\"900.0\" y=\"257.0\"></omgdi:waypoint>\n            </bpmndi:BPMNEdge>\n            <bpmndi:BPMNEdge bpmnElement=\"flow6\" id=\"BPMNEdge_flow6\">\n                <omgdi:waypoint x=\"765.0\" y=\"397.0\"></omgdi:waypoint>\n                <omgdi:waypoint x=\"900.0\" y=\"397.0\"></omgdi:waypoint>\n                <omgdi:waypoint x=\"900.0\" y=\"297.0\"></omgdi:waypoint>\n            </bpmndi:BPMNEdge>\n            <bpmndi:BPMNEdge bpmnElement=\"flow7\" id=\"BPMNEdge_flow7\">\n                <omgdi:waypoint x=\"920.0\" y=\"277.0\"></omgdi:waypoint>\n                <omgdi:waypoint x=\"965.0\" y=\"277.0\"></omgdi:waypoint>\n            </bpmndi:BPMNEdge>\n        </bpmndi:BPMNPlane>\n    </bpmndi:BPMNDiagram>\n</definitions>\n```\n\n\n\n### éƒ¨ç½²æµç¨‹\n\næ¥ä¸‹æ¥æˆ‘ä»¬å…ˆéƒ¨ç½²æµç¨‹\n\n```java\n    /**\n     * éƒ¨ç½²æµç¨‹ï¼š\n     */\n    @Test\n    public void deploy(){\n        Deployment deploy = repositoryService.createDeployment()\n                .addClasspathResource(\"åŠ¨æ€è¡¨å•02.bpmn20.xml\")\n                .name(\"åŠ¨æ€è¡¨å•02\")\n                .deploy();\n        System.out.println(\"deploy.getId() = \" + deploy.getId());\n        System.out.println(\"deploy.getName() = \" + deploy.getName());\n        System.out.println(\"éƒ¨ç½²å¼€å§‹çš„æ—¶é—´ï¼š\" + new Date());\n    }\n```\n\n\n\n### éƒ¨ç½²è¡¨å•\n\nè¿™ä¸ªæ­¥éª¤å¾ˆé‡è¦ï¼Œæˆ‘ä»¬éœ€è¦å•ç‹¬æŠŠæˆ‘ä»¬çš„formæ–‡ä»¶éƒ¨ç½²åˆ°æµç¨‹ä¸­ã€‚\n\n```java\n    @Autowired\n    private FormRepositoryService formRepositoryService;\n\n    /**\n     * éƒ¨ç½²formè¡¨å•\n     */\n    @Test\n    public void deployForm() throws Exception{\n\n        FormDeployment formDeployment = formRepositoryService.createDeployment()\n                .addClasspathResource(\"holiday.form\")\n                .name(\"test\")\n                .parentDeploymentId(\"1\")\n                .deploy();\n        System.out.println(\"formDeployment.getId() = \" + formDeployment.getId());\n    }\n```\n\næˆ‘ä»¬éœ€è¦é€šè¿‡FormRepositoryServiceæ¥éƒ¨ç½²æˆ‘ä»¬çš„formè¡¨å•ã€‚å¯¹åº”çš„ä¼šåœ¨è¿™å‡ ç§è¡¨ä¸­ç”Ÿæˆå¯¹åº”çš„æ•°æ®\n\nForméƒ¨ç½²è¡¨ï¼š\n\n![image-20220403231443464](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220403231443464.png)\n\n\n\nFormå®šä¹‰è¡¨ï¼š\n\n![image-20220403231556049](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220403231556049.png)\n\n\n\nFormèµ„æºè¡¨ï¼š\n\n![image-20220403231624905](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220403231624905.png)\n\n\n\n\n\n### å¯åŠ¨ä»»åŠ¡\n\nå¸¦æœ‰å¤–ç½®Formè¡¨å•çš„æµç¨‹æˆ‘ä»¬éœ€è¦é€šè¿‡`runtimeService.startProcessInstanceWithForm`æ¥å¯åŠ¨\n\n```java\n    /**\n     * å¯åŠ¨æµç¨‹å®ä¾‹ï¼Œå¹¶ä¸”è®¾ç½®å¯¹åº”çš„å€¼\n     */\n    @Test\n    void startTask(){\n        Map<String,Object> map = new HashMap<>();\n        map.put(\"days\",\"4\");\n        map.put(\"startTime\",\"20220404\");\n        map.put(\"reason\",\"å‡ºå»ç©ç©\");\n        ProcessInstance processInstance = runtimeService.startProcessInstanceWithForm(\n                \"myProcess:1:4\"\n                , null\n                , map\n                , \"è¯·å‡æµç¨‹\");\n        String id = processInstance.getId();\n        System.out.println(\"id = \" + id);\n\n    }\n```\n\nå¯ä»¥çœ‹åˆ°å¯¹åº”çš„ä»»åŠ¡\n\n![image-20220403231811784](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220403231811784.png)\n\n\n\n\n\n### æŸ¥çœ‹ä»»åŠ¡è¡¨å•æ•°æ®\n\nåœ¨ä»»åŠ¡å¤„ç†ä¹‹å‰æˆ‘ä»¬å¯ä»¥æŸ¥çœ‹è¡¨å•çš„å¯¹åº”ä¿¡æ¯ã€‚\n\n```java\n    /**\n     * æŸ¥çœ‹æµç¨‹å®šä¹‰è¡¨å•æ•°æ®\n     */\n    @Test\n    public void getTaskFormData1(){\n        Task task = taskService.createTaskQuery()\n                .processDefinitionId(\"myProcess:1:4\")\n                .taskAssignee(\"zhangsan\")\n                .singleResult();\n        // FormInfo è¡¨å•çš„å…ƒæ•°æ®ä¿¡æ¯\n        FormInfo formInfo = runtimeService.getStartFormModel(\"myProcess:1:4\", \"5001\");\n        System.out.println(\"formInfo.getId() = \" + formInfo.getId());\n        System.out.println(\"formInfo.getName() = \" + formInfo.getName());\n        System.out.println(\"formInfo.getKey() = \" + formInfo.getKey());\n        // FormModel è¡¨å•ä¸­çš„å…·ä½“ä¿¡æ¯ å…·ä½“å®ç°æ˜¯ SimpleFormModel\n        SimpleFormModel formModel = (SimpleFormModel) formInfo.getFormModel();\n        List<FormField> fields = formModel.getFields();\n        for (FormField field : fields) {\n            System.out.println(\"field.getId() = \" + field.getId());\n            System.out.println(\"field.getName() = \" + field.getName());\n            System.out.println(\"field.getValue() = \" + field.getValue());\n        }\n        System.out.println(\"formModel = \" + formModel);\n    }\n\n\t/**\n\t* æŸ¥çœ‹å…·ä½“çš„Taskçš„è¡¨å•æ•°æ®\n\t*/\n    @Test\n    void getTaskData(){\n        FormInfo formInfo = taskService.getTaskFormModel(\"17505\");\n        System.out.println(\"formInfo.getId() = \" + formInfo.getId());\n        System.out.println(\"formInfo.getName() = \" + formInfo.getName());\n        System.out.println(\"formInfo.getKey() = \" + formInfo.getKey());\n        SimpleFormModel formModel = (SimpleFormModel) formInfo.getFormModel();\n        List<FormField> fields = formModel.getFields();\n        for (FormField field : fields) {\n            System.out.println(\"field.getId() = \" + field.getId());\n            System.out.println(\"field.getName() = \" + field.getName());\n            System.out.println(\"field.getValue() = \" + field.getValue());\n        }\n    }\n```\n\n\n\n\n\n### å®Œæˆä»»åŠ¡\n\nåœ¨å¤–ç½®è¡¨å•çš„åœºæ™¯ä¸­æˆ‘ä»¬éœ€è¦é€šè¿‡`taskService.completeTaskWithForm`æ¥å®Œæˆè¡¨å•çš„ä»»åŠ¡\n\n```java\n    /**\n     * å®Œæˆä»»åŠ¡\n     */\n    @Test\n    public void completeTaskForm(){\n        Map<String,Object> map = new HashMap<>();\n        map.put(\"days\",\"4\");\n        map.put(\"startTime\",\"20220404\");\n        map.put(\"reason\",\"å‡ºå»ç©ç©\");\n        String taskId = \"5010\";\n        String formDefinitionId = \"2503\";\n        String outcome = \"æ³¢å“¥\";\n        taskService.completeTaskWithForm(taskId,formDefinitionId,outcome,map);\n    }\n```\n\n\n\nç„¶åä»»åŠ¡å°±æµè½¬åˆ°äº†ä¸‹ä¸€ä¸ªèŠ‚ç‚¹æ¥å¤„ç†äº†\n\n![image-20220403233308221](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220403233308221.png)\n\n\n\n\n\næå®š~ï¼\n\n\n\n\n\n\n\n\n\n# ä»»åŠ¡çš„å›é€€\n\n\n\n## ä¸²è¡Œçš„å›é€€\n\næˆ‘ä»¬å…ˆä»æœ€ç®€å•çš„ä¸²è¡Œæµç¨‹æ¥åˆ†æï¼Œæ¡ˆä¾‹å¦‚ä¸‹\n\n![image-20220404221942030](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220404221942030.png)\n\nå®Œæ•´çš„xmlæ–‡ä»¶å†…å®¹ï¼š\n\n```xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<definitions xmlns=\"http://www.omg.org/spec/BPMN/20100524/MODEL\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:activiti=\"http://activiti.org/bpmn\" xmlns:bpmndi=\"http://www.omg.org/spec/BPMN/20100524/DI\" xmlns:omgdc=\"http://www.omg.org/spec/DD/20100524/DC\" xmlns:omgdi=\"http://www.omg.org/spec/DD/20100524/DI\" typeLanguage=\"http://www.w3.org/2001/XMLSchema\" expressionLanguage=\"http://www.w3.org/1999/XPath\" targetNamespace=\"http://www.activiti.org/test\">\n  <process id=\"myProcess\" name=\"My process\" isExecutable=\"true\">\n    <startEvent id=\"startevent1\" name=\"Start\"></startEvent>\n    <userTask id=\"usertask1\" name=\"ç”¨æˆ·ä»»åŠ¡1\" activiti:assignee=\"user1\"></userTask>\n    <sequenceFlow id=\"flow1\" sourceRef=\"startevent1\" targetRef=\"usertask1\"></sequenceFlow>\n    <userTask id=\"usertask2\" name=\"ç”¨æˆ·ä»»åŠ¡2\" activiti:assignee=\"user2\"></userTask>\n    <sequenceFlow id=\"flow2\" sourceRef=\"usertask1\" targetRef=\"usertask2\"></sequenceFlow>\n    <userTask id=\"usertask3\" name=\"ç”¨æˆ·ä»»åŠ¡3\" activiti:assignee=\"user3\"></userTask>\n    <sequenceFlow id=\"flow3\" sourceRef=\"usertask2\" targetRef=\"usertask3\"></sequenceFlow>\n    <userTask id=\"usertask4\" name=\"ç”¨æˆ·ä»»åŠ¡4\" activiti:assignee=\"user4\"></userTask>\n    <sequenceFlow id=\"flow4\" sourceRef=\"usertask3\" targetRef=\"usertask4\"></sequenceFlow>\n    <endEvent id=\"endevent1\" name=\"End\"></endEvent>\n    <sequenceFlow id=\"flow5\" sourceRef=\"usertask4\" targetRef=\"endevent1\"></sequenceFlow>\n  </process>\n  <bpmndi:BPMNDiagram id=\"BPMNDiagram_myProcess\">\n    <bpmndi:BPMNPlane bpmnElement=\"myProcess\" id=\"BPMNPlane_myProcess\">\n      <bpmndi:BPMNShape bpmnElement=\"startevent1\" id=\"BPMNShape_startevent1\">\n        <omgdc:Bounds height=\"35.0\" width=\"35.0\" x=\"390.0\" y=\"260.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"usertask1\" id=\"BPMNShape_usertask1\">\n        <omgdc:Bounds height=\"55.0\" width=\"105.0\" x=\"470.0\" y=\"250.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"usertask2\" id=\"BPMNShape_usertask2\">\n        <omgdc:Bounds height=\"55.0\" width=\"105.0\" x=\"620.0\" y=\"250.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"usertask3\" id=\"BPMNShape_usertask3\">\n        <omgdc:Bounds height=\"55.0\" width=\"105.0\" x=\"770.0\" y=\"250.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"usertask4\" id=\"BPMNShape_usertask4\">\n        <omgdc:Bounds height=\"55.0\" width=\"105.0\" x=\"920.0\" y=\"250.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"endevent1\" id=\"BPMNShape_endevent1\">\n        <omgdc:Bounds height=\"35.0\" width=\"35.0\" x=\"1070.0\" y=\"260.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNEdge bpmnElement=\"flow1\" id=\"BPMNEdge_flow1\">\n        <omgdi:waypoint x=\"425.0\" y=\"277.0\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"470.0\" y=\"277.0\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"flow2\" id=\"BPMNEdge_flow2\">\n        <omgdi:waypoint x=\"575.0\" y=\"277.0\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"620.0\" y=\"277.0\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"flow3\" id=\"BPMNEdge_flow3\">\n        <omgdi:waypoint x=\"725.0\" y=\"277.0\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"770.0\" y=\"277.0\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"flow4\" id=\"BPMNEdge_flow4\">\n        <omgdi:waypoint x=\"875.0\" y=\"277.0\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"920.0\" y=\"277.0\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"flow5\" id=\"BPMNEdge_flow5\">\n        <omgdi:waypoint x=\"1025.0\" y=\"277.0\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"1070.0\" y=\"277.0\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n    </bpmndi:BPMNPlane>\n  </bpmndi:BPMNDiagram>\n</definitions>\n```\n\nä¸Šé¢çš„æµç¨‹å°±æ˜¯ä¸€ä¸ªéå¸¸ç®€å•çš„ä¸²è¡Œä»»åŠ¡ï¼Œå®šä¹‰äº†4ä¸ªç”¨æˆ·ä»»åŠ¡ï¼ŒæŒ‡æ´¾çš„å¤„ç†äººåˆ†åˆ«æ˜¯`user1`,`user2`,`user3`,`user4`.åœ¨æµç¨‹çš„æ‰§è¡Œè¿‡ç¨‹ä¸­æˆ‘ä»¬å¯ä»¥é€šè¿‡å›é€€æ¥æ¼”ç¤ºå…·ä½“çš„æ•ˆæœã€‚é¦–å…ˆæ¥éƒ¨ç½²æµç¨‹\n\n```java\n    /**\n     * éƒ¨ç½²æµç¨‹\n     */\n    @Test\n    void testDeploy() throws Exception {\n        Deployment deploy = repositoryService.createDeployment()\n                .addClasspathResource(\"ä»»åŠ¡å›é€€01.bpmn20.xml\")\n                .name(\"ä»»åŠ¡å›é€€01\")\n                .deploy();\n        System.out.println(\"deploy.getId() = \" + deploy.getId());\n        System.out.println(\"deploy.getName() = \" + deploy.getName());\n        System.out.println(\"éƒ¨ç½²å¼€å§‹çš„æ—¶é—´ï¼š\" + new Date());\n        //TimeUnit.MINUTES.sleep(3);\n    }\n```\n\nç„¶åæˆ‘ä»¬å¯åŠ¨ä¸€ä¸ªæµç¨‹å®ä¾‹ã€‚\n\n```java\n    /**\n     * å¯åŠ¨æµç¨‹å®ä¾‹\n     */\n    @Test\n    void startProcess(){\n        ProcessInstance processInstance = runtimeService\n                .startProcessInstanceById(\"myProcess:1:4\");\n        System.out.println(\"processInstance.getId() = \" + processInstance.getId());\n    }\n```\n\n\n\n\n\n![image-20220404222436788](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220404222436788.png)\n\n\n\nç„¶åæˆ‘ä»¬é€šè¿‡user1å®Œæˆä»»åŠ¡ï¼Œç›´åˆ°user3å®Œæˆä»»åŠ¡ï¼Œåˆ°user4æ¥å¤„ç†ä»»åŠ¡ã€‚\n\n```java\n    /**\n     * å®Œæˆä»»åŠ¡\n     */\n    @Test\n    void completeTask(){\n        Task task = taskService.createTaskQuery()\n                .processDefinitionId(\"myProcess:1:4\")\n                .taskAssignee(\"user1\")\n                .singleResult();\n        taskService.complete(task.getId());\n    }\n\n```\n\né€šè¿‡ä¸Šé¢çš„å¤šä¸ªTaskå®Œæˆæ“ä½œï¼Œç°åœ¨å·²ç»åˆ°äº†user4æ¥å¤„ç†çš„èŠ‚ç‚¹äº†\n\n![image-20220404223234982](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220404223234982.png)\n\n\n\n![image-20220404223253043](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220404223253043.png)\n\n\n\næˆ‘ä»¬å…ˆçœ‹ä¸‹ä»`ç”¨æˆ·ä»»åŠ¡4`å›é€€åˆ°`ç”¨æˆ·ä»»åŠ¡3`çš„æ“ä½œã€‚\n\n```java\n/**\n * å›é€€æ“ä½œ\n */\n@Test\nvoid rollbackTask(){\n    // å½“å‰çš„Taskå¯¹åº”çš„ç”¨æˆ·ä»»åŠ¡çš„Id\n    List<String> currentActivityIds = new ArrayList<>();\n    currentActivityIds.add(\"usertask4\");\n    // éœ€è¦å›é€€çš„ç›®æ ‡èŠ‚ç‚¹çš„ç”¨æˆ·ä»»åŠ¡Id\n    String newActivityId = \"usertask3\";\n    // å›é€€æ“ä½œ\n    runtimeService.createChangeActivityStateBuilder()\n            .processInstanceId(\"2501\")\n            .moveActivityIdsToSingleActivityId(currentActivityIds,newActivityId)\n            .changeState();\n\n}\n```\n\næ“ä½œåæˆ‘ä»¬å¯ä»¥åœ¨å¯¹åº”çš„å†å²è¡¨ä¸­çœ‹åˆ°ç›¸å…³çš„ä¿¡æ¯\n\n![image-20220404224948722](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220404224948722.png)\n\n\n\n![image-20220404225319024](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220404225319024.png)\n\n\n\nç„¶åæˆ‘ä»¬é€šè¿‡user3æ¥å®Œæˆä»»åŠ¡ç»§ç»­åˆ°user4å¤„ç†ï¼Œç„¶åæˆ‘ä»¬å¯ä»¥æµ‹è¯•å›é€€åˆ°user1å¤„ã€‚\n\n![image-20220404225345357](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220404225345357.png)\n\n```java\n/**\n * å›é€€æ“ä½œ\n */\n@Test\nvoid rollbackTask(){\n    // å½“å‰çš„Taskå¯¹åº”çš„ç”¨æˆ·ä»»åŠ¡çš„Id\n    List<String> currentActivityIds = new ArrayList<>();\n    currentActivityIds.add(\"usertask4\");\n    // éœ€è¦å›é€€çš„ç›®æ ‡èŠ‚ç‚¹çš„ç”¨æˆ·ä»»åŠ¡Id\n    String newActivityId = \"usertask1\";\n    // å›é€€æ“ä½œ\n    runtimeService.createChangeActivityStateBuilder()\n            .processInstanceId(\"2501\")\n            .moveActivityIdsToSingleActivityId(currentActivityIds,newActivityId)\n            .changeState();\n}\n```\n\n![image-20220404225532864](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220404225532864.png)\n\n\n\nå¯ä»¥çœ‹åˆ°ä»»åŠ¡åˆå›åˆ°äº†user1å¤„ã€‚ä¹Ÿå°±æ˜¯åœ¨ä¸²è¡Œçš„æµç¨‹ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å›é€€åˆ°ä»»æ„çš„ç”¨æˆ·èŠ‚ç‚¹ï¼Œå½“ç„¶è¿™ä¸ªä¸²è¡Œä¹ŸåŒ…æ‹¬å¤šäººä¼šç­¾å’Œæ’ä»–ç½‘å…³èŠ‚ç‚¹ã€‚å½“ç„¶åœ¨å›é€€çš„æ—¶å€™æˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨`moveActivityIdTo(String currentActivityId,String newActivityId)`è¿™ä¸ªæ–¹æ³•æ¥å¤„ç†ã€‚\n\n\n\n\n\n## å¹¶è¡Œçš„å›é€€\n\næ¥ä¸‹æ¥æˆ‘ä»¬åœ¨å¹¶è¡Œçš„åœºæ™¯ä¸­æ¥çœ‹çœ‹å„ç§å›é€€çš„åœºæ™¯ã€‚å…·ä½“æ¡ˆä¾‹æµç¨‹å¦‚ä¸‹ï¼š\n\n![image-20220405111325145](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220405111325145.png)\n\nè¯¦ç»†çš„xmlæ–‡ä»¶å†…å®¹ï¼š\n\n```xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<definitions xmlns=\"http://www.omg.org/spec/BPMN/20100524/MODEL\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:activiti=\"http://activiti.org/bpmn\" xmlns:bpmndi=\"http://www.omg.org/spec/BPMN/20100524/DI\" xmlns:omgdc=\"http://www.omg.org/spec/DD/20100524/DC\" xmlns:omgdi=\"http://www.omg.org/spec/DD/20100524/DI\" typeLanguage=\"http://www.w3.org/2001/XMLSchema\" expressionLanguage=\"http://www.w3.org/1999/XPath\" targetNamespace=\"http://www.activiti.org/test\">\n    <process id=\"myProcess\" name=\"My process\" isExecutable=\"true\">\n        <startEvent id=\"startevent1\" name=\"Start\"></startEvent>\n        <userTask id=\"usertask1\" name=\"ç”¨æˆ·å®¡æ‰¹01\" activiti:assignee=\"user1\"></userTask>\n        <sequenceFlow id=\"flow1\" sourceRef=\"startevent1\" targetRef=\"usertask1\"></sequenceFlow>\n        <sequenceFlow id=\"flow2\" sourceRef=\"usertask1\" targetRef=\"parallelgateway1\"></sequenceFlow>\n        <parallelGateway id=\"parallelgateway1\" name=\"Exclusive Gateway\"></parallelGateway>\n        <userTask id=\"usertask2\" name=\"ä¸šåŠ¡è´Ÿè´£äºº\" activiti:assignee=\"user2\"></userTask>\n        <sequenceFlow id=\"flow3\" sourceRef=\"parallelgateway1\" targetRef=\"usertask2\"></sequenceFlow>\n        <userTask id=\"usertask3\" name=\"è¡Œæ”¿å‰¯æ€»\" activiti:assignee=\"user4\"></userTask>\n        <sequenceFlow id=\"flow4\" sourceRef=\"parallelgateway1\" targetRef=\"usertask3\"></sequenceFlow>\n        <userTask id=\"usertask4\" name=\"ä¸šåŠ¡å‰¯æ€»\" activiti:assignee=\"user3\"></userTask>\n        <sequenceFlow id=\"flow5\" sourceRef=\"usertask2\" targetRef=\"usertask4\"></sequenceFlow>\n        <sequenceFlow id=\"flow6\" sourceRef=\"usertask4\" targetRef=\"parallelgateway2\"></sequenceFlow>\n        <parallelGateway id=\"parallelgateway2\" name=\"Exclusive Gateway\"></parallelGateway>\n        <sequenceFlow id=\"flow7\" sourceRef=\"usertask3\" targetRef=\"parallelgateway2\"></sequenceFlow>\n        <userTask id=\"usertask5\" name=\"æ€»ç»ç†\" activiti:assignee=\"user5\"></userTask>\n        <sequenceFlow id=\"flow8\" sourceRef=\"parallelgateway2\" targetRef=\"usertask5\"></sequenceFlow>\n        <endEvent id=\"endevent1\" name=\"End\"></endEvent>\n        <sequenceFlow id=\"flow9\" sourceRef=\"usertask5\" targetRef=\"endevent1\"></sequenceFlow>\n    </process>\n    <bpmndi:BPMNDiagram id=\"BPMNDiagram_myProcess\">\n        <bpmndi:BPMNPlane bpmnElement=\"myProcess\" id=\"BPMNPlane_myProcess\">\n            <bpmndi:BPMNShape bpmnElement=\"startevent1\" id=\"BPMNShape_startevent1\">\n                <omgdc:Bounds height=\"35.0\" width=\"35.0\" x=\"370.0\" y=\"300.0\"></omgdc:Bounds>\n            </bpmndi:BPMNShape>\n            <bpmndi:BPMNShape bpmnElement=\"usertask1\" id=\"BPMNShape_usertask1\">\n                <omgdc:Bounds height=\"55.0\" width=\"105.0\" x=\"450.0\" y=\"290.0\"></omgdc:Bounds>\n            </bpmndi:BPMNShape>\n            <bpmndi:BPMNShape bpmnElement=\"parallelgateway1\" id=\"BPMNShape_parallelgateway1\">\n                <omgdc:Bounds height=\"40.0\" width=\"40.0\" x=\"600.0\" y=\"298.0\"></omgdc:Bounds>\n            </bpmndi:BPMNShape>\n            <bpmndi:BPMNShape bpmnElement=\"usertask2\" id=\"BPMNShape_usertask2\">\n                <omgdc:Bounds height=\"55.0\" width=\"105.0\" x=\"740.0\" y=\"180.0\"></omgdc:Bounds>\n            </bpmndi:BPMNShape>\n            <bpmndi:BPMNShape bpmnElement=\"usertask3\" id=\"BPMNShape_usertask3\">\n                <omgdc:Bounds height=\"55.0\" width=\"105.0\" x=\"740.0\" y=\"370.0\"></omgdc:Bounds>\n            </bpmndi:BPMNShape>\n            <bpmndi:BPMNShape bpmnElement=\"usertask4\" id=\"BPMNShape_usertask4\">\n                <omgdc:Bounds height=\"55.0\" width=\"105.0\" x=\"930.0\" y=\"180.0\"></omgdc:Bounds>\n            </bpmndi:BPMNShape>\n            <bpmndi:BPMNShape bpmnElement=\"parallelgateway2\" id=\"BPMNShape_parallelgateway2\">\n                <omgdc:Bounds height=\"40.0\" width=\"40.0\" x=\"1140.0\" y=\"297.0\"></omgdc:Bounds>\n            </bpmndi:BPMNShape>\n            <bpmndi:BPMNShape bpmnElement=\"usertask5\" id=\"BPMNShape_usertask5\">\n                <omgdc:Bounds height=\"55.0\" width=\"105.0\" x=\"1225.0\" y=\"290.0\"></omgdc:Bounds>\n            </bpmndi:BPMNShape>\n            <bpmndi:BPMNShape bpmnElement=\"endevent1\" id=\"BPMNShape_endevent1\">\n                <omgdc:Bounds height=\"35.0\" width=\"35.0\" x=\"1375.0\" y=\"300.0\"></omgdc:Bounds>\n            </bpmndi:BPMNShape>\n            <bpmndi:BPMNEdge bpmnElement=\"flow1\" id=\"BPMNEdge_flow1\">\n                <omgdi:waypoint x=\"405.0\" y=\"317.0\"></omgdi:waypoint>\n                <omgdi:waypoint x=\"450.0\" y=\"317.0\"></omgdi:waypoint>\n            </bpmndi:BPMNEdge>\n            <bpmndi:BPMNEdge bpmnElement=\"flow2\" id=\"BPMNEdge_flow2\">\n                <omgdi:waypoint x=\"555.0\" y=\"317.0\"></omgdi:waypoint>\n                <omgdi:waypoint x=\"600.0\" y=\"318.0\"></omgdi:waypoint>\n            </bpmndi:BPMNEdge>\n            <bpmndi:BPMNEdge bpmnElement=\"flow3\" id=\"BPMNEdge_flow3\">\n                <omgdi:waypoint x=\"620.0\" y=\"298.0\"></omgdi:waypoint>\n                <omgdi:waypoint x=\"620.0\" y=\"207.0\"></omgdi:waypoint>\n                <omgdi:waypoint x=\"740.0\" y=\"207.0\"></omgdi:waypoint>\n            </bpmndi:BPMNEdge>\n            <bpmndi:BPMNEdge bpmnElement=\"flow4\" id=\"BPMNEdge_flow4\">\n                <omgdi:waypoint x=\"620.0\" y=\"338.0\"></omgdi:waypoint>\n                <omgdi:waypoint x=\"620.0\" y=\"397.0\"></omgdi:waypoint>\n                <omgdi:waypoint x=\"740.0\" y=\"397.0\"></omgdi:waypoint>\n            </bpmndi:BPMNEdge>\n            <bpmndi:BPMNEdge bpmnElement=\"flow5\" id=\"BPMNEdge_flow5\">\n                <omgdi:waypoint x=\"845.0\" y=\"207.0\"></omgdi:waypoint>\n                <omgdi:waypoint x=\"930.0\" y=\"207.0\"></omgdi:waypoint>\n            </bpmndi:BPMNEdge>\n            <bpmndi:BPMNEdge bpmnElement=\"flow6\" id=\"BPMNEdge_flow6\">\n                <omgdi:waypoint x=\"1035.0\" y=\"207.0\"></omgdi:waypoint>\n                <omgdi:waypoint x=\"1159.0\" y=\"207.0\"></omgdi:waypoint>\n                <omgdi:waypoint x=\"1160.0\" y=\"297.0\"></omgdi:waypoint>\n            </bpmndi:BPMNEdge>\n            <bpmndi:BPMNEdge bpmnElement=\"flow7\" id=\"BPMNEdge_flow7\">\n                <omgdi:waypoint x=\"845.0\" y=\"397.0\"></omgdi:waypoint>\n                <omgdi:waypoint x=\"1160.0\" y=\"397.0\"></omgdi:waypoint>\n                <omgdi:waypoint x=\"1160.0\" y=\"337.0\"></omgdi:waypoint>\n            </bpmndi:BPMNEdge>\n            <bpmndi:BPMNEdge bpmnElement=\"flow8\" id=\"BPMNEdge_flow8\">\n                <omgdi:waypoint x=\"1180.0\" y=\"317.0\"></omgdi:waypoint>\n                <omgdi:waypoint x=\"1225.0\" y=\"317.0\"></omgdi:waypoint>\n            </bpmndi:BPMNEdge>\n            <bpmndi:BPMNEdge bpmnElement=\"flow9\" id=\"BPMNEdge_flow9\">\n                <omgdi:waypoint x=\"1330.0\" y=\"317.0\"></omgdi:waypoint>\n                <omgdi:waypoint x=\"1375.0\" y=\"317.0\"></omgdi:waypoint>\n            </bpmndi:BPMNEdge>\n        </bpmndi:BPMNPlane>\n    </bpmndi:BPMNDiagram>\n</definitions>\n```\n\nå…ˆéƒ¨ç½²æµç¨‹ï¼Œç„¶åå¯åŠ¨å¹¶è¿è¡Œåˆ°å¹¶è¡Œæµç¨‹çš„èŠ‚ç‚¹å¦‚ä¸‹çš„ä½ç½®\n![image-20220405111459624](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220405111459624.png)\n\nç„¶åæˆ‘ä»¬å¯ä»¥å°è¯•ä»`ä¸šåŠ¡å‰¯æ€»`å¤„å›é€€åˆ°`ç”¨æˆ·å®¡æ‰¹01`å¤„ï¼Œçœ‹çœ‹è¯¥å¤„ç†åº”è¯¥è¦å¦‚ä½•å®ç°ã€‚\n\n![image-20220405111926713](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220405111926713.png)\n\n\n\nå›é€€é€»è¾‘ä»£ç çš„å®ç°\n\n```java\n    /**\n     * å›é€€æ“ä½œ\n     *   ä¸šåŠ¡å‰¯æ€»é©³å›åˆ°åˆ°ç”¨æˆ·å®¡æ‰¹å¤„  é‚£ä¹ˆè¡Œæ”¿å®¡æ‰¹çš„ä¹Ÿåº”è¯¥è¦è¿”å›\n     */\n    @Test\n    void rollbackTask(){\n        // å½“å‰çš„Taskå¯¹åº”çš„ç”¨æˆ·ä»»åŠ¡çš„Id\n        List<String> currentActivityIds = new ArrayList<>();\n        currentActivityIds.add(\"usertask4\"); // è¡Œæ”¿å‰¯æ€»\n        currentActivityIds.add(\"usertask3\"); // ä¸šåŠ¡å‰¯æ€»\n        // éœ€è¦å›é€€çš„ç›®æ ‡èŠ‚ç‚¹çš„ç”¨æˆ·ä»»åŠ¡Id\n        String newActivityId = \"usertask1\"; // ç”¨æˆ·å®¡æ‰¹01\n        // å›é€€æ“ä½œ\n        runtimeService.createChangeActivityStateBuilder()\n                .processInstanceId(\"22501\")\n                .moveActivityIdsToSingleActivityId(currentActivityIds,newActivityId)\n                .changeState();\n    }\n```\n\næŸ¥çœ‹ACT_RU_TASKå¯ä»¥çœ‹åˆ°å›åˆ°äº†`ç”¨æˆ·å®¡æ‰¹01`äº†\n\n![image-20220405112329439](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220405112329439.png)\n\nåŒæ—¶åœ¨ACT_HI_ACTINSä¸­ä¹Ÿå¯ä»¥çœ‹åˆ°å›é€€çš„å†å²æ“ä½œ\n\n![image-20220405112544706](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220405112544706.png)\n\n\n\nç„¶åå†æ¥çœ‹çœ‹ è¡Œæ”¿å‰¯æ€»çš„ å¹¶è¡Œåˆ†æ”¯æ‰§è¡Œå®Œæˆäº†ï¼Œç„¶ååœ¨ ä¸šåŠ¡å‰¯æ€»å¤„å®¡æ‰¹è¦é©³å›çš„å¤„ç†\n\n![image-20220405113125822](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220405113125822.png)\n\n![image-20220405113212465](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220405113212465.png)\n\n\n\n```java\n    @Test\n    void rollbackTask(){\n        // å½“å‰çš„Taskå¯¹åº”çš„ç”¨æˆ·ä»»åŠ¡çš„Id\n        List<String> currentActivityIds = new ArrayList<>();\n        currentActivityIds.add(\"usertask4\"); // è¡Œæ”¿å‰¯æ€»\n        //currentActivityIds.add(\"usertask3\"); // ä¸šåŠ¡å‰¯æ€»\n        // éœ€è¦å›é€€çš„ç›®æ ‡èŠ‚ç‚¹çš„ç”¨æˆ·ä»»åŠ¡Id\n        String newActivityId = \"usertask1\"; // ç”¨æˆ·å®¡æ‰¹01\n        // å›é€€æ“ä½œ\n        runtimeService.createChangeActivityStateBuilder()\n                .processInstanceId(\"22501\")\n                .moveActivityIdsToSingleActivityId(currentActivityIds,newActivityId)\n                .changeState();\n    }\n```\n\n\n\nä¸€æ ·çš„æ•ˆæœ\n\n\n\n## å­æµç¨‹å›é€€\n\næœ€åæˆ‘ä»¬æ¥çœ‹çœ‹å¸¦æœ‰å­æµç¨‹çš„åœºæ™¯ä¸‹å¦‚æœæœ‰å›é€€çš„æƒ…å†µåº”è¯¥è¦å¦‚ä½•æ¥å¤„ç†,æ¡ˆä¾‹å¦‚ä¸‹ï¼š\n\n![image-20220405134220482](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220405134220482.png)\n\nå®Œæ•´çš„xmlå†…å®¹ä¸ºï¼š\n\n```xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<definitions xmlns=\"http://www.omg.org/spec/BPMN/20100524/MODEL\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:activiti=\"http://activiti.org/bpmn\" xmlns:bpmndi=\"http://www.omg.org/spec/BPMN/20100524/DI\" xmlns:omgdc=\"http://www.omg.org/spec/DD/20100524/DC\" xmlns:omgdi=\"http://www.omg.org/spec/DD/20100524/DI\" typeLanguage=\"http://www.w3.org/2001/XMLSchema\" expressionLanguage=\"http://www.w3.org/1999/XPath\" targetNamespace=\"http://www.activiti.org/test\">\n  <process id=\"myProcess\" name=\"My process\" isExecutable=\"true\">\n    <startEvent id=\"startevent1\" name=\"Start\"></startEvent>\n    <userTask id=\"usertask1\" name=\"ä¸»ä»»åŠ¡1\" activiti:assignee=\"user1\"></userTask>\n    <sequenceFlow id=\"flow1\" sourceRef=\"startevent1\" targetRef=\"usertask1\"></sequenceFlow>\n    <subProcess id=\"subprocess1\" name=\"Sub Process\">\n      <startEvent id=\"startevent2\" name=\"Start\"></startEvent>\n      <userTask id=\"usertask2\" name=\"å­ä»»åŠ¡1\" activiti:assignee=\"user2\"></userTask>\n      <sequenceFlow id=\"flow3\" sourceRef=\"startevent2\" targetRef=\"usertask2\"></sequenceFlow>\n      <endEvent id=\"endevent1\" name=\"End\"></endEvent>\n      <sequenceFlow id=\"flow4\" sourceRef=\"usertask2\" targetRef=\"endevent1\"></sequenceFlow>\n    </subProcess>\n    <sequenceFlow id=\"flow2\" sourceRef=\"usertask1\" targetRef=\"subprocess1\"></sequenceFlow>\n    <userTask id=\"usertask3\" name=\"ä¸»ä»»åŠ¡2\" activiti:assignee=\"user3\"></userTask>\n    <sequenceFlow id=\"flow5\" sourceRef=\"subprocess1\" targetRef=\"usertask3\"></sequenceFlow>\n    <endEvent id=\"endevent2\" name=\"End\"></endEvent>\n    <sequenceFlow id=\"flow6\" sourceRef=\"usertask3\" targetRef=\"endevent2\"></sequenceFlow>\n  </process>\n  <bpmndi:BPMNDiagram id=\"BPMNDiagram_myProcess\">\n    <bpmndi:BPMNPlane bpmnElement=\"myProcess\" id=\"BPMNPlane_myProcess\">\n      <bpmndi:BPMNShape bpmnElement=\"startevent1\" id=\"BPMNShape_startevent1\">\n        <omgdc:Bounds height=\"35.0\" width=\"35.0\" x=\"320.0\" y=\"290.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"usertask1\" id=\"BPMNShape_usertask1\">\n        <omgdc:Bounds height=\"55.0\" width=\"105.0\" x=\"400.0\" y=\"280.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"subprocess1\" id=\"BPMNShape_subprocess1\">\n        <omgdc:Bounds height=\"291.0\" width=\"481.0\" x=\"620.0\" y=\"168.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"startevent2\" id=\"BPMNShape_startevent2\">\n        <omgdc:Bounds height=\"35.0\" width=\"35.0\" x=\"680.0\" y=\"298.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"usertask2\" id=\"BPMNShape_usertask2\">\n        <omgdc:Bounds height=\"55.0\" width=\"105.0\" x=\"760.0\" y=\"288.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"endevent1\" id=\"BPMNShape_endevent1\">\n        <omgdc:Bounds height=\"35.0\" width=\"35.0\" x=\"910.0\" y=\"298.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"usertask3\" id=\"BPMNShape_usertask3\">\n        <omgdc:Bounds height=\"55.0\" width=\"105.0\" x=\"1146.0\" y=\"286.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"endevent2\" id=\"BPMNShape_endevent2\">\n        <omgdc:Bounds height=\"35.0\" width=\"35.0\" x=\"1296.0\" y=\"296.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNEdge bpmnElement=\"flow1\" id=\"BPMNEdge_flow1\">\n        <omgdi:waypoint x=\"355.0\" y=\"307.0\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"400.0\" y=\"307.0\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"flow3\" id=\"BPMNEdge_flow3\">\n        <omgdi:waypoint x=\"715.0\" y=\"315.0\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"760.0\" y=\"315.0\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"flow4\" id=\"BPMNEdge_flow4\">\n        <omgdi:waypoint x=\"865.0\" y=\"315.0\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"910.0\" y=\"315.0\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"flow2\" id=\"BPMNEdge_flow2\">\n        <omgdi:waypoint x=\"505.0\" y=\"307.0\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"620.0\" y=\"313.0\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"flow5\" id=\"BPMNEdge_flow5\">\n        <omgdi:waypoint x=\"1101.0\" y=\"313.0\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"1146.0\" y=\"313.0\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"flow6\" id=\"BPMNEdge_flow6\">\n        <omgdi:waypoint x=\"1251.0\" y=\"313.0\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"1296.0\" y=\"313.0\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n    </bpmndi:BPMNPlane>\n  </bpmndi:BPMNDiagram>\n</definitions>\n```\n\n\n\néƒ¨ç½²æµç¨‹åå¹¶å¯åŠ¨æµç¨‹ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹ç¬¬ä¸€ä¸ªåœºæ™¯ï¼Œä»å­æµç¨‹å›é€€åˆ°ä¸»æµç¨‹ï¼Œä¹Ÿå°±æ˜¯å¦‚ä¸‹å›¾ï¼š\n\n![image-20220405134411503](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220405134411503.png)\n\nTaskè¿›å…¥åˆ°äº†å­æµç¨‹çš„Taskå¤„\n\n![image-20220405134811970](C:\\Users\\dpb\\AppData\\Roaming\\Typora\\typora-user-images\\image-20220405134811970.png)\n\n\n\nç„¶åæˆ‘ä»¬æ¥å¤„ç†å›é€€åˆ°ä¸»æµç¨‹:ç›´æ¥è·³è½¬å³å¯\n\n```java\n    /**\n     * å›é€€æ“ä½œ\n     *   ä»å­æµç¨‹å›é€€åˆ°ä¸»æµç¨‹æ“ä½œ\n     */\n    @Test\n    void rollbackMainTask(){\n\n        // å›é€€æ“ä½œ\n        runtimeService.createChangeActivityStateBuilder()\n                .processInstanceId(\"2501\")\n                .moveActivityIdTo(\"usertask2\",\"usertask1\")\n                .changeState();\n    }\n\n}\n\n    /**\n     * å›é€€æ“ä½œ\n     *   ä»å­æµç¨‹å›é€€åˆ°ä¸»æµç¨‹æ“ä½œï¼šmoveExecutionToActivityIdä¸å…³å¿ƒå½“å‰çš„èŠ‚ç‚¹\n     */\n    @Test\n    void rollbackMainTask(){\n\n        // å›é€€æ“ä½œ\n        runtimeService.createChangeActivityStateBuilder()\n                .processInstanceId(\"2501\")\n                .moveExecutionToActivityId(\"5003\",\"usertask1\")\n                .changeState();\n    }\n```\n\nç„¶åä»ä¸»æµç¨‹å›é€€åˆ°å­æµç¨‹æ“ä½œ\n\n![image-20220405140816409](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220405140816409.png)\n\n![image-20220405141015720](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220405141015720.png)\n\n\n\nåŒæ ·çš„ç›´æ¥è·³è½¬å³å¯\n\n```java\n/**\n * å›é€€æ“ä½œ\n */\n@Test\nvoid rollbackSubTask(){\n\n    // å›é€€æ“ä½œ\n    runtimeService.createChangeActivityStateBuilder()\n            .processInstanceId(\"2501\")\n            .moveActivityIdTo(\"usertask3\",\"usertask2\")\n            .changeState();\n}\n```\n\n","source":"_posts/2022/10/flowableè¿›é˜¶ç¯‡.md","raw":"---\ntitle: flowableè¿›é˜¶ç¯‡\ndate: 2022-10-19 23:43:58\ntags: [BPMN,Flowable]\ncategories: [ç¬”è®°]\n---\n# Flowableè¿›é˜¶ç¯‡\n> Lectureï¼šæ³¢æ³¢è€å¸ˆ\n\n\n\n# å¤šäººä¼šç­¾\n\n## æµç¨‹å›¾ç»˜åˆ¶\n\nå¤šäººä¼šç­¾æ˜¯æŒ‡ä¸€ä¸ªä»»åŠ¡éœ€è¦å¤šä¸ªäººæ¥å¤„ç†ï¼Œæ¡ˆä¾‹è®²è§£\n\n![image-20220402092950976](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220402092950976.png)\n\nå®Œæ•´çš„xmlå†…å®¹\n\n```xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<definitions xmlns=\"http://www.omg.org/spec/BPMN/20100524/MODEL\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:activiti=\"http://activiti.org/bpmn\" xmlns:bpmndi=\"http://www.omg.org/spec/BPMN/20100524/DI\" xmlns:omgdc=\"http://www.omg.org/spec/DD/20100524/DC\" xmlns:omgdi=\"http://www.omg.org/spec/DD/20100524/DI\" typeLanguage=\"http://www.w3.org/2001/XMLSchema\" expressionLanguage=\"http://www.w3.org/1999/XPath\" targetNamespace=\"http://www.activiti.org/test\">\n    <process id=\"myProcess\" name=\"My process\" isExecutable=\"true\">\n        <startEvent id=\"startevent1\" name=\"Start\"></startEvent>\n        <userTask id=\"usertask1\" name=\"User Task\">\n            <extensionElements>\n                <activiti:taskListener event=\"create\" expression=\"${mulitiInstanceTaskListener.completeListener(execution)}\"></activiti:taskListener>\n            </extensionElements>\n            <multiInstanceLoopCharacteristics isSequential=\"false\" activiti:collection=\"persons\" activiti:elementVariable=\"person\">\n                <loopCardinality>3</loopCardinality>\n                <completionCondition>${mulitiInstanceCompleteTask.completeTask(execution)}</completionCondition>\n            </multiInstanceLoopCharacteristics>\n        </userTask>\n        <sequenceFlow id=\"flow1\" sourceRef=\"startevent1\" targetRef=\"usertask1\"></sequenceFlow>\n        <endEvent id=\"endevent1\" name=\"End\"></endEvent>\n        <sequenceFlow id=\"flow2\" sourceRef=\"usertask1\" targetRef=\"endevent1\"></sequenceFlow>\n    </process>\n    <bpmndi:BPMNDiagram id=\"BPMNDiagram_myProcess\">\n        <bpmndi:BPMNPlane bpmnElement=\"myProcess\" id=\"BPMNPlane_myProcess\">\n            <bpmndi:BPMNShape bpmnElement=\"startevent1\" id=\"BPMNShape_startevent1\">\n                <omgdc:Bounds height=\"35.0\" width=\"35.0\" x=\"420.0\" y=\"310.0\"></omgdc:Bounds>\n            </bpmndi:BPMNShape>\n            <bpmndi:BPMNShape bpmnElement=\"usertask1\" id=\"BPMNShape_usertask1\">\n                <omgdc:Bounds height=\"55.0\" width=\"105.0\" x=\"700.0\" y=\"300.0\"></omgdc:Bounds>\n            </bpmndi:BPMNShape>\n            <bpmndi:BPMNShape bpmnElement=\"endevent1\" id=\"BPMNShape_endevent1\">\n                <omgdc:Bounds height=\"35.0\" width=\"35.0\" x=\"950.0\" y=\"310.0\"></omgdc:Bounds>\n            </bpmndi:BPMNShape>\n            <bpmndi:BPMNEdge bpmnElement=\"flow1\" id=\"BPMNEdge_flow1\">\n                <omgdi:waypoint x=\"455.0\" y=\"327.0\"></omgdi:waypoint>\n                <omgdi:waypoint x=\"700.0\" y=\"327.0\"></omgdi:waypoint>\n            </bpmndi:BPMNEdge>\n            <bpmndi:BPMNEdge bpmnElement=\"flow2\" id=\"BPMNEdge_flow2\">\n                <omgdi:waypoint x=\"805.0\" y=\"327.0\"></omgdi:waypoint>\n                <omgdi:waypoint x=\"950.0\" y=\"327.0\"></omgdi:waypoint>\n            </bpmndi:BPMNEdge>\n        </bpmndi:BPMNPlane>\n    </bpmndi:BPMNDiagram>\n</definitions>\n```\n\n## æµç¨‹è¯´æ˜\n\n1.åœ¨ç”¨æˆ·ä»»åŠ¡èŠ‚ç‚¹ç»‘å®šäº†ä¸€ä¸ªç›‘å¬å™¨ï¼Œç›‘å¬`create`è¡Œä¸ºï¼Œè¯¥ç›‘å¬å™¨æˆ‘ä»¬æ˜¯é€šè¿‡UELè¡¨è¾¾å¼æ¥å®ç°çš„ï¼Œ`mulitiInstanceTaskListener`æ˜¯æˆ‘ä»¬æ³¨å…¥åˆ°Springå®¹å™¨ä¸­çš„å¯¹è±¡\n\n![image-20220402095348908](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220402095348908.png)\n\nå¯¹åº”çš„ç›‘å¬çš„ä»£ç å¦‚ä¸‹ï¼š\n\n```java\n@Component(\"mulitiInstanceTaskListener\")\npublic class MulitiInstanceTaskListener implements Serializable {\n    \n    public void completeListener(DelegateExecution execution){\n        System.out.println(\"ä»»åŠ¡ï¼š\"+execution.getId());\n        System.out.println(\"persons:\" + execution.getVariable(\"persons\"));\n        System.out.println(\"person\" + execution.getVariable(\"person\"));\n    }\n}\n```\n\n2.åœ¨Multi instanceä¸­çš„é…ç½®\n\n* Loop cardinality:è®¾ç½®ä¸º3è¡¨ç¤ºåªå¾ªç¯3æ¬¡ï¼Œä¹Ÿå°±æ˜¯ä¸‰ä¸ªäººä¼šç­¾\n* Collectionï¼šè¡¨ç¤ºè¦å¾ªç¯çš„é›†åˆï¼Œæˆ‘ä»¬ç»™çš„æ˜¯personsï¼Œåé¢éœ€è¦åœ¨æµç¨‹å˜é‡ä¸­èµ‹å€¼\n* Element variableï¼šè¡¨ç¤ºå¾ªç¯çš„å˜é‡\n* Completion conditionï¼šè¡¨ç¤ºä»»åŠ¡ç»“æŸçš„æ¡ä»¶ï¼Œä¹Ÿå°±æ˜¯å¤šäººä¼šç­¾çš„ç»“æŸæ¡ä»¶ï¼Œåœ¨æ­¤å¤„æˆ‘ä»¬ç”¨çš„æ˜¯UELè¡¨è¾¾å¼ï¼Œ`mulitiInstanceCompleteTask`è¡¨ç¤ºçš„æ˜¯æˆ‘ä»¬æ³¨å…¥åˆ°Springå®¹å™¨ä¸­çš„å¯¹è±¡\n\n![image-20220402100649924](C:\\Users\\dpb\\AppData\\Roaming\\Typora\\typora-user-images\\image-20220402100649924.png)\n\n\n\n`mulitiInstanceCompleteTask`å¯¹è±¡çš„å®Œæ•´ä»£ç ä¸ºï¼š\n\n```java\n@Component(\"mulitiInstanceCompleteTask\")\npublic class MulitiInstanceCompleteTask implements Serializable {\n    /**\n     * å®Œæˆä»»åŠ¡æ˜¯éœ€è¦è§¦å‘çš„æ–¹æ³•\n     * @param execution\n     * @return\n     *     false è¡¨ç¤ºä¼šç­¾ä»»åŠ¡è¿˜æ²¡æœ‰ç»“æŸ\n     \n     *     true è¡¨ç¤ºä¼šç­¾ä»»åŠ¡ç»“æŸäº†\n     */\n    public boolean completeTask(DelegateExecution execution) {\n        System.out.println(\"æ€»çš„ä¼šç­¾ä»»åŠ¡æ•°é‡ï¼š\" + execution.getVariable(\"nrOfInstances\")\n                + \"å½“å‰è·å–çš„ä¼šç­¾ä»»åŠ¡æ•°é‡ï¼š\" + execution.getVariable(\"nrOfActiveInstances\")\n                + \" - \" + \"å·²ç»å®Œæˆçš„ä¼šç­¾ä»»åŠ¡æ•°é‡ï¼š\" + execution.getVariable(\"nrOfCompletedInstances\"));\n        //æœ‰ä¸€ä¸ªäººåŒæ„å°±é€šè¿‡\n        Boolean flag = (Boolean) execution.getVariable(\"flag\");\n        System.out.println(\"å½“å‰æ„è§ï¼š\"+flag);\n        return flag;\n    }\n}\n```\n\nä¸Šé¢çš„ä¸‰ä¸ªå˜é‡æ˜¯Flowableä¸­è‡ªå¸¦çš„å¯ç”¨å˜é‡\n\n1. nrOfInstances:è¯¥ä¼šç­¾ç¯èŠ‚ä¸­æ€»å…±æœ‰å¤šå°‘ä¸ªå®ä¾‹\n\n2. nrOfActiveInstances:å½“å‰æ´»åŠ¨çš„å®ä¾‹çš„æ•°é‡ï¼Œå³è¿˜æ²¡æœ‰å®Œæˆçš„å®ä¾‹æ•°é‡ã€‚\n\n3. nrOfCompletedInstances:å·²ç»å®Œæˆçš„å®ä¾‹çš„æ•°é‡\n\n\n\n## æ¡ˆä¾‹æ¼”ç¤º\n\n### éƒ¨ç½²æµç¨‹\n\n```java\n    /**\n     * Deploy\n     */\n    @Test\n    void testDeploy() throws Exception {\n        Deployment deploy = repositoryService.createDeployment()\n                .addClasspathResource(\"ä¼šç­¾æ¡ˆä¾‹.bpmn20.xml\")\n                .name(\"ä¼šç­¾æ¡ˆä¾‹\")\n                .deploy();\n        System.out.println(\"deploy.getId() = \" + deploy.getId());\n        System.out.println(\"deploy.getName() = \" + deploy.getName());\n        System.out.println(\"éƒ¨ç½²å¼€å§‹çš„æ—¶é—´ï¼š\" + new Date());\n        //TimeUnit.MINUTES.sleep(3);\n    }\n```\n\n### å¯åŠ¨æµç¨‹\n\nåœ¨å¯åŠ¨æµç¨‹å®ä¾‹çš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦è®¾ç½®ç›¸å…³çš„å‚æ•°ï¼Œåœ¨æµç¨‹å®šä¹‰çš„æ—¶å€™è®¾ç½®çš„personsåœ¨æ­¤å¤„æˆ‘ä»¬å°±éœ€è¦è®¾ç½®äº†ï¼Œè®¾ç½®ä¸ºArrays.asList(\"å¼ ä¸‰\",\"æå››\",\"ç‹äº”\",\"èµµå…­\")ï¼Œè¿™é‡Œè®¾ç½®äº†4ä¸ªå…ƒç´ ï¼Œåœ¨æµç¨‹å®šä¹‰é‡Œå®šä¹‰äº†3ä¸ªï¼Œè¡¨ç¤ºåªä¼šå¾ªç¯3æ¬¡ï¼Œå¯åŠ¨æµç¨‹åï¼Œåœ¨Taskä¸­å¯ä»¥çœ‹åˆ°åªæœ‰3ä¸ªä»»åŠ¡\n\n```java\n    @Test\n    void startFlow() throws Exception{\n        Map<String,Object> map = new HashMap<>();\n        // è®¾ç½®å¤šäººä¼šç­¾çš„æ•°æ®\n        map.put(\"persons\", Arrays.asList(\"å¼ ä¸‰\",\"æå››\",\"ç‹äº”\",\"èµµå…­\"));\n        ProcessInstance processInstance = runtimeService\n                .startProcessInstanceById(\"myProcess:1:ba1518fc-b22d-11ec-9313-c03c59ad2248\",map);\n    }\n```\n\n![image-20220402104240267](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220402104240267.png)\n\n\n\nåŒæ—¶æ§åˆ¶ä¹Ÿæœ‰å¯¹åº”çš„è¾“å‡ºï¼Œè§¦å‘äº†Taskçš„åˆ›å»ºäº‹ä»¶\n\n![image-20220402104319944](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220402104319944.png)\n\n\n\n### ä¼šç­¾å¤„ç†ä»»åŠ¡\n\nå¯åŠ¨æµç¨‹åæˆ‘ä»¬å‘ä¸‹åœ¨Taskä¸­äº§ç”Ÿäº†3æ¡ä»»åŠ¡ï¼Œæˆ‘ä»¬å…ˆé€šè¿‡TaskServiceæ¥å®Œæˆå…¶ä¸­ä¸€ä¸ªä»»åŠ¡ï¼Œè®¾ç½®ä¸€ä¸ªæ ‡å¿—flagä¸ºfalseï¼Œæ¥æ§åˆ¶ä¼šç­¾è¿˜æ²¡æœ‰ç»“æŸï¼ŒåŒæ—¶Taskä¸­å¦å¤–ä¸¤ä¸ªä»»åŠ¡è¿˜åœ¨\n\n```java \n    @Test\n    void completeTask1(){\n        Map<String,Object> map = new HashMap<>();\n        map.put(\"flag\",false);\n        taskService.complete(\"71337501-b22e-11ec-a534-c03c59ad2248\",map);\n        System.out.println(\"complete ....\");\n    }\n```\n\n![image-20220402104554823](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220402104554823.png)\n\nå½“ä»»åŠ¡æ‰§è¡Œå®Œæˆæ—¶ä¼šåŒæ­¥è§¦å‘ä¼šç­¾å®Œæˆè¡¨è¾¾å¼ä¸­å¯¹è±¡æ–¹æ³•ã€‚æœ‰å¦‚ä¸‹çš„è¾“å‡º\n\n![image-20220402104729627](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220402104729627.png)\n\nåŒæ—¶Taskè¡¨ä¸­çš„è®°å½•è¿˜æœ‰ä¸¤æ¡\n\n![image-20220402104819239](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220402104819239.png)\n\nç„¶åå½“æˆ‘ä»¬åœ¨å®Œæˆä¸€ä¸ªä»»åŠ¡ï¼Œè¿™æ—¶è®¾ç½®flagä¸ºtrueï¼Œä¼šå‘ç°åœ¨è¿™ä¸ªå¤šäººå¤„ç†ä¸­ï¼Œæœ€å¤š3ä¸ªäººå¤„ç†åœ¨ç¬¬äºŒä¸ªäººå¤„ç†åå°±ç»“æŸäº†\n\n```java\n    @Test\n    void completeTask1(){\n        Map<String,Object> map = new HashMap<>();\n        map.put(\"flag\",true); // è®¾ç½®ä¸ºtrue ç»“æŸå¤šäººä¼šç­¾\n        taskService.complete(\"713570d4-b22e-11ec-a534-c03c59ad2248\",map);\n        System.out.println(\"complete ....\");\n    }\n```\n\n\n\n\n\n![image-20220402105058601](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220402105058601.png)\n\n\n\nåŒæ—¶æ¥çœ‹çœ‹è¡¨ç»“æ„ä¸­çš„è®°å½•ï¼Œå‘ç°æ²¡æœ‰äº†\n\n![image-20220402105148471](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220402105148471.png)\n\n\n\næå®š~\n\n\n\n\n\n\n\n# åŠ¨æ€è¡¨å•\n\n\n\nFlowableæä¾›äº†ä¸€ç§ç®€ä¾¿çµæ´»çš„æ–¹å¼ï¼Œç”¨æ¥ä¸ºä¸šåŠ¡æµç¨‹ä¸­çš„äººå·¥æ­¥éª¤æ·»åŠ è¡¨å•ã€‚ æœ‰ä¸¤ç§ä½¿ç”¨è¡¨å•çš„æ–¹æ³•ï¼šä½¿ç”¨ï¼ˆç”±è¡¨å•è®¾è®¡å™¨åˆ›å»ºçš„ï¼‰è¡¨å•å®šä¹‰çš„å†…ç½®è¡¨å•æ¸²æŸ“ï¼Œä»¥åŠå¤–éƒ¨è¡¨å•æ¸²æŸ“ã€‚ ä½¿ç”¨å¤–éƒ¨è¡¨å•æ¸²æŸ“æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ï¼ˆè‡ªExplorer webåº”ç”¨V5ç‰ˆæœ¬æ”¯æŒçš„ï¼‰è¡¨å•å‚æ•°ï¼›ä¹Ÿå¯ä»¥ä½¿ç”¨è¡¨å•keyå®šä¹‰ï¼Œå¼•ç”¨å¤–éƒ¨çš„ã€ä½¿ç”¨è‡ªå®šä¹‰ä»£ç è§£æçš„è¡¨å•ã€‚\n\n## æµç¨‹ç»˜åˆ¶\n\n\n\n![image-20220403133804306](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220403133804306.png)\n\n\n\nè¡¨å•è®¾è®¡\n\n![image-20220403133735195](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220403133735195.png)\n\n\n\n![image-20220403133710713](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220403133710713.png)\n\n\n\n\n\n\n\n\n\n## æ¡ˆä¾‹æ¼”ç¤º\n\n\n\n### éƒ¨ç½²æµç¨‹\n\næµç¨‹å›¾ç»˜åˆ¶å¥½ä¹‹åæˆ‘ä»¬å°±å¯ä»¥ç›´æ¥æ¥éƒ¨ç½²è¿™ä¸ªæµç¨‹äº†\n\n```java\n/**\n     * Deploy\n     */\n    @Test\n    void testDeploy() throws Exception {\n        Deployment deploy = repositoryService.createDeployment()\n                .addClasspathResource(\"åŠ¨æ€è¡¨å•01.bpmn20.xml\")\n                .name(\"åŠ¨æ€è¡¨å•01\")\n                .deploy();\n        System.out.println(\"deploy.getId() = \" + deploy.getId());\n        System.out.println(\"deploy.getName() = \" + deploy.getName());\n        System.out.println(\"éƒ¨ç½²å¼€å§‹çš„æ—¶é—´ï¼š\" + new Date());\n        //TimeUnit.MINUTES.sleep(3);\n    }\n```\n\n\n\n### æŸ¥çœ‹æµç¨‹å…³è”çš„è¡¨å•ä¿¡æ¯\n\næˆ‘ä»¬éƒ¨ç½²äº†ä¸€ä¸ªæµç¨‹åï¼Œå¦‚æœä¸æ¸…æ¥šä¹‹å‰å…³è”äº†ä»€ä¹ˆè¡¨å•ï¼Œè¡¨å•ä¸­æœ‰å“ªäº›å­—æ®µï¼Œå±æ€§æ˜¯ä»€ä¹ˆï¼Ÿè¿™æ—¶æˆ‘ä»¬å¯ä»¥é€šè¿‡å®šä¹‰çš„æµç¨‹æŸ¥è¯¢å‡ºå¯¹åº”çš„formè¡¨å•ä¿¡æ¯\n\n```java\n    @Test\n    public void getStartFromData(){\n        String departemntId = \"4da14de4-b313-11ec-882d-c03c59ad2248\";\n        ProcessDefinition processDefinition = repositoryService\n                .createProcessDefinitionQuery()\n                .deploymentId(departemntId)\n                .singleResult();\n        StartFormData startFormData = processEngine.getFormService()\n                .getStartFormData(processDefinition.getId());\n        List<FormProperty> formProperties = startFormData.getFormProperties();\n        for (FormProperty formProperty : formProperties) {\n            String id = formProperty.getId();\n            String name = formProperty.getName();\n            FormType type = formProperty.getType();\n            System.out.println(\"id = \" + id);\n            System.out.println(\"name = \" + name);\n            System.out.println(\"type.getClass() = \" + type.getClass());\n        }\n    }\n```\n\n\n\n\n\n### å¯åŠ¨æµç¨‹\n\nå¯åŠ¨æµç¨‹çš„æ–¹å¼æœ‰ä¸¤ç§ï¼Œä¸€ç§æ˜¯æ­£å¸¸çš„é€šè¿‡RuntimeServiceæ¥å¯åŠ¨ï¼Œè¿˜æœ‰ä¸€ç§å°±æ˜¯é€šè¿‡FormServiceæ¥å¯åŠ¨ï¼Œå…·ä½“ä»£ç å¦‚ä¸‹ï¼š\n\n```java\n    /**\n     * æ­£å¸¸çš„å¯åŠ¨æµç¨‹\n     */\n    @Test\n    void startFlow() throws Exception{\n        Map<String,Object> map = new HashMap<>();\n        map.put(\"days\",\"5\");\n        map.put(\"startDate\",\"20220403\");\n        map.put(\"reason\",\"æƒ³ä¼‘æ¯ä¸‹\");\n        ProcessInstance processInstance = runtimeService\n                .startProcessInstanceById(\"myProcess:5:4dd61987-b313-11ec-882d-c03c59ad2248\",map);\n    }\n\n\n    /**\n     * é€šè¿‡FormServiceæ¥å¯åŠ¨ä¸€ä¸ªè¡¨å•æµç¨‹\n     * @throws Exception\n     */\n    @Test\n    void startFormFlow() throws Exception{\n        ProcessDefinition processDefinition = repositoryService.createProcessDefinitionQuery()\n                .deploymentId(\"4da14de4-b313-11ec-882d-c03c59ad2248\")\n                .singleResult();\n        Map<String,String> map = new HashMap<>();\n        map.put(\"days\",\"2\");\n        map.put(\"startDate\",\"20220406\");\n        map.put(\"reason\",\"å‡ºå»ç©ç©\");\n        ProcessInstance processInstance = processEngine.getFormService().submitStartFormData(processDefinition.getId(), map);\n\n    }\n```\n\n\n\n### ä¿å­˜è¡¨å•æ•°æ®\n\nåœ¨Taskæ‰§è¡Œä¹‹å‰æˆ‘ä»¬ä¹Ÿå¯ä»¥ä¿å­˜è¡¨å•æ•°æ®åˆ°Taskå¯¹åº”çš„Formè¡¨å•ä¸­ã€‚\n\n```java\n/**\n * ä¿å­˜è¡¨å•æ•°æ®\n */\n@Test\nvoid saveFormData(){\n    String taskId = \"80efeb32-b313-11ec-a7ff-c03c59ad2248\";\n    Map<String,String> map = new HashMap<>();\n    map.put(\"days\",\"3\");\n    map.put(\"startDate\",\"20220407\");\n    map.put(\"reason\",\"å‡ºå»ç©ç©11\");\n    processEngine.getFormService().saveFormData(taskId,map);\n}\n```\n\n\n\n### æŸ¥çœ‹ä»»åŠ¡è¡¨å•æ•°æ®\n\n\n\n```java\n/**\n * æ ¹æ®Taskç¼–å·æ¥æŸ¥çœ‹è¡¨å•æ•°æ®\n */\n@Test\nvoid getTaskFormData(){\n    String taskId = \"80efeb32-b313-11ec-a7ff-c03c59ad2248\";\n    TaskFormData taskFormData = processEngine.getFormService().getTaskFormData(taskId);\n    List<FormProperty> formProperties = taskFormData.getFormProperties();\n    for (FormProperty formProperty : formProperties) {\n        System.out.println(\"formProperty.getId() = \" + formProperty.getId());\n        System.out.println(\"formProperty.getName() = \" + formProperty.getName());\n        System.out.println(\"formProperty.getValue() = \" + formProperty.getValue());\n    }\n}\n```\n\nè¾“å‡ºç»“æœ\n\n```txt\nformProperty.getId() = days\nformProperty.getName() = è¯·å‡å¤©æ•°\nformProperty.getValue() = 3\nformProperty.getId() = reason\nformProperty.getName() = è¯·å‡ç†ç”±\nformProperty.getValue() = å‡ºå»ç©ç©11\nformProperty.getId() = startDate\nformProperty.getName() = å¼€å§‹æ—¥æœŸ\nformProperty.getValue() = 20220407\n```\n\n\n\n### å®Œæˆä»»åŠ¡\n\nç°åœ¨å°±å¯ä»¥é€šè¿‡æŒ‡æ´¾äººæˆ–è€…ä»»åŠ¡ç¼–å·æ¥å®Œæˆå½“å‰ä»»åŠ¡,å½“ç„¶è¿™æ—¶æˆ‘ä»¬è¿˜æ˜¯å¯ä»¥ä¿®æ”¹formè¡¨å•ä¸­çš„æ•°æ®\n\n```java\n    /**\n     * ä¿å­˜è¡¨å•æ•°æ®å¹¶å®Œæˆä»»åŠ¡\n     */\n    @Test\n    void submitTaskFormData(){\n        String taskId = \"80efeb32-b313-11ec-a7ff-c03c59ad2248\";\n        Map<String,String> map = new HashMap<>();\n        map.put(\"days\",\"4\");\n        map.put(\"startDate\",\"20220408\");\n        map.put(\"reason\",\"å‡ºå»ç©ç©\");\n        processEngine.getFormService().submitTaskFormData(taskId,map);\n    }\n```\n\n\n\n### æŸ¥çœ‹å®Œæˆçš„Taskçš„è¡¨å•æ•°æ®\n\nä¸€ä¸ªTaskå®Œæˆåï¼Œå¦‚æœæˆ‘ä»¬æƒ³è¦æŸ¥çœ‹ä¹‹å‰çš„è¡¨å•çš„å†å²æ•°æ®å¯ä»¥é€šè¿‡å¦‚ä¸‹çš„æ–¹æ³•æ¥å®ç°\n\n```java\n    /**\n     * æŸ¥çœ‹å·²ç»å®Œæˆçš„Taskçš„è¡¨å•æ•°æ®\n     */\n    @Test\n    void getHisTaskFormData(){\n        String taskId = \"80efeb32-b313-11ec-a7ff-c03c59ad2248\";\n        List<HistoricDetail> list = processEngine.getHistoryService()\n                .createHistoricDetailQuery()\n                .taskId(taskId)\n                .formProperties()\n                .list();\n        for (HistoricDetail historicDetail : list) {\n            HistoricFormPropertyEntityImpl his = (HistoricFormPropertyEntityImpl) historicDetail;\n            System.out.println(\"his.getPropertyId() = \" + his.getPropertyId());\n            System.out.println(\"his.getPropertyValue() = \" + his.getPropertyValue());\n        }\n    }\n```\n\n\n\n\n\n\n\n## å¤–ç½®è¡¨å•\n\næˆ‘ä»¬ä¼šå‘ç°åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­é€šè¿‡å†…ç½®çš„è¡¨å•ï¼Œæˆ‘ä»¬éœ€è¦åœ¨æ¯ä¸ªèŠ‚ç‚¹éƒ½è®¾ç½®ä¸€ä»½è¡¨å•æ•°æ®ï¼Œä¸æ˜¯å¾ˆçµæ´»ï¼Œè¿™æ—¶æˆ‘ä»¬å¯ä»¥å•ç‹¬åˆ›å»ºä¸€ä»½è¡¨å•ï¼Œç„¶ååœ¨å¯¹åº”çš„èŠ‚ç‚¹åšåº”ç”¨å°±å¯ä»¥äº†ã€‚\n\n### åˆ›å»ºè¡¨å•\n\nè¡¨å•å®šä¹‰æ–‡ä»¶æ˜¯ä»¥.formä¸ºåç¼€ï¼Œ å†…å®¹æ ¼å¼ä¸ºJsonæ ¼å¼\n\n```json\n{\n\"key\": \"form1\",\n\"name\": \"è¯·å‡æµç¨‹\",\n\"fields\": [\n            {\n            \"id\": \"startTime\",\n            \"name\": \"å¼€å§‹æ—¶é—´\",\n            \"type\": \"date\",\n            \"required\": true,\n            \"placeholder\": \"empty\"\n            },\n            {\n            \"id\": \"days\",\n            \"name\": \"è¯·å‡å¤©æ•°\",\n            \"type\": \"string\",\n            \"required\": true,\n            \"placeholder\": \"empty\"\n            },\n            {\n            \"id\": \"reason\",\n            \"name\": \"è¯·å‡åŸå› \",\n            \"type\": \"text\",\n            \"required\": true,\n            \"placeholder\": \"empty\"\n            }\n    ]\n}\n```\n\næ³¨æ„ï¼šä¸Šé¢æ–‡ä»¶ä¸­çš„keyæ˜¯å”¯ä¸€æ ‡è¯†ï¼Œæˆ‘ä»¬åœ¨è¡¨å•å¤„ç†çš„æ—¶å€™æ˜¯æ ¹æ®è¿™ä¸ªkeyæ¥è·å–çš„å“¦ï¼Œ\n\n\n\n### ç„¶ååˆ›å»ºæµç¨‹æ–‡ä»¶\n\næµç¨‹æ–‡ä»¶è¿˜æ˜¯ä»¥æˆ‘ä»¬ä¸Šé¢çš„æ¡ˆä¾‹æ¥æ¼”ç¤ºï¼Œä¸»è¦æ˜¯å¯¹è¡¨å•è¿™å—åšäº†è°ƒæ•´\n\n![image-20220403231037718](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220403231037718.png)\n\nformè¡¨å•é€šè¿‡å¼•ç”¨æ¥å…³è”\n\n![image-20220403231121921](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220403231121921.png)\n\n\n\nå®Œæ•´çš„xmlæ–‡ä»¶ï¼š\n\n```xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<definitions xmlns=\"http://www.omg.org/spec/BPMN/20100524/MODEL\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:activiti=\"http://activiti.org/bpmn\" xmlns:bpmndi=\"http://www.omg.org/spec/BPMN/20100524/DI\" xmlns:omgdc=\"http://www.omg.org/spec/DD/20100524/DC\" xmlns:omgdi=\"http://www.omg.org/spec/DD/20100524/DI\" typeLanguage=\"http://www.w3.org/2001/XMLSchema\" expressionLanguage=\"http://www.w3.org/1999/XPath\" targetNamespace=\"http://www.activiti.org/test\">\n    <process id=\"myProcess\" name=\"My process\" isExecutable=\"true\">\n        <startEvent id=\"startevent1\" name=\"Start\" activiti:formKey=\"form1\"></startEvent>\n        <userTask id=\"usertask1\" name=\"ç”¨æˆ·ç”³è¯·\" activiti:assignee=\"zhangsan\" activiti:formKey=\"form1\"></userTask>\n        <sequenceFlow id=\"flow1\" sourceRef=\"startevent1\" targetRef=\"usertask1\"></sequenceFlow>\n        <sequenceFlow id=\"flow2\" sourceRef=\"usertask1\" targetRef=\"exclusivegateway1\"></sequenceFlow>\n        <userTask id=\"usertask2\" name=\"æ€»ç›‘å®¡æ‰¹\" activiti:assignee=\"lisi\"></userTask>\n        <sequenceFlow id=\"flow3\" sourceRef=\"exclusivegateway1\" targetRef=\"usertask2\">\n            <conditionExpression xsi:type=\"tFormalExpression\"><![CDATA[${days>3}]]></conditionExpression>\n        </sequenceFlow>\n        <userTask id=\"usertask3\" name=\"éƒ¨é—¨ç»ç†å®¡æ‰¹\" activiti:assignee=\"wangwu\"></userTask>\n        <sequenceFlow id=\"flow4\" sourceRef=\"exclusivegateway1\" targetRef=\"usertask3\">\n            <conditionExpression xsi:type=\"tFormalExpression\"><![CDATA[${days<=3}]]></conditionExpression>\n        </sequenceFlow>\n        <sequenceFlow id=\"flow5\" sourceRef=\"usertask2\" targetRef=\"exclusivegateway2\"></sequenceFlow>\n        <sequenceFlow id=\"flow6\" sourceRef=\"usertask3\" targetRef=\"exclusivegateway2\"></sequenceFlow>\n        <endEvent id=\"endevent1\" name=\"End\"></endEvent>\n        <sequenceFlow id=\"flow7\" sourceRef=\"exclusivegateway2\" targetRef=\"endevent1\"></sequenceFlow>\n        <exclusiveGateway id=\"exclusivegateway1\" name=\"Exclusive Gateway\"></exclusiveGateway>\n        <exclusiveGateway id=\"exclusivegateway2\" name=\"Exclusive Gateway\"></exclusiveGateway>\n    </process>\n    <bpmndi:BPMNDiagram id=\"BPMNDiagram_myProcess\">\n        <bpmndi:BPMNPlane bpmnElement=\"myProcess\" id=\"BPMNPlane_myProcess\">\n            <bpmndi:BPMNShape bpmnElement=\"startevent1\" id=\"BPMNShape_startevent1\">\n                <omgdc:Bounds height=\"35.0\" width=\"35.0\" x=\"300.0\" y=\"280.0\"></omgdc:Bounds>\n            </bpmndi:BPMNShape>\n            <bpmndi:BPMNShape bpmnElement=\"usertask1\" id=\"BPMNShape_usertask1\">\n                <omgdc:Bounds height=\"55.0\" width=\"105.0\" x=\"380.0\" y=\"270.0\"></omgdc:Bounds>\n            </bpmndi:BPMNShape>\n            <bpmndi:BPMNShape bpmnElement=\"usertask2\" id=\"BPMNShape_usertask2\">\n                <omgdc:Bounds height=\"55.0\" width=\"105.0\" x=\"650.0\" y=\"140.0\"></omgdc:Bounds>\n            </bpmndi:BPMNShape>\n            <bpmndi:BPMNShape bpmnElement=\"usertask3\" id=\"BPMNShape_usertask3\">\n                <omgdc:Bounds height=\"55.0\" width=\"105.0\" x=\"660.0\" y=\"370.0\"></omgdc:Bounds>\n            </bpmndi:BPMNShape>\n            <bpmndi:BPMNShape bpmnElement=\"endevent1\" id=\"BPMNShape_endevent1\">\n                <omgdc:Bounds height=\"35.0\" width=\"35.0\" x=\"965.0\" y=\"260.0\"></omgdc:Bounds>\n            </bpmndi:BPMNShape>\n            <bpmndi:BPMNShape bpmnElement=\"exclusivegateway1\" id=\"BPMNShape_exclusivegateway1\">\n                <omgdc:Bounds height=\"40.0\" width=\"40.0\" x=\"530.0\" y=\"278.0\"></omgdc:Bounds>\n            </bpmndi:BPMNShape>\n            <bpmndi:BPMNShape bpmnElement=\"exclusivegateway2\" id=\"BPMNShape_exclusivegateway2\">\n                <omgdc:Bounds height=\"40.0\" width=\"40.0\" x=\"880.0\" y=\"257.0\"></omgdc:Bounds>\n            </bpmndi:BPMNShape>\n            <bpmndi:BPMNEdge bpmnElement=\"flow1\" id=\"BPMNEdge_flow1\">\n                <omgdi:waypoint x=\"335.0\" y=\"297.0\"></omgdi:waypoint>\n                <omgdi:waypoint x=\"380.0\" y=\"297.0\"></omgdi:waypoint>\n            </bpmndi:BPMNEdge>\n            <bpmndi:BPMNEdge bpmnElement=\"flow2\" id=\"BPMNEdge_flow2\">\n                <omgdi:waypoint x=\"485.0\" y=\"297.0\"></omgdi:waypoint>\n                <omgdi:waypoint x=\"530.0\" y=\"298.0\"></omgdi:waypoint>\n            </bpmndi:BPMNEdge>\n            <bpmndi:BPMNEdge bpmnElement=\"flow3\" id=\"BPMNEdge_flow3\">\n                <omgdi:waypoint x=\"550.0\" y=\"278.0\"></omgdi:waypoint>\n                <omgdi:waypoint x=\"550.0\" y=\"167.0\"></omgdi:waypoint>\n                <omgdi:waypoint x=\"650.0\" y=\"167.0\"></omgdi:waypoint>\n            </bpmndi:BPMNEdge>\n            <bpmndi:BPMNEdge bpmnElement=\"flow4\" id=\"BPMNEdge_flow4\">\n                <omgdi:waypoint x=\"550.0\" y=\"318.0\"></omgdi:waypoint>\n                <omgdi:waypoint x=\"550.0\" y=\"397.0\"></omgdi:waypoint>\n                <omgdi:waypoint x=\"660.0\" y=\"397.0\"></omgdi:waypoint>\n            </bpmndi:BPMNEdge>\n            <bpmndi:BPMNEdge bpmnElement=\"flow5\" id=\"BPMNEdge_flow5\">\n                <omgdi:waypoint x=\"755.0\" y=\"167.0\"></omgdi:waypoint>\n                <omgdi:waypoint x=\"899.0\" y=\"167.0\"></omgdi:waypoint>\n                <omgdi:waypoint x=\"900.0\" y=\"257.0\"></omgdi:waypoint>\n            </bpmndi:BPMNEdge>\n            <bpmndi:BPMNEdge bpmnElement=\"flow6\" id=\"BPMNEdge_flow6\">\n                <omgdi:waypoint x=\"765.0\" y=\"397.0\"></omgdi:waypoint>\n                <omgdi:waypoint x=\"900.0\" y=\"397.0\"></omgdi:waypoint>\n                <omgdi:waypoint x=\"900.0\" y=\"297.0\"></omgdi:waypoint>\n            </bpmndi:BPMNEdge>\n            <bpmndi:BPMNEdge bpmnElement=\"flow7\" id=\"BPMNEdge_flow7\">\n                <omgdi:waypoint x=\"920.0\" y=\"277.0\"></omgdi:waypoint>\n                <omgdi:waypoint x=\"965.0\" y=\"277.0\"></omgdi:waypoint>\n            </bpmndi:BPMNEdge>\n        </bpmndi:BPMNPlane>\n    </bpmndi:BPMNDiagram>\n</definitions>\n```\n\n\n\n### éƒ¨ç½²æµç¨‹\n\næ¥ä¸‹æ¥æˆ‘ä»¬å…ˆéƒ¨ç½²æµç¨‹\n\n```java\n    /**\n     * éƒ¨ç½²æµç¨‹ï¼š\n     */\n    @Test\n    public void deploy(){\n        Deployment deploy = repositoryService.createDeployment()\n                .addClasspathResource(\"åŠ¨æ€è¡¨å•02.bpmn20.xml\")\n                .name(\"åŠ¨æ€è¡¨å•02\")\n                .deploy();\n        System.out.println(\"deploy.getId() = \" + deploy.getId());\n        System.out.println(\"deploy.getName() = \" + deploy.getName());\n        System.out.println(\"éƒ¨ç½²å¼€å§‹çš„æ—¶é—´ï¼š\" + new Date());\n    }\n```\n\n\n\n### éƒ¨ç½²è¡¨å•\n\nè¿™ä¸ªæ­¥éª¤å¾ˆé‡è¦ï¼Œæˆ‘ä»¬éœ€è¦å•ç‹¬æŠŠæˆ‘ä»¬çš„formæ–‡ä»¶éƒ¨ç½²åˆ°æµç¨‹ä¸­ã€‚\n\n```java\n    @Autowired\n    private FormRepositoryService formRepositoryService;\n\n    /**\n     * éƒ¨ç½²formè¡¨å•\n     */\n    @Test\n    public void deployForm() throws Exception{\n\n        FormDeployment formDeployment = formRepositoryService.createDeployment()\n                .addClasspathResource(\"holiday.form\")\n                .name(\"test\")\n                .parentDeploymentId(\"1\")\n                .deploy();\n        System.out.println(\"formDeployment.getId() = \" + formDeployment.getId());\n    }\n```\n\næˆ‘ä»¬éœ€è¦é€šè¿‡FormRepositoryServiceæ¥éƒ¨ç½²æˆ‘ä»¬çš„formè¡¨å•ã€‚å¯¹åº”çš„ä¼šåœ¨è¿™å‡ ç§è¡¨ä¸­ç”Ÿæˆå¯¹åº”çš„æ•°æ®\n\nForméƒ¨ç½²è¡¨ï¼š\n\n![image-20220403231443464](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220403231443464.png)\n\n\n\nFormå®šä¹‰è¡¨ï¼š\n\n![image-20220403231556049](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220403231556049.png)\n\n\n\nFormèµ„æºè¡¨ï¼š\n\n![image-20220403231624905](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220403231624905.png)\n\n\n\n\n\n### å¯åŠ¨ä»»åŠ¡\n\nå¸¦æœ‰å¤–ç½®Formè¡¨å•çš„æµç¨‹æˆ‘ä»¬éœ€è¦é€šè¿‡`runtimeService.startProcessInstanceWithForm`æ¥å¯åŠ¨\n\n```java\n    /**\n     * å¯åŠ¨æµç¨‹å®ä¾‹ï¼Œå¹¶ä¸”è®¾ç½®å¯¹åº”çš„å€¼\n     */\n    @Test\n    void startTask(){\n        Map<String,Object> map = new HashMap<>();\n        map.put(\"days\",\"4\");\n        map.put(\"startTime\",\"20220404\");\n        map.put(\"reason\",\"å‡ºå»ç©ç©\");\n        ProcessInstance processInstance = runtimeService.startProcessInstanceWithForm(\n                \"myProcess:1:4\"\n                , null\n                , map\n                , \"è¯·å‡æµç¨‹\");\n        String id = processInstance.getId();\n        System.out.println(\"id = \" + id);\n\n    }\n```\n\nå¯ä»¥çœ‹åˆ°å¯¹åº”çš„ä»»åŠ¡\n\n![image-20220403231811784](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220403231811784.png)\n\n\n\n\n\n### æŸ¥çœ‹ä»»åŠ¡è¡¨å•æ•°æ®\n\nåœ¨ä»»åŠ¡å¤„ç†ä¹‹å‰æˆ‘ä»¬å¯ä»¥æŸ¥çœ‹è¡¨å•çš„å¯¹åº”ä¿¡æ¯ã€‚\n\n```java\n    /**\n     * æŸ¥çœ‹æµç¨‹å®šä¹‰è¡¨å•æ•°æ®\n     */\n    @Test\n    public void getTaskFormData1(){\n        Task task = taskService.createTaskQuery()\n                .processDefinitionId(\"myProcess:1:4\")\n                .taskAssignee(\"zhangsan\")\n                .singleResult();\n        // FormInfo è¡¨å•çš„å…ƒæ•°æ®ä¿¡æ¯\n        FormInfo formInfo = runtimeService.getStartFormModel(\"myProcess:1:4\", \"5001\");\n        System.out.println(\"formInfo.getId() = \" + formInfo.getId());\n        System.out.println(\"formInfo.getName() = \" + formInfo.getName());\n        System.out.println(\"formInfo.getKey() = \" + formInfo.getKey());\n        // FormModel è¡¨å•ä¸­çš„å…·ä½“ä¿¡æ¯ å…·ä½“å®ç°æ˜¯ SimpleFormModel\n        SimpleFormModel formModel = (SimpleFormModel) formInfo.getFormModel();\n        List<FormField> fields = formModel.getFields();\n        for (FormField field : fields) {\n            System.out.println(\"field.getId() = \" + field.getId());\n            System.out.println(\"field.getName() = \" + field.getName());\n            System.out.println(\"field.getValue() = \" + field.getValue());\n        }\n        System.out.println(\"formModel = \" + formModel);\n    }\n\n\t/**\n\t* æŸ¥çœ‹å…·ä½“çš„Taskçš„è¡¨å•æ•°æ®\n\t*/\n    @Test\n    void getTaskData(){\n        FormInfo formInfo = taskService.getTaskFormModel(\"17505\");\n        System.out.println(\"formInfo.getId() = \" + formInfo.getId());\n        System.out.println(\"formInfo.getName() = \" + formInfo.getName());\n        System.out.println(\"formInfo.getKey() = \" + formInfo.getKey());\n        SimpleFormModel formModel = (SimpleFormModel) formInfo.getFormModel();\n        List<FormField> fields = formModel.getFields();\n        for (FormField field : fields) {\n            System.out.println(\"field.getId() = \" + field.getId());\n            System.out.println(\"field.getName() = \" + field.getName());\n            System.out.println(\"field.getValue() = \" + field.getValue());\n        }\n    }\n```\n\n\n\n\n\n### å®Œæˆä»»åŠ¡\n\nåœ¨å¤–ç½®è¡¨å•çš„åœºæ™¯ä¸­æˆ‘ä»¬éœ€è¦é€šè¿‡`taskService.completeTaskWithForm`æ¥å®Œæˆè¡¨å•çš„ä»»åŠ¡\n\n```java\n    /**\n     * å®Œæˆä»»åŠ¡\n     */\n    @Test\n    public void completeTaskForm(){\n        Map<String,Object> map = new HashMap<>();\n        map.put(\"days\",\"4\");\n        map.put(\"startTime\",\"20220404\");\n        map.put(\"reason\",\"å‡ºå»ç©ç©\");\n        String taskId = \"5010\";\n        String formDefinitionId = \"2503\";\n        String outcome = \"æ³¢å“¥\";\n        taskService.completeTaskWithForm(taskId,formDefinitionId,outcome,map);\n    }\n```\n\n\n\nç„¶åä»»åŠ¡å°±æµè½¬åˆ°äº†ä¸‹ä¸€ä¸ªèŠ‚ç‚¹æ¥å¤„ç†äº†\n\n![image-20220403233308221](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220403233308221.png)\n\n\n\n\n\næå®š~ï¼\n\n\n\n\n\n\n\n\n\n# ä»»åŠ¡çš„å›é€€\n\n\n\n## ä¸²è¡Œçš„å›é€€\n\næˆ‘ä»¬å…ˆä»æœ€ç®€å•çš„ä¸²è¡Œæµç¨‹æ¥åˆ†æï¼Œæ¡ˆä¾‹å¦‚ä¸‹\n\n![image-20220404221942030](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220404221942030.png)\n\nå®Œæ•´çš„xmlæ–‡ä»¶å†…å®¹ï¼š\n\n```xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<definitions xmlns=\"http://www.omg.org/spec/BPMN/20100524/MODEL\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:activiti=\"http://activiti.org/bpmn\" xmlns:bpmndi=\"http://www.omg.org/spec/BPMN/20100524/DI\" xmlns:omgdc=\"http://www.omg.org/spec/DD/20100524/DC\" xmlns:omgdi=\"http://www.omg.org/spec/DD/20100524/DI\" typeLanguage=\"http://www.w3.org/2001/XMLSchema\" expressionLanguage=\"http://www.w3.org/1999/XPath\" targetNamespace=\"http://www.activiti.org/test\">\n  <process id=\"myProcess\" name=\"My process\" isExecutable=\"true\">\n    <startEvent id=\"startevent1\" name=\"Start\"></startEvent>\n    <userTask id=\"usertask1\" name=\"ç”¨æˆ·ä»»åŠ¡1\" activiti:assignee=\"user1\"></userTask>\n    <sequenceFlow id=\"flow1\" sourceRef=\"startevent1\" targetRef=\"usertask1\"></sequenceFlow>\n    <userTask id=\"usertask2\" name=\"ç”¨æˆ·ä»»åŠ¡2\" activiti:assignee=\"user2\"></userTask>\n    <sequenceFlow id=\"flow2\" sourceRef=\"usertask1\" targetRef=\"usertask2\"></sequenceFlow>\n    <userTask id=\"usertask3\" name=\"ç”¨æˆ·ä»»åŠ¡3\" activiti:assignee=\"user3\"></userTask>\n    <sequenceFlow id=\"flow3\" sourceRef=\"usertask2\" targetRef=\"usertask3\"></sequenceFlow>\n    <userTask id=\"usertask4\" name=\"ç”¨æˆ·ä»»åŠ¡4\" activiti:assignee=\"user4\"></userTask>\n    <sequenceFlow id=\"flow4\" sourceRef=\"usertask3\" targetRef=\"usertask4\"></sequenceFlow>\n    <endEvent id=\"endevent1\" name=\"End\"></endEvent>\n    <sequenceFlow id=\"flow5\" sourceRef=\"usertask4\" targetRef=\"endevent1\"></sequenceFlow>\n  </process>\n  <bpmndi:BPMNDiagram id=\"BPMNDiagram_myProcess\">\n    <bpmndi:BPMNPlane bpmnElement=\"myProcess\" id=\"BPMNPlane_myProcess\">\n      <bpmndi:BPMNShape bpmnElement=\"startevent1\" id=\"BPMNShape_startevent1\">\n        <omgdc:Bounds height=\"35.0\" width=\"35.0\" x=\"390.0\" y=\"260.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"usertask1\" id=\"BPMNShape_usertask1\">\n        <omgdc:Bounds height=\"55.0\" width=\"105.0\" x=\"470.0\" y=\"250.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"usertask2\" id=\"BPMNShape_usertask2\">\n        <omgdc:Bounds height=\"55.0\" width=\"105.0\" x=\"620.0\" y=\"250.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"usertask3\" id=\"BPMNShape_usertask3\">\n        <omgdc:Bounds height=\"55.0\" width=\"105.0\" x=\"770.0\" y=\"250.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"usertask4\" id=\"BPMNShape_usertask4\">\n        <omgdc:Bounds height=\"55.0\" width=\"105.0\" x=\"920.0\" y=\"250.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"endevent1\" id=\"BPMNShape_endevent1\">\n        <omgdc:Bounds height=\"35.0\" width=\"35.0\" x=\"1070.0\" y=\"260.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNEdge bpmnElement=\"flow1\" id=\"BPMNEdge_flow1\">\n        <omgdi:waypoint x=\"425.0\" y=\"277.0\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"470.0\" y=\"277.0\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"flow2\" id=\"BPMNEdge_flow2\">\n        <omgdi:waypoint x=\"575.0\" y=\"277.0\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"620.0\" y=\"277.0\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"flow3\" id=\"BPMNEdge_flow3\">\n        <omgdi:waypoint x=\"725.0\" y=\"277.0\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"770.0\" y=\"277.0\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"flow4\" id=\"BPMNEdge_flow4\">\n        <omgdi:waypoint x=\"875.0\" y=\"277.0\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"920.0\" y=\"277.0\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"flow5\" id=\"BPMNEdge_flow5\">\n        <omgdi:waypoint x=\"1025.0\" y=\"277.0\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"1070.0\" y=\"277.0\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n    </bpmndi:BPMNPlane>\n  </bpmndi:BPMNDiagram>\n</definitions>\n```\n\nä¸Šé¢çš„æµç¨‹å°±æ˜¯ä¸€ä¸ªéå¸¸ç®€å•çš„ä¸²è¡Œä»»åŠ¡ï¼Œå®šä¹‰äº†4ä¸ªç”¨æˆ·ä»»åŠ¡ï¼ŒæŒ‡æ´¾çš„å¤„ç†äººåˆ†åˆ«æ˜¯`user1`,`user2`,`user3`,`user4`.åœ¨æµç¨‹çš„æ‰§è¡Œè¿‡ç¨‹ä¸­æˆ‘ä»¬å¯ä»¥é€šè¿‡å›é€€æ¥æ¼”ç¤ºå…·ä½“çš„æ•ˆæœã€‚é¦–å…ˆæ¥éƒ¨ç½²æµç¨‹\n\n```java\n    /**\n     * éƒ¨ç½²æµç¨‹\n     */\n    @Test\n    void testDeploy() throws Exception {\n        Deployment deploy = repositoryService.createDeployment()\n                .addClasspathResource(\"ä»»åŠ¡å›é€€01.bpmn20.xml\")\n                .name(\"ä»»åŠ¡å›é€€01\")\n                .deploy();\n        System.out.println(\"deploy.getId() = \" + deploy.getId());\n        System.out.println(\"deploy.getName() = \" + deploy.getName());\n        System.out.println(\"éƒ¨ç½²å¼€å§‹çš„æ—¶é—´ï¼š\" + new Date());\n        //TimeUnit.MINUTES.sleep(3);\n    }\n```\n\nç„¶åæˆ‘ä»¬å¯åŠ¨ä¸€ä¸ªæµç¨‹å®ä¾‹ã€‚\n\n```java\n    /**\n     * å¯åŠ¨æµç¨‹å®ä¾‹\n     */\n    @Test\n    void startProcess(){\n        ProcessInstance processInstance = runtimeService\n                .startProcessInstanceById(\"myProcess:1:4\");\n        System.out.println(\"processInstance.getId() = \" + processInstance.getId());\n    }\n```\n\n\n\n\n\n![image-20220404222436788](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220404222436788.png)\n\n\n\nç„¶åæˆ‘ä»¬é€šè¿‡user1å®Œæˆä»»åŠ¡ï¼Œç›´åˆ°user3å®Œæˆä»»åŠ¡ï¼Œåˆ°user4æ¥å¤„ç†ä»»åŠ¡ã€‚\n\n```java\n    /**\n     * å®Œæˆä»»åŠ¡\n     */\n    @Test\n    void completeTask(){\n        Task task = taskService.createTaskQuery()\n                .processDefinitionId(\"myProcess:1:4\")\n                .taskAssignee(\"user1\")\n                .singleResult();\n        taskService.complete(task.getId());\n    }\n\n```\n\né€šè¿‡ä¸Šé¢çš„å¤šä¸ªTaskå®Œæˆæ“ä½œï¼Œç°åœ¨å·²ç»åˆ°äº†user4æ¥å¤„ç†çš„èŠ‚ç‚¹äº†\n\n![image-20220404223234982](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220404223234982.png)\n\n\n\n![image-20220404223253043](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220404223253043.png)\n\n\n\næˆ‘ä»¬å…ˆçœ‹ä¸‹ä»`ç”¨æˆ·ä»»åŠ¡4`å›é€€åˆ°`ç”¨æˆ·ä»»åŠ¡3`çš„æ“ä½œã€‚\n\n```java\n/**\n * å›é€€æ“ä½œ\n */\n@Test\nvoid rollbackTask(){\n    // å½“å‰çš„Taskå¯¹åº”çš„ç”¨æˆ·ä»»åŠ¡çš„Id\n    List<String> currentActivityIds = new ArrayList<>();\n    currentActivityIds.add(\"usertask4\");\n    // éœ€è¦å›é€€çš„ç›®æ ‡èŠ‚ç‚¹çš„ç”¨æˆ·ä»»åŠ¡Id\n    String newActivityId = \"usertask3\";\n    // å›é€€æ“ä½œ\n    runtimeService.createChangeActivityStateBuilder()\n            .processInstanceId(\"2501\")\n            .moveActivityIdsToSingleActivityId(currentActivityIds,newActivityId)\n            .changeState();\n\n}\n```\n\næ“ä½œåæˆ‘ä»¬å¯ä»¥åœ¨å¯¹åº”çš„å†å²è¡¨ä¸­çœ‹åˆ°ç›¸å…³çš„ä¿¡æ¯\n\n![image-20220404224948722](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220404224948722.png)\n\n\n\n![image-20220404225319024](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220404225319024.png)\n\n\n\nç„¶åæˆ‘ä»¬é€šè¿‡user3æ¥å®Œæˆä»»åŠ¡ç»§ç»­åˆ°user4å¤„ç†ï¼Œç„¶åæˆ‘ä»¬å¯ä»¥æµ‹è¯•å›é€€åˆ°user1å¤„ã€‚\n\n![image-20220404225345357](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220404225345357.png)\n\n```java\n/**\n * å›é€€æ“ä½œ\n */\n@Test\nvoid rollbackTask(){\n    // å½“å‰çš„Taskå¯¹åº”çš„ç”¨æˆ·ä»»åŠ¡çš„Id\n    List<String> currentActivityIds = new ArrayList<>();\n    currentActivityIds.add(\"usertask4\");\n    // éœ€è¦å›é€€çš„ç›®æ ‡èŠ‚ç‚¹çš„ç”¨æˆ·ä»»åŠ¡Id\n    String newActivityId = \"usertask1\";\n    // å›é€€æ“ä½œ\n    runtimeService.createChangeActivityStateBuilder()\n            .processInstanceId(\"2501\")\n            .moveActivityIdsToSingleActivityId(currentActivityIds,newActivityId)\n            .changeState();\n}\n```\n\n![image-20220404225532864](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220404225532864.png)\n\n\n\nå¯ä»¥çœ‹åˆ°ä»»åŠ¡åˆå›åˆ°äº†user1å¤„ã€‚ä¹Ÿå°±æ˜¯åœ¨ä¸²è¡Œçš„æµç¨‹ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å›é€€åˆ°ä»»æ„çš„ç”¨æˆ·èŠ‚ç‚¹ï¼Œå½“ç„¶è¿™ä¸ªä¸²è¡Œä¹ŸåŒ…æ‹¬å¤šäººä¼šç­¾å’Œæ’ä»–ç½‘å…³èŠ‚ç‚¹ã€‚å½“ç„¶åœ¨å›é€€çš„æ—¶å€™æˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨`moveActivityIdTo(String currentActivityId,String newActivityId)`è¿™ä¸ªæ–¹æ³•æ¥å¤„ç†ã€‚\n\n\n\n\n\n## å¹¶è¡Œçš„å›é€€\n\næ¥ä¸‹æ¥æˆ‘ä»¬åœ¨å¹¶è¡Œçš„åœºæ™¯ä¸­æ¥çœ‹çœ‹å„ç§å›é€€çš„åœºæ™¯ã€‚å…·ä½“æ¡ˆä¾‹æµç¨‹å¦‚ä¸‹ï¼š\n\n![image-20220405111325145](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220405111325145.png)\n\nè¯¦ç»†çš„xmlæ–‡ä»¶å†…å®¹ï¼š\n\n```xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<definitions xmlns=\"http://www.omg.org/spec/BPMN/20100524/MODEL\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:activiti=\"http://activiti.org/bpmn\" xmlns:bpmndi=\"http://www.omg.org/spec/BPMN/20100524/DI\" xmlns:omgdc=\"http://www.omg.org/spec/DD/20100524/DC\" xmlns:omgdi=\"http://www.omg.org/spec/DD/20100524/DI\" typeLanguage=\"http://www.w3.org/2001/XMLSchema\" expressionLanguage=\"http://www.w3.org/1999/XPath\" targetNamespace=\"http://www.activiti.org/test\">\n    <process id=\"myProcess\" name=\"My process\" isExecutable=\"true\">\n        <startEvent id=\"startevent1\" name=\"Start\"></startEvent>\n        <userTask id=\"usertask1\" name=\"ç”¨æˆ·å®¡æ‰¹01\" activiti:assignee=\"user1\"></userTask>\n        <sequenceFlow id=\"flow1\" sourceRef=\"startevent1\" targetRef=\"usertask1\"></sequenceFlow>\n        <sequenceFlow id=\"flow2\" sourceRef=\"usertask1\" targetRef=\"parallelgateway1\"></sequenceFlow>\n        <parallelGateway id=\"parallelgateway1\" name=\"Exclusive Gateway\"></parallelGateway>\n        <userTask id=\"usertask2\" name=\"ä¸šåŠ¡è´Ÿè´£äºº\" activiti:assignee=\"user2\"></userTask>\n        <sequenceFlow id=\"flow3\" sourceRef=\"parallelgateway1\" targetRef=\"usertask2\"></sequenceFlow>\n        <userTask id=\"usertask3\" name=\"è¡Œæ”¿å‰¯æ€»\" activiti:assignee=\"user4\"></userTask>\n        <sequenceFlow id=\"flow4\" sourceRef=\"parallelgateway1\" targetRef=\"usertask3\"></sequenceFlow>\n        <userTask id=\"usertask4\" name=\"ä¸šåŠ¡å‰¯æ€»\" activiti:assignee=\"user3\"></userTask>\n        <sequenceFlow id=\"flow5\" sourceRef=\"usertask2\" targetRef=\"usertask4\"></sequenceFlow>\n        <sequenceFlow id=\"flow6\" sourceRef=\"usertask4\" targetRef=\"parallelgateway2\"></sequenceFlow>\n        <parallelGateway id=\"parallelgateway2\" name=\"Exclusive Gateway\"></parallelGateway>\n        <sequenceFlow id=\"flow7\" sourceRef=\"usertask3\" targetRef=\"parallelgateway2\"></sequenceFlow>\n        <userTask id=\"usertask5\" name=\"æ€»ç»ç†\" activiti:assignee=\"user5\"></userTask>\n        <sequenceFlow id=\"flow8\" sourceRef=\"parallelgateway2\" targetRef=\"usertask5\"></sequenceFlow>\n        <endEvent id=\"endevent1\" name=\"End\"></endEvent>\n        <sequenceFlow id=\"flow9\" sourceRef=\"usertask5\" targetRef=\"endevent1\"></sequenceFlow>\n    </process>\n    <bpmndi:BPMNDiagram id=\"BPMNDiagram_myProcess\">\n        <bpmndi:BPMNPlane bpmnElement=\"myProcess\" id=\"BPMNPlane_myProcess\">\n            <bpmndi:BPMNShape bpmnElement=\"startevent1\" id=\"BPMNShape_startevent1\">\n                <omgdc:Bounds height=\"35.0\" width=\"35.0\" x=\"370.0\" y=\"300.0\"></omgdc:Bounds>\n            </bpmndi:BPMNShape>\n            <bpmndi:BPMNShape bpmnElement=\"usertask1\" id=\"BPMNShape_usertask1\">\n                <omgdc:Bounds height=\"55.0\" width=\"105.0\" x=\"450.0\" y=\"290.0\"></omgdc:Bounds>\n            </bpmndi:BPMNShape>\n            <bpmndi:BPMNShape bpmnElement=\"parallelgateway1\" id=\"BPMNShape_parallelgateway1\">\n                <omgdc:Bounds height=\"40.0\" width=\"40.0\" x=\"600.0\" y=\"298.0\"></omgdc:Bounds>\n            </bpmndi:BPMNShape>\n            <bpmndi:BPMNShape bpmnElement=\"usertask2\" id=\"BPMNShape_usertask2\">\n                <omgdc:Bounds height=\"55.0\" width=\"105.0\" x=\"740.0\" y=\"180.0\"></omgdc:Bounds>\n            </bpmndi:BPMNShape>\n            <bpmndi:BPMNShape bpmnElement=\"usertask3\" id=\"BPMNShape_usertask3\">\n                <omgdc:Bounds height=\"55.0\" width=\"105.0\" x=\"740.0\" y=\"370.0\"></omgdc:Bounds>\n            </bpmndi:BPMNShape>\n            <bpmndi:BPMNShape bpmnElement=\"usertask4\" id=\"BPMNShape_usertask4\">\n                <omgdc:Bounds height=\"55.0\" width=\"105.0\" x=\"930.0\" y=\"180.0\"></omgdc:Bounds>\n            </bpmndi:BPMNShape>\n            <bpmndi:BPMNShape bpmnElement=\"parallelgateway2\" id=\"BPMNShape_parallelgateway2\">\n                <omgdc:Bounds height=\"40.0\" width=\"40.0\" x=\"1140.0\" y=\"297.0\"></omgdc:Bounds>\n            </bpmndi:BPMNShape>\n            <bpmndi:BPMNShape bpmnElement=\"usertask5\" id=\"BPMNShape_usertask5\">\n                <omgdc:Bounds height=\"55.0\" width=\"105.0\" x=\"1225.0\" y=\"290.0\"></omgdc:Bounds>\n            </bpmndi:BPMNShape>\n            <bpmndi:BPMNShape bpmnElement=\"endevent1\" id=\"BPMNShape_endevent1\">\n                <omgdc:Bounds height=\"35.0\" width=\"35.0\" x=\"1375.0\" y=\"300.0\"></omgdc:Bounds>\n            </bpmndi:BPMNShape>\n            <bpmndi:BPMNEdge bpmnElement=\"flow1\" id=\"BPMNEdge_flow1\">\n                <omgdi:waypoint x=\"405.0\" y=\"317.0\"></omgdi:waypoint>\n                <omgdi:waypoint x=\"450.0\" y=\"317.0\"></omgdi:waypoint>\n            </bpmndi:BPMNEdge>\n            <bpmndi:BPMNEdge bpmnElement=\"flow2\" id=\"BPMNEdge_flow2\">\n                <omgdi:waypoint x=\"555.0\" y=\"317.0\"></omgdi:waypoint>\n                <omgdi:waypoint x=\"600.0\" y=\"318.0\"></omgdi:waypoint>\n            </bpmndi:BPMNEdge>\n            <bpmndi:BPMNEdge bpmnElement=\"flow3\" id=\"BPMNEdge_flow3\">\n                <omgdi:waypoint x=\"620.0\" y=\"298.0\"></omgdi:waypoint>\n                <omgdi:waypoint x=\"620.0\" y=\"207.0\"></omgdi:waypoint>\n                <omgdi:waypoint x=\"740.0\" y=\"207.0\"></omgdi:waypoint>\n            </bpmndi:BPMNEdge>\n            <bpmndi:BPMNEdge bpmnElement=\"flow4\" id=\"BPMNEdge_flow4\">\n                <omgdi:waypoint x=\"620.0\" y=\"338.0\"></omgdi:waypoint>\n                <omgdi:waypoint x=\"620.0\" y=\"397.0\"></omgdi:waypoint>\n                <omgdi:waypoint x=\"740.0\" y=\"397.0\"></omgdi:waypoint>\n            </bpmndi:BPMNEdge>\n            <bpmndi:BPMNEdge bpmnElement=\"flow5\" id=\"BPMNEdge_flow5\">\n                <omgdi:waypoint x=\"845.0\" y=\"207.0\"></omgdi:waypoint>\n                <omgdi:waypoint x=\"930.0\" y=\"207.0\"></omgdi:waypoint>\n            </bpmndi:BPMNEdge>\n            <bpmndi:BPMNEdge bpmnElement=\"flow6\" id=\"BPMNEdge_flow6\">\n                <omgdi:waypoint x=\"1035.0\" y=\"207.0\"></omgdi:waypoint>\n                <omgdi:waypoint x=\"1159.0\" y=\"207.0\"></omgdi:waypoint>\n                <omgdi:waypoint x=\"1160.0\" y=\"297.0\"></omgdi:waypoint>\n            </bpmndi:BPMNEdge>\n            <bpmndi:BPMNEdge bpmnElement=\"flow7\" id=\"BPMNEdge_flow7\">\n                <omgdi:waypoint x=\"845.0\" y=\"397.0\"></omgdi:waypoint>\n                <omgdi:waypoint x=\"1160.0\" y=\"397.0\"></omgdi:waypoint>\n                <omgdi:waypoint x=\"1160.0\" y=\"337.0\"></omgdi:waypoint>\n            </bpmndi:BPMNEdge>\n            <bpmndi:BPMNEdge bpmnElement=\"flow8\" id=\"BPMNEdge_flow8\">\n                <omgdi:waypoint x=\"1180.0\" y=\"317.0\"></omgdi:waypoint>\n                <omgdi:waypoint x=\"1225.0\" y=\"317.0\"></omgdi:waypoint>\n            </bpmndi:BPMNEdge>\n            <bpmndi:BPMNEdge bpmnElement=\"flow9\" id=\"BPMNEdge_flow9\">\n                <omgdi:waypoint x=\"1330.0\" y=\"317.0\"></omgdi:waypoint>\n                <omgdi:waypoint x=\"1375.0\" y=\"317.0\"></omgdi:waypoint>\n            </bpmndi:BPMNEdge>\n        </bpmndi:BPMNPlane>\n    </bpmndi:BPMNDiagram>\n</definitions>\n```\n\nå…ˆéƒ¨ç½²æµç¨‹ï¼Œç„¶åå¯åŠ¨å¹¶è¿è¡Œåˆ°å¹¶è¡Œæµç¨‹çš„èŠ‚ç‚¹å¦‚ä¸‹çš„ä½ç½®\n![image-20220405111459624](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220405111459624.png)\n\nç„¶åæˆ‘ä»¬å¯ä»¥å°è¯•ä»`ä¸šåŠ¡å‰¯æ€»`å¤„å›é€€åˆ°`ç”¨æˆ·å®¡æ‰¹01`å¤„ï¼Œçœ‹çœ‹è¯¥å¤„ç†åº”è¯¥è¦å¦‚ä½•å®ç°ã€‚\n\n![image-20220405111926713](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220405111926713.png)\n\n\n\nå›é€€é€»è¾‘ä»£ç çš„å®ç°\n\n```java\n    /**\n     * å›é€€æ“ä½œ\n     *   ä¸šåŠ¡å‰¯æ€»é©³å›åˆ°åˆ°ç”¨æˆ·å®¡æ‰¹å¤„  é‚£ä¹ˆè¡Œæ”¿å®¡æ‰¹çš„ä¹Ÿåº”è¯¥è¦è¿”å›\n     */\n    @Test\n    void rollbackTask(){\n        // å½“å‰çš„Taskå¯¹åº”çš„ç”¨æˆ·ä»»åŠ¡çš„Id\n        List<String> currentActivityIds = new ArrayList<>();\n        currentActivityIds.add(\"usertask4\"); // è¡Œæ”¿å‰¯æ€»\n        currentActivityIds.add(\"usertask3\"); // ä¸šåŠ¡å‰¯æ€»\n        // éœ€è¦å›é€€çš„ç›®æ ‡èŠ‚ç‚¹çš„ç”¨æˆ·ä»»åŠ¡Id\n        String newActivityId = \"usertask1\"; // ç”¨æˆ·å®¡æ‰¹01\n        // å›é€€æ“ä½œ\n        runtimeService.createChangeActivityStateBuilder()\n                .processInstanceId(\"22501\")\n                .moveActivityIdsToSingleActivityId(currentActivityIds,newActivityId)\n                .changeState();\n    }\n```\n\næŸ¥çœ‹ACT_RU_TASKå¯ä»¥çœ‹åˆ°å›åˆ°äº†`ç”¨æˆ·å®¡æ‰¹01`äº†\n\n![image-20220405112329439](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220405112329439.png)\n\nåŒæ—¶åœ¨ACT_HI_ACTINSä¸­ä¹Ÿå¯ä»¥çœ‹åˆ°å›é€€çš„å†å²æ“ä½œ\n\n![image-20220405112544706](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220405112544706.png)\n\n\n\nç„¶åå†æ¥çœ‹çœ‹ è¡Œæ”¿å‰¯æ€»çš„ å¹¶è¡Œåˆ†æ”¯æ‰§è¡Œå®Œæˆäº†ï¼Œç„¶ååœ¨ ä¸šåŠ¡å‰¯æ€»å¤„å®¡æ‰¹è¦é©³å›çš„å¤„ç†\n\n![image-20220405113125822](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220405113125822.png)\n\n![image-20220405113212465](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220405113212465.png)\n\n\n\n```java\n    @Test\n    void rollbackTask(){\n        // å½“å‰çš„Taskå¯¹åº”çš„ç”¨æˆ·ä»»åŠ¡çš„Id\n        List<String> currentActivityIds = new ArrayList<>();\n        currentActivityIds.add(\"usertask4\"); // è¡Œæ”¿å‰¯æ€»\n        //currentActivityIds.add(\"usertask3\"); // ä¸šåŠ¡å‰¯æ€»\n        // éœ€è¦å›é€€çš„ç›®æ ‡èŠ‚ç‚¹çš„ç”¨æˆ·ä»»åŠ¡Id\n        String newActivityId = \"usertask1\"; // ç”¨æˆ·å®¡æ‰¹01\n        // å›é€€æ“ä½œ\n        runtimeService.createChangeActivityStateBuilder()\n                .processInstanceId(\"22501\")\n                .moveActivityIdsToSingleActivityId(currentActivityIds,newActivityId)\n                .changeState();\n    }\n```\n\n\n\nä¸€æ ·çš„æ•ˆæœ\n\n\n\n## å­æµç¨‹å›é€€\n\næœ€åæˆ‘ä»¬æ¥çœ‹çœ‹å¸¦æœ‰å­æµç¨‹çš„åœºæ™¯ä¸‹å¦‚æœæœ‰å›é€€çš„æƒ…å†µåº”è¯¥è¦å¦‚ä½•æ¥å¤„ç†,æ¡ˆä¾‹å¦‚ä¸‹ï¼š\n\n![image-20220405134220482](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220405134220482.png)\n\nå®Œæ•´çš„xmlå†…å®¹ä¸ºï¼š\n\n```xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<definitions xmlns=\"http://www.omg.org/spec/BPMN/20100524/MODEL\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:activiti=\"http://activiti.org/bpmn\" xmlns:bpmndi=\"http://www.omg.org/spec/BPMN/20100524/DI\" xmlns:omgdc=\"http://www.omg.org/spec/DD/20100524/DC\" xmlns:omgdi=\"http://www.omg.org/spec/DD/20100524/DI\" typeLanguage=\"http://www.w3.org/2001/XMLSchema\" expressionLanguage=\"http://www.w3.org/1999/XPath\" targetNamespace=\"http://www.activiti.org/test\">\n  <process id=\"myProcess\" name=\"My process\" isExecutable=\"true\">\n    <startEvent id=\"startevent1\" name=\"Start\"></startEvent>\n    <userTask id=\"usertask1\" name=\"ä¸»ä»»åŠ¡1\" activiti:assignee=\"user1\"></userTask>\n    <sequenceFlow id=\"flow1\" sourceRef=\"startevent1\" targetRef=\"usertask1\"></sequenceFlow>\n    <subProcess id=\"subprocess1\" name=\"Sub Process\">\n      <startEvent id=\"startevent2\" name=\"Start\"></startEvent>\n      <userTask id=\"usertask2\" name=\"å­ä»»åŠ¡1\" activiti:assignee=\"user2\"></userTask>\n      <sequenceFlow id=\"flow3\" sourceRef=\"startevent2\" targetRef=\"usertask2\"></sequenceFlow>\n      <endEvent id=\"endevent1\" name=\"End\"></endEvent>\n      <sequenceFlow id=\"flow4\" sourceRef=\"usertask2\" targetRef=\"endevent1\"></sequenceFlow>\n    </subProcess>\n    <sequenceFlow id=\"flow2\" sourceRef=\"usertask1\" targetRef=\"subprocess1\"></sequenceFlow>\n    <userTask id=\"usertask3\" name=\"ä¸»ä»»åŠ¡2\" activiti:assignee=\"user3\"></userTask>\n    <sequenceFlow id=\"flow5\" sourceRef=\"subprocess1\" targetRef=\"usertask3\"></sequenceFlow>\n    <endEvent id=\"endevent2\" name=\"End\"></endEvent>\n    <sequenceFlow id=\"flow6\" sourceRef=\"usertask3\" targetRef=\"endevent2\"></sequenceFlow>\n  </process>\n  <bpmndi:BPMNDiagram id=\"BPMNDiagram_myProcess\">\n    <bpmndi:BPMNPlane bpmnElement=\"myProcess\" id=\"BPMNPlane_myProcess\">\n      <bpmndi:BPMNShape bpmnElement=\"startevent1\" id=\"BPMNShape_startevent1\">\n        <omgdc:Bounds height=\"35.0\" width=\"35.0\" x=\"320.0\" y=\"290.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"usertask1\" id=\"BPMNShape_usertask1\">\n        <omgdc:Bounds height=\"55.0\" width=\"105.0\" x=\"400.0\" y=\"280.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"subprocess1\" id=\"BPMNShape_subprocess1\">\n        <omgdc:Bounds height=\"291.0\" width=\"481.0\" x=\"620.0\" y=\"168.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"startevent2\" id=\"BPMNShape_startevent2\">\n        <omgdc:Bounds height=\"35.0\" width=\"35.0\" x=\"680.0\" y=\"298.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"usertask2\" id=\"BPMNShape_usertask2\">\n        <omgdc:Bounds height=\"55.0\" width=\"105.0\" x=\"760.0\" y=\"288.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"endevent1\" id=\"BPMNShape_endevent1\">\n        <omgdc:Bounds height=\"35.0\" width=\"35.0\" x=\"910.0\" y=\"298.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"usertask3\" id=\"BPMNShape_usertask3\">\n        <omgdc:Bounds height=\"55.0\" width=\"105.0\" x=\"1146.0\" y=\"286.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"endevent2\" id=\"BPMNShape_endevent2\">\n        <omgdc:Bounds height=\"35.0\" width=\"35.0\" x=\"1296.0\" y=\"296.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNEdge bpmnElement=\"flow1\" id=\"BPMNEdge_flow1\">\n        <omgdi:waypoint x=\"355.0\" y=\"307.0\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"400.0\" y=\"307.0\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"flow3\" id=\"BPMNEdge_flow3\">\n        <omgdi:waypoint x=\"715.0\" y=\"315.0\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"760.0\" y=\"315.0\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"flow4\" id=\"BPMNEdge_flow4\">\n        <omgdi:waypoint x=\"865.0\" y=\"315.0\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"910.0\" y=\"315.0\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"flow2\" id=\"BPMNEdge_flow2\">\n        <omgdi:waypoint x=\"505.0\" y=\"307.0\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"620.0\" y=\"313.0\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"flow5\" id=\"BPMNEdge_flow5\">\n        <omgdi:waypoint x=\"1101.0\" y=\"313.0\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"1146.0\" y=\"313.0\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"flow6\" id=\"BPMNEdge_flow6\">\n        <omgdi:waypoint x=\"1251.0\" y=\"313.0\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"1296.0\" y=\"313.0\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n    </bpmndi:BPMNPlane>\n  </bpmndi:BPMNDiagram>\n</definitions>\n```\n\n\n\néƒ¨ç½²æµç¨‹åå¹¶å¯åŠ¨æµç¨‹ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹ç¬¬ä¸€ä¸ªåœºæ™¯ï¼Œä»å­æµç¨‹å›é€€åˆ°ä¸»æµç¨‹ï¼Œä¹Ÿå°±æ˜¯å¦‚ä¸‹å›¾ï¼š\n\n![image-20220405134411503](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220405134411503.png)\n\nTaskè¿›å…¥åˆ°äº†å­æµç¨‹çš„Taskå¤„\n\n![image-20220405134811970](C:\\Users\\dpb\\AppData\\Roaming\\Typora\\typora-user-images\\image-20220405134811970.png)\n\n\n\nç„¶åæˆ‘ä»¬æ¥å¤„ç†å›é€€åˆ°ä¸»æµç¨‹:ç›´æ¥è·³è½¬å³å¯\n\n```java\n    /**\n     * å›é€€æ“ä½œ\n     *   ä»å­æµç¨‹å›é€€åˆ°ä¸»æµç¨‹æ“ä½œ\n     */\n    @Test\n    void rollbackMainTask(){\n\n        // å›é€€æ“ä½œ\n        runtimeService.createChangeActivityStateBuilder()\n                .processInstanceId(\"2501\")\n                .moveActivityIdTo(\"usertask2\",\"usertask1\")\n                .changeState();\n    }\n\n}\n\n    /**\n     * å›é€€æ“ä½œ\n     *   ä»å­æµç¨‹å›é€€åˆ°ä¸»æµç¨‹æ“ä½œï¼šmoveExecutionToActivityIdä¸å…³å¿ƒå½“å‰çš„èŠ‚ç‚¹\n     */\n    @Test\n    void rollbackMainTask(){\n\n        // å›é€€æ“ä½œ\n        runtimeService.createChangeActivityStateBuilder()\n                .processInstanceId(\"2501\")\n                .moveExecutionToActivityId(\"5003\",\"usertask1\")\n                .changeState();\n    }\n```\n\nç„¶åä»ä¸»æµç¨‹å›é€€åˆ°å­æµç¨‹æ“ä½œ\n\n![image-20220405140816409](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220405140816409.png)\n\n![image-20220405141015720](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220405141015720.png)\n\n\n\nåŒæ ·çš„ç›´æ¥è·³è½¬å³å¯\n\n```java\n/**\n * å›é€€æ“ä½œ\n */\n@Test\nvoid rollbackSubTask(){\n\n    // å›é€€æ“ä½œ\n    runtimeService.createChangeActivityStateBuilder()\n            .processInstanceId(\"2501\")\n            .moveActivityIdTo(\"usertask3\",\"usertask2\")\n            .changeState();\n}\n```\n\n","slug":"flowableè¿›é˜¶ç¯‡","published":1,"updated":"2022-11-05T14:16:59.512Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clas9erst000hdk8fdqj20ye1","content":"<h1 id=\"Flowableè¿›é˜¶ç¯‡\"><a href=\"#Flowableè¿›é˜¶ç¯‡\" class=\"headerlink\" title=\"Flowableè¿›é˜¶ç¯‡\"></a>Flowableè¿›é˜¶ç¯‡</h1><blockquote>\n<p>Lectureï¼šæ³¢æ³¢è€å¸ˆ</p>\n</blockquote>\n<h1 id=\"å¤šäººä¼šç­¾\"><a href=\"#å¤šäººä¼šç­¾\" class=\"headerlink\" title=\"å¤šäººä¼šç­¾\"></a>å¤šäººä¼šç­¾</h1><h2 id=\"æµç¨‹å›¾ç»˜åˆ¶\"><a href=\"#æµç¨‹å›¾ç»˜åˆ¶\" class=\"headerlink\" title=\"æµç¨‹å›¾ç»˜åˆ¶\"></a>æµç¨‹å›¾ç»˜åˆ¶</h2><p>å¤šäººä¼šç­¾æ˜¯æŒ‡ä¸€ä¸ªä»»åŠ¡éœ€è¦å¤šä¸ªäººæ¥å¤„ç†ï¼Œæ¡ˆä¾‹è®²è§£</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220402092950976.png\"\n                      alt=\"image-20220402092950976\"\n                ></p>\n<p>å®Œæ•´çš„xmlå†…å®¹</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=<span class=\"string\">&quot;1.0&quot;</span> encoding=<span class=\"string\">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">definitions</span> <span class=\"attr\">xmlns</span>=<span class=\"string\">&quot;http://www.omg.org/spec/BPMN/20100524/MODEL&quot;</span> <span class=\"attr\">xmlns:xsi</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span> <span class=\"attr\">xmlns:xsd</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema&quot;</span> <span class=\"attr\">xmlns:activiti</span>=<span class=\"string\">&quot;http://activiti.org/bpmn&quot;</span> <span class=\"attr\">xmlns:bpmndi</span>=<span class=\"string\">&quot;http://www.omg.org/spec/BPMN/20100524/DI&quot;</span> <span class=\"attr\">xmlns:omgdc</span>=<span class=\"string\">&quot;http://www.omg.org/spec/DD/20100524/DC&quot;</span> <span class=\"attr\">xmlns:omgdi</span>=<span class=\"string\">&quot;http://www.omg.org/spec/DD/20100524/DI&quot;</span> <span class=\"attr\">typeLanguage</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema&quot;</span> <span class=\"attr\">expressionLanguage</span>=<span class=\"string\">&quot;http://www.w3.org/1999/XPath&quot;</span> <span class=\"attr\">targetNamespace</span>=<span class=\"string\">&quot;http://www.activiti.org/test&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">process</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;myProcess&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;My process&quot;</span> <span class=\"attr\">isExecutable</span>=<span class=\"string\">&quot;true&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">startEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;startevent1&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;Start&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">startEvent</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">userTask</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;usertask1&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;User Task&quot;</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">extensionElements</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">activiti:taskListener</span> <span class=\"attr\">event</span>=<span class=\"string\">&quot;create&quot;</span> <span class=\"attr\">expression</span>=<span class=\"string\">&quot;$&#123;mulitiInstanceTaskListener.completeListener(execution)&#125;&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">activiti:taskListener</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">extensionElements</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">multiInstanceLoopCharacteristics</span> <span class=\"attr\">isSequential</span>=<span class=\"string\">&quot;false&quot;</span> <span class=\"attr\">activiti:collection</span>=<span class=\"string\">&quot;persons&quot;</span> <span class=\"attr\">activiti:elementVariable</span>=<span class=\"string\">&quot;person&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">loopCardinality</span>&gt;</span>3<span class=\"tag\">&lt;/<span class=\"name\">loopCardinality</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">completionCondition</span>&gt;</span>$&#123;mulitiInstanceCompleteTask.completeTask(execution)&#125;<span class=\"tag\">&lt;/<span class=\"name\">completionCondition</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">multiInstanceLoopCharacteristics</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">userTask</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;flow1&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;startevent1&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;usertask1&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">endEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;endevent1&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;End&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">endEvent</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;flow2&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;usertask1&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;endevent1&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">process</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNDiagram</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNDiagram_myProcess&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNPlane</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;myProcess&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNPlane_myProcess&quot;</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;startevent1&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_startevent1&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;35.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;35.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;420.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;310.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;usertask1&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_usertask1&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;55.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;105.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;700.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;300.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;endevent1&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_endevent1&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;35.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;35.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;950.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;310.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;flow1&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_flow1&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;455.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;327.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;700.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;327.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;flow2&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_flow2&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;805.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;327.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;950.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;327.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNPlane</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNDiagram</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">definitions</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"æµç¨‹è¯´æ˜\"><a href=\"#æµç¨‹è¯´æ˜\" class=\"headerlink\" title=\"æµç¨‹è¯´æ˜\"></a>æµç¨‹è¯´æ˜</h2><p>1.åœ¨ç”¨æˆ·ä»»åŠ¡èŠ‚ç‚¹ç»‘å®šäº†ä¸€ä¸ªç›‘å¬å™¨ï¼Œç›‘å¬<code>create</code>è¡Œä¸ºï¼Œè¯¥ç›‘å¬å™¨æˆ‘ä»¬æ˜¯é€šè¿‡UELè¡¨è¾¾å¼æ¥å®ç°çš„ï¼Œ<code>mulitiInstanceTaskListener</code>æ˜¯æˆ‘ä»¬æ³¨å…¥åˆ°Springå®¹å™¨ä¸­çš„å¯¹è±¡</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220402095348908.png\"\n                      alt=\"image-20220402095348908\"\n                ></p>\n<p>å¯¹åº”çš„ç›‘å¬çš„ä»£ç å¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Component(&quot;mulitiInstanceTaskListener&quot;)</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">MulitiInstanceTaskListener</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">Serializable</span> &#123;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">completeListener</span><span class=\"params\">(DelegateExecution execution)</span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;ä»»åŠ¡ï¼š&quot;</span>+execution.getId());</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;persons:&quot;</span> + execution.getVariable(<span class=\"string\">&quot;persons&quot;</span>));</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;person&quot;</span> + execution.getVariable(<span class=\"string\">&quot;person&quot;</span>));</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>2.åœ¨Multi instanceä¸­çš„é…ç½®</p>\n<ul>\n<li>Loop cardinality:è®¾ç½®ä¸º3è¡¨ç¤ºåªå¾ªç¯3æ¬¡ï¼Œä¹Ÿå°±æ˜¯ä¸‰ä¸ªäººä¼šç­¾</li>\n<li>Collectionï¼šè¡¨ç¤ºè¦å¾ªç¯çš„é›†åˆï¼Œæˆ‘ä»¬ç»™çš„æ˜¯personsï¼Œåé¢éœ€è¦åœ¨æµç¨‹å˜é‡ä¸­èµ‹å€¼</li>\n<li>Element variableï¼šè¡¨ç¤ºå¾ªç¯çš„å˜é‡</li>\n<li>Completion conditionï¼šè¡¨ç¤ºä»»åŠ¡ç»“æŸçš„æ¡ä»¶ï¼Œä¹Ÿå°±æ˜¯å¤šäººä¼šç­¾çš„ç»“æŸæ¡ä»¶ï¼Œåœ¨æ­¤å¤„æˆ‘ä»¬ç”¨çš„æ˜¯UELè¡¨è¾¾å¼ï¼Œ<code>mulitiInstanceCompleteTask</code>è¡¨ç¤ºçš„æ˜¯æˆ‘ä»¬æ³¨å…¥åˆ°Springå®¹å™¨ä¸­çš„å¯¹è±¡</li>\n</ul>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"C:\\Users\\dpb\\AppData\\Roaming\\Typora\\typora-user-images\\image-20220402100649924.png\"\n                      alt=\"image-20220402100649924\"\n                ></p>\n<p><code>mulitiInstanceCompleteTask</code>å¯¹è±¡çš„å®Œæ•´ä»£ç ä¸ºï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Component(&quot;mulitiInstanceCompleteTask&quot;)</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">MulitiInstanceCompleteTask</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">Serializable</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * å®Œæˆä»»åŠ¡æ˜¯éœ€è¦è§¦å‘çš„æ–¹æ³•</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> execution</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">     *     false è¡¨ç¤ºä¼šç­¾ä»»åŠ¡è¿˜æ²¡æœ‰ç»“æŸ</span></span><br><span class=\"line\"><span class=\"comment\">     </span></span><br><span class=\"line\"><span class=\"comment\">     *     true è¡¨ç¤ºä¼šç­¾ä»»åŠ¡ç»“æŸäº†</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"type\">boolean</span> <span class=\"title function_\">completeTask</span><span class=\"params\">(DelegateExecution execution)</span> &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;æ€»çš„ä¼šç­¾ä»»åŠ¡æ•°é‡ï¼š&quot;</span> + execution.getVariable(<span class=\"string\">&quot;nrOfInstances&quot;</span>)</span><br><span class=\"line\">                + <span class=\"string\">&quot;å½“å‰è·å–çš„ä¼šç­¾ä»»åŠ¡æ•°é‡ï¼š&quot;</span> + execution.getVariable(<span class=\"string\">&quot;nrOfActiveInstances&quot;</span>)</span><br><span class=\"line\">                + <span class=\"string\">&quot; - &quot;</span> + <span class=\"string\">&quot;å·²ç»å®Œæˆçš„ä¼šç­¾ä»»åŠ¡æ•°é‡ï¼š&quot;</span> + execution.getVariable(<span class=\"string\">&quot;nrOfCompletedInstances&quot;</span>));</span><br><span class=\"line\">        <span class=\"comment\">//æœ‰ä¸€ä¸ªäººåŒæ„å°±é€šè¿‡</span></span><br><span class=\"line\">        <span class=\"type\">Boolean</span> <span class=\"variable\">flag</span> <span class=\"operator\">=</span> (Boolean) execution.getVariable(<span class=\"string\">&quot;flag&quot;</span>);</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;å½“å‰æ„è§ï¼š&quot;</span>+flag);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> flag;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ä¸Šé¢çš„ä¸‰ä¸ªå˜é‡æ˜¯Flowableä¸­è‡ªå¸¦çš„å¯ç”¨å˜é‡</p>\n<ol>\n<li><p>nrOfInstances:è¯¥ä¼šç­¾ç¯èŠ‚ä¸­æ€»å…±æœ‰å¤šå°‘ä¸ªå®ä¾‹</p>\n</li>\n<li><p>nrOfActiveInstances:å½“å‰æ´»åŠ¨çš„å®ä¾‹çš„æ•°é‡ï¼Œå³è¿˜æ²¡æœ‰å®Œæˆçš„å®ä¾‹æ•°é‡ã€‚</p>\n</li>\n<li><p>nrOfCompletedInstances:å·²ç»å®Œæˆçš„å®ä¾‹çš„æ•°é‡</p>\n</li>\n</ol>\n<h2 id=\"æ¡ˆä¾‹æ¼”ç¤º\"><a href=\"#æ¡ˆä¾‹æ¼”ç¤º\" class=\"headerlink\" title=\"æ¡ˆä¾‹æ¼”ç¤º\"></a>æ¡ˆä¾‹æ¼”ç¤º</h2><h3 id=\"éƒ¨ç½²æµç¨‹\"><a href=\"#éƒ¨ç½²æµç¨‹\" class=\"headerlink\" title=\"éƒ¨ç½²æµç¨‹\"></a>éƒ¨ç½²æµç¨‹</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Deploy</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"title function_\">testDeploy</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> Exception &#123;</span><br><span class=\"line\">    <span class=\"type\">Deployment</span> <span class=\"variable\">deploy</span> <span class=\"operator\">=</span> repositoryService.createDeployment()</span><br><span class=\"line\">            .addClasspathResource(<span class=\"string\">&quot;ä¼šç­¾æ¡ˆä¾‹.bpmn20.xml&quot;</span>)</span><br><span class=\"line\">            .name(<span class=\"string\">&quot;ä¼šç­¾æ¡ˆä¾‹&quot;</span>)</span><br><span class=\"line\">            .deploy();</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;deploy.getId() = &quot;</span> + deploy.getId());</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;deploy.getName() = &quot;</span> + deploy.getName());</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;éƒ¨ç½²å¼€å§‹çš„æ—¶é—´ï¼š&quot;</span> + <span class=\"keyword\">new</span> <span class=\"title class_\">Date</span>());</span><br><span class=\"line\">    <span class=\"comment\">//TimeUnit.MINUTES.sleep(3);</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"å¯åŠ¨æµç¨‹\"><a href=\"#å¯åŠ¨æµç¨‹\" class=\"headerlink\" title=\"å¯åŠ¨æµç¨‹\"></a>å¯åŠ¨æµç¨‹</h3><p>åœ¨å¯åŠ¨æµç¨‹å®ä¾‹çš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦è®¾ç½®ç›¸å…³çš„å‚æ•°ï¼Œåœ¨æµç¨‹å®šä¹‰çš„æ—¶å€™è®¾ç½®çš„personsåœ¨æ­¤å¤„æˆ‘ä»¬å°±éœ€è¦è®¾ç½®äº†ï¼Œè®¾ç½®ä¸ºArrays.asList(â€œå¼ ä¸‰â€,â€æå››â€,â€ç‹äº”â€,â€èµµå…­â€)ï¼Œè¿™é‡Œè®¾ç½®äº†4ä¸ªå…ƒç´ ï¼Œåœ¨æµç¨‹å®šä¹‰é‡Œå®šä¹‰äº†3ä¸ªï¼Œè¡¨ç¤ºåªä¼šå¾ªç¯3æ¬¡ï¼Œå¯åŠ¨æµç¨‹åï¼Œåœ¨Taskä¸­å¯ä»¥çœ‹åˆ°åªæœ‰3ä¸ªä»»åŠ¡</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"title function_\">startFlow</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> Exception&#123;</span><br><span class=\"line\">    Map&lt;String,Object&gt; map = <span class=\"keyword\">new</span> <span class=\"title class_\">HashMap</span>&lt;&gt;();</span><br><span class=\"line\">    <span class=\"comment\">// è®¾ç½®å¤šäººä¼šç­¾çš„æ•°æ®</span></span><br><span class=\"line\">    map.put(<span class=\"string\">&quot;persons&quot;</span>, Arrays.asList(<span class=\"string\">&quot;å¼ ä¸‰&quot;</span>,<span class=\"string\">&quot;æå››&quot;</span>,<span class=\"string\">&quot;ç‹äº”&quot;</span>,<span class=\"string\">&quot;èµµå…­&quot;</span>));</span><br><span class=\"line\">    <span class=\"type\">ProcessInstance</span> <span class=\"variable\">processInstance</span> <span class=\"operator\">=</span> runtimeService</span><br><span class=\"line\">            .startProcessInstanceById(<span class=\"string\">&quot;myProcess:1:ba1518fc-b22d-11ec-9313-c03c59ad2248&quot;</span>,map);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220402104240267.png\"\n                      alt=\"image-20220402104240267\"\n                ></p>\n<p>åŒæ—¶æ§åˆ¶ä¹Ÿæœ‰å¯¹åº”çš„è¾“å‡ºï¼Œè§¦å‘äº†Taskçš„åˆ›å»ºäº‹ä»¶</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220402104319944.png\"\n                      alt=\"image-20220402104319944\"\n                ></p>\n<h3 id=\"ä¼šç­¾å¤„ç†ä»»åŠ¡\"><a href=\"#ä¼šç­¾å¤„ç†ä»»åŠ¡\" class=\"headerlink\" title=\"ä¼šç­¾å¤„ç†ä»»åŠ¡\"></a>ä¼šç­¾å¤„ç†ä»»åŠ¡</h3><p>å¯åŠ¨æµç¨‹åæˆ‘ä»¬å‘ä¸‹åœ¨Taskä¸­äº§ç”Ÿäº†3æ¡ä»»åŠ¡ï¼Œæˆ‘ä»¬å…ˆé€šè¿‡TaskServiceæ¥å®Œæˆå…¶ä¸­ä¸€ä¸ªä»»åŠ¡ï¼Œè®¾ç½®ä¸€ä¸ªæ ‡å¿—flagä¸ºfalseï¼Œæ¥æ§åˆ¶ä¼šç­¾è¿˜æ²¡æœ‰ç»“æŸï¼ŒåŒæ—¶Taskä¸­å¦å¤–ä¸¤ä¸ªä»»åŠ¡è¿˜åœ¨</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"title function_\">completeTask1</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    Map&lt;String,Object&gt; map = <span class=\"keyword\">new</span> <span class=\"title class_\">HashMap</span>&lt;&gt;();</span><br><span class=\"line\">    map.put(<span class=\"string\">&quot;flag&quot;</span>,<span class=\"literal\">false</span>);</span><br><span class=\"line\">    taskService.complete(<span class=\"string\">&quot;71337501-b22e-11ec-a534-c03c59ad2248&quot;</span>,map);</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;complete ....&quot;</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220402104554823.png\"\n                      alt=\"image-20220402104554823\"\n                ></p>\n<p>å½“ä»»åŠ¡æ‰§è¡Œå®Œæˆæ—¶ä¼šåŒæ­¥è§¦å‘ä¼šç­¾å®Œæˆè¡¨è¾¾å¼ä¸­å¯¹è±¡æ–¹æ³•ã€‚æœ‰å¦‚ä¸‹çš„è¾“å‡º</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220402104729627.png\"\n                      alt=\"image-20220402104729627\"\n                ></p>\n<p>åŒæ—¶Taskè¡¨ä¸­çš„è®°å½•è¿˜æœ‰ä¸¤æ¡</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220402104819239.png\"\n                      alt=\"image-20220402104819239\"\n                ></p>\n<p>ç„¶åå½“æˆ‘ä»¬åœ¨å®Œæˆä¸€ä¸ªä»»åŠ¡ï¼Œè¿™æ—¶è®¾ç½®flagä¸ºtrueï¼Œä¼šå‘ç°åœ¨è¿™ä¸ªå¤šäººå¤„ç†ä¸­ï¼Œæœ€å¤š3ä¸ªäººå¤„ç†åœ¨ç¬¬äºŒä¸ªäººå¤„ç†åå°±ç»“æŸäº†</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"title function_\">completeTask1</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    Map&lt;String,Object&gt; map = <span class=\"keyword\">new</span> <span class=\"title class_\">HashMap</span>&lt;&gt;();</span><br><span class=\"line\">    map.put(<span class=\"string\">&quot;flag&quot;</span>,<span class=\"literal\">true</span>); <span class=\"comment\">// è®¾ç½®ä¸ºtrue ç»“æŸå¤šäººä¼šç­¾</span></span><br><span class=\"line\">    taskService.complete(<span class=\"string\">&quot;713570d4-b22e-11ec-a534-c03c59ad2248&quot;</span>,map);</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;complete ....&quot;</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n\n\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220402105058601.png\"\n                      alt=\"image-20220402105058601\"\n                ></p>\n<p>åŒæ—¶æ¥çœ‹çœ‹è¡¨ç»“æ„ä¸­çš„è®°å½•ï¼Œå‘ç°æ²¡æœ‰äº†</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220402105148471.png\"\n                      alt=\"image-20220402105148471\"\n                ></p>\n<p>æå®š~</p>\n<h1 id=\"åŠ¨æ€è¡¨å•\"><a href=\"#åŠ¨æ€è¡¨å•\" class=\"headerlink\" title=\"åŠ¨æ€è¡¨å•\"></a>åŠ¨æ€è¡¨å•</h1><p>Flowableæä¾›äº†ä¸€ç§ç®€ä¾¿çµæ´»çš„æ–¹å¼ï¼Œç”¨æ¥ä¸ºä¸šåŠ¡æµç¨‹ä¸­çš„äººå·¥æ­¥éª¤æ·»åŠ è¡¨å•ã€‚ æœ‰ä¸¤ç§ä½¿ç”¨è¡¨å•çš„æ–¹æ³•ï¼šä½¿ç”¨ï¼ˆç”±è¡¨å•è®¾è®¡å™¨åˆ›å»ºçš„ï¼‰è¡¨å•å®šä¹‰çš„å†…ç½®è¡¨å•æ¸²æŸ“ï¼Œä»¥åŠå¤–éƒ¨è¡¨å•æ¸²æŸ“ã€‚ ä½¿ç”¨å¤–éƒ¨è¡¨å•æ¸²æŸ“æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ï¼ˆè‡ªExplorer webåº”ç”¨V5ç‰ˆæœ¬æ”¯æŒçš„ï¼‰è¡¨å•å‚æ•°ï¼›ä¹Ÿå¯ä»¥ä½¿ç”¨è¡¨å•keyå®šä¹‰ï¼Œå¼•ç”¨å¤–éƒ¨çš„ã€ä½¿ç”¨è‡ªå®šä¹‰ä»£ç è§£æçš„è¡¨å•ã€‚</p>\n<h2 id=\"æµç¨‹ç»˜åˆ¶\"><a href=\"#æµç¨‹ç»˜åˆ¶\" class=\"headerlink\" title=\"æµç¨‹ç»˜åˆ¶\"></a>æµç¨‹ç»˜åˆ¶</h2><p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220403133804306.png\"\n                      alt=\"image-20220403133804306\"\n                ></p>\n<p>è¡¨å•è®¾è®¡</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220403133735195.png\"\n                      alt=\"image-20220403133735195\"\n                ></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220403133710713.png\"\n                      alt=\"image-20220403133710713\"\n                ></p>\n<h2 id=\"æ¡ˆä¾‹æ¼”ç¤º-1\"><a href=\"#æ¡ˆä¾‹æ¼”ç¤º-1\" class=\"headerlink\" title=\"æ¡ˆä¾‹æ¼”ç¤º\"></a>æ¡ˆä¾‹æ¼”ç¤º</h2><h3 id=\"éƒ¨ç½²æµç¨‹-1\"><a href=\"#éƒ¨ç½²æµç¨‹-1\" class=\"headerlink\" title=\"éƒ¨ç½²æµç¨‹\"></a>éƒ¨ç½²æµç¨‹</h3><p>æµç¨‹å›¾ç»˜åˆ¶å¥½ä¹‹åæˆ‘ä»¬å°±å¯ä»¥ç›´æ¥æ¥éƒ¨ç½²è¿™ä¸ªæµç¨‹äº†</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * Deploy</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"keyword\">void</span> <span class=\"title function_\">testDeploy</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> Exception &#123;</span><br><span class=\"line\">        <span class=\"type\">Deployment</span> <span class=\"variable\">deploy</span> <span class=\"operator\">=</span> repositoryService.createDeployment()</span><br><span class=\"line\">                .addClasspathResource(<span class=\"string\">&quot;åŠ¨æ€è¡¨å•01.bpmn20.xml&quot;</span>)</span><br><span class=\"line\">                .name(<span class=\"string\">&quot;åŠ¨æ€è¡¨å•01&quot;</span>)</span><br><span class=\"line\">                .deploy();</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;deploy.getId() = &quot;</span> + deploy.getId());</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;deploy.getName() = &quot;</span> + deploy.getName());</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;éƒ¨ç½²å¼€å§‹çš„æ—¶é—´ï¼š&quot;</span> + <span class=\"keyword\">new</span> <span class=\"title class_\">Date</span>());</span><br><span class=\"line\">        <span class=\"comment\">//TimeUnit.MINUTES.sleep(3);</span></span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"æŸ¥çœ‹æµç¨‹å…³è”çš„è¡¨å•ä¿¡æ¯\"><a href=\"#æŸ¥çœ‹æµç¨‹å…³è”çš„è¡¨å•ä¿¡æ¯\" class=\"headerlink\" title=\"æŸ¥çœ‹æµç¨‹å…³è”çš„è¡¨å•ä¿¡æ¯\"></a>æŸ¥çœ‹æµç¨‹å…³è”çš„è¡¨å•ä¿¡æ¯</h3><p>æˆ‘ä»¬éƒ¨ç½²äº†ä¸€ä¸ªæµç¨‹åï¼Œå¦‚æœä¸æ¸…æ¥šä¹‹å‰å…³è”äº†ä»€ä¹ˆè¡¨å•ï¼Œè¡¨å•ä¸­æœ‰å“ªäº›å­—æ®µï¼Œå±æ€§æ˜¯ä»€ä¹ˆï¼Ÿè¿™æ—¶æˆ‘ä»¬å¯ä»¥é€šè¿‡å®šä¹‰çš„æµç¨‹æŸ¥è¯¢å‡ºå¯¹åº”çš„formè¡¨å•ä¿¡æ¯</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">getStartFromData</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">departemntId</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;4da14de4-b313-11ec-882d-c03c59ad2248&quot;</span>;</span><br><span class=\"line\">    <span class=\"type\">ProcessDefinition</span> <span class=\"variable\">processDefinition</span> <span class=\"operator\">=</span> repositoryService</span><br><span class=\"line\">            .createProcessDefinitionQuery()</span><br><span class=\"line\">            .deploymentId(departemntId)</span><br><span class=\"line\">            .singleResult();</span><br><span class=\"line\">    <span class=\"type\">StartFormData</span> <span class=\"variable\">startFormData</span> <span class=\"operator\">=</span> processEngine.getFormService()</span><br><span class=\"line\">            .getStartFormData(processDefinition.getId());</span><br><span class=\"line\">    List&lt;FormProperty&gt; formProperties = startFormData.getFormProperties();</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (FormProperty formProperty : formProperties) &#123;</span><br><span class=\"line\">        <span class=\"type\">String</span> <span class=\"variable\">id</span> <span class=\"operator\">=</span> formProperty.getId();</span><br><span class=\"line\">        <span class=\"type\">String</span> <span class=\"variable\">name</span> <span class=\"operator\">=</span> formProperty.getName();</span><br><span class=\"line\">        <span class=\"type\">FormType</span> <span class=\"variable\">type</span> <span class=\"operator\">=</span> formProperty.getType();</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;id = &quot;</span> + id);</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;name = &quot;</span> + name);</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;type.getClass() = &quot;</span> + type.getClass());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n\n\n<h3 id=\"å¯åŠ¨æµç¨‹-1\"><a href=\"#å¯åŠ¨æµç¨‹-1\" class=\"headerlink\" title=\"å¯åŠ¨æµç¨‹\"></a>å¯åŠ¨æµç¨‹</h3><p>å¯åŠ¨æµç¨‹çš„æ–¹å¼æœ‰ä¸¤ç§ï¼Œä¸€ç§æ˜¯æ­£å¸¸çš„é€šè¿‡RuntimeServiceæ¥å¯åŠ¨ï¼Œè¿˜æœ‰ä¸€ç§å°±æ˜¯é€šè¿‡FormServiceæ¥å¯åŠ¨ï¼Œå…·ä½“ä»£ç å¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * æ­£å¸¸çš„å¯åŠ¨æµç¨‹</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"title function_\">startFlow</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> Exception&#123;</span><br><span class=\"line\">    Map&lt;String,Object&gt; map = <span class=\"keyword\">new</span> <span class=\"title class_\">HashMap</span>&lt;&gt;();</span><br><span class=\"line\">    map.put(<span class=\"string\">&quot;days&quot;</span>,<span class=\"string\">&quot;5&quot;</span>);</span><br><span class=\"line\">    map.put(<span class=\"string\">&quot;startDate&quot;</span>,<span class=\"string\">&quot;20220403&quot;</span>);</span><br><span class=\"line\">    map.put(<span class=\"string\">&quot;reason&quot;</span>,<span class=\"string\">&quot;æƒ³ä¼‘æ¯ä¸‹&quot;</span>);</span><br><span class=\"line\">    <span class=\"type\">ProcessInstance</span> <span class=\"variable\">processInstance</span> <span class=\"operator\">=</span> runtimeService</span><br><span class=\"line\">            .startProcessInstanceById(<span class=\"string\">&quot;myProcess:5:4dd61987-b313-11ec-882d-c03c59ad2248&quot;</span>,map);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * é€šè¿‡FormServiceæ¥å¯åŠ¨ä¸€ä¸ªè¡¨å•æµç¨‹</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@throws</span> Exception</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"title function_\">startFormFlow</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> Exception&#123;</span><br><span class=\"line\">    <span class=\"type\">ProcessDefinition</span> <span class=\"variable\">processDefinition</span> <span class=\"operator\">=</span> repositoryService.createProcessDefinitionQuery()</span><br><span class=\"line\">            .deploymentId(<span class=\"string\">&quot;4da14de4-b313-11ec-882d-c03c59ad2248&quot;</span>)</span><br><span class=\"line\">            .singleResult();</span><br><span class=\"line\">    Map&lt;String,String&gt; map = <span class=\"keyword\">new</span> <span class=\"title class_\">HashMap</span>&lt;&gt;();</span><br><span class=\"line\">    map.put(<span class=\"string\">&quot;days&quot;</span>,<span class=\"string\">&quot;2&quot;</span>);</span><br><span class=\"line\">    map.put(<span class=\"string\">&quot;startDate&quot;</span>,<span class=\"string\">&quot;20220406&quot;</span>);</span><br><span class=\"line\">    map.put(<span class=\"string\">&quot;reason&quot;</span>,<span class=\"string\">&quot;å‡ºå»ç©ç©&quot;</span>);</span><br><span class=\"line\">    <span class=\"type\">ProcessInstance</span> <span class=\"variable\">processInstance</span> <span class=\"operator\">=</span> processEngine.getFormService().submitStartFormData(processDefinition.getId(), map);</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"ä¿å­˜è¡¨å•æ•°æ®\"><a href=\"#ä¿å­˜è¡¨å•æ•°æ®\" class=\"headerlink\" title=\"ä¿å­˜è¡¨å•æ•°æ®\"></a>ä¿å­˜è¡¨å•æ•°æ®</h3><p>åœ¨Taskæ‰§è¡Œä¹‹å‰æˆ‘ä»¬ä¹Ÿå¯ä»¥ä¿å­˜è¡¨å•æ•°æ®åˆ°Taskå¯¹åº”çš„Formè¡¨å•ä¸­ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * ä¿å­˜è¡¨å•æ•°æ®</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"title function_\">saveFormData</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">taskId</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;80efeb32-b313-11ec-a7ff-c03c59ad2248&quot;</span>;</span><br><span class=\"line\">    Map&lt;String,String&gt; map = <span class=\"keyword\">new</span> <span class=\"title class_\">HashMap</span>&lt;&gt;();</span><br><span class=\"line\">    map.put(<span class=\"string\">&quot;days&quot;</span>,<span class=\"string\">&quot;3&quot;</span>);</span><br><span class=\"line\">    map.put(<span class=\"string\">&quot;startDate&quot;</span>,<span class=\"string\">&quot;20220407&quot;</span>);</span><br><span class=\"line\">    map.put(<span class=\"string\">&quot;reason&quot;</span>,<span class=\"string\">&quot;å‡ºå»ç©ç©11&quot;</span>);</span><br><span class=\"line\">    processEngine.getFormService().saveFormData(taskId,map);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"æŸ¥çœ‹ä»»åŠ¡è¡¨å•æ•°æ®\"><a href=\"#æŸ¥çœ‹ä»»åŠ¡è¡¨å•æ•°æ®\" class=\"headerlink\" title=\"æŸ¥çœ‹ä»»åŠ¡è¡¨å•æ•°æ®\"></a>æŸ¥çœ‹ä»»åŠ¡è¡¨å•æ•°æ®</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * æ ¹æ®Taskç¼–å·æ¥æŸ¥çœ‹è¡¨å•æ•°æ®</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"title function_\">getTaskFormData</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">taskId</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;80efeb32-b313-11ec-a7ff-c03c59ad2248&quot;</span>;</span><br><span class=\"line\">    <span class=\"type\">TaskFormData</span> <span class=\"variable\">taskFormData</span> <span class=\"operator\">=</span> processEngine.getFormService().getTaskFormData(taskId);</span><br><span class=\"line\">    List&lt;FormProperty&gt; formProperties = taskFormData.getFormProperties();</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (FormProperty formProperty : formProperties) &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;formProperty.getId() = &quot;</span> + formProperty.getId());</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;formProperty.getName() = &quot;</span> + formProperty.getName());</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;formProperty.getValue() = &quot;</span> + formProperty.getValue());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>è¾“å‡ºç»“æœ</p>\n<figure class=\"highlight txt\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">formProperty.getId() = days</span><br><span class=\"line\">formProperty.getName() = è¯·å‡å¤©æ•°</span><br><span class=\"line\">formProperty.getValue() = 3</span><br><span class=\"line\">formProperty.getId() = reason</span><br><span class=\"line\">formProperty.getName() = è¯·å‡ç†ç”±</span><br><span class=\"line\">formProperty.getValue() = å‡ºå»ç©ç©11</span><br><span class=\"line\">formProperty.getId() = startDate</span><br><span class=\"line\">formProperty.getName() = å¼€å§‹æ—¥æœŸ</span><br><span class=\"line\">formProperty.getValue() = 20220407</span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"å®Œæˆä»»åŠ¡\"><a href=\"#å®Œæˆä»»åŠ¡\" class=\"headerlink\" title=\"å®Œæˆä»»åŠ¡\"></a>å®Œæˆä»»åŠ¡</h3><p>ç°åœ¨å°±å¯ä»¥é€šè¿‡æŒ‡æ´¾äººæˆ–è€…ä»»åŠ¡ç¼–å·æ¥å®Œæˆå½“å‰ä»»åŠ¡,å½“ç„¶è¿™æ—¶æˆ‘ä»¬è¿˜æ˜¯å¯ä»¥ä¿®æ”¹formè¡¨å•ä¸­çš„æ•°æ®</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * ä¿å­˜è¡¨å•æ•°æ®å¹¶å®Œæˆä»»åŠ¡</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"title function_\">submitTaskFormData</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">taskId</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;80efeb32-b313-11ec-a7ff-c03c59ad2248&quot;</span>;</span><br><span class=\"line\">    Map&lt;String,String&gt; map = <span class=\"keyword\">new</span> <span class=\"title class_\">HashMap</span>&lt;&gt;();</span><br><span class=\"line\">    map.put(<span class=\"string\">&quot;days&quot;</span>,<span class=\"string\">&quot;4&quot;</span>);</span><br><span class=\"line\">    map.put(<span class=\"string\">&quot;startDate&quot;</span>,<span class=\"string\">&quot;20220408&quot;</span>);</span><br><span class=\"line\">    map.put(<span class=\"string\">&quot;reason&quot;</span>,<span class=\"string\">&quot;å‡ºå»ç©ç©&quot;</span>);</span><br><span class=\"line\">    processEngine.getFormService().submitTaskFormData(taskId,map);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"æŸ¥çœ‹å®Œæˆçš„Taskçš„è¡¨å•æ•°æ®\"><a href=\"#æŸ¥çœ‹å®Œæˆçš„Taskçš„è¡¨å•æ•°æ®\" class=\"headerlink\" title=\"æŸ¥çœ‹å®Œæˆçš„Taskçš„è¡¨å•æ•°æ®\"></a>æŸ¥çœ‹å®Œæˆçš„Taskçš„è¡¨å•æ•°æ®</h3><p>ä¸€ä¸ªTaskå®Œæˆåï¼Œå¦‚æœæˆ‘ä»¬æƒ³è¦æŸ¥çœ‹ä¹‹å‰çš„è¡¨å•çš„å†å²æ•°æ®å¯ä»¥é€šè¿‡å¦‚ä¸‹çš„æ–¹æ³•æ¥å®ç°</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * æŸ¥çœ‹å·²ç»å®Œæˆçš„Taskçš„è¡¨å•æ•°æ®</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"title function_\">getHisTaskFormData</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">taskId</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;80efeb32-b313-11ec-a7ff-c03c59ad2248&quot;</span>;</span><br><span class=\"line\">    List&lt;HistoricDetail&gt; list = processEngine.getHistoryService()</span><br><span class=\"line\">            .createHistoricDetailQuery()</span><br><span class=\"line\">            .taskId(taskId)</span><br><span class=\"line\">            .formProperties()</span><br><span class=\"line\">            .list();</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (HistoricDetail historicDetail : list) &#123;</span><br><span class=\"line\">        <span class=\"type\">HistoricFormPropertyEntityImpl</span> <span class=\"variable\">his</span> <span class=\"operator\">=</span> (HistoricFormPropertyEntityImpl) historicDetail;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;his.getPropertyId() = &quot;</span> + his.getPropertyId());</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;his.getPropertyValue() = &quot;</span> + his.getPropertyValue());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n\n\n\n\n<h2 id=\"å¤–ç½®è¡¨å•\"><a href=\"#å¤–ç½®è¡¨å•\" class=\"headerlink\" title=\"å¤–ç½®è¡¨å•\"></a>å¤–ç½®è¡¨å•</h2><p>æˆ‘ä»¬ä¼šå‘ç°åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­é€šè¿‡å†…ç½®çš„è¡¨å•ï¼Œæˆ‘ä»¬éœ€è¦åœ¨æ¯ä¸ªèŠ‚ç‚¹éƒ½è®¾ç½®ä¸€ä»½è¡¨å•æ•°æ®ï¼Œä¸æ˜¯å¾ˆçµæ´»ï¼Œè¿™æ—¶æˆ‘ä»¬å¯ä»¥å•ç‹¬åˆ›å»ºä¸€ä»½è¡¨å•ï¼Œç„¶ååœ¨å¯¹åº”çš„èŠ‚ç‚¹åšåº”ç”¨å°±å¯ä»¥äº†ã€‚</p>\n<h3 id=\"åˆ›å»ºè¡¨å•\"><a href=\"#åˆ›å»ºè¡¨å•\" class=\"headerlink\" title=\"åˆ›å»ºè¡¨å•\"></a>åˆ›å»ºè¡¨å•</h3><p>è¡¨å•å®šä¹‰æ–‡ä»¶æ˜¯ä»¥.formä¸ºåç¼€ï¼Œ å†…å®¹æ ¼å¼ä¸ºJsonæ ¼å¼</p>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"punctuation\">&#123;</span></span><br><span class=\"line\"><span class=\"attr\">&quot;key&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;form1&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\"><span class=\"attr\">&quot;name&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;è¯·å‡æµç¨‹&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\"><span class=\"attr\">&quot;fields&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span></span><br><span class=\"line\">            <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;id&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;startTime&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;name&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;å¼€å§‹æ—¶é—´&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;type&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;date&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;required&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">true</span></span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;placeholder&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;empty&quot;</span></span><br><span class=\"line\">            <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;id&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;days&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;name&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;è¯·å‡å¤©æ•°&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;type&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;string&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;required&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">true</span></span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;placeholder&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;empty&quot;</span></span><br><span class=\"line\">            <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;id&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;reason&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;name&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;è¯·å‡åŸå› &quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;type&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;text&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;required&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">true</span></span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;placeholder&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;empty&quot;</span></span><br><span class=\"line\">            <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">    <span class=\"punctuation\">]</span></span><br><span class=\"line\"><span class=\"punctuation\">&#125;</span></span><br></pre></td></tr></table></figure>\n\n<p>æ³¨æ„ï¼šä¸Šé¢æ–‡ä»¶ä¸­çš„keyæ˜¯å”¯ä¸€æ ‡è¯†ï¼Œæˆ‘ä»¬åœ¨è¡¨å•å¤„ç†çš„æ—¶å€™æ˜¯æ ¹æ®è¿™ä¸ªkeyæ¥è·å–çš„å“¦ï¼Œ</p>\n<h3 id=\"ç„¶ååˆ›å»ºæµç¨‹æ–‡ä»¶\"><a href=\"#ç„¶ååˆ›å»ºæµç¨‹æ–‡ä»¶\" class=\"headerlink\" title=\"ç„¶ååˆ›å»ºæµç¨‹æ–‡ä»¶\"></a>ç„¶ååˆ›å»ºæµç¨‹æ–‡ä»¶</h3><p>æµç¨‹æ–‡ä»¶è¿˜æ˜¯ä»¥æˆ‘ä»¬ä¸Šé¢çš„æ¡ˆä¾‹æ¥æ¼”ç¤ºï¼Œä¸»è¦æ˜¯å¯¹è¡¨å•è¿™å—åšäº†è°ƒæ•´</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220403231037718.png\"\n                      alt=\"image-20220403231037718\"\n                ></p>\n<p>formè¡¨å•é€šè¿‡å¼•ç”¨æ¥å…³è”</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220403231121921.png\"\n                      alt=\"image-20220403231121921\"\n                ></p>\n<p>å®Œæ•´çš„xmlæ–‡ä»¶ï¼š</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=<span class=\"string\">&quot;1.0&quot;</span> encoding=<span class=\"string\">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">definitions</span> <span class=\"attr\">xmlns</span>=<span class=\"string\">&quot;http://www.omg.org/spec/BPMN/20100524/MODEL&quot;</span> <span class=\"attr\">xmlns:xsi</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span> <span class=\"attr\">xmlns:xsd</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema&quot;</span> <span class=\"attr\">xmlns:activiti</span>=<span class=\"string\">&quot;http://activiti.org/bpmn&quot;</span> <span class=\"attr\">xmlns:bpmndi</span>=<span class=\"string\">&quot;http://www.omg.org/spec/BPMN/20100524/DI&quot;</span> <span class=\"attr\">xmlns:omgdc</span>=<span class=\"string\">&quot;http://www.omg.org/spec/DD/20100524/DC&quot;</span> <span class=\"attr\">xmlns:omgdi</span>=<span class=\"string\">&quot;http://www.omg.org/spec/DD/20100524/DI&quot;</span> <span class=\"attr\">typeLanguage</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema&quot;</span> <span class=\"attr\">expressionLanguage</span>=<span class=\"string\">&quot;http://www.w3.org/1999/XPath&quot;</span> <span class=\"attr\">targetNamespace</span>=<span class=\"string\">&quot;http://www.activiti.org/test&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">process</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;myProcess&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;My process&quot;</span> <span class=\"attr\">isExecutable</span>=<span class=\"string\">&quot;true&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">startEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;startevent1&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;Start&quot;</span> <span class=\"attr\">activiti:formKey</span>=<span class=\"string\">&quot;form1&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">startEvent</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">userTask</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;usertask1&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;ç”¨æˆ·ç”³è¯·&quot;</span> <span class=\"attr\">activiti:assignee</span>=<span class=\"string\">&quot;zhangsan&quot;</span> <span class=\"attr\">activiti:formKey</span>=<span class=\"string\">&quot;form1&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">userTask</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;flow1&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;startevent1&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;usertask1&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;flow2&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;usertask1&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;exclusivegateway1&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">userTask</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;usertask2&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;æ€»ç›‘å®¡æ‰¹&quot;</span> <span class=\"attr\">activiti:assignee</span>=<span class=\"string\">&quot;lisi&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">userTask</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;flow3&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;exclusivegateway1&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;usertask2&quot;</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">conditionExpression</span> <span class=\"attr\">xsi:type</span>=<span class=\"string\">&quot;tFormalExpression&quot;</span>&gt;</span>&lt;![CDATA[$&#123;days&gt;3&#125;]]&gt;<span class=\"tag\">&lt;/<span class=\"name\">conditionExpression</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">userTask</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;usertask3&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;éƒ¨é—¨ç»ç†å®¡æ‰¹&quot;</span> <span class=\"attr\">activiti:assignee</span>=<span class=\"string\">&quot;wangwu&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">userTask</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;flow4&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;exclusivegateway1&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;usertask3&quot;</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">conditionExpression</span> <span class=\"attr\">xsi:type</span>=<span class=\"string\">&quot;tFormalExpression&quot;</span>&gt;</span>&lt;![CDATA[$&#123;days&lt;=3&#125;]]&gt;<span class=\"tag\">&lt;/<span class=\"name\">conditionExpression</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;flow5&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;usertask2&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;exclusivegateway2&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;flow6&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;usertask3&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;exclusivegateway2&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">endEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;endevent1&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;End&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">endEvent</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;flow7&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;exclusivegateway2&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;endevent1&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">exclusiveGateway</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;exclusivegateway1&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;Exclusive Gateway&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">exclusiveGateway</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">exclusiveGateway</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;exclusivegateway2&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;Exclusive Gateway&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">exclusiveGateway</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">process</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNDiagram</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNDiagram_myProcess&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNPlane</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;myProcess&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNPlane_myProcess&quot;</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;startevent1&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_startevent1&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;35.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;35.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;300.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;280.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;usertask1&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_usertask1&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;55.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;105.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;380.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;270.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;usertask2&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_usertask2&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;55.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;105.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;650.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;140.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;usertask3&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_usertask3&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;55.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;105.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;660.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;370.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;endevent1&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_endevent1&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;35.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;35.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;965.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;260.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;exclusivegateway1&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_exclusivegateway1&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;40.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;40.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;530.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;278.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;exclusivegateway2&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_exclusivegateway2&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;40.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;40.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;880.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;257.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;flow1&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_flow1&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;335.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;297.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;380.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;297.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;flow2&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_flow2&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;485.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;297.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;530.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;298.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;flow3&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_flow3&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;550.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;278.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;550.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;167.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;650.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;167.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;flow4&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_flow4&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;550.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;318.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;550.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;397.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;660.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;397.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;flow5&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_flow5&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;755.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;167.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;899.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;167.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;900.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;257.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;flow6&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_flow6&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;765.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;397.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;900.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;397.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;900.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;297.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;flow7&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_flow7&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;920.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;277.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;965.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;277.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNPlane</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNDiagram</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">definitions</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"éƒ¨ç½²æµç¨‹-2\"><a href=\"#éƒ¨ç½²æµç¨‹-2\" class=\"headerlink\" title=\"éƒ¨ç½²æµç¨‹\"></a>éƒ¨ç½²æµç¨‹</h3><p>æ¥ä¸‹æ¥æˆ‘ä»¬å…ˆéƒ¨ç½²æµç¨‹</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * éƒ¨ç½²æµç¨‹ï¼š</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">deploy</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"type\">Deployment</span> <span class=\"variable\">deploy</span> <span class=\"operator\">=</span> repositoryService.createDeployment()</span><br><span class=\"line\">            .addClasspathResource(<span class=\"string\">&quot;åŠ¨æ€è¡¨å•02.bpmn20.xml&quot;</span>)</span><br><span class=\"line\">            .name(<span class=\"string\">&quot;åŠ¨æ€è¡¨å•02&quot;</span>)</span><br><span class=\"line\">            .deploy();</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;deploy.getId() = &quot;</span> + deploy.getId());</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;deploy.getName() = &quot;</span> + deploy.getName());</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;éƒ¨ç½²å¼€å§‹çš„æ—¶é—´ï¼š&quot;</span> + <span class=\"keyword\">new</span> <span class=\"title class_\">Date</span>());</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"éƒ¨ç½²è¡¨å•\"><a href=\"#éƒ¨ç½²è¡¨å•\" class=\"headerlink\" title=\"éƒ¨ç½²è¡¨å•\"></a>éƒ¨ç½²è¡¨å•</h3><p>è¿™ä¸ªæ­¥éª¤å¾ˆé‡è¦ï¼Œæˆ‘ä»¬éœ€è¦å•ç‹¬æŠŠæˆ‘ä»¬çš„formæ–‡ä»¶éƒ¨ç½²åˆ°æµç¨‹ä¸­ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Autowired</span></span><br><span class=\"line\"><span class=\"keyword\">private</span> FormRepositoryService formRepositoryService;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * éƒ¨ç½²formè¡¨å•</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">deployForm</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> Exception&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"type\">FormDeployment</span> <span class=\"variable\">formDeployment</span> <span class=\"operator\">=</span> formRepositoryService.createDeployment()</span><br><span class=\"line\">            .addClasspathResource(<span class=\"string\">&quot;holiday.form&quot;</span>)</span><br><span class=\"line\">            .name(<span class=\"string\">&quot;test&quot;</span>)</span><br><span class=\"line\">            .parentDeploymentId(<span class=\"string\">&quot;1&quot;</span>)</span><br><span class=\"line\">            .deploy();</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;formDeployment.getId() = &quot;</span> + formDeployment.getId());</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>æˆ‘ä»¬éœ€è¦é€šè¿‡FormRepositoryServiceæ¥éƒ¨ç½²æˆ‘ä»¬çš„formè¡¨å•ã€‚å¯¹åº”çš„ä¼šåœ¨è¿™å‡ ç§è¡¨ä¸­ç”Ÿæˆå¯¹åº”çš„æ•°æ®</p>\n<p>Forméƒ¨ç½²è¡¨ï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220403231443464.png\"\n                      alt=\"image-20220403231443464\"\n                ></p>\n<p>Formå®šä¹‰è¡¨ï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220403231556049.png\"\n                      alt=\"image-20220403231556049\"\n                ></p>\n<p>Formèµ„æºè¡¨ï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220403231624905.png\"\n                      alt=\"image-20220403231624905\"\n                ></p>\n<h3 id=\"å¯åŠ¨ä»»åŠ¡\"><a href=\"#å¯åŠ¨ä»»åŠ¡\" class=\"headerlink\" title=\"å¯åŠ¨ä»»åŠ¡\"></a>å¯åŠ¨ä»»åŠ¡</h3><p>å¸¦æœ‰å¤–ç½®Formè¡¨å•çš„æµç¨‹æˆ‘ä»¬éœ€è¦é€šè¿‡<code>runtimeService.startProcessInstanceWithForm</code>æ¥å¯åŠ¨</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * å¯åŠ¨æµç¨‹å®ä¾‹ï¼Œå¹¶ä¸”è®¾ç½®å¯¹åº”çš„å€¼</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"title function_\">startTask</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    Map&lt;String,Object&gt; map = <span class=\"keyword\">new</span> <span class=\"title class_\">HashMap</span>&lt;&gt;();</span><br><span class=\"line\">    map.put(<span class=\"string\">&quot;days&quot;</span>,<span class=\"string\">&quot;4&quot;</span>);</span><br><span class=\"line\">    map.put(<span class=\"string\">&quot;startTime&quot;</span>,<span class=\"string\">&quot;20220404&quot;</span>);</span><br><span class=\"line\">    map.put(<span class=\"string\">&quot;reason&quot;</span>,<span class=\"string\">&quot;å‡ºå»ç©ç©&quot;</span>);</span><br><span class=\"line\">    <span class=\"type\">ProcessInstance</span> <span class=\"variable\">processInstance</span> <span class=\"operator\">=</span> runtimeService.startProcessInstanceWithForm(</span><br><span class=\"line\">            <span class=\"string\">&quot;myProcess:1:4&quot;</span></span><br><span class=\"line\">            , <span class=\"literal\">null</span></span><br><span class=\"line\">            , map</span><br><span class=\"line\">            , <span class=\"string\">&quot;è¯·å‡æµç¨‹&quot;</span>);</span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">id</span> <span class=\"operator\">=</span> processInstance.getId();</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;id = &quot;</span> + id);</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>å¯ä»¥çœ‹åˆ°å¯¹åº”çš„ä»»åŠ¡</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220403231811784.png\"\n                      alt=\"image-20220403231811784\"\n                ></p>\n<h3 id=\"æŸ¥çœ‹ä»»åŠ¡è¡¨å•æ•°æ®-1\"><a href=\"#æŸ¥çœ‹ä»»åŠ¡è¡¨å•æ•°æ®-1\" class=\"headerlink\" title=\"æŸ¥çœ‹ä»»åŠ¡è¡¨å•æ•°æ®\"></a>æŸ¥çœ‹ä»»åŠ¡è¡¨å•æ•°æ®</h3><p>åœ¨ä»»åŠ¡å¤„ç†ä¹‹å‰æˆ‘ä»¬å¯ä»¥æŸ¥çœ‹è¡¨å•çš„å¯¹åº”ä¿¡æ¯ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">   <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">    * æŸ¥çœ‹æµç¨‹å®šä¹‰è¡¨å•æ•°æ®</span></span><br><span class=\"line\"><span class=\"comment\">    */</span></span><br><span class=\"line\">   <span class=\"meta\">@Test</span></span><br><span class=\"line\">   <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">getTaskFormData1</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">       <span class=\"type\">Task</span> <span class=\"variable\">task</span> <span class=\"operator\">=</span> taskService.createTaskQuery()</span><br><span class=\"line\">               .processDefinitionId(<span class=\"string\">&quot;myProcess:1:4&quot;</span>)</span><br><span class=\"line\">               .taskAssignee(<span class=\"string\">&quot;zhangsan&quot;</span>)</span><br><span class=\"line\">               .singleResult();</span><br><span class=\"line\">       <span class=\"comment\">// FormInfo è¡¨å•çš„å…ƒæ•°æ®ä¿¡æ¯</span></span><br><span class=\"line\">       <span class=\"type\">FormInfo</span> <span class=\"variable\">formInfo</span> <span class=\"operator\">=</span> runtimeService.getStartFormModel(<span class=\"string\">&quot;myProcess:1:4&quot;</span>, <span class=\"string\">&quot;5001&quot;</span>);</span><br><span class=\"line\">       System.out.println(<span class=\"string\">&quot;formInfo.getId() = &quot;</span> + formInfo.getId());</span><br><span class=\"line\">       System.out.println(<span class=\"string\">&quot;formInfo.getName() = &quot;</span> + formInfo.getName());</span><br><span class=\"line\">       System.out.println(<span class=\"string\">&quot;formInfo.getKey() = &quot;</span> + formInfo.getKey());</span><br><span class=\"line\">       <span class=\"comment\">// FormModel è¡¨å•ä¸­çš„å…·ä½“ä¿¡æ¯ å…·ä½“å®ç°æ˜¯ SimpleFormModel</span></span><br><span class=\"line\">       <span class=\"type\">SimpleFormModel</span> <span class=\"variable\">formModel</span> <span class=\"operator\">=</span> (SimpleFormModel) formInfo.getFormModel();</span><br><span class=\"line\">       List&lt;FormField&gt; fields = formModel.getFields();</span><br><span class=\"line\">       <span class=\"keyword\">for</span> (FormField field : fields) &#123;</span><br><span class=\"line\">           System.out.println(<span class=\"string\">&quot;field.getId() = &quot;</span> + field.getId());</span><br><span class=\"line\">           System.out.println(<span class=\"string\">&quot;field.getName() = &quot;</span> + field.getName());</span><br><span class=\"line\">           System.out.println(<span class=\"string\">&quot;field.getValue() = &quot;</span> + field.getValue());</span><br><span class=\"line\">       &#125;</span><br><span class=\"line\">       System.out.println(<span class=\"string\">&quot;formModel = &quot;</span> + formModel);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">* æŸ¥çœ‹å…·ä½“çš„Taskçš„è¡¨å•æ•°æ®</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br><span class=\"line\">   <span class=\"meta\">@Test</span></span><br><span class=\"line\">   <span class=\"keyword\">void</span> <span class=\"title function_\">getTaskData</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">       <span class=\"type\">FormInfo</span> <span class=\"variable\">formInfo</span> <span class=\"operator\">=</span> taskService.getTaskFormModel(<span class=\"string\">&quot;17505&quot;</span>);</span><br><span class=\"line\">       System.out.println(<span class=\"string\">&quot;formInfo.getId() = &quot;</span> + formInfo.getId());</span><br><span class=\"line\">       System.out.println(<span class=\"string\">&quot;formInfo.getName() = &quot;</span> + formInfo.getName());</span><br><span class=\"line\">       System.out.println(<span class=\"string\">&quot;formInfo.getKey() = &quot;</span> + formInfo.getKey());</span><br><span class=\"line\">       <span class=\"type\">SimpleFormModel</span> <span class=\"variable\">formModel</span> <span class=\"operator\">=</span> (SimpleFormModel) formInfo.getFormModel();</span><br><span class=\"line\">       List&lt;FormField&gt; fields = formModel.getFields();</span><br><span class=\"line\">       <span class=\"keyword\">for</span> (FormField field : fields) &#123;</span><br><span class=\"line\">           System.out.println(<span class=\"string\">&quot;field.getId() = &quot;</span> + field.getId());</span><br><span class=\"line\">           System.out.println(<span class=\"string\">&quot;field.getName() = &quot;</span> + field.getName());</span><br><span class=\"line\">           System.out.println(<span class=\"string\">&quot;field.getValue() = &quot;</span> + field.getValue());</span><br><span class=\"line\">       &#125;</span><br><span class=\"line\">   &#125;</span><br></pre></td></tr></table></figure>\n\n\n\n\n\n<h3 id=\"å®Œæˆä»»åŠ¡-1\"><a href=\"#å®Œæˆä»»åŠ¡-1\" class=\"headerlink\" title=\"å®Œæˆä»»åŠ¡\"></a>å®Œæˆä»»åŠ¡</h3><p>åœ¨å¤–ç½®è¡¨å•çš„åœºæ™¯ä¸­æˆ‘ä»¬éœ€è¦é€šè¿‡<code>taskService.completeTaskWithForm</code>æ¥å®Œæˆè¡¨å•çš„ä»»åŠ¡</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * å®Œæˆä»»åŠ¡</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">completeTaskForm</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    Map&lt;String,Object&gt; map = <span class=\"keyword\">new</span> <span class=\"title class_\">HashMap</span>&lt;&gt;();</span><br><span class=\"line\">    map.put(<span class=\"string\">&quot;days&quot;</span>,<span class=\"string\">&quot;4&quot;</span>);</span><br><span class=\"line\">    map.put(<span class=\"string\">&quot;startTime&quot;</span>,<span class=\"string\">&quot;20220404&quot;</span>);</span><br><span class=\"line\">    map.put(<span class=\"string\">&quot;reason&quot;</span>,<span class=\"string\">&quot;å‡ºå»ç©ç©&quot;</span>);</span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">taskId</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;5010&quot;</span>;</span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">formDefinitionId</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;2503&quot;</span>;</span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">outcome</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;æ³¢å“¥&quot;</span>;</span><br><span class=\"line\">    taskService.completeTaskWithForm(taskId,formDefinitionId,outcome,map);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<p>ç„¶åä»»åŠ¡å°±æµè½¬åˆ°äº†ä¸‹ä¸€ä¸ªèŠ‚ç‚¹æ¥å¤„ç†äº†</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220403233308221.png\"\n                      alt=\"image-20220403233308221\"\n                ></p>\n<p>æå®š~ï¼</p>\n<h1 id=\"ä»»åŠ¡çš„å›é€€\"><a href=\"#ä»»åŠ¡çš„å›é€€\" class=\"headerlink\" title=\"ä»»åŠ¡çš„å›é€€\"></a>ä»»åŠ¡çš„å›é€€</h1><h2 id=\"ä¸²è¡Œçš„å›é€€\"><a href=\"#ä¸²è¡Œçš„å›é€€\" class=\"headerlink\" title=\"ä¸²è¡Œçš„å›é€€\"></a>ä¸²è¡Œçš„å›é€€</h2><p>æˆ‘ä»¬å…ˆä»æœ€ç®€å•çš„ä¸²è¡Œæµç¨‹æ¥åˆ†æï¼Œæ¡ˆä¾‹å¦‚ä¸‹</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220404221942030.png\"\n                      alt=\"image-20220404221942030\"\n                ></p>\n<p>å®Œæ•´çš„xmlæ–‡ä»¶å†…å®¹ï¼š</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=<span class=\"string\">&quot;1.0&quot;</span> encoding=<span class=\"string\">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">definitions</span> <span class=\"attr\">xmlns</span>=<span class=\"string\">&quot;http://www.omg.org/spec/BPMN/20100524/MODEL&quot;</span> <span class=\"attr\">xmlns:xsi</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span> <span class=\"attr\">xmlns:xsd</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema&quot;</span> <span class=\"attr\">xmlns:activiti</span>=<span class=\"string\">&quot;http://activiti.org/bpmn&quot;</span> <span class=\"attr\">xmlns:bpmndi</span>=<span class=\"string\">&quot;http://www.omg.org/spec/BPMN/20100524/DI&quot;</span> <span class=\"attr\">xmlns:omgdc</span>=<span class=\"string\">&quot;http://www.omg.org/spec/DD/20100524/DC&quot;</span> <span class=\"attr\">xmlns:omgdi</span>=<span class=\"string\">&quot;http://www.omg.org/spec/DD/20100524/DI&quot;</span> <span class=\"attr\">typeLanguage</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema&quot;</span> <span class=\"attr\">expressionLanguage</span>=<span class=\"string\">&quot;http://www.w3.org/1999/XPath&quot;</span> <span class=\"attr\">targetNamespace</span>=<span class=\"string\">&quot;http://www.activiti.org/test&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">process</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;myProcess&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;My process&quot;</span> <span class=\"attr\">isExecutable</span>=<span class=\"string\">&quot;true&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">startEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;startevent1&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;Start&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">startEvent</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">userTask</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;usertask1&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;ç”¨æˆ·ä»»åŠ¡1&quot;</span> <span class=\"attr\">activiti:assignee</span>=<span class=\"string\">&quot;user1&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">userTask</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;flow1&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;startevent1&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;usertask1&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">userTask</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;usertask2&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;ç”¨æˆ·ä»»åŠ¡2&quot;</span> <span class=\"attr\">activiti:assignee</span>=<span class=\"string\">&quot;user2&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">userTask</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;flow2&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;usertask1&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;usertask2&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">userTask</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;usertask3&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;ç”¨æˆ·ä»»åŠ¡3&quot;</span> <span class=\"attr\">activiti:assignee</span>=<span class=\"string\">&quot;user3&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">userTask</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;flow3&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;usertask2&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;usertask3&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">userTask</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;usertask4&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;ç”¨æˆ·ä»»åŠ¡4&quot;</span> <span class=\"attr\">activiti:assignee</span>=<span class=\"string\">&quot;user4&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">userTask</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;flow4&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;usertask3&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;usertask4&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">endEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;endevent1&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;End&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">endEvent</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;flow5&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;usertask4&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;endevent1&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">process</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNDiagram</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNDiagram_myProcess&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNPlane</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;myProcess&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNPlane_myProcess&quot;</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;startevent1&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_startevent1&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;35.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;35.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;390.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;260.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;usertask1&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_usertask1&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;55.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;105.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;470.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;250.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;usertask2&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_usertask2&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;55.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;105.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;620.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;250.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;usertask3&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_usertask3&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;55.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;105.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;770.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;250.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;usertask4&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_usertask4&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;55.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;105.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;920.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;250.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;endevent1&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_endevent1&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;35.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;35.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;1070.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;260.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;flow1&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_flow1&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;425.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;277.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;470.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;277.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;flow2&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_flow2&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;575.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;277.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;620.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;277.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;flow3&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_flow3&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;725.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;277.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;770.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;277.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;flow4&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_flow4&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;875.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;277.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;920.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;277.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;flow5&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_flow5&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;1025.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;277.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;1070.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;277.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNPlane</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNDiagram</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">definitions</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>ä¸Šé¢çš„æµç¨‹å°±æ˜¯ä¸€ä¸ªéå¸¸ç®€å•çš„ä¸²è¡Œä»»åŠ¡ï¼Œå®šä¹‰äº†4ä¸ªç”¨æˆ·ä»»åŠ¡ï¼ŒæŒ‡æ´¾çš„å¤„ç†äººåˆ†åˆ«æ˜¯<code>user1</code>,<code>user2</code>,<code>user3</code>,<code>user4</code>.åœ¨æµç¨‹çš„æ‰§è¡Œè¿‡ç¨‹ä¸­æˆ‘ä»¬å¯ä»¥é€šè¿‡å›é€€æ¥æ¼”ç¤ºå…·ä½“çš„æ•ˆæœã€‚é¦–å…ˆæ¥éƒ¨ç½²æµç¨‹</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * éƒ¨ç½²æµç¨‹</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"title function_\">testDeploy</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> Exception &#123;</span><br><span class=\"line\">    <span class=\"type\">Deployment</span> <span class=\"variable\">deploy</span> <span class=\"operator\">=</span> repositoryService.createDeployment()</span><br><span class=\"line\">            .addClasspathResource(<span class=\"string\">&quot;ä»»åŠ¡å›é€€01.bpmn20.xml&quot;</span>)</span><br><span class=\"line\">            .name(<span class=\"string\">&quot;ä»»åŠ¡å›é€€01&quot;</span>)</span><br><span class=\"line\">            .deploy();</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;deploy.getId() = &quot;</span> + deploy.getId());</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;deploy.getName() = &quot;</span> + deploy.getName());</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;éƒ¨ç½²å¼€å§‹çš„æ—¶é—´ï¼š&quot;</span> + <span class=\"keyword\">new</span> <span class=\"title class_\">Date</span>());</span><br><span class=\"line\">    <span class=\"comment\">//TimeUnit.MINUTES.sleep(3);</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ç„¶åæˆ‘ä»¬å¯åŠ¨ä¸€ä¸ªæµç¨‹å®ä¾‹ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * å¯åŠ¨æµç¨‹å®ä¾‹</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"title function_\">startProcess</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"type\">ProcessInstance</span> <span class=\"variable\">processInstance</span> <span class=\"operator\">=</span> runtimeService</span><br><span class=\"line\">            .startProcessInstanceById(<span class=\"string\">&quot;myProcess:1:4&quot;</span>);</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;processInstance.getId() = &quot;</span> + processInstance.getId());</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n\n\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220404222436788.png\"\n                      alt=\"image-20220404222436788\"\n                ></p>\n<p>ç„¶åæˆ‘ä»¬é€šè¿‡user1å®Œæˆä»»åŠ¡ï¼Œç›´åˆ°user3å®Œæˆä»»åŠ¡ï¼Œåˆ°user4æ¥å¤„ç†ä»»åŠ¡ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * å®Œæˆä»»åŠ¡</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"title function_\">completeTask</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"type\">Task</span> <span class=\"variable\">task</span> <span class=\"operator\">=</span> taskService.createTaskQuery()</span><br><span class=\"line\">            .processDefinitionId(<span class=\"string\">&quot;myProcess:1:4&quot;</span>)</span><br><span class=\"line\">            .taskAssignee(<span class=\"string\">&quot;user1&quot;</span>)</span><br><span class=\"line\">            .singleResult();</span><br><span class=\"line\">    taskService.complete(task.getId());</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>é€šè¿‡ä¸Šé¢çš„å¤šä¸ªTaskå®Œæˆæ“ä½œï¼Œç°åœ¨å·²ç»åˆ°äº†user4æ¥å¤„ç†çš„èŠ‚ç‚¹äº†</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220404223234982.png\"\n                      alt=\"image-20220404223234982\"\n                ></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220404223253043.png\"\n                      alt=\"image-20220404223253043\"\n                ></p>\n<p>æˆ‘ä»¬å…ˆçœ‹ä¸‹ä»<code>ç”¨æˆ·ä»»åŠ¡4</code>å›é€€åˆ°<code>ç”¨æˆ·ä»»åŠ¡3</code>çš„æ“ä½œã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * å›é€€æ“ä½œ</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"title function_\">rollbackTask</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// å½“å‰çš„Taskå¯¹åº”çš„ç”¨æˆ·ä»»åŠ¡çš„Id</span></span><br><span class=\"line\">    List&lt;String&gt; currentActivityIds = <span class=\"keyword\">new</span> <span class=\"title class_\">ArrayList</span>&lt;&gt;();</span><br><span class=\"line\">    currentActivityIds.add(<span class=\"string\">&quot;usertask4&quot;</span>);</span><br><span class=\"line\">    <span class=\"comment\">// éœ€è¦å›é€€çš„ç›®æ ‡èŠ‚ç‚¹çš„ç”¨æˆ·ä»»åŠ¡Id</span></span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">newActivityId</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;usertask3&quot;</span>;</span><br><span class=\"line\">    <span class=\"comment\">// å›é€€æ“ä½œ</span></span><br><span class=\"line\">    runtimeService.createChangeActivityStateBuilder()</span><br><span class=\"line\">            .processInstanceId(<span class=\"string\">&quot;2501&quot;</span>)</span><br><span class=\"line\">            .moveActivityIdsToSingleActivityId(currentActivityIds,newActivityId)</span><br><span class=\"line\">            .changeState();</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>æ“ä½œåæˆ‘ä»¬å¯ä»¥åœ¨å¯¹åº”çš„å†å²è¡¨ä¸­çœ‹åˆ°ç›¸å…³çš„ä¿¡æ¯</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220404224948722.png\"\n                      alt=\"image-20220404224948722\"\n                ></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220404225319024.png\"\n                      alt=\"image-20220404225319024\"\n                ></p>\n<p>ç„¶åæˆ‘ä»¬é€šè¿‡user3æ¥å®Œæˆä»»åŠ¡ç»§ç»­åˆ°user4å¤„ç†ï¼Œç„¶åæˆ‘ä»¬å¯ä»¥æµ‹è¯•å›é€€åˆ°user1å¤„ã€‚</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220404225345357.png\"\n                      alt=\"image-20220404225345357\"\n                ></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * å›é€€æ“ä½œ</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"title function_\">rollbackTask</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// å½“å‰çš„Taskå¯¹åº”çš„ç”¨æˆ·ä»»åŠ¡çš„Id</span></span><br><span class=\"line\">    List&lt;String&gt; currentActivityIds = <span class=\"keyword\">new</span> <span class=\"title class_\">ArrayList</span>&lt;&gt;();</span><br><span class=\"line\">    currentActivityIds.add(<span class=\"string\">&quot;usertask4&quot;</span>);</span><br><span class=\"line\">    <span class=\"comment\">// éœ€è¦å›é€€çš„ç›®æ ‡èŠ‚ç‚¹çš„ç”¨æˆ·ä»»åŠ¡Id</span></span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">newActivityId</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;usertask1&quot;</span>;</span><br><span class=\"line\">    <span class=\"comment\">// å›é€€æ“ä½œ</span></span><br><span class=\"line\">    runtimeService.createChangeActivityStateBuilder()</span><br><span class=\"line\">            .processInstanceId(<span class=\"string\">&quot;2501&quot;</span>)</span><br><span class=\"line\">            .moveActivityIdsToSingleActivityId(currentActivityIds,newActivityId)</span><br><span class=\"line\">            .changeState();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220404225532864.png\"\n                      alt=\"image-20220404225532864\"\n                ></p>\n<p>å¯ä»¥çœ‹åˆ°ä»»åŠ¡åˆå›åˆ°äº†user1å¤„ã€‚ä¹Ÿå°±æ˜¯åœ¨ä¸²è¡Œçš„æµç¨‹ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å›é€€åˆ°ä»»æ„çš„ç”¨æˆ·èŠ‚ç‚¹ï¼Œå½“ç„¶è¿™ä¸ªä¸²è¡Œä¹ŸåŒ…æ‹¬å¤šäººä¼šç­¾å’Œæ’ä»–ç½‘å…³èŠ‚ç‚¹ã€‚å½“ç„¶åœ¨å›é€€çš„æ—¶å€™æˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨<code>moveActivityIdTo(String currentActivityId,String newActivityId)</code>è¿™ä¸ªæ–¹æ³•æ¥å¤„ç†ã€‚</p>\n<h2 id=\"å¹¶è¡Œçš„å›é€€\"><a href=\"#å¹¶è¡Œçš„å›é€€\" class=\"headerlink\" title=\"å¹¶è¡Œçš„å›é€€\"></a>å¹¶è¡Œçš„å›é€€</h2><p>æ¥ä¸‹æ¥æˆ‘ä»¬åœ¨å¹¶è¡Œçš„åœºæ™¯ä¸­æ¥çœ‹çœ‹å„ç§å›é€€çš„åœºæ™¯ã€‚å…·ä½“æ¡ˆä¾‹æµç¨‹å¦‚ä¸‹ï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220405111325145.png\"\n                      alt=\"image-20220405111325145\"\n                ></p>\n<p>è¯¦ç»†çš„xmlæ–‡ä»¶å†…å®¹ï¼š</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=<span class=\"string\">&quot;1.0&quot;</span> encoding=<span class=\"string\">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">definitions</span> <span class=\"attr\">xmlns</span>=<span class=\"string\">&quot;http://www.omg.org/spec/BPMN/20100524/MODEL&quot;</span> <span class=\"attr\">xmlns:xsi</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span> <span class=\"attr\">xmlns:xsd</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema&quot;</span> <span class=\"attr\">xmlns:activiti</span>=<span class=\"string\">&quot;http://activiti.org/bpmn&quot;</span> <span class=\"attr\">xmlns:bpmndi</span>=<span class=\"string\">&quot;http://www.omg.org/spec/BPMN/20100524/DI&quot;</span> <span class=\"attr\">xmlns:omgdc</span>=<span class=\"string\">&quot;http://www.omg.org/spec/DD/20100524/DC&quot;</span> <span class=\"attr\">xmlns:omgdi</span>=<span class=\"string\">&quot;http://www.omg.org/spec/DD/20100524/DI&quot;</span> <span class=\"attr\">typeLanguage</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema&quot;</span> <span class=\"attr\">expressionLanguage</span>=<span class=\"string\">&quot;http://www.w3.org/1999/XPath&quot;</span> <span class=\"attr\">targetNamespace</span>=<span class=\"string\">&quot;http://www.activiti.org/test&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">process</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;myProcess&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;My process&quot;</span> <span class=\"attr\">isExecutable</span>=<span class=\"string\">&quot;true&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">startEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;startevent1&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;Start&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">startEvent</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">userTask</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;usertask1&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;ç”¨æˆ·å®¡æ‰¹01&quot;</span> <span class=\"attr\">activiti:assignee</span>=<span class=\"string\">&quot;user1&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">userTask</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;flow1&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;startevent1&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;usertask1&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;flow2&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;usertask1&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;parallelgateway1&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">parallelGateway</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;parallelgateway1&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;Exclusive Gateway&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">parallelGateway</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">userTask</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;usertask2&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;ä¸šåŠ¡è´Ÿè´£äºº&quot;</span> <span class=\"attr\">activiti:assignee</span>=<span class=\"string\">&quot;user2&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">userTask</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;flow3&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;parallelgateway1&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;usertask2&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">userTask</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;usertask3&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;è¡Œæ”¿å‰¯æ€»&quot;</span> <span class=\"attr\">activiti:assignee</span>=<span class=\"string\">&quot;user4&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">userTask</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;flow4&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;parallelgateway1&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;usertask3&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">userTask</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;usertask4&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;ä¸šåŠ¡å‰¯æ€»&quot;</span> <span class=\"attr\">activiti:assignee</span>=<span class=\"string\">&quot;user3&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">userTask</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;flow5&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;usertask2&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;usertask4&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;flow6&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;usertask4&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;parallelgateway2&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">parallelGateway</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;parallelgateway2&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;Exclusive Gateway&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">parallelGateway</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;flow7&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;usertask3&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;parallelgateway2&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">userTask</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;usertask5&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;æ€»ç»ç†&quot;</span> <span class=\"attr\">activiti:assignee</span>=<span class=\"string\">&quot;user5&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">userTask</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;flow8&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;parallelgateway2&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;usertask5&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">endEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;endevent1&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;End&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">endEvent</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;flow9&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;usertask5&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;endevent1&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">process</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNDiagram</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNDiagram_myProcess&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNPlane</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;myProcess&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNPlane_myProcess&quot;</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;startevent1&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_startevent1&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;35.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;35.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;370.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;300.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;usertask1&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_usertask1&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;55.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;105.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;450.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;290.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;parallelgateway1&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_parallelgateway1&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;40.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;40.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;600.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;298.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;usertask2&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_usertask2&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;55.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;105.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;740.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;180.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;usertask3&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_usertask3&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;55.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;105.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;740.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;370.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;usertask4&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_usertask4&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;55.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;105.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;930.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;180.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;parallelgateway2&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_parallelgateway2&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;40.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;40.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;1140.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;297.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;usertask5&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_usertask5&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;55.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;105.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;1225.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;290.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;endevent1&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_endevent1&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;35.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;35.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;1375.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;300.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;flow1&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_flow1&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;405.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;317.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;450.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;317.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;flow2&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_flow2&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;555.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;317.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;600.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;318.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;flow3&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_flow3&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;620.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;298.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;620.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;207.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;740.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;207.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;flow4&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_flow4&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;620.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;338.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;620.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;397.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;740.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;397.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;flow5&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_flow5&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;845.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;207.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;930.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;207.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;flow6&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_flow6&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;1035.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;207.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;1159.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;207.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;1160.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;297.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;flow7&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_flow7&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;845.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;397.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;1160.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;397.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;1160.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;337.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;flow8&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_flow8&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;1180.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;317.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;1225.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;317.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;flow9&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_flow9&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;1330.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;317.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;1375.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;317.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNPlane</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNDiagram</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">definitions</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>å…ˆéƒ¨ç½²æµç¨‹ï¼Œç„¶åå¯åŠ¨å¹¶è¿è¡Œåˆ°å¹¶è¡Œæµç¨‹çš„èŠ‚ç‚¹å¦‚ä¸‹çš„ä½ç½®<br><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220405111459624.png\"\n                      alt=\"image-20220405111459624\"\n                ></p>\n<p>ç„¶åæˆ‘ä»¬å¯ä»¥å°è¯•ä»<code>ä¸šåŠ¡å‰¯æ€»</code>å¤„å›é€€åˆ°<code>ç”¨æˆ·å®¡æ‰¹01</code>å¤„ï¼Œçœ‹çœ‹è¯¥å¤„ç†åº”è¯¥è¦å¦‚ä½•å®ç°ã€‚</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220405111926713.png\"\n                      alt=\"image-20220405111926713\"\n                ></p>\n<p>å›é€€é€»è¾‘ä»£ç çš„å®ç°</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * å›é€€æ“ä½œ</span></span><br><span class=\"line\"><span class=\"comment\"> *   ä¸šåŠ¡å‰¯æ€»é©³å›åˆ°åˆ°ç”¨æˆ·å®¡æ‰¹å¤„  é‚£ä¹ˆè¡Œæ”¿å®¡æ‰¹çš„ä¹Ÿåº”è¯¥è¦è¿”å›</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"title function_\">rollbackTask</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// å½“å‰çš„Taskå¯¹åº”çš„ç”¨æˆ·ä»»åŠ¡çš„Id</span></span><br><span class=\"line\">    List&lt;String&gt; currentActivityIds = <span class=\"keyword\">new</span> <span class=\"title class_\">ArrayList</span>&lt;&gt;();</span><br><span class=\"line\">    currentActivityIds.add(<span class=\"string\">&quot;usertask4&quot;</span>); <span class=\"comment\">// è¡Œæ”¿å‰¯æ€»</span></span><br><span class=\"line\">    currentActivityIds.add(<span class=\"string\">&quot;usertask3&quot;</span>); <span class=\"comment\">// ä¸šåŠ¡å‰¯æ€»</span></span><br><span class=\"line\">    <span class=\"comment\">// éœ€è¦å›é€€çš„ç›®æ ‡èŠ‚ç‚¹çš„ç”¨æˆ·ä»»åŠ¡Id</span></span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">newActivityId</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;usertask1&quot;</span>; <span class=\"comment\">// ç”¨æˆ·å®¡æ‰¹01</span></span><br><span class=\"line\">    <span class=\"comment\">// å›é€€æ“ä½œ</span></span><br><span class=\"line\">    runtimeService.createChangeActivityStateBuilder()</span><br><span class=\"line\">            .processInstanceId(<span class=\"string\">&quot;22501&quot;</span>)</span><br><span class=\"line\">            .moveActivityIdsToSingleActivityId(currentActivityIds,newActivityId)</span><br><span class=\"line\">            .changeState();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>æŸ¥çœ‹ACT_RU_TASKå¯ä»¥çœ‹åˆ°å›åˆ°äº†<code>ç”¨æˆ·å®¡æ‰¹01</code>äº†</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220405112329439.png\"\n                      alt=\"image-20220405112329439\"\n                ></p>\n<p>åŒæ—¶åœ¨ACT_HI_ACTINSä¸­ä¹Ÿå¯ä»¥çœ‹åˆ°å›é€€çš„å†å²æ“ä½œ</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220405112544706.png\"\n                      alt=\"image-20220405112544706\"\n                ></p>\n<p>ç„¶åå†æ¥çœ‹çœ‹ è¡Œæ”¿å‰¯æ€»çš„ å¹¶è¡Œåˆ†æ”¯æ‰§è¡Œå®Œæˆäº†ï¼Œç„¶ååœ¨ ä¸šåŠ¡å‰¯æ€»å¤„å®¡æ‰¹è¦é©³å›çš„å¤„ç†</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220405113125822.png\"\n                      alt=\"image-20220405113125822\"\n                ></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220405113212465.png\"\n                      alt=\"image-20220405113212465\"\n                ></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"title function_\">rollbackTask</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// å½“å‰çš„Taskå¯¹åº”çš„ç”¨æˆ·ä»»åŠ¡çš„Id</span></span><br><span class=\"line\">    List&lt;String&gt; currentActivityIds = <span class=\"keyword\">new</span> <span class=\"title class_\">ArrayList</span>&lt;&gt;();</span><br><span class=\"line\">    currentActivityIds.add(<span class=\"string\">&quot;usertask4&quot;</span>); <span class=\"comment\">// è¡Œæ”¿å‰¯æ€»</span></span><br><span class=\"line\">    <span class=\"comment\">//currentActivityIds.add(&quot;usertask3&quot;); // ä¸šåŠ¡å‰¯æ€»</span></span><br><span class=\"line\">    <span class=\"comment\">// éœ€è¦å›é€€çš„ç›®æ ‡èŠ‚ç‚¹çš„ç”¨æˆ·ä»»åŠ¡Id</span></span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">newActivityId</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;usertask1&quot;</span>; <span class=\"comment\">// ç”¨æˆ·å®¡æ‰¹01</span></span><br><span class=\"line\">    <span class=\"comment\">// å›é€€æ“ä½œ</span></span><br><span class=\"line\">    runtimeService.createChangeActivityStateBuilder()</span><br><span class=\"line\">            .processInstanceId(<span class=\"string\">&quot;22501&quot;</span>)</span><br><span class=\"line\">            .moveActivityIdsToSingleActivityId(currentActivityIds,newActivityId)</span><br><span class=\"line\">            .changeState();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<p>ä¸€æ ·çš„æ•ˆæœ</p>\n<h2 id=\"å­æµç¨‹å›é€€\"><a href=\"#å­æµç¨‹å›é€€\" class=\"headerlink\" title=\"å­æµç¨‹å›é€€\"></a>å­æµç¨‹å›é€€</h2><p>æœ€åæˆ‘ä»¬æ¥çœ‹çœ‹å¸¦æœ‰å­æµç¨‹çš„åœºæ™¯ä¸‹å¦‚æœæœ‰å›é€€çš„æƒ…å†µåº”è¯¥è¦å¦‚ä½•æ¥å¤„ç†,æ¡ˆä¾‹å¦‚ä¸‹ï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220405134220482.png\"\n                      alt=\"image-20220405134220482\"\n                ></p>\n<p>å®Œæ•´çš„xmlå†…å®¹ä¸ºï¼š</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=<span class=\"string\">&quot;1.0&quot;</span> encoding=<span class=\"string\">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">definitions</span> <span class=\"attr\">xmlns</span>=<span class=\"string\">&quot;http://www.omg.org/spec/BPMN/20100524/MODEL&quot;</span> <span class=\"attr\">xmlns:xsi</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span> <span class=\"attr\">xmlns:xsd</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema&quot;</span> <span class=\"attr\">xmlns:activiti</span>=<span class=\"string\">&quot;http://activiti.org/bpmn&quot;</span> <span class=\"attr\">xmlns:bpmndi</span>=<span class=\"string\">&quot;http://www.omg.org/spec/BPMN/20100524/DI&quot;</span> <span class=\"attr\">xmlns:omgdc</span>=<span class=\"string\">&quot;http://www.omg.org/spec/DD/20100524/DC&quot;</span> <span class=\"attr\">xmlns:omgdi</span>=<span class=\"string\">&quot;http://www.omg.org/spec/DD/20100524/DI&quot;</span> <span class=\"attr\">typeLanguage</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema&quot;</span> <span class=\"attr\">expressionLanguage</span>=<span class=\"string\">&quot;http://www.w3.org/1999/XPath&quot;</span> <span class=\"attr\">targetNamespace</span>=<span class=\"string\">&quot;http://www.activiti.org/test&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">process</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;myProcess&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;My process&quot;</span> <span class=\"attr\">isExecutable</span>=<span class=\"string\">&quot;true&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">startEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;startevent1&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;Start&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">startEvent</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">userTask</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;usertask1&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;ä¸»ä»»åŠ¡1&quot;</span> <span class=\"attr\">activiti:assignee</span>=<span class=\"string\">&quot;user1&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">userTask</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;flow1&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;startevent1&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;usertask1&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">subProcess</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;subprocess1&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;Sub Process&quot;</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">startEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;startevent2&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;Start&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">startEvent</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">userTask</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;usertask2&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;å­ä»»åŠ¡1&quot;</span> <span class=\"attr\">activiti:assignee</span>=<span class=\"string\">&quot;user2&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">userTask</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;flow3&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;startevent2&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;usertask2&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">endEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;endevent1&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;End&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">endEvent</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;flow4&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;usertask2&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;endevent1&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">subProcess</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;flow2&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;usertask1&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;subprocess1&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">userTask</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;usertask3&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;ä¸»ä»»åŠ¡2&quot;</span> <span class=\"attr\">activiti:assignee</span>=<span class=\"string\">&quot;user3&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">userTask</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;flow5&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;subprocess1&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;usertask3&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">endEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;endevent2&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;End&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">endEvent</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;flow6&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;usertask3&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;endevent2&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">process</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNDiagram</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNDiagram_myProcess&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNPlane</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;myProcess&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNPlane_myProcess&quot;</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;startevent1&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_startevent1&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;35.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;35.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;320.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;290.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;usertask1&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_usertask1&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;55.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;105.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;400.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;280.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;subprocess1&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_subprocess1&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;291.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;481.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;620.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;168.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;startevent2&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_startevent2&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;35.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;35.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;680.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;298.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;usertask2&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_usertask2&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;55.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;105.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;760.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;288.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;endevent1&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_endevent1&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;35.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;35.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;910.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;298.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;usertask3&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_usertask3&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;55.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;105.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;1146.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;286.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;endevent2&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_endevent2&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;35.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;35.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;1296.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;296.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;flow1&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_flow1&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;355.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;307.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;400.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;307.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;flow3&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_flow3&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;715.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;315.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;760.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;315.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;flow4&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_flow4&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;865.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;315.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;910.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;315.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;flow2&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_flow2&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;505.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;307.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;620.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;313.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;flow5&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_flow5&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;1101.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;313.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;1146.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;313.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;flow6&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_flow6&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;1251.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;313.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;1296.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;313.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNPlane</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNDiagram</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">definitions</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n\n\n<p>éƒ¨ç½²æµç¨‹åå¹¶å¯åŠ¨æµç¨‹ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹ç¬¬ä¸€ä¸ªåœºæ™¯ï¼Œä»å­æµç¨‹å›é€€åˆ°ä¸»æµç¨‹ï¼Œä¹Ÿå°±æ˜¯å¦‚ä¸‹å›¾ï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220405134411503.png\"\n                      alt=\"image-20220405134411503\"\n                ></p>\n<p>Taskè¿›å…¥åˆ°äº†å­æµç¨‹çš„Taskå¤„</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"C:\\Users\\dpb\\AppData\\Roaming\\Typora\\typora-user-images\\image-20220405134811970.png\"\n                      alt=\"image-20220405134811970\"\n                ></p>\n<p>ç„¶åæˆ‘ä»¬æ¥å¤„ç†å›é€€åˆ°ä¸»æµç¨‹:ç›´æ¥è·³è½¬å³å¯</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * å›é€€æ“ä½œ</span></span><br><span class=\"line\"><span class=\"comment\">     *   ä»å­æµç¨‹å›é€€åˆ°ä¸»æµç¨‹æ“ä½œ</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"keyword\">void</span> <span class=\"title function_\">rollbackMainTask</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// å›é€€æ“ä½œ</span></span><br><span class=\"line\">        runtimeService.createChangeActivityStateBuilder()</span><br><span class=\"line\">                .processInstanceId(<span class=\"string\">&quot;2501&quot;</span>)</span><br><span class=\"line\">                .moveActivityIdTo(<span class=\"string\">&quot;usertask2&quot;</span>,<span class=\"string\">&quot;usertask1&quot;</span>)</span><br><span class=\"line\">                .changeState();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * å›é€€æ“ä½œ</span></span><br><span class=\"line\"><span class=\"comment\">     *   ä»å­æµç¨‹å›é€€åˆ°ä¸»æµç¨‹æ“ä½œï¼šmoveExecutionToActivityIdä¸å…³å¿ƒå½“å‰çš„èŠ‚ç‚¹</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"keyword\">void</span> <span class=\"title function_\">rollbackMainTask</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// å›é€€æ“ä½œ</span></span><br><span class=\"line\">        runtimeService.createChangeActivityStateBuilder()</span><br><span class=\"line\">                .processInstanceId(<span class=\"string\">&quot;2501&quot;</span>)</span><br><span class=\"line\">                .moveExecutionToActivityId(<span class=\"string\">&quot;5003&quot;</span>,<span class=\"string\">&quot;usertask1&quot;</span>)</span><br><span class=\"line\">                .changeState();</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n\n<p>ç„¶åä»ä¸»æµç¨‹å›é€€åˆ°å­æµç¨‹æ“ä½œ</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220405140816409.png\"\n                      alt=\"image-20220405140816409\"\n                ></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220405141015720.png\"\n                      alt=\"image-20220405141015720\"\n                ></p>\n<p>åŒæ ·çš„ç›´æ¥è·³è½¬å³å¯</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * å›é€€æ“ä½œ</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"title function_\">rollbackSubTask</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// å›é€€æ“ä½œ</span></span><br><span class=\"line\">    runtimeService.createChangeActivityStateBuilder()</span><br><span class=\"line\">            .processInstanceId(<span class=\"string\">&quot;2501&quot;</span>)</span><br><span class=\"line\">            .moveActivityIdTo(<span class=\"string\">&quot;usertask3&quot;</span>,<span class=\"string\">&quot;usertask2&quot;</span>)</span><br><span class=\"line\">            .changeState();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n","site":{"data":{"links":[{"name":"CZMæœ‰ç‚¹å†·","link":"https://czm.cool/","description":"CZMçš„åšå®¢","avatar":"https://img.czm.cool/avatar/avatar.png"},{"name":"PSH","link":"https://shamd.cloud/","description":"PSHçš„åšå®¢.","avatar":"https://shamd.cloud/upload/2022/07/afbb577733f46c9535dd1d6d6388278.jpg"},{"name":"KAI","link":"https://kainote.top/","description":"love artist, love code.","avatar":"https://cdn.jsdelivr.net/gh/kaix2301/pictures/img202201072101018.jpg"}]}},"excerpt":"","more":"<h1 id=\"Flowableè¿›é˜¶ç¯‡\"><a href=\"#Flowableè¿›é˜¶ç¯‡\" class=\"headerlink\" title=\"Flowableè¿›é˜¶ç¯‡\"></a>Flowableè¿›é˜¶ç¯‡</h1><blockquote>\n<p>Lectureï¼šæ³¢æ³¢è€å¸ˆ</p>\n</blockquote>\n<h1 id=\"å¤šäººä¼šç­¾\"><a href=\"#å¤šäººä¼šç­¾\" class=\"headerlink\" title=\"å¤šäººä¼šç­¾\"></a>å¤šäººä¼šç­¾</h1><h2 id=\"æµç¨‹å›¾ç»˜åˆ¶\"><a href=\"#æµç¨‹å›¾ç»˜åˆ¶\" class=\"headerlink\" title=\"æµç¨‹å›¾ç»˜åˆ¶\"></a>æµç¨‹å›¾ç»˜åˆ¶</h2><p>å¤šäººä¼šç­¾æ˜¯æŒ‡ä¸€ä¸ªä»»åŠ¡éœ€è¦å¤šä¸ªäººæ¥å¤„ç†ï¼Œæ¡ˆä¾‹è®²è§£</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220402092950976.png\"\n                      alt=\"image-20220402092950976\"\n                ></p>\n<p>å®Œæ•´çš„xmlå†…å®¹</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=<span class=\"string\">&quot;1.0&quot;</span> encoding=<span class=\"string\">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">definitions</span> <span class=\"attr\">xmlns</span>=<span class=\"string\">&quot;http://www.omg.org/spec/BPMN/20100524/MODEL&quot;</span> <span class=\"attr\">xmlns:xsi</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span> <span class=\"attr\">xmlns:xsd</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema&quot;</span> <span class=\"attr\">xmlns:activiti</span>=<span class=\"string\">&quot;http://activiti.org/bpmn&quot;</span> <span class=\"attr\">xmlns:bpmndi</span>=<span class=\"string\">&quot;http://www.omg.org/spec/BPMN/20100524/DI&quot;</span> <span class=\"attr\">xmlns:omgdc</span>=<span class=\"string\">&quot;http://www.omg.org/spec/DD/20100524/DC&quot;</span> <span class=\"attr\">xmlns:omgdi</span>=<span class=\"string\">&quot;http://www.omg.org/spec/DD/20100524/DI&quot;</span> <span class=\"attr\">typeLanguage</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema&quot;</span> <span class=\"attr\">expressionLanguage</span>=<span class=\"string\">&quot;http://www.w3.org/1999/XPath&quot;</span> <span class=\"attr\">targetNamespace</span>=<span class=\"string\">&quot;http://www.activiti.org/test&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">process</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;myProcess&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;My process&quot;</span> <span class=\"attr\">isExecutable</span>=<span class=\"string\">&quot;true&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">startEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;startevent1&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;Start&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">startEvent</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">userTask</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;usertask1&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;User Task&quot;</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">extensionElements</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">activiti:taskListener</span> <span class=\"attr\">event</span>=<span class=\"string\">&quot;create&quot;</span> <span class=\"attr\">expression</span>=<span class=\"string\">&quot;$&#123;mulitiInstanceTaskListener.completeListener(execution)&#125;&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">activiti:taskListener</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">extensionElements</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">multiInstanceLoopCharacteristics</span> <span class=\"attr\">isSequential</span>=<span class=\"string\">&quot;false&quot;</span> <span class=\"attr\">activiti:collection</span>=<span class=\"string\">&quot;persons&quot;</span> <span class=\"attr\">activiti:elementVariable</span>=<span class=\"string\">&quot;person&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">loopCardinality</span>&gt;</span>3<span class=\"tag\">&lt;/<span class=\"name\">loopCardinality</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">completionCondition</span>&gt;</span>$&#123;mulitiInstanceCompleteTask.completeTask(execution)&#125;<span class=\"tag\">&lt;/<span class=\"name\">completionCondition</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">multiInstanceLoopCharacteristics</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">userTask</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;flow1&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;startevent1&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;usertask1&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">endEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;endevent1&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;End&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">endEvent</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;flow2&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;usertask1&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;endevent1&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">process</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNDiagram</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNDiagram_myProcess&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNPlane</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;myProcess&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNPlane_myProcess&quot;</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;startevent1&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_startevent1&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;35.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;35.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;420.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;310.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;usertask1&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_usertask1&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;55.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;105.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;700.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;300.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;endevent1&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_endevent1&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;35.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;35.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;950.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;310.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;flow1&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_flow1&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;455.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;327.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;700.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;327.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;flow2&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_flow2&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;805.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;327.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;950.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;327.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNPlane</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNDiagram</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">definitions</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"æµç¨‹è¯´æ˜\"><a href=\"#æµç¨‹è¯´æ˜\" class=\"headerlink\" title=\"æµç¨‹è¯´æ˜\"></a>æµç¨‹è¯´æ˜</h2><p>1.åœ¨ç”¨æˆ·ä»»åŠ¡èŠ‚ç‚¹ç»‘å®šäº†ä¸€ä¸ªç›‘å¬å™¨ï¼Œç›‘å¬<code>create</code>è¡Œä¸ºï¼Œè¯¥ç›‘å¬å™¨æˆ‘ä»¬æ˜¯é€šè¿‡UELè¡¨è¾¾å¼æ¥å®ç°çš„ï¼Œ<code>mulitiInstanceTaskListener</code>æ˜¯æˆ‘ä»¬æ³¨å…¥åˆ°Springå®¹å™¨ä¸­çš„å¯¹è±¡</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220402095348908.png\"\n                      alt=\"image-20220402095348908\"\n                ></p>\n<p>å¯¹åº”çš„ç›‘å¬çš„ä»£ç å¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Component(&quot;mulitiInstanceTaskListener&quot;)</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">MulitiInstanceTaskListener</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">Serializable</span> &#123;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">completeListener</span><span class=\"params\">(DelegateExecution execution)</span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;ä»»åŠ¡ï¼š&quot;</span>+execution.getId());</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;persons:&quot;</span> + execution.getVariable(<span class=\"string\">&quot;persons&quot;</span>));</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;person&quot;</span> + execution.getVariable(<span class=\"string\">&quot;person&quot;</span>));</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>2.åœ¨Multi instanceä¸­çš„é…ç½®</p>\n<ul>\n<li>Loop cardinality:è®¾ç½®ä¸º3è¡¨ç¤ºåªå¾ªç¯3æ¬¡ï¼Œä¹Ÿå°±æ˜¯ä¸‰ä¸ªäººä¼šç­¾</li>\n<li>Collectionï¼šè¡¨ç¤ºè¦å¾ªç¯çš„é›†åˆï¼Œæˆ‘ä»¬ç»™çš„æ˜¯personsï¼Œåé¢éœ€è¦åœ¨æµç¨‹å˜é‡ä¸­èµ‹å€¼</li>\n<li>Element variableï¼šè¡¨ç¤ºå¾ªç¯çš„å˜é‡</li>\n<li>Completion conditionï¼šè¡¨ç¤ºä»»åŠ¡ç»“æŸçš„æ¡ä»¶ï¼Œä¹Ÿå°±æ˜¯å¤šäººä¼šç­¾çš„ç»“æŸæ¡ä»¶ï¼Œåœ¨æ­¤å¤„æˆ‘ä»¬ç”¨çš„æ˜¯UELè¡¨è¾¾å¼ï¼Œ<code>mulitiInstanceCompleteTask</code>è¡¨ç¤ºçš„æ˜¯æˆ‘ä»¬æ³¨å…¥åˆ°Springå®¹å™¨ä¸­çš„å¯¹è±¡</li>\n</ul>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"C:\\Users\\dpb\\AppData\\Roaming\\Typora\\typora-user-images\\image-20220402100649924.png\"\n                      alt=\"image-20220402100649924\"\n                ></p>\n<p><code>mulitiInstanceCompleteTask</code>å¯¹è±¡çš„å®Œæ•´ä»£ç ä¸ºï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Component(&quot;mulitiInstanceCompleteTask&quot;)</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">MulitiInstanceCompleteTask</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">Serializable</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * å®Œæˆä»»åŠ¡æ˜¯éœ€è¦è§¦å‘çš„æ–¹æ³•</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> execution</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">     *     false è¡¨ç¤ºä¼šç­¾ä»»åŠ¡è¿˜æ²¡æœ‰ç»“æŸ</span></span><br><span class=\"line\"><span class=\"comment\">     </span></span><br><span class=\"line\"><span class=\"comment\">     *     true è¡¨ç¤ºä¼šç­¾ä»»åŠ¡ç»“æŸäº†</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"type\">boolean</span> <span class=\"title function_\">completeTask</span><span class=\"params\">(DelegateExecution execution)</span> &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;æ€»çš„ä¼šç­¾ä»»åŠ¡æ•°é‡ï¼š&quot;</span> + execution.getVariable(<span class=\"string\">&quot;nrOfInstances&quot;</span>)</span><br><span class=\"line\">                + <span class=\"string\">&quot;å½“å‰è·å–çš„ä¼šç­¾ä»»åŠ¡æ•°é‡ï¼š&quot;</span> + execution.getVariable(<span class=\"string\">&quot;nrOfActiveInstances&quot;</span>)</span><br><span class=\"line\">                + <span class=\"string\">&quot; - &quot;</span> + <span class=\"string\">&quot;å·²ç»å®Œæˆçš„ä¼šç­¾ä»»åŠ¡æ•°é‡ï¼š&quot;</span> + execution.getVariable(<span class=\"string\">&quot;nrOfCompletedInstances&quot;</span>));</span><br><span class=\"line\">        <span class=\"comment\">//æœ‰ä¸€ä¸ªäººåŒæ„å°±é€šè¿‡</span></span><br><span class=\"line\">        <span class=\"type\">Boolean</span> <span class=\"variable\">flag</span> <span class=\"operator\">=</span> (Boolean) execution.getVariable(<span class=\"string\">&quot;flag&quot;</span>);</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;å½“å‰æ„è§ï¼š&quot;</span>+flag);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> flag;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ä¸Šé¢çš„ä¸‰ä¸ªå˜é‡æ˜¯Flowableä¸­è‡ªå¸¦çš„å¯ç”¨å˜é‡</p>\n<ol>\n<li><p>nrOfInstances:è¯¥ä¼šç­¾ç¯èŠ‚ä¸­æ€»å…±æœ‰å¤šå°‘ä¸ªå®ä¾‹</p>\n</li>\n<li><p>nrOfActiveInstances:å½“å‰æ´»åŠ¨çš„å®ä¾‹çš„æ•°é‡ï¼Œå³è¿˜æ²¡æœ‰å®Œæˆçš„å®ä¾‹æ•°é‡ã€‚</p>\n</li>\n<li><p>nrOfCompletedInstances:å·²ç»å®Œæˆçš„å®ä¾‹çš„æ•°é‡</p>\n</li>\n</ol>\n<h2 id=\"æ¡ˆä¾‹æ¼”ç¤º\"><a href=\"#æ¡ˆä¾‹æ¼”ç¤º\" class=\"headerlink\" title=\"æ¡ˆä¾‹æ¼”ç¤º\"></a>æ¡ˆä¾‹æ¼”ç¤º</h2><h3 id=\"éƒ¨ç½²æµç¨‹\"><a href=\"#éƒ¨ç½²æµç¨‹\" class=\"headerlink\" title=\"éƒ¨ç½²æµç¨‹\"></a>éƒ¨ç½²æµç¨‹</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Deploy</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"title function_\">testDeploy</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> Exception &#123;</span><br><span class=\"line\">    <span class=\"type\">Deployment</span> <span class=\"variable\">deploy</span> <span class=\"operator\">=</span> repositoryService.createDeployment()</span><br><span class=\"line\">            .addClasspathResource(<span class=\"string\">&quot;ä¼šç­¾æ¡ˆä¾‹.bpmn20.xml&quot;</span>)</span><br><span class=\"line\">            .name(<span class=\"string\">&quot;ä¼šç­¾æ¡ˆä¾‹&quot;</span>)</span><br><span class=\"line\">            .deploy();</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;deploy.getId() = &quot;</span> + deploy.getId());</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;deploy.getName() = &quot;</span> + deploy.getName());</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;éƒ¨ç½²å¼€å§‹çš„æ—¶é—´ï¼š&quot;</span> + <span class=\"keyword\">new</span> <span class=\"title class_\">Date</span>());</span><br><span class=\"line\">    <span class=\"comment\">//TimeUnit.MINUTES.sleep(3);</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"å¯åŠ¨æµç¨‹\"><a href=\"#å¯åŠ¨æµç¨‹\" class=\"headerlink\" title=\"å¯åŠ¨æµç¨‹\"></a>å¯åŠ¨æµç¨‹</h3><p>åœ¨å¯åŠ¨æµç¨‹å®ä¾‹çš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦è®¾ç½®ç›¸å…³çš„å‚æ•°ï¼Œåœ¨æµç¨‹å®šä¹‰çš„æ—¶å€™è®¾ç½®çš„personsåœ¨æ­¤å¤„æˆ‘ä»¬å°±éœ€è¦è®¾ç½®äº†ï¼Œè®¾ç½®ä¸ºArrays.asList(â€œå¼ ä¸‰â€,â€æå››â€,â€ç‹äº”â€,â€èµµå…­â€)ï¼Œè¿™é‡Œè®¾ç½®äº†4ä¸ªå…ƒç´ ï¼Œåœ¨æµç¨‹å®šä¹‰é‡Œå®šä¹‰äº†3ä¸ªï¼Œè¡¨ç¤ºåªä¼šå¾ªç¯3æ¬¡ï¼Œå¯åŠ¨æµç¨‹åï¼Œåœ¨Taskä¸­å¯ä»¥çœ‹åˆ°åªæœ‰3ä¸ªä»»åŠ¡</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"title function_\">startFlow</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> Exception&#123;</span><br><span class=\"line\">    Map&lt;String,Object&gt; map = <span class=\"keyword\">new</span> <span class=\"title class_\">HashMap</span>&lt;&gt;();</span><br><span class=\"line\">    <span class=\"comment\">// è®¾ç½®å¤šäººä¼šç­¾çš„æ•°æ®</span></span><br><span class=\"line\">    map.put(<span class=\"string\">&quot;persons&quot;</span>, Arrays.asList(<span class=\"string\">&quot;å¼ ä¸‰&quot;</span>,<span class=\"string\">&quot;æå››&quot;</span>,<span class=\"string\">&quot;ç‹äº”&quot;</span>,<span class=\"string\">&quot;èµµå…­&quot;</span>));</span><br><span class=\"line\">    <span class=\"type\">ProcessInstance</span> <span class=\"variable\">processInstance</span> <span class=\"operator\">=</span> runtimeService</span><br><span class=\"line\">            .startProcessInstanceById(<span class=\"string\">&quot;myProcess:1:ba1518fc-b22d-11ec-9313-c03c59ad2248&quot;</span>,map);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220402104240267.png\"\n                      alt=\"image-20220402104240267\"\n                ></p>\n<p>åŒæ—¶æ§åˆ¶ä¹Ÿæœ‰å¯¹åº”çš„è¾“å‡ºï¼Œè§¦å‘äº†Taskçš„åˆ›å»ºäº‹ä»¶</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220402104319944.png\"\n                      alt=\"image-20220402104319944\"\n                ></p>\n<h3 id=\"ä¼šç­¾å¤„ç†ä»»åŠ¡\"><a href=\"#ä¼šç­¾å¤„ç†ä»»åŠ¡\" class=\"headerlink\" title=\"ä¼šç­¾å¤„ç†ä»»åŠ¡\"></a>ä¼šç­¾å¤„ç†ä»»åŠ¡</h3><p>å¯åŠ¨æµç¨‹åæˆ‘ä»¬å‘ä¸‹åœ¨Taskä¸­äº§ç”Ÿäº†3æ¡ä»»åŠ¡ï¼Œæˆ‘ä»¬å…ˆé€šè¿‡TaskServiceæ¥å®Œæˆå…¶ä¸­ä¸€ä¸ªä»»åŠ¡ï¼Œè®¾ç½®ä¸€ä¸ªæ ‡å¿—flagä¸ºfalseï¼Œæ¥æ§åˆ¶ä¼šç­¾è¿˜æ²¡æœ‰ç»“æŸï¼ŒåŒæ—¶Taskä¸­å¦å¤–ä¸¤ä¸ªä»»åŠ¡è¿˜åœ¨</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"title function_\">completeTask1</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    Map&lt;String,Object&gt; map = <span class=\"keyword\">new</span> <span class=\"title class_\">HashMap</span>&lt;&gt;();</span><br><span class=\"line\">    map.put(<span class=\"string\">&quot;flag&quot;</span>,<span class=\"literal\">false</span>);</span><br><span class=\"line\">    taskService.complete(<span class=\"string\">&quot;71337501-b22e-11ec-a534-c03c59ad2248&quot;</span>,map);</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;complete ....&quot;</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220402104554823.png\"\n                      alt=\"image-20220402104554823\"\n                ></p>\n<p>å½“ä»»åŠ¡æ‰§è¡Œå®Œæˆæ—¶ä¼šåŒæ­¥è§¦å‘ä¼šç­¾å®Œæˆè¡¨è¾¾å¼ä¸­å¯¹è±¡æ–¹æ³•ã€‚æœ‰å¦‚ä¸‹çš„è¾“å‡º</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220402104729627.png\"\n                      alt=\"image-20220402104729627\"\n                ></p>\n<p>åŒæ—¶Taskè¡¨ä¸­çš„è®°å½•è¿˜æœ‰ä¸¤æ¡</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220402104819239.png\"\n                      alt=\"image-20220402104819239\"\n                ></p>\n<p>ç„¶åå½“æˆ‘ä»¬åœ¨å®Œæˆä¸€ä¸ªä»»åŠ¡ï¼Œè¿™æ—¶è®¾ç½®flagä¸ºtrueï¼Œä¼šå‘ç°åœ¨è¿™ä¸ªå¤šäººå¤„ç†ä¸­ï¼Œæœ€å¤š3ä¸ªäººå¤„ç†åœ¨ç¬¬äºŒä¸ªäººå¤„ç†åå°±ç»“æŸäº†</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"title function_\">completeTask1</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    Map&lt;String,Object&gt; map = <span class=\"keyword\">new</span> <span class=\"title class_\">HashMap</span>&lt;&gt;();</span><br><span class=\"line\">    map.put(<span class=\"string\">&quot;flag&quot;</span>,<span class=\"literal\">true</span>); <span class=\"comment\">// è®¾ç½®ä¸ºtrue ç»“æŸå¤šäººä¼šç­¾</span></span><br><span class=\"line\">    taskService.complete(<span class=\"string\">&quot;713570d4-b22e-11ec-a534-c03c59ad2248&quot;</span>,map);</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;complete ....&quot;</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n\n\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220402105058601.png\"\n                      alt=\"image-20220402105058601\"\n                ></p>\n<p>åŒæ—¶æ¥çœ‹çœ‹è¡¨ç»“æ„ä¸­çš„è®°å½•ï¼Œå‘ç°æ²¡æœ‰äº†</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220402105148471.png\"\n                      alt=\"image-20220402105148471\"\n                ></p>\n<p>æå®š~</p>\n<h1 id=\"åŠ¨æ€è¡¨å•\"><a href=\"#åŠ¨æ€è¡¨å•\" class=\"headerlink\" title=\"åŠ¨æ€è¡¨å•\"></a>åŠ¨æ€è¡¨å•</h1><p>Flowableæä¾›äº†ä¸€ç§ç®€ä¾¿çµæ´»çš„æ–¹å¼ï¼Œç”¨æ¥ä¸ºä¸šåŠ¡æµç¨‹ä¸­çš„äººå·¥æ­¥éª¤æ·»åŠ è¡¨å•ã€‚ æœ‰ä¸¤ç§ä½¿ç”¨è¡¨å•çš„æ–¹æ³•ï¼šä½¿ç”¨ï¼ˆç”±è¡¨å•è®¾è®¡å™¨åˆ›å»ºçš„ï¼‰è¡¨å•å®šä¹‰çš„å†…ç½®è¡¨å•æ¸²æŸ“ï¼Œä»¥åŠå¤–éƒ¨è¡¨å•æ¸²æŸ“ã€‚ ä½¿ç”¨å¤–éƒ¨è¡¨å•æ¸²æŸ“æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ï¼ˆè‡ªExplorer webåº”ç”¨V5ç‰ˆæœ¬æ”¯æŒçš„ï¼‰è¡¨å•å‚æ•°ï¼›ä¹Ÿå¯ä»¥ä½¿ç”¨è¡¨å•keyå®šä¹‰ï¼Œå¼•ç”¨å¤–éƒ¨çš„ã€ä½¿ç”¨è‡ªå®šä¹‰ä»£ç è§£æçš„è¡¨å•ã€‚</p>\n<h2 id=\"æµç¨‹ç»˜åˆ¶\"><a href=\"#æµç¨‹ç»˜åˆ¶\" class=\"headerlink\" title=\"æµç¨‹ç»˜åˆ¶\"></a>æµç¨‹ç»˜åˆ¶</h2><p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220403133804306.png\"\n                      alt=\"image-20220403133804306\"\n                ></p>\n<p>è¡¨å•è®¾è®¡</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220403133735195.png\"\n                      alt=\"image-20220403133735195\"\n                ></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220403133710713.png\"\n                      alt=\"image-20220403133710713\"\n                ></p>\n<h2 id=\"æ¡ˆä¾‹æ¼”ç¤º-1\"><a href=\"#æ¡ˆä¾‹æ¼”ç¤º-1\" class=\"headerlink\" title=\"æ¡ˆä¾‹æ¼”ç¤º\"></a>æ¡ˆä¾‹æ¼”ç¤º</h2><h3 id=\"éƒ¨ç½²æµç¨‹-1\"><a href=\"#éƒ¨ç½²æµç¨‹-1\" class=\"headerlink\" title=\"éƒ¨ç½²æµç¨‹\"></a>éƒ¨ç½²æµç¨‹</h3><p>æµç¨‹å›¾ç»˜åˆ¶å¥½ä¹‹åæˆ‘ä»¬å°±å¯ä»¥ç›´æ¥æ¥éƒ¨ç½²è¿™ä¸ªæµç¨‹äº†</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * Deploy</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"keyword\">void</span> <span class=\"title function_\">testDeploy</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> Exception &#123;</span><br><span class=\"line\">        <span class=\"type\">Deployment</span> <span class=\"variable\">deploy</span> <span class=\"operator\">=</span> repositoryService.createDeployment()</span><br><span class=\"line\">                .addClasspathResource(<span class=\"string\">&quot;åŠ¨æ€è¡¨å•01.bpmn20.xml&quot;</span>)</span><br><span class=\"line\">                .name(<span class=\"string\">&quot;åŠ¨æ€è¡¨å•01&quot;</span>)</span><br><span class=\"line\">                .deploy();</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;deploy.getId() = &quot;</span> + deploy.getId());</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;deploy.getName() = &quot;</span> + deploy.getName());</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;éƒ¨ç½²å¼€å§‹çš„æ—¶é—´ï¼š&quot;</span> + <span class=\"keyword\">new</span> <span class=\"title class_\">Date</span>());</span><br><span class=\"line\">        <span class=\"comment\">//TimeUnit.MINUTES.sleep(3);</span></span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"æŸ¥çœ‹æµç¨‹å…³è”çš„è¡¨å•ä¿¡æ¯\"><a href=\"#æŸ¥çœ‹æµç¨‹å…³è”çš„è¡¨å•ä¿¡æ¯\" class=\"headerlink\" title=\"æŸ¥çœ‹æµç¨‹å…³è”çš„è¡¨å•ä¿¡æ¯\"></a>æŸ¥çœ‹æµç¨‹å…³è”çš„è¡¨å•ä¿¡æ¯</h3><p>æˆ‘ä»¬éƒ¨ç½²äº†ä¸€ä¸ªæµç¨‹åï¼Œå¦‚æœä¸æ¸…æ¥šä¹‹å‰å…³è”äº†ä»€ä¹ˆè¡¨å•ï¼Œè¡¨å•ä¸­æœ‰å“ªäº›å­—æ®µï¼Œå±æ€§æ˜¯ä»€ä¹ˆï¼Ÿè¿™æ—¶æˆ‘ä»¬å¯ä»¥é€šè¿‡å®šä¹‰çš„æµç¨‹æŸ¥è¯¢å‡ºå¯¹åº”çš„formè¡¨å•ä¿¡æ¯</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">getStartFromData</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">departemntId</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;4da14de4-b313-11ec-882d-c03c59ad2248&quot;</span>;</span><br><span class=\"line\">    <span class=\"type\">ProcessDefinition</span> <span class=\"variable\">processDefinition</span> <span class=\"operator\">=</span> repositoryService</span><br><span class=\"line\">            .createProcessDefinitionQuery()</span><br><span class=\"line\">            .deploymentId(departemntId)</span><br><span class=\"line\">            .singleResult();</span><br><span class=\"line\">    <span class=\"type\">StartFormData</span> <span class=\"variable\">startFormData</span> <span class=\"operator\">=</span> processEngine.getFormService()</span><br><span class=\"line\">            .getStartFormData(processDefinition.getId());</span><br><span class=\"line\">    List&lt;FormProperty&gt; formProperties = startFormData.getFormProperties();</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (FormProperty formProperty : formProperties) &#123;</span><br><span class=\"line\">        <span class=\"type\">String</span> <span class=\"variable\">id</span> <span class=\"operator\">=</span> formProperty.getId();</span><br><span class=\"line\">        <span class=\"type\">String</span> <span class=\"variable\">name</span> <span class=\"operator\">=</span> formProperty.getName();</span><br><span class=\"line\">        <span class=\"type\">FormType</span> <span class=\"variable\">type</span> <span class=\"operator\">=</span> formProperty.getType();</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;id = &quot;</span> + id);</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;name = &quot;</span> + name);</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;type.getClass() = &quot;</span> + type.getClass());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n\n\n<h3 id=\"å¯åŠ¨æµç¨‹-1\"><a href=\"#å¯åŠ¨æµç¨‹-1\" class=\"headerlink\" title=\"å¯åŠ¨æµç¨‹\"></a>å¯åŠ¨æµç¨‹</h3><p>å¯åŠ¨æµç¨‹çš„æ–¹å¼æœ‰ä¸¤ç§ï¼Œä¸€ç§æ˜¯æ­£å¸¸çš„é€šè¿‡RuntimeServiceæ¥å¯åŠ¨ï¼Œè¿˜æœ‰ä¸€ç§å°±æ˜¯é€šè¿‡FormServiceæ¥å¯åŠ¨ï¼Œå…·ä½“ä»£ç å¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * æ­£å¸¸çš„å¯åŠ¨æµç¨‹</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"title function_\">startFlow</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> Exception&#123;</span><br><span class=\"line\">    Map&lt;String,Object&gt; map = <span class=\"keyword\">new</span> <span class=\"title class_\">HashMap</span>&lt;&gt;();</span><br><span class=\"line\">    map.put(<span class=\"string\">&quot;days&quot;</span>,<span class=\"string\">&quot;5&quot;</span>);</span><br><span class=\"line\">    map.put(<span class=\"string\">&quot;startDate&quot;</span>,<span class=\"string\">&quot;20220403&quot;</span>);</span><br><span class=\"line\">    map.put(<span class=\"string\">&quot;reason&quot;</span>,<span class=\"string\">&quot;æƒ³ä¼‘æ¯ä¸‹&quot;</span>);</span><br><span class=\"line\">    <span class=\"type\">ProcessInstance</span> <span class=\"variable\">processInstance</span> <span class=\"operator\">=</span> runtimeService</span><br><span class=\"line\">            .startProcessInstanceById(<span class=\"string\">&quot;myProcess:5:4dd61987-b313-11ec-882d-c03c59ad2248&quot;</span>,map);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * é€šè¿‡FormServiceæ¥å¯åŠ¨ä¸€ä¸ªè¡¨å•æµç¨‹</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@throws</span> Exception</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"title function_\">startFormFlow</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> Exception&#123;</span><br><span class=\"line\">    <span class=\"type\">ProcessDefinition</span> <span class=\"variable\">processDefinition</span> <span class=\"operator\">=</span> repositoryService.createProcessDefinitionQuery()</span><br><span class=\"line\">            .deploymentId(<span class=\"string\">&quot;4da14de4-b313-11ec-882d-c03c59ad2248&quot;</span>)</span><br><span class=\"line\">            .singleResult();</span><br><span class=\"line\">    Map&lt;String,String&gt; map = <span class=\"keyword\">new</span> <span class=\"title class_\">HashMap</span>&lt;&gt;();</span><br><span class=\"line\">    map.put(<span class=\"string\">&quot;days&quot;</span>,<span class=\"string\">&quot;2&quot;</span>);</span><br><span class=\"line\">    map.put(<span class=\"string\">&quot;startDate&quot;</span>,<span class=\"string\">&quot;20220406&quot;</span>);</span><br><span class=\"line\">    map.put(<span class=\"string\">&quot;reason&quot;</span>,<span class=\"string\">&quot;å‡ºå»ç©ç©&quot;</span>);</span><br><span class=\"line\">    <span class=\"type\">ProcessInstance</span> <span class=\"variable\">processInstance</span> <span class=\"operator\">=</span> processEngine.getFormService().submitStartFormData(processDefinition.getId(), map);</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"ä¿å­˜è¡¨å•æ•°æ®\"><a href=\"#ä¿å­˜è¡¨å•æ•°æ®\" class=\"headerlink\" title=\"ä¿å­˜è¡¨å•æ•°æ®\"></a>ä¿å­˜è¡¨å•æ•°æ®</h3><p>åœ¨Taskæ‰§è¡Œä¹‹å‰æˆ‘ä»¬ä¹Ÿå¯ä»¥ä¿å­˜è¡¨å•æ•°æ®åˆ°Taskå¯¹åº”çš„Formè¡¨å•ä¸­ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * ä¿å­˜è¡¨å•æ•°æ®</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"title function_\">saveFormData</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">taskId</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;80efeb32-b313-11ec-a7ff-c03c59ad2248&quot;</span>;</span><br><span class=\"line\">    Map&lt;String,String&gt; map = <span class=\"keyword\">new</span> <span class=\"title class_\">HashMap</span>&lt;&gt;();</span><br><span class=\"line\">    map.put(<span class=\"string\">&quot;days&quot;</span>,<span class=\"string\">&quot;3&quot;</span>);</span><br><span class=\"line\">    map.put(<span class=\"string\">&quot;startDate&quot;</span>,<span class=\"string\">&quot;20220407&quot;</span>);</span><br><span class=\"line\">    map.put(<span class=\"string\">&quot;reason&quot;</span>,<span class=\"string\">&quot;å‡ºå»ç©ç©11&quot;</span>);</span><br><span class=\"line\">    processEngine.getFormService().saveFormData(taskId,map);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"æŸ¥çœ‹ä»»åŠ¡è¡¨å•æ•°æ®\"><a href=\"#æŸ¥çœ‹ä»»åŠ¡è¡¨å•æ•°æ®\" class=\"headerlink\" title=\"æŸ¥çœ‹ä»»åŠ¡è¡¨å•æ•°æ®\"></a>æŸ¥çœ‹ä»»åŠ¡è¡¨å•æ•°æ®</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * æ ¹æ®Taskç¼–å·æ¥æŸ¥çœ‹è¡¨å•æ•°æ®</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"title function_\">getTaskFormData</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">taskId</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;80efeb32-b313-11ec-a7ff-c03c59ad2248&quot;</span>;</span><br><span class=\"line\">    <span class=\"type\">TaskFormData</span> <span class=\"variable\">taskFormData</span> <span class=\"operator\">=</span> processEngine.getFormService().getTaskFormData(taskId);</span><br><span class=\"line\">    List&lt;FormProperty&gt; formProperties = taskFormData.getFormProperties();</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (FormProperty formProperty : formProperties) &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;formProperty.getId() = &quot;</span> + formProperty.getId());</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;formProperty.getName() = &quot;</span> + formProperty.getName());</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;formProperty.getValue() = &quot;</span> + formProperty.getValue());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>è¾“å‡ºç»“æœ</p>\n<figure class=\"highlight txt\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">formProperty.getId() = days</span><br><span class=\"line\">formProperty.getName() = è¯·å‡å¤©æ•°</span><br><span class=\"line\">formProperty.getValue() = 3</span><br><span class=\"line\">formProperty.getId() = reason</span><br><span class=\"line\">formProperty.getName() = è¯·å‡ç†ç”±</span><br><span class=\"line\">formProperty.getValue() = å‡ºå»ç©ç©11</span><br><span class=\"line\">formProperty.getId() = startDate</span><br><span class=\"line\">formProperty.getName() = å¼€å§‹æ—¥æœŸ</span><br><span class=\"line\">formProperty.getValue() = 20220407</span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"å®Œæˆä»»åŠ¡\"><a href=\"#å®Œæˆä»»åŠ¡\" class=\"headerlink\" title=\"å®Œæˆä»»åŠ¡\"></a>å®Œæˆä»»åŠ¡</h3><p>ç°åœ¨å°±å¯ä»¥é€šè¿‡æŒ‡æ´¾äººæˆ–è€…ä»»åŠ¡ç¼–å·æ¥å®Œæˆå½“å‰ä»»åŠ¡,å½“ç„¶è¿™æ—¶æˆ‘ä»¬è¿˜æ˜¯å¯ä»¥ä¿®æ”¹formè¡¨å•ä¸­çš„æ•°æ®</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * ä¿å­˜è¡¨å•æ•°æ®å¹¶å®Œæˆä»»åŠ¡</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"title function_\">submitTaskFormData</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">taskId</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;80efeb32-b313-11ec-a7ff-c03c59ad2248&quot;</span>;</span><br><span class=\"line\">    Map&lt;String,String&gt; map = <span class=\"keyword\">new</span> <span class=\"title class_\">HashMap</span>&lt;&gt;();</span><br><span class=\"line\">    map.put(<span class=\"string\">&quot;days&quot;</span>,<span class=\"string\">&quot;4&quot;</span>);</span><br><span class=\"line\">    map.put(<span class=\"string\">&quot;startDate&quot;</span>,<span class=\"string\">&quot;20220408&quot;</span>);</span><br><span class=\"line\">    map.put(<span class=\"string\">&quot;reason&quot;</span>,<span class=\"string\">&quot;å‡ºå»ç©ç©&quot;</span>);</span><br><span class=\"line\">    processEngine.getFormService().submitTaskFormData(taskId,map);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"æŸ¥çœ‹å®Œæˆçš„Taskçš„è¡¨å•æ•°æ®\"><a href=\"#æŸ¥çœ‹å®Œæˆçš„Taskçš„è¡¨å•æ•°æ®\" class=\"headerlink\" title=\"æŸ¥çœ‹å®Œæˆçš„Taskçš„è¡¨å•æ•°æ®\"></a>æŸ¥çœ‹å®Œæˆçš„Taskçš„è¡¨å•æ•°æ®</h3><p>ä¸€ä¸ªTaskå®Œæˆåï¼Œå¦‚æœæˆ‘ä»¬æƒ³è¦æŸ¥çœ‹ä¹‹å‰çš„è¡¨å•çš„å†å²æ•°æ®å¯ä»¥é€šè¿‡å¦‚ä¸‹çš„æ–¹æ³•æ¥å®ç°</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * æŸ¥çœ‹å·²ç»å®Œæˆçš„Taskçš„è¡¨å•æ•°æ®</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"title function_\">getHisTaskFormData</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">taskId</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;80efeb32-b313-11ec-a7ff-c03c59ad2248&quot;</span>;</span><br><span class=\"line\">    List&lt;HistoricDetail&gt; list = processEngine.getHistoryService()</span><br><span class=\"line\">            .createHistoricDetailQuery()</span><br><span class=\"line\">            .taskId(taskId)</span><br><span class=\"line\">            .formProperties()</span><br><span class=\"line\">            .list();</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (HistoricDetail historicDetail : list) &#123;</span><br><span class=\"line\">        <span class=\"type\">HistoricFormPropertyEntityImpl</span> <span class=\"variable\">his</span> <span class=\"operator\">=</span> (HistoricFormPropertyEntityImpl) historicDetail;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;his.getPropertyId() = &quot;</span> + his.getPropertyId());</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;his.getPropertyValue() = &quot;</span> + his.getPropertyValue());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n\n\n\n\n<h2 id=\"å¤–ç½®è¡¨å•\"><a href=\"#å¤–ç½®è¡¨å•\" class=\"headerlink\" title=\"å¤–ç½®è¡¨å•\"></a>å¤–ç½®è¡¨å•</h2><p>æˆ‘ä»¬ä¼šå‘ç°åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­é€šè¿‡å†…ç½®çš„è¡¨å•ï¼Œæˆ‘ä»¬éœ€è¦åœ¨æ¯ä¸ªèŠ‚ç‚¹éƒ½è®¾ç½®ä¸€ä»½è¡¨å•æ•°æ®ï¼Œä¸æ˜¯å¾ˆçµæ´»ï¼Œè¿™æ—¶æˆ‘ä»¬å¯ä»¥å•ç‹¬åˆ›å»ºä¸€ä»½è¡¨å•ï¼Œç„¶ååœ¨å¯¹åº”çš„èŠ‚ç‚¹åšåº”ç”¨å°±å¯ä»¥äº†ã€‚</p>\n<h3 id=\"åˆ›å»ºè¡¨å•\"><a href=\"#åˆ›å»ºè¡¨å•\" class=\"headerlink\" title=\"åˆ›å»ºè¡¨å•\"></a>åˆ›å»ºè¡¨å•</h3><p>è¡¨å•å®šä¹‰æ–‡ä»¶æ˜¯ä»¥.formä¸ºåç¼€ï¼Œ å†…å®¹æ ¼å¼ä¸ºJsonæ ¼å¼</p>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"punctuation\">&#123;</span></span><br><span class=\"line\"><span class=\"attr\">&quot;key&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;form1&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\"><span class=\"attr\">&quot;name&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;è¯·å‡æµç¨‹&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\"><span class=\"attr\">&quot;fields&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">[</span></span><br><span class=\"line\">            <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;id&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;startTime&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;name&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;å¼€å§‹æ—¶é—´&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;type&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;date&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;required&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">true</span></span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;placeholder&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;empty&quot;</span></span><br><span class=\"line\">            <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;id&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;days&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;name&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;è¯·å‡å¤©æ•°&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;type&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;string&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;required&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">true</span></span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;placeholder&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;empty&quot;</span></span><br><span class=\"line\">            <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;id&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;reason&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;name&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;è¯·å‡åŸå› &quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;type&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;text&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;required&quot;</span><span class=\"punctuation\">:</span> <span class=\"literal\"><span class=\"keyword\">true</span></span><span class=\"punctuation\">,</span></span><br><span class=\"line\">            <span class=\"attr\">&quot;placeholder&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;empty&quot;</span></span><br><span class=\"line\">            <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">    <span class=\"punctuation\">]</span></span><br><span class=\"line\"><span class=\"punctuation\">&#125;</span></span><br></pre></td></tr></table></figure>\n\n<p>æ³¨æ„ï¼šä¸Šé¢æ–‡ä»¶ä¸­çš„keyæ˜¯å”¯ä¸€æ ‡è¯†ï¼Œæˆ‘ä»¬åœ¨è¡¨å•å¤„ç†çš„æ—¶å€™æ˜¯æ ¹æ®è¿™ä¸ªkeyæ¥è·å–çš„å“¦ï¼Œ</p>\n<h3 id=\"ç„¶ååˆ›å»ºæµç¨‹æ–‡ä»¶\"><a href=\"#ç„¶ååˆ›å»ºæµç¨‹æ–‡ä»¶\" class=\"headerlink\" title=\"ç„¶ååˆ›å»ºæµç¨‹æ–‡ä»¶\"></a>ç„¶ååˆ›å»ºæµç¨‹æ–‡ä»¶</h3><p>æµç¨‹æ–‡ä»¶è¿˜æ˜¯ä»¥æˆ‘ä»¬ä¸Šé¢çš„æ¡ˆä¾‹æ¥æ¼”ç¤ºï¼Œä¸»è¦æ˜¯å¯¹è¡¨å•è¿™å—åšäº†è°ƒæ•´</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220403231037718.png\"\n                      alt=\"image-20220403231037718\"\n                ></p>\n<p>formè¡¨å•é€šè¿‡å¼•ç”¨æ¥å…³è”</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220403231121921.png\"\n                      alt=\"image-20220403231121921\"\n                ></p>\n<p>å®Œæ•´çš„xmlæ–‡ä»¶ï¼š</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=<span class=\"string\">&quot;1.0&quot;</span> encoding=<span class=\"string\">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">definitions</span> <span class=\"attr\">xmlns</span>=<span class=\"string\">&quot;http://www.omg.org/spec/BPMN/20100524/MODEL&quot;</span> <span class=\"attr\">xmlns:xsi</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span> <span class=\"attr\">xmlns:xsd</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema&quot;</span> <span class=\"attr\">xmlns:activiti</span>=<span class=\"string\">&quot;http://activiti.org/bpmn&quot;</span> <span class=\"attr\">xmlns:bpmndi</span>=<span class=\"string\">&quot;http://www.omg.org/spec/BPMN/20100524/DI&quot;</span> <span class=\"attr\">xmlns:omgdc</span>=<span class=\"string\">&quot;http://www.omg.org/spec/DD/20100524/DC&quot;</span> <span class=\"attr\">xmlns:omgdi</span>=<span class=\"string\">&quot;http://www.omg.org/spec/DD/20100524/DI&quot;</span> <span class=\"attr\">typeLanguage</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema&quot;</span> <span class=\"attr\">expressionLanguage</span>=<span class=\"string\">&quot;http://www.w3.org/1999/XPath&quot;</span> <span class=\"attr\">targetNamespace</span>=<span class=\"string\">&quot;http://www.activiti.org/test&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">process</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;myProcess&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;My process&quot;</span> <span class=\"attr\">isExecutable</span>=<span class=\"string\">&quot;true&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">startEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;startevent1&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;Start&quot;</span> <span class=\"attr\">activiti:formKey</span>=<span class=\"string\">&quot;form1&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">startEvent</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">userTask</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;usertask1&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;ç”¨æˆ·ç”³è¯·&quot;</span> <span class=\"attr\">activiti:assignee</span>=<span class=\"string\">&quot;zhangsan&quot;</span> <span class=\"attr\">activiti:formKey</span>=<span class=\"string\">&quot;form1&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">userTask</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;flow1&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;startevent1&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;usertask1&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;flow2&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;usertask1&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;exclusivegateway1&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">userTask</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;usertask2&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;æ€»ç›‘å®¡æ‰¹&quot;</span> <span class=\"attr\">activiti:assignee</span>=<span class=\"string\">&quot;lisi&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">userTask</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;flow3&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;exclusivegateway1&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;usertask2&quot;</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">conditionExpression</span> <span class=\"attr\">xsi:type</span>=<span class=\"string\">&quot;tFormalExpression&quot;</span>&gt;</span>&lt;![CDATA[$&#123;days&gt;3&#125;]]&gt;<span class=\"tag\">&lt;/<span class=\"name\">conditionExpression</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">userTask</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;usertask3&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;éƒ¨é—¨ç»ç†å®¡æ‰¹&quot;</span> <span class=\"attr\">activiti:assignee</span>=<span class=\"string\">&quot;wangwu&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">userTask</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;flow4&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;exclusivegateway1&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;usertask3&quot;</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">conditionExpression</span> <span class=\"attr\">xsi:type</span>=<span class=\"string\">&quot;tFormalExpression&quot;</span>&gt;</span>&lt;![CDATA[$&#123;days&lt;=3&#125;]]&gt;<span class=\"tag\">&lt;/<span class=\"name\">conditionExpression</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;flow5&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;usertask2&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;exclusivegateway2&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;flow6&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;usertask3&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;exclusivegateway2&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">endEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;endevent1&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;End&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">endEvent</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;flow7&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;exclusivegateway2&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;endevent1&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">exclusiveGateway</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;exclusivegateway1&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;Exclusive Gateway&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">exclusiveGateway</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">exclusiveGateway</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;exclusivegateway2&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;Exclusive Gateway&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">exclusiveGateway</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">process</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNDiagram</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNDiagram_myProcess&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNPlane</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;myProcess&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNPlane_myProcess&quot;</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;startevent1&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_startevent1&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;35.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;35.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;300.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;280.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;usertask1&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_usertask1&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;55.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;105.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;380.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;270.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;usertask2&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_usertask2&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;55.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;105.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;650.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;140.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;usertask3&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_usertask3&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;55.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;105.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;660.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;370.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;endevent1&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_endevent1&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;35.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;35.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;965.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;260.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;exclusivegateway1&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_exclusivegateway1&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;40.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;40.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;530.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;278.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;exclusivegateway2&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_exclusivegateway2&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;40.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;40.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;880.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;257.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;flow1&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_flow1&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;335.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;297.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;380.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;297.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;flow2&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_flow2&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;485.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;297.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;530.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;298.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;flow3&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_flow3&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;550.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;278.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;550.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;167.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;650.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;167.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;flow4&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_flow4&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;550.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;318.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;550.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;397.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;660.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;397.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;flow5&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_flow5&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;755.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;167.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;899.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;167.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;900.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;257.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;flow6&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_flow6&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;765.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;397.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;900.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;397.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;900.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;297.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;flow7&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_flow7&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;920.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;277.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;965.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;277.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNPlane</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNDiagram</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">definitions</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"éƒ¨ç½²æµç¨‹-2\"><a href=\"#éƒ¨ç½²æµç¨‹-2\" class=\"headerlink\" title=\"éƒ¨ç½²æµç¨‹\"></a>éƒ¨ç½²æµç¨‹</h3><p>æ¥ä¸‹æ¥æˆ‘ä»¬å…ˆéƒ¨ç½²æµç¨‹</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * éƒ¨ç½²æµç¨‹ï¼š</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">deploy</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"type\">Deployment</span> <span class=\"variable\">deploy</span> <span class=\"operator\">=</span> repositoryService.createDeployment()</span><br><span class=\"line\">            .addClasspathResource(<span class=\"string\">&quot;åŠ¨æ€è¡¨å•02.bpmn20.xml&quot;</span>)</span><br><span class=\"line\">            .name(<span class=\"string\">&quot;åŠ¨æ€è¡¨å•02&quot;</span>)</span><br><span class=\"line\">            .deploy();</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;deploy.getId() = &quot;</span> + deploy.getId());</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;deploy.getName() = &quot;</span> + deploy.getName());</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;éƒ¨ç½²å¼€å§‹çš„æ—¶é—´ï¼š&quot;</span> + <span class=\"keyword\">new</span> <span class=\"title class_\">Date</span>());</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"éƒ¨ç½²è¡¨å•\"><a href=\"#éƒ¨ç½²è¡¨å•\" class=\"headerlink\" title=\"éƒ¨ç½²è¡¨å•\"></a>éƒ¨ç½²è¡¨å•</h3><p>è¿™ä¸ªæ­¥éª¤å¾ˆé‡è¦ï¼Œæˆ‘ä»¬éœ€è¦å•ç‹¬æŠŠæˆ‘ä»¬çš„formæ–‡ä»¶éƒ¨ç½²åˆ°æµç¨‹ä¸­ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Autowired</span></span><br><span class=\"line\"><span class=\"keyword\">private</span> FormRepositoryService formRepositoryService;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * éƒ¨ç½²formè¡¨å•</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">deployForm</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> Exception&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"type\">FormDeployment</span> <span class=\"variable\">formDeployment</span> <span class=\"operator\">=</span> formRepositoryService.createDeployment()</span><br><span class=\"line\">            .addClasspathResource(<span class=\"string\">&quot;holiday.form&quot;</span>)</span><br><span class=\"line\">            .name(<span class=\"string\">&quot;test&quot;</span>)</span><br><span class=\"line\">            .parentDeploymentId(<span class=\"string\">&quot;1&quot;</span>)</span><br><span class=\"line\">            .deploy();</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;formDeployment.getId() = &quot;</span> + formDeployment.getId());</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>æˆ‘ä»¬éœ€è¦é€šè¿‡FormRepositoryServiceæ¥éƒ¨ç½²æˆ‘ä»¬çš„formè¡¨å•ã€‚å¯¹åº”çš„ä¼šåœ¨è¿™å‡ ç§è¡¨ä¸­ç”Ÿæˆå¯¹åº”çš„æ•°æ®</p>\n<p>Forméƒ¨ç½²è¡¨ï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220403231443464.png\"\n                      alt=\"image-20220403231443464\"\n                ></p>\n<p>Formå®šä¹‰è¡¨ï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220403231556049.png\"\n                      alt=\"image-20220403231556049\"\n                ></p>\n<p>Formèµ„æºè¡¨ï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220403231624905.png\"\n                      alt=\"image-20220403231624905\"\n                ></p>\n<h3 id=\"å¯åŠ¨ä»»åŠ¡\"><a href=\"#å¯åŠ¨ä»»åŠ¡\" class=\"headerlink\" title=\"å¯åŠ¨ä»»åŠ¡\"></a>å¯åŠ¨ä»»åŠ¡</h3><p>å¸¦æœ‰å¤–ç½®Formè¡¨å•çš„æµç¨‹æˆ‘ä»¬éœ€è¦é€šè¿‡<code>runtimeService.startProcessInstanceWithForm</code>æ¥å¯åŠ¨</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * å¯åŠ¨æµç¨‹å®ä¾‹ï¼Œå¹¶ä¸”è®¾ç½®å¯¹åº”çš„å€¼</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"title function_\">startTask</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    Map&lt;String,Object&gt; map = <span class=\"keyword\">new</span> <span class=\"title class_\">HashMap</span>&lt;&gt;();</span><br><span class=\"line\">    map.put(<span class=\"string\">&quot;days&quot;</span>,<span class=\"string\">&quot;4&quot;</span>);</span><br><span class=\"line\">    map.put(<span class=\"string\">&quot;startTime&quot;</span>,<span class=\"string\">&quot;20220404&quot;</span>);</span><br><span class=\"line\">    map.put(<span class=\"string\">&quot;reason&quot;</span>,<span class=\"string\">&quot;å‡ºå»ç©ç©&quot;</span>);</span><br><span class=\"line\">    <span class=\"type\">ProcessInstance</span> <span class=\"variable\">processInstance</span> <span class=\"operator\">=</span> runtimeService.startProcessInstanceWithForm(</span><br><span class=\"line\">            <span class=\"string\">&quot;myProcess:1:4&quot;</span></span><br><span class=\"line\">            , <span class=\"literal\">null</span></span><br><span class=\"line\">            , map</span><br><span class=\"line\">            , <span class=\"string\">&quot;è¯·å‡æµç¨‹&quot;</span>);</span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">id</span> <span class=\"operator\">=</span> processInstance.getId();</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;id = &quot;</span> + id);</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>å¯ä»¥çœ‹åˆ°å¯¹åº”çš„ä»»åŠ¡</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220403231811784.png\"\n                      alt=\"image-20220403231811784\"\n                ></p>\n<h3 id=\"æŸ¥çœ‹ä»»åŠ¡è¡¨å•æ•°æ®-1\"><a href=\"#æŸ¥çœ‹ä»»åŠ¡è¡¨å•æ•°æ®-1\" class=\"headerlink\" title=\"æŸ¥çœ‹ä»»åŠ¡è¡¨å•æ•°æ®\"></a>æŸ¥çœ‹ä»»åŠ¡è¡¨å•æ•°æ®</h3><p>åœ¨ä»»åŠ¡å¤„ç†ä¹‹å‰æˆ‘ä»¬å¯ä»¥æŸ¥çœ‹è¡¨å•çš„å¯¹åº”ä¿¡æ¯ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">   <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">    * æŸ¥çœ‹æµç¨‹å®šä¹‰è¡¨å•æ•°æ®</span></span><br><span class=\"line\"><span class=\"comment\">    */</span></span><br><span class=\"line\">   <span class=\"meta\">@Test</span></span><br><span class=\"line\">   <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">getTaskFormData1</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">       <span class=\"type\">Task</span> <span class=\"variable\">task</span> <span class=\"operator\">=</span> taskService.createTaskQuery()</span><br><span class=\"line\">               .processDefinitionId(<span class=\"string\">&quot;myProcess:1:4&quot;</span>)</span><br><span class=\"line\">               .taskAssignee(<span class=\"string\">&quot;zhangsan&quot;</span>)</span><br><span class=\"line\">               .singleResult();</span><br><span class=\"line\">       <span class=\"comment\">// FormInfo è¡¨å•çš„å…ƒæ•°æ®ä¿¡æ¯</span></span><br><span class=\"line\">       <span class=\"type\">FormInfo</span> <span class=\"variable\">formInfo</span> <span class=\"operator\">=</span> runtimeService.getStartFormModel(<span class=\"string\">&quot;myProcess:1:4&quot;</span>, <span class=\"string\">&quot;5001&quot;</span>);</span><br><span class=\"line\">       System.out.println(<span class=\"string\">&quot;formInfo.getId() = &quot;</span> + formInfo.getId());</span><br><span class=\"line\">       System.out.println(<span class=\"string\">&quot;formInfo.getName() = &quot;</span> + formInfo.getName());</span><br><span class=\"line\">       System.out.println(<span class=\"string\">&quot;formInfo.getKey() = &quot;</span> + formInfo.getKey());</span><br><span class=\"line\">       <span class=\"comment\">// FormModel è¡¨å•ä¸­çš„å…·ä½“ä¿¡æ¯ å…·ä½“å®ç°æ˜¯ SimpleFormModel</span></span><br><span class=\"line\">       <span class=\"type\">SimpleFormModel</span> <span class=\"variable\">formModel</span> <span class=\"operator\">=</span> (SimpleFormModel) formInfo.getFormModel();</span><br><span class=\"line\">       List&lt;FormField&gt; fields = formModel.getFields();</span><br><span class=\"line\">       <span class=\"keyword\">for</span> (FormField field : fields) &#123;</span><br><span class=\"line\">           System.out.println(<span class=\"string\">&quot;field.getId() = &quot;</span> + field.getId());</span><br><span class=\"line\">           System.out.println(<span class=\"string\">&quot;field.getName() = &quot;</span> + field.getName());</span><br><span class=\"line\">           System.out.println(<span class=\"string\">&quot;field.getValue() = &quot;</span> + field.getValue());</span><br><span class=\"line\">       &#125;</span><br><span class=\"line\">       System.out.println(<span class=\"string\">&quot;formModel = &quot;</span> + formModel);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">* æŸ¥çœ‹å…·ä½“çš„Taskçš„è¡¨å•æ•°æ®</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br><span class=\"line\">   <span class=\"meta\">@Test</span></span><br><span class=\"line\">   <span class=\"keyword\">void</span> <span class=\"title function_\">getTaskData</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">       <span class=\"type\">FormInfo</span> <span class=\"variable\">formInfo</span> <span class=\"operator\">=</span> taskService.getTaskFormModel(<span class=\"string\">&quot;17505&quot;</span>);</span><br><span class=\"line\">       System.out.println(<span class=\"string\">&quot;formInfo.getId() = &quot;</span> + formInfo.getId());</span><br><span class=\"line\">       System.out.println(<span class=\"string\">&quot;formInfo.getName() = &quot;</span> + formInfo.getName());</span><br><span class=\"line\">       System.out.println(<span class=\"string\">&quot;formInfo.getKey() = &quot;</span> + formInfo.getKey());</span><br><span class=\"line\">       <span class=\"type\">SimpleFormModel</span> <span class=\"variable\">formModel</span> <span class=\"operator\">=</span> (SimpleFormModel) formInfo.getFormModel();</span><br><span class=\"line\">       List&lt;FormField&gt; fields = formModel.getFields();</span><br><span class=\"line\">       <span class=\"keyword\">for</span> (FormField field : fields) &#123;</span><br><span class=\"line\">           System.out.println(<span class=\"string\">&quot;field.getId() = &quot;</span> + field.getId());</span><br><span class=\"line\">           System.out.println(<span class=\"string\">&quot;field.getName() = &quot;</span> + field.getName());</span><br><span class=\"line\">           System.out.println(<span class=\"string\">&quot;field.getValue() = &quot;</span> + field.getValue());</span><br><span class=\"line\">       &#125;</span><br><span class=\"line\">   &#125;</span><br></pre></td></tr></table></figure>\n\n\n\n\n\n<h3 id=\"å®Œæˆä»»åŠ¡-1\"><a href=\"#å®Œæˆä»»åŠ¡-1\" class=\"headerlink\" title=\"å®Œæˆä»»åŠ¡\"></a>å®Œæˆä»»åŠ¡</h3><p>åœ¨å¤–ç½®è¡¨å•çš„åœºæ™¯ä¸­æˆ‘ä»¬éœ€è¦é€šè¿‡<code>taskService.completeTaskWithForm</code>æ¥å®Œæˆè¡¨å•çš„ä»»åŠ¡</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * å®Œæˆä»»åŠ¡</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">completeTaskForm</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    Map&lt;String,Object&gt; map = <span class=\"keyword\">new</span> <span class=\"title class_\">HashMap</span>&lt;&gt;();</span><br><span class=\"line\">    map.put(<span class=\"string\">&quot;days&quot;</span>,<span class=\"string\">&quot;4&quot;</span>);</span><br><span class=\"line\">    map.put(<span class=\"string\">&quot;startTime&quot;</span>,<span class=\"string\">&quot;20220404&quot;</span>);</span><br><span class=\"line\">    map.put(<span class=\"string\">&quot;reason&quot;</span>,<span class=\"string\">&quot;å‡ºå»ç©ç©&quot;</span>);</span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">taskId</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;5010&quot;</span>;</span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">formDefinitionId</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;2503&quot;</span>;</span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">outcome</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;æ³¢å“¥&quot;</span>;</span><br><span class=\"line\">    taskService.completeTaskWithForm(taskId,formDefinitionId,outcome,map);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<p>ç„¶åä»»åŠ¡å°±æµè½¬åˆ°äº†ä¸‹ä¸€ä¸ªèŠ‚ç‚¹æ¥å¤„ç†äº†</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220403233308221.png\"\n                      alt=\"image-20220403233308221\"\n                ></p>\n<p>æå®š~ï¼</p>\n<h1 id=\"ä»»åŠ¡çš„å›é€€\"><a href=\"#ä»»åŠ¡çš„å›é€€\" class=\"headerlink\" title=\"ä»»åŠ¡çš„å›é€€\"></a>ä»»åŠ¡çš„å›é€€</h1><h2 id=\"ä¸²è¡Œçš„å›é€€\"><a href=\"#ä¸²è¡Œçš„å›é€€\" class=\"headerlink\" title=\"ä¸²è¡Œçš„å›é€€\"></a>ä¸²è¡Œçš„å›é€€</h2><p>æˆ‘ä»¬å…ˆä»æœ€ç®€å•çš„ä¸²è¡Œæµç¨‹æ¥åˆ†æï¼Œæ¡ˆä¾‹å¦‚ä¸‹</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220404221942030.png\"\n                      alt=\"image-20220404221942030\"\n                ></p>\n<p>å®Œæ•´çš„xmlæ–‡ä»¶å†…å®¹ï¼š</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=<span class=\"string\">&quot;1.0&quot;</span> encoding=<span class=\"string\">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">definitions</span> <span class=\"attr\">xmlns</span>=<span class=\"string\">&quot;http://www.omg.org/spec/BPMN/20100524/MODEL&quot;</span> <span class=\"attr\">xmlns:xsi</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span> <span class=\"attr\">xmlns:xsd</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema&quot;</span> <span class=\"attr\">xmlns:activiti</span>=<span class=\"string\">&quot;http://activiti.org/bpmn&quot;</span> <span class=\"attr\">xmlns:bpmndi</span>=<span class=\"string\">&quot;http://www.omg.org/spec/BPMN/20100524/DI&quot;</span> <span class=\"attr\">xmlns:omgdc</span>=<span class=\"string\">&quot;http://www.omg.org/spec/DD/20100524/DC&quot;</span> <span class=\"attr\">xmlns:omgdi</span>=<span class=\"string\">&quot;http://www.omg.org/spec/DD/20100524/DI&quot;</span> <span class=\"attr\">typeLanguage</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema&quot;</span> <span class=\"attr\">expressionLanguage</span>=<span class=\"string\">&quot;http://www.w3.org/1999/XPath&quot;</span> <span class=\"attr\">targetNamespace</span>=<span class=\"string\">&quot;http://www.activiti.org/test&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">process</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;myProcess&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;My process&quot;</span> <span class=\"attr\">isExecutable</span>=<span class=\"string\">&quot;true&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">startEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;startevent1&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;Start&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">startEvent</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">userTask</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;usertask1&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;ç”¨æˆ·ä»»åŠ¡1&quot;</span> <span class=\"attr\">activiti:assignee</span>=<span class=\"string\">&quot;user1&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">userTask</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;flow1&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;startevent1&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;usertask1&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">userTask</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;usertask2&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;ç”¨æˆ·ä»»åŠ¡2&quot;</span> <span class=\"attr\">activiti:assignee</span>=<span class=\"string\">&quot;user2&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">userTask</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;flow2&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;usertask1&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;usertask2&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">userTask</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;usertask3&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;ç”¨æˆ·ä»»åŠ¡3&quot;</span> <span class=\"attr\">activiti:assignee</span>=<span class=\"string\">&quot;user3&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">userTask</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;flow3&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;usertask2&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;usertask3&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">userTask</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;usertask4&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;ç”¨æˆ·ä»»åŠ¡4&quot;</span> <span class=\"attr\">activiti:assignee</span>=<span class=\"string\">&quot;user4&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">userTask</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;flow4&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;usertask3&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;usertask4&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">endEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;endevent1&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;End&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">endEvent</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;flow5&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;usertask4&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;endevent1&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">process</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNDiagram</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNDiagram_myProcess&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNPlane</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;myProcess&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNPlane_myProcess&quot;</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;startevent1&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_startevent1&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;35.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;35.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;390.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;260.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;usertask1&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_usertask1&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;55.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;105.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;470.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;250.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;usertask2&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_usertask2&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;55.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;105.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;620.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;250.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;usertask3&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_usertask3&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;55.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;105.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;770.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;250.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;usertask4&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_usertask4&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;55.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;105.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;920.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;250.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;endevent1&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_endevent1&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;35.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;35.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;1070.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;260.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;flow1&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_flow1&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;425.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;277.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;470.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;277.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;flow2&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_flow2&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;575.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;277.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;620.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;277.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;flow3&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_flow3&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;725.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;277.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;770.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;277.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;flow4&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_flow4&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;875.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;277.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;920.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;277.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;flow5&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_flow5&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;1025.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;277.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;1070.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;277.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNPlane</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNDiagram</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">definitions</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>ä¸Šé¢çš„æµç¨‹å°±æ˜¯ä¸€ä¸ªéå¸¸ç®€å•çš„ä¸²è¡Œä»»åŠ¡ï¼Œå®šä¹‰äº†4ä¸ªç”¨æˆ·ä»»åŠ¡ï¼ŒæŒ‡æ´¾çš„å¤„ç†äººåˆ†åˆ«æ˜¯<code>user1</code>,<code>user2</code>,<code>user3</code>,<code>user4</code>.åœ¨æµç¨‹çš„æ‰§è¡Œè¿‡ç¨‹ä¸­æˆ‘ä»¬å¯ä»¥é€šè¿‡å›é€€æ¥æ¼”ç¤ºå…·ä½“çš„æ•ˆæœã€‚é¦–å…ˆæ¥éƒ¨ç½²æµç¨‹</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * éƒ¨ç½²æµç¨‹</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"title function_\">testDeploy</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> Exception &#123;</span><br><span class=\"line\">    <span class=\"type\">Deployment</span> <span class=\"variable\">deploy</span> <span class=\"operator\">=</span> repositoryService.createDeployment()</span><br><span class=\"line\">            .addClasspathResource(<span class=\"string\">&quot;ä»»åŠ¡å›é€€01.bpmn20.xml&quot;</span>)</span><br><span class=\"line\">            .name(<span class=\"string\">&quot;ä»»åŠ¡å›é€€01&quot;</span>)</span><br><span class=\"line\">            .deploy();</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;deploy.getId() = &quot;</span> + deploy.getId());</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;deploy.getName() = &quot;</span> + deploy.getName());</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;éƒ¨ç½²å¼€å§‹çš„æ—¶é—´ï¼š&quot;</span> + <span class=\"keyword\">new</span> <span class=\"title class_\">Date</span>());</span><br><span class=\"line\">    <span class=\"comment\">//TimeUnit.MINUTES.sleep(3);</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ç„¶åæˆ‘ä»¬å¯åŠ¨ä¸€ä¸ªæµç¨‹å®ä¾‹ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * å¯åŠ¨æµç¨‹å®ä¾‹</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"title function_\">startProcess</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"type\">ProcessInstance</span> <span class=\"variable\">processInstance</span> <span class=\"operator\">=</span> runtimeService</span><br><span class=\"line\">            .startProcessInstanceById(<span class=\"string\">&quot;myProcess:1:4&quot;</span>);</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;processInstance.getId() = &quot;</span> + processInstance.getId());</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n\n\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220404222436788.png\"\n                      alt=\"image-20220404222436788\"\n                ></p>\n<p>ç„¶åæˆ‘ä»¬é€šè¿‡user1å®Œæˆä»»åŠ¡ï¼Œç›´åˆ°user3å®Œæˆä»»åŠ¡ï¼Œåˆ°user4æ¥å¤„ç†ä»»åŠ¡ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * å®Œæˆä»»åŠ¡</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"title function_\">completeTask</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"type\">Task</span> <span class=\"variable\">task</span> <span class=\"operator\">=</span> taskService.createTaskQuery()</span><br><span class=\"line\">            .processDefinitionId(<span class=\"string\">&quot;myProcess:1:4&quot;</span>)</span><br><span class=\"line\">            .taskAssignee(<span class=\"string\">&quot;user1&quot;</span>)</span><br><span class=\"line\">            .singleResult();</span><br><span class=\"line\">    taskService.complete(task.getId());</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>é€šè¿‡ä¸Šé¢çš„å¤šä¸ªTaskå®Œæˆæ“ä½œï¼Œç°åœ¨å·²ç»åˆ°äº†user4æ¥å¤„ç†çš„èŠ‚ç‚¹äº†</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220404223234982.png\"\n                      alt=\"image-20220404223234982\"\n                ></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220404223253043.png\"\n                      alt=\"image-20220404223253043\"\n                ></p>\n<p>æˆ‘ä»¬å…ˆçœ‹ä¸‹ä»<code>ç”¨æˆ·ä»»åŠ¡4</code>å›é€€åˆ°<code>ç”¨æˆ·ä»»åŠ¡3</code>çš„æ“ä½œã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * å›é€€æ“ä½œ</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"title function_\">rollbackTask</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// å½“å‰çš„Taskå¯¹åº”çš„ç”¨æˆ·ä»»åŠ¡çš„Id</span></span><br><span class=\"line\">    List&lt;String&gt; currentActivityIds = <span class=\"keyword\">new</span> <span class=\"title class_\">ArrayList</span>&lt;&gt;();</span><br><span class=\"line\">    currentActivityIds.add(<span class=\"string\">&quot;usertask4&quot;</span>);</span><br><span class=\"line\">    <span class=\"comment\">// éœ€è¦å›é€€çš„ç›®æ ‡èŠ‚ç‚¹çš„ç”¨æˆ·ä»»åŠ¡Id</span></span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">newActivityId</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;usertask3&quot;</span>;</span><br><span class=\"line\">    <span class=\"comment\">// å›é€€æ“ä½œ</span></span><br><span class=\"line\">    runtimeService.createChangeActivityStateBuilder()</span><br><span class=\"line\">            .processInstanceId(<span class=\"string\">&quot;2501&quot;</span>)</span><br><span class=\"line\">            .moveActivityIdsToSingleActivityId(currentActivityIds,newActivityId)</span><br><span class=\"line\">            .changeState();</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>æ“ä½œåæˆ‘ä»¬å¯ä»¥åœ¨å¯¹åº”çš„å†å²è¡¨ä¸­çœ‹åˆ°ç›¸å…³çš„ä¿¡æ¯</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220404224948722.png\"\n                      alt=\"image-20220404224948722\"\n                ></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220404225319024.png\"\n                      alt=\"image-20220404225319024\"\n                ></p>\n<p>ç„¶åæˆ‘ä»¬é€šè¿‡user3æ¥å®Œæˆä»»åŠ¡ç»§ç»­åˆ°user4å¤„ç†ï¼Œç„¶åæˆ‘ä»¬å¯ä»¥æµ‹è¯•å›é€€åˆ°user1å¤„ã€‚</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220404225345357.png\"\n                      alt=\"image-20220404225345357\"\n                ></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * å›é€€æ“ä½œ</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"title function_\">rollbackTask</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// å½“å‰çš„Taskå¯¹åº”çš„ç”¨æˆ·ä»»åŠ¡çš„Id</span></span><br><span class=\"line\">    List&lt;String&gt; currentActivityIds = <span class=\"keyword\">new</span> <span class=\"title class_\">ArrayList</span>&lt;&gt;();</span><br><span class=\"line\">    currentActivityIds.add(<span class=\"string\">&quot;usertask4&quot;</span>);</span><br><span class=\"line\">    <span class=\"comment\">// éœ€è¦å›é€€çš„ç›®æ ‡èŠ‚ç‚¹çš„ç”¨æˆ·ä»»åŠ¡Id</span></span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">newActivityId</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;usertask1&quot;</span>;</span><br><span class=\"line\">    <span class=\"comment\">// å›é€€æ“ä½œ</span></span><br><span class=\"line\">    runtimeService.createChangeActivityStateBuilder()</span><br><span class=\"line\">            .processInstanceId(<span class=\"string\">&quot;2501&quot;</span>)</span><br><span class=\"line\">            .moveActivityIdsToSingleActivityId(currentActivityIds,newActivityId)</span><br><span class=\"line\">            .changeState();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220404225532864.png\"\n                      alt=\"image-20220404225532864\"\n                ></p>\n<p>å¯ä»¥çœ‹åˆ°ä»»åŠ¡åˆå›åˆ°äº†user1å¤„ã€‚ä¹Ÿå°±æ˜¯åœ¨ä¸²è¡Œçš„æµç¨‹ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å›é€€åˆ°ä»»æ„çš„ç”¨æˆ·èŠ‚ç‚¹ï¼Œå½“ç„¶è¿™ä¸ªä¸²è¡Œä¹ŸåŒ…æ‹¬å¤šäººä¼šç­¾å’Œæ’ä»–ç½‘å…³èŠ‚ç‚¹ã€‚å½“ç„¶åœ¨å›é€€çš„æ—¶å€™æˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨<code>moveActivityIdTo(String currentActivityId,String newActivityId)</code>è¿™ä¸ªæ–¹æ³•æ¥å¤„ç†ã€‚</p>\n<h2 id=\"å¹¶è¡Œçš„å›é€€\"><a href=\"#å¹¶è¡Œçš„å›é€€\" class=\"headerlink\" title=\"å¹¶è¡Œçš„å›é€€\"></a>å¹¶è¡Œçš„å›é€€</h2><p>æ¥ä¸‹æ¥æˆ‘ä»¬åœ¨å¹¶è¡Œçš„åœºæ™¯ä¸­æ¥çœ‹çœ‹å„ç§å›é€€çš„åœºæ™¯ã€‚å…·ä½“æ¡ˆä¾‹æµç¨‹å¦‚ä¸‹ï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220405111325145.png\"\n                      alt=\"image-20220405111325145\"\n                ></p>\n<p>è¯¦ç»†çš„xmlæ–‡ä»¶å†…å®¹ï¼š</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=<span class=\"string\">&quot;1.0&quot;</span> encoding=<span class=\"string\">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">definitions</span> <span class=\"attr\">xmlns</span>=<span class=\"string\">&quot;http://www.omg.org/spec/BPMN/20100524/MODEL&quot;</span> <span class=\"attr\">xmlns:xsi</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span> <span class=\"attr\">xmlns:xsd</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema&quot;</span> <span class=\"attr\">xmlns:activiti</span>=<span class=\"string\">&quot;http://activiti.org/bpmn&quot;</span> <span class=\"attr\">xmlns:bpmndi</span>=<span class=\"string\">&quot;http://www.omg.org/spec/BPMN/20100524/DI&quot;</span> <span class=\"attr\">xmlns:omgdc</span>=<span class=\"string\">&quot;http://www.omg.org/spec/DD/20100524/DC&quot;</span> <span class=\"attr\">xmlns:omgdi</span>=<span class=\"string\">&quot;http://www.omg.org/spec/DD/20100524/DI&quot;</span> <span class=\"attr\">typeLanguage</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema&quot;</span> <span class=\"attr\">expressionLanguage</span>=<span class=\"string\">&quot;http://www.w3.org/1999/XPath&quot;</span> <span class=\"attr\">targetNamespace</span>=<span class=\"string\">&quot;http://www.activiti.org/test&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">process</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;myProcess&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;My process&quot;</span> <span class=\"attr\">isExecutable</span>=<span class=\"string\">&quot;true&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">startEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;startevent1&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;Start&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">startEvent</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">userTask</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;usertask1&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;ç”¨æˆ·å®¡æ‰¹01&quot;</span> <span class=\"attr\">activiti:assignee</span>=<span class=\"string\">&quot;user1&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">userTask</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;flow1&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;startevent1&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;usertask1&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;flow2&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;usertask1&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;parallelgateway1&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">parallelGateway</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;parallelgateway1&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;Exclusive Gateway&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">parallelGateway</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">userTask</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;usertask2&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;ä¸šåŠ¡è´Ÿè´£äºº&quot;</span> <span class=\"attr\">activiti:assignee</span>=<span class=\"string\">&quot;user2&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">userTask</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;flow3&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;parallelgateway1&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;usertask2&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">userTask</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;usertask3&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;è¡Œæ”¿å‰¯æ€»&quot;</span> <span class=\"attr\">activiti:assignee</span>=<span class=\"string\">&quot;user4&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">userTask</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;flow4&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;parallelgateway1&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;usertask3&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">userTask</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;usertask4&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;ä¸šåŠ¡å‰¯æ€»&quot;</span> <span class=\"attr\">activiti:assignee</span>=<span class=\"string\">&quot;user3&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">userTask</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;flow5&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;usertask2&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;usertask4&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;flow6&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;usertask4&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;parallelgateway2&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">parallelGateway</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;parallelgateway2&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;Exclusive Gateway&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">parallelGateway</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;flow7&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;usertask3&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;parallelgateway2&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">userTask</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;usertask5&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;æ€»ç»ç†&quot;</span> <span class=\"attr\">activiti:assignee</span>=<span class=\"string\">&quot;user5&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">userTask</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;flow8&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;parallelgateway2&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;usertask5&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">endEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;endevent1&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;End&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">endEvent</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;flow9&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;usertask5&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;endevent1&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">process</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNDiagram</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNDiagram_myProcess&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNPlane</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;myProcess&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNPlane_myProcess&quot;</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;startevent1&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_startevent1&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;35.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;35.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;370.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;300.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;usertask1&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_usertask1&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;55.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;105.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;450.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;290.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;parallelgateway1&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_parallelgateway1&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;40.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;40.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;600.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;298.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;usertask2&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_usertask2&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;55.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;105.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;740.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;180.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;usertask3&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_usertask3&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;55.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;105.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;740.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;370.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;usertask4&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_usertask4&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;55.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;105.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;930.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;180.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;parallelgateway2&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_parallelgateway2&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;40.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;40.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;1140.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;297.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;usertask5&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_usertask5&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;55.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;105.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;1225.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;290.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;endevent1&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_endevent1&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;35.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;35.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;1375.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;300.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;flow1&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_flow1&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;405.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;317.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;450.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;317.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;flow2&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_flow2&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;555.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;317.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;600.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;318.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;flow3&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_flow3&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;620.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;298.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;620.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;207.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;740.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;207.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;flow4&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_flow4&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;620.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;338.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;620.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;397.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;740.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;397.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;flow5&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_flow5&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;845.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;207.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;930.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;207.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;flow6&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_flow6&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;1035.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;207.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;1159.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;207.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;1160.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;297.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;flow7&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_flow7&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;845.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;397.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;1160.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;397.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;1160.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;337.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;flow8&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_flow8&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;1180.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;317.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;1225.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;317.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;flow9&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_flow9&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;1330.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;317.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;1375.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;317.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNPlane</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNDiagram</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">definitions</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>å…ˆéƒ¨ç½²æµç¨‹ï¼Œç„¶åå¯åŠ¨å¹¶è¿è¡Œåˆ°å¹¶è¡Œæµç¨‹çš„èŠ‚ç‚¹å¦‚ä¸‹çš„ä½ç½®<br><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220405111459624.png\"\n                      alt=\"image-20220405111459624\"\n                ></p>\n<p>ç„¶åæˆ‘ä»¬å¯ä»¥å°è¯•ä»<code>ä¸šåŠ¡å‰¯æ€»</code>å¤„å›é€€åˆ°<code>ç”¨æˆ·å®¡æ‰¹01</code>å¤„ï¼Œçœ‹çœ‹è¯¥å¤„ç†åº”è¯¥è¦å¦‚ä½•å®ç°ã€‚</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220405111926713.png\"\n                      alt=\"image-20220405111926713\"\n                ></p>\n<p>å›é€€é€»è¾‘ä»£ç çš„å®ç°</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * å›é€€æ“ä½œ</span></span><br><span class=\"line\"><span class=\"comment\"> *   ä¸šåŠ¡å‰¯æ€»é©³å›åˆ°åˆ°ç”¨æˆ·å®¡æ‰¹å¤„  é‚£ä¹ˆè¡Œæ”¿å®¡æ‰¹çš„ä¹Ÿåº”è¯¥è¦è¿”å›</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"title function_\">rollbackTask</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// å½“å‰çš„Taskå¯¹åº”çš„ç”¨æˆ·ä»»åŠ¡çš„Id</span></span><br><span class=\"line\">    List&lt;String&gt; currentActivityIds = <span class=\"keyword\">new</span> <span class=\"title class_\">ArrayList</span>&lt;&gt;();</span><br><span class=\"line\">    currentActivityIds.add(<span class=\"string\">&quot;usertask4&quot;</span>); <span class=\"comment\">// è¡Œæ”¿å‰¯æ€»</span></span><br><span class=\"line\">    currentActivityIds.add(<span class=\"string\">&quot;usertask3&quot;</span>); <span class=\"comment\">// ä¸šåŠ¡å‰¯æ€»</span></span><br><span class=\"line\">    <span class=\"comment\">// éœ€è¦å›é€€çš„ç›®æ ‡èŠ‚ç‚¹çš„ç”¨æˆ·ä»»åŠ¡Id</span></span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">newActivityId</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;usertask1&quot;</span>; <span class=\"comment\">// ç”¨æˆ·å®¡æ‰¹01</span></span><br><span class=\"line\">    <span class=\"comment\">// å›é€€æ“ä½œ</span></span><br><span class=\"line\">    runtimeService.createChangeActivityStateBuilder()</span><br><span class=\"line\">            .processInstanceId(<span class=\"string\">&quot;22501&quot;</span>)</span><br><span class=\"line\">            .moveActivityIdsToSingleActivityId(currentActivityIds,newActivityId)</span><br><span class=\"line\">            .changeState();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>æŸ¥çœ‹ACT_RU_TASKå¯ä»¥çœ‹åˆ°å›åˆ°äº†<code>ç”¨æˆ·å®¡æ‰¹01</code>äº†</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220405112329439.png\"\n                      alt=\"image-20220405112329439\"\n                ></p>\n<p>åŒæ—¶åœ¨ACT_HI_ACTINSä¸­ä¹Ÿå¯ä»¥çœ‹åˆ°å›é€€çš„å†å²æ“ä½œ</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220405112544706.png\"\n                      alt=\"image-20220405112544706\"\n                ></p>\n<p>ç„¶åå†æ¥çœ‹çœ‹ è¡Œæ”¿å‰¯æ€»çš„ å¹¶è¡Œåˆ†æ”¯æ‰§è¡Œå®Œæˆäº†ï¼Œç„¶ååœ¨ ä¸šåŠ¡å‰¯æ€»å¤„å®¡æ‰¹è¦é©³å›çš„å¤„ç†</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220405113125822.png\"\n                      alt=\"image-20220405113125822\"\n                ></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220405113212465.png\"\n                      alt=\"image-20220405113212465\"\n                ></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"title function_\">rollbackTask</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// å½“å‰çš„Taskå¯¹åº”çš„ç”¨æˆ·ä»»åŠ¡çš„Id</span></span><br><span class=\"line\">    List&lt;String&gt; currentActivityIds = <span class=\"keyword\">new</span> <span class=\"title class_\">ArrayList</span>&lt;&gt;();</span><br><span class=\"line\">    currentActivityIds.add(<span class=\"string\">&quot;usertask4&quot;</span>); <span class=\"comment\">// è¡Œæ”¿å‰¯æ€»</span></span><br><span class=\"line\">    <span class=\"comment\">//currentActivityIds.add(&quot;usertask3&quot;); // ä¸šåŠ¡å‰¯æ€»</span></span><br><span class=\"line\">    <span class=\"comment\">// éœ€è¦å›é€€çš„ç›®æ ‡èŠ‚ç‚¹çš„ç”¨æˆ·ä»»åŠ¡Id</span></span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">newActivityId</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;usertask1&quot;</span>; <span class=\"comment\">// ç”¨æˆ·å®¡æ‰¹01</span></span><br><span class=\"line\">    <span class=\"comment\">// å›é€€æ“ä½œ</span></span><br><span class=\"line\">    runtimeService.createChangeActivityStateBuilder()</span><br><span class=\"line\">            .processInstanceId(<span class=\"string\">&quot;22501&quot;</span>)</span><br><span class=\"line\">            .moveActivityIdsToSingleActivityId(currentActivityIds,newActivityId)</span><br><span class=\"line\">            .changeState();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<p>ä¸€æ ·çš„æ•ˆæœ</p>\n<h2 id=\"å­æµç¨‹å›é€€\"><a href=\"#å­æµç¨‹å›é€€\" class=\"headerlink\" title=\"å­æµç¨‹å›é€€\"></a>å­æµç¨‹å›é€€</h2><p>æœ€åæˆ‘ä»¬æ¥çœ‹çœ‹å¸¦æœ‰å­æµç¨‹çš„åœºæ™¯ä¸‹å¦‚æœæœ‰å›é€€çš„æƒ…å†µåº”è¯¥è¦å¦‚ä½•æ¥å¤„ç†,æ¡ˆä¾‹å¦‚ä¸‹ï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220405134220482.png\"\n                      alt=\"image-20220405134220482\"\n                ></p>\n<p>å®Œæ•´çš„xmlå†…å®¹ä¸ºï¼š</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=<span class=\"string\">&quot;1.0&quot;</span> encoding=<span class=\"string\">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">definitions</span> <span class=\"attr\">xmlns</span>=<span class=\"string\">&quot;http://www.omg.org/spec/BPMN/20100524/MODEL&quot;</span> <span class=\"attr\">xmlns:xsi</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span> <span class=\"attr\">xmlns:xsd</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema&quot;</span> <span class=\"attr\">xmlns:activiti</span>=<span class=\"string\">&quot;http://activiti.org/bpmn&quot;</span> <span class=\"attr\">xmlns:bpmndi</span>=<span class=\"string\">&quot;http://www.omg.org/spec/BPMN/20100524/DI&quot;</span> <span class=\"attr\">xmlns:omgdc</span>=<span class=\"string\">&quot;http://www.omg.org/spec/DD/20100524/DC&quot;</span> <span class=\"attr\">xmlns:omgdi</span>=<span class=\"string\">&quot;http://www.omg.org/spec/DD/20100524/DI&quot;</span> <span class=\"attr\">typeLanguage</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema&quot;</span> <span class=\"attr\">expressionLanguage</span>=<span class=\"string\">&quot;http://www.w3.org/1999/XPath&quot;</span> <span class=\"attr\">targetNamespace</span>=<span class=\"string\">&quot;http://www.activiti.org/test&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">process</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;myProcess&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;My process&quot;</span> <span class=\"attr\">isExecutable</span>=<span class=\"string\">&quot;true&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">startEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;startevent1&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;Start&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">startEvent</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">userTask</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;usertask1&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;ä¸»ä»»åŠ¡1&quot;</span> <span class=\"attr\">activiti:assignee</span>=<span class=\"string\">&quot;user1&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">userTask</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;flow1&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;startevent1&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;usertask1&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">subProcess</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;subprocess1&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;Sub Process&quot;</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">startEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;startevent2&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;Start&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">startEvent</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">userTask</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;usertask2&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;å­ä»»åŠ¡1&quot;</span> <span class=\"attr\">activiti:assignee</span>=<span class=\"string\">&quot;user2&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">userTask</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;flow3&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;startevent2&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;usertask2&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">endEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;endevent1&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;End&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">endEvent</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;flow4&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;usertask2&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;endevent1&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">subProcess</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;flow2&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;usertask1&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;subprocess1&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">userTask</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;usertask3&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;ä¸»ä»»åŠ¡2&quot;</span> <span class=\"attr\">activiti:assignee</span>=<span class=\"string\">&quot;user3&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">userTask</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;flow5&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;subprocess1&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;usertask3&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">endEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;endevent2&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;End&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">endEvent</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;flow6&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;usertask3&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;endevent2&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">process</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNDiagram</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNDiagram_myProcess&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNPlane</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;myProcess&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNPlane_myProcess&quot;</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;startevent1&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_startevent1&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;35.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;35.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;320.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;290.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;usertask1&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_usertask1&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;55.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;105.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;400.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;280.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;subprocess1&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_subprocess1&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;291.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;481.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;620.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;168.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;startevent2&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_startevent2&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;35.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;35.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;680.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;298.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;usertask2&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_usertask2&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;55.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;105.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;760.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;288.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;endevent1&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_endevent1&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;35.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;35.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;910.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;298.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;usertask3&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_usertask3&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;55.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;105.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;1146.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;286.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;endevent2&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_endevent2&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;35.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;35.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;1296.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;296.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;flow1&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_flow1&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;355.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;307.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;400.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;307.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;flow3&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_flow3&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;715.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;315.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;760.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;315.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;flow4&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_flow4&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;865.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;315.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;910.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;315.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;flow2&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_flow2&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;505.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;307.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;620.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;313.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;flow5&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_flow5&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;1101.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;313.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;1146.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;313.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;flow6&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_flow6&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;1251.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;313.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;1296.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;313.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNPlane</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNDiagram</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">definitions</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n\n\n<p>éƒ¨ç½²æµç¨‹åå¹¶å¯åŠ¨æµç¨‹ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹ç¬¬ä¸€ä¸ªåœºæ™¯ï¼Œä»å­æµç¨‹å›é€€åˆ°ä¸»æµç¨‹ï¼Œä¹Ÿå°±æ˜¯å¦‚ä¸‹å›¾ï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220405134411503.png\"\n                      alt=\"image-20220405134411503\"\n                ></p>\n<p>Taskè¿›å…¥åˆ°äº†å­æµç¨‹çš„Taskå¤„</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"C:\\Users\\dpb\\AppData\\Roaming\\Typora\\typora-user-images\\image-20220405134811970.png\"\n                      alt=\"image-20220405134811970\"\n                ></p>\n<p>ç„¶åæˆ‘ä»¬æ¥å¤„ç†å›é€€åˆ°ä¸»æµç¨‹:ç›´æ¥è·³è½¬å³å¯</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * å›é€€æ“ä½œ</span></span><br><span class=\"line\"><span class=\"comment\">     *   ä»å­æµç¨‹å›é€€åˆ°ä¸»æµç¨‹æ“ä½œ</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"keyword\">void</span> <span class=\"title function_\">rollbackMainTask</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// å›é€€æ“ä½œ</span></span><br><span class=\"line\">        runtimeService.createChangeActivityStateBuilder()</span><br><span class=\"line\">                .processInstanceId(<span class=\"string\">&quot;2501&quot;</span>)</span><br><span class=\"line\">                .moveActivityIdTo(<span class=\"string\">&quot;usertask2&quot;</span>,<span class=\"string\">&quot;usertask1&quot;</span>)</span><br><span class=\"line\">                .changeState();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * å›é€€æ“ä½œ</span></span><br><span class=\"line\"><span class=\"comment\">     *   ä»å­æµç¨‹å›é€€åˆ°ä¸»æµç¨‹æ“ä½œï¼šmoveExecutionToActivityIdä¸å…³å¿ƒå½“å‰çš„èŠ‚ç‚¹</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"keyword\">void</span> <span class=\"title function_\">rollbackMainTask</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// å›é€€æ“ä½œ</span></span><br><span class=\"line\">        runtimeService.createChangeActivityStateBuilder()</span><br><span class=\"line\">                .processInstanceId(<span class=\"string\">&quot;2501&quot;</span>)</span><br><span class=\"line\">                .moveExecutionToActivityId(<span class=\"string\">&quot;5003&quot;</span>,<span class=\"string\">&quot;usertask1&quot;</span>)</span><br><span class=\"line\">                .changeState();</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n\n<p>ç„¶åä»ä¸»æµç¨‹å›é€€åˆ°å­æµç¨‹æ“ä½œ</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220405140816409.png\"\n                      alt=\"image-20220405140816409\"\n                ></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220405141015720.png\"\n                      alt=\"image-20220405141015720\"\n                ></p>\n<p>åŒæ ·çš„ç›´æ¥è·³è½¬å³å¯</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * å›é€€æ“ä½œ</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"title function_\">rollbackSubTask</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// å›é€€æ“ä½œ</span></span><br><span class=\"line\">    runtimeService.createChangeActivityStateBuilder()</span><br><span class=\"line\">            .processInstanceId(<span class=\"string\">&quot;2501&quot;</span>)</span><br><span class=\"line\">            .moveActivityIdTo(<span class=\"string\">&quot;usertask3&quot;</span>,<span class=\"string\">&quot;usertask2&quot;</span>)</span><br><span class=\"line\">            .changeState();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n"},{"title":"iotè¾¹ç¼˜è®¡ç®—","date":"2022-10-01T11:25:51.000Z","_content":"## ç¨³å®šå¯é çš„é€šä¿¡æŠ€æœ¯\n\n### æœ‰çº¿é€šä¿¡æŠ€æœ¯\n\nä¼˜ç‚¹ï¼šç¨³å®šæ€§é«˜ï¼Œå¯é æ€§å¼º\n\nç¼ºç‚¹ï¼šå—é™äºä¼ è¾“åª’ä»‹\n\nä»¥å¤ªç½‘:æœ€é€šç”¨çš„é€šä¿¡åè®®æ ‡å‡†ï¼Œæ ‡å‡†ä»¥å¤ªç½‘ï¼Œå¿«é€Ÿä»¥å¤ªç½‘ï¼Œ10Gä»¥å¤ªç½‘\n\nRSâ€”232ï¼šä¸ªäººè®¡ç®—æœºDB9 or DB25\tä¸å¹³è¡¡ä¼ è¾“æ–¹å¼ï¼Œå•è¾¹é€šä¿¡\tä¼ è¾“è·ç¦»ä¸è¶…è¿‡20m\t1V1\n\nRS-485ï¼šå¯ä»¥å®ç°è”ç½‘\tå¹³è¡¡ä¼ è¾“ï¼Œå·®åˆ†ä¼ è¾“æ–¹å¼\tå‡ ç™¾åˆ°ä¸Šåƒ\t1Vn\n\nM-Busï¼šæˆ·ç”¨ä»ªè¡¨æ€»çº¿ï¼Œè¿œç¨‹æŠ„è¡¨ï¼Œä½æˆæœ¬ç»„ç½‘\n\nPLCï¼šç”µåŠ›çº¿é€šä¿¡ï¼Œè¡¨è¡¨->å·¥ä¸šç½‘å…³ \n\n### æ— çº¿é€šä¿¡æŠ€æœ¯\n\n2G,3G,4Gï¼šèœ‚çªç§»åŠ¨é€šä¿¡\n\nBluetooth:2.4-2.48GHæ³¢æ®µçš„æ— çº¿ç”µæ³¢ï¼Œé€Ÿç‡1Mbpsï¼Œ10cm-10mï¼Œé€Ÿç‡å¿«ã€ä½åŠŸè€—ã€å®‰å…¨æ€§é«˜ï¼ŒèŠ‚ç‚¹å°‘ä¸åˆ©äºå¤šç‚¹å¸ƒæ§\n\nWi-Fiï¼šè¿æ¥åˆ°æ— çº¿å±€åŸŸç½‘ï¼Œé€Ÿåº¦å¿«\n\nZigBeeï¼šä½åŠŸè€—å±€åŸŸç½‘åè®®\tç‰©ä½“é®æŒ¡è¡°å‡å‰å®³  \n\nZ-Waveï¼šç”¨äºä½å®…ã€‚30-100m\tç½‘ç»œç®€å•ï¼Œé€Ÿç‡è¾ƒä½\n\n### lpwaä½åŠŸè€—å¹¿åŸŸç½‘\n\nSigFoxï¼šä½åŠŸè€—ï¼ŒISMå°„é¢‘é¢‘æ®µ\n\nNB-lotï¼šçª„é¢‘ç½‘ç»œï¼Œå¯éƒ¨ç½²åœ¨èœ‚çªç½‘ç»œ \n\nLoRaï¼šå¼€æºMACå±‚åè®®\n\n![image-20220923194944959](https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20220923194944959.png)\n\n![image-20220923195011645](https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20220923195011645.png)\n\n## OceanConnect\n\n![image-20220923195209078](https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20220923195209078.png)\n\nç»Ÿä¸€æ¥å£ï¼Œæ–¹ä¾¿æ‹“å±•\n\n### MQTTå’ŒHTTP\n\næ¶ˆæ¯é˜Ÿåˆ—é¥æµ‹ä¼ è¾“ï¼šMessage Queuing Telemetry Transport\n\nIBMå¼€å‘çš„åŸºäºTCP/IPçš„å³æ—¶é€šè®¯åè®®\n\né‡‡ç”¨è®¢é˜…å‘å¸ƒçš„æ¨¡å¼ï¼Œé•¿è¿æ¥æ–¹å¼\n\nä¼˜ç‚¹ï¼šåè®®ç®€å•ï¼Œè½»é‡çº§ï¼Œæ¶ˆæ¯å¯ä»¥çŸ­è‡³ä¸¤å­—èŠ‚ï¼Œå¯¹ç»ˆç«¯çš„ç¡¬ä»¶é…ç½®è¦æ±‚ä½\n\næ™ºæ…§å®¶åº­\n\nCoAPï¼šConstrained Application Protocol\n\nä¸“ç”¨äºèµ„æºå—é™è®¾å¤‡çš„é€šä¿¡ï¼ŒNB-lot/LoRa\n\nä»httpå‘å±•è€Œæ¥ï¼Œé‡‡ç”¨è¯·æ±‚å“åº”\n\næœ€å°4å­—èŠ‚\n\n### å¯¹æ¯”\n\n![image-20220923195746901](https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20220923195746901.png)\n\nç‰©è”ç½‘å¹³å°å±‚æ¬¡\n\n![image-20220923195812117](https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20220923195812117.png)\n\næ¥å…¥æ— å…³ï¼Œå¯é æ€§ï¼Œå®‰å…¨æ€§ï¼Œå¼¹æ€§ä¼¸ç¼©ï¼Œèƒ½åŠ›å¼€æ”¾\n\n![image-20220923200007426](https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20220923200007426.png)\n\nè®¾å¤‡ç®¡ç†ï¼šç½‘å…³ç®¡ç†ï¼ŒRESTå’ŒHTTPSä¸‹å‘å„ç±»é…ç½®ç®¡ç†å‘½ä»¤ï¼ŒDM Serveré€šè¿‡Coap/HTTPSå°†å‘½ä»¤ä¼ ç»™ç½‘å…³æˆ–è€…å…¶ä»–ç›´è¿è®¾å¤‡ï¼Œå®Œæˆè®¾å¤‡çš„é…ç½®ç®¡ç†\n\né‰´æƒï¼šåˆ›å»ºä¼ æ„Ÿå™¨é‰´æƒï¼Œè®¾å¤‡æ¥å…¥é‰´æƒï¼Œä¸ŠæŠ¥æ•°æ®é‰´æƒ\n\nè§„åˆ™å¼•æ“ï¼šè§„åˆ™ç»‘å®šï¼Œæ»¡è¶³æ¡ä»¶ï¼Œè‡ªåŠ¨æ‰§è¡ŒåŠ¨ä½œ\n\nPortalï¼šSPï¼ŒOSSï¼ŒOperation\n\n### å¹³å°æ¶æ„\n\n![image-20220923201228365](https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20220923201228365.png)\n\nIoCMï¼šiotè”æ¥ç®¡ç†æ¨¡å—ï¼Œæ˜¯å¹³å°æœ€é‡è¦çš„æ¨¡å—ï¼Œæ”¯æŒè”æ¥çŠ¶æ€ç®¡ç†å’Œæ§åˆ¶å‘½ä»¤è½¬å‘\n\nDM Serverï¼šè®¾å¤‡ç®¡ç†æœåŠ¡å™¨ï¼Œç‰©è”ç½‘ç®¡ç†å’Œå‡çº§\n\nRule Engineï¼šè§„åˆ™å¼•æ“ï¼Œç”¨æˆ·è®¾å®šè§„åˆ™æ»¡è¶³ä¸šåŠ¡éœ€æ±‚\n\nMongoDBï¼šç”¨æˆ·ä¿¡æ¯æ•°æ®åº“\n\nCIGï¼šäº‘ç½‘å…³\n\nå—å‘çš„ç»ˆç«¯è®¾å¤‡å¯ä»¥é€šè¿‡CIGçš„åè®®é€‚é…è¿æ¥å¹³å°\n\nå¹³å°é€šè¿‡API Serveræ¥å…¥åŒ—å‘çš„iotåº”ç”¨æœåŠ¡å™¨\n\nä¸šåŠ¡æµç¨‹ï¼š\n\n![image-20220923201805426](https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20220923201805426.png)\n\n### NB-iot\n\næ˜¯ä¸€é¡¹åŸºäºçª„å¸¦çš„é€šä¿¡æŠ€æœ¯\n\nHSSå½’å±ç”¨æˆ·æœåŠ¡å™¨ï¼šå­˜å‚¨ç”¨æˆ·ä¿¡æ¯çš„æ ¸å¿ƒæ•°æ®åº“ï¼Œä¸»è¦ç”¨æ¥ä¿å­˜ç”¨æˆ·ç­¾çº¦ä¿¡æ¯\n\nEPCæ ¸å¿ƒç½‘ï¼šHSSå½’å±ç”¨æˆ·æœåŠ¡å™¨ï¼ŒMMEä¿¡ä»¤å¤„ç†éƒ¨åˆ†ï¼ŒPGWï¼šPDNç½‘å…³ï¼ŒSGWæœåŠ¡ç½‘å…³\n\nåº”ç”¨å±‚ï¼šwebç•Œé¢","source":"_posts/2022/10/iot.md","raw":"---\ntitle: iotè¾¹ç¼˜è®¡ç®—\ndate: 2022-10-01 19:25:51\ntags: [è¾¹ç¼˜è®¡ç®—]\ncategories: [ç¬”è®°]\n---\n## ç¨³å®šå¯é çš„é€šä¿¡æŠ€æœ¯\n\n### æœ‰çº¿é€šä¿¡æŠ€æœ¯\n\nä¼˜ç‚¹ï¼šç¨³å®šæ€§é«˜ï¼Œå¯é æ€§å¼º\n\nç¼ºç‚¹ï¼šå—é™äºä¼ è¾“åª’ä»‹\n\nä»¥å¤ªç½‘:æœ€é€šç”¨çš„é€šä¿¡åè®®æ ‡å‡†ï¼Œæ ‡å‡†ä»¥å¤ªç½‘ï¼Œå¿«é€Ÿä»¥å¤ªç½‘ï¼Œ10Gä»¥å¤ªç½‘\n\nRSâ€”232ï¼šä¸ªäººè®¡ç®—æœºDB9 or DB25\tä¸å¹³è¡¡ä¼ è¾“æ–¹å¼ï¼Œå•è¾¹é€šä¿¡\tä¼ è¾“è·ç¦»ä¸è¶…è¿‡20m\t1V1\n\nRS-485ï¼šå¯ä»¥å®ç°è”ç½‘\tå¹³è¡¡ä¼ è¾“ï¼Œå·®åˆ†ä¼ è¾“æ–¹å¼\tå‡ ç™¾åˆ°ä¸Šåƒ\t1Vn\n\nM-Busï¼šæˆ·ç”¨ä»ªè¡¨æ€»çº¿ï¼Œè¿œç¨‹æŠ„è¡¨ï¼Œä½æˆæœ¬ç»„ç½‘\n\nPLCï¼šç”µåŠ›çº¿é€šä¿¡ï¼Œè¡¨è¡¨->å·¥ä¸šç½‘å…³ \n\n### æ— çº¿é€šä¿¡æŠ€æœ¯\n\n2G,3G,4Gï¼šèœ‚çªç§»åŠ¨é€šä¿¡\n\nBluetooth:2.4-2.48GHæ³¢æ®µçš„æ— çº¿ç”µæ³¢ï¼Œé€Ÿç‡1Mbpsï¼Œ10cm-10mï¼Œé€Ÿç‡å¿«ã€ä½åŠŸè€—ã€å®‰å…¨æ€§é«˜ï¼ŒèŠ‚ç‚¹å°‘ä¸åˆ©äºå¤šç‚¹å¸ƒæ§\n\nWi-Fiï¼šè¿æ¥åˆ°æ— çº¿å±€åŸŸç½‘ï¼Œé€Ÿåº¦å¿«\n\nZigBeeï¼šä½åŠŸè€—å±€åŸŸç½‘åè®®\tç‰©ä½“é®æŒ¡è¡°å‡å‰å®³  \n\nZ-Waveï¼šç”¨äºä½å®…ã€‚30-100m\tç½‘ç»œç®€å•ï¼Œé€Ÿç‡è¾ƒä½\n\n### lpwaä½åŠŸè€—å¹¿åŸŸç½‘\n\nSigFoxï¼šä½åŠŸè€—ï¼ŒISMå°„é¢‘é¢‘æ®µ\n\nNB-lotï¼šçª„é¢‘ç½‘ç»œï¼Œå¯éƒ¨ç½²åœ¨èœ‚çªç½‘ç»œ \n\nLoRaï¼šå¼€æºMACå±‚åè®®\n\n![image-20220923194944959](https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20220923194944959.png)\n\n![image-20220923195011645](https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20220923195011645.png)\n\n## OceanConnect\n\n![image-20220923195209078](https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20220923195209078.png)\n\nç»Ÿä¸€æ¥å£ï¼Œæ–¹ä¾¿æ‹“å±•\n\n### MQTTå’ŒHTTP\n\næ¶ˆæ¯é˜Ÿåˆ—é¥æµ‹ä¼ è¾“ï¼šMessage Queuing Telemetry Transport\n\nIBMå¼€å‘çš„åŸºäºTCP/IPçš„å³æ—¶é€šè®¯åè®®\n\né‡‡ç”¨è®¢é˜…å‘å¸ƒçš„æ¨¡å¼ï¼Œé•¿è¿æ¥æ–¹å¼\n\nä¼˜ç‚¹ï¼šåè®®ç®€å•ï¼Œè½»é‡çº§ï¼Œæ¶ˆæ¯å¯ä»¥çŸ­è‡³ä¸¤å­—èŠ‚ï¼Œå¯¹ç»ˆç«¯çš„ç¡¬ä»¶é…ç½®è¦æ±‚ä½\n\næ™ºæ…§å®¶åº­\n\nCoAPï¼šConstrained Application Protocol\n\nä¸“ç”¨äºèµ„æºå—é™è®¾å¤‡çš„é€šä¿¡ï¼ŒNB-lot/LoRa\n\nä»httpå‘å±•è€Œæ¥ï¼Œé‡‡ç”¨è¯·æ±‚å“åº”\n\næœ€å°4å­—èŠ‚\n\n### å¯¹æ¯”\n\n![image-20220923195746901](https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20220923195746901.png)\n\nç‰©è”ç½‘å¹³å°å±‚æ¬¡\n\n![image-20220923195812117](https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20220923195812117.png)\n\næ¥å…¥æ— å…³ï¼Œå¯é æ€§ï¼Œå®‰å…¨æ€§ï¼Œå¼¹æ€§ä¼¸ç¼©ï¼Œèƒ½åŠ›å¼€æ”¾\n\n![image-20220923200007426](https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20220923200007426.png)\n\nè®¾å¤‡ç®¡ç†ï¼šç½‘å…³ç®¡ç†ï¼ŒRESTå’ŒHTTPSä¸‹å‘å„ç±»é…ç½®ç®¡ç†å‘½ä»¤ï¼ŒDM Serveré€šè¿‡Coap/HTTPSå°†å‘½ä»¤ä¼ ç»™ç½‘å…³æˆ–è€…å…¶ä»–ç›´è¿è®¾å¤‡ï¼Œå®Œæˆè®¾å¤‡çš„é…ç½®ç®¡ç†\n\né‰´æƒï¼šåˆ›å»ºä¼ æ„Ÿå™¨é‰´æƒï¼Œè®¾å¤‡æ¥å…¥é‰´æƒï¼Œä¸ŠæŠ¥æ•°æ®é‰´æƒ\n\nè§„åˆ™å¼•æ“ï¼šè§„åˆ™ç»‘å®šï¼Œæ»¡è¶³æ¡ä»¶ï¼Œè‡ªåŠ¨æ‰§è¡ŒåŠ¨ä½œ\n\nPortalï¼šSPï¼ŒOSSï¼ŒOperation\n\n### å¹³å°æ¶æ„\n\n![image-20220923201228365](https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20220923201228365.png)\n\nIoCMï¼šiotè”æ¥ç®¡ç†æ¨¡å—ï¼Œæ˜¯å¹³å°æœ€é‡è¦çš„æ¨¡å—ï¼Œæ”¯æŒè”æ¥çŠ¶æ€ç®¡ç†å’Œæ§åˆ¶å‘½ä»¤è½¬å‘\n\nDM Serverï¼šè®¾å¤‡ç®¡ç†æœåŠ¡å™¨ï¼Œç‰©è”ç½‘ç®¡ç†å’Œå‡çº§\n\nRule Engineï¼šè§„åˆ™å¼•æ“ï¼Œç”¨æˆ·è®¾å®šè§„åˆ™æ»¡è¶³ä¸šåŠ¡éœ€æ±‚\n\nMongoDBï¼šç”¨æˆ·ä¿¡æ¯æ•°æ®åº“\n\nCIGï¼šäº‘ç½‘å…³\n\nå—å‘çš„ç»ˆç«¯è®¾å¤‡å¯ä»¥é€šè¿‡CIGçš„åè®®é€‚é…è¿æ¥å¹³å°\n\nå¹³å°é€šè¿‡API Serveræ¥å…¥åŒ—å‘çš„iotåº”ç”¨æœåŠ¡å™¨\n\nä¸šåŠ¡æµç¨‹ï¼š\n\n![image-20220923201805426](https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20220923201805426.png)\n\n### NB-iot\n\næ˜¯ä¸€é¡¹åŸºäºçª„å¸¦çš„é€šä¿¡æŠ€æœ¯\n\nHSSå½’å±ç”¨æˆ·æœåŠ¡å™¨ï¼šå­˜å‚¨ç”¨æˆ·ä¿¡æ¯çš„æ ¸å¿ƒæ•°æ®åº“ï¼Œä¸»è¦ç”¨æ¥ä¿å­˜ç”¨æˆ·ç­¾çº¦ä¿¡æ¯\n\nEPCæ ¸å¿ƒç½‘ï¼šHSSå½’å±ç”¨æˆ·æœåŠ¡å™¨ï¼ŒMMEä¿¡ä»¤å¤„ç†éƒ¨åˆ†ï¼ŒPGWï¼šPDNç½‘å…³ï¼ŒSGWæœåŠ¡ç½‘å…³\n\nåº”ç”¨å±‚ï¼šwebç•Œé¢","slug":"iot","published":1,"updated":"2022-09-29T16:07:27.878Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clas9ersu000ldk8fcsat0gd2","content":"<h2 id=\"ç¨³å®šå¯é çš„é€šä¿¡æŠ€æœ¯\"><a href=\"#ç¨³å®šå¯é çš„é€šä¿¡æŠ€æœ¯\" class=\"headerlink\" title=\"ç¨³å®šå¯é çš„é€šä¿¡æŠ€æœ¯\"></a>ç¨³å®šå¯é çš„é€šä¿¡æŠ€æœ¯</h2><h3 id=\"æœ‰çº¿é€šä¿¡æŠ€æœ¯\"><a href=\"#æœ‰çº¿é€šä¿¡æŠ€æœ¯\" class=\"headerlink\" title=\"æœ‰çº¿é€šä¿¡æŠ€æœ¯\"></a>æœ‰çº¿é€šä¿¡æŠ€æœ¯</h3><p>ä¼˜ç‚¹ï¼šç¨³å®šæ€§é«˜ï¼Œå¯é æ€§å¼º</p>\n<p>ç¼ºç‚¹ï¼šå—é™äºä¼ è¾“åª’ä»‹</p>\n<p>ä»¥å¤ªç½‘:æœ€é€šç”¨çš„é€šä¿¡åè®®æ ‡å‡†ï¼Œæ ‡å‡†ä»¥å¤ªç½‘ï¼Œå¿«é€Ÿä»¥å¤ªç½‘ï¼Œ10Gä»¥å¤ªç½‘</p>\n<p>RSâ€”232ï¼šä¸ªäººè®¡ç®—æœºDB9 or DB25\tä¸å¹³è¡¡ä¼ è¾“æ–¹å¼ï¼Œå•è¾¹é€šä¿¡\tä¼ è¾“è·ç¦»ä¸è¶…è¿‡20m\t1V1</p>\n<p>RS-485ï¼šå¯ä»¥å®ç°è”ç½‘\tå¹³è¡¡ä¼ è¾“ï¼Œå·®åˆ†ä¼ è¾“æ–¹å¼\tå‡ ç™¾åˆ°ä¸Šåƒ\t1Vn</p>\n<p>M-Busï¼šæˆ·ç”¨ä»ªè¡¨æ€»çº¿ï¼Œè¿œç¨‹æŠ„è¡¨ï¼Œä½æˆæœ¬ç»„ç½‘</p>\n<p>PLCï¼šç”µåŠ›çº¿é€šä¿¡ï¼Œè¡¨è¡¨-&gt;å·¥ä¸šç½‘å…³ </p>\n<h3 id=\"æ— çº¿é€šä¿¡æŠ€æœ¯\"><a href=\"#æ— çº¿é€šä¿¡æŠ€æœ¯\" class=\"headerlink\" title=\"æ— çº¿é€šä¿¡æŠ€æœ¯\"></a>æ— çº¿é€šä¿¡æŠ€æœ¯</h3><p>2G,3G,4Gï¼šèœ‚çªç§»åŠ¨é€šä¿¡</p>\n<p>Bluetooth:2.4-2.48GHæ³¢æ®µçš„æ— çº¿ç”µæ³¢ï¼Œé€Ÿç‡1Mbpsï¼Œ10cm-10mï¼Œé€Ÿç‡å¿«ã€ä½åŠŸè€—ã€å®‰å…¨æ€§é«˜ï¼ŒèŠ‚ç‚¹å°‘ä¸åˆ©äºå¤šç‚¹å¸ƒæ§</p>\n<p>Wi-Fiï¼šè¿æ¥åˆ°æ— çº¿å±€åŸŸç½‘ï¼Œé€Ÿåº¦å¿«</p>\n<p>ZigBeeï¼šä½åŠŸè€—å±€åŸŸç½‘åè®®\tç‰©ä½“é®æŒ¡è¡°å‡å‰å®³  </p>\n<p>Z-Waveï¼šç”¨äºä½å®…ã€‚30-100m\tç½‘ç»œç®€å•ï¼Œé€Ÿç‡è¾ƒä½</p>\n<h3 id=\"lpwaä½åŠŸè€—å¹¿åŸŸç½‘\"><a href=\"#lpwaä½åŠŸè€—å¹¿åŸŸç½‘\" class=\"headerlink\" title=\"lpwaä½åŠŸè€—å¹¿åŸŸç½‘\"></a>lpwaä½åŠŸè€—å¹¿åŸŸç½‘</h3><p>SigFoxï¼šä½åŠŸè€—ï¼ŒISMå°„é¢‘é¢‘æ®µ</p>\n<p>NB-lotï¼šçª„é¢‘ç½‘ç»œï¼Œå¯éƒ¨ç½²åœ¨èœ‚çªç½‘ç»œ </p>\n<p>LoRaï¼šå¼€æºMACå±‚åè®®</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20220923194944959.png\"\n                      alt=\"image-20220923194944959\"\n                ></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20220923195011645.png\"\n                      alt=\"image-20220923195011645\"\n                ></p>\n<h2 id=\"OceanConnect\"><a href=\"#OceanConnect\" class=\"headerlink\" title=\"OceanConnect\"></a>OceanConnect</h2><p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20220923195209078.png\"\n                      alt=\"image-20220923195209078\"\n                ></p>\n<p>ç»Ÿä¸€æ¥å£ï¼Œæ–¹ä¾¿æ‹“å±•</p>\n<h3 id=\"MQTTå’ŒHTTP\"><a href=\"#MQTTå’ŒHTTP\" class=\"headerlink\" title=\"MQTTå’ŒHTTP\"></a>MQTTå’ŒHTTP</h3><p>æ¶ˆæ¯é˜Ÿåˆ—é¥æµ‹ä¼ è¾“ï¼šMessage Queuing Telemetry Transport</p>\n<p>IBMå¼€å‘çš„åŸºäºTCP&#x2F;IPçš„å³æ—¶é€šè®¯åè®®</p>\n<p>é‡‡ç”¨è®¢é˜…å‘å¸ƒçš„æ¨¡å¼ï¼Œé•¿è¿æ¥æ–¹å¼</p>\n<p>ä¼˜ç‚¹ï¼šåè®®ç®€å•ï¼Œè½»é‡çº§ï¼Œæ¶ˆæ¯å¯ä»¥çŸ­è‡³ä¸¤å­—èŠ‚ï¼Œå¯¹ç»ˆç«¯çš„ç¡¬ä»¶é…ç½®è¦æ±‚ä½</p>\n<p>æ™ºæ…§å®¶åº­</p>\n<p>CoAPï¼šConstrained Application Protocol</p>\n<p>ä¸“ç”¨äºèµ„æºå—é™è®¾å¤‡çš„é€šä¿¡ï¼ŒNB-lot&#x2F;LoRa</p>\n<p>ä»httpå‘å±•è€Œæ¥ï¼Œé‡‡ç”¨è¯·æ±‚å“åº”</p>\n<p>æœ€å°4å­—èŠ‚</p>\n<h3 id=\"å¯¹æ¯”\"><a href=\"#å¯¹æ¯”\" class=\"headerlink\" title=\"å¯¹æ¯”\"></a>å¯¹æ¯”</h3><p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20220923195746901.png\"\n                      alt=\"image-20220923195746901\"\n                ></p>\n<p>ç‰©è”ç½‘å¹³å°å±‚æ¬¡</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20220923195812117.png\"\n                      alt=\"image-20220923195812117\"\n                ></p>\n<p>æ¥å…¥æ— å…³ï¼Œå¯é æ€§ï¼Œå®‰å…¨æ€§ï¼Œå¼¹æ€§ä¼¸ç¼©ï¼Œèƒ½åŠ›å¼€æ”¾</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20220923200007426.png\"\n                      alt=\"image-20220923200007426\"\n                ></p>\n<p>è®¾å¤‡ç®¡ç†ï¼šç½‘å…³ç®¡ç†ï¼ŒRESTå’ŒHTTPSä¸‹å‘å„ç±»é…ç½®ç®¡ç†å‘½ä»¤ï¼ŒDM Serveré€šè¿‡Coap&#x2F;HTTPSå°†å‘½ä»¤ä¼ ç»™ç½‘å…³æˆ–è€…å…¶ä»–ç›´è¿è®¾å¤‡ï¼Œå®Œæˆè®¾å¤‡çš„é…ç½®ç®¡ç†</p>\n<p>é‰´æƒï¼šåˆ›å»ºä¼ æ„Ÿå™¨é‰´æƒï¼Œè®¾å¤‡æ¥å…¥é‰´æƒï¼Œä¸ŠæŠ¥æ•°æ®é‰´æƒ</p>\n<p>è§„åˆ™å¼•æ“ï¼šè§„åˆ™ç»‘å®šï¼Œæ»¡è¶³æ¡ä»¶ï¼Œè‡ªåŠ¨æ‰§è¡ŒåŠ¨ä½œ</p>\n<p>Portalï¼šSPï¼ŒOSSï¼ŒOperation</p>\n<h3 id=\"å¹³å°æ¶æ„\"><a href=\"#å¹³å°æ¶æ„\" class=\"headerlink\" title=\"å¹³å°æ¶æ„\"></a>å¹³å°æ¶æ„</h3><p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20220923201228365.png\"\n                      alt=\"image-20220923201228365\"\n                ></p>\n<p>IoCMï¼šiotè”æ¥ç®¡ç†æ¨¡å—ï¼Œæ˜¯å¹³å°æœ€é‡è¦çš„æ¨¡å—ï¼Œæ”¯æŒè”æ¥çŠ¶æ€ç®¡ç†å’Œæ§åˆ¶å‘½ä»¤è½¬å‘</p>\n<p>DM Serverï¼šè®¾å¤‡ç®¡ç†æœåŠ¡å™¨ï¼Œç‰©è”ç½‘ç®¡ç†å’Œå‡çº§</p>\n<p>Rule Engineï¼šè§„åˆ™å¼•æ“ï¼Œç”¨æˆ·è®¾å®šè§„åˆ™æ»¡è¶³ä¸šåŠ¡éœ€æ±‚</p>\n<p>MongoDBï¼šç”¨æˆ·ä¿¡æ¯æ•°æ®åº“</p>\n<p>CIGï¼šäº‘ç½‘å…³</p>\n<p>å—å‘çš„ç»ˆç«¯è®¾å¤‡å¯ä»¥é€šè¿‡CIGçš„åè®®é€‚é…è¿æ¥å¹³å°</p>\n<p>å¹³å°é€šè¿‡API Serveræ¥å…¥åŒ—å‘çš„iotåº”ç”¨æœåŠ¡å™¨</p>\n<p>ä¸šåŠ¡æµç¨‹ï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20220923201805426.png\"\n                      alt=\"image-20220923201805426\"\n                ></p>\n<h3 id=\"NB-iot\"><a href=\"#NB-iot\" class=\"headerlink\" title=\"NB-iot\"></a>NB-iot</h3><p>æ˜¯ä¸€é¡¹åŸºäºçª„å¸¦çš„é€šä¿¡æŠ€æœ¯</p>\n<p>HSSå½’å±ç”¨æˆ·æœåŠ¡å™¨ï¼šå­˜å‚¨ç”¨æˆ·ä¿¡æ¯çš„æ ¸å¿ƒæ•°æ®åº“ï¼Œä¸»è¦ç”¨æ¥ä¿å­˜ç”¨æˆ·ç­¾çº¦ä¿¡æ¯</p>\n<p>EPCæ ¸å¿ƒç½‘ï¼šHSSå½’å±ç”¨æˆ·æœåŠ¡å™¨ï¼ŒMMEä¿¡ä»¤å¤„ç†éƒ¨åˆ†ï¼ŒPGWï¼šPDNç½‘å…³ï¼ŒSGWæœåŠ¡ç½‘å…³</p>\n<p>åº”ç”¨å±‚ï¼šwebç•Œé¢</p>\n","site":{"data":{"links":[{"name":"CZMæœ‰ç‚¹å†·","link":"https://czm.cool/","description":"CZMçš„åšå®¢","avatar":"https://img.czm.cool/avatar/avatar.png"},{"name":"PSH","link":"https://shamd.cloud/","description":"PSHçš„åšå®¢.","avatar":"https://shamd.cloud/upload/2022/07/afbb577733f46c9535dd1d6d6388278.jpg"},{"name":"KAI","link":"https://kainote.top/","description":"love artist, love code.","avatar":"https://cdn.jsdelivr.net/gh/kaix2301/pictures/img202201072101018.jpg"}]}},"excerpt":"","more":"<h2 id=\"ç¨³å®šå¯é çš„é€šä¿¡æŠ€æœ¯\"><a href=\"#ç¨³å®šå¯é çš„é€šä¿¡æŠ€æœ¯\" class=\"headerlink\" title=\"ç¨³å®šå¯é çš„é€šä¿¡æŠ€æœ¯\"></a>ç¨³å®šå¯é çš„é€šä¿¡æŠ€æœ¯</h2><h3 id=\"æœ‰çº¿é€šä¿¡æŠ€æœ¯\"><a href=\"#æœ‰çº¿é€šä¿¡æŠ€æœ¯\" class=\"headerlink\" title=\"æœ‰çº¿é€šä¿¡æŠ€æœ¯\"></a>æœ‰çº¿é€šä¿¡æŠ€æœ¯</h3><p>ä¼˜ç‚¹ï¼šç¨³å®šæ€§é«˜ï¼Œå¯é æ€§å¼º</p>\n<p>ç¼ºç‚¹ï¼šå—é™äºä¼ è¾“åª’ä»‹</p>\n<p>ä»¥å¤ªç½‘:æœ€é€šç”¨çš„é€šä¿¡åè®®æ ‡å‡†ï¼Œæ ‡å‡†ä»¥å¤ªç½‘ï¼Œå¿«é€Ÿä»¥å¤ªç½‘ï¼Œ10Gä»¥å¤ªç½‘</p>\n<p>RSâ€”232ï¼šä¸ªäººè®¡ç®—æœºDB9 or DB25\tä¸å¹³è¡¡ä¼ è¾“æ–¹å¼ï¼Œå•è¾¹é€šä¿¡\tä¼ è¾“è·ç¦»ä¸è¶…è¿‡20m\t1V1</p>\n<p>RS-485ï¼šå¯ä»¥å®ç°è”ç½‘\tå¹³è¡¡ä¼ è¾“ï¼Œå·®åˆ†ä¼ è¾“æ–¹å¼\tå‡ ç™¾åˆ°ä¸Šåƒ\t1Vn</p>\n<p>M-Busï¼šæˆ·ç”¨ä»ªè¡¨æ€»çº¿ï¼Œè¿œç¨‹æŠ„è¡¨ï¼Œä½æˆæœ¬ç»„ç½‘</p>\n<p>PLCï¼šç”µåŠ›çº¿é€šä¿¡ï¼Œè¡¨è¡¨-&gt;å·¥ä¸šç½‘å…³ </p>\n<h3 id=\"æ— çº¿é€šä¿¡æŠ€æœ¯\"><a href=\"#æ— çº¿é€šä¿¡æŠ€æœ¯\" class=\"headerlink\" title=\"æ— çº¿é€šä¿¡æŠ€æœ¯\"></a>æ— çº¿é€šä¿¡æŠ€æœ¯</h3><p>2G,3G,4Gï¼šèœ‚çªç§»åŠ¨é€šä¿¡</p>\n<p>Bluetooth:2.4-2.48GHæ³¢æ®µçš„æ— çº¿ç”µæ³¢ï¼Œé€Ÿç‡1Mbpsï¼Œ10cm-10mï¼Œé€Ÿç‡å¿«ã€ä½åŠŸè€—ã€å®‰å…¨æ€§é«˜ï¼ŒèŠ‚ç‚¹å°‘ä¸åˆ©äºå¤šç‚¹å¸ƒæ§</p>\n<p>Wi-Fiï¼šè¿æ¥åˆ°æ— çº¿å±€åŸŸç½‘ï¼Œé€Ÿåº¦å¿«</p>\n<p>ZigBeeï¼šä½åŠŸè€—å±€åŸŸç½‘åè®®\tç‰©ä½“é®æŒ¡è¡°å‡å‰å®³  </p>\n<p>Z-Waveï¼šç”¨äºä½å®…ã€‚30-100m\tç½‘ç»œç®€å•ï¼Œé€Ÿç‡è¾ƒä½</p>\n<h3 id=\"lpwaä½åŠŸè€—å¹¿åŸŸç½‘\"><a href=\"#lpwaä½åŠŸè€—å¹¿åŸŸç½‘\" class=\"headerlink\" title=\"lpwaä½åŠŸè€—å¹¿åŸŸç½‘\"></a>lpwaä½åŠŸè€—å¹¿åŸŸç½‘</h3><p>SigFoxï¼šä½åŠŸè€—ï¼ŒISMå°„é¢‘é¢‘æ®µ</p>\n<p>NB-lotï¼šçª„é¢‘ç½‘ç»œï¼Œå¯éƒ¨ç½²åœ¨èœ‚çªç½‘ç»œ </p>\n<p>LoRaï¼šå¼€æºMACå±‚åè®®</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20220923194944959.png\"\n                      alt=\"image-20220923194944959\"\n                ></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20220923195011645.png\"\n                      alt=\"image-20220923195011645\"\n                ></p>\n<h2 id=\"OceanConnect\"><a href=\"#OceanConnect\" class=\"headerlink\" title=\"OceanConnect\"></a>OceanConnect</h2><p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20220923195209078.png\"\n                      alt=\"image-20220923195209078\"\n                ></p>\n<p>ç»Ÿä¸€æ¥å£ï¼Œæ–¹ä¾¿æ‹“å±•</p>\n<h3 id=\"MQTTå’ŒHTTP\"><a href=\"#MQTTå’ŒHTTP\" class=\"headerlink\" title=\"MQTTå’ŒHTTP\"></a>MQTTå’ŒHTTP</h3><p>æ¶ˆæ¯é˜Ÿåˆ—é¥æµ‹ä¼ è¾“ï¼šMessage Queuing Telemetry Transport</p>\n<p>IBMå¼€å‘çš„åŸºäºTCP&#x2F;IPçš„å³æ—¶é€šè®¯åè®®</p>\n<p>é‡‡ç”¨è®¢é˜…å‘å¸ƒçš„æ¨¡å¼ï¼Œé•¿è¿æ¥æ–¹å¼</p>\n<p>ä¼˜ç‚¹ï¼šåè®®ç®€å•ï¼Œè½»é‡çº§ï¼Œæ¶ˆæ¯å¯ä»¥çŸ­è‡³ä¸¤å­—èŠ‚ï¼Œå¯¹ç»ˆç«¯çš„ç¡¬ä»¶é…ç½®è¦æ±‚ä½</p>\n<p>æ™ºæ…§å®¶åº­</p>\n<p>CoAPï¼šConstrained Application Protocol</p>\n<p>ä¸“ç”¨äºèµ„æºå—é™è®¾å¤‡çš„é€šä¿¡ï¼ŒNB-lot&#x2F;LoRa</p>\n<p>ä»httpå‘å±•è€Œæ¥ï¼Œé‡‡ç”¨è¯·æ±‚å“åº”</p>\n<p>æœ€å°4å­—èŠ‚</p>\n<h3 id=\"å¯¹æ¯”\"><a href=\"#å¯¹æ¯”\" class=\"headerlink\" title=\"å¯¹æ¯”\"></a>å¯¹æ¯”</h3><p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20220923195746901.png\"\n                      alt=\"image-20220923195746901\"\n                ></p>\n<p>ç‰©è”ç½‘å¹³å°å±‚æ¬¡</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20220923195812117.png\"\n                      alt=\"image-20220923195812117\"\n                ></p>\n<p>æ¥å…¥æ— å…³ï¼Œå¯é æ€§ï¼Œå®‰å…¨æ€§ï¼Œå¼¹æ€§ä¼¸ç¼©ï¼Œèƒ½åŠ›å¼€æ”¾</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20220923200007426.png\"\n                      alt=\"image-20220923200007426\"\n                ></p>\n<p>è®¾å¤‡ç®¡ç†ï¼šç½‘å…³ç®¡ç†ï¼ŒRESTå’ŒHTTPSä¸‹å‘å„ç±»é…ç½®ç®¡ç†å‘½ä»¤ï¼ŒDM Serveré€šè¿‡Coap&#x2F;HTTPSå°†å‘½ä»¤ä¼ ç»™ç½‘å…³æˆ–è€…å…¶ä»–ç›´è¿è®¾å¤‡ï¼Œå®Œæˆè®¾å¤‡çš„é…ç½®ç®¡ç†</p>\n<p>é‰´æƒï¼šåˆ›å»ºä¼ æ„Ÿå™¨é‰´æƒï¼Œè®¾å¤‡æ¥å…¥é‰´æƒï¼Œä¸ŠæŠ¥æ•°æ®é‰´æƒ</p>\n<p>è§„åˆ™å¼•æ“ï¼šè§„åˆ™ç»‘å®šï¼Œæ»¡è¶³æ¡ä»¶ï¼Œè‡ªåŠ¨æ‰§è¡ŒåŠ¨ä½œ</p>\n<p>Portalï¼šSPï¼ŒOSSï¼ŒOperation</p>\n<h3 id=\"å¹³å°æ¶æ„\"><a href=\"#å¹³å°æ¶æ„\" class=\"headerlink\" title=\"å¹³å°æ¶æ„\"></a>å¹³å°æ¶æ„</h3><p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20220923201228365.png\"\n                      alt=\"image-20220923201228365\"\n                ></p>\n<p>IoCMï¼šiotè”æ¥ç®¡ç†æ¨¡å—ï¼Œæ˜¯å¹³å°æœ€é‡è¦çš„æ¨¡å—ï¼Œæ”¯æŒè”æ¥çŠ¶æ€ç®¡ç†å’Œæ§åˆ¶å‘½ä»¤è½¬å‘</p>\n<p>DM Serverï¼šè®¾å¤‡ç®¡ç†æœåŠ¡å™¨ï¼Œç‰©è”ç½‘ç®¡ç†å’Œå‡çº§</p>\n<p>Rule Engineï¼šè§„åˆ™å¼•æ“ï¼Œç”¨æˆ·è®¾å®šè§„åˆ™æ»¡è¶³ä¸šåŠ¡éœ€æ±‚</p>\n<p>MongoDBï¼šç”¨æˆ·ä¿¡æ¯æ•°æ®åº“</p>\n<p>CIGï¼šäº‘ç½‘å…³</p>\n<p>å—å‘çš„ç»ˆç«¯è®¾å¤‡å¯ä»¥é€šè¿‡CIGçš„åè®®é€‚é…è¿æ¥å¹³å°</p>\n<p>å¹³å°é€šè¿‡API Serveræ¥å…¥åŒ—å‘çš„iotåº”ç”¨æœåŠ¡å™¨</p>\n<p>ä¸šåŠ¡æµç¨‹ï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20220923201805426.png\"\n                      alt=\"image-20220923201805426\"\n                ></p>\n<h3 id=\"NB-iot\"><a href=\"#NB-iot\" class=\"headerlink\" title=\"NB-iot\"></a>NB-iot</h3><p>æ˜¯ä¸€é¡¹åŸºäºçª„å¸¦çš„é€šä¿¡æŠ€æœ¯</p>\n<p>HSSå½’å±ç”¨æˆ·æœåŠ¡å™¨ï¼šå­˜å‚¨ç”¨æˆ·ä¿¡æ¯çš„æ ¸å¿ƒæ•°æ®åº“ï¼Œä¸»è¦ç”¨æ¥ä¿å­˜ç”¨æˆ·ç­¾çº¦ä¿¡æ¯</p>\n<p>EPCæ ¸å¿ƒç½‘ï¼šHSSå½’å±ç”¨æˆ·æœåŠ¡å™¨ï¼ŒMMEä¿¡ä»¤å¤„ç†éƒ¨åˆ†ï¼ŒPGWï¼šPDNç½‘å…³ï¼ŒSGWæœåŠ¡ç½‘å…³</p>\n<p>åº”ç”¨å±‚ï¼šwebç•Œé¢</p>\n"},{"title":"Gitä½¿ç”¨","date":"2022-09-14T13:55:14.000Z","_content":"# Gitä½¿ç”¨\n**Git Bash**ï¼šUnixä¸Linuxé£æ ¼çš„å‘½ä»¤è¡Œï¼Œä½¿ç”¨æœ€å¤šï¼Œæ¨èæœ€å¤š\n**Git CMD**ï¼šWindowsé£æ ¼çš„å‘½ä»¤è¡Œ\n**Git GUI**ï¼šå›¾å½¢ç•Œé¢çš„Gitï¼Œä¸å»ºè®®åˆå­¦è€…ä½¿ç”¨ï¼Œå°½é‡å…ˆç†Ÿæ‚‰å¸¸ç”¨å‘½ä»¤\næ‰€æœ‰çš„é…ç½®æ–‡ä»¶ï¼Œå…¶å®éƒ½ä¿å­˜åœ¨æœ¬åœ°ï¼\næŸ¥çœ‹é…ç½® git config -l\n\n```\n#æŸ¥çœ‹ç³»ç»Ÿconfig\ngit config --system --list\nã€€ã€€\n#æŸ¥çœ‹å½“å‰ç”¨æˆ·ï¼ˆglobalï¼‰é…ç½®\ngit config --global  --lis\n```\n \n## ä¸‰ä¸ªåŒºåŸŸ\nGitæœ¬åœ°æœ‰ä¸‰ä¸ªå·¥ä½œåŒºåŸŸï¼šå·¥ä½œç›®å½•ï¼ˆWorking Directoryï¼‰ã€æš‚å­˜åŒº(Stage/Index)ã€èµ„æºåº“(Repositoryæˆ–Git Directory)ã€‚å¦‚æœåœ¨åŠ ä¸Šè¿œç¨‹çš„gitä»“åº“(Remote Directory)å°±å¯ä»¥åˆ†ä¸ºå››ä¸ªå·¥ä½œåŒºåŸŸã€‚æ–‡ä»¶åœ¨è¿™å››ä¸ªåŒºåŸŸä¹‹é—´çš„è½¬æ¢å…³ç³»å¦‚ä¸‹ï¼š\n![å›¾ç‰‡](https://gwzone.oss-cn-beijing.aliyuncs.com/markdown/git/001.png)\n**Workspace**ï¼šå·¥ä½œåŒºï¼Œå°±æ˜¯ä½ å¹³æ—¶å­˜æ”¾é¡¹ç›®ä»£ç çš„åœ°æ–¹\n\n**Index / Stage**ï¼šæš‚å­˜åŒºï¼Œç”¨äºä¸´æ—¶å­˜æ”¾ä½ çš„æ”¹åŠ¨ï¼Œäº‹å®ä¸Šå®ƒåªæ˜¯ä¸€ä¸ªæ–‡ä»¶ï¼Œä¿å­˜å³å°†æäº¤åˆ°æ–‡ä»¶åˆ—è¡¨ä¿¡æ¯\n\n**Repository**ï¼šä»“åº“åŒºï¼ˆæˆ–æœ¬åœ°ä»“åº“ï¼‰ï¼Œå°±æ˜¯å®‰å…¨å­˜æ”¾æ•°æ®çš„ä½ç½®ï¼Œè¿™é‡Œé¢æœ‰ä½ æäº¤åˆ°æ‰€æœ‰ç‰ˆæœ¬çš„æ•°æ®ã€‚å…¶ä¸­HEADæŒ‡å‘æœ€æ–°æ”¾å…¥ä»“åº“çš„ç‰ˆæœ¬\n\n**Remote**ï¼šè¿œç¨‹ä»“åº“ï¼Œæ‰˜ç®¡ä»£ç çš„æœåŠ¡å™¨ï¼Œå¯ä»¥ç®€å•çš„è®¤ä¸ºæ˜¯ä½ é¡¹ç›®ç»„ä¸­çš„ä¸€å°ç”µè„‘ç”¨äºè¿œç¨‹æ•°æ®äº¤æ¢","source":"_posts/2022/09/Gitä½¿ç”¨.md","raw":"---\ntitle: Gitä½¿ç”¨\ndate: 2022-09-14 21:55:14\ntags: [Github]\ncategories: [å¸¸ç”¨å·¥å…·]\n---\n# Gitä½¿ç”¨\n**Git Bash**ï¼šUnixä¸Linuxé£æ ¼çš„å‘½ä»¤è¡Œï¼Œä½¿ç”¨æœ€å¤šï¼Œæ¨èæœ€å¤š\n**Git CMD**ï¼šWindowsé£æ ¼çš„å‘½ä»¤è¡Œ\n**Git GUI**ï¼šå›¾å½¢ç•Œé¢çš„Gitï¼Œä¸å»ºè®®åˆå­¦è€…ä½¿ç”¨ï¼Œå°½é‡å…ˆç†Ÿæ‚‰å¸¸ç”¨å‘½ä»¤\næ‰€æœ‰çš„é…ç½®æ–‡ä»¶ï¼Œå…¶å®éƒ½ä¿å­˜åœ¨æœ¬åœ°ï¼\næŸ¥çœ‹é…ç½® git config -l\n\n```\n#æŸ¥çœ‹ç³»ç»Ÿconfig\ngit config --system --list\nã€€ã€€\n#æŸ¥çœ‹å½“å‰ç”¨æˆ·ï¼ˆglobalï¼‰é…ç½®\ngit config --global  --lis\n```\n \n## ä¸‰ä¸ªåŒºåŸŸ\nGitæœ¬åœ°æœ‰ä¸‰ä¸ªå·¥ä½œåŒºåŸŸï¼šå·¥ä½œç›®å½•ï¼ˆWorking Directoryï¼‰ã€æš‚å­˜åŒº(Stage/Index)ã€èµ„æºåº“(Repositoryæˆ–Git Directory)ã€‚å¦‚æœåœ¨åŠ ä¸Šè¿œç¨‹çš„gitä»“åº“(Remote Directory)å°±å¯ä»¥åˆ†ä¸ºå››ä¸ªå·¥ä½œåŒºåŸŸã€‚æ–‡ä»¶åœ¨è¿™å››ä¸ªåŒºåŸŸä¹‹é—´çš„è½¬æ¢å…³ç³»å¦‚ä¸‹ï¼š\n![å›¾ç‰‡](https://gwzone.oss-cn-beijing.aliyuncs.com/markdown/git/001.png)\n**Workspace**ï¼šå·¥ä½œåŒºï¼Œå°±æ˜¯ä½ å¹³æ—¶å­˜æ”¾é¡¹ç›®ä»£ç çš„åœ°æ–¹\n\n**Index / Stage**ï¼šæš‚å­˜åŒºï¼Œç”¨äºä¸´æ—¶å­˜æ”¾ä½ çš„æ”¹åŠ¨ï¼Œäº‹å®ä¸Šå®ƒåªæ˜¯ä¸€ä¸ªæ–‡ä»¶ï¼Œä¿å­˜å³å°†æäº¤åˆ°æ–‡ä»¶åˆ—è¡¨ä¿¡æ¯\n\n**Repository**ï¼šä»“åº“åŒºï¼ˆæˆ–æœ¬åœ°ä»“åº“ï¼‰ï¼Œå°±æ˜¯å®‰å…¨å­˜æ”¾æ•°æ®çš„ä½ç½®ï¼Œè¿™é‡Œé¢æœ‰ä½ æäº¤åˆ°æ‰€æœ‰ç‰ˆæœ¬çš„æ•°æ®ã€‚å…¶ä¸­HEADæŒ‡å‘æœ€æ–°æ”¾å…¥ä»“åº“çš„ç‰ˆæœ¬\n\n**Remote**ï¼šè¿œç¨‹ä»“åº“ï¼Œæ‰˜ç®¡ä»£ç çš„æœåŠ¡å™¨ï¼Œå¯ä»¥ç®€å•çš„è®¤ä¸ºæ˜¯ä½ é¡¹ç›®ç»„ä¸­çš„ä¸€å°ç”µè„‘ç”¨äºè¿œç¨‹æ•°æ®äº¤æ¢","slug":"Gitä½¿ç”¨","published":1,"updated":"2022-09-29T15:28:35.396Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clas9ersv000odk8f5cjtg9rm","content":"<h1 id=\"Gitä½¿ç”¨\"><a href=\"#Gitä½¿ç”¨\" class=\"headerlink\" title=\"Gitä½¿ç”¨\"></a>Gitä½¿ç”¨</h1><p><strong>Git Bash</strong>ï¼šUnixä¸Linuxé£æ ¼çš„å‘½ä»¤è¡Œï¼Œä½¿ç”¨æœ€å¤šï¼Œæ¨èæœ€å¤š<br><strong>Git CMD</strong>ï¼šWindowsé£æ ¼çš„å‘½ä»¤è¡Œ<br><strong>Git GUI</strong>ï¼šå›¾å½¢ç•Œé¢çš„Gitï¼Œä¸å»ºè®®åˆå­¦è€…ä½¿ç”¨ï¼Œå°½é‡å…ˆç†Ÿæ‚‰å¸¸ç”¨å‘½ä»¤<br>æ‰€æœ‰çš„é…ç½®æ–‡ä»¶ï¼Œå…¶å®éƒ½ä¿å­˜åœ¨æœ¬åœ°ï¼<br>æŸ¥çœ‹é…ç½® git config -l</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#æŸ¥çœ‹ç³»ç»Ÿconfig</span><br><span class=\"line\">git config --system --list</span><br><span class=\"line\">ã€€ã€€</span><br><span class=\"line\">#æŸ¥çœ‹å½“å‰ç”¨æˆ·ï¼ˆglobalï¼‰é…ç½®</span><br><span class=\"line\">git config --global  --lis</span><br></pre></td></tr></table></figure>\n<h2 id=\"ä¸‰ä¸ªåŒºåŸŸ\"><a href=\"#ä¸‰ä¸ªåŒºåŸŸ\" class=\"headerlink\" title=\"ä¸‰ä¸ªåŒºåŸŸ\"></a>ä¸‰ä¸ªåŒºåŸŸ</h2><p>Gitæœ¬åœ°æœ‰ä¸‰ä¸ªå·¥ä½œåŒºåŸŸï¼šå·¥ä½œç›®å½•ï¼ˆWorking Directoryï¼‰ã€æš‚å­˜åŒº(Stage&#x2F;Index)ã€èµ„æºåº“(Repositoryæˆ–Git Directory)ã€‚å¦‚æœåœ¨åŠ ä¸Šè¿œç¨‹çš„gitä»“åº“(Remote Directory)å°±å¯ä»¥åˆ†ä¸ºå››ä¸ªå·¥ä½œåŒºåŸŸã€‚æ–‡ä»¶åœ¨è¿™å››ä¸ªåŒºåŸŸä¹‹é—´çš„è½¬æ¢å…³ç³»å¦‚ä¸‹ï¼š<br><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/markdown/git/001.png\"\n                      alt=\"å›¾ç‰‡\"\n                ><br><strong>Workspace</strong>ï¼šå·¥ä½œåŒºï¼Œå°±æ˜¯ä½ å¹³æ—¶å­˜æ”¾é¡¹ç›®ä»£ç çš„åœ°æ–¹</p>\n<p><strong>Index &#x2F; Stage</strong>ï¼šæš‚å­˜åŒºï¼Œç”¨äºä¸´æ—¶å­˜æ”¾ä½ çš„æ”¹åŠ¨ï¼Œäº‹å®ä¸Šå®ƒåªæ˜¯ä¸€ä¸ªæ–‡ä»¶ï¼Œä¿å­˜å³å°†æäº¤åˆ°æ–‡ä»¶åˆ—è¡¨ä¿¡æ¯</p>\n<p><strong>Repository</strong>ï¼šä»“åº“åŒºï¼ˆæˆ–æœ¬åœ°ä»“åº“ï¼‰ï¼Œå°±æ˜¯å®‰å…¨å­˜æ”¾æ•°æ®çš„ä½ç½®ï¼Œè¿™é‡Œé¢æœ‰ä½ æäº¤åˆ°æ‰€æœ‰ç‰ˆæœ¬çš„æ•°æ®ã€‚å…¶ä¸­HEADæŒ‡å‘æœ€æ–°æ”¾å…¥ä»“åº“çš„ç‰ˆæœ¬</p>\n<p><strong>Remote</strong>ï¼šè¿œç¨‹ä»“åº“ï¼Œæ‰˜ç®¡ä»£ç çš„æœåŠ¡å™¨ï¼Œå¯ä»¥ç®€å•çš„è®¤ä¸ºæ˜¯ä½ é¡¹ç›®ç»„ä¸­çš„ä¸€å°ç”µè„‘ç”¨äºè¿œç¨‹æ•°æ®äº¤æ¢</p>\n","site":{"data":{"links":[{"name":"CZMæœ‰ç‚¹å†·","link":"https://czm.cool/","description":"CZMçš„åšå®¢","avatar":"https://img.czm.cool/avatar/avatar.png"},{"name":"PSH","link":"https://shamd.cloud/","description":"PSHçš„åšå®¢.","avatar":"https://shamd.cloud/upload/2022/07/afbb577733f46c9535dd1d6d6388278.jpg"},{"name":"KAI","link":"https://kainote.top/","description":"love artist, love code.","avatar":"https://cdn.jsdelivr.net/gh/kaix2301/pictures/img202201072101018.jpg"}]}},"excerpt":"","more":"<h1 id=\"Gitä½¿ç”¨\"><a href=\"#Gitä½¿ç”¨\" class=\"headerlink\" title=\"Gitä½¿ç”¨\"></a>Gitä½¿ç”¨</h1><p><strong>Git Bash</strong>ï¼šUnixä¸Linuxé£æ ¼çš„å‘½ä»¤è¡Œï¼Œä½¿ç”¨æœ€å¤šï¼Œæ¨èæœ€å¤š<br><strong>Git CMD</strong>ï¼šWindowsé£æ ¼çš„å‘½ä»¤è¡Œ<br><strong>Git GUI</strong>ï¼šå›¾å½¢ç•Œé¢çš„Gitï¼Œä¸å»ºè®®åˆå­¦è€…ä½¿ç”¨ï¼Œå°½é‡å…ˆç†Ÿæ‚‰å¸¸ç”¨å‘½ä»¤<br>æ‰€æœ‰çš„é…ç½®æ–‡ä»¶ï¼Œå…¶å®éƒ½ä¿å­˜åœ¨æœ¬åœ°ï¼<br>æŸ¥çœ‹é…ç½® git config -l</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#æŸ¥çœ‹ç³»ç»Ÿconfig</span><br><span class=\"line\">git config --system --list</span><br><span class=\"line\">ã€€ã€€</span><br><span class=\"line\">#æŸ¥çœ‹å½“å‰ç”¨æˆ·ï¼ˆglobalï¼‰é…ç½®</span><br><span class=\"line\">git config --global  --lis</span><br></pre></td></tr></table></figure>\n<h2 id=\"ä¸‰ä¸ªåŒºåŸŸ\"><a href=\"#ä¸‰ä¸ªåŒºåŸŸ\" class=\"headerlink\" title=\"ä¸‰ä¸ªåŒºåŸŸ\"></a>ä¸‰ä¸ªåŒºåŸŸ</h2><p>Gitæœ¬åœ°æœ‰ä¸‰ä¸ªå·¥ä½œåŒºåŸŸï¼šå·¥ä½œç›®å½•ï¼ˆWorking Directoryï¼‰ã€æš‚å­˜åŒº(Stage&#x2F;Index)ã€èµ„æºåº“(Repositoryæˆ–Git Directory)ã€‚å¦‚æœåœ¨åŠ ä¸Šè¿œç¨‹çš„gitä»“åº“(Remote Directory)å°±å¯ä»¥åˆ†ä¸ºå››ä¸ªå·¥ä½œåŒºåŸŸã€‚æ–‡ä»¶åœ¨è¿™å››ä¸ªåŒºåŸŸä¹‹é—´çš„è½¬æ¢å…³ç³»å¦‚ä¸‹ï¼š<br><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/markdown/git/001.png\"\n                      alt=\"å›¾ç‰‡\"\n                ><br><strong>Workspace</strong>ï¼šå·¥ä½œåŒºï¼Œå°±æ˜¯ä½ å¹³æ—¶å­˜æ”¾é¡¹ç›®ä»£ç çš„åœ°æ–¹</p>\n<p><strong>Index &#x2F; Stage</strong>ï¼šæš‚å­˜åŒºï¼Œç”¨äºä¸´æ—¶å­˜æ”¾ä½ çš„æ”¹åŠ¨ï¼Œäº‹å®ä¸Šå®ƒåªæ˜¯ä¸€ä¸ªæ–‡ä»¶ï¼Œä¿å­˜å³å°†æäº¤åˆ°æ–‡ä»¶åˆ—è¡¨ä¿¡æ¯</p>\n<p><strong>Repository</strong>ï¼šä»“åº“åŒºï¼ˆæˆ–æœ¬åœ°ä»“åº“ï¼‰ï¼Œå°±æ˜¯å®‰å…¨å­˜æ”¾æ•°æ®çš„ä½ç½®ï¼Œè¿™é‡Œé¢æœ‰ä½ æäº¤åˆ°æ‰€æœ‰ç‰ˆæœ¬çš„æ•°æ®ã€‚å…¶ä¸­HEADæŒ‡å‘æœ€æ–°æ”¾å…¥ä»“åº“çš„ç‰ˆæœ¬</p>\n<p><strong>Remote</strong>ï¼šè¿œç¨‹ä»“åº“ï¼Œæ‰˜ç®¡ä»£ç çš„æœåŠ¡å™¨ï¼Œå¯ä»¥ç®€å•çš„è®¤ä¸ºæ˜¯ä½ é¡¹ç›®ç»„ä¸­çš„ä¸€å°ç”µè„‘ç”¨äºè¿œç¨‹æ•°æ®äº¤æ¢</p>\n"},{"title":"Lambdaè¡¨è¾¾å¼","date":"2022-09-28T13:07:45.000Z","_content":"# Lambdaè¡¨è¾¾å¼\n\nğŸ’›[åŸæ–‡åœ°å€](https://www.cnblogs.com/haixiang/p/11029639.html)ï¼Œè½¬è½½è¯·æ³¨æ˜å‡ºå¤„!\n\n### Lambdaç®€ä»‹\n\nLambdaè¡¨è¾¾å¼æ—¶JDK8çš„ä¸€ä¸ªæ–°ç‰¹æ€§ï¼Œå¯ä»¥å–ä»£å¤§éƒ¨åˆ†çš„åŒ¿åå†…éƒ¨ç±»ï¼Œå†™å‡ºæ›´ä¼˜é›…çš„Javaä»£ç ï¼Œå°¤å…¶åœ¨é›†åˆçš„éå†å’Œå…¶ä»–é›†åˆæ“ä½œä¸­ï¼Œå¯ä»¥æå¤§åœ°ä¼˜åŒ–ä»£ç ç»“æ„ã€‚\n\nJDKä¹Ÿæä¾›äº†å¤§é‡çš„å†…ç½®å‡½æ•°å¼æ¥å£ä¾›æˆ‘ä»¬ä½¿ç”¨ï¼Œä½¿å¾—Lambdaè¡¨è¾¾å¼çš„è¿ç”¨æ›´åŠ æ–¹ä¾¿ã€é«˜æ•ˆã€‚\n\n### å¯¹æ¥å£çš„è¦æ±‚\n\nè™½ç„¶ä½¿ç”¨ Lambda è¡¨è¾¾å¼å¯ä»¥å¯¹æŸäº›æ¥å£è¿›è¡Œç®€å•çš„å®ç°ï¼Œä½†å¹¶ä¸æ˜¯æ‰€æœ‰çš„æ¥å£éƒ½å¯ä»¥ä½¿ç”¨ Lambda è¡¨è¾¾å¼æ¥å®ç°ã€‚**Lambda è§„å®šæ¥å£ä¸­åªèƒ½æœ‰ä¸€ä¸ªéœ€è¦è¢«å®ç°çš„æ–¹æ³•ï¼Œä¸æ˜¯è§„å®šæ¥å£ä¸­åªèƒ½æœ‰ä¸€ä¸ªæ–¹æ³•**\n\njdk 8 ä¸­æœ‰å¦ä¸€ä¸ªæ–°ç‰¹æ€§ï¼šdefaultï¼Œ è¢« default ä¿®é¥°çš„æ–¹æ³•ä¼šæœ‰é»˜è®¤å®ç°ï¼Œä¸æ˜¯å¿…é¡»è¢«å®ç°çš„æ–¹æ³•ï¼Œæ‰€ä»¥ä¸å½±å“ Lambda è¡¨è¾¾å¼çš„ä½¿ç”¨ã€‚\n\n### @FunctionalInterface\n\nä¿®é¥°å‡½æ•°å¼æ¥å£çš„ï¼Œè¦æ±‚æ¥å£ä¸­çš„æŠ½è±¡æ–¹æ³•åªæœ‰ä¸€ä¸ªã€‚ è¿™ä¸ªæ³¨è§£å¾€å¾€ä¼šå’Œ lambda è¡¨è¾¾å¼ä¸€èµ·å‡ºç°ã€‚\n\n### Lambda åŸºç¡€è¯­æ³•\n\næˆ‘ä»¬è¿™é‡Œç»™å‡ºå…­ä¸ªæ¥å£ï¼Œåæ–‡çš„å…¨éƒ¨æ“ä½œéƒ½åˆ©ç”¨è¿™å…­ä¸ªæ¥å£æ¥è¿›è¡Œé˜è¿°ã€‚\n\n```java\n/**å¤šå‚æ•°æ— è¿”å›*/\n@FunctionalInterface\npublic interface NoReturnMultiParam {\n    void method(int a, int b);\n}\n\n/**æ— å‚æ— è¿”å›å€¼*/\n@FunctionalInterface\npublic interface NoReturnNoParam {\n    void method();\n}\n\n/**ä¸€ä¸ªå‚æ•°æ— è¿”å›*/\n@FunctionalInterface\npublic interface NoReturnOneParam {\n    void method(int a);\n}\n\n/**å¤šä¸ªå‚æ•°æœ‰è¿”å›å€¼*/\n@FunctionalInterface\npublic interface ReturnMultiParam {\n    int method(int a, int b);\n}\n\n/*** æ— å‚æœ‰è¿”å›*/\n@FunctionalInterface\npublic interface ReturnNoParam {\n    int method();\n}\n\n/**ä¸€ä¸ªå‚æ•°æœ‰è¿”å›å€¼*/\n@FunctionalInterface\npublic interface ReturnOneParam {\n    int method(int a);\n}\n```\n\nè¯­æ³•å½¢å¼ä¸º () -> {}ï¼Œå…¶ä¸­ () ç”¨æ¥æè¿°å‚æ•°åˆ—è¡¨ï¼Œ{} ç”¨æ¥æè¿°æ–¹æ³•ä½“ï¼Œ-> ä¸º lambdaè¿ç®—ç¬¦ ï¼Œè¯»ä½œ(goes to)ã€‚\n\n```java\nimport lambda.interfaces.*;\n\npublic class Test1 {\n    public static void main(String[] args) {\n\n        //æ— å‚æ— è¿”å›\n        NoReturnNoParam noReturnNoParam = () -> {\n            System.out.println(\"NoReturnNoParam\");\n        };\n        noReturnNoParam.method();\n\n        //ä¸€ä¸ªå‚æ•°æ— è¿”å›\n        NoReturnOneParam noReturnOneParam = (int a) -> {\n            System.out.println(\"NoReturnOneParam param:\" + a);\n        };\n        noReturnOneParam.method(6);\n\n        //å¤šä¸ªå‚æ•°æ— è¿”å›\n        NoReturnMultiParam noReturnMultiParam = (int a, int b) -> {\n            System.out.println(\"NoReturnMultiParam param:\" + \"{\" + a +\",\" + + b +\"}\");\n        };\n        noReturnMultiParam.method(6, 8);\n\n        //æ— å‚æœ‰è¿”å›å€¼\n        ReturnNoParam returnNoParam = () -> {\n            System.out.print(\"ReturnNoParam\");\n            return 1;\n        };\n\n        int res = returnNoParam.method();\n        System.out.println(\"return:\" + res);\n\n        //ä¸€ä¸ªå‚æ•°æœ‰è¿”å›å€¼\n        ReturnOneParam returnOneParam = (int a) -> {\n            System.out.println(\"ReturnOneParam param:\" + a);\n            return 1;\n        };\n\n        int res2 = returnOneParam.method(6);\n        System.out.println(\"return:\" + res2);\n\n        //å¤šä¸ªå‚æ•°æœ‰è¿”å›å€¼\n        ReturnMultiParam returnMultiParam = (int a, int b) -> {\n            System.out.println(\"ReturnMultiParam param:\" + \"{\" + a + \",\" + b +\"}\");\n            return 1;\n        };\n\n        int res3 = returnMultiParam.method(6, 8);\n        System.out.println(\"return:\" + res3);\n    }\n}\n```\n\n### Lambda è¯­æ³•ç®€åŒ–\n\næˆ‘ä»¬å¯ä»¥é€šè¿‡è§‚å¯Ÿä»¥ä¸‹ä»£ç æ¥å®Œæˆä»£ç çš„è¿›ä¸€æ­¥ç®€åŒ–ï¼Œå†™å‡ºæ›´åŠ ä¼˜é›…çš„ä»£ç ã€‚\n\n```java\nimport lambda.interfaces.*;\n\npublic class Test2 {\n    public static void main(String[] args) {\n\n        //1.ç®€åŒ–å‚æ•°ç±»å‹ï¼Œå¯ä»¥ä¸å†™å‚æ•°ç±»å‹ï¼Œä½†æ˜¯å¿…é¡»æ‰€æœ‰å‚æ•°éƒ½ä¸å†™\n        NoReturnMultiParam lamdba1 = (a, b) -> {\n            System.out.println(\"ç®€åŒ–å‚æ•°ç±»å‹\");\n        };\n        lamdba1.method(1, 2);\n\n        //2.ç®€åŒ–å‚æ•°å°æ‹¬å·ï¼Œå¦‚æœåªæœ‰ä¸€ä¸ªå‚æ•°åˆ™å¯ä»¥çœç•¥å‚æ•°å°æ‹¬å·\n        NoReturnOneParam lambda2 = a -> {\n            System.out.println(\"ç®€åŒ–å‚æ•°å°æ‹¬å·\");\n        };\n        lambda2.method(1);\n\n        //3.ç®€åŒ–æ–¹æ³•ä½“å¤§æ‹¬å·ï¼Œå¦‚æœæ–¹æ³•æ¡åªæœ‰ä¸€æ¡è¯­å¥ï¼Œåˆ™å¯ä»¥çœç•¥æ–¹æ³•ä½“å¤§æ‹¬å·\n        NoReturnNoParam lambda3 = () -> System.out.println(\"ç®€åŒ–æ–¹æ³•ä½“å¤§æ‹¬å·\");\n        lambda3.method();\n\n        //4.å¦‚æœæ–¹æ³•ä½“åªæœ‰ä¸€æ¡è¯­å¥ï¼Œå¹¶ä¸”æ˜¯ return è¯­å¥ï¼Œåˆ™å¯ä»¥çœç•¥æ–¹æ³•ä½“å¤§æ‹¬å·\n        ReturnOneParam lambda4 = a -> a+3;\n        System.out.println(lambda4.method(5));\n\n        ReturnMultiParam lambda5 = (a, b) -> a+b;\n        System.out.println(lambda5.method(1, 1));\n    }\n}\n```\n\n### Lambda è¡¨è¾¾å¼å¸¸ç”¨ç¤ºä¾‹\n\n**lambda è¡¨è¾¾å¼å¼•ç”¨æ–¹æ³•**\n\næœ‰æ—¶å€™æˆ‘ä»¬ä¸æ˜¯å¿…é¡»è¦è‡ªå·±é‡å†™æŸä¸ªåŒ¿åå†…éƒ¨ç±»çš„æ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥å¯ä»¥åˆ©ç”¨ lambdaè¡¨è¾¾å¼çš„æ¥å£å¿«é€ŸæŒ‡å‘ä¸€ä¸ªå·²ç»è¢«å®ç°çš„æ–¹æ³•ã€‚\n\n**è¯­æ³•**\n\n æ–¹æ³•å½’å±è€…::æ–¹æ³•å é™æ€æ–¹æ³•çš„å½’å±è€…ä¸ºç±»åï¼Œæ™®é€šæ–¹æ³•å½’å±è€…ä¸ºå¯¹è±¡\n\n```java\npublic class Exe1 {\n    public static void main(String[] args) {\n        ReturnOneParam lambda1 = a -> doubleNum(a);\n        System.out.println(lambda1.method(3));\n\n        //lambda2 å¼•ç”¨äº†å·²ç»å®ç°çš„ doubleNum æ–¹æ³•\n        ReturnOneParam lambda2 = Exe1::doubleNum;\n        System.out.println(lambda2.method(3));\n\n        Exe1 exe = new Exe1();\n\n        //lambda4 å¼•ç”¨äº†å·²ç»å®ç°çš„ addTwo æ–¹æ³•\n        ReturnOneParam lambda4 = exe::addTwo;\n        System.out.println(lambda4.method(2));\n    }\n\n    /**\n     * è¦æ±‚\n     * 1.å‚æ•°æ•°é‡å’Œç±»å‹è¦ä¸æ¥å£ä¸­å®šä¹‰çš„ä¸€è‡´\n     * 2.è¿”å›å€¼ç±»å‹è¦ä¸æ¥å£ä¸­å®šä¹‰çš„ä¸€è‡´\n     */\n    public static int doubleNum(int a) {\n        return a * 2;\n    }\n\n    public int addTwo(int a) {\n        return a + 2;\n    }\n}\n```\n\n**æ„é€ æ–¹æ³•çš„å¼•ç”¨**\n\nä¸€èˆ¬æˆ‘ä»¬éœ€è¦å£°æ˜æ¥å£ï¼Œè¯¥æ¥å£ä½œä¸ºå¯¹è±¡çš„ç”Ÿæˆå™¨ï¼Œé€šè¿‡ ç±»å::new çš„æ–¹å¼æ¥å®ä¾‹åŒ–å¯¹è±¡ï¼Œç„¶åè°ƒç”¨æ–¹æ³•è¿”å›å¯¹è±¡ã€‚\n\n```java\ninterface ItemCreatorBlankConstruct {\n    Item getItem();\n}\ninterface ItemCreatorParamContruct {\n    Item getItem(int id, String name, double price);\n}\n\npublic class Exe2 {\n    public static void main(String[] args) {\n        ItemCreatorBlankConstruct creator = () -> new Item();\n        Item item = creator.getItem();\n\n        ItemCreatorBlankConstruct creator2 = Item::new;\n        Item item2 = creator2.getItem();\n\n        ItemCreatorParamContruct creator3 = Item::new;\n        Item item3 = creator3.getItem(112, \"é¼ æ ‡\", 135.99);\n    }\n}\n```\n\n**lambda è¡¨è¾¾å¼åˆ›å»ºçº¿ç¨‹**\n\næˆ‘ä»¬ä»¥å¾€éƒ½æ˜¯é€šè¿‡åˆ›å»º Thread å¯¹è±¡ï¼Œç„¶åé€šè¿‡åŒ¿åå†…éƒ¨ç±»é‡å†™ run() æ–¹æ³•ï¼Œä¸€æåˆ°åŒ¿åå†…éƒ¨ç±»æˆ‘ä»¬å°±åº”è¯¥æƒ³åˆ°å¯ä»¥ä½¿ç”¨ lambda è¡¨è¾¾å¼æ¥ç®€åŒ–çº¿ç¨‹çš„åˆ›å»ºè¿‡ç¨‹ã€‚\n\n```java\n  Thread t = new Thread(() -> {\n      for (int i = 0; i < 10; i++) {\n        System.out.println(2 + \":\" + i);\n      }\n    });\n  \tt.start();\n```\n\n**éå†é›†åˆ**\n\næˆ‘ä»¬å¯ä»¥è°ƒç”¨é›†åˆçš„ `public void forEach(Consumer<? super E> action)` æ–¹æ³•ï¼Œé€šè¿‡ lambda è¡¨è¾¾å¼çš„æ–¹å¼éå†é›†åˆä¸­çš„å…ƒç´ ã€‚ä»¥ä¸‹æ˜¯ Consumer æ¥å£çš„æ–¹æ³•ä»¥åŠéå†é›†åˆçš„æ“ä½œã€‚Consumer æ¥å£æ˜¯ jdk ä¸ºæˆ‘ä»¬æä¾›çš„ä¸€ä¸ªå‡½æ•°å¼æ¥å£ã€‚\n\n```java\n \t@FunctionalInterface\n    public interface Consumer<T> {\n        void accept(T t);\n        //....\n    }\n```\n\n```java\n\tArrayList<Integer> list = new ArrayList<>();\n    Collections.addAll(list, 1,2,3,4,5);\n    //lambdaè¡¨è¾¾å¼ æ–¹æ³•å¼•ç”¨\n    list.forEach(System.out::println);\n\n    list.forEach(element -> {\n      if (element % 2 == 0) {\n        System.out.println(element);\n      }\n    });\n```\n\n**åˆ é™¤é›†åˆä¸­çš„æŸä¸ªå…ƒç´ **\n\næˆ‘ä»¬é€šè¿‡`public boolean removeIf(Predicate<? super E> filter)`æ–¹æ³•æ¥åˆ é™¤é›†åˆä¸­çš„æŸä¸ªå…ƒç´ ï¼ŒPredicate ä¹Ÿæ˜¯ jdk ä¸ºæˆ‘ä»¬æä¾›çš„ä¸€ä¸ªå‡½æ•°å¼æ¥å£ï¼Œå¯ä»¥ç®€åŒ–ç¨‹åºçš„ç¼–å†™ã€‚\n\n```java\n\tArrayList<Item> items = new ArrayList<>();\n    items.add(new Item(11, \"å°ç‰™åˆ·\", 12.05 ));\n    items.add(new Item(5, \"æ—¥æœ¬é©¬æ¡¶ç›–\", 999.05 ));\n    items.add(new Item(7, \"æ ¼åŠ›ç©ºè°ƒ\", 888.88 ));\n    items.add(new Item(17, \"è‚¥çš‚\", 2.00 ));\n    items.add(new Item(9, \"å†°ç®±\", 4200.00 ));\n\n    items.removeIf(ele -> ele.getId() == 7);\n\n    //é€šè¿‡ foreach éå†ï¼ŒæŸ¥çœ‹æ˜¯å¦å·²ç»åˆ é™¤\n    items.forEach(System.out::println);\n```\n\n**é›†åˆå†…å…ƒç´ çš„æ’åº**\n\nåœ¨ä»¥å‰æˆ‘ä»¬è‹¥è¦ä¸ºé›†åˆå†…çš„å…ƒç´ æ’åºï¼Œå°±å¿…é¡»è°ƒç”¨ sort æ–¹æ³•ï¼Œä¼ å…¥æ¯”è¾ƒå™¨åŒ¿åå†…éƒ¨ç±»é‡å†™ compare æ–¹æ³•ï¼Œæˆ‘ä»¬ç°åœ¨å¯ä»¥ä½¿ç”¨ lambda è¡¨è¾¾å¼æ¥ç®€åŒ–ä»£ç ã€‚\n\n```java\n    ArrayList<Item> list = new ArrayList<>();\n    list.add(new Item(13, \"èƒŒå¿ƒ\", 7.80));\n    list.add(new Item(11, \"åŠè¢–\", 37.80));\n    list.add(new Item(14, \"é£è¡£\", 139.80));\n    list.add(new Item(12, \"ç§‹è£¤\", 55.33));\n\n    /*\n            list.sort(new Comparator<Item>() {\n                @Override\n                public int compare(Item o1, Item o2) {\n                    return o1.getId()  - o2.getId();\n                }\n            });\n            */\n\n    list.sort((o1, o2) -> o1.getId() - o2.getId());\n\n    System.out.println(list);\n```\n\n### Lambda è¡¨è¾¾å¼ä¸­çš„é—­åŒ…é—®é¢˜\n\nè¿™ä¸ªé—®é¢˜æˆ‘ä»¬åœ¨åŒ¿åå†…éƒ¨ç±»ä¸­ä¹Ÿä¼šå­˜åœ¨ï¼Œå¦‚æœæˆ‘ä»¬æŠŠæ³¨é‡Šæ”¾å¼€ä¼šæŠ¥é”™ï¼Œå‘Šè¯‰æˆ‘ num å€¼æ˜¯ final ä¸èƒ½è¢«æ”¹å˜ã€‚è¿™é‡Œæˆ‘ä»¬è™½ç„¶æ²¡æœ‰æ ‡è¯† num ç±»å‹ä¸º finalï¼Œä½†æ˜¯åœ¨ç¼–è¯‘æœŸé—´è™šæ‹Ÿæœºä¼šå¸®æˆ‘ä»¬åŠ ä¸Š final ä¿®é¥°å…³é”®å­—ã€‚\n\n```java\nimport java.util.function.Consumer;\npublic class Main {\n    public static void main(String[] args) {\n\n        int num = 10;\n\n        Consumer<String> consumer = ele -> {\n            System.out.println(num);\n        };\n\n        //num = num + 2;\n        consumer.accept(\"hello\");\n    }\n}\n```\n\n","source":"_posts/2022/09/Lambdaè¡¨è¾¾å¼.md","raw":"---\ntitle: Lambdaè¡¨è¾¾å¼\ndate: 2022-09-28 21:07:45\ntags: [Lambda]  \ncategories: [JAVA,åŸºç¡€çŸ¥è¯†]\n---\n# Lambdaè¡¨è¾¾å¼\n\nğŸ’›[åŸæ–‡åœ°å€](https://www.cnblogs.com/haixiang/p/11029639.html)ï¼Œè½¬è½½è¯·æ³¨æ˜å‡ºå¤„!\n\n### Lambdaç®€ä»‹\n\nLambdaè¡¨è¾¾å¼æ—¶JDK8çš„ä¸€ä¸ªæ–°ç‰¹æ€§ï¼Œå¯ä»¥å–ä»£å¤§éƒ¨åˆ†çš„åŒ¿åå†…éƒ¨ç±»ï¼Œå†™å‡ºæ›´ä¼˜é›…çš„Javaä»£ç ï¼Œå°¤å…¶åœ¨é›†åˆçš„éå†å’Œå…¶ä»–é›†åˆæ“ä½œä¸­ï¼Œå¯ä»¥æå¤§åœ°ä¼˜åŒ–ä»£ç ç»“æ„ã€‚\n\nJDKä¹Ÿæä¾›äº†å¤§é‡çš„å†…ç½®å‡½æ•°å¼æ¥å£ä¾›æˆ‘ä»¬ä½¿ç”¨ï¼Œä½¿å¾—Lambdaè¡¨è¾¾å¼çš„è¿ç”¨æ›´åŠ æ–¹ä¾¿ã€é«˜æ•ˆã€‚\n\n### å¯¹æ¥å£çš„è¦æ±‚\n\nè™½ç„¶ä½¿ç”¨ Lambda è¡¨è¾¾å¼å¯ä»¥å¯¹æŸäº›æ¥å£è¿›è¡Œç®€å•çš„å®ç°ï¼Œä½†å¹¶ä¸æ˜¯æ‰€æœ‰çš„æ¥å£éƒ½å¯ä»¥ä½¿ç”¨ Lambda è¡¨è¾¾å¼æ¥å®ç°ã€‚**Lambda è§„å®šæ¥å£ä¸­åªèƒ½æœ‰ä¸€ä¸ªéœ€è¦è¢«å®ç°çš„æ–¹æ³•ï¼Œä¸æ˜¯è§„å®šæ¥å£ä¸­åªèƒ½æœ‰ä¸€ä¸ªæ–¹æ³•**\n\njdk 8 ä¸­æœ‰å¦ä¸€ä¸ªæ–°ç‰¹æ€§ï¼šdefaultï¼Œ è¢« default ä¿®é¥°çš„æ–¹æ³•ä¼šæœ‰é»˜è®¤å®ç°ï¼Œä¸æ˜¯å¿…é¡»è¢«å®ç°çš„æ–¹æ³•ï¼Œæ‰€ä»¥ä¸å½±å“ Lambda è¡¨è¾¾å¼çš„ä½¿ç”¨ã€‚\n\n### @FunctionalInterface\n\nä¿®é¥°å‡½æ•°å¼æ¥å£çš„ï¼Œè¦æ±‚æ¥å£ä¸­çš„æŠ½è±¡æ–¹æ³•åªæœ‰ä¸€ä¸ªã€‚ è¿™ä¸ªæ³¨è§£å¾€å¾€ä¼šå’Œ lambda è¡¨è¾¾å¼ä¸€èµ·å‡ºç°ã€‚\n\n### Lambda åŸºç¡€è¯­æ³•\n\næˆ‘ä»¬è¿™é‡Œç»™å‡ºå…­ä¸ªæ¥å£ï¼Œåæ–‡çš„å…¨éƒ¨æ“ä½œéƒ½åˆ©ç”¨è¿™å…­ä¸ªæ¥å£æ¥è¿›è¡Œé˜è¿°ã€‚\n\n```java\n/**å¤šå‚æ•°æ— è¿”å›*/\n@FunctionalInterface\npublic interface NoReturnMultiParam {\n    void method(int a, int b);\n}\n\n/**æ— å‚æ— è¿”å›å€¼*/\n@FunctionalInterface\npublic interface NoReturnNoParam {\n    void method();\n}\n\n/**ä¸€ä¸ªå‚æ•°æ— è¿”å›*/\n@FunctionalInterface\npublic interface NoReturnOneParam {\n    void method(int a);\n}\n\n/**å¤šä¸ªå‚æ•°æœ‰è¿”å›å€¼*/\n@FunctionalInterface\npublic interface ReturnMultiParam {\n    int method(int a, int b);\n}\n\n/*** æ— å‚æœ‰è¿”å›*/\n@FunctionalInterface\npublic interface ReturnNoParam {\n    int method();\n}\n\n/**ä¸€ä¸ªå‚æ•°æœ‰è¿”å›å€¼*/\n@FunctionalInterface\npublic interface ReturnOneParam {\n    int method(int a);\n}\n```\n\nè¯­æ³•å½¢å¼ä¸º () -> {}ï¼Œå…¶ä¸­ () ç”¨æ¥æè¿°å‚æ•°åˆ—è¡¨ï¼Œ{} ç”¨æ¥æè¿°æ–¹æ³•ä½“ï¼Œ-> ä¸º lambdaè¿ç®—ç¬¦ ï¼Œè¯»ä½œ(goes to)ã€‚\n\n```java\nimport lambda.interfaces.*;\n\npublic class Test1 {\n    public static void main(String[] args) {\n\n        //æ— å‚æ— è¿”å›\n        NoReturnNoParam noReturnNoParam = () -> {\n            System.out.println(\"NoReturnNoParam\");\n        };\n        noReturnNoParam.method();\n\n        //ä¸€ä¸ªå‚æ•°æ— è¿”å›\n        NoReturnOneParam noReturnOneParam = (int a) -> {\n            System.out.println(\"NoReturnOneParam param:\" + a);\n        };\n        noReturnOneParam.method(6);\n\n        //å¤šä¸ªå‚æ•°æ— è¿”å›\n        NoReturnMultiParam noReturnMultiParam = (int a, int b) -> {\n            System.out.println(\"NoReturnMultiParam param:\" + \"{\" + a +\",\" + + b +\"}\");\n        };\n        noReturnMultiParam.method(6, 8);\n\n        //æ— å‚æœ‰è¿”å›å€¼\n        ReturnNoParam returnNoParam = () -> {\n            System.out.print(\"ReturnNoParam\");\n            return 1;\n        };\n\n        int res = returnNoParam.method();\n        System.out.println(\"return:\" + res);\n\n        //ä¸€ä¸ªå‚æ•°æœ‰è¿”å›å€¼\n        ReturnOneParam returnOneParam = (int a) -> {\n            System.out.println(\"ReturnOneParam param:\" + a);\n            return 1;\n        };\n\n        int res2 = returnOneParam.method(6);\n        System.out.println(\"return:\" + res2);\n\n        //å¤šä¸ªå‚æ•°æœ‰è¿”å›å€¼\n        ReturnMultiParam returnMultiParam = (int a, int b) -> {\n            System.out.println(\"ReturnMultiParam param:\" + \"{\" + a + \",\" + b +\"}\");\n            return 1;\n        };\n\n        int res3 = returnMultiParam.method(6, 8);\n        System.out.println(\"return:\" + res3);\n    }\n}\n```\n\n### Lambda è¯­æ³•ç®€åŒ–\n\næˆ‘ä»¬å¯ä»¥é€šè¿‡è§‚å¯Ÿä»¥ä¸‹ä»£ç æ¥å®Œæˆä»£ç çš„è¿›ä¸€æ­¥ç®€åŒ–ï¼Œå†™å‡ºæ›´åŠ ä¼˜é›…çš„ä»£ç ã€‚\n\n```java\nimport lambda.interfaces.*;\n\npublic class Test2 {\n    public static void main(String[] args) {\n\n        //1.ç®€åŒ–å‚æ•°ç±»å‹ï¼Œå¯ä»¥ä¸å†™å‚æ•°ç±»å‹ï¼Œä½†æ˜¯å¿…é¡»æ‰€æœ‰å‚æ•°éƒ½ä¸å†™\n        NoReturnMultiParam lamdba1 = (a, b) -> {\n            System.out.println(\"ç®€åŒ–å‚æ•°ç±»å‹\");\n        };\n        lamdba1.method(1, 2);\n\n        //2.ç®€åŒ–å‚æ•°å°æ‹¬å·ï¼Œå¦‚æœåªæœ‰ä¸€ä¸ªå‚æ•°åˆ™å¯ä»¥çœç•¥å‚æ•°å°æ‹¬å·\n        NoReturnOneParam lambda2 = a -> {\n            System.out.println(\"ç®€åŒ–å‚æ•°å°æ‹¬å·\");\n        };\n        lambda2.method(1);\n\n        //3.ç®€åŒ–æ–¹æ³•ä½“å¤§æ‹¬å·ï¼Œå¦‚æœæ–¹æ³•æ¡åªæœ‰ä¸€æ¡è¯­å¥ï¼Œåˆ™å¯ä»¥çœç•¥æ–¹æ³•ä½“å¤§æ‹¬å·\n        NoReturnNoParam lambda3 = () -> System.out.println(\"ç®€åŒ–æ–¹æ³•ä½“å¤§æ‹¬å·\");\n        lambda3.method();\n\n        //4.å¦‚æœæ–¹æ³•ä½“åªæœ‰ä¸€æ¡è¯­å¥ï¼Œå¹¶ä¸”æ˜¯ return è¯­å¥ï¼Œåˆ™å¯ä»¥çœç•¥æ–¹æ³•ä½“å¤§æ‹¬å·\n        ReturnOneParam lambda4 = a -> a+3;\n        System.out.println(lambda4.method(5));\n\n        ReturnMultiParam lambda5 = (a, b) -> a+b;\n        System.out.println(lambda5.method(1, 1));\n    }\n}\n```\n\n### Lambda è¡¨è¾¾å¼å¸¸ç”¨ç¤ºä¾‹\n\n**lambda è¡¨è¾¾å¼å¼•ç”¨æ–¹æ³•**\n\næœ‰æ—¶å€™æˆ‘ä»¬ä¸æ˜¯å¿…é¡»è¦è‡ªå·±é‡å†™æŸä¸ªåŒ¿åå†…éƒ¨ç±»çš„æ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥å¯ä»¥åˆ©ç”¨ lambdaè¡¨è¾¾å¼çš„æ¥å£å¿«é€ŸæŒ‡å‘ä¸€ä¸ªå·²ç»è¢«å®ç°çš„æ–¹æ³•ã€‚\n\n**è¯­æ³•**\n\n æ–¹æ³•å½’å±è€…::æ–¹æ³•å é™æ€æ–¹æ³•çš„å½’å±è€…ä¸ºç±»åï¼Œæ™®é€šæ–¹æ³•å½’å±è€…ä¸ºå¯¹è±¡\n\n```java\npublic class Exe1 {\n    public static void main(String[] args) {\n        ReturnOneParam lambda1 = a -> doubleNum(a);\n        System.out.println(lambda1.method(3));\n\n        //lambda2 å¼•ç”¨äº†å·²ç»å®ç°çš„ doubleNum æ–¹æ³•\n        ReturnOneParam lambda2 = Exe1::doubleNum;\n        System.out.println(lambda2.method(3));\n\n        Exe1 exe = new Exe1();\n\n        //lambda4 å¼•ç”¨äº†å·²ç»å®ç°çš„ addTwo æ–¹æ³•\n        ReturnOneParam lambda4 = exe::addTwo;\n        System.out.println(lambda4.method(2));\n    }\n\n    /**\n     * è¦æ±‚\n     * 1.å‚æ•°æ•°é‡å’Œç±»å‹è¦ä¸æ¥å£ä¸­å®šä¹‰çš„ä¸€è‡´\n     * 2.è¿”å›å€¼ç±»å‹è¦ä¸æ¥å£ä¸­å®šä¹‰çš„ä¸€è‡´\n     */\n    public static int doubleNum(int a) {\n        return a * 2;\n    }\n\n    public int addTwo(int a) {\n        return a + 2;\n    }\n}\n```\n\n**æ„é€ æ–¹æ³•çš„å¼•ç”¨**\n\nä¸€èˆ¬æˆ‘ä»¬éœ€è¦å£°æ˜æ¥å£ï¼Œè¯¥æ¥å£ä½œä¸ºå¯¹è±¡çš„ç”Ÿæˆå™¨ï¼Œé€šè¿‡ ç±»å::new çš„æ–¹å¼æ¥å®ä¾‹åŒ–å¯¹è±¡ï¼Œç„¶åè°ƒç”¨æ–¹æ³•è¿”å›å¯¹è±¡ã€‚\n\n```java\ninterface ItemCreatorBlankConstruct {\n    Item getItem();\n}\ninterface ItemCreatorParamContruct {\n    Item getItem(int id, String name, double price);\n}\n\npublic class Exe2 {\n    public static void main(String[] args) {\n        ItemCreatorBlankConstruct creator = () -> new Item();\n        Item item = creator.getItem();\n\n        ItemCreatorBlankConstruct creator2 = Item::new;\n        Item item2 = creator2.getItem();\n\n        ItemCreatorParamContruct creator3 = Item::new;\n        Item item3 = creator3.getItem(112, \"é¼ æ ‡\", 135.99);\n    }\n}\n```\n\n**lambda è¡¨è¾¾å¼åˆ›å»ºçº¿ç¨‹**\n\næˆ‘ä»¬ä»¥å¾€éƒ½æ˜¯é€šè¿‡åˆ›å»º Thread å¯¹è±¡ï¼Œç„¶åé€šè¿‡åŒ¿åå†…éƒ¨ç±»é‡å†™ run() æ–¹æ³•ï¼Œä¸€æåˆ°åŒ¿åå†…éƒ¨ç±»æˆ‘ä»¬å°±åº”è¯¥æƒ³åˆ°å¯ä»¥ä½¿ç”¨ lambda è¡¨è¾¾å¼æ¥ç®€åŒ–çº¿ç¨‹çš„åˆ›å»ºè¿‡ç¨‹ã€‚\n\n```java\n  Thread t = new Thread(() -> {\n      for (int i = 0; i < 10; i++) {\n        System.out.println(2 + \":\" + i);\n      }\n    });\n  \tt.start();\n```\n\n**éå†é›†åˆ**\n\næˆ‘ä»¬å¯ä»¥è°ƒç”¨é›†åˆçš„ `public void forEach(Consumer<? super E> action)` æ–¹æ³•ï¼Œé€šè¿‡ lambda è¡¨è¾¾å¼çš„æ–¹å¼éå†é›†åˆä¸­çš„å…ƒç´ ã€‚ä»¥ä¸‹æ˜¯ Consumer æ¥å£çš„æ–¹æ³•ä»¥åŠéå†é›†åˆçš„æ“ä½œã€‚Consumer æ¥å£æ˜¯ jdk ä¸ºæˆ‘ä»¬æä¾›çš„ä¸€ä¸ªå‡½æ•°å¼æ¥å£ã€‚\n\n```java\n \t@FunctionalInterface\n    public interface Consumer<T> {\n        void accept(T t);\n        //....\n    }\n```\n\n```java\n\tArrayList<Integer> list = new ArrayList<>();\n    Collections.addAll(list, 1,2,3,4,5);\n    //lambdaè¡¨è¾¾å¼ æ–¹æ³•å¼•ç”¨\n    list.forEach(System.out::println);\n\n    list.forEach(element -> {\n      if (element % 2 == 0) {\n        System.out.println(element);\n      }\n    });\n```\n\n**åˆ é™¤é›†åˆä¸­çš„æŸä¸ªå…ƒç´ **\n\næˆ‘ä»¬é€šè¿‡`public boolean removeIf(Predicate<? super E> filter)`æ–¹æ³•æ¥åˆ é™¤é›†åˆä¸­çš„æŸä¸ªå…ƒç´ ï¼ŒPredicate ä¹Ÿæ˜¯ jdk ä¸ºæˆ‘ä»¬æä¾›çš„ä¸€ä¸ªå‡½æ•°å¼æ¥å£ï¼Œå¯ä»¥ç®€åŒ–ç¨‹åºçš„ç¼–å†™ã€‚\n\n```java\n\tArrayList<Item> items = new ArrayList<>();\n    items.add(new Item(11, \"å°ç‰™åˆ·\", 12.05 ));\n    items.add(new Item(5, \"æ—¥æœ¬é©¬æ¡¶ç›–\", 999.05 ));\n    items.add(new Item(7, \"æ ¼åŠ›ç©ºè°ƒ\", 888.88 ));\n    items.add(new Item(17, \"è‚¥çš‚\", 2.00 ));\n    items.add(new Item(9, \"å†°ç®±\", 4200.00 ));\n\n    items.removeIf(ele -> ele.getId() == 7);\n\n    //é€šè¿‡ foreach éå†ï¼ŒæŸ¥çœ‹æ˜¯å¦å·²ç»åˆ é™¤\n    items.forEach(System.out::println);\n```\n\n**é›†åˆå†…å…ƒç´ çš„æ’åº**\n\nåœ¨ä»¥å‰æˆ‘ä»¬è‹¥è¦ä¸ºé›†åˆå†…çš„å…ƒç´ æ’åºï¼Œå°±å¿…é¡»è°ƒç”¨ sort æ–¹æ³•ï¼Œä¼ å…¥æ¯”è¾ƒå™¨åŒ¿åå†…éƒ¨ç±»é‡å†™ compare æ–¹æ³•ï¼Œæˆ‘ä»¬ç°åœ¨å¯ä»¥ä½¿ç”¨ lambda è¡¨è¾¾å¼æ¥ç®€åŒ–ä»£ç ã€‚\n\n```java\n    ArrayList<Item> list = new ArrayList<>();\n    list.add(new Item(13, \"èƒŒå¿ƒ\", 7.80));\n    list.add(new Item(11, \"åŠè¢–\", 37.80));\n    list.add(new Item(14, \"é£è¡£\", 139.80));\n    list.add(new Item(12, \"ç§‹è£¤\", 55.33));\n\n    /*\n            list.sort(new Comparator<Item>() {\n                @Override\n                public int compare(Item o1, Item o2) {\n                    return o1.getId()  - o2.getId();\n                }\n            });\n            */\n\n    list.sort((o1, o2) -> o1.getId() - o2.getId());\n\n    System.out.println(list);\n```\n\n### Lambda è¡¨è¾¾å¼ä¸­çš„é—­åŒ…é—®é¢˜\n\nè¿™ä¸ªé—®é¢˜æˆ‘ä»¬åœ¨åŒ¿åå†…éƒ¨ç±»ä¸­ä¹Ÿä¼šå­˜åœ¨ï¼Œå¦‚æœæˆ‘ä»¬æŠŠæ³¨é‡Šæ”¾å¼€ä¼šæŠ¥é”™ï¼Œå‘Šè¯‰æˆ‘ num å€¼æ˜¯ final ä¸èƒ½è¢«æ”¹å˜ã€‚è¿™é‡Œæˆ‘ä»¬è™½ç„¶æ²¡æœ‰æ ‡è¯† num ç±»å‹ä¸º finalï¼Œä½†æ˜¯åœ¨ç¼–è¯‘æœŸé—´è™šæ‹Ÿæœºä¼šå¸®æˆ‘ä»¬åŠ ä¸Š final ä¿®é¥°å…³é”®å­—ã€‚\n\n```java\nimport java.util.function.Consumer;\npublic class Main {\n    public static void main(String[] args) {\n\n        int num = 10;\n\n        Consumer<String> consumer = ele -> {\n            System.out.println(num);\n        };\n\n        //num = num + 2;\n        consumer.accept(\"hello\");\n    }\n}\n```\n\n","slug":"Lambdaè¡¨è¾¾å¼","published":1,"updated":"2022-09-29T15:28:35.397Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clas9ersx000sdk8f926cfes6","content":"<h1 id=\"Lambdaè¡¨è¾¾å¼\"><a href=\"#Lambdaè¡¨è¾¾å¼\" class=\"headerlink\" title=\"Lambdaè¡¨è¾¾å¼\"></a>Lambdaè¡¨è¾¾å¼</h1><p>ğŸ’›<a class=\"link\"   href=\"https://www.cnblogs.com/haixiang/p/11029639.html\" >åŸæ–‡åœ°å€<i class=\"fas fa-external-link-alt\"></i></a>ï¼Œè½¬è½½è¯·æ³¨æ˜å‡ºå¤„!</p>\n<h3 id=\"Lambdaç®€ä»‹\"><a href=\"#Lambdaç®€ä»‹\" class=\"headerlink\" title=\"Lambdaç®€ä»‹\"></a>Lambdaç®€ä»‹</h3><p>Lambdaè¡¨è¾¾å¼æ—¶JDK8çš„ä¸€ä¸ªæ–°ç‰¹æ€§ï¼Œå¯ä»¥å–ä»£å¤§éƒ¨åˆ†çš„åŒ¿åå†…éƒ¨ç±»ï¼Œå†™å‡ºæ›´ä¼˜é›…çš„Javaä»£ç ï¼Œå°¤å…¶åœ¨é›†åˆçš„éå†å’Œå…¶ä»–é›†åˆæ“ä½œä¸­ï¼Œå¯ä»¥æå¤§åœ°ä¼˜åŒ–ä»£ç ç»“æ„ã€‚</p>\n<p>JDKä¹Ÿæä¾›äº†å¤§é‡çš„å†…ç½®å‡½æ•°å¼æ¥å£ä¾›æˆ‘ä»¬ä½¿ç”¨ï¼Œä½¿å¾—Lambdaè¡¨è¾¾å¼çš„è¿ç”¨æ›´åŠ æ–¹ä¾¿ã€é«˜æ•ˆã€‚</p>\n<h3 id=\"å¯¹æ¥å£çš„è¦æ±‚\"><a href=\"#å¯¹æ¥å£çš„è¦æ±‚\" class=\"headerlink\" title=\"å¯¹æ¥å£çš„è¦æ±‚\"></a>å¯¹æ¥å£çš„è¦æ±‚</h3><p>è™½ç„¶ä½¿ç”¨ Lambda è¡¨è¾¾å¼å¯ä»¥å¯¹æŸäº›æ¥å£è¿›è¡Œç®€å•çš„å®ç°ï¼Œä½†å¹¶ä¸æ˜¯æ‰€æœ‰çš„æ¥å£éƒ½å¯ä»¥ä½¿ç”¨ Lambda è¡¨è¾¾å¼æ¥å®ç°ã€‚<strong>Lambda è§„å®šæ¥å£ä¸­åªèƒ½æœ‰ä¸€ä¸ªéœ€è¦è¢«å®ç°çš„æ–¹æ³•ï¼Œä¸æ˜¯è§„å®šæ¥å£ä¸­åªèƒ½æœ‰ä¸€ä¸ªæ–¹æ³•</strong></p>\n<p>jdk 8 ä¸­æœ‰å¦ä¸€ä¸ªæ–°ç‰¹æ€§ï¼šdefaultï¼Œ è¢« default ä¿®é¥°çš„æ–¹æ³•ä¼šæœ‰é»˜è®¤å®ç°ï¼Œä¸æ˜¯å¿…é¡»è¢«å®ç°çš„æ–¹æ³•ï¼Œæ‰€ä»¥ä¸å½±å“ Lambda è¡¨è¾¾å¼çš„ä½¿ç”¨ã€‚</p>\n<h3 id=\"FunctionalInterface\"><a href=\"#FunctionalInterface\" class=\"headerlink\" title=\"@FunctionalInterface\"></a>@FunctionalInterface</h3><p>ä¿®é¥°å‡½æ•°å¼æ¥å£çš„ï¼Œè¦æ±‚æ¥å£ä¸­çš„æŠ½è±¡æ–¹æ³•åªæœ‰ä¸€ä¸ªã€‚ è¿™ä¸ªæ³¨è§£å¾€å¾€ä¼šå’Œ lambda è¡¨è¾¾å¼ä¸€èµ·å‡ºç°ã€‚</p>\n<h3 id=\"Lambda-åŸºç¡€è¯­æ³•\"><a href=\"#Lambda-åŸºç¡€è¯­æ³•\" class=\"headerlink\" title=\"Lambda åŸºç¡€è¯­æ³•\"></a>Lambda åŸºç¡€è¯­æ³•</h3><p>æˆ‘ä»¬è¿™é‡Œç»™å‡ºå…­ä¸ªæ¥å£ï¼Œåæ–‡çš„å…¨éƒ¨æ“ä½œéƒ½åˆ©ç”¨è¿™å…­ä¸ªæ¥å£æ¥è¿›è¡Œé˜è¿°ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**å¤šå‚æ•°æ— è¿”å›*/</span></span><br><span class=\"line\"><span class=\"meta\">@FunctionalInterface</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">interface</span> <span class=\"title class_\">NoReturnMultiParam</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">void</span> <span class=\"title function_\">method</span><span class=\"params\">(<span class=\"type\">int</span> a, <span class=\"type\">int</span> b)</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**æ— å‚æ— è¿”å›å€¼*/</span></span><br><span class=\"line\"><span class=\"meta\">@FunctionalInterface</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">interface</span> <span class=\"title class_\">NoReturnNoParam</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">void</span> <span class=\"title function_\">method</span><span class=\"params\">()</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**ä¸€ä¸ªå‚æ•°æ— è¿”å›*/</span></span><br><span class=\"line\"><span class=\"meta\">@FunctionalInterface</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">interface</span> <span class=\"title class_\">NoReturnOneParam</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">void</span> <span class=\"title function_\">method</span><span class=\"params\">(<span class=\"type\">int</span> a)</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**å¤šä¸ªå‚æ•°æœ‰è¿”å›å€¼*/</span></span><br><span class=\"line\"><span class=\"meta\">@FunctionalInterface</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">interface</span> <span class=\"title class_\">ReturnMultiParam</span> &#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> <span class=\"title function_\">method</span><span class=\"params\">(<span class=\"type\">int</span> a, <span class=\"type\">int</span> b)</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/*** æ— å‚æœ‰è¿”å›*/</span></span><br><span class=\"line\"><span class=\"meta\">@FunctionalInterface</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">interface</span> <span class=\"title class_\">ReturnNoParam</span> &#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> <span class=\"title function_\">method</span><span class=\"params\">()</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**ä¸€ä¸ªå‚æ•°æœ‰è¿”å›å€¼*/</span></span><br><span class=\"line\"><span class=\"meta\">@FunctionalInterface</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">interface</span> <span class=\"title class_\">ReturnOneParam</span> &#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> <span class=\"title function_\">method</span><span class=\"params\">(<span class=\"type\">int</span> a)</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>è¯­æ³•å½¢å¼ä¸º () -&gt; {}ï¼Œå…¶ä¸­ () ç”¨æ¥æè¿°å‚æ•°åˆ—è¡¨ï¼Œ{} ç”¨æ¥æè¿°æ–¹æ³•ä½“ï¼Œ-&gt; ä¸º lambdaè¿ç®—ç¬¦ ï¼Œè¯»ä½œ(goes to)ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> lambda.interfaces.*;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">Test1</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//æ— å‚æ— è¿”å›</span></span><br><span class=\"line\">        <span class=\"type\">NoReturnNoParam</span> <span class=\"variable\">noReturnNoParam</span> <span class=\"operator\">=</span> () -&gt; &#123;</span><br><span class=\"line\">            System.out.println(<span class=\"string\">&quot;NoReturnNoParam&quot;</span>);</span><br><span class=\"line\">        &#125;;</span><br><span class=\"line\">        noReturnNoParam.method();</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//ä¸€ä¸ªå‚æ•°æ— è¿”å›</span></span><br><span class=\"line\">        <span class=\"type\">NoReturnOneParam</span> <span class=\"variable\">noReturnOneParam</span> <span class=\"operator\">=</span> (<span class=\"type\">int</span> a) -&gt; &#123;</span><br><span class=\"line\">            System.out.println(<span class=\"string\">&quot;NoReturnOneParam param:&quot;</span> + a);</span><br><span class=\"line\">        &#125;;</span><br><span class=\"line\">        noReturnOneParam.method(<span class=\"number\">6</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//å¤šä¸ªå‚æ•°æ— è¿”å›</span></span><br><span class=\"line\">        <span class=\"type\">NoReturnMultiParam</span> <span class=\"variable\">noReturnMultiParam</span> <span class=\"operator\">=</span> (<span class=\"type\">int</span> a, <span class=\"type\">int</span> b) -&gt; &#123;</span><br><span class=\"line\">            System.out.println(<span class=\"string\">&quot;NoReturnMultiParam param:&quot;</span> + <span class=\"string\">&quot;&#123;&quot;</span> + a +<span class=\"string\">&quot;,&quot;</span> + + b +<span class=\"string\">&quot;&#125;&quot;</span>);</span><br><span class=\"line\">        &#125;;</span><br><span class=\"line\">        noReturnMultiParam.method(<span class=\"number\">6</span>, <span class=\"number\">8</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//æ— å‚æœ‰è¿”å›å€¼</span></span><br><span class=\"line\">        <span class=\"type\">ReturnNoParam</span> <span class=\"variable\">returnNoParam</span> <span class=\"operator\">=</span> () -&gt; &#123;</span><br><span class=\"line\">            System.out.print(<span class=\"string\">&quot;ReturnNoParam&quot;</span>);</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"number\">1</span>;</span><br><span class=\"line\">        &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"type\">int</span> <span class=\"variable\">res</span> <span class=\"operator\">=</span> returnNoParam.method();</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;return:&quot;</span> + res);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//ä¸€ä¸ªå‚æ•°æœ‰è¿”å›å€¼</span></span><br><span class=\"line\">        <span class=\"type\">ReturnOneParam</span> <span class=\"variable\">returnOneParam</span> <span class=\"operator\">=</span> (<span class=\"type\">int</span> a) -&gt; &#123;</span><br><span class=\"line\">            System.out.println(<span class=\"string\">&quot;ReturnOneParam param:&quot;</span> + a);</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"number\">1</span>;</span><br><span class=\"line\">        &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"type\">int</span> <span class=\"variable\">res2</span> <span class=\"operator\">=</span> returnOneParam.method(<span class=\"number\">6</span>);</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;return:&quot;</span> + res2);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//å¤šä¸ªå‚æ•°æœ‰è¿”å›å€¼</span></span><br><span class=\"line\">        <span class=\"type\">ReturnMultiParam</span> <span class=\"variable\">returnMultiParam</span> <span class=\"operator\">=</span> (<span class=\"type\">int</span> a, <span class=\"type\">int</span> b) -&gt; &#123;</span><br><span class=\"line\">            System.out.println(<span class=\"string\">&quot;ReturnMultiParam param:&quot;</span> + <span class=\"string\">&quot;&#123;&quot;</span> + a + <span class=\"string\">&quot;,&quot;</span> + b +<span class=\"string\">&quot;&#125;&quot;</span>);</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"number\">1</span>;</span><br><span class=\"line\">        &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"type\">int</span> <span class=\"variable\">res3</span> <span class=\"operator\">=</span> returnMultiParam.method(<span class=\"number\">6</span>, <span class=\"number\">8</span>);</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;return:&quot;</span> + res3);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Lambda-è¯­æ³•ç®€åŒ–\"><a href=\"#Lambda-è¯­æ³•ç®€åŒ–\" class=\"headerlink\" title=\"Lambda è¯­æ³•ç®€åŒ–\"></a>Lambda è¯­æ³•ç®€åŒ–</h3><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡è§‚å¯Ÿä»¥ä¸‹ä»£ç æ¥å®Œæˆä»£ç çš„è¿›ä¸€æ­¥ç®€åŒ–ï¼Œå†™å‡ºæ›´åŠ ä¼˜é›…çš„ä»£ç ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> lambda.interfaces.*;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">Test2</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//1.ç®€åŒ–å‚æ•°ç±»å‹ï¼Œå¯ä»¥ä¸å†™å‚æ•°ç±»å‹ï¼Œä½†æ˜¯å¿…é¡»æ‰€æœ‰å‚æ•°éƒ½ä¸å†™</span></span><br><span class=\"line\">        <span class=\"type\">NoReturnMultiParam</span> <span class=\"variable\">lamdba1</span> <span class=\"operator\">=</span> (a, b) -&gt; &#123;</span><br><span class=\"line\">            System.out.println(<span class=\"string\">&quot;ç®€åŒ–å‚æ•°ç±»å‹&quot;</span>);</span><br><span class=\"line\">        &#125;;</span><br><span class=\"line\">        lamdba1.method(<span class=\"number\">1</span>, <span class=\"number\">2</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//2.ç®€åŒ–å‚æ•°å°æ‹¬å·ï¼Œå¦‚æœåªæœ‰ä¸€ä¸ªå‚æ•°åˆ™å¯ä»¥çœç•¥å‚æ•°å°æ‹¬å·</span></span><br><span class=\"line\">        <span class=\"type\">NoReturnOneParam</span> <span class=\"variable\">lambda2</span> <span class=\"operator\">=</span> a -&gt; &#123;</span><br><span class=\"line\">            System.out.println(<span class=\"string\">&quot;ç®€åŒ–å‚æ•°å°æ‹¬å·&quot;</span>);</span><br><span class=\"line\">        &#125;;</span><br><span class=\"line\">        lambda2.method(<span class=\"number\">1</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//3.ç®€åŒ–æ–¹æ³•ä½“å¤§æ‹¬å·ï¼Œå¦‚æœæ–¹æ³•æ¡åªæœ‰ä¸€æ¡è¯­å¥ï¼Œåˆ™å¯ä»¥çœç•¥æ–¹æ³•ä½“å¤§æ‹¬å·</span></span><br><span class=\"line\">        <span class=\"type\">NoReturnNoParam</span> <span class=\"variable\">lambda3</span> <span class=\"operator\">=</span> () -&gt; System.out.println(<span class=\"string\">&quot;ç®€åŒ–æ–¹æ³•ä½“å¤§æ‹¬å·&quot;</span>);</span><br><span class=\"line\">        lambda3.method();</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//4.å¦‚æœæ–¹æ³•ä½“åªæœ‰ä¸€æ¡è¯­å¥ï¼Œå¹¶ä¸”æ˜¯ return è¯­å¥ï¼Œåˆ™å¯ä»¥çœç•¥æ–¹æ³•ä½“å¤§æ‹¬å·</span></span><br><span class=\"line\">        <span class=\"type\">ReturnOneParam</span> <span class=\"variable\">lambda4</span> <span class=\"operator\">=</span> a -&gt; a+<span class=\"number\">3</span>;</span><br><span class=\"line\">        System.out.println(lambda4.method(<span class=\"number\">5</span>));</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"type\">ReturnMultiParam</span> <span class=\"variable\">lambda5</span> <span class=\"operator\">=</span> (a, b) -&gt; a+b;</span><br><span class=\"line\">        System.out.println(lambda5.method(<span class=\"number\">1</span>, <span class=\"number\">1</span>));</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Lambda-è¡¨è¾¾å¼å¸¸ç”¨ç¤ºä¾‹\"><a href=\"#Lambda-è¡¨è¾¾å¼å¸¸ç”¨ç¤ºä¾‹\" class=\"headerlink\" title=\"Lambda è¡¨è¾¾å¼å¸¸ç”¨ç¤ºä¾‹\"></a>Lambda è¡¨è¾¾å¼å¸¸ç”¨ç¤ºä¾‹</h3><p><strong>lambda è¡¨è¾¾å¼å¼•ç”¨æ–¹æ³•</strong></p>\n<p>æœ‰æ—¶å€™æˆ‘ä»¬ä¸æ˜¯å¿…é¡»è¦è‡ªå·±é‡å†™æŸä¸ªåŒ¿åå†…éƒ¨ç±»çš„æ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥å¯ä»¥åˆ©ç”¨ lambdaè¡¨è¾¾å¼çš„æ¥å£å¿«é€ŸæŒ‡å‘ä¸€ä¸ªå·²ç»è¢«å®ç°çš„æ–¹æ³•ã€‚</p>\n<p><strong>è¯­æ³•</strong></p>\n<p> æ–¹æ³•å½’å±è€…::æ–¹æ³•å é™æ€æ–¹æ³•çš„å½’å±è€…ä¸ºç±»åï¼Œæ™®é€šæ–¹æ³•å½’å±è€…ä¸ºå¯¹è±¡</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">Exe1</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> &#123;</span><br><span class=\"line\">        <span class=\"type\">ReturnOneParam</span> <span class=\"variable\">lambda1</span> <span class=\"operator\">=</span> a -&gt; doubleNum(a);</span><br><span class=\"line\">        System.out.println(lambda1.method(<span class=\"number\">3</span>));</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//lambda2 å¼•ç”¨äº†å·²ç»å®ç°çš„ doubleNum æ–¹æ³•</span></span><br><span class=\"line\">        <span class=\"type\">ReturnOneParam</span> <span class=\"variable\">lambda2</span> <span class=\"operator\">=</span> Exe1::doubleNum;</span><br><span class=\"line\">        System.out.println(lambda2.method(<span class=\"number\">3</span>));</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"type\">Exe1</span> <span class=\"variable\">exe</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Exe1</span>();</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//lambda4 å¼•ç”¨äº†å·²ç»å®ç°çš„ addTwo æ–¹æ³•</span></span><br><span class=\"line\">        <span class=\"type\">ReturnOneParam</span> <span class=\"variable\">lambda4</span> <span class=\"operator\">=</span> exe::addTwo;</span><br><span class=\"line\">        System.out.println(lambda4.method(<span class=\"number\">2</span>));</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * è¦æ±‚</span></span><br><span class=\"line\"><span class=\"comment\">     * 1.å‚æ•°æ•°é‡å’Œç±»å‹è¦ä¸æ¥å£ä¸­å®šä¹‰çš„ä¸€è‡´</span></span><br><span class=\"line\"><span class=\"comment\">     * 2.è¿”å›å€¼ç±»å‹è¦ä¸æ¥å£ä¸­å®šä¹‰çš„ä¸€è‡´</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"type\">int</span> <span class=\"title function_\">doubleNum</span><span class=\"params\">(<span class=\"type\">int</span> a)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> a * <span class=\"number\">2</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"type\">int</span> <span class=\"title function_\">addTwo</span><span class=\"params\">(<span class=\"type\">int</span> a)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> a + <span class=\"number\">2</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><strong>æ„é€ æ–¹æ³•çš„å¼•ç”¨</strong></p>\n<p>ä¸€èˆ¬æˆ‘ä»¬éœ€è¦å£°æ˜æ¥å£ï¼Œè¯¥æ¥å£ä½œä¸ºå¯¹è±¡çš„ç”Ÿæˆå™¨ï¼Œé€šè¿‡ ç±»å::new çš„æ–¹å¼æ¥å®ä¾‹åŒ–å¯¹è±¡ï¼Œç„¶åè°ƒç”¨æ–¹æ³•è¿”å›å¯¹è±¡ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">interface</span> <span class=\"title class_\">ItemCreatorBlankConstruct</span> &#123;</span><br><span class=\"line\">    Item <span class=\"title function_\">getItem</span><span class=\"params\">()</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">interface</span> <span class=\"title class_\">ItemCreatorParamContruct</span> &#123;</span><br><span class=\"line\">    Item <span class=\"title function_\">getItem</span><span class=\"params\">(<span class=\"type\">int</span> id, String name, <span class=\"type\">double</span> price)</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">Exe2</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> &#123;</span><br><span class=\"line\">        <span class=\"type\">ItemCreatorBlankConstruct</span> <span class=\"variable\">creator</span> <span class=\"operator\">=</span> () -&gt; <span class=\"keyword\">new</span> <span class=\"title class_\">Item</span>();</span><br><span class=\"line\">        <span class=\"type\">Item</span> <span class=\"variable\">item</span> <span class=\"operator\">=</span> creator.getItem();</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"type\">ItemCreatorBlankConstruct</span> <span class=\"variable\">creator2</span> <span class=\"operator\">=</span> Item::<span class=\"keyword\">new</span>;</span><br><span class=\"line\">        <span class=\"type\">Item</span> <span class=\"variable\">item2</span> <span class=\"operator\">=</span> creator2.getItem();</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"type\">ItemCreatorParamContruct</span> <span class=\"variable\">creator3</span> <span class=\"operator\">=</span> Item::<span class=\"keyword\">new</span>;</span><br><span class=\"line\">        <span class=\"type\">Item</span> <span class=\"variable\">item3</span> <span class=\"operator\">=</span> creator3.getItem(<span class=\"number\">112</span>, <span class=\"string\">&quot;é¼ æ ‡&quot;</span>, <span class=\"number\">135.99</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><strong>lambda è¡¨è¾¾å¼åˆ›å»ºçº¿ç¨‹</strong></p>\n<p>æˆ‘ä»¬ä»¥å¾€éƒ½æ˜¯é€šè¿‡åˆ›å»º Thread å¯¹è±¡ï¼Œç„¶åé€šè¿‡åŒ¿åå†…éƒ¨ç±»é‡å†™ run() æ–¹æ³•ï¼Œä¸€æåˆ°åŒ¿åå†…éƒ¨ç±»æˆ‘ä»¬å°±åº”è¯¥æƒ³åˆ°å¯ä»¥ä½¿ç”¨ lambda è¡¨è¾¾å¼æ¥ç®€åŒ–çº¿ç¨‹çš„åˆ›å»ºè¿‡ç¨‹ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">Thread</span> <span class=\"variable\">t</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Thread</span>(() -&gt; &#123;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">i</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>; i &lt; <span class=\"number\">10</span>; i++) &#123;</span><br><span class=\"line\">      System.out.println(<span class=\"number\">2</span> + <span class=\"string\">&quot;:&quot;</span> + i);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">\tt.start();</span><br></pre></td></tr></table></figure>\n\n<p><strong>éå†é›†åˆ</strong></p>\n<p>æˆ‘ä»¬å¯ä»¥è°ƒç”¨é›†åˆçš„ <code>public void forEach(Consumer&lt;? super E&gt; action)</code> æ–¹æ³•ï¼Œé€šè¿‡ lambda è¡¨è¾¾å¼çš„æ–¹å¼éå†é›†åˆä¸­çš„å…ƒç´ ã€‚ä»¥ä¸‹æ˜¯ Consumer æ¥å£çš„æ–¹æ³•ä»¥åŠéå†é›†åˆçš„æ“ä½œã€‚Consumer æ¥å£æ˜¯ jdk ä¸ºæˆ‘ä»¬æä¾›çš„ä¸€ä¸ªå‡½æ•°å¼æ¥å£ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@FunctionalInterface</span></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">interface</span> <span class=\"title class_\">Consumer</span>&lt;T&gt; &#123;</span><br><span class=\"line\">      <span class=\"keyword\">void</span> <span class=\"title function_\">accept</span><span class=\"params\">(T t)</span>;</span><br><span class=\"line\">      <span class=\"comment\">//....</span></span><br><span class=\"line\">  &#125;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ArrayList&lt;Integer&gt; list = <span class=\"keyword\">new</span> <span class=\"title class_\">ArrayList</span>&lt;&gt;();</span><br><span class=\"line\">   Collections.addAll(list, <span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>,<span class=\"number\">4</span>,<span class=\"number\">5</span>);</span><br><span class=\"line\">   <span class=\"comment\">//lambdaè¡¨è¾¾å¼ æ–¹æ³•å¼•ç”¨</span></span><br><span class=\"line\">   list.forEach(System.out::println);</span><br><span class=\"line\"></span><br><span class=\"line\">   list.forEach(element -&gt; &#123;</span><br><span class=\"line\">     <span class=\"keyword\">if</span> (element % <span class=\"number\">2</span> == <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">       System.out.println(element);</span><br><span class=\"line\">     &#125;</span><br><span class=\"line\">   &#125;);</span><br></pre></td></tr></table></figure>\n\n<p><strong>åˆ é™¤é›†åˆä¸­çš„æŸä¸ªå…ƒç´ </strong></p>\n<p>æˆ‘ä»¬é€šè¿‡<code>public boolean removeIf(Predicate&lt;? super E&gt; filter)</code>æ–¹æ³•æ¥åˆ é™¤é›†åˆä¸­çš„æŸä¸ªå…ƒç´ ï¼ŒPredicate ä¹Ÿæ˜¯ jdk ä¸ºæˆ‘ä»¬æä¾›çš„ä¸€ä¸ªå‡½æ•°å¼æ¥å£ï¼Œå¯ä»¥ç®€åŒ–ç¨‹åºçš„ç¼–å†™ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ArrayList&lt;Item&gt; items = <span class=\"keyword\">new</span> <span class=\"title class_\">ArrayList</span>&lt;&gt;();</span><br><span class=\"line\">   items.add(<span class=\"keyword\">new</span> <span class=\"title class_\">Item</span>(<span class=\"number\">11</span>, <span class=\"string\">&quot;å°ç‰™åˆ·&quot;</span>, <span class=\"number\">12.05</span> ));</span><br><span class=\"line\">   items.add(<span class=\"keyword\">new</span> <span class=\"title class_\">Item</span>(<span class=\"number\">5</span>, <span class=\"string\">&quot;æ—¥æœ¬é©¬æ¡¶ç›–&quot;</span>, <span class=\"number\">999.05</span> ));</span><br><span class=\"line\">   items.add(<span class=\"keyword\">new</span> <span class=\"title class_\">Item</span>(<span class=\"number\">7</span>, <span class=\"string\">&quot;æ ¼åŠ›ç©ºè°ƒ&quot;</span>, <span class=\"number\">888.88</span> ));</span><br><span class=\"line\">   items.add(<span class=\"keyword\">new</span> <span class=\"title class_\">Item</span>(<span class=\"number\">17</span>, <span class=\"string\">&quot;è‚¥çš‚&quot;</span>, <span class=\"number\">2.00</span> ));</span><br><span class=\"line\">   items.add(<span class=\"keyword\">new</span> <span class=\"title class_\">Item</span>(<span class=\"number\">9</span>, <span class=\"string\">&quot;å†°ç®±&quot;</span>, <span class=\"number\">4200.00</span> ));</span><br><span class=\"line\"></span><br><span class=\"line\">   items.removeIf(ele -&gt; ele.getId() == <span class=\"number\">7</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"comment\">//é€šè¿‡ foreach éå†ï¼ŒæŸ¥çœ‹æ˜¯å¦å·²ç»åˆ é™¤</span></span><br><span class=\"line\">   items.forEach(System.out::println);</span><br></pre></td></tr></table></figure>\n\n<p><strong>é›†åˆå†…å…ƒç´ çš„æ’åº</strong></p>\n<p>åœ¨ä»¥å‰æˆ‘ä»¬è‹¥è¦ä¸ºé›†åˆå†…çš„å…ƒç´ æ’åºï¼Œå°±å¿…é¡»è°ƒç”¨ sort æ–¹æ³•ï¼Œä¼ å…¥æ¯”è¾ƒå™¨åŒ¿åå†…éƒ¨ç±»é‡å†™ compare æ–¹æ³•ï¼Œæˆ‘ä»¬ç°åœ¨å¯ä»¥ä½¿ç”¨ lambda è¡¨è¾¾å¼æ¥ç®€åŒ–ä»£ç ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ArrayList&lt;Item&gt; list = <span class=\"keyword\">new</span> <span class=\"title class_\">ArrayList</span>&lt;&gt;();</span><br><span class=\"line\">list.add(<span class=\"keyword\">new</span> <span class=\"title class_\">Item</span>(<span class=\"number\">13</span>, <span class=\"string\">&quot;èƒŒå¿ƒ&quot;</span>, <span class=\"number\">7.80</span>));</span><br><span class=\"line\">list.add(<span class=\"keyword\">new</span> <span class=\"title class_\">Item</span>(<span class=\"number\">11</span>, <span class=\"string\">&quot;åŠè¢–&quot;</span>, <span class=\"number\">37.80</span>));</span><br><span class=\"line\">list.add(<span class=\"keyword\">new</span> <span class=\"title class_\">Item</span>(<span class=\"number\">14</span>, <span class=\"string\">&quot;é£è¡£&quot;</span>, <span class=\"number\">139.80</span>));</span><br><span class=\"line\">list.add(<span class=\"keyword\">new</span> <span class=\"title class_\">Item</span>(<span class=\"number\">12</span>, <span class=\"string\">&quot;ç§‹è£¤&quot;</span>, <span class=\"number\">55.33</span>));</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">        list.sort(new Comparator&lt;Item&gt;() &#123;</span></span><br><span class=\"line\"><span class=\"comment\">            @Override</span></span><br><span class=\"line\"><span class=\"comment\">            public int compare(Item o1, Item o2) &#123;</span></span><br><span class=\"line\"><span class=\"comment\">                return o1.getId()  - o2.getId();</span></span><br><span class=\"line\"><span class=\"comment\">            &#125;</span></span><br><span class=\"line\"><span class=\"comment\">        &#125;);</span></span><br><span class=\"line\"><span class=\"comment\">        */</span></span><br><span class=\"line\"></span><br><span class=\"line\">list.sort((o1, o2) -&gt; o1.getId() - o2.getId());</span><br><span class=\"line\"></span><br><span class=\"line\">System.out.println(list);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Lambda-è¡¨è¾¾å¼ä¸­çš„é—­åŒ…é—®é¢˜\"><a href=\"#Lambda-è¡¨è¾¾å¼ä¸­çš„é—­åŒ…é—®é¢˜\" class=\"headerlink\" title=\"Lambda è¡¨è¾¾å¼ä¸­çš„é—­åŒ…é—®é¢˜\"></a>Lambda è¡¨è¾¾å¼ä¸­çš„é—­åŒ…é—®é¢˜</h3><p>è¿™ä¸ªé—®é¢˜æˆ‘ä»¬åœ¨åŒ¿åå†…éƒ¨ç±»ä¸­ä¹Ÿä¼šå­˜åœ¨ï¼Œå¦‚æœæˆ‘ä»¬æŠŠæ³¨é‡Šæ”¾å¼€ä¼šæŠ¥é”™ï¼Œå‘Šè¯‰æˆ‘ num å€¼æ˜¯ final ä¸èƒ½è¢«æ”¹å˜ã€‚è¿™é‡Œæˆ‘ä»¬è™½ç„¶æ²¡æœ‰æ ‡è¯† num ç±»å‹ä¸º finalï¼Œä½†æ˜¯åœ¨ç¼–è¯‘æœŸé—´è™šæ‹Ÿæœºä¼šå¸®æˆ‘ä»¬åŠ ä¸Š final ä¿®é¥°å…³é”®å­—ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> java.util.function.Consumer;</span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">Main</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"type\">int</span> <span class=\"variable\">num</span> <span class=\"operator\">=</span> <span class=\"number\">10</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">        Consumer&lt;String&gt; consumer = ele -&gt; &#123;</span><br><span class=\"line\">            System.out.println(num);</span><br><span class=\"line\">        &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//num = num + 2;</span></span><br><span class=\"line\">        consumer.accept(<span class=\"string\">&quot;hello&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n","site":{"data":{"links":[{"name":"CZMæœ‰ç‚¹å†·","link":"https://czm.cool/","description":"CZMçš„åšå®¢","avatar":"https://img.czm.cool/avatar/avatar.png"},{"name":"PSH","link":"https://shamd.cloud/","description":"PSHçš„åšå®¢.","avatar":"https://shamd.cloud/upload/2022/07/afbb577733f46c9535dd1d6d6388278.jpg"},{"name":"KAI","link":"https://kainote.top/","description":"love artist, love code.","avatar":"https://cdn.jsdelivr.net/gh/kaix2301/pictures/img202201072101018.jpg"}]}},"excerpt":"","more":"<h1 id=\"Lambdaè¡¨è¾¾å¼\"><a href=\"#Lambdaè¡¨è¾¾å¼\" class=\"headerlink\" title=\"Lambdaè¡¨è¾¾å¼\"></a>Lambdaè¡¨è¾¾å¼</h1><p>ğŸ’›<a class=\"link\"   href=\"https://www.cnblogs.com/haixiang/p/11029639.html\" >åŸæ–‡åœ°å€<i class=\"fas fa-external-link-alt\"></i></a>ï¼Œè½¬è½½è¯·æ³¨æ˜å‡ºå¤„!</p>\n<h3 id=\"Lambdaç®€ä»‹\"><a href=\"#Lambdaç®€ä»‹\" class=\"headerlink\" title=\"Lambdaç®€ä»‹\"></a>Lambdaç®€ä»‹</h3><p>Lambdaè¡¨è¾¾å¼æ—¶JDK8çš„ä¸€ä¸ªæ–°ç‰¹æ€§ï¼Œå¯ä»¥å–ä»£å¤§éƒ¨åˆ†çš„åŒ¿åå†…éƒ¨ç±»ï¼Œå†™å‡ºæ›´ä¼˜é›…çš„Javaä»£ç ï¼Œå°¤å…¶åœ¨é›†åˆçš„éå†å’Œå…¶ä»–é›†åˆæ“ä½œä¸­ï¼Œå¯ä»¥æå¤§åœ°ä¼˜åŒ–ä»£ç ç»“æ„ã€‚</p>\n<p>JDKä¹Ÿæä¾›äº†å¤§é‡çš„å†…ç½®å‡½æ•°å¼æ¥å£ä¾›æˆ‘ä»¬ä½¿ç”¨ï¼Œä½¿å¾—Lambdaè¡¨è¾¾å¼çš„è¿ç”¨æ›´åŠ æ–¹ä¾¿ã€é«˜æ•ˆã€‚</p>\n<h3 id=\"å¯¹æ¥å£çš„è¦æ±‚\"><a href=\"#å¯¹æ¥å£çš„è¦æ±‚\" class=\"headerlink\" title=\"å¯¹æ¥å£çš„è¦æ±‚\"></a>å¯¹æ¥å£çš„è¦æ±‚</h3><p>è™½ç„¶ä½¿ç”¨ Lambda è¡¨è¾¾å¼å¯ä»¥å¯¹æŸäº›æ¥å£è¿›è¡Œç®€å•çš„å®ç°ï¼Œä½†å¹¶ä¸æ˜¯æ‰€æœ‰çš„æ¥å£éƒ½å¯ä»¥ä½¿ç”¨ Lambda è¡¨è¾¾å¼æ¥å®ç°ã€‚<strong>Lambda è§„å®šæ¥å£ä¸­åªèƒ½æœ‰ä¸€ä¸ªéœ€è¦è¢«å®ç°çš„æ–¹æ³•ï¼Œä¸æ˜¯è§„å®šæ¥å£ä¸­åªèƒ½æœ‰ä¸€ä¸ªæ–¹æ³•</strong></p>\n<p>jdk 8 ä¸­æœ‰å¦ä¸€ä¸ªæ–°ç‰¹æ€§ï¼šdefaultï¼Œ è¢« default ä¿®é¥°çš„æ–¹æ³•ä¼šæœ‰é»˜è®¤å®ç°ï¼Œä¸æ˜¯å¿…é¡»è¢«å®ç°çš„æ–¹æ³•ï¼Œæ‰€ä»¥ä¸å½±å“ Lambda è¡¨è¾¾å¼çš„ä½¿ç”¨ã€‚</p>\n<h3 id=\"FunctionalInterface\"><a href=\"#FunctionalInterface\" class=\"headerlink\" title=\"@FunctionalInterface\"></a>@FunctionalInterface</h3><p>ä¿®é¥°å‡½æ•°å¼æ¥å£çš„ï¼Œè¦æ±‚æ¥å£ä¸­çš„æŠ½è±¡æ–¹æ³•åªæœ‰ä¸€ä¸ªã€‚ è¿™ä¸ªæ³¨è§£å¾€å¾€ä¼šå’Œ lambda è¡¨è¾¾å¼ä¸€èµ·å‡ºç°ã€‚</p>\n<h3 id=\"Lambda-åŸºç¡€è¯­æ³•\"><a href=\"#Lambda-åŸºç¡€è¯­æ³•\" class=\"headerlink\" title=\"Lambda åŸºç¡€è¯­æ³•\"></a>Lambda åŸºç¡€è¯­æ³•</h3><p>æˆ‘ä»¬è¿™é‡Œç»™å‡ºå…­ä¸ªæ¥å£ï¼Œåæ–‡çš„å…¨éƒ¨æ“ä½œéƒ½åˆ©ç”¨è¿™å…­ä¸ªæ¥å£æ¥è¿›è¡Œé˜è¿°ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**å¤šå‚æ•°æ— è¿”å›*/</span></span><br><span class=\"line\"><span class=\"meta\">@FunctionalInterface</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">interface</span> <span class=\"title class_\">NoReturnMultiParam</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">void</span> <span class=\"title function_\">method</span><span class=\"params\">(<span class=\"type\">int</span> a, <span class=\"type\">int</span> b)</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**æ— å‚æ— è¿”å›å€¼*/</span></span><br><span class=\"line\"><span class=\"meta\">@FunctionalInterface</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">interface</span> <span class=\"title class_\">NoReturnNoParam</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">void</span> <span class=\"title function_\">method</span><span class=\"params\">()</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**ä¸€ä¸ªå‚æ•°æ— è¿”å›*/</span></span><br><span class=\"line\"><span class=\"meta\">@FunctionalInterface</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">interface</span> <span class=\"title class_\">NoReturnOneParam</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">void</span> <span class=\"title function_\">method</span><span class=\"params\">(<span class=\"type\">int</span> a)</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**å¤šä¸ªå‚æ•°æœ‰è¿”å›å€¼*/</span></span><br><span class=\"line\"><span class=\"meta\">@FunctionalInterface</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">interface</span> <span class=\"title class_\">ReturnMultiParam</span> &#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> <span class=\"title function_\">method</span><span class=\"params\">(<span class=\"type\">int</span> a, <span class=\"type\">int</span> b)</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/*** æ— å‚æœ‰è¿”å›*/</span></span><br><span class=\"line\"><span class=\"meta\">@FunctionalInterface</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">interface</span> <span class=\"title class_\">ReturnNoParam</span> &#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> <span class=\"title function_\">method</span><span class=\"params\">()</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**ä¸€ä¸ªå‚æ•°æœ‰è¿”å›å€¼*/</span></span><br><span class=\"line\"><span class=\"meta\">@FunctionalInterface</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">interface</span> <span class=\"title class_\">ReturnOneParam</span> &#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> <span class=\"title function_\">method</span><span class=\"params\">(<span class=\"type\">int</span> a)</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>è¯­æ³•å½¢å¼ä¸º () -&gt; {}ï¼Œå…¶ä¸­ () ç”¨æ¥æè¿°å‚æ•°åˆ—è¡¨ï¼Œ{} ç”¨æ¥æè¿°æ–¹æ³•ä½“ï¼Œ-&gt; ä¸º lambdaè¿ç®—ç¬¦ ï¼Œè¯»ä½œ(goes to)ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> lambda.interfaces.*;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">Test1</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//æ— å‚æ— è¿”å›</span></span><br><span class=\"line\">        <span class=\"type\">NoReturnNoParam</span> <span class=\"variable\">noReturnNoParam</span> <span class=\"operator\">=</span> () -&gt; &#123;</span><br><span class=\"line\">            System.out.println(<span class=\"string\">&quot;NoReturnNoParam&quot;</span>);</span><br><span class=\"line\">        &#125;;</span><br><span class=\"line\">        noReturnNoParam.method();</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//ä¸€ä¸ªå‚æ•°æ— è¿”å›</span></span><br><span class=\"line\">        <span class=\"type\">NoReturnOneParam</span> <span class=\"variable\">noReturnOneParam</span> <span class=\"operator\">=</span> (<span class=\"type\">int</span> a) -&gt; &#123;</span><br><span class=\"line\">            System.out.println(<span class=\"string\">&quot;NoReturnOneParam param:&quot;</span> + a);</span><br><span class=\"line\">        &#125;;</span><br><span class=\"line\">        noReturnOneParam.method(<span class=\"number\">6</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//å¤šä¸ªå‚æ•°æ— è¿”å›</span></span><br><span class=\"line\">        <span class=\"type\">NoReturnMultiParam</span> <span class=\"variable\">noReturnMultiParam</span> <span class=\"operator\">=</span> (<span class=\"type\">int</span> a, <span class=\"type\">int</span> b) -&gt; &#123;</span><br><span class=\"line\">            System.out.println(<span class=\"string\">&quot;NoReturnMultiParam param:&quot;</span> + <span class=\"string\">&quot;&#123;&quot;</span> + a +<span class=\"string\">&quot;,&quot;</span> + + b +<span class=\"string\">&quot;&#125;&quot;</span>);</span><br><span class=\"line\">        &#125;;</span><br><span class=\"line\">        noReturnMultiParam.method(<span class=\"number\">6</span>, <span class=\"number\">8</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//æ— å‚æœ‰è¿”å›å€¼</span></span><br><span class=\"line\">        <span class=\"type\">ReturnNoParam</span> <span class=\"variable\">returnNoParam</span> <span class=\"operator\">=</span> () -&gt; &#123;</span><br><span class=\"line\">            System.out.print(<span class=\"string\">&quot;ReturnNoParam&quot;</span>);</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"number\">1</span>;</span><br><span class=\"line\">        &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"type\">int</span> <span class=\"variable\">res</span> <span class=\"operator\">=</span> returnNoParam.method();</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;return:&quot;</span> + res);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//ä¸€ä¸ªå‚æ•°æœ‰è¿”å›å€¼</span></span><br><span class=\"line\">        <span class=\"type\">ReturnOneParam</span> <span class=\"variable\">returnOneParam</span> <span class=\"operator\">=</span> (<span class=\"type\">int</span> a) -&gt; &#123;</span><br><span class=\"line\">            System.out.println(<span class=\"string\">&quot;ReturnOneParam param:&quot;</span> + a);</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"number\">1</span>;</span><br><span class=\"line\">        &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"type\">int</span> <span class=\"variable\">res2</span> <span class=\"operator\">=</span> returnOneParam.method(<span class=\"number\">6</span>);</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;return:&quot;</span> + res2);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//å¤šä¸ªå‚æ•°æœ‰è¿”å›å€¼</span></span><br><span class=\"line\">        <span class=\"type\">ReturnMultiParam</span> <span class=\"variable\">returnMultiParam</span> <span class=\"operator\">=</span> (<span class=\"type\">int</span> a, <span class=\"type\">int</span> b) -&gt; &#123;</span><br><span class=\"line\">            System.out.println(<span class=\"string\">&quot;ReturnMultiParam param:&quot;</span> + <span class=\"string\">&quot;&#123;&quot;</span> + a + <span class=\"string\">&quot;,&quot;</span> + b +<span class=\"string\">&quot;&#125;&quot;</span>);</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"number\">1</span>;</span><br><span class=\"line\">        &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"type\">int</span> <span class=\"variable\">res3</span> <span class=\"operator\">=</span> returnMultiParam.method(<span class=\"number\">6</span>, <span class=\"number\">8</span>);</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;return:&quot;</span> + res3);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Lambda-è¯­æ³•ç®€åŒ–\"><a href=\"#Lambda-è¯­æ³•ç®€åŒ–\" class=\"headerlink\" title=\"Lambda è¯­æ³•ç®€åŒ–\"></a>Lambda è¯­æ³•ç®€åŒ–</h3><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡è§‚å¯Ÿä»¥ä¸‹ä»£ç æ¥å®Œæˆä»£ç çš„è¿›ä¸€æ­¥ç®€åŒ–ï¼Œå†™å‡ºæ›´åŠ ä¼˜é›…çš„ä»£ç ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> lambda.interfaces.*;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">Test2</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//1.ç®€åŒ–å‚æ•°ç±»å‹ï¼Œå¯ä»¥ä¸å†™å‚æ•°ç±»å‹ï¼Œä½†æ˜¯å¿…é¡»æ‰€æœ‰å‚æ•°éƒ½ä¸å†™</span></span><br><span class=\"line\">        <span class=\"type\">NoReturnMultiParam</span> <span class=\"variable\">lamdba1</span> <span class=\"operator\">=</span> (a, b) -&gt; &#123;</span><br><span class=\"line\">            System.out.println(<span class=\"string\">&quot;ç®€åŒ–å‚æ•°ç±»å‹&quot;</span>);</span><br><span class=\"line\">        &#125;;</span><br><span class=\"line\">        lamdba1.method(<span class=\"number\">1</span>, <span class=\"number\">2</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//2.ç®€åŒ–å‚æ•°å°æ‹¬å·ï¼Œå¦‚æœåªæœ‰ä¸€ä¸ªå‚æ•°åˆ™å¯ä»¥çœç•¥å‚æ•°å°æ‹¬å·</span></span><br><span class=\"line\">        <span class=\"type\">NoReturnOneParam</span> <span class=\"variable\">lambda2</span> <span class=\"operator\">=</span> a -&gt; &#123;</span><br><span class=\"line\">            System.out.println(<span class=\"string\">&quot;ç®€åŒ–å‚æ•°å°æ‹¬å·&quot;</span>);</span><br><span class=\"line\">        &#125;;</span><br><span class=\"line\">        lambda2.method(<span class=\"number\">1</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//3.ç®€åŒ–æ–¹æ³•ä½“å¤§æ‹¬å·ï¼Œå¦‚æœæ–¹æ³•æ¡åªæœ‰ä¸€æ¡è¯­å¥ï¼Œåˆ™å¯ä»¥çœç•¥æ–¹æ³•ä½“å¤§æ‹¬å·</span></span><br><span class=\"line\">        <span class=\"type\">NoReturnNoParam</span> <span class=\"variable\">lambda3</span> <span class=\"operator\">=</span> () -&gt; System.out.println(<span class=\"string\">&quot;ç®€åŒ–æ–¹æ³•ä½“å¤§æ‹¬å·&quot;</span>);</span><br><span class=\"line\">        lambda3.method();</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//4.å¦‚æœæ–¹æ³•ä½“åªæœ‰ä¸€æ¡è¯­å¥ï¼Œå¹¶ä¸”æ˜¯ return è¯­å¥ï¼Œåˆ™å¯ä»¥çœç•¥æ–¹æ³•ä½“å¤§æ‹¬å·</span></span><br><span class=\"line\">        <span class=\"type\">ReturnOneParam</span> <span class=\"variable\">lambda4</span> <span class=\"operator\">=</span> a -&gt; a+<span class=\"number\">3</span>;</span><br><span class=\"line\">        System.out.println(lambda4.method(<span class=\"number\">5</span>));</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"type\">ReturnMultiParam</span> <span class=\"variable\">lambda5</span> <span class=\"operator\">=</span> (a, b) -&gt; a+b;</span><br><span class=\"line\">        System.out.println(lambda5.method(<span class=\"number\">1</span>, <span class=\"number\">1</span>));</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Lambda-è¡¨è¾¾å¼å¸¸ç”¨ç¤ºä¾‹\"><a href=\"#Lambda-è¡¨è¾¾å¼å¸¸ç”¨ç¤ºä¾‹\" class=\"headerlink\" title=\"Lambda è¡¨è¾¾å¼å¸¸ç”¨ç¤ºä¾‹\"></a>Lambda è¡¨è¾¾å¼å¸¸ç”¨ç¤ºä¾‹</h3><p><strong>lambda è¡¨è¾¾å¼å¼•ç”¨æ–¹æ³•</strong></p>\n<p>æœ‰æ—¶å€™æˆ‘ä»¬ä¸æ˜¯å¿…é¡»è¦è‡ªå·±é‡å†™æŸä¸ªåŒ¿åå†…éƒ¨ç±»çš„æ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥å¯ä»¥åˆ©ç”¨ lambdaè¡¨è¾¾å¼çš„æ¥å£å¿«é€ŸæŒ‡å‘ä¸€ä¸ªå·²ç»è¢«å®ç°çš„æ–¹æ³•ã€‚</p>\n<p><strong>è¯­æ³•</strong></p>\n<p> æ–¹æ³•å½’å±è€…::æ–¹æ³•å é™æ€æ–¹æ³•çš„å½’å±è€…ä¸ºç±»åï¼Œæ™®é€šæ–¹æ³•å½’å±è€…ä¸ºå¯¹è±¡</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">Exe1</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> &#123;</span><br><span class=\"line\">        <span class=\"type\">ReturnOneParam</span> <span class=\"variable\">lambda1</span> <span class=\"operator\">=</span> a -&gt; doubleNum(a);</span><br><span class=\"line\">        System.out.println(lambda1.method(<span class=\"number\">3</span>));</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//lambda2 å¼•ç”¨äº†å·²ç»å®ç°çš„ doubleNum æ–¹æ³•</span></span><br><span class=\"line\">        <span class=\"type\">ReturnOneParam</span> <span class=\"variable\">lambda2</span> <span class=\"operator\">=</span> Exe1::doubleNum;</span><br><span class=\"line\">        System.out.println(lambda2.method(<span class=\"number\">3</span>));</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"type\">Exe1</span> <span class=\"variable\">exe</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Exe1</span>();</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//lambda4 å¼•ç”¨äº†å·²ç»å®ç°çš„ addTwo æ–¹æ³•</span></span><br><span class=\"line\">        <span class=\"type\">ReturnOneParam</span> <span class=\"variable\">lambda4</span> <span class=\"operator\">=</span> exe::addTwo;</span><br><span class=\"line\">        System.out.println(lambda4.method(<span class=\"number\">2</span>));</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * è¦æ±‚</span></span><br><span class=\"line\"><span class=\"comment\">     * 1.å‚æ•°æ•°é‡å’Œç±»å‹è¦ä¸æ¥å£ä¸­å®šä¹‰çš„ä¸€è‡´</span></span><br><span class=\"line\"><span class=\"comment\">     * 2.è¿”å›å€¼ç±»å‹è¦ä¸æ¥å£ä¸­å®šä¹‰çš„ä¸€è‡´</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"type\">int</span> <span class=\"title function_\">doubleNum</span><span class=\"params\">(<span class=\"type\">int</span> a)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> a * <span class=\"number\">2</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"type\">int</span> <span class=\"title function_\">addTwo</span><span class=\"params\">(<span class=\"type\">int</span> a)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> a + <span class=\"number\">2</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><strong>æ„é€ æ–¹æ³•çš„å¼•ç”¨</strong></p>\n<p>ä¸€èˆ¬æˆ‘ä»¬éœ€è¦å£°æ˜æ¥å£ï¼Œè¯¥æ¥å£ä½œä¸ºå¯¹è±¡çš„ç”Ÿæˆå™¨ï¼Œé€šè¿‡ ç±»å::new çš„æ–¹å¼æ¥å®ä¾‹åŒ–å¯¹è±¡ï¼Œç„¶åè°ƒç”¨æ–¹æ³•è¿”å›å¯¹è±¡ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">interface</span> <span class=\"title class_\">ItemCreatorBlankConstruct</span> &#123;</span><br><span class=\"line\">    Item <span class=\"title function_\">getItem</span><span class=\"params\">()</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">interface</span> <span class=\"title class_\">ItemCreatorParamContruct</span> &#123;</span><br><span class=\"line\">    Item <span class=\"title function_\">getItem</span><span class=\"params\">(<span class=\"type\">int</span> id, String name, <span class=\"type\">double</span> price)</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">Exe2</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> &#123;</span><br><span class=\"line\">        <span class=\"type\">ItemCreatorBlankConstruct</span> <span class=\"variable\">creator</span> <span class=\"operator\">=</span> () -&gt; <span class=\"keyword\">new</span> <span class=\"title class_\">Item</span>();</span><br><span class=\"line\">        <span class=\"type\">Item</span> <span class=\"variable\">item</span> <span class=\"operator\">=</span> creator.getItem();</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"type\">ItemCreatorBlankConstruct</span> <span class=\"variable\">creator2</span> <span class=\"operator\">=</span> Item::<span class=\"keyword\">new</span>;</span><br><span class=\"line\">        <span class=\"type\">Item</span> <span class=\"variable\">item2</span> <span class=\"operator\">=</span> creator2.getItem();</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"type\">ItemCreatorParamContruct</span> <span class=\"variable\">creator3</span> <span class=\"operator\">=</span> Item::<span class=\"keyword\">new</span>;</span><br><span class=\"line\">        <span class=\"type\">Item</span> <span class=\"variable\">item3</span> <span class=\"operator\">=</span> creator3.getItem(<span class=\"number\">112</span>, <span class=\"string\">&quot;é¼ æ ‡&quot;</span>, <span class=\"number\">135.99</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><strong>lambda è¡¨è¾¾å¼åˆ›å»ºçº¿ç¨‹</strong></p>\n<p>æˆ‘ä»¬ä»¥å¾€éƒ½æ˜¯é€šè¿‡åˆ›å»º Thread å¯¹è±¡ï¼Œç„¶åé€šè¿‡åŒ¿åå†…éƒ¨ç±»é‡å†™ run() æ–¹æ³•ï¼Œä¸€æåˆ°åŒ¿åå†…éƒ¨ç±»æˆ‘ä»¬å°±åº”è¯¥æƒ³åˆ°å¯ä»¥ä½¿ç”¨ lambda è¡¨è¾¾å¼æ¥ç®€åŒ–çº¿ç¨‹çš„åˆ›å»ºè¿‡ç¨‹ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">Thread</span> <span class=\"variable\">t</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Thread</span>(() -&gt; &#123;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> <span class=\"variable\">i</span> <span class=\"operator\">=</span> <span class=\"number\">0</span>; i &lt; <span class=\"number\">10</span>; i++) &#123;</span><br><span class=\"line\">      System.out.println(<span class=\"number\">2</span> + <span class=\"string\">&quot;:&quot;</span> + i);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">\tt.start();</span><br></pre></td></tr></table></figure>\n\n<p><strong>éå†é›†åˆ</strong></p>\n<p>æˆ‘ä»¬å¯ä»¥è°ƒç”¨é›†åˆçš„ <code>public void forEach(Consumer&lt;? super E&gt; action)</code> æ–¹æ³•ï¼Œé€šè¿‡ lambda è¡¨è¾¾å¼çš„æ–¹å¼éå†é›†åˆä¸­çš„å…ƒç´ ã€‚ä»¥ä¸‹æ˜¯ Consumer æ¥å£çš„æ–¹æ³•ä»¥åŠéå†é›†åˆçš„æ“ä½œã€‚Consumer æ¥å£æ˜¯ jdk ä¸ºæˆ‘ä»¬æä¾›çš„ä¸€ä¸ªå‡½æ•°å¼æ¥å£ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@FunctionalInterface</span></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">interface</span> <span class=\"title class_\">Consumer</span>&lt;T&gt; &#123;</span><br><span class=\"line\">      <span class=\"keyword\">void</span> <span class=\"title function_\">accept</span><span class=\"params\">(T t)</span>;</span><br><span class=\"line\">      <span class=\"comment\">//....</span></span><br><span class=\"line\">  &#125;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ArrayList&lt;Integer&gt; list = <span class=\"keyword\">new</span> <span class=\"title class_\">ArrayList</span>&lt;&gt;();</span><br><span class=\"line\">   Collections.addAll(list, <span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>,<span class=\"number\">4</span>,<span class=\"number\">5</span>);</span><br><span class=\"line\">   <span class=\"comment\">//lambdaè¡¨è¾¾å¼ æ–¹æ³•å¼•ç”¨</span></span><br><span class=\"line\">   list.forEach(System.out::println);</span><br><span class=\"line\"></span><br><span class=\"line\">   list.forEach(element -&gt; &#123;</span><br><span class=\"line\">     <span class=\"keyword\">if</span> (element % <span class=\"number\">2</span> == <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">       System.out.println(element);</span><br><span class=\"line\">     &#125;</span><br><span class=\"line\">   &#125;);</span><br></pre></td></tr></table></figure>\n\n<p><strong>åˆ é™¤é›†åˆä¸­çš„æŸä¸ªå…ƒç´ </strong></p>\n<p>æˆ‘ä»¬é€šè¿‡<code>public boolean removeIf(Predicate&lt;? super E&gt; filter)</code>æ–¹æ³•æ¥åˆ é™¤é›†åˆä¸­çš„æŸä¸ªå…ƒç´ ï¼ŒPredicate ä¹Ÿæ˜¯ jdk ä¸ºæˆ‘ä»¬æä¾›çš„ä¸€ä¸ªå‡½æ•°å¼æ¥å£ï¼Œå¯ä»¥ç®€åŒ–ç¨‹åºçš„ç¼–å†™ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ArrayList&lt;Item&gt; items = <span class=\"keyword\">new</span> <span class=\"title class_\">ArrayList</span>&lt;&gt;();</span><br><span class=\"line\">   items.add(<span class=\"keyword\">new</span> <span class=\"title class_\">Item</span>(<span class=\"number\">11</span>, <span class=\"string\">&quot;å°ç‰™åˆ·&quot;</span>, <span class=\"number\">12.05</span> ));</span><br><span class=\"line\">   items.add(<span class=\"keyword\">new</span> <span class=\"title class_\">Item</span>(<span class=\"number\">5</span>, <span class=\"string\">&quot;æ—¥æœ¬é©¬æ¡¶ç›–&quot;</span>, <span class=\"number\">999.05</span> ));</span><br><span class=\"line\">   items.add(<span class=\"keyword\">new</span> <span class=\"title class_\">Item</span>(<span class=\"number\">7</span>, <span class=\"string\">&quot;æ ¼åŠ›ç©ºè°ƒ&quot;</span>, <span class=\"number\">888.88</span> ));</span><br><span class=\"line\">   items.add(<span class=\"keyword\">new</span> <span class=\"title class_\">Item</span>(<span class=\"number\">17</span>, <span class=\"string\">&quot;è‚¥çš‚&quot;</span>, <span class=\"number\">2.00</span> ));</span><br><span class=\"line\">   items.add(<span class=\"keyword\">new</span> <span class=\"title class_\">Item</span>(<span class=\"number\">9</span>, <span class=\"string\">&quot;å†°ç®±&quot;</span>, <span class=\"number\">4200.00</span> ));</span><br><span class=\"line\"></span><br><span class=\"line\">   items.removeIf(ele -&gt; ele.getId() == <span class=\"number\">7</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"comment\">//é€šè¿‡ foreach éå†ï¼ŒæŸ¥çœ‹æ˜¯å¦å·²ç»åˆ é™¤</span></span><br><span class=\"line\">   items.forEach(System.out::println);</span><br></pre></td></tr></table></figure>\n\n<p><strong>é›†åˆå†…å…ƒç´ çš„æ’åº</strong></p>\n<p>åœ¨ä»¥å‰æˆ‘ä»¬è‹¥è¦ä¸ºé›†åˆå†…çš„å…ƒç´ æ’åºï¼Œå°±å¿…é¡»è°ƒç”¨ sort æ–¹æ³•ï¼Œä¼ å…¥æ¯”è¾ƒå™¨åŒ¿åå†…éƒ¨ç±»é‡å†™ compare æ–¹æ³•ï¼Œæˆ‘ä»¬ç°åœ¨å¯ä»¥ä½¿ç”¨ lambda è¡¨è¾¾å¼æ¥ç®€åŒ–ä»£ç ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ArrayList&lt;Item&gt; list = <span class=\"keyword\">new</span> <span class=\"title class_\">ArrayList</span>&lt;&gt;();</span><br><span class=\"line\">list.add(<span class=\"keyword\">new</span> <span class=\"title class_\">Item</span>(<span class=\"number\">13</span>, <span class=\"string\">&quot;èƒŒå¿ƒ&quot;</span>, <span class=\"number\">7.80</span>));</span><br><span class=\"line\">list.add(<span class=\"keyword\">new</span> <span class=\"title class_\">Item</span>(<span class=\"number\">11</span>, <span class=\"string\">&quot;åŠè¢–&quot;</span>, <span class=\"number\">37.80</span>));</span><br><span class=\"line\">list.add(<span class=\"keyword\">new</span> <span class=\"title class_\">Item</span>(<span class=\"number\">14</span>, <span class=\"string\">&quot;é£è¡£&quot;</span>, <span class=\"number\">139.80</span>));</span><br><span class=\"line\">list.add(<span class=\"keyword\">new</span> <span class=\"title class_\">Item</span>(<span class=\"number\">12</span>, <span class=\"string\">&quot;ç§‹è£¤&quot;</span>, <span class=\"number\">55.33</span>));</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">        list.sort(new Comparator&lt;Item&gt;() &#123;</span></span><br><span class=\"line\"><span class=\"comment\">            @Override</span></span><br><span class=\"line\"><span class=\"comment\">            public int compare(Item o1, Item o2) &#123;</span></span><br><span class=\"line\"><span class=\"comment\">                return o1.getId()  - o2.getId();</span></span><br><span class=\"line\"><span class=\"comment\">            &#125;</span></span><br><span class=\"line\"><span class=\"comment\">        &#125;);</span></span><br><span class=\"line\"><span class=\"comment\">        */</span></span><br><span class=\"line\"></span><br><span class=\"line\">list.sort((o1, o2) -&gt; o1.getId() - o2.getId());</span><br><span class=\"line\"></span><br><span class=\"line\">System.out.println(list);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Lambda-è¡¨è¾¾å¼ä¸­çš„é—­åŒ…é—®é¢˜\"><a href=\"#Lambda-è¡¨è¾¾å¼ä¸­çš„é—­åŒ…é—®é¢˜\" class=\"headerlink\" title=\"Lambda è¡¨è¾¾å¼ä¸­çš„é—­åŒ…é—®é¢˜\"></a>Lambda è¡¨è¾¾å¼ä¸­çš„é—­åŒ…é—®é¢˜</h3><p>è¿™ä¸ªé—®é¢˜æˆ‘ä»¬åœ¨åŒ¿åå†…éƒ¨ç±»ä¸­ä¹Ÿä¼šå­˜åœ¨ï¼Œå¦‚æœæˆ‘ä»¬æŠŠæ³¨é‡Šæ”¾å¼€ä¼šæŠ¥é”™ï¼Œå‘Šè¯‰æˆ‘ num å€¼æ˜¯ final ä¸èƒ½è¢«æ”¹å˜ã€‚è¿™é‡Œæˆ‘ä»¬è™½ç„¶æ²¡æœ‰æ ‡è¯† num ç±»å‹ä¸º finalï¼Œä½†æ˜¯åœ¨ç¼–è¯‘æœŸé—´è™šæ‹Ÿæœºä¼šå¸®æˆ‘ä»¬åŠ ä¸Š final ä¿®é¥°å…³é”®å­—ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> java.util.function.Consumer;</span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">Main</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"type\">int</span> <span class=\"variable\">num</span> <span class=\"operator\">=</span> <span class=\"number\">10</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">        Consumer&lt;String&gt; consumer = ele -&gt; &#123;</span><br><span class=\"line\">            System.out.println(num);</span><br><span class=\"line\">        &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//num = num + 2;</span></span><br><span class=\"line\">        consumer.accept(<span class=\"string\">&quot;hello&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n"},{"title":"ROSå…¥é—¨æ•™ç¨‹","date":"2022-09-28T13:40:14.000Z","_content":"# ROSå…¥é—¨å­¦ä¹ \n\n## ä¸€ã€Ubuntuç¯å¢ƒæ­å»º\n\n**å»ºè®®ç‰ˆæœ¬**ï¼šUbuntu18.04 or Ubuntu16.04\n\n**å®‰è£…æ–¹æ³•**ï¼šè™šæ‹Ÿæœºå®‰è£…ã€ç¡¬ç›˜å®‰è£…ï¼ˆæ¨èï¼‰\n\n![image-20220928213527604](https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20220928213527604.png)\n\n### æ–¹æ³•ä¸€ï¼šè™šæ‹Ÿæœºå®‰è£…Ubuntu\n\n**1.è™šæ‹Ÿæœºå®‰è£…**ï¼šhttps://blog.csdn.net/hao5119266/article/details/89198275/\n\n**2.Ubuntué•œåƒä¸‹è½½**ï¼Œæ³¨æ„ï¼šé•œåƒä¸€èˆ¬ä¸º2Gbå·¦å³åç¼€isoçš„æ–‡ä»¶ï¼Œä¸‹è½½desktopç‰ˆæœ¬\n\nå®˜æ–¹ä¸‹è½½é“¾æ¥ï¼ˆä¸æ¨èï¼‰ï¼šhttps://ubuntu.com/download\n\nä¸­ç§‘å¤§å…ƒï¼šhttp://mirrors.ustc.edu.cn/ubuntu-releases/\n\né˜¿é‡Œäº‘æºï¼šhttps://mirrors.aliyun.com/ubuntu-releases/\n\nåŒ—ç†å·¥æºï¼šhttps://mirror.bit.edu.cn/ubuntu-releases/\n\n3.Ubuntuå®‰è£…ï¼šhttps://blog.csdn.net/woshinsy/article/details/124150654\n\n### æ–¹æ³•äºŒï¼šç¡¬ç›˜å®‰è£…Ubuntuï¼ˆåŒç³»ç»Ÿ)\n\nè°¨æ…æ“ä½œï¼Œæœ€å¥½æœ‰è‡ªå·±å®‰è£…ç³»ç»Ÿçš„ç»éªŒï¼\n\næ•™ç¨‹å¦‚ä¸‹ï¼šhttps://blog.csdn.net/weixin_43091381/article/details/108522223##\n\n## äºŒã€LinuxåŸºæœ¬å‘½ä»¤\n\n**å¸¸ç”¨æŒ‡ä»¤**ï¼šhttps://blog.csdn.net/qq_46416934/article/details/123190966\n\nå‘½ä»¤å¤§å…¨ï¼šhttps://www.runoob.com/linux/linux-command-manual.html\n\n## ä¸‰ã€ROSå®‰è£…\n\nå®‰è£…æ•™ç¨‹https://blog.csdn.net/my_id_kt/article/details/123753771\n\n**æ³¨æ„**ï¼šæ ¹æ®Ubuntuç‰ˆæœ¬å®‰è£…æŒ‡å®šç‰ˆæœ¬çš„ROS\n\n## å››ã€ROSåŸºç¡€å­¦ä¹ \n\næ¨èå¤æœˆå±…å…¥é—¨è§†é¢‘ï¼Œä»å…¥é—¨è¯¾ç¨‹ä»Linuxå®‰è£…å¼€å§‹è®²èµ·ï¼ŒC++å’ŒPythonéƒ½æœ‰è®²åˆ°ï¼ŒæŒæ¡ä¸€ç§è¯­è¨€å³å¯ï¼š\n\nhttps://www.bilibili.com/video/BV1zt411G7Vn?p=1\n\n**CSDNæ•™ç¨‹**ï¼š\n\nhttps://blog.csdn.net/mbdong/article/details/109310874\n\nhttps://blog.csdn.net/u011832219/category_10500120.html","source":"_posts/2022/09/ROSå…¥é—¨æ•™ç¨‹.md","raw":"---\ntitle: ROSå…¥é—¨æ•™ç¨‹\ndate: 2022-09-28 21:40:14\ntags: [ROS]\ncategories: [ç¬”è®°]\n---\n# ROSå…¥é—¨å­¦ä¹ \n\n## ä¸€ã€Ubuntuç¯å¢ƒæ­å»º\n\n**å»ºè®®ç‰ˆæœ¬**ï¼šUbuntu18.04 or Ubuntu16.04\n\n**å®‰è£…æ–¹æ³•**ï¼šè™šæ‹Ÿæœºå®‰è£…ã€ç¡¬ç›˜å®‰è£…ï¼ˆæ¨èï¼‰\n\n![image-20220928213527604](https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20220928213527604.png)\n\n### æ–¹æ³•ä¸€ï¼šè™šæ‹Ÿæœºå®‰è£…Ubuntu\n\n**1.è™šæ‹Ÿæœºå®‰è£…**ï¼šhttps://blog.csdn.net/hao5119266/article/details/89198275/\n\n**2.Ubuntué•œåƒä¸‹è½½**ï¼Œæ³¨æ„ï¼šé•œåƒä¸€èˆ¬ä¸º2Gbå·¦å³åç¼€isoçš„æ–‡ä»¶ï¼Œä¸‹è½½desktopç‰ˆæœ¬\n\nå®˜æ–¹ä¸‹è½½é“¾æ¥ï¼ˆä¸æ¨èï¼‰ï¼šhttps://ubuntu.com/download\n\nä¸­ç§‘å¤§å…ƒï¼šhttp://mirrors.ustc.edu.cn/ubuntu-releases/\n\né˜¿é‡Œäº‘æºï¼šhttps://mirrors.aliyun.com/ubuntu-releases/\n\nåŒ—ç†å·¥æºï¼šhttps://mirror.bit.edu.cn/ubuntu-releases/\n\n3.Ubuntuå®‰è£…ï¼šhttps://blog.csdn.net/woshinsy/article/details/124150654\n\n### æ–¹æ³•äºŒï¼šç¡¬ç›˜å®‰è£…Ubuntuï¼ˆåŒç³»ç»Ÿ)\n\nè°¨æ…æ“ä½œï¼Œæœ€å¥½æœ‰è‡ªå·±å®‰è£…ç³»ç»Ÿçš„ç»éªŒï¼\n\næ•™ç¨‹å¦‚ä¸‹ï¼šhttps://blog.csdn.net/weixin_43091381/article/details/108522223##\n\n## äºŒã€LinuxåŸºæœ¬å‘½ä»¤\n\n**å¸¸ç”¨æŒ‡ä»¤**ï¼šhttps://blog.csdn.net/qq_46416934/article/details/123190966\n\nå‘½ä»¤å¤§å…¨ï¼šhttps://www.runoob.com/linux/linux-command-manual.html\n\n## ä¸‰ã€ROSå®‰è£…\n\nå®‰è£…æ•™ç¨‹https://blog.csdn.net/my_id_kt/article/details/123753771\n\n**æ³¨æ„**ï¼šæ ¹æ®Ubuntuç‰ˆæœ¬å®‰è£…æŒ‡å®šç‰ˆæœ¬çš„ROS\n\n## å››ã€ROSåŸºç¡€å­¦ä¹ \n\næ¨èå¤æœˆå±…å…¥é—¨è§†é¢‘ï¼Œä»å…¥é—¨è¯¾ç¨‹ä»Linuxå®‰è£…å¼€å§‹è®²èµ·ï¼ŒC++å’ŒPythonéƒ½æœ‰è®²åˆ°ï¼ŒæŒæ¡ä¸€ç§è¯­è¨€å³å¯ï¼š\n\nhttps://www.bilibili.com/video/BV1zt411G7Vn?p=1\n\n**CSDNæ•™ç¨‹**ï¼š\n\nhttps://blog.csdn.net/mbdong/article/details/109310874\n\nhttps://blog.csdn.net/u011832219/category_10500120.html","slug":"ROSå…¥é—¨æ•™ç¨‹","published":1,"updated":"2022-09-29T15:28:35.398Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clas9ersy000vdk8fdu39f5zg","content":"<h1 id=\"ROSå…¥é—¨å­¦ä¹ \"><a href=\"#ROSå…¥é—¨å­¦ä¹ \" class=\"headerlink\" title=\"ROSå…¥é—¨å­¦ä¹ \"></a>ROSå…¥é—¨å­¦ä¹ </h1><h2 id=\"ä¸€ã€Ubuntuç¯å¢ƒæ­å»º\"><a href=\"#ä¸€ã€Ubuntuç¯å¢ƒæ­å»º\" class=\"headerlink\" title=\"ä¸€ã€Ubuntuç¯å¢ƒæ­å»º\"></a>ä¸€ã€Ubuntuç¯å¢ƒæ­å»º</h2><p><strong>å»ºè®®ç‰ˆæœ¬</strong>ï¼šUbuntu18.04 or Ubuntu16.04</p>\n<p><strong>å®‰è£…æ–¹æ³•</strong>ï¼šè™šæ‹Ÿæœºå®‰è£…ã€ç¡¬ç›˜å®‰è£…ï¼ˆæ¨èï¼‰</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20220928213527604.png\"\n                      alt=\"image-20220928213527604\"\n                ></p>\n<h3 id=\"æ–¹æ³•ä¸€ï¼šè™šæ‹Ÿæœºå®‰è£…Ubuntu\"><a href=\"#æ–¹æ³•ä¸€ï¼šè™šæ‹Ÿæœºå®‰è£…Ubuntu\" class=\"headerlink\" title=\"æ–¹æ³•ä¸€ï¼šè™šæ‹Ÿæœºå®‰è£…Ubuntu\"></a>æ–¹æ³•ä¸€ï¼šè™šæ‹Ÿæœºå®‰è£…Ubuntu</h3><p><strong>1.è™šæ‹Ÿæœºå®‰è£…</strong>ï¼š<a class=\"link\"   href=\"https://blog.csdn.net/hao5119266/article/details/89198275/\" >https://blog.csdn.net/hao5119266/article/details/89198275/<i class=\"fas fa-external-link-alt\"></i></a></p>\n<p><strong>2.Ubuntué•œåƒä¸‹è½½</strong>ï¼Œæ³¨æ„ï¼šé•œåƒä¸€èˆ¬ä¸º2Gbå·¦å³åç¼€isoçš„æ–‡ä»¶ï¼Œä¸‹è½½desktopç‰ˆæœ¬</p>\n<p>å®˜æ–¹ä¸‹è½½é“¾æ¥ï¼ˆä¸æ¨èï¼‰ï¼š<a class=\"link\"   href=\"https://ubuntu.com/download\" >https://ubuntu.com/download<i class=\"fas fa-external-link-alt\"></i></a></p>\n<p>ä¸­ç§‘å¤§å…ƒï¼š<a class=\"link\"   href=\"http://mirrors.ustc.edu.cn/ubuntu-releases/\" >http://mirrors.ustc.edu.cn/ubuntu-releases/<i class=\"fas fa-external-link-alt\"></i></a></p>\n<p>é˜¿é‡Œäº‘æºï¼š<a class=\"link\"   href=\"https://mirrors.aliyun.com/ubuntu-releases/\" >https://mirrors.aliyun.com/ubuntu-releases/<i class=\"fas fa-external-link-alt\"></i></a></p>\n<p>åŒ—ç†å·¥æºï¼š<a class=\"link\"   href=\"https://mirror.bit.edu.cn/ubuntu-releases/\" >https://mirror.bit.edu.cn/ubuntu-releases/<i class=\"fas fa-external-link-alt\"></i></a></p>\n<p>3.Ubuntuå®‰è£…ï¼š<a class=\"link\"   href=\"https://blog.csdn.net/woshinsy/article/details/124150654\" >https://blog.csdn.net/woshinsy/article/details/124150654<i class=\"fas fa-external-link-alt\"></i></a></p>\n<h3 id=\"æ–¹æ³•äºŒï¼šç¡¬ç›˜å®‰è£…Ubuntuï¼ˆåŒç³»ç»Ÿ\"><a href=\"#æ–¹æ³•äºŒï¼šç¡¬ç›˜å®‰è£…Ubuntuï¼ˆåŒç³»ç»Ÿ\" class=\"headerlink\" title=\"æ–¹æ³•äºŒï¼šç¡¬ç›˜å®‰è£…Ubuntuï¼ˆåŒç³»ç»Ÿ)\"></a>æ–¹æ³•äºŒï¼šç¡¬ç›˜å®‰è£…Ubuntuï¼ˆåŒç³»ç»Ÿ)</h3><p>è°¨æ…æ“ä½œï¼Œæœ€å¥½æœ‰è‡ªå·±å®‰è£…ç³»ç»Ÿçš„ç»éªŒï¼</p>\n<p>æ•™ç¨‹å¦‚ä¸‹ï¼š<a class=\"link\"   href=\"https://blog.csdn.net/weixin_43091381/article/details/108522223##\" >https://blog.csdn.net/weixin_43091381/article/details/108522223##<i class=\"fas fa-external-link-alt\"></i></a></p>\n<h2 id=\"äºŒã€LinuxåŸºæœ¬å‘½ä»¤\"><a href=\"#äºŒã€LinuxåŸºæœ¬å‘½ä»¤\" class=\"headerlink\" title=\"äºŒã€LinuxåŸºæœ¬å‘½ä»¤\"></a>äºŒã€LinuxåŸºæœ¬å‘½ä»¤</h2><p><strong>å¸¸ç”¨æŒ‡ä»¤</strong>ï¼š<a class=\"link\"   href=\"https://blog.csdn.net/qq_46416934/article/details/123190966\" >https://blog.csdn.net/qq_46416934/article/details/123190966<i class=\"fas fa-external-link-alt\"></i></a></p>\n<p>å‘½ä»¤å¤§å…¨ï¼š<a class=\"link\"   href=\"https://www.runoob.com/linux/linux-command-manual.html\" >https://www.runoob.com/linux/linux-command-manual.html<i class=\"fas fa-external-link-alt\"></i></a></p>\n<h2 id=\"ä¸‰ã€ROSå®‰è£…\"><a href=\"#ä¸‰ã€ROSå®‰è£…\" class=\"headerlink\" title=\"ä¸‰ã€ROSå®‰è£…\"></a>ä¸‰ã€ROSå®‰è£…</h2><p>å®‰è£…æ•™ç¨‹<a class=\"link\"   href=\"https://blog.csdn.net/my_id_kt/article/details/123753771\" >https://blog.csdn.net/my_id_kt/article/details/123753771<i class=\"fas fa-external-link-alt\"></i></a></p>\n<p><strong>æ³¨æ„</strong>ï¼šæ ¹æ®Ubuntuç‰ˆæœ¬å®‰è£…æŒ‡å®šç‰ˆæœ¬çš„ROS</p>\n<h2 id=\"å››ã€ROSåŸºç¡€å­¦ä¹ \"><a href=\"#å››ã€ROSåŸºç¡€å­¦ä¹ \" class=\"headerlink\" title=\"å››ã€ROSåŸºç¡€å­¦ä¹ \"></a>å››ã€ROSåŸºç¡€å­¦ä¹ </h2><p>æ¨èå¤æœˆå±…å…¥é—¨è§†é¢‘ï¼Œä»å…¥é—¨è¯¾ç¨‹ä»Linuxå®‰è£…å¼€å§‹è®²èµ·ï¼ŒC++å’ŒPythonéƒ½æœ‰è®²åˆ°ï¼ŒæŒæ¡ä¸€ç§è¯­è¨€å³å¯ï¼š</p>\n<p><a class=\"link\"   href=\"https://www.bilibili.com/video/BV1zt411G7Vn?p=1\" >https://www.bilibili.com/video/BV1zt411G7Vn?p=1<i class=\"fas fa-external-link-alt\"></i></a></p>\n<p><strong>CSDNæ•™ç¨‹</strong>ï¼š</p>\n<p><a class=\"link\"   href=\"https://blog.csdn.net/mbdong/article/details/109310874\" >https://blog.csdn.net/mbdong/article/details/109310874<i class=\"fas fa-external-link-alt\"></i></a></p>\n<p><a class=\"link\"   href=\"https://blog.csdn.net/u011832219/category_10500120.html\" >https://blog.csdn.net/u011832219/category_10500120.html<i class=\"fas fa-external-link-alt\"></i></a></p>\n","site":{"data":{"links":[{"name":"CZMæœ‰ç‚¹å†·","link":"https://czm.cool/","description":"CZMçš„åšå®¢","avatar":"https://img.czm.cool/avatar/avatar.png"},{"name":"PSH","link":"https://shamd.cloud/","description":"PSHçš„åšå®¢.","avatar":"https://shamd.cloud/upload/2022/07/afbb577733f46c9535dd1d6d6388278.jpg"},{"name":"KAI","link":"https://kainote.top/","description":"love artist, love code.","avatar":"https://cdn.jsdelivr.net/gh/kaix2301/pictures/img202201072101018.jpg"}]}},"excerpt":"","more":"<h1 id=\"ROSå…¥é—¨å­¦ä¹ \"><a href=\"#ROSå…¥é—¨å­¦ä¹ \" class=\"headerlink\" title=\"ROSå…¥é—¨å­¦ä¹ \"></a>ROSå…¥é—¨å­¦ä¹ </h1><h2 id=\"ä¸€ã€Ubuntuç¯å¢ƒæ­å»º\"><a href=\"#ä¸€ã€Ubuntuç¯å¢ƒæ­å»º\" class=\"headerlink\" title=\"ä¸€ã€Ubuntuç¯å¢ƒæ­å»º\"></a>ä¸€ã€Ubuntuç¯å¢ƒæ­å»º</h2><p><strong>å»ºè®®ç‰ˆæœ¬</strong>ï¼šUbuntu18.04 or Ubuntu16.04</p>\n<p><strong>å®‰è£…æ–¹æ³•</strong>ï¼šè™šæ‹Ÿæœºå®‰è£…ã€ç¡¬ç›˜å®‰è£…ï¼ˆæ¨èï¼‰</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20220928213527604.png\"\n                      alt=\"image-20220928213527604\"\n                ></p>\n<h3 id=\"æ–¹æ³•ä¸€ï¼šè™šæ‹Ÿæœºå®‰è£…Ubuntu\"><a href=\"#æ–¹æ³•ä¸€ï¼šè™šæ‹Ÿæœºå®‰è£…Ubuntu\" class=\"headerlink\" title=\"æ–¹æ³•ä¸€ï¼šè™šæ‹Ÿæœºå®‰è£…Ubuntu\"></a>æ–¹æ³•ä¸€ï¼šè™šæ‹Ÿæœºå®‰è£…Ubuntu</h3><p><strong>1.è™šæ‹Ÿæœºå®‰è£…</strong>ï¼š<a class=\"link\"   href=\"https://blog.csdn.net/hao5119266/article/details/89198275/\" >https://blog.csdn.net/hao5119266/article/details/89198275/<i class=\"fas fa-external-link-alt\"></i></a></p>\n<p><strong>2.Ubuntué•œåƒä¸‹è½½</strong>ï¼Œæ³¨æ„ï¼šé•œåƒä¸€èˆ¬ä¸º2Gbå·¦å³åç¼€isoçš„æ–‡ä»¶ï¼Œä¸‹è½½desktopç‰ˆæœ¬</p>\n<p>å®˜æ–¹ä¸‹è½½é“¾æ¥ï¼ˆä¸æ¨èï¼‰ï¼š<a class=\"link\"   href=\"https://ubuntu.com/download\" >https://ubuntu.com/download<i class=\"fas fa-external-link-alt\"></i></a></p>\n<p>ä¸­ç§‘å¤§å…ƒï¼š<a class=\"link\"   href=\"http://mirrors.ustc.edu.cn/ubuntu-releases/\" >http://mirrors.ustc.edu.cn/ubuntu-releases/<i class=\"fas fa-external-link-alt\"></i></a></p>\n<p>é˜¿é‡Œäº‘æºï¼š<a class=\"link\"   href=\"https://mirrors.aliyun.com/ubuntu-releases/\" >https://mirrors.aliyun.com/ubuntu-releases/<i class=\"fas fa-external-link-alt\"></i></a></p>\n<p>åŒ—ç†å·¥æºï¼š<a class=\"link\"   href=\"https://mirror.bit.edu.cn/ubuntu-releases/\" >https://mirror.bit.edu.cn/ubuntu-releases/<i class=\"fas fa-external-link-alt\"></i></a></p>\n<p>3.Ubuntuå®‰è£…ï¼š<a class=\"link\"   href=\"https://blog.csdn.net/woshinsy/article/details/124150654\" >https://blog.csdn.net/woshinsy/article/details/124150654<i class=\"fas fa-external-link-alt\"></i></a></p>\n<h3 id=\"æ–¹æ³•äºŒï¼šç¡¬ç›˜å®‰è£…Ubuntuï¼ˆåŒç³»ç»Ÿ\"><a href=\"#æ–¹æ³•äºŒï¼šç¡¬ç›˜å®‰è£…Ubuntuï¼ˆåŒç³»ç»Ÿ\" class=\"headerlink\" title=\"æ–¹æ³•äºŒï¼šç¡¬ç›˜å®‰è£…Ubuntuï¼ˆåŒç³»ç»Ÿ)\"></a>æ–¹æ³•äºŒï¼šç¡¬ç›˜å®‰è£…Ubuntuï¼ˆåŒç³»ç»Ÿ)</h3><p>è°¨æ…æ“ä½œï¼Œæœ€å¥½æœ‰è‡ªå·±å®‰è£…ç³»ç»Ÿçš„ç»éªŒï¼</p>\n<p>æ•™ç¨‹å¦‚ä¸‹ï¼š<a class=\"link\"   href=\"https://blog.csdn.net/weixin_43091381/article/details/108522223##\" >https://blog.csdn.net/weixin_43091381/article/details/108522223##<i class=\"fas fa-external-link-alt\"></i></a></p>\n<h2 id=\"äºŒã€LinuxåŸºæœ¬å‘½ä»¤\"><a href=\"#äºŒã€LinuxåŸºæœ¬å‘½ä»¤\" class=\"headerlink\" title=\"äºŒã€LinuxåŸºæœ¬å‘½ä»¤\"></a>äºŒã€LinuxåŸºæœ¬å‘½ä»¤</h2><p><strong>å¸¸ç”¨æŒ‡ä»¤</strong>ï¼š<a class=\"link\"   href=\"https://blog.csdn.net/qq_46416934/article/details/123190966\" >https://blog.csdn.net/qq_46416934/article/details/123190966<i class=\"fas fa-external-link-alt\"></i></a></p>\n<p>å‘½ä»¤å¤§å…¨ï¼š<a class=\"link\"   href=\"https://www.runoob.com/linux/linux-command-manual.html\" >https://www.runoob.com/linux/linux-command-manual.html<i class=\"fas fa-external-link-alt\"></i></a></p>\n<h2 id=\"ä¸‰ã€ROSå®‰è£…\"><a href=\"#ä¸‰ã€ROSå®‰è£…\" class=\"headerlink\" title=\"ä¸‰ã€ROSå®‰è£…\"></a>ä¸‰ã€ROSå®‰è£…</h2><p>å®‰è£…æ•™ç¨‹<a class=\"link\"   href=\"https://blog.csdn.net/my_id_kt/article/details/123753771\" >https://blog.csdn.net/my_id_kt/article/details/123753771<i class=\"fas fa-external-link-alt\"></i></a></p>\n<p><strong>æ³¨æ„</strong>ï¼šæ ¹æ®Ubuntuç‰ˆæœ¬å®‰è£…æŒ‡å®šç‰ˆæœ¬çš„ROS</p>\n<h2 id=\"å››ã€ROSåŸºç¡€å­¦ä¹ \"><a href=\"#å››ã€ROSåŸºç¡€å­¦ä¹ \" class=\"headerlink\" title=\"å››ã€ROSåŸºç¡€å­¦ä¹ \"></a>å››ã€ROSåŸºç¡€å­¦ä¹ </h2><p>æ¨èå¤æœˆå±…å…¥é—¨è§†é¢‘ï¼Œä»å…¥é—¨è¯¾ç¨‹ä»Linuxå®‰è£…å¼€å§‹è®²èµ·ï¼ŒC++å’ŒPythonéƒ½æœ‰è®²åˆ°ï¼ŒæŒæ¡ä¸€ç§è¯­è¨€å³å¯ï¼š</p>\n<p><a class=\"link\"   href=\"https://www.bilibili.com/video/BV1zt411G7Vn?p=1\" >https://www.bilibili.com/video/BV1zt411G7Vn?p=1<i class=\"fas fa-external-link-alt\"></i></a></p>\n<p><strong>CSDNæ•™ç¨‹</strong>ï¼š</p>\n<p><a class=\"link\"   href=\"https://blog.csdn.net/mbdong/article/details/109310874\" >https://blog.csdn.net/mbdong/article/details/109310874<i class=\"fas fa-external-link-alt\"></i></a></p>\n<p><a class=\"link\"   href=\"https://blog.csdn.net/u011832219/category_10500120.html\" >https://blog.csdn.net/u011832219/category_10500120.html<i class=\"fas fa-external-link-alt\"></i></a></p>\n"},{"title":"flowableé«˜çº§ç¯‡","date":"2022-10-19T15:45:46.000Z","_content":"# flowableé«˜çº§ç¯‡\n> lectureï¼šæ³¢æ³¢è€å¸ˆ\n\n# ä»»åŠ¡åˆ†é…å’Œæµç¨‹å˜é‡\n\n## ä»»åŠ¡åˆ†é…\n\n### å›ºå®šåˆ†é…\n\nå›ºå®šåˆ†é…å°±æ˜¯æˆ‘ä»¬å‰é¢ä»‹ç»çš„ï¼Œåœ¨ç»˜åˆ¶æµç¨‹å›¾æˆ–è€…ç›´æ¥åœ¨æµç¨‹æ–‡ä»¶ä¸­é€šè¿‡Assigneeæ¥æŒ‡å®šçš„æ–¹å¼\n\n![image-20220322205919319](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220322205919319.png)\n\n![image-20220322210018615](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220322210018615.png)\n\n\n\n### è¡¨è¾¾å¼åˆ†é…\n\nFlowableä½¿ç”¨UELè¿›è¡Œè¡¨è¾¾å¼è§£æã€‚UELä»£è¡¨*Unified Expression Language*ï¼Œæ˜¯EE6è§„èŒƒçš„ä¸€éƒ¨åˆ†.Flowableæ”¯æŒä¸¤ç§UELè¡¨è¾¾å¼ï¼š UEL-value å’ŒUEL-method\n\n#### å€¼è¡¨è¾¾å¼\n\n**å€¼è¡¨è¾¾å¼ Value expression**: è§£æä¸ºä¸€ä¸ªå€¼ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œæ‰€æœ‰æµç¨‹å˜é‡éƒ½å¯ä»¥ä½¿ç”¨ã€‚ï¼ˆè‹¥ä½¿ç”¨Springï¼‰æ‰€æœ‰çš„Spring beanä¹Ÿå¯ä»¥ç”¨åœ¨è¡¨è¾¾å¼é‡Œã€‚ä¾‹å¦‚\n\n```txt\n${myVar}\n${myBean.myProperty}\n```\n\næ¡ˆä¾‹è®²è§£ï¼š\n\n![image-20220322212342245](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220322212342245.png)\n\n\n\nå¯ä»¥çœ‹åˆ°é€šè¿‡è¡¨è¾¾å¼å¤„ç†çš„æ•ˆæœ\n\n![image-20220322212431304](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220322212431304.png)\n\n\n\nå…ˆéƒ¨ç½²æµç¨‹ï¼Œç„¶ååœ¨å¯åŠ¨æµç¨‹å®ä¾‹çš„æ—¶å€™ç»‘å®šè¡¨è¾¾å¼å¯¹åº”çš„å€¼\n\n```java\n/**\n     * å¯åŠ¨æµç¨‹å®ä¾‹\n     */\n    @Test\n    public void testRunProcess(){\n\n        // è·å–æµç¨‹å¼•æ“å¯¹è±¡\n        ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine();\n        // å¯åŠ¨æµç¨‹å®ä¾‹é€šè¿‡ RuntimeService å¯¹è±¡\n        RuntimeService runtimeService = processEngine.getRuntimeService();\n        // è®¾ç½® assignee çš„å–å€¼\n        Map<String,Object> variables = new HashMap<>();\n        variables.put(\"assignee0\",\"å¼ ä¸‰\") ;\n        variables.put(\"assignee1\",\"æå››\"); \n        // å¯åŠ¨æµç¨‹å®ä¾‹ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æµç¨‹å®šä¹‰çš„id\n        ProcessInstance processInstance = runtimeService\n                .startProcessInstanceById(\"MyHolidayUI:1:4\", variables);// å¯åŠ¨æµç¨‹å®ä¾‹\n        // è¾“å‡ºç›¸å…³çš„æµç¨‹å®ä¾‹ä¿¡æ¯\n        System.out.println(\"æµç¨‹å®šä¹‰çš„IDï¼š\" + processInstance.getProcessDefinitionId());\n        System.out.println(\"æµç¨‹å®ä¾‹çš„IDï¼š\" + processInstance.getId());\n        System.out.println(\"å½“å‰æ´»åŠ¨çš„IDï¼š\" + processInstance.getActivityId());\n    }\n```\n\nåœ¨æµç¨‹å˜é‡è¡¨ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°å¯¹åº”çš„æµç¨‹å˜é‡ä¿¡æ¯\n\n![image-20220322213558754](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220322213558754.png)\n\nåŒæ—¶åœ¨Taskè¡¨ä¸­ï¼Œå¯ä»¥çœ‹åˆ°æµç¨‹å½“å‰çš„åˆ†é…äººæ˜¯`å¼ ä¸‰`ï¼Œè¯´æ˜UELè¡¨è¾¾å¼è¢«è§£æäº†\n\n![image-20220322213655020](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220322213655020.png)\n\n\n\n\n\n\n\n#### æ–¹æ³•è¡¨è¾¾å¼\n\n**æ–¹æ³•è¡¨è¾¾å¼ Method expression**: è°ƒç”¨ä¸€ä¸ªæ–¹æ³•ï¼Œå¯ä»¥å¸¦æˆ–ä¸å¸¦å‚æ•°ã€‚**å½“è°ƒç”¨ä¸å¸¦å‚æ•°çš„æ–¹æ³•æ—¶ï¼Œè¦ç¡®ä¿åœ¨æ–¹æ³•ååæ·»åŠ ç©ºæ‹¬å·ï¼ˆä»¥é¿å…ä¸å€¼è¡¨è¾¾å¼æ··æ·†ï¼‰ã€‚**ä¼ é€’çš„å‚æ•°å¯ä»¥æ˜¯å­—é¢å€¼(literal value)ï¼Œä¹Ÿå¯ä»¥æ˜¯è¡¨è¾¾å¼ï¼Œå®ƒä»¬ä¼šè¢«è‡ªåŠ¨è§£æã€‚ä¾‹å¦‚ï¼š\n\n```txt\n${printer.print()}\n${myBean.addNewOrder('orderName')}\n${myBean.doSomething(myVar, execution)}\n```\n\nmyBeanæ˜¯Springå®¹å™¨ä¸­çš„ä¸ªBeanå¯¹è±¡ï¼Œè¡¨ç¤ºè°ƒç”¨çš„æ˜¯beançš„addNewOrderæ–¹æ³•\n\n\n\n\n\n### ç›‘å¬å™¨åˆ†é…\n\nå¯ä»¥ä½¿ç”¨ç›‘å¬å™¨æ¥å®Œæˆå¾ˆå¤šFlowableçš„æµç¨‹ä¸šåŠ¡ã€‚\n\næˆ‘ä»¬åœ¨æ­¤å¤„ä½¿ç”¨ç›‘å¬å™¨æ¥å®Œæˆè´Ÿè´£äººçš„æŒ‡å®šï¼Œé‚£ä¹ˆæˆ‘ä»¬åœ¨æµç¨‹è®¾è®¡çš„æ—¶å€™å°±ä¸éœ€è¦æŒ‡å®šassignee\n\nåˆ›å»ºè‡ªå®šä¹‰ç›‘å¬å™¨ï¼š\n\n```java\n/**\n * è‡ªå®šä¹‰çš„ç›‘å¬å™¨\n */\npublic class MyTaskListener implements TaskListener {\n    @Override\n    public void notify(DelegateTask delegateTask) {\n        System.out.println(\"ç›‘å¬å™¨è§¦å‘äº†ï¼š\" + delegateTask.getName());\n        if(\"æäº¤è¯·å‡æµç¨‹\".equals(delegateTask.getName()) &&\n                \"create\".equals(delegateTask.getEventName())){\n            // æŒ‡å®šä»»åŠ¡çš„è´Ÿè´£äºº\n            delegateTask.setAssignee(\"å°æ˜\");\n        }else {\n            delegateTask.setAssignee(\"å°å¼ \");\n        }\n    }\n}\n```\n\n\n\nç„¶ååœ¨FlowableUIä¸­å…³è”å¯¹åº”çš„ç›‘å¬å™¨\n\n```txt\ncreate:ä»»åŠ¡åˆ›å»ºåè§¦å‘\nassignment:ä»»åŠ¡åˆ†é…åè§¦å‘\nDelete:ä»»åŠ¡å®Œæˆåè§¦å‘\nAllï¼šæ‰€æœ‰äº‹ä»¶éƒ½è§¦å‘\n```\n\n\n\n![image-20220322214807416](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220322214807416.png)\n\nç„¶åæˆ‘ä»¬å…ˆéƒ¨ç½²æµç¨‹ï¼Œç„¶åæ‰§è¡ŒæŸ¥çœ‹æ•ˆæœï¼š\n\n![image-20220322215711211](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220322215711211.png)\n\nç„¶ååœ¨Taskè¡¨ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°å¯¹åº”çš„åˆ†é…äººä¸º`å°æ˜`è¯´æ˜é€šè¿‡ç›‘å¬ä¹Ÿå®Œæˆäº†ä»»åŠ¡åˆ†é…çš„å·¥ä½œäº†\n\n![image-20220322215805734](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220322215805734.png)\n\n\n\n\n\n\n\n## æµç¨‹å˜é‡\n\næµç¨‹å®ä¾‹æŒ‰æ­¥éª¤æ‰§è¡Œæ—¶ï¼Œéœ€è¦ä½¿ç”¨ä¸€äº›æ•°æ®ã€‚åœ¨Flowableä¸­ï¼Œè¿™äº›æ•°æ®ç§°ä½œ*å˜é‡(variable)*ï¼Œå¹¶ä¼šå­˜å‚¨åœ¨æ•°æ®åº“ä¸­ã€‚å˜é‡å¯ä»¥ç”¨åœ¨è¡¨è¾¾å¼ä¸­ï¼ˆä¾‹å¦‚åœ¨æ’ä»–ç½‘å…³ä¸­ç”¨äºé€‰æ‹©æ­£ç¡®çš„å‡ºå£è·¯å¾„ï¼‰ï¼Œä¹Ÿå¯ä»¥åœ¨JavaæœåŠ¡ä»»åŠ¡(service task)ä¸­ç”¨äºè°ƒç”¨å¤–éƒ¨æœåŠ¡ï¼ˆä¾‹å¦‚ä¸ºæœåŠ¡è°ƒç”¨æä¾›è¾“å…¥æˆ–ç»“æœå­˜å‚¨ï¼‰ï¼Œç­‰ç­‰ã€‚\n\næµç¨‹å®ä¾‹å¯ä»¥æŒæœ‰å˜é‡ï¼ˆç§°ä½œ*æµç¨‹å˜é‡ process variables*ï¼‰ï¼›ç”¨æˆ·ä»»åŠ¡ä»¥åŠ*æ‰§è¡Œ(executions)*â€”â€”æµç¨‹å½“å‰æ´»åŠ¨èŠ‚ç‚¹çš„æŒ‡é’ˆâ€”â€”ä¹Ÿå¯ä»¥æŒæœ‰å˜é‡ã€‚æµç¨‹å®ä¾‹å¯ä»¥æŒæœ‰ä»»æ„æ•°é‡çš„å˜é‡ï¼Œæ¯ä¸ªå˜é‡å­˜å‚¨ä¸º*ACT_RU_VARIABLE*æ•°æ®åº“è¡¨çš„ä¸€è¡Œã€‚\n\næ‰€æœ‰çš„*startProcessInstanceXXX*æ–¹æ³•éƒ½æœ‰ä¸€ä¸ªå¯é€‰å‚æ•°ï¼Œç”¨äºåœ¨æµç¨‹å®ä¾‹åˆ›å»ºåŠå¯åŠ¨æ—¶è®¾ç½®å˜é‡ã€‚ä¾‹å¦‚ï¼Œåœ¨*RuntimeService*ä¸­ï¼š\n\n```java\nProcessInstance startProcessInstanceByKey(String processDefinitionKey, Map<String, Object> variables);\n```\n\nä¹Ÿå¯ä»¥åœ¨æµç¨‹æ‰§è¡Œä¸­åŠ å…¥å˜é‡ã€‚ä¾‹å¦‚ï¼Œ(*RuntimeService*):\n\n```java\nvoid setVariable(String executionId, String variableName, Object value);\nvoid setVariableLocal(String executionId, String variableName, Object value);\nvoid setVariables(String executionId, Map<String, ? extends Object> variables);\nvoid setVariablesLocal(String executionId, Map<String, ? extends Object> variables);\n```\n\n\n\n![image-20220324095243595](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220324095243595.png)\n\n\n\n### å…¨å±€å˜é‡\n\næµç¨‹å˜é‡çš„é»˜è®¤ä½œç”¨åŸŸæ˜¯æµç¨‹å®ä¾‹ã€‚å½“ä¸€ä¸ªæµç¨‹å˜é‡çš„ä½œç”¨åŸŸä¸ºæµç¨‹å®ä¾‹æ—¶ï¼Œå¯ä»¥ç§°ä¸º global å˜é‡\n\næ³¨æ„ï¼šå¦‚ï¼š    Globalå˜é‡ï¼šuserIdï¼ˆå˜é‡åï¼‰ã€zhangsanï¼ˆå˜é‡å€¼ï¼‰\n\nglobal å˜é‡ä¸­å˜é‡åä¸å…è®¸é‡å¤ï¼Œè®¾ç½®ç›¸åŒåç§°çš„å˜é‡ï¼Œåè®¾ç½®çš„å€¼ä¼šè¦†ç›–å‰è®¾ç½®çš„å˜é‡å€¼ã€‚\n\n### å±€éƒ¨å˜é‡\n\nä»»åŠ¡å’Œæ‰§è¡Œå®ä¾‹ä»…ä»…æ˜¯é’ˆå¯¹ä¸€ä¸ªä»»åŠ¡å’Œä¸€ä¸ªæ‰§è¡Œå®ä¾‹èŒƒå›´ï¼ŒèŒƒå›´æ²¡æœ‰æµç¨‹å®ä¾‹å¤§ï¼Œ ç§°ä¸º local å˜é‡ã€‚\n\nLocal å˜é‡ç”±äºåœ¨ä¸åŒçš„ä»»åŠ¡æˆ–ä¸åŒçš„æ‰§è¡Œå®ä¾‹ä¸­ï¼Œä½œç”¨åŸŸäº’ä¸å½±å“ï¼Œå˜é‡åå¯ä»¥ç›¸åŒæ²¡æœ‰å½±å“ã€‚Local å˜é‡åä¹Ÿå¯ä»¥å’Œ global å˜é‡åç›¸åŒï¼Œæ²¡æœ‰å½±å“ã€‚ \n\n\n\n\n\n### æ¡ˆä¾‹è®²è§£\n\n éœ€æ±‚ï¼šå‘˜å·¥åˆ›å»ºå‡ºå·®ç”³è¯·å•ï¼Œç”±éƒ¨é—¨ç»ç†å®¡æ ¸ï¼Œéƒ¨é—¨ç»ç†ç”³è¯·é€šè¿‡å3å¤©ä»¥ä¸‹ç”±è´¢åŠ¡ç›´æ¥ç”³æ‰¹ï¼Œ3å¤©ä»¥ä¸Šå…ˆç”±æ€»ç»ç†å®¡æ‰¹ï¼Œæ€»ç»ç†å®¡æ‰¹é€šè¿‡åå†ç”±è´¢åŠ¡å®¡æ‰¹ã€‚\n\n\n\n![image-20220324093855618](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220324093855618.png)\n\n\n\nè¿æ¥å…ˆè®¾ç½®æ¡ä»¶\n\n![image-20220324093806442](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220324093806442.png)\n\n\n\n![image-20220324093700631](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220324093700631.png)\n\n\n\n\n\néƒ¨ç½²æµç¨‹\n\n```java\n@Test\npublic void deploy(){\n    ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine();\n    RepositoryService repositoryService = processEngine.getRepositoryService();\n    Deployment deploy = repositoryService.createDeployment()\n        .addClasspathResource(\"å‡ºå·®ç”³è¯·å•.bpmn20.xml\")\n        .name(\"è¯·å‡æµç¨‹...\")\n        .category(\"è¯·å‡\") // åˆ†ç±»\n        .tenantId(\"dpb\") // ç§Ÿæˆ·id\n        .deploy();\n    System.out.println(\"deploy.getId() = \" + deploy.getId());\n    System.out.println(\"deploy.getName() = \" + deploy.getName());\n    System.out.println(\"deploy.getCategory() = \" + deploy.getCategory());\n}\n```\n\n\n\nå¯åŠ¨æµç¨‹å®ä¾‹ï¼šå¹¶ä¸”æŒ‡å®šå…¨å±€æµç¨‹å˜é‡\n\n```java\n/**\n     * åœ¨å¯åŠ¨æµç¨‹å®ä¾‹çš„æ—¶å€™è®¾ç½®æµç¨‹å˜é‡\n     */\n    @Test\n    public void runProcess(){\n        // è·å–æµç¨‹å¼•æ“å¯¹è±¡\n        ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine();\n        // å¯åŠ¨æµç¨‹å®ä¾‹é€šè¿‡ RuntimeService å¯¹è±¡\n        RuntimeService runtimeService = processEngine.getRuntimeService();\n        // è®¾ç½®æµç¨‹å˜é‡\n        Map<String,Object> variables = new HashMap<>();\n        // è®¾ç½®assigneeçš„å–å€¼\n        variables.put(\"assignee0\",\"å¼ ä¸‰\");\n        variables.put(\"assignee1\",\"æå››\");\n        variables.put(\"assignee2\",\"ç‹äº”\");\n        variables.put(\"assignee3\",\"èµµè´¢åŠ¡\");\n        // å¯åŠ¨æµç¨‹å®ä¾‹ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æµç¨‹å®šä¹‰çš„id\n        ProcessInstance processInstance = runtimeService\n                .startProcessInstanceById(\"evection:1:4\",variables);// å¯åŠ¨æµç¨‹å®ä¾‹\n        // è¾“å‡ºç›¸å…³çš„æµç¨‹å®ä¾‹ä¿¡æ¯\n        System.out.println(\"æµç¨‹å®šä¹‰çš„IDï¼š\" + processInstance.getProcessDefinitionId());\n        System.out.println(\"æµç¨‹å®ä¾‹çš„IDï¼š\" + processInstance.getId());\n        System.out.println(\"å½“å‰æ´»åŠ¨çš„IDï¼š\" + processInstance.getActivityId());\n\n    }\n```\n\nå®ŒæˆTaskä»»åŠ¡ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥æŒ‡å®šæµç¨‹å˜é‡\n\n```java\n/**\n     * å®Œæˆä»»åŠ¡æ—¶æŒ‡å®šæµç¨‹å˜é‡\n     */\n    @Test\n    public void completeTask(){\n\n        // è·å–æµç¨‹å¼•æ“å¯¹è±¡\n        ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine();\n        TaskService taskService = processEngine.getTaskService();\n        Task task = taskService.createTaskQuery()\n                .processDefinitionId(\"evection:1:4\")\n                .taskAssignee(\"æå››\")\n                .singleResult();\n        // æ·»åŠ æµç¨‹å˜é‡\n        Map<String, Object> map = task.getProcessVariables();\n        map.put(\"num\",4);\n\n        // å®Œæˆä»»åŠ¡\n        taskService.complete(task.getId(),map);\n    }\n```\n\nå½“ç„¶æˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨å¤„ç†æµç¨‹ä¹‹å¤–é€šè¿‡Taskç¼–å·æ¥ä¿®æ”¹æµç¨‹å˜é‡\n\n```java\n/**\n     * é€šè¿‡å½“å‰ä»»åŠ¡è®¾ç½®\n     */\n    @Test\n    public void currentTask(){\n        //   å½“å‰å¾…åŠä»»åŠ¡id\n        //  è·å–processEngine\n        ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine();\n        TaskService taskService = processEngine.getTaskService();\n        Task task = taskService.createTaskQuery()\n                .processDefinitionId(\"evection:1:4\")\n                .taskAssignee(\"ç‹äº”\")\n                .singleResult();\n        // æ·»åŠ æµç¨‹å˜é‡\n        Map<String, Object> map = task.getProcessVariables();\n        map.put(\"num\",1);\n        //  ä¸€æ¬¡è®¾ç½®å¤šä¸ªå€¼ è®¾ç½®å±€éƒ¨å˜é‡\n        taskService.setVariables(task.getId(), map);\n    }\n```\n\n\n\n\n\n# å€™é€‰äººå’Œå€™é€‰äººç»„\n\nåœ¨æµç¨‹å®šä¹‰ä¸­åœ¨ä»»åŠ¡ç»“ç‚¹çš„ assignee å›ºå®šè®¾ç½®ä»»åŠ¡è´Ÿè´£äººï¼Œåœ¨æµç¨‹å®šä¹‰æ—¶å°†å‚ä¸è€…å›ºå®šè®¾ç½®åœ¨.bpmn æ–‡ä»¶ä¸­ï¼Œå¦‚æœä¸´æ—¶ä»»åŠ¡è´Ÿè´£äººå˜æ›´åˆ™éœ€è¦ä¿®æ”¹æµç¨‹å®šä¹‰ï¼Œç³»ç»Ÿå¯æ‰©å±•æ€§å·®ã€‚é’ˆå¯¹è¿™ç§æƒ…å†µå¯ä»¥ç»™ä»»åŠ¡è®¾ç½®å¤šä¸ªå€™é€‰äººæˆ–è€…å€™é€‰äººç»„ï¼Œå¯ä»¥ä»å€™é€‰äººä¸­é€‰æ‹©å‚ä¸è€…æ¥å®Œæˆä»»åŠ¡ã€‚\n\n## å€™é€‰äºº\n\n### å®šä¹‰æµç¨‹å›¾\n\nå®šä¹‰æµç¨‹å›¾ï¼ŒåŒæ—¶æŒ‡å®šå€™é€‰äººï¼Œå¤šä¸ªå€™é€‰äººä¼šé€šè¿‡`,`è¿æ¥\n\n![image-20220325095959489](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220325095959489.png)\n\n![image-20220325100835461](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220325100835461.png)\n\n\n\n\n\n### éƒ¨ç½²å’Œå¯åŠ¨æµç¨‹å®ä¾‹\n\néƒ¨ç½²æµç¨‹ï¼Œå¹¶ä¸”åœ¨å¯åŠ¨æµç¨‹å®ä¾‹çš„æ—¶å€™å¯¹UELè¡¨è¾¾å¼èµ‹å€¼\n\n```java\n    /**\n     * éƒ¨ç½²æµç¨‹\n     */\n    @Test\n    public void deploy(){\n        ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine();\n        RepositoryService repositoryService = processEngine.getRepositoryService();\n\n        Deployment deploy = repositoryService.createDeployment()\n                .addClasspathResource(\"è¯·å‡æµç¨‹-å€™é€‰äºº.bpmn20.xml\")\n                .name(\"è¯·æ±‚æµç¨‹-å€™é€‰äºº\")\n                .deploy();\n        System.out.println(\"deploy.getId() = \" + deploy.getId());\n        System.out.println(deploy.getName());\n    }\n\n    /**\n     * å¯åŠ¨æµç¨‹å®ä¾‹\n     */\n    @Test\n    public void runProcess(){\n        ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine();\n        RuntimeService runtimeService = processEngine.getRuntimeService();\n        // ç»™æµç¨‹å®šä¹‰ä¸­çš„UELè¡¨è¾¾å¼èµ‹å€¼\n        Map<String,Object> variables = new HashMap<>();\n        variables.put(\"candidate1\",\"å¼ ä¸‰\");\n        variables.put(\"candidate2\",\"æå››\");\n        variables.put(\"candidate3\",\"ç‹äº”\");\n        runtimeService.startProcessInstanceById(\"holiday-candidate:1:4\",variables);\n    }\n```\n\nåœ¨å¯¹åº”çš„è¡¨ç»“æ„ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°æµç¨‹å˜é‡å·²ç»æœ‰äº†ï¼Œä½†æ˜¯å¯¹äºçš„Taskçš„Assigneeè¿˜æ˜¯ä¸ºç©ºã€‚\n\n![image-20220325101054787](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220325101054787.png)\n\n\n\n\n\n![image-20220325102600573](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220325102600573.png)\n\n\n\n\n\n### ä»»åŠ¡çš„æŸ¥è¯¢\n\næ ¹æ®å½“å‰ç™»å½•çš„ç”¨æˆ·ï¼ŒæŸ¥è¯¢å¯¹åº”çš„å€™é€‰ä»»åŠ¡\n\n```java\n   /**\n     * æ ¹æ®ç™»å½•çš„ç”¨æˆ·æŸ¥è¯¢å¯¹åº”çš„å¯ä»¥æ‹¾å–çš„ä»»åŠ¡\n     *\n     */\n    @Test\n    public void queryTaskCandidate(){\n        ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine();\n        TaskService taskService = processEngine.getTaskService();\n        List<Task> list = taskService.createTaskQuery()\n                //.processInstanceId(\"2501\")\n                .processDefinitionId(\"holiday-candidate:1:4\")\n                .taskCandidateUser(\"æå››\") # æ³¨æ„\n                .list();\n        for (Task task : list) {\n            System.out.println(\"task.getId() = \" + task.getId());\n            System.out.println(\"task.getName() = \" + task.getName());\n        }\n    }\n```\n\n\n\n### ä»»åŠ¡çš„æ‹¾å–\n\nçŸ¥é“äº†æˆ‘æœ‰å¯æ‹¾å–çš„ä»»åŠ¡åï¼Œæ‹¾å–ä»»åŠ¡ã€‚\n\n```java\n/**\n     * æ‹¾å–ä»»åŠ¡\n     *    ä¸€ä¸ªå€™é€‰äººæ‹¾å–äº†è¿™ä¸ªä»»åŠ¡ä¹‹åå…¶ä»–çš„ç”¨æˆ·å°±æ²¡æœ‰åŠæ³•æ‹¾å–è¿™ä¸ªä»»åŠ¡äº†\n     *    æ‰€ä»¥å¦‚æœä¸€ä¸ªç”¨æˆ·æ‹¾å–äº†ä»»åŠ¡ä¹‹ååˆä¸æƒ³å¤„ç†äº†ï¼Œé‚£ä¹ˆå¯ä»¥é€€è¿˜\n     */\n    @Test\n    public void claimTaskCandidate(){\n        ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine();\n        TaskService taskService = processEngine.getTaskService();\n        Task task = taskService.createTaskQuery()\n                //.processInstanceId(\"2501\")\n                .processDefinitionId(\"holiday-candidate:1:4\")\n                .taskCandidateUser(\"æå››\")\n                .singleResult();\n        if(task != null){\n            // æ‹¾å–å¯¹åº”çš„ä»»åŠ¡\n            taskService.claim(task.getId(),\"æå››\");\n            System.out.println(\"ä»»åŠ¡æ‹¾å–æˆåŠŸ\");\n        }\n    }\n```\n\n\n\n![image-20220325103624344](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220325103624344.png)\n\n\n\n### ä»»åŠ¡çš„å½’è¿˜\n\næ‹¾å–ä»»åŠ¡åä¸æƒ³æ“ä½œé‚£ä¹ˆå°±å½’è¿˜ä»»åŠ¡\n\n```java\n    /**\n     * é€€è¿˜ä»»åŠ¡\n     *    ä¸€ä¸ªå€™é€‰äººæ‹¾å–äº†è¿™ä¸ªä»»åŠ¡ä¹‹åå…¶ä»–çš„ç”¨æˆ·å°±æ²¡æœ‰åŠæ³•æ‹¾å–è¿™ä¸ªä»»åŠ¡äº†\n     *    æ‰€ä»¥å¦‚æœä¸€ä¸ªç”¨æˆ·æ‹¾å–äº†ä»»åŠ¡ä¹‹ååˆä¸æƒ³å¤„ç†äº†ï¼Œé‚£ä¹ˆå¯ä»¥é€€è¿˜\n     */\n    @Test\n    public void unclaimTaskCandidate(){\n        ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine();\n        TaskService taskService = processEngine.getTaskService();\n        Task task = taskService.createTaskQuery()\n                //.processInstanceId(\"2501\")\n                .processDefinitionId(\"holiday-candidate:1:4\")\n                .taskAssignee(\"å¼ ä¸‰\")\n                .singleResult();\n        if(task != null){\n            // æ‹¾å–å¯¹åº”çš„ä»»åŠ¡\n            taskService.unclaim(task.getId());\n            System.out.println(\"å½’è¿˜æ‹¾å–æˆåŠŸ\");\n        }\n    }\n```\n\n\n\n\n\n### ä»»åŠ¡çš„äº¤æ¥\n\næ‹¾å–ä»»åŠ¡åå¦‚æœä¸æƒ³æ“ä½œä¹Ÿä¸æƒ³å½’è¿˜å¯ä»¥ç›´æ¥äº¤æ¥ç»™å¦å¤–ä¸€ä¸ªäººæ¥å¤„ç†\n\n```java\n   /**\n     * ä»»åŠ¡çš„äº¤æ¥\n     *    å¦‚æœæˆ‘è·å–äº†ä»»åŠ¡ï¼Œä½†æ˜¯ä¸æƒ³æ‰§è¡Œï¼Œé‚£ä¹ˆæˆ‘å¯ä»¥æŠŠè¿™ä¸ªä»»åŠ¡äº¤æ¥ç»™å…¶ä»–çš„ç”¨æˆ·\n     */\n    @Test\n    public void taskCandidate(){\n        ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine();\n        TaskService taskService = processEngine.getTaskService();\n        Task task = taskService.createTaskQuery()\n                //.processInstanceId(\"2501\")\n                .processDefinitionId(\"holiday-candidate:1:4\")\n                .taskAssignee(\"æå››\")\n                .singleResult();\n        if(task != null){\n            // ä»»åŠ¡çš„äº¤æ¥\n            taskService.setAssignee(task.getId(),\"ç‹äº”\");\n            System.out.println(\"ä»»åŠ¡äº¤æ¥ç»™äº†ç‹äº”\");\n        }\n    }\n```\n\n\n\n\n\n### ä»»åŠ¡çš„å®Œæˆ\n\næ­£å¸¸çš„ä»»åŠ¡å¤„ç†\n\n```java\n   /**\n     * å®Œæˆä»»åŠ¡\n     */\n    @Test\n    public void completeTask(){\n        ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine();\n        TaskService taskService = processEngine.getTaskService();\n        Task task = taskService.createTaskQuery()\n                //.processInstanceId(\"2501\")\n                .processDefinitionId(\"holiday-candidate:1:4\")\n                .taskAssignee(\"ç‹äº”\")\n                .singleResult();\n        if(task != null){\n            // å®Œæˆä»»åŠ¡\n            taskService.complete(task.getId());\n            System.out.println(\"å®ŒæˆTask\");\n        }\n    }\n\n```\n\n\n\n\n\n\n\n## å€™é€‰äººç»„\n\nå½“å€™é€‰äººå¾ˆå¤šçš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥åˆ†ç»„æ¥å¤„ç†ã€‚å…ˆåˆ›å»ºç»„ï¼Œç„¶åæŠŠç”¨æˆ·åˆ†é…åˆ°è¿™ä¸ªç»„ä¸­ã€‚\n\n### ç®¡ç†ç”¨æˆ·å’Œç»„\n\n#### ç”¨æˆ·ç®¡ç†\n\næˆ‘ä»¬éœ€è¦å…ˆå•ç‹¬ç»´æŠ¤ç”¨æˆ·ä¿¡æ¯ã€‚åå°å¯¹åº”çš„è¡¨ç»“æ„æ˜¯`ACT_ID_USER`.\n\n```java\n   /**\n     * ç»´æŠ¤ç”¨æˆ·\n     */\n    @Test\n    public void createUser(){\n        ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine();\n        // é€šè¿‡ IdentityService å®Œæˆç›¸å…³çš„ç”¨æˆ·å’Œç»„çš„ç®¡ç†\n        IdentityService identityService = processEngine.getIdentityService();\n        User user = identityService.newUser(\"ç”°ä½³\");\n        user.setFirstName(\"ç”°\");\n        user.setLastName(\"jia\");\n        user.setEmail(\"tianjia@qq.com\");\n        identityService.saveUser(user);\n    }\n```\n\n\n\n![image-20220325110324815](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220325110324815.png)\n\n\n\n#### Groupç®¡ç†\n\nç»´æŠ¤å¯¹åº”çš„Groupä¿¡æ¯ï¼Œåå°å¯¹åº”çš„è¡¨ç»“æ„æ˜¯`ACT_ID_GROUP`\n\n```java\n    /**\n     * åˆ›å»ºç”¨æˆ·ç»„\n     */\n    @Test\n    public void createGroup(){\n        ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine();\n        IdentityService identityService = processEngine.getIdentityService();\n        // åˆ›å»ºGroupå¯¹è±¡å¹¶æŒ‡å®šç›¸å…³çš„ä¿¡æ¯\n        Group group = identityService.newGroup(\"group2\");\n        group.setName(\"å¼€å‘éƒ¨\");\n        group.setType(\"type1\");\n        // åˆ›å»ºGroupå¯¹åº”çš„è¡¨ç»“æ„æ•°æ®\n        identityService.saveGroup(group);\n\n    }\n```\n\n![image-20220325110408435](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220325110408435.png)\n\n\n\n#### ç”¨æˆ·åˆ†é…ç»„\n\nç”¨æˆ·å’Œç»„æ˜¯ä¸€ä¸ªå¤šå¯¹å¤šçš„å…³è”å…³è”ï¼Œæˆ‘ä»¬éœ€è¦åšç›¸å…³çš„åˆ†é…ï¼Œåå°å¯¹åº”çš„è¡¨ç»“æ„æ˜¯`ACT_ID_MEMBERSHIP`\n\n```java\n    /**\n     * å°†ç”¨æˆ·åˆ†é…ç»™å¯¹åº”çš„Group\n     */\n    @Test\n    public void userGroup(){\n        ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine();\n        IdentityService identityService = processEngine.getIdentityService();\n        // æ ¹æ®ç»„çš„ç¼–å·æ‰¾åˆ°å¯¹åº”çš„Groupå¯¹è±¡\n        Group group = identityService.createGroupQuery().groupId(\"group1\").singleResult();\n        List<User> list = identityService.createUserQuery().list();\n        for (User user : list) {\n            // å°†ç”¨æˆ·åˆ†é…ç»™å¯¹åº”çš„ç»„\n            identityService.createMembership(user.getId(),group.getId());\n        }\n    }\n```\n\n\n\n![image-20220325110511848](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220325110511848.png)\n\n\n\n\n\n### å€™é€‰äººç»„åº”ç”¨\n\nææ¸…æ¥šäº†ç”¨æˆ·å’Œç”¨æˆ·ç»„çš„å…³ç³»åæˆ‘ä»¬å°±å¯ä»¥æ¥ä½¿ç”¨å€™é€‰äººç»„çš„åº”ç”¨äº†\n\n#### åˆ›å»ºæµç¨‹å›¾\n\n![image-20220325111013641](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220325111013641.png)\n\n\n\n![image-20220325110952527](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220325110952527.png)\n\n\n\n\n\n\n\n#### æµç¨‹çš„éƒ¨ç½²è¿è¡Œ\n\nç„¶åæˆ‘ä»¬æŠŠæµç¨‹éƒ¨ç½²å’Œè¿è¡Œï¼Œæ³¨æ„å¯¹UELè¡¨è¾¾å¼èµ‹å€¼ï¼Œå…³è”ä¸ŠGroup\n\n```java\n/**\n     * éƒ¨ç½²æµç¨‹\n     */\n    @Test\n    public void deploy(){\n        ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine();\n        RepositoryService repositoryService = processEngine.getRepositoryService();\n\n        Deployment deploy = repositoryService.createDeployment()\n                .addClasspathResource(\"è¯·å‡æµç¨‹-å€™é€‰äººç»„.bpmn20.xml\")\n                .name(\"è¯·æ±‚æµç¨‹-å€™é€‰äºº\")\n                .deploy();\n        System.out.println(\"deploy.getId() = \" + deploy.getId());\n        System.out.println(deploy.getName());\n    }\n\n    /**\n     * å¯åŠ¨æµç¨‹å®ä¾‹\n     */\n    @Test\n    public void runProcess(){\n        ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine();\n        IdentityService identityService = processEngine.getIdentityService();\n        Group group = identityService.createGroupQuery().groupId(\"group1\").singleResult();\n        RuntimeService runtimeService = processEngine.getRuntimeService();\n        // ç»™æµç¨‹å®šä¹‰ä¸­çš„UELè¡¨è¾¾å¼èµ‹å€¼\n        Map<String,Object> variables = new HashMap<>();\n        // variables.put(\"g1\",\"group1\");\n        variables.put(\"g1\",group.getId()); // ç»™æµç¨‹å®šä¹‰ä¸­çš„UELè¡¨è¾¾å¼èµ‹å€¼\n        runtimeService.startProcessInstanceById(\"holiday-group:1:17504\",variables);\n    }\n```\n\nå¯¹åº”è¡¨ç»“æ„ä¸­å°±æœ‰å¯¹åº”çš„ä½“ç°\n\n![image-20220325112545719](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220325112545719.png)\n\n\n\n\n\n#### ä»»åŠ¡çš„æ‹¾å–å’Œå®Œæˆ\n\nç„¶åå®Œæˆä»»åŠ¡çš„æŸ¥è¯¢æ‹¾å–å’Œå¤„ç†æ“ä½œ\n\n```java\n/**\n     * æ ¹æ®ç™»å½•çš„ç”¨æˆ·æŸ¥è¯¢å¯¹åº”çš„å¯ä»¥æ‹¾å–çš„ä»»åŠ¡\n     *\n     */\n    @Test\n    public void queryTaskCandidateGroup(){\n        ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine();\n        // æ ¹æ®å½“å‰ç™»å½•çš„ç”¨æˆ·æ‰¾åˆ°å¯¹åº”çš„ç»„\n        IdentityService identityService = processEngine.getIdentityService();\n        // å½“å‰ç”¨æˆ·æ‰€åœ¨çš„ç»„\n        Group group = identityService.createGroupQuery().groupMember(\"é‚“å½ª\").singleResult();\n\n        TaskService taskService = processEngine.getTaskService();\n        List<Task> list = taskService.createTaskQuery()\n                //.processInstanceId(\"2501\")\n                .processDefinitionId(\"holiday-group:1:17504\")\n                .taskCandidateGroup(group.getId())\n                .list();\n        for (Task task : list) {\n            System.out.println(\"task.getId() = \" + task.getId());\n            System.out.println(\"task.getName() = \" + task.getName());\n        }\n    }\n\n    /**\n     * æ‹¾å–ä»»åŠ¡\n     *    ä¸€ä¸ªå€™é€‰äººæ‹¾å–äº†è¿™ä¸ªä»»åŠ¡ä¹‹åå…¶ä»–çš„ç”¨æˆ·å°±æ²¡æœ‰åŠæ³•æ‹¾å–è¿™ä¸ªä»»åŠ¡äº†\n     *    æ‰€ä»¥å¦‚æœä¸€ä¸ªç”¨æˆ·æ‹¾å–äº†ä»»åŠ¡ä¹‹ååˆä¸æƒ³å¤„ç†äº†ï¼Œé‚£ä¹ˆå¯ä»¥é€€è¿˜\n     */\n    @Test\n    public void claimTaskCandidate(){\n        String userId = \"ç”°ä½³\";\n        ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine();\n        // æ ¹æ®å½“å‰ç™»å½•çš„ç”¨æˆ·æ‰¾åˆ°å¯¹åº”çš„ç»„\n        IdentityService identityService = processEngine.getIdentityService();\n        // å½“å‰ç”¨æˆ·æ‰€åœ¨çš„ç»„\n        Group group = identityService.createGroupQuery().groupMember(userId).singleResult();\n        TaskService taskService = processEngine.getTaskService();\n        Task task = taskService.createTaskQuery()\n                //.processInstanceId(\"2501\")\n                .processDefinitionId(\"holiday-group:1:17504\")\n                .taskCandidateGroup(group.getId())\n                .singleResult();\n        if(task != null) {\n            // ä»»åŠ¡æ‹¾å–\n            taskService.claim(task.getId(),userId);\n            System.out.println(\"ä»»åŠ¡æ‹¾å–æˆåŠŸ\");\n        }\n    }  \n   /**\n     * å®Œæˆä»»åŠ¡\n     */\n    @Test\n    public void completeTask(){\n        ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine();\n        TaskService taskService = processEngine.getTaskService();\n        Task task = taskService.createTaskQuery()\n                //.processInstanceId(\"2501\")\n                .processDefinitionId(\"holiday-group:1:17504\")\n                .taskAssignee(\"é‚“å½ª\")\n                .singleResult();\n        if(task != null){\n            // å®Œæˆä»»åŠ¡\n            taskService.complete(task.getId());\n            System.out.println(\"å®ŒæˆTask\");\n        }\n    }\n```\n\n\n\n\n\n# ç½‘å…³\n\nç½‘å…³ç”¨æ¥æ§åˆ¶æµç¨‹çš„æµå‘\n\n## æ’ä»–ç½‘å…³\n\næ’ä»–ç½‘å…³ï¼ˆexclusive gatewayï¼‰ï¼ˆä¹Ÿå«*å¼‚æˆ–ç½‘å…³ XOR gateway*ï¼Œæˆ–è€…æ›´ä¸“ä¸šçš„ï¼Œ*åŸºäºæ•°æ®çš„æ’ä»–ç½‘å…³ exclusive data-based gateway*ï¼‰ï¼Œç”¨äºå¯¹æµç¨‹ä¸­çš„**å†³ç­–**å»ºæ¨¡ã€‚å½“æ‰§è¡Œåˆ°è¾¾è¿™ä¸ªç½‘å…³æ—¶ï¼Œä¼šæŒ‰ç…§æ‰€æœ‰å‡ºå£é¡ºåºæµå®šä¹‰çš„é¡ºåºå¯¹å®ƒä»¬è¿›è¡Œè®¡ç®—ã€‚é€‰æ‹©ç¬¬ä¸€ä¸ªæ¡ä»¶è®¡ç®—ä¸ºtrueçš„é¡ºåºæµï¼ˆå½“æ²¡æœ‰è®¾ç½®æ¡ä»¶æ—¶ï¼Œè®¤ä¸ºé¡ºåºæµä¸º*true*ï¼‰ç»§ç»­æµç¨‹ã€‚\n\n**è¯·æ³¨æ„è¿™é‡Œå‡ºå£é¡ºåºæµçš„å«ä¹‰ä¸BPMN 2.0ä¸­çš„ä¸€èˆ¬æƒ…å†µä¸ä¸€æ ·ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œä¼šé€‰æ‹©æ‰€æœ‰æ¡ä»¶è®¡ç®—ä¸ºtrueçš„é¡ºåºæµï¼Œå¹¶è¡Œæ‰§è¡Œã€‚è€Œä½¿ç”¨æ’ä»–ç½‘å…³æ—¶ï¼Œåªä¼šé€‰æ‹©ä¸€æ¡é¡ºåºæµã€‚å½“å¤šæ¡é¡ºåºæµçš„æ¡ä»¶éƒ½è®¡ç®—ä¸ºtrueæ—¶ï¼Œä¼šä¸”ä»…ä¼šé€‰æ‹©åœ¨XMLä¸­æœ€å…ˆå®šä¹‰çš„é¡ºåºæµç»§ç»­æµç¨‹ã€‚å¦‚æœæ²¡æœ‰å¯é€‰çš„é¡ºåºæµï¼Œä¼šæŠ›å‡ºå¼‚å¸¸ã€‚**\n\nå›¾ç¤º\n\næ’ä»–ç½‘å…³ç”¨å†…éƒ¨å¸¦æœ‰â€™Xâ€™å›¾æ ‡çš„æ ‡å‡†ç½‘å…³ï¼ˆè±å½¢ï¼‰è¡¨ç¤ºï¼Œ'Xâ€™å›¾æ ‡ä»£è¡¨*å¼‚æˆ–*çš„å«ä¹‰ã€‚è¯·æ³¨æ„å†…éƒ¨æ²¡æœ‰å›¾æ ‡çš„ç½‘å…³é»˜è®¤ä¸ºæ’ä»–ç½‘å…³ã€‚BPMN 2.0è§„èŒƒä¸å…è®¸åœ¨åŒä¸€ä¸ªæµç¨‹ä¸­æ··åˆä½¿ç”¨æœ‰åŠæ²¡æœ‰Xçš„è±å½¢æ ‡å¿—ã€‚\n\n![image-20220326100630908](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220326100630908.png)\n\n\n\næ¡ˆä¾‹ï¼š\n\n![image-20220326103951903](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220326103951903.png)\n\n\n\n```java\n   /**\n     * éƒ¨ç½²æµç¨‹\n     */\n    @Test\n    public void deploy(){\n        ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine();\n        RepositoryService repositoryService = processEngine.getRepositoryService();\n\n        Deployment deploy = repositoryService.createDeployment()\n                .addClasspathResource(\"è¯·å‡æµç¨‹-æ’ä»–ç½‘å…³.bpmn20.xml\")\n                .name(\"è¯·æ±‚æµç¨‹-æ’ä»–ç½‘å…³\")\n                .deploy();\n        System.out.println(\"deploy.getId() = \" + deploy.getId());\n        System.out.println(deploy.getName());\n    }\n\n    /**\n     * å¯åŠ¨æµç¨‹å®ä¾‹\n     */\n    @Test\n    public void runProcess(){\n        ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine();\n        RuntimeService runtimeService = processEngine.getRuntimeService();\n        // ç»™æµç¨‹å®šä¹‰ä¸­çš„UELè¡¨è¾¾å¼èµ‹å€¼\n        Map<String,Object> variables = new HashMap<>();\n        // variables.put(\"g1\",\"group1\");\n        variables.put(\"num\",3); // ç»™æµç¨‹å®šä¹‰ä¸­çš„UELè¡¨è¾¾å¼èµ‹å€¼\n        runtimeService.startProcessInstanceById(\"holiday-exclusive:1:4\",variables);\n    }\n\n\n    /**\n     * å¯åŠ¨æµç¨‹å®ä¾‹\n     */\n    @Test\n    public void setVariables(){\n        ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine();\n        RuntimeService runtimeService = processEngine.getRuntimeService();\n        // ç»™æµç¨‹å®šä¹‰ä¸­çš„UELè¡¨è¾¾å¼èµ‹å€¼\n        Map<String,Object> variables = new HashMap<>();\n        // variables.put(\"g1\",\"group1\");\n        variables.put(\"num\",4); // ç»™æµç¨‹å®šä¹‰ä¸­çš„UELè¡¨è¾¾å¼èµ‹å€¼\n        runtimeService.setVariables(\"12503\",variables);\n    }\n\n\n\n    /**\n     * å®Œæˆä»»åŠ¡\n     */\n    @Test\n    public void completeTask(){\n        ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine();\n        TaskService taskService = processEngine.getTaskService();\n        Task task = taskService.createTaskQuery()\n                //.processInstanceId(\"2501\")\n                .processDefinitionId(\"holiday-exclusive:1:4\")\n                .taskAssignee(\"zhangsan\")\n                .singleResult();\n        if(task != null){\n            // å®Œæˆä»»åŠ¡\n            taskService.complete(task.getId());\n            System.out.println(\"å®ŒæˆTask\");\n        }\n    }\n```\n\n\n\n\n\nå¦‚æœä»ç½‘å…³å‡ºå»çš„çº¿æ‰€æœ‰æ¡ä»¶éƒ½ä¸æ»¡è¶³çš„æƒ…å†µä¸‹ä¼šæŠ›å‡ºç³»ç»Ÿå¼‚å¸¸ï¼Œ\n\n![image-20220326104744181](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220326104744181.png)\n\n\n\nä½†æ˜¯è¦æ³¨æ„ä»»åŠ¡æ²¡æœ‰ä»‹ç»ï¼Œè¿˜æ˜¯åŸæ¥çš„ä»»åŠ¡ï¼Œæˆ‘ä»¬å¯ä»¥é‡ç½®æµç¨‹å˜é‡\n\n```java\n    @Test\n    public void setVariables(){\n        ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine();\n        RuntimeService runtimeService = processEngine.getRuntimeService();\n        // ç»™æµç¨‹å®šä¹‰ä¸­çš„UELè¡¨è¾¾å¼èµ‹å€¼\n        Map<String,Object> variables = new HashMap<>();\n        // variables.put(\"g1\",\"group1\");\n        variables.put(\"num\",4); // ç»™æµç¨‹å®šä¹‰ä¸­çš„UELè¡¨è¾¾å¼èµ‹å€¼\n        runtimeService.setVariables(\"12503\",variables);\n    }\n```\n\n\n\n\n\nå‰é¢æˆ‘ä»¬å¯ä»¥ç›´æ¥åœ¨è¿æ¥çº¿ä¸Šå®šä¹‰æ¡ä»¶ï¼Œé‚£ä¸ºä»€ä¹ˆè¿˜è¦æœ‰æ’ä»–ç½‘å…³å‘¢ï¼Ÿç›´æ¥åœ¨çº¿ä¸Šçš„æƒ…å†µï¼Œå¦‚æœæ¡ä»¶éƒ½ä¸æ»¡è¶³ï¼Œæµç¨‹å°±ç»“æŸäº†ï¼Œæ˜¯å¼‚å¸¸ç»“æŸ!!\n\n## å¹¶è¡Œç½‘å…³\n\nå¹¶è¡Œç½‘å…³å…è®¸å°†æµç¨‹åˆ†æˆå¤šæ¡åˆ†æ”¯ï¼Œä¹Ÿå¯ä»¥æŠŠå¤šæ¡åˆ†æ”¯æ±‡èšåˆ°ä¸€èµ·ï¼Œå¹¶è¡Œç½‘å…³çš„åŠŸèƒ½æ˜¯åŸºäºè¿›å…¥å’Œå¤–å‡ºé¡ºåºæµçš„ï¼š\n\n* forkåˆ†æ”¯ï¼šå¹¶è¡Œåçš„æ‰€æœ‰å¤–å‡ºé¡ºåºæµï¼Œä¸ºæ¯ä¸ªé¡ºåºæµéƒ½åˆ›å»ºä¸€ä¸ªå¹¶å‘åˆ†æ”¯ã€‚\n\n* joinæ±‡èšï¼š æ‰€æœ‰åˆ°è¾¾å¹¶è¡Œç½‘å…³ï¼Œåœ¨æ­¤ç­‰å¾…çš„è¿›å…¥åˆ†æ”¯ï¼Œ ç›´åˆ°æ‰€æœ‰è¿›å…¥é¡ºåºæµçš„åˆ†æ”¯éƒ½åˆ°è¾¾ä»¥åï¼Œ æµç¨‹å°±ä¼šé€šè¿‡æ±‡èšç½‘å…³ã€‚\n\næ³¨æ„ï¼Œå¦‚æœåŒä¸€ä¸ªå¹¶è¡Œç½‘å…³æœ‰å¤šä¸ªè¿›å…¥å’Œå¤šä¸ªå¤–å‡ºé¡ºåºæµï¼Œ å®ƒå°±åŒæ—¶å…·æœ‰åˆ†æ”¯å’Œæ±‡èšåŠŸèƒ½ã€‚ è¿™æ—¶ï¼Œç½‘å…³ä¼šå…ˆæ±‡èšæ‰€æœ‰è¿›å…¥çš„é¡ºåºæµï¼Œç„¶åå†åˆ‡åˆ†æˆå¤šä¸ªå¹¶è¡Œåˆ†æ”¯ã€‚\n\n**ä¸å…¶ä»–ç½‘å…³çš„ä¸»è¦åŒºåˆ«æ˜¯ï¼Œå¹¶è¡Œç½‘å…³ä¸ä¼šè§£ææ¡ä»¶ã€‚** **å³ä½¿é¡ºåºæµä¸­å®šä¹‰äº†æ¡ä»¶ï¼Œä¹Ÿä¼šè¢«å¿½ç•¥ã€‚**\n\n\n\næ¡ˆä¾‹ï¼š\n\n![image-20220326110341232](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220326110341232.png)\n\nå½“æˆ‘ä»¬æ‰§è¡Œäº†åˆ›å»ºè¯·å‡å•åï¼Œåˆ°å¹¶è¡Œç½‘å…³çš„ä½ç½®çš„æ—¶å€™ï¼Œåœ¨ACT_RU_TASKè¡¨ä¸­å°±æœ‰ä¸¤æ¡è®°å½•\n\n![image-20220326111359504](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220326111359504.png)\n\nç„¶ååŒæ—¶åœ¨ACT_RU_EXECUTIONä¸­æœ‰ä¸‰æ¡è®°å½•ï¼Œä¸€ä¸ªä»»åŠ¡å¯¹åº”çš„æœ‰ä¸¤ä¸ªæ‰§è¡Œå®ä¾‹\n\n![image-20220326111453630](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220326111453630.png)\n\n\n\n\n\n\n\n## åŒ…å«ç½‘å…³\n\nåŒ…å«ç½‘å…³å¯ä»¥çœ‹åšæ˜¯æ’ä»–ç½‘å…³å’Œå¹¶è¡Œç½‘å…³çš„ç»“åˆä½“ã€‚ å’Œæ’ä»–ç½‘å…³ä¸€æ ·ï¼Œä½ å¯ä»¥åœ¨å¤–å‡ºé¡ºåºæµä¸Šå®šä¹‰æ¡ä»¶ï¼ŒåŒ…å«ç½‘å…³ä¼šè§£æå®ƒä»¬ã€‚ ä½†æ˜¯ä¸»è¦çš„åŒºåˆ«æ˜¯åŒ…å«ç½‘å…³å¯ä»¥é€‰æ‹©å¤šäºä¸€æ¡é¡ºåºæµï¼Œè¿™å’Œå¹¶è¡Œç½‘å…³ä¸€æ ·ã€‚\n\nåŒ…å«ç½‘å…³çš„åŠŸèƒ½æ˜¯åŸºäºè¿›å…¥å’Œå¤–å‡ºé¡ºåºæµçš„ï¼š\n\n* åˆ†æ”¯ï¼š æ‰€æœ‰å¤–å‡ºé¡ºåºæµçš„æ¡ä»¶éƒ½ä¼šè¢«è§£æï¼Œç»“æœä¸ºtrueçš„é¡ºåºæµä¼šä»¥å¹¶è¡Œæ–¹å¼ç»§ç»­æ‰§è¡Œï¼Œ ä¼šä¸ºæ¯ä¸ªé¡ºåºæµåˆ›å»ºä¸€ä¸ªåˆ†æ”¯ã€‚\n\n* æ±‡èšï¼šæ‰€æœ‰å¹¶è¡Œåˆ†æ”¯åˆ°è¾¾åŒ…å«ç½‘å…³ï¼Œä¼šè¿›å…¥ç­‰å¾…çŠ¶æ€ï¼Œ ç›´åˆ°æ¯ä¸ªåŒ…å«æµç¨‹tokençš„è¿›å…¥é¡ºåºæµçš„åˆ†æ”¯éƒ½åˆ°è¾¾ã€‚ è¿™æ˜¯ä¸å¹¶è¡Œç½‘å…³çš„æœ€å¤§ä¸åŒã€‚æ¢å¥è¯è¯´ï¼ŒåŒ…å«ç½‘å…³åªä¼šç­‰å¾…è¢«é€‰ä¸­æ‰§è¡Œäº†çš„è¿›å…¥é¡ºåºæµã€‚ åœ¨æ±‡èšä¹‹åï¼Œæµç¨‹ä¼šç©¿è¿‡åŒ…å«ç½‘å…³ç»§ç»­æ‰§è¡Œã€‚\n\n\n\n![image-20220326112720089](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220326112720089.png)\n\n\n\n\n\n## äº‹ä»¶ç½‘å…³\n\näº‹ä»¶ç½‘å…³å…è®¸æ ¹æ®äº‹ä»¶åˆ¤æ–­æµå‘ã€‚ç½‘å…³çš„æ¯ä¸ªå¤–å‡ºé¡ºåºæµéƒ½è¦è¿æ¥åˆ°ä¸€ä¸ªä¸­é—´æ•è·äº‹ä»¶ã€‚ å½“æµç¨‹åˆ°è¾¾ä¸€ä¸ªåŸºäºäº‹ä»¶ç½‘å…³ï¼Œç½‘å…³ä¼šè¿›å…¥ç­‰å¾…çŠ¶æ€ï¼šä¼šæš‚åœæ‰§è¡Œã€‚ä¸æ­¤åŒæ—¶ï¼Œä¼šä¸ºæ¯ä¸ªå¤–å‡ºé¡ºåºæµåˆ›å»ºç›¸å¯¹çš„äº‹ä»¶è®¢é˜…ã€‚\n\näº‹ä»¶ç½‘å…³çš„å¤–å‡ºé¡ºåºæµå’Œæ™®é€šé¡ºåºæµä¸åŒï¼Œè¿™äº›é¡ºåºæµä¸ä¼šçœŸçš„\"æ‰§è¡Œ\"ï¼Œ ç›¸åå®ƒä»¬è®©æµç¨‹å¼•æ“å»å†³å®šæ‰§è¡Œåˆ°äº‹ä»¶ç½‘å…³çš„æµç¨‹éœ€è¦è®¢é˜…å“ªäº›äº‹ä»¶ã€‚ è¦è€ƒè™‘ä»¥ä¸‹æ¡ä»¶ï¼š\n\n1. äº‹ä»¶ç½‘å…³å¿…é¡»æœ‰ä¸¤æ¡æˆ–ä»¥ä¸Šå¤–å‡ºé¡ºåºæµï¼›\n2. äº‹ä»¶ç½‘å…³åï¼Œåªèƒ½ä½¿ç”¨intermediateCatchEventç±»å‹ï¼ˆactivitiä¸æ”¯æŒåŸºäºäº‹ä»¶ç½‘å…³åè¿æ¥ReceiveTaskï¼‰\n3. è¿æ¥åˆ°äº‹ä»¶ç½‘å…³çš„ä¸­é—´æ•è·äº‹ä»¶å¿…é¡»åªæœ‰ä¸€ä¸ªå…¥å£é¡ºåºæµã€‚ \n\n\n\n\n\n# äº‹ä»¶\n\näº‹ä»¶ï¼ˆeventï¼‰é€šå¸¸ç”¨äºä¸ºæµç¨‹ç”Ÿå‘½å‘¨æœŸä¸­å‘ç”Ÿçš„äº‹æƒ…å»ºæ¨¡ã€‚äº‹ä»¶æ€»æ˜¯å›¾å½¢åŒ–ä¸ºåœ†åœˆã€‚åœ¨BPMN 2.0ä¸­ï¼Œæœ‰ä¸¤ç§ä¸»è¦çš„äº‹ä»¶åˆ†ç±»ï¼š*æ•è·ï¼ˆcatchingï¼‰*ä¸*æŠ›å‡ºï¼ˆthrowingï¼‰*äº‹ä»¶ã€‚\n\n- **æ•è·:** å½“æµç¨‹æ‰§è¡Œåˆ°è¾¾è¿™ä¸ªäº‹ä»¶æ—¶ï¼Œä¼šç­‰å¾…ç›´åˆ°è§¦å‘å™¨åŠ¨ä½œã€‚è§¦å‘å™¨çš„ç±»å‹ç”±å…¶ä¸­çš„å›¾æ ‡ï¼Œæˆ–è€…è¯´XMLä¸­çš„ç±»å‹å£°æ˜è€Œå®šä¹‰ã€‚æ•è·äº‹ä»¶ä¸æŠ›å‡ºäº‹ä»¶æ˜¾ç¤ºä¸Šçš„åŒºåˆ«ï¼Œæ˜¯å…¶å†…éƒ¨çš„å›¾æ ‡æ²¡æœ‰å¡«å……ï¼ˆå³æ˜¯ç™½è‰²çš„ï¼‰ã€‚\n- **æŠ›å‡º:** å½“æµç¨‹æ‰§è¡Œåˆ°è¾¾è¿™ä¸ªäº‹ä»¶æ—¶ï¼Œä¼šè§¦å‘ä¸€ä¸ªè§¦å‘å™¨ã€‚è§¦å‘å™¨çš„ç±»å‹ï¼Œç”±å…¶ä¸­çš„å›¾æ ‡ï¼Œæˆ–è€…è¯´XMLä¸­çš„ç±»å‹å£°æ˜è€Œå®šä¹‰ã€‚æŠ›å‡ºäº‹ä»¶ä¸æ•è·äº‹ä»¶æ˜¾ç¤ºä¸Šçš„åŒºåˆ«ï¼Œæ˜¯å…¶å†…éƒ¨çš„å›¾æ ‡å¡«å……ä¸ºé»‘è‰²ã€‚\n\n\n\n## å®šæ—¶äº‹ä»¶\n\nå®šæ—¶è§¦å‘çš„ç›¸å…³äº‹ä»¶ï¼ŒåŒ…æ‹¬å®šæ—¶å™¨å¯åŠ¨äº‹ä»¶ï¼Œå®šæ—¶å™¨æ•è·ä¸­é—´ä»¶äº‹ä»¶ï¼Œå®šæ—¶å™¨è¾¹ç•Œäº‹ä»¶\n\n### å®šæ—¶å™¨å¯åŠ¨äº‹ä»¶\n\nå®šæ—¶å™¨å¯åŠ¨äº‹ä»¶ï¼ˆtimer start eventï¼‰åœ¨æŒ‡å®šæ—¶é—´åˆ›å»ºæµç¨‹å®ä¾‹ã€‚åœ¨æµç¨‹åªéœ€è¦å¯åŠ¨ä¸€æ¬¡ï¼Œæˆ–è€…æµç¨‹éœ€è¦åœ¨ç‰¹å®šçš„æ—¶é—´é—´éš”é‡å¤å¯åŠ¨æ—¶ï¼Œéƒ½å¯ä»¥ä½¿ç”¨ã€‚\n\n***è¯·æ³¨æ„**ï¼š*å­æµç¨‹ä¸èƒ½æœ‰å®šæ—¶å™¨å¯åŠ¨äº‹ä»¶ã€‚\n\n***è¯·æ³¨æ„**ï¼š*å®šæ—¶å™¨å¯åŠ¨äº‹ä»¶ï¼Œåœ¨æµç¨‹éƒ¨ç½²çš„åŒæ—¶å°±å¼€å§‹è®¡æ—¶ã€‚ä¸éœ€è¦è°ƒç”¨startProcessInstanceByXXXå°±ä¼šåœ¨æ—¶é—´å¯åŠ¨ã€‚è°ƒç”¨startProcessInstanceByXXXæ—¶ä¼šåœ¨å®šæ—¶å¯åŠ¨ä¹‹å¤–é¢å¤–å¯åŠ¨ä¸€ä¸ªæµç¨‹ã€‚\n\n***è¯·æ³¨æ„**ï¼š*å½“éƒ¨ç½²å¸¦æœ‰å®šæ—¶å™¨å¯åŠ¨äº‹ä»¶çš„æµç¨‹çš„æ›´æ–°ç‰ˆæœ¬æ—¶ï¼Œä¸Šä¸€ç‰ˆæœ¬çš„å®šæ—¶å™¨ä½œä¸šä¼šè¢«ç§»é™¤ã€‚è¿™æ˜¯å› ä¸ºé€šå¸¸å¹¶ä¸å¸Œæœ›æ—§ç‰ˆæœ¬çš„æµç¨‹ä»ç„¶è‡ªåŠ¨å¯åŠ¨æ–°çš„æµç¨‹å®ä¾‹ã€‚\n\nå®šæ—¶å™¨å¯åŠ¨äº‹ä»¶ï¼Œç”¨å…¶ä¸­æœ‰ä¸€ä¸ªé’Ÿè¡¨å›¾æ ‡çš„åœ†åœˆæ¥è¡¨ç¤ºã€‚\n\n![image-20220327223547656](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220327223547656.png)\n\næ¡ˆä¾‹ï¼š\n\n![image-20220327231015715](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220327231015715.png)\n\nåœ¨å®šæ—¶å¯åŠ¨çš„èŠ‚ç‚¹è®¾ç½®æ—¶é—´ï¼š\n\n![image-20220327231055237](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220327231055237.png)\n\nå¯ä»¥é€šè¿‡FlowableUIä¸­çš„éƒ¨ç½²æ¥æ¼”ç¤ºï¼Œé€šè¿‡FlowableUIæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œæ²¡æœ‰å¯åŠ¨æµç¨‹å®ä¾‹çš„æƒ…å†µä¸‹ï¼Œåˆ°é‡Œ23:14:14ç§’çš„æ—¶å€™è‡ªåŠ¨å¸®åŠ©æˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªæµç¨‹å®ä¾‹ã€‚\n\n![image-20220327231551538](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220327231551538.png)\n\n\n\n\n\n\n\n### å®šæ—¶å™¨æ•è·ä¸­é—´äº‹ä»¶\n\nå½“ç¬¬ä¸€ä¸ªäººå·¥å¤„ç†å®Œæˆåï¼Œç¬¬äºŒä¸ªäººå·¥å¤„ç†çš„ä»»åŠ¡éœ€è¦åœ¨2022-03-27T23:25:14ä¹‹åæ‰§è¡Œ\n\næ¡ˆä¾‹ï¼š\n\n![image-20220327232259428](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220327232259428.png)\n\né€šè¿‡FlowableUIçš„æ¡ˆä¾‹æ¼”ç¤ºæˆ‘ä»¬å¯ä»¥çœ‹åˆ°åä¸€ä¸ªä»»åŠ¡æ˜¯åœ¨å®šæ—¶æ—¶é—´ä¹‹åæ‰§è¡Œçš„\n\n![image-20220327232624091](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220327232624091.png)\n\n\n\n\n\n### å®šæ—¶å™¨è¾¹ç•Œäº‹ä»¶\n\näººå·¥ä»»åŠ¡1å¦‚æœåœ¨å®šä¹‰çš„`2022-03-27T23:36:14`è¿™ä¸ªæ—¶é—´ä¹‹å‰è¿˜æ²¡æœ‰å¤„ç†ï¼Œé‚£ä¹ˆå°±ä¼šè§¦å‘å®šæ—¶è¾¹ç•Œäº‹ä»¶ï¼Œä»è€Œä»äººå·¥ä»»åŠ¡3.\n\næ¡ˆä¾‹\n\n![image-20220327233132259](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220327233132259.png)\n\n\n\n\n\nå‘å¸ƒå¯åŠ¨æµç¨‹\n\n![image-20220327233410596](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220327233410596.png)\n\n\n\nç„¶ååœ¨å¼ ä¸‰è¿™ä¸ªä½ç½®æˆ‘ä»¬ä¸å®Œæˆï¼Œç­‰åˆ°å®šæ—¶åˆ°æ¥ï¼Œè¾¾åˆ°å®šæ—¶çš„æ—¶é—´ï¼Œä»»åŠ¡è¿›å…¥åˆ°äº†äººå·¥å®¡æ‰¹ä¸‰\n\n\n\n### timeDuration\n\nâ€‹       åœ¨å®šæ—¶äº‹ä»¶ä¸­æˆ‘ä»¬ä¸€å®šè¦æ”¾å¼€å¦‚ä¸‹çš„é…ç½®ï¼š\n\n![image-20220329082431920](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220329082431920.png)\n\næŒ‡å®šè®¡æ—¶å™¨åœ¨å¯åŠ¨å‰åº”ç­‰å¾…å¤šé•¿çš„æ—¶é—´ï¼Œé¦–å…ˆä¸€å®šæ—¶å™¨å¯åŠ¨äº‹ä»¶ä¸ºä¾‹ï¼š\n\n#### å¼€å§‹äº‹ä»¶\n\n![image-20220328200755160](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220328200755160.png)\n\nå¯ä»¥é€šè¿‡FlowableUIçš„åº”ç”¨æ¥éªŒè¯\n\n![image-20220328202242555](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220328202242555.png)\n\nå‘å¸ƒä»»åŠ¡åç„¶åæˆ‘ä»¬ç­‰å¾…ä¸¤åˆ†é’Ÿå°±å¯ä»¥çœ‹åˆ°ä»»åŠ¡åˆ°äº†`zhangsan`çš„ä½ç½®ã€‚æˆ–è€…æˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨SpringBootæ•´åˆFlowableçš„é¡¹ç›®ä¸­æ·»åŠ å¯¹åº”çš„Controlleræ¥å¤„ç†\n\n```java\n    @Autowired\n    private ProcessEngine processEngine;\n\n\n    @GetMapping(\"/deploy\")\n    public String deploy(){\n        Deployment deployment = processEngine.getRepositoryService().createDeployment()\n                .addClasspathResource(\"test003.bpmn20.xml\")\n                .name(\"ç­‰å¾…å®šæ—¶å™¨å¯åŠ¨äº‹ä»¶\")\n                .deploy();\n        return \"éƒ¨ç½²ä»»åŠ¡æˆåŠŸ....\";\n    }\n```\n\næäº¤è¯·æ±‚å®Œæˆéƒ¨ç½²æ“ä½œ\n\n![image-20220328202918399](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220328202918399.png)\n\n\n\nç”Ÿæˆäº†å¯¹åº”çš„Taskè®°å½•\n\n![image-20220328203621023](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220328203621023.png)\n\n\n\n**æ³¨æ„**ï¼šåœ¨äº‹ä»¶ä¸­ä¸€å®šè¦å¼€å¯å¼‚æ­¥ä»»åŠ¡ï¼Œä¸ç„¶ç›¸å…³çš„äº‹ä»¶æ˜¯ä¸ä¼šè§¦å‘çš„ï¼\n\n![image-20220328203656000](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220328203656000.png)\n\n\n\n#### ä¸­é—´äº‹ä»¶\n\nç„¶åæ¥çœ‹çœ‹ä¸­é—´äº‹ä»¶çš„ç­‰å¾…å®šæ—¶å™¨äº‹ä»¶æ¡ˆä¾‹ï¼š\n\n![image-20220328204205453](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220328204205453.png)\n\næ¡ˆä¾‹ç”±ä¸¤ä¸ªè‡ªåŠ¨ä»»åŠ¡å’Œä¸€ä¸ªå®šæ—¶å™¨ä¸­é—´äº‹ä»¶ç»„æˆï¼Œåœ¨å®šæ—¶ä»»åŠ¡ä¸­ç»‘å®šäº†ä¸¤ä¸ªJavaDelegateçš„Javaç±»æ¥å¤„ç†\n\n```java\npublic class SignalStartOnedelegate implements JavaDelegate {\n    @Override\n    public void execute(DelegateExecution execution) {\n        System.out.println(\"-------è§¦å‘äº†-111-------->\"+ LocalDateTime.now().toString());\n    }\n}\n\npublic class SignalStartTwodelegate implements JavaDelegate {\n    @Override\n    public void execute(DelegateExecution execution) {\n        System.out.println(\"-------è§¦å‘äº†222--------->\"+ LocalDateTime.now().toString());\n    }\n}\n```\n\n\n\nç„¶åæµç¨‹å›¾ä¸­çš„å…³è”ä¸º\n\n![image-20220328204349358](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220328204349358.png)\n\nå¦ä¸€ä¸ªç±»ä¼¼ï¼Œç„¶åå®šæ—¶å™¨ä¸­é—´äº‹ä»¶çš„ç­‰å¾…æ—¶é—´è®¾ç½®æ˜¯2åˆ†é’Ÿã€‚æˆ‘ä»¬éƒ¨ç½²åé€šè¿‡Javaä»£ç æ¥æ¼”ç¤ºçœ‹çœ‹\n\n```java\n    @Test\n    public void test01() throws Exception{\n        Deployment deployment = processEngine.getRepositoryService().createDeployment()\n                .addClasspathResource(\"ç­‰å¾…å®šæ—¶å™¨ä¸­é—´äº‹ä»¶.bpmn20.xml\")\n                .name(\"ç­‰å¾…å®šæ—¶ä¸­é—´äº‹ä»¶...\")\n                .deploy();\n        System.out.println(\"-----\");\n    }\n```\n\nç„¶åæˆ‘ä»¬éœ€è¦å¯åŠ¨æµç¨‹å®ä¾‹ï¼Œä¹‹åç­‰å¾…ä¸¤åˆ†é’Ÿçœ‹æ•ˆæœ\n\n```java\n    /**\n     * å¯åŠ¨æµç¨‹å®ä¾‹\n     *\n     */\n    @Test\n    public void startProcessInstanceByKey()  throws Exception{\n\n        processEngine.getRuntimeService()\n                .startProcessInstanceById(\"Test04:1:325edb10-ae95-11ec-a77f-c03c59ad2248\");\n        // éœ€è¦åœ¨æ­¤é˜»å¡æ¯”ç­‰å¾…é•¿çš„æ—¶é—´\n        TimeUnit.MINUTES.sleep(3);\n    }\n```\n\n\n\n![image-20220328205718521](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220328205718521.png)\n\n\n\n#### è¾¹ç•Œäº‹ä»¶\n\næœ€åæˆ‘ä»¬æ¥çœ‹çœ‹è¾¹ç•Œäº‹ä»¶ä¸­çš„ç­‰å¾…å®šæ—¶å™¨çš„å¤„ç†ï¼Œæ¡ˆä¾‹ä¸ºï¼š\n\n![image-20220328210150212](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220328210150212.png)\n\nè¯¥æ¡ˆä¾‹ç”±ä¸€ä¸ªäººå·¥å®¡æ ¸+ä¸¤ä¸ªè‡ªåŠ¨ä»»åŠ¡+å®šæ—¶å™¨è¾¹ç•Œäº‹ä»¶ç»„æˆï¼Œè‡ªåŠ¨ä»»åŠ¡ä¸€ç»‘å®šçš„JavaDelegateæ˜¯\n\n```java\npublic class SignalStartOnedelegate implements JavaDelegate {\n    @Override\n    public void execute(DelegateExecution execution) {\n        System.out.println(\"-------è§¦å‘äº†-111-------->\"+ LocalDateTime.now().toString());\n    }\n}\n```\n\nè‡ªåŠ¨ä»»åŠ¡äºŒç»‘å®šçš„JavaDelegateæ˜¯\n\n```java\npublic class SignalStartTwodelegate implements JavaDelegate {\n    @Override\n    public void execute(DelegateExecution execution) {\n        System.out.println(\"-------è§¦å‘äº†222--------->\"+ LocalDateTime.now().toString());\n    }\n}\n```\n\nå®šæ—¶å™¨è¾¹ç•Œäº‹ä»¶è®¾ç½®çš„æ˜¯30Sï¼Œä¹Ÿå°±æ˜¯å¦‚æœäººå·¥å®¡æ ¸åœ¨30Sè¿˜æ²¡å¤„ç†å°±ä¼šè§¦å‘è¾¹ç•Œäº‹ä»¶ï¼šé€šè¿‡ä»£ç æ¥æ¼”ç¤ºï¼Œéƒ¨ç½²æµç¨‹åéœ€è¦å¯åŠ¨æµç¨‹ï¼Œç„¶åç­‰å¾…30Sçœ‹æ§åˆ¶å°è¾“å‡º\n\n```java\n    @Test\n    public void test01() throws Exception{\n        Deployment deployment = processEngine.getRepositoryService().createDeployment()\n                .addClasspathResource(\"ç­‰å¾…å®šæ—¶å™¨è¾¹ç•Œäº‹ä»¶.bpmn20.xml\")\n                .name(\"ç­‰å¾…å®šæ—¶å™¨è¾¹ç•Œäº‹ä»¶...\")\n                .deploy();\n        System.out.println(\"-----\");\n    }\n```\n\n```java\n    /**\n     * å¯åŠ¨æµç¨‹å®ä¾‹\n     *\n     */\n    @Test\n    public void startProcessInstanceByKey()  throws Exception{\n\n        processEngine.getRuntimeService()\n                .startProcessInstanceById(\"test05:1:c46f83bf-ae97-11ec-b055-c03c59ad2248\");\n        System.out.println(\"å¼€å§‹å¯åŠ¨çš„æ—¶é—´ï¼š\" + LocalDateTime.now().toString());\n        // éœ€è¦åœ¨æ­¤é˜»å¡æ¯”ç­‰å¾…é•¿çš„æ—¶é—´\n        TimeUnit.MINUTES.sleep(3);\n    }\n```\n\nç­‰å¾…æ§åˆ¶å°è¾“å‡ºï¼š\n\n![image-20220328210905204](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220328210905204.png)\n\n\n\nå°ç»“ï¼štimeDurationåœ¨ä¸‰ç§å®šæ—¶å™¨çš„äº‹ä»¶ä¸­\n\n* å®šæ—¶å™¨å¯åŠ¨äº‹ä»¶ï¼šç­‰å¾…æŒ‡å®šæ—¶é—´åå¯åŠ¨æµç¨‹å®ä¾‹\n* å®šæ—¶å™¨ä¸­é—´äº‹ä»¶ï¼šABä»»åŠ¡ä¸­é—´æœ‰ä¸ªå®šæ—¶å™¨ä¸­é—´äº‹ä»¶ï¼ŒAä»»åŠ¡å¤„ç†åéœ€è¦ç­‰å¾…å¯¹åº”çš„æ—¶é—´æ‰èƒ½æµè½¬åˆ°Bå¤„\n* å®šæ—¶å™¨è¾¹ç•Œäº‹ä»¶ï¼šä»»åŠ¡Aç»‘å®šäº†å®šæ—¶å™¨è¾¹ç•Œäº‹ä»¶åï¼Œå¦‚æœåœ¨ç­‰å¾…æ—¶é—´ä»¥å†…Aæ²¡æœ‰å¤„ç†ä»»åŠ¡ï¼Œé‚£ä¹ˆå°±ä¼šè§¦å‘å¯¹åº”çš„è¾¹ç•Œäº‹ä»¶\n\n\n\n\n\n### timeCycle\n\næŒ‡å®šé‡å¤å‘¨æœŸï¼Œå¯ç”¨äºå‘¨æœŸæ€§å¯åŠ¨æµç¨‹ï¼Œæˆ–è€…ä¸ºè¶…æœŸç”¨æˆ·ä»»åŠ¡å¤šæ¬¡å‘é€æé†’,è¿™ä¸ªå…ƒç´ å¯ä»¥ä½¿ç”¨ä¸¤ç§æ ¼å¼\n\n* ç¬¬ä¸€ç§æ˜¯æŒ‰ç…§[ISO 8601](http://en.wikipedia.org/wiki/ISO_8601#Repeating_intervals)æ ‡å‡†å®šä¹‰çš„å¾ªç¯æ—¶é—´å‘¨æœŸã€‚ä¾‹å¦‚ï¼ˆä¸‰æ¬¡é‡å¤é—´éš”ï¼Œæ¯æ¬¡é—´éš”ä¸º10å°æ—¶ï¼‰ï¼šR3/PT10H\n* ä¹Ÿå¯ä»¥ä½¿ç”¨*timeCycle*çš„å¯é€‰å±æ€§*endDate*ï¼Œæˆ–è€…åƒè¿™æ ·ç›´æ¥å†™åœ¨æ—¶é—´è¡¨è¾¾å¼çš„ç»“å°¾ï¼š`R3/PT10H/${EndDate}`ã€‚ å½“åˆ°è¾¾endDateæ—¶ï¼Œåº”ç”¨ä¼šåœæ­¢ï¼Œå¹¶ä¸ºè¯¥ä»»åŠ¡åˆ›å»ºå…¶ä»–ä½œä¸š\n* ä¹Ÿå¯ä»¥é€šè¿‡cronè¡¨è¾¾å¼æ¥å¤„ç†\n\n\n\n#### å¼€å§‹äº‹ä»¶\n\nç¼–å†™æ¡ˆä¾‹æ¥æ¼”ç¤ºï¼š\n\n![image-20220328213218525](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220328213218525.png)\n\né‡å¤æ—¶é—´è®¾ç½®ä¸º R3PT30S é‡å¤3æ¬¡ï¼Œé—´éš”30æè¿°ï¼Œè‡ªåŠ¨ä»»åŠ¡ç»‘å®šçš„æ˜¯JavaDelegate\n\n```java\npublic class SignalStartOnedelegate implements JavaDelegate {\n    @Override\n    public void execute(DelegateExecution execution) {\n        System.out.println(\"-------è§¦å‘äº†-111-------->\"+ LocalDateTime.now().toString());\n    }\n}\n```\n\n![image-20220328213330813](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220328213330813.png)\n\nç„¶åæˆ‘ä»¬éƒ¨ç½²çœ‹æ•ˆæœ\n\n```java\n    @Test\n    public void test01() throws Exception{\n        Deployment deployment = processEngine.getRepositoryService().createDeployment()\n                .addClasspathResource(\"é‡å¤å¯åŠ¨äº‹ä»¶.bpmn20.xml\")\n                .name(\"ç­‰å¾…å®šæ—¶å™¨è¾¹ç•Œäº‹ä»¶...\")\n                .deploy();\n        System.out.println(\"-----\");\n        // éœ€è¦åœ¨æ­¤é˜»å¡æ¯”ç­‰å¾…é•¿çš„æ—¶é—´\n        TimeUnit.MINUTES.sleep(3);\n    }\n```\n\n![image-20220328213955271](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220328213955271.png)\n\n\n\nç„¶åæˆ‘ä»¬å†æŒ‡å®šä¸‹endDateæ¥çœ‹çœ‹æ¡ˆä¾‹ï¼Œç›´æ¥å¯ä»¥åœ¨xmlä¸­æ¥å¤„ç†\n\n```xml\n      <timerEventDefinition>\n        <timeCycle>R3/PT30S/2022-03-28T21:46:11+00:00</timeCycle>\n      </timerEventDefinition>\n```\n\n![image-20220328214459137](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220328214459137.png)\n\n\n\næ­¤å¤–è¿˜å¯ä»¥é€šè¿‡cronè¡¨è¾¾å¼æ¥å¤„ç†ï¼š\n\n```corn\n0 0/5 * * * ?\n```\n\n![image-20220328215255141](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220328215255141.png)\n\n![image-20220328215340678](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220328215340678.png)\n\n\n\n#### ä¸­é—´äº‹ä»¶\n\n&emsp;timeCycleä½œä¸ºä¸­é—´äº‹ä»¶çš„è¯ï¼Œåªä¼šæ‰§è¡Œä¸€æ¬¡ï¼Œæ¡ˆä¾‹å¦‚ä¸‹\n\n![image-20220328225250878](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220328225250878.png)\n\næ¡ˆä¾‹ä¸­çš„è‡ªåŠ¨ä»»åŠ¡ä¸€äºŒå¯¹åº”ç»‘å®šå¦‚ä¸‹çš„JavaDelegate.\n\n```java\npublic class SignalStartOnedelegate implements JavaDelegate {\n    @Override\n    public void execute(DelegateExecution execution) {\n        System.out.println(\"-------è§¦å‘äº†-111-------->\"+ LocalDateTime.now().toString());\n    }\n}\n\npublic class SignalStartTwodelegate implements JavaDelegate {\n    @Override\n    public void execute(DelegateExecution execution) {\n        System.out.println(\"-------è§¦å‘äº†222--------->\"+ LocalDateTime.now().toString());\n    }\n}\n```\n\nä¸­é—´äº‹ä»¶çš„è®¾ç½®ä¸º`R3/PT30S` å¾ªç¯3æ¬¡ï¼Œé—´éš”30ç§’æ‰§è¡Œï¼Œä½†æ˜¯è¿™æ˜¯ä¸­é—´äº‹ä»¶ï¼Œå…¶å®åªä¼šæ‰§è¡Œä¸€æ¬¡ï¼Œæˆ‘æ¥çœ‹æ•ˆæœ\n\néƒ¨ç½²åå¯åŠ¨\n\n```java\n@Autowired\n    private ProcessEngine processEngine;\n\n    @Test\n    public void test01() throws Exception{\n        Deployment deployment = processEngine.getRepositoryService().createDeployment()\n                .addClasspathResource(\"å¾ªç¯ä¸­é—´äº‹ä»¶.bpmn20.xml\")\n                .name(\"å¾ªç¯ä¸­é—´äº‹ä»¶...\")\n                .deploy();\n        System.out.println(\"-----\");\n    }\n\n    /**\n     * å¯åŠ¨æµç¨‹å®ä¾‹\n     *\n     */\n    @Test\n    public void startProcessInstanceByKey()  throws Exception{\n\n        processEngine.getRuntimeService()\n                .startProcessInstanceById(\"cycle-middle-event:1:3456ade8-aea7-11ec-9064-c03c59ad2248\");\n        System.out.println(\"å¼€å§‹å¯åŠ¨çš„æ—¶é—´ï¼š\" + LocalDateTime.now().toString());\n        // éœ€è¦åœ¨æ­¤é˜»å¡æ¯”ç­‰å¾…é•¿çš„æ—¶é—´\n        TimeUnit.MINUTES.sleep(3);\n    }\n```\n\n\n\n![image-20220328225931465](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220328225931465.png)\n\n\n\n\n\n#### è¾¹ç•Œäº‹ä»¶\n\nåœ¨è¾¹ç•Œäº‹ä»¶ä¸­ï¼Œå®šä¹‰äº†å¾ªç¯æ¡ä»¶`R3/PT30S`ç†è®ºä¸Šè¦å¾ªç¯3æ¬¡ï¼Œé—´éš”30Sï¼Œå•å…¶å®ä¹Ÿåªä¼šæ‰§è¡Œä¸€æ¬¡ï¼Œæ¥çœ‹æ¡ˆä¾‹\n\n![image-20220328231838967](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220328231838967.png)\n\n\n\næ¡ˆä¾‹ä¸Šé¢çš„ç­‰å¾…æ—¶é—´çš„æ˜¯ä¸€æ ·çš„ï¼Œåªæ˜¯è¾¹ç•Œäº‹ä»¶æ˜¯30S\n\n![image-20220328231955441](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220328231955441.png)\n\n\n\nç„¶åæˆ‘ä»¬éƒ¨ç½²å¯åŠ¨æµç¨‹çœ‹æ•ˆæœ\n\n![image-20220329094741327](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220329094741327.png)\n\n\n\næ€»ç»“ï¼šå¾ªç¯è®¾å®š\n\n* å¯åŠ¨äº‹ä»¶ï¼šæ ¹æ®è®¾ç½®å¾ªç¯å¯åŠ¨æµç¨‹å®ä¾‹\n* ä¸­é—´äº‹ä»¶ï¼šå³ä½¿è®¾ç½®äº†å¾ªç¯æ—¶é—´ä¹Ÿåªä¼šè§¦å‘å¼‚å¸¸\n* è¾¹ç•Œäº‹ä»¶ï¼šå³ä½¿è®¾ç½®äº†å¾ªç¯æ—¶é—´ä¹Ÿåªä¼šè§¦å‘å¼‚å¸¸\n\n\n\n\n\n\n\n## æ¶ˆæ¯äº‹ä»¶\n\næ¶ˆæ¯äº‹ä»¶ï¼ˆmessage eventï¼‰ï¼Œæ˜¯æŒ‡å¼•ç”¨å…·åæ¶ˆæ¯çš„äº‹ä»¶ã€‚æ¶ˆæ¯å…·æœ‰åå­—ä¸è½½è·ã€‚ä¸ä¿¡å·ä¸åŒï¼Œæ¶ˆæ¯äº‹ä»¶åªæœ‰ä¸€ä¸ªæ¥æ”¶è€…\n\n### å¯åŠ¨äº‹ä»¶\n\næ¶ˆæ¯å¯åŠ¨äº‹ä»¶ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬é€šè¿‡æ¥æ”¶åˆ°æŸäº›æ¶ˆæ¯åæ¥å¯åŠ¨æµç¨‹å®ä¾‹ï¼Œæ¯”å¦‚æ¥æ”¶åˆ°äº†ä¸€å°é‚®ä»¶ï¼Œä¸€æ¡çŸ­ä¿¡ç­‰ï¼Œå…·ä½“é€šè¿‡æ¡ˆä¾‹æ¥è®²è§£\n\n![image-20220329103837021](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220329103837021.png)\n\næˆ‘ä»¬éœ€è¦å…ˆå®šä¹‰ä¸€ä¸ªæ¶ˆæ¯\n\n![image-20220329105849732](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220329105849732.png)\n\nç„¶ååœ¨æ¶ˆæ¯å¼€å§‹èŠ‚ç‚¹å‡ºå¼•ç”¨\n\n![image-20220329105922977](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220329105922977.png)\n\nç„¶åé€šè¿‡ä»£ç æ¥å¤„ç†ï¼Œéƒ¨ç½²å’Œå¯åŠ¨\n\n```java\n    /**\n     * Deploy\n     */\n    @Test\n    void testDeploy() throws Exception {\n        //RepositoryService repositoryService = processEngine.getRepositoryService();\n        Deployment deploy = repositoryService.createDeployment()\n                .addClasspathResource(\"æ¶ˆæ¯å¯åŠ¨äº‹ä»¶.bpmn20.xml\")\n                .name(\"æ¶ˆæ¯å¯åŠ¨äº‹ä»¶\")\n                .deploy();\n        System.out.println(\"deploy.getId() = \" + deploy.getId());\n        System.out.println(\"deploy.getName() = \" + deploy.getName());\n        System.out.println(\"éƒ¨ç½²å¼€å§‹çš„æ—¶é—´ï¼š\" + new Date());\n        //TimeUnit.MINUTES.sleep(3);\n    }\n```\n\néƒ¨ç½²åä¸ä¼šè‡ªåŠ¨å¯åŠ¨ï¼Œæˆ‘ä»¬éœ€è¦æ¥æ”¶ç›¸å…³çš„ä¿¡æ¯åæ¥è§¦å‘ã€‚\n\n```java\n   /**\n     * é€šè¿‡æ¶ˆæ¯æ¥å¯åŠ¨ä¸€ä¸ªæµç¨‹å®ä¾‹\n     */\n    @Test\n    void startFlow() throws Exception{\n\n       // runtimeService.startProcessInstanceById(\"event006:1:0532e730-af02-11ec-8cf3-c03c59ad2248\");\n       // æ³¨æ„ï¼šå‘é€æ¶ˆæ¯å‘é€çš„åº”è¯¥æ˜¯æ¶ˆæ¯çš„åç§°è€Œä¸æ˜¯æ¶ˆæ¯çš„ID\n        runtimeService.startProcessInstanceByMessage(\"ç¬¬ä¸€ä¸ªæ¶ˆæ¯\");\n        System.out.println(\"å¯åŠ¨æ—¶é—´ï¼š\" + new Date());\n        // æˆ‘ä»¬å¾—ä¿è¯å®¹å™¨çš„è¿è¡Œï¼Œæ‰€ä»¥éœ€è¦é˜»å¡\n        TimeUnit.MINUTES.sleep(1);\n    }\n```\n\n\n\n\n\n**æ³¨æ„**ï¼šå‘é€æ¶ˆæ¯å‘é€çš„åº”è¯¥æ˜¯æ¶ˆæ¯çš„åç§°è€Œä¸æ˜¯æ¶ˆæ¯çš„IDï¼ŒæŠ¥é”™å¦‚ä¸‹ï¼š\n\n![image-20220329104823537](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220329104823537.png)\n\n\n\n\n\n### ä¸­é—´äº‹ä»¶\n\næ¶ˆæ¯ä¸­é—´äº‹ä»¶å°±æ˜¯åœ¨æµç¨‹è¿ä½œä¸­éœ€è¦æ¶ˆæ¯æ¥è§¦å‘çš„åœºæ™¯ï¼Œæ¡ˆä¾‹æ¼”ç¤ºï¼Œ`è‡ªåŠ¨æµç¨‹1`å¤„ç†å®Œæˆåï¼Œéœ€è¦æ¥æ”¶ç‰¹å®šçš„æ¶ˆæ¯ä¹‹åæ‰èƒ½è¿›å…¥åˆ°`è‡ªåŠ¨æµç¨‹2`\n\n![image-20220329111412619](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220329111412619.png)\n\næ¶ˆæ¯ä¸­é—´äº‹ä»¶ç»‘å®šçš„æ¶ˆæ¯ä¸º\n\n![image-20220329111446959](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220329111446959.png)\n\n\n\n\n\n\n\nç„¶åé€šè¿‡ä»£ç æ¥æ¼”ç¤º\n\n```java\n   /**\n     * Deploy\n     */\n    @Test\n    void testDeploy() throws Exception {\n        //RepositoryService repositoryService = processEngine.getRepositoryService();\n        Deployment deploy = repositoryService.createDeployment()\n                .addClasspathResource(\"æ¶ˆæ¯ä¸­é—´äº‹ä»¶.bpmn20.xml\")\n                .name(\"æ¶ˆæ¯ä¸­é—´äº‹ä»¶\")\n                .deploy();\n        System.out.println(\"deploy.getId() = \" + deploy.getId());\n        System.out.println(\"deploy.getName() = \" + deploy.getName());\n        System.out.println(\"éƒ¨ç½²å¼€å§‹çš„æ—¶é—´ï¼š\" + new Date());\n        //TimeUnit.MINUTES.sleep(3);\n    }\n\n    /**\n     * é€šè¿‡æ¶ˆæ¯æ¥å¯åŠ¨ä¸€ä¸ªæµç¨‹å®ä¾‹\n     */\n    @Test\n    void startFlow() throws Exception{\n\n        runtimeService.startProcessInstanceById(\"event008:1:9217aa5e-af0e-11ec-b11f-c03c59ad2248\");\n       // æ³¨æ„ï¼šå‘é€æ¶ˆæ¯å‘é€çš„åº”è¯¥æ˜¯æ¶ˆæ¯çš„åç§°è€Œä¸æ˜¯æ¶ˆæ¯çš„ID\n        //runtimeService.startProcessInstanceByMessage(\"ç¬¬ä¸€ä¸ªæ¶ˆæ¯\");\n        System.out.println(\"å¯åŠ¨æ—¶é—´ï¼š\" + new Date());\n        // æˆ‘ä»¬å¾—ä¿è¯å®¹å™¨çš„è¿è¡Œï¼Œæ‰€ä»¥éœ€è¦é˜»å¡\n        //TimeUnit.MINUTES.sleep(1);\n    }\n\n    /**\n     * ä¸­é—´äº‹ä»¶-å‘å¸ƒæ¶ˆæ¯\n     */\n    @Test\n    void recevedMsg(){\n        // éœ€è¦æŸ¥è¯¢åˆ°executionId\n        String processExecutionId = \"b5349e22-af0e-11ec-93e6-c03c59ad2248\";\n        // æˆ‘ä»¬éœ€è¦æ ¹æ®æµç¨‹å®ä¾‹ç¼–å·æ‰¾åˆ°å¯¹åº”çš„æ‰§è¡Œç¼–å·\n       /* Execution execution = runtimeService.createExecutionQuery()\n                .processInstanceId(\"event008:1:9217aa5e-af0e-11ec-b11f-c03c59ad2248\")\n                .singleResult();\n        System.out.println(\"----------->\"+execution.getId());*/\n        runtimeService.messageEventReceived(\"ç¬¬äºŒä¸ªæ¶ˆæ¯\",processExecutionId);\n    }\n```\n\nå¯ä»¥çœ‹åˆ°çš„è¾“å‡ºæ•ˆæœ\n\n![image-20220329112435376](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220329112435376.png)\n\n\n\n### è¾¹ç•Œäº‹ä»¶\n\næ¶ˆæ¯è¾¹ç•Œäº‹ä»¶ï¼Œå¦‚æœåœ¨æ¶ˆæ¯è§¦å‘å‰è¿˜æ²¡æœ‰ï¼Œæ¡ˆä¾‹æ¼”ç¤ºï¼š\n\n![image-20220329113848978](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220329113848978.png)\n\néƒ¨ç½²æµç¨‹\n\n```java\n    /**\n     * Deploy\n     */\n    @Test\n    void testDeploy() throws Exception {\n        //RepositoryService repositoryService = processEngine.getRepositoryService();\n        Deployment deploy = repositoryService.createDeployment()\n                .addClasspathResource(\"æ¶ˆæ¯è¾¹ç•Œäº‹ä»¶.bpmn20.xml\")\n                .name(\"æ¶ˆæ¯è¾¹ç•Œäº‹ä»¶\")\n                .deploy();\n        System.out.println(\"deploy.getId() = \" + deploy.getId());\n        System.out.println(\"deploy.getName() = \" + deploy.getName());\n        System.out.println(\"éƒ¨ç½²å¼€å§‹çš„æ—¶é—´ï¼š\" + new Date());\n        //TimeUnit.MINUTES.sleep(3);\n    }\n    /**\n     * é€šè¿‡æ¶ˆæ¯æ¥å¯åŠ¨ä¸€ä¸ªæµç¨‹å®ä¾‹\n     */\n    @Test\n    void startFlow() throws Exception{\n\n        runtimeService.startProcessInstanceById(\"event009:1:f2096787-af11-11ec-b290-c03c59ad2248\");\n       // æ³¨æ„ï¼šå‘é€æ¶ˆæ¯å‘é€çš„åº”è¯¥æ˜¯æ¶ˆæ¯çš„åç§°è€Œä¸æ˜¯æ¶ˆæ¯çš„ID\n        //runtimeService.startProcessInstanceByMessage(\"ç¬¬ä¸€ä¸ªæ¶ˆæ¯\");\n        System.out.println(\"å¯åŠ¨æ—¶é—´ï¼š\" + new Date());\n        // æˆ‘ä»¬å¾—ä¿è¯å®¹å™¨çš„è¿è¡Œï¼Œæ‰€ä»¥éœ€è¦é˜»å¡\n        //TimeUnit.MINUTES.sleep(1);\n    }\n```\n\néƒ¨ç½²æµç¨‹åå¯åŠ¨æµç¨‹å®ä¾‹ä¼šè¿è½¬åˆ°\n\n![image-20220329114038773](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220329114038773.png)\n\n\n\nå¦‚æœäººå·¥å¤„ç†åœ¨æ¶ˆæ¯è®¢é˜…å‰æ²¡æœ‰å¤„ç†å°±ä¼šè§¦å‘è¾¹ç•Œäº‹ä»¶\n\n```java\n    /**\n     * è¾¹ç•Œäº‹ä»¶-å‘å¸ƒæ¶ˆæ¯\n     */\n    @Test\n    void recevedMsg(){\n        // éœ€è¦æŸ¥è¯¢åˆ°executionId\n        String processExecutionId = \"1d503361-af12-11ec-89a4-c03c59ad2248\";\n        // æˆ‘ä»¬éœ€è¦æ ¹æ®æµç¨‹å®ä¾‹ç¼–å·æ‰¾åˆ°å¯¹åº”çš„æ‰§è¡Œç¼–å·\n       /* Execution execution = runtimeService.createExecutionQuery()\n                .processInstanceId(\"event008:1:9217aa5e-af0e-11ec-b11f-c03c59ad2248\")\n                .singleResult();\n        System.out.println(\"----------->\"+execution.getId());*/\n        runtimeService.messageEventReceived(\"ç¬¬ä¸‰ä¸ªæ¶ˆæ¯\",processExecutionId);\n    }\n```\n\n\n\n![image-20220329114505074](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220329114505074.png)\n\n\n\n\n\n\n\n## é”™è¯¯äº‹ä»¶\n\né”™è¯¯äº‹ä»¶å¯ä»¥ç”¨åšä¸€ä¸ªæµç¨‹çš„å¼€å§‹äº‹ä»¶æˆ–è€…ä½œä¸ºä¸€ä¸ªä»»åŠ¡æˆ–è€…å­æµç¨‹çš„è¾¹ç•Œäº‹ä»¶ï¼Œé”™è¯¯äº‹ä»¶æ²¡æœ‰æä¾›ä½œç”¨ä¸­é—´äº‹ä»¶çš„åŠŸèƒ½ï¼Œè¿™ä¸€ç‚¹å’Œå‰é¢ä»‹ç»çš„å®šæ—¶å™¨äº‹ä»¶å’Œæ¶ˆæ¯äº‹ä»¶è¿˜æœ‰åŒºåˆ«çš„ã€‚\n\n### å¼€å§‹äº‹ä»¶\n\né”™è¯¯å¯åŠ¨äº‹ä»¶ï¼ˆerror start eventï¼‰ï¼Œå¯ç”¨äºè§¦å‘äº‹ä»¶å­æµç¨‹ï¼ˆEvent Sub-Processï¼‰ã€‚**é”™è¯¯å¯åŠ¨äº‹ä»¶ä¸èƒ½ç”¨äºå¯åŠ¨æµç¨‹å®ä¾‹**ã€‚\n\né”™è¯¯å¯åŠ¨äº‹ä»¶æ€»æ˜¯ä¸­æ–­ã€‚æˆ‘ä»¬é€šè¿‡æ¡ˆä¾‹æ¥ä»‹ç»ã€‚æ­¤å¤„æˆ‘ä»¬ç”¨Eclipseæ¥ç»˜åˆ¶æµç¨‹å›¾ï¼Œç†Ÿæ‚‰ä¸‹Eclipseå·¥å…·\n\n![image-20220329235608917](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220329235608917.png)\n\næ³¨æ„ï¼šç»˜åˆ¶çš„æ˜¯å­æµç¨‹äº‹ä»¶ï¼š\n\n![image-20220330004724798](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220330004724798.png)\n\nç„¶åæˆ‘ä»¬å†å®šä¹‰ä¸€ä¸ªé”™è¯¯ï¼Œå†…å®¹ä¸ºï¼š\n\n```xml\n<error id=\"error01\" errorCode=\"abcd\">\n```\n\nåœ¨FlowableUIä¸­æ²¡æ‰¾åˆ°é”™è¯¯å®šä¹‰çš„é€‰é¡¹ï¼Œæˆ‘ä»¬å°±åœ¨æµç¨‹æ–‡ä»¶ä¸­è‡ªå·±æ·»åŠ å³å¯ã€‚\n\n\n\n![image-20220329235702382](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220329235702382.png)\n\n\n\n![image-20220329214507352](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220329214507352.png)\n\nå®Œæ•´çš„æµç¨‹æ–‡ä»¶\n\n```xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<definitions xmlns=\"http://www.omg.org/spec/BPMN/20100524/MODEL\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:activiti=\"http://activiti.org/bpmn\" xmlns:bpmndi=\"http://www.omg.org/spec/BPMN/20100524/DI\" xmlns:omgdc=\"http://www.omg.org/spec/DD/20100524/DC\" xmlns:omgdi=\"http://www.omg.org/spec/DD/20100524/DI\" typeLanguage=\"http://www.w3.org/2001/XMLSchema\" expressionLanguage=\"http://www.w3.org/1999/XPath\" targetNamespace=\"http://www.activiti.org/test\">\n  <error id=\"error01\" errorCode=\"abcd\"></error>\n  <process id=\"myProcess\" name=\"My process\" isExecutable=\"true\">\n    <startEvent id=\"startevent1\" name=\"Start\"></startEvent>\n    <serviceTask id=\"servicetask1\" name=\"è‡ªåŠ¨ä»»åŠ¡ä¸€\" activiti:class=\"com.bobo.delegate.MyOneDelegate\"></serviceTask>\n    <sequenceFlow id=\"flow1\" sourceRef=\"startevent1\" targetRef=\"servicetask1\"></sequenceFlow>\n    <endEvent id=\"endevent1\" name=\"End\"></endEvent>\n    <sequenceFlow id=\"flow2\" sourceRef=\"servicetask1\" targetRef=\"endevent1\"></sequenceFlow>\n    <subProcess id=\"eventsubprocess1\" name=\"Event sub Process\" triggeredByEvent=\"true\">\n      <startEvent id=\"errorstartevent1\" name=\"Error start\">\n        <errorEventDefinition errorRef=\"error01\"></errorEventDefinition>\n      </startEvent>\n      <serviceTask id=\"servicetask2\" name=\"è‡ªåŠ¨ä»»åŠ¡äºŒ\" activiti:class=\"com.bobo.delegate.MyTwoDelegate\"></serviceTask>\n      <endEvent id=\"endevent2\" name=\"End\"></endEvent>\n      <sequenceFlow id=\"flow3\" sourceRef=\"servicetask2\" targetRef=\"endevent2\"></sequenceFlow>\n      <sequenceFlow id=\"flow4\" sourceRef=\"errorstartevent1\" targetRef=\"servicetask2\"></sequenceFlow>\n    </subProcess>\n  </process>\n  <bpmndi:BPMNDiagram id=\"BPMNDiagram_myProcess\">\n    <bpmndi:BPMNPlane bpmnElement=\"myProcess\" id=\"BPMNPlane_myProcess\">\n      <bpmndi:BPMNShape bpmnElement=\"startevent1\" id=\"BPMNShape_startevent1\">\n        <omgdc:Bounds height=\"35.0\" width=\"35.0\" x=\"480.0\" y=\"260.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"servicetask1\" id=\"BPMNShape_servicetask1\">\n        <omgdc:Bounds height=\"55.0\" width=\"105.0\" x=\"710.0\" y=\"250.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"endevent1\" id=\"BPMNShape_endevent1\">\n        <omgdc:Bounds height=\"35.0\" width=\"35.0\" x=\"930.0\" y=\"260.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"eventsubprocess1\" id=\"BPMNShape_eventsubprocess1\">\n        <omgdc:Bounds height=\"211.0\" width=\"401.0\" x=\"530.0\" y=\"420.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"errorstartevent1\" id=\"BPMNShape_errorstartevent1\">\n        <omgdc:Bounds height=\"35.0\" width=\"35.0\" x=\"600.0\" y=\"520.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"servicetask2\" id=\"BPMNShape_servicetask2\">\n        <omgdc:Bounds height=\"55.0\" width=\"105.0\" x=\"700.0\" y=\"510.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"endevent2\" id=\"BPMNShape_endevent2\">\n        <omgdc:Bounds height=\"35.0\" width=\"35.0\" x=\"850.0\" y=\"520.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNEdge bpmnElement=\"flow1\" id=\"BPMNEdge_flow1\">\n        <omgdi:waypoint x=\"515.0\" y=\"277.0\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"710.0\" y=\"277.0\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"flow2\" id=\"BPMNEdge_flow2\">\n        <omgdi:waypoint x=\"815.0\" y=\"277.0\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"930.0\" y=\"277.0\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"flow3\" id=\"BPMNEdge_flow3\">\n        <omgdi:waypoint x=\"805.0\" y=\"537.0\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"850.0\" y=\"537.0\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"flow4\" id=\"BPMNEdge_flow4\">\n        <omgdi:waypoint x=\"635.0\" y=\"537.0\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"700.0\" y=\"537.0\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n    </bpmndi:BPMNPlane>\n  </bpmndi:BPMNDiagram>\n</definitions>\n```\n\nç„¶åæˆ‘ä»¬åœ¨ä¸»æµç¨‹ä¸­çš„`è‡ªåŠ¨ä»»åŠ¡ä¸€`ä¸­æˆ‘ä»¬æŠ›å‡ºå¼‚å¸¸\n\n```java\npublic class MyOneDelegate implements JavaDelegate {\n    @Override\n    public void execute(DelegateExecution execution) {\n\n        System.out.println(\"å®Œæˆè‡ªåŠ¨å®¡æ‰¹ä»»åŠ¡-----ã€‹MyOneDelegate\" + LocalDateTime.now().toString());\n        // ä¸šåŠ¡æ‰§è¡Œå‘ç°æœ‰é—®é¢˜ æ­¤å¤„çš„errorCodeéœ€è¦å’Œå®šä¹‰çš„erroræ ‡ç­¾ä¸­çš„errorCodeä¿æŒä¸€è‡´\n        throw new BpmnError(\"abcd\");\n    }\n}\n```\n\nç„¶åæˆ‘ä»¬åœ¨`è‡ªå®šä¹‰ä»»åŠ¡äºŒ`ä¸­ç®€å•å®šä¹‰ä¸€ä¸ªè¾“å‡ºå³å¯ã€‚ç„¶åæˆ‘ä»¬éƒ¨ç½²ä»»åŠ¡\n\n```java\n    @Test\n    public void test01() throws Exception{\n        ZipInputStream in = new ZipInputStream(SpringBootFlowableApplicationTests.class.getClassLoader().getResourceAsStream(\"é”™è¯¯å¯åŠ¨äº‹ä»¶.bar\"));\n        Deployment deployment = processEngine.getRepositoryService().createDeployment()\n                .addZipInputStream(in)\n                .name(\"é”™è¯¯å¯åŠ¨äº‹ä»¶\")\n                .deploy();\n        System.out.println(\"-----\");\n    }\n```\n\n\n\nç„¶åæˆ‘ä»¬å†å¯åŠ¨æµç¨‹å®ä¾‹ï¼Œé‚£ä¹ˆè‡ªåŠ¨ä»»åŠ¡ä¸€å°±ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œç„¶åå¯¹åº”çš„å­æµç¨‹å°±ä¼šå¼€å§‹\n\n```java\n    /**\n     * å¯åŠ¨æµç¨‹å®ä¾‹\n     *\n     */\n    @Test\n    public void startProcessInstanceByKey()  throws Exception{\n\n        processEngine.getRuntimeService()\n                .startProcessInstanceById(\"myProcess:1:c0462994-af79-11ec-8cae-c03c59ad2248\");\n        System.out.println(\"å¼€å§‹å¯åŠ¨çš„æ—¶é—´ï¼š\" + LocalDateTime.now().toString());\n        // éœ€è¦åœ¨æ­¤é˜»å¡æ¯”ç­‰å¾…é•¿çš„æ—¶é—´\n        TimeUnit.MINUTES.sleep(3);\n    }\n```\n\n\n\nè¾“å‡ºç»“æœè·å–åˆ°äº†æˆ‘ä»¬æœŸæœ›çš„ç»“æœ\n\n![image-20220330000557061](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220330000557061.png)\n\n\n\n\n\né€šè¿‡è¾“å‡ºç»“æœä¹Ÿå¯ä»¥çœ‹åˆ°æ‰§è¡Œçš„è‡ªåŠ¨ä»»åŠ¡ä¸€åï¼ŒæŠ›å‡ºé”™è¯¯äº‹ä»¶`abcd`,å­æµç¨‹è§¦å‘å¹¶æ‰§è¡Œäº†ã€‚\n\n![image-20220330000741836](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220330000741836.png)\n\n\n\n\n\n### è¾¹ç•Œäº‹ä»¶\n\nå®šä¹‰å¦‚ä¸‹çš„æµç¨‹å›¾ï¼š\n\n![image-20220330004335187](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220330004335187.png)\n\næ³¨æ„ç»˜åˆ¶çš„æ—¶å€™\n\n![image-20220330004644673](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220330004644673.png)\n\nxmlæ–‡ä»¶å†…å®¹ä¸ºï¼š\n\n```xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<definitions xmlns=\"http://www.omg.org/spec/BPMN/20100524/MODEL\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:activiti=\"http://activiti.org/bpmn\" xmlns:bpmndi=\"http://www.omg.org/spec/BPMN/20100524/DI\" xmlns:omgdc=\"http://www.omg.org/spec/DD/20100524/DC\" xmlns:omgdi=\"http://www.omg.org/spec/DD/20100524/DI\" typeLanguage=\"http://www.w3.org/2001/XMLSchema\" expressionLanguage=\"http://www.w3.org/1999/XPath\" targetNamespace=\"http://www.activiti.org/test\">\n    <error id=\"error02\" errorCode=\"a123\" ></error>\n    <process id=\"myProcess\" name=\"My process\" isExecutable=\"true\">\n        <startEvent id=\"startevent1\" name=\"Start\"></startEvent>\n        <serviceTask id=\"servicetask2\" name=\"è‡ªåŠ¨ä»»åŠ¡äºŒ\" activiti:class=\"com.bobo.delegate.MyTwoDelegate\"></serviceTask>\n        <serviceTask id=\"servicetask3\" name=\"è‡ªåŠ¨ä»»åŠ¡ä¸‰\" activiti:class=\"com.bobo.delegate.MyThreeDelegate\"></serviceTask>\n        <endEvent id=\"endevent2\" name=\"End\"></endEvent>\n        <sequenceFlow id=\"flow5\" sourceRef=\"servicetask2\" targetRef=\"endevent2\"></sequenceFlow>\n        <endEvent id=\"endevent3\" name=\"End\"></endEvent>\n        <sequenceFlow id=\"flow6\" sourceRef=\"servicetask3\" targetRef=\"endevent3\"></sequenceFlow>\n        <subProcess id=\"subprocess1\" name=\"Sub Process\">\n            <startEvent id=\"startevent2\" name=\"Start\"></startEvent>\n            <serviceTask id=\"servicetask4\" name=\"Service Task\" activiti:class=\"com.bobo.delegate.MyOneDelegate\"></serviceTask>\n            <endEvent id=\"endevent4\" name=\"End\"></endEvent>\n            <sequenceFlow id=\"flow10\" sourceRef=\"servicetask4\" targetRef=\"endevent4\"></sequenceFlow>\n            <sequenceFlow id=\"flow11\" sourceRef=\"startevent2\" targetRef=\"servicetask4\"></sequenceFlow>\n        </subProcess>\n        <sequenceFlow id=\"flow8\" sourceRef=\"startevent1\" targetRef=\"subprocess1\"></sequenceFlow>\n        <sequenceFlow id=\"flow9\" sourceRef=\"subprocess1\" targetRef=\"servicetask2\"></sequenceFlow>\n        <boundaryEvent id=\"boundaryerror1\" name=\"Error\" attachedToRef=\"subprocess1\">\n            <errorEventDefinition errorRef=\"error02\"></errorEventDefinition>\n        </boundaryEvent>\n        <sequenceFlow id=\"flow12\" sourceRef=\"boundaryerror1\" targetRef=\"servicetask3\"></sequenceFlow>\n    </process>\n    <bpmndi:BPMNDiagram id=\"BPMNDiagram_myProcess\">\n        <bpmndi:BPMNPlane bpmnElement=\"myProcess\" id=\"BPMNPlane_myProcess\">\n            <bpmndi:BPMNShape bpmnElement=\"startevent1\" id=\"BPMNShape_startevent1\">\n                <omgdc:Bounds height=\"35.0\" width=\"35.0\" x=\"402.0\" y=\"388.0\"></omgdc:Bounds>\n            </bpmndi:BPMNShape>\n            <bpmndi:BPMNShape bpmnElement=\"servicetask2\" id=\"BPMNShape_servicetask2\">\n                <omgdc:Bounds height=\"55.0\" width=\"105.0\" x=\"1285.0\" y=\"368.0\"></omgdc:Bounds>\n            </bpmndi:BPMNShape>\n            <bpmndi:BPMNShape bpmnElement=\"servicetask3\" id=\"BPMNShape_servicetask3\">\n                <omgdc:Bounds height=\"55.0\" width=\"105.0\" x=\"1099.0\" y=\"590.0\"></omgdc:Bounds>\n            </bpmndi:BPMNShape>\n            <bpmndi:BPMNShape bpmnElement=\"endevent2\" id=\"BPMNShape_endevent2\">\n                <omgdc:Bounds height=\"35.0\" width=\"35.0\" x=\"1440.0\" y=\"378.0\"></omgdc:Bounds>\n            </bpmndi:BPMNShape>\n            <bpmndi:BPMNShape bpmnElement=\"endevent3\" id=\"BPMNShape_endevent3\">\n                <omgdc:Bounds height=\"35.0\" width=\"35.0\" x=\"1320.0\" y=\"600.0\"></omgdc:Bounds>\n            </bpmndi:BPMNShape>\n            <bpmndi:BPMNShape bpmnElement=\"subprocess1\" id=\"BPMNShape_subprocess1\">\n                <omgdc:Bounds height=\"271.0\" width=\"451.0\" x=\"660.0\" y=\"270.0\"></omgdc:Bounds>\n            </bpmndi:BPMNShape>\n            <bpmndi:BPMNShape bpmnElement=\"startevent2\" id=\"BPMNShape_startevent2\">\n                <omgdc:Bounds height=\"35.0\" width=\"35.0\" x=\"720.0\" y=\"390.0\"></omgdc:Bounds>\n            </bpmndi:BPMNShape>\n            <bpmndi:BPMNShape bpmnElement=\"servicetask4\" id=\"BPMNShape_servicetask4\">\n                <omgdc:Bounds height=\"55.0\" width=\"105.0\" x=\"850.0\" y=\"381.0\"></omgdc:Bounds>\n            </bpmndi:BPMNShape>\n            <bpmndi:BPMNShape bpmnElement=\"endevent4\" id=\"BPMNShape_endevent4\">\n                <omgdc:Bounds height=\"35.0\" width=\"35.0\" x=\"1030.0\" y=\"391.0\"></omgdc:Bounds>\n            </bpmndi:BPMNShape>\n            <bpmndi:BPMNShape bpmnElement=\"boundaryerror1\" id=\"BPMNShape_boundaryerror1\">\n                <omgdc:Bounds height=\"30.0\" width=\"30.0\" x=\"950.0\" y=\"520.0\"></omgdc:Bounds>\n            </bpmndi:BPMNShape>\n            <bpmndi:BPMNEdge bpmnElement=\"flow5\" id=\"BPMNEdge_flow5\">\n                <omgdi:waypoint x=\"1390.0\" y=\"395.0\"></omgdi:waypoint>\n                <omgdi:waypoint x=\"1440.0\" y=\"395.0\"></omgdi:waypoint>\n            </bpmndi:BPMNEdge>\n            <bpmndi:BPMNEdge bpmnElement=\"flow6\" id=\"BPMNEdge_flow6\">\n                <omgdi:waypoint x=\"1204.0\" y=\"617.0\"></omgdi:waypoint>\n                <omgdi:waypoint x=\"1320.0\" y=\"617.0\"></omgdi:waypoint>\n            </bpmndi:BPMNEdge>\n            <bpmndi:BPMNEdge bpmnElement=\"flow10\" id=\"BPMNEdge_flow10\">\n                <omgdi:waypoint x=\"955.0\" y=\"408.0\"></omgdi:waypoint>\n                <omgdi:waypoint x=\"1030.0\" y=\"408.0\"></omgdi:waypoint>\n            </bpmndi:BPMNEdge>\n            <bpmndi:BPMNEdge bpmnElement=\"flow11\" id=\"BPMNEdge_flow11\">\n                <omgdi:waypoint x=\"755.0\" y=\"407.0\"></omgdi:waypoint>\n                <omgdi:waypoint x=\"850.0\" y=\"408.0\"></omgdi:waypoint>\n            </bpmndi:BPMNEdge>\n            <bpmndi:BPMNEdge bpmnElement=\"flow8\" id=\"BPMNEdge_flow8\">\n                <omgdi:waypoint x=\"437.0\" y=\"405.0\"></omgdi:waypoint>\n                <omgdi:waypoint x=\"660.0\" y=\"405.0\"></omgdi:waypoint>\n            </bpmndi:BPMNEdge>\n            <bpmndi:BPMNEdge bpmnElement=\"flow9\" id=\"BPMNEdge_flow9\">\n                <omgdi:waypoint x=\"1111.0\" y=\"405.0\"></omgdi:waypoint>\n                <omgdi:waypoint x=\"1285.0\" y=\"395.0\"></omgdi:waypoint>\n            </bpmndi:BPMNEdge>\n            <bpmndi:BPMNEdge bpmnElement=\"flow12\" id=\"BPMNEdge_flow12\">\n                <omgdi:waypoint x=\"965.0\" y=\"550.0\"></omgdi:waypoint>\n                <omgdi:waypoint x=\"964.0\" y=\"617.0\"></omgdi:waypoint>\n                <omgdi:waypoint x=\"1099.0\" y=\"617.0\"></omgdi:waypoint>\n            </bpmndi:BPMNEdge>\n        </bpmndi:BPMNPlane>\n    </bpmndi:BPMNDiagram>\n</definitions>\n```\n\nå¯¹åº”çš„ä¸‰ä¸ªè‡ªå®šä¹‰ä»»åŠ¡ç»‘å®šçš„JavaDelegateä¸ºï¼š\n\n```java\npublic class MyOneDelegate implements JavaDelegate {\n    @Override\n    public void execute(DelegateExecution execution) {\n\n        System.out.println(\"å®Œæˆè‡ªåŠ¨å®¡æ‰¹ä»»åŠ¡-----ã€‹MyOneDelegate\" + LocalDateTime.now().toString());\n        // ä¸šåŠ¡æ‰§è¡Œå‘ç°æœ‰é—®é¢˜ æ­¤å¤„çš„errorCodeéœ€è¦å’Œå®šä¹‰çš„erroræ ‡ç­¾ä¸­çš„errorCodeä¿æŒä¸€è‡´\n        throw new BpmnError(\"a123\");\n    }\n}\n\npublic class MyTwoDelegate implements JavaDelegate {\n    @Override\n    public void execute(DelegateExecution execution) {\n        System.out.println(\"MyTwoDelegate---->æ‰§è¡Œäº†\" + LocalDateTime.now().toString());\n    }\n}\n\npublic class MyThreeDelegate implements JavaDelegate {\n    @Override\n    public void execute(DelegateExecution execution) {\n        System.out.println(\"MyThreeDelegate---->æ‰§è¡Œäº†\" + LocalDateTime.now().toString());\n    }\n}\n```\n\nç„¶åæˆ‘ä»¬éƒ¨ç½²æ–‡ä»¶\n\n```java\n    @Test\n    public void test01() throws Exception{\n        ZipInputStream in = new ZipInputStream(SpringBootFlowableApplicationTests.class\n                .getClassLoader()\n                .getResourceAsStream(\"é”™è¯¯è¾¹ç•Œäº‹ä»¶.bar\"));\n        Deployment deployment = processEngine.getRepositoryService().createDeployment()\n                .addZipInputStream(in)\n                .name(\"é”™è¯¯è¾¹ç•Œäº‹ä»¶\")\n                .deploy();\n        System.out.println(\"-----\");\n    }\n```\n\néƒ¨ç½²æˆåŠŸåæˆ‘ä»¬å†å¯åŠ¨ä¸€ä¸ªæµç¨‹å®ä¾‹ï¼Œè¿›å…¥åˆ°è‡ªå®šä¹‰ä»»åŠ¡ä¸€å¤„ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œè§¦å‘è¾¹ç•Œå¼‚å¸¸å¤„ç†\n\n![image-20220330003624235](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220330003624235.png)\n\nè¾“å‡ºçš„ç»“æœå’Œæˆ‘ä»¬é¢„æœŸçš„æ˜¯ä¸€æ ·çš„\n\n\n\n\n\n## ä¿¡å·äº‹ä»¶\n\n### å¼€å§‹äº‹ä»¶\n\n\n\n![image-20220330095103789](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220330095103789.png)\n\nç„¶åè®¾ç½®ç›¸å…³çš„å±æ€§ï¼Œå¹¶å®šä¹‰ä¸€ä¸ªä¿¡å·\n\n![image-20220330095157518](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220330095157518.png)\n\nç„¶ååœ¨æˆ‘ä»¬å£°æ˜çš„ä¿¡å·å¼€å§‹å¼•ç”¨æˆ‘ä»¬ä¸Šé¢åˆ›å»ºçš„ä¿¡å·\n\n![image-20220330095725130](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220330095725130.png)\n\nå®Œæ•´çš„xmlæ–‡ä»¶\n\n```xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<definitions xmlns=\"http://www.omg.org/spec/BPMN/20100524/MODEL\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:flowable=\"http://flowable.org/bpmn\" xmlns:bpmndi=\"http://www.omg.org/spec/BPMN/20100524/DI\" xmlns:omgdc=\"http://www.omg.org/spec/DD/20100524/DC\" xmlns:omgdi=\"http://www.omg.org/spec/DD/20100524/DI\" typeLanguage=\"http://www.w3.org/2001/XMLSchema\" expressionLanguage=\"http://www.w3.org/1999/XPath\" targetNamespace=\"http://www.flowable.org/processdef\" exporter=\"Flowable Open Source Modeler\" exporterVersion=\"6.7.2\">\n  <signal id=\"signal01\" name=\"firstSignal\" flowable:scope=\"global\"></signal>\n  <process id=\"event2001\" name=\"ä¿¡å·å¯åŠ¨äº‹ä»¶\" isExecutable=\"true\">\n    <startEvent id=\"start01\" name=\"ä¿¡å·å¼€å§‹\" isInterrupting=\"true\">\n      <signalEventDefinition signalRef=\"signal01\"></signalEventDefinition>\n    </startEvent>\n    <serviceTask id=\"task1\" name=\"è‡ªåŠ¨ä»»åŠ¡\" flowable:class=\"com.bobo.flow.delegate.MyTwoJavaDelegate\"></serviceTask>\n    <endEvent id=\"end01\" name=\"ç»“æŸ\"></endEvent>\n    <sequenceFlow id=\"sid-0FF05CCE-85CB-416C-8D36-A935AF9586C2\" sourceRef=\"task1\" targetRef=\"end01\"></sequenceFlow>\n    <sequenceFlow id=\"sid-C8AD1AEE-5FCB-4419-8596-74532DD71ABC\" sourceRef=\"start01\" targetRef=\"task1\"></sequenceFlow>\n  </process>\n  <bpmndi:BPMNDiagram id=\"BPMNDiagram_event2001\">\n    <bpmndi:BPMNPlane bpmnElement=\"event2001\" id=\"BPMNPlane_event2001\">\n      <bpmndi:BPMNShape bpmnElement=\"start01\" id=\"BPMNShape_start01\">\n        <omgdc:Bounds height=\"30.0\" width=\"30.0\" x=\"285.0\" y=\"172.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"task1\" id=\"BPMNShape_task1\">\n        <omgdc:Bounds height=\"80.0\" width=\"100.0\" x=\"467.5\" y=\"147.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"end01\" id=\"BPMNShape_end01\">\n        <omgdc:Bounds height=\"28.0\" width=\"28.0\" x=\"612.5\" y=\"173.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNEdge bpmnElement=\"sid-C8AD1AEE-5FCB-4419-8596-74532DD71ABC\" id=\"BPMNEdge_sid-C8AD1AEE-5FCB-4419-8596-74532DD71ABC\" flowable:sourceDockerX=\"15.0\" flowable:sourceDockerY=\"15.0\" flowable:targetDockerX=\"50.0\" flowable:targetDockerY=\"40.0\">\n        <omgdi:waypoint x=\"314.94999961358405\" y=\"187.0\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"467.4999999999399\" y=\"187.0\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"sid-0FF05CCE-85CB-416C-8D36-A935AF9586C2\" id=\"BPMNEdge_sid-0FF05CCE-85CB-416C-8D36-A935AF9586C2\" flowable:sourceDockerX=\"50.0\" flowable:sourceDockerY=\"40.0\" flowable:targetDockerX=\"14.0\" flowable:targetDockerY=\"14.0\">\n        <omgdi:waypoint x=\"567.449999999996\" y=\"187.0\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"612.5\" y=\"187.0\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n    </bpmndi:BPMNPlane>\n  </bpmndi:BPMNDiagram>\n</definitions>\n```\n\néƒ¨ç½²æµç¨‹ï¼š\n\n```java\n   /**\n     * Deploy\n     */\n    @Test\n    void testDeploy() throws Exception {\n        //RepositoryService repositoryService = processEngine.getRepositoryService();\n        Deployment deploy = repositoryService.createDeployment()\n                .addClasspathResource(\"ä¿¡å·å¯åŠ¨äº‹ä»¶.bpmn20.xml\")\n                .name(\"ä¿¡å·å¯åŠ¨äº‹ä»¶\")\n                .deploy();\n        System.out.println(\"deploy.getId() = \" + deploy.getId());\n        System.out.println(\"deploy.getName() = \" + deploy.getName());\n        System.out.println(\"éƒ¨ç½²å¼€å§‹çš„æ—¶é—´ï¼š\" + new Date());\n        //TimeUnit.MINUTES.sleep(3);\n    }\n```\n\næµç¨‹æ˜¯ä¸€ä¸ªä¿¡æ¯å¯åŠ¨äº‹ä»¶ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦é‡Šæ”¾å¯¹åº”çš„ä¿¡å·æ¥è§¦å‘æµç¨‹çš„å¯åŠ¨\n\n```java\n    /**\n     * é€šè¿‡ä¿¡å·å‘é€æ¥è§¦å‘ä¿¡å·å¯åŠ¨äº‹ä»¶çš„æ‰§è¡Œ\n     * å…¨å±€çš„ä¿¡æ¯\n     */\n    @Test\n    void signalReceived() throws Exception {\n        runtimeService.signalEventReceived(\"firstSignal\");\n        // æˆ‘ä»¬å¾—ä¿è¯å®¹å™¨çš„è¿è¡Œï¼Œæ‰€ä»¥éœ€è¦é˜»å¡\n        TimeUnit.MINUTES.sleep(1);\n    }\n```\n\né€šè¿‡è¾“å‡ºè¯­å¥å¯ä»¥çœ‹åˆ°è‡ªå®šä¹‰ä»»åŠ¡è§¦å‘äº†\n\n![image-20220330100203036](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220330100203036.png)\n\n\n\næˆ‘ä»¬å¯ä»¥æŠŠä¿¡æ¯çš„ä½œç”¨åŸŸç”±åŸæ¥çš„golbalå…¨å±€çš„è°ƒæ•´ä¸ºprocessInstanceï¼Œæµ‹è¯•åå‘ç°è¿˜æ˜¯æ‰§è¡Œäº†ï¼Œè¯´æ˜åœ¨å¯åŠ¨äº‹ä»¶ä¿¡æ¯çš„ä½œç”¨åŸŸå…¶å®æ˜¯ä¸èµ·ä½œç”¨çš„ã€‚\n\n```java\n  <signal id=\"signal01\" name=\"firstSignal\" flowable:scope=\"processInstance\"></signal>\n```\n\n\n\n### ä¸­é—´æ•è·äº‹ä»¶\n\næ¡ˆä¾‹å¦‚ä¸‹ï¼šå½“æˆ‘ä»¬å¯åŠ¨äº‹ä»¶åï¼Œä¼šé˜»å¡åœ¨è¿™ä¸ªæ¶ˆæ¯è·å–ä¸­é—´äº‹ä»¶å¤„ï¼Œç­‰å¾…ç›¸å…³ä¿¡å·åæ‰ä¼šç»§ç»­æµè½¬ã€‚\n\n![image-20220330101820083](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220330101820083.png)\n\nå¯¹åº”çš„ä¿¡å·ç»‘å®š\n\n```xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<definitions xmlns=\"http://www.omg.org/spec/BPMN/20100524/MODEL\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:flowable=\"http://flowable.org/bpmn\" xmlns:bpmndi=\"http://www.omg.org/spec/BPMN/20100524/DI\" xmlns:omgdc=\"http://www.omg.org/spec/DD/20100524/DC\" xmlns:omgdi=\"http://www.omg.org/spec/DD/20100524/DI\" typeLanguage=\"http://www.w3.org/2001/XMLSchema\" expressionLanguage=\"http://www.w3.org/1999/XPath\" targetNamespace=\"http://www.flowable.org/processdef\" exporter=\"Flowable Open Source Modeler\" exporterVersion=\"6.7.2\">\n  <signal id=\"singnal02\" name=\"secondSingal\" flowable:scope=\"global\"></signal>\n  <process id=\"event2002\" name=\"ä¿¡å·ä¸­é—´æ•è·äº‹ä»¶\" isExecutable=\"true\">\n    <startEvent id=\"start01\" name=\"å¼€å§‹\" flowable:formFieldValidation=\"true\"></startEvent>\n    <intermediateCatchEvent id=\"signal01\" name=\"ä¿¡å·æ•è·ä¸­é—´äº‹ä»¶\">\n      <signalEventDefinition signalRef=\"singnal02\"></signalEventDefinition>\n    </intermediateCatchEvent>\n    <sequenceFlow id=\"sid-FBD95BC3-BA38-4863-95E6-E7D484FE80CB\" sourceRef=\"start01\" targetRef=\"signal01\"></sequenceFlow>\n    <serviceTask id=\"task01\" name=\"è‡ªåŠ¨ä»»åŠ¡\" flowable:class=\"com.bobo.flow.delegate.MyTwoJavaDelegate\"></serviceTask>\n    <sequenceFlow id=\"sid-BF5FB671-5895-4FAC-8F92-E4BC4DEE821A\" sourceRef=\"signal01\" targetRef=\"task01\"></sequenceFlow>\n    <endEvent id=\"end01\" name=\"ç»“æŸä»»åŠ¡\"></endEvent>\n    <sequenceFlow id=\"sid-4F4853C5-0FE6-48AB-BD80-A37CF807D90D\" sourceRef=\"task01\" targetRef=\"end01\"></sequenceFlow>\n  </process>\n  <bpmndi:BPMNDiagram id=\"BPMNDiagram_event2002\">\n    <bpmndi:BPMNPlane bpmnElement=\"event2002\" id=\"BPMNPlane_event2002\">\n      <bpmndi:BPMNShape bpmnElement=\"start01\" id=\"BPMNShape_start01\">\n        <omgdc:Bounds height=\"30.0\" width=\"30.0\" x=\"120.0\" y=\"150.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"signal01\" id=\"BPMNShape_signal01\">\n        <omgdc:Bounds height=\"30.0\" width=\"30.0\" x=\"318.5\" y=\"150.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"task01\" id=\"BPMNShape_task01\">\n        <omgdc:Bounds height=\"80.0\" width=\"100.0\" x=\"495.5\" y=\"122.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"end01\" id=\"BPMNShape_end01\">\n        <omgdc:Bounds height=\"28.0\" width=\"28.0\" x=\"690.0\" y=\"151.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNEdge bpmnElement=\"sid-BF5FB671-5895-4FAC-8F92-E4BC4DEE821A\" id=\"BPMNEdge_sid-BF5FB671-5895-4FAC-8F92-E4BC4DEE821A\" flowable:sourceDockerX=\"15.0\" flowable:sourceDockerY=\"15.0\" flowable:targetDockerX=\"50.0\" flowable:targetDockerY=\"40.0\">\n        <omgdi:waypoint x=\"348.44853390329115\" y=\"164.78775666509335\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"495.49999999999903\" y=\"162.7068396226415\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"sid-4F4853C5-0FE6-48AB-BD80-A37CF807D90D\" id=\"BPMNEdge_sid-4F4853C5-0FE6-48AB-BD80-A37CF807D90D\" flowable:sourceDockerX=\"50.0\" flowable:sourceDockerY=\"40.0\" flowable:targetDockerX=\"14.0\" flowable:targetDockerY=\"14.0\">\n        <omgdi:waypoint x=\"595.4499999999996\" y=\"162.94542586750788\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"690.0016973189436\" y=\"164.73506227304313\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"sid-FBD95BC3-BA38-4863-95E6-E7D484FE80CB\" id=\"BPMNEdge_sid-FBD95BC3-BA38-4863-95E6-E7D484FE80CB\" flowable:sourceDockerX=\"15.0\" flowable:sourceDockerY=\"15.0\" flowable:targetDockerX=\"15.0\" flowable:targetDockerY=\"15.0\">\n        <omgdi:waypoint x=\"149.94999953609073\" y=\"165.0\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"318.5\" y=\"165.0\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n    </bpmndi:BPMNPlane>\n  </bpmndi:BPMNDiagram>\n</definitions>\n```\n\nå…ˆéƒ¨ç½²ï¼š\n\n```java\n    /**\n     * Deploy\n     */\n    @Test\n    void testDeploy() throws Exception {\n        //RepositoryService repositoryService = processEngine.getRepositoryService();\n        Deployment deploy = repositoryService.createDeployment()\n                .addClasspathResource(\"ä¿¡å·ä¸­é—´æ•è·äº‹ä»¶.bpmn20.xml\")\n                .name(\"ä¿¡å·ä¸­é—´æ•è·äº‹ä»¶\")\n                .deploy();\n        System.out.println(\"deploy.getId() = \" + deploy.getId());\n        System.out.println(\"deploy.getName() = \" + deploy.getName());\n        System.out.println(\"éƒ¨ç½²å¼€å§‹çš„æ—¶é—´ï¼š\" + new Date());\n        //TimeUnit.MINUTES.sleep(3);\n    }\n```\n\nç„¶åæˆ‘ä»¬éœ€è¦å¯åŠ¨æµç¨‹ï¼š\n\n```java\n    @Test\n    void startFlow() throws Exception{\n        runtimeService.startProcessInstanceById(\"event2002:1:adc5b8f8-afcf-11ec-959a-c03c59ad2248\");\n        System.out.println(\"å¯åŠ¨æ—¶é—´ï¼š\" + new Date());\n    }\n```\n\nå‘é€ä¿¡å·ä¿¡æ¯\n\n```java\n    /**\n     * é€šè¿‡ä¿¡å·å‘é€æ¥è§¦å‘ä¿¡å·å¯åŠ¨äº‹ä»¶çš„æ‰§è¡Œ\n     * å…¨å±€çš„ä¿¡æ¯\n     */\n    @Test\n    void signalGolbal() throws Exception {\n        runtimeService.signalEventReceived(\"secondSingal\");\n        // æˆ‘ä»¬å¾—ä¿è¯å®¹å™¨çš„è¿è¡Œï¼Œæ‰€ä»¥éœ€è¦é˜»å¡\n        TimeUnit.MINUTES.sleep(1);\n    }\n```\n\nç„¶åè¢«æˆ‘ä»¬çš„ä¿¡å·æ•è·ä¸­é—´äº‹ä»¶æ•è·\n\n![image-20220330102256367](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220330102256367.png)\n\nä¿¡å·ä½œç”¨åŸŸä¸ºprocessInstanceçš„æƒ…å†µ\n\n![image-20220330102524238](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220330102524238.png)\n\n\n\né¦–å…ˆé’ˆå¯¹processInstanceçš„ä¿¡å·ï¼Œæˆ‘ä»¬å‘é€globalä¿¡å·æ˜¯ä¸ä¼šè¢«æ•è·çš„\n\n![image-20220330102808127](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220330102808127.png)\n\n\n\nç„¶åprocessInstanceçš„ä¿¡æ¯æˆ‘ä»¬éœ€è¦åœ¨æµç¨‹å®ä¾‹å†…éƒ¨æŠ›å‡ºä¿¡å·\n\n![image-20220330112205035](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220330112205035.png)\n\n\n\n### ä¸­é—´æŠ›å‡ºäº‹ä»¶\n\nä¿¡å·ä¸­é—´æŠ›å‡ºäº‹ä»¶ä¹Ÿå°±æ˜¯åœ¨æµç¨‹æ‰§è¡Œä¸­çš„æŸä¸ªèŠ‚ç‚¹æŠ›å‡ºäº†å¯¹åº”çš„ä¿¡å·ï¼Œç„¶åå¯¹åº”çš„ä¿¡å·ä¸­é—´æ•è·äº‹ä»¶å°±ä¼šè§¦å‘ï¼Œæˆ‘ä»¬é€šè¿‡å…·ä½“çš„æ¡ˆä¾‹æ¥æ¼”ç¤ºå¦‚ï¼š\n\n![image-20220330235847392](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220330235847392.png)\n\n\n\nå®šä¹‰ä¿¡æ¯ä¿¡æ¯ï¼š\n\n![image-20220330193530718](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220330193530718.png)\n\n\n\n\n\n\n\n![image-20220331000011215](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220331000011215.png)\n\nå®Œæ•´çš„xmlæ–‡ä»¶\n\n```xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<definitions xmlns=\"http://www.omg.org/spec/BPMN/20100524/MODEL\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:flowable=\"http://flowable.org/bpmn\" xmlns:bpmndi=\"http://www.omg.org/spec/BPMN/20100524/DI\" xmlns:omgdc=\"http://www.omg.org/spec/DD/20100524/DC\" xmlns:omgdi=\"http://www.omg.org/spec/DD/20100524/DI\" typeLanguage=\"http://www.w3.org/2001/XMLSchema\" expressionLanguage=\"http://www.w3.org/1999/XPath\" targetNamespace=\"http://www.flowable.org/processdef\" exporter=\"Flowable Open Source Modeler\" exporterVersion=\"6.7.2\">\n  <signal id=\"signal01\" name=\"signal01\" flowable:scope=\"global\"></signal>\n  <process id=\"event2003\" name=\"ä¿¡å·ä¸­é—´æŠ›å‡ºäº‹ä»¶\" isExecutable=\"true\">\n    <startEvent id=\"startId01\" flowable:formFieldValidation=\"true\"></startEvent>\n    <parallelGateway id=\"pid01\" name=\"å¹¶è¡Œç½‘å…³\"></parallelGateway>\n    <sequenceFlow id=\"sid-296CDB16-A9D3-4255-9E44-D7C6F5DA5058\" sourceRef=\"startId01\" targetRef=\"pid01\"></sequenceFlow>\n    <serviceTask id=\"task01\" name=\"è‡ªåŠ¨ä»»åŠ¡ä¸€\" flowable:class=\"com.bobo.delegate.MyOneDelegate\"></serviceTask>\n    <serviceTask id=\"task02\" name=\"è‡ªåŠ¨ä»»åŠ¡äºŒ\" flowable:class=\"com.bobo.delegate.MyTwoDelegate\"></serviceTask>\n    <serviceTask id=\"task03\" name=\"è‡ªåŠ¨ä»»åŠ¡ä¸‰\" flowable:class=\"com.bobo.delegate.MyThreeDelegate\"></serviceTask>\n    <sequenceFlow id=\"sid-2325ED54-C769-4161-A00F-001F006B72B5\" sourceRef=\"pid01\" targetRef=\"task01\"></sequenceFlow>\n    <intermediateThrowEvent id=\"sid-262D1C04-299C-4DE6-BAD9-B8AA0FC4EBAB\">\n      <signalEventDefinition signalRef=\"signal01\"></signalEventDefinition>\n    </intermediateThrowEvent>\n    <intermediateCatchEvent id=\"sid-51D70059-8D15-4BF7-9151-48CCD99544F1\">\n      <signalEventDefinition signalRef=\"signal01\"></signalEventDefinition>\n    </intermediateCatchEvent>\n    <sequenceFlow id=\"sid-4A038E06-A731-4A5F-A929-840FB8A92AA5\" sourceRef=\"task01\" targetRef=\"sid-262D1C04-299C-4DE6-BAD9-B8AA0FC4EBAB\"></sequenceFlow>\n    <sequenceFlow id=\"sid-1C87EF67-D60F-47A3-A5B4-06FBC6F2390D\" sourceRef=\"sid-262D1C04-299C-4DE6-BAD9-B8AA0FC4EBAB\" targetRef=\"task02\"></sequenceFlow>\n    <sequenceFlow id=\"sid-DAC2B128-B6A7-48A2-8010-8AC6A806C04D\" sourceRef=\"pid01\" targetRef=\"sid-51D70059-8D15-4BF7-9151-48CCD99544F1\"></sequenceFlow>\n    <sequenceFlow id=\"sid-0ABE23AE-344C-49D8-B574-010DECD093BE\" sourceRef=\"sid-51D70059-8D15-4BF7-9151-48CCD99544F1\" targetRef=\"task03\"></sequenceFlow>\n    <parallelGateway id=\"pid02\" name=\"å¹¶è¡Œç½‘å…³\"></parallelGateway>\n    <sequenceFlow id=\"sid-584ADF4E-9140-4E5A-A396-1257E1436704\" sourceRef=\"task02\" targetRef=\"pid02\"></sequenceFlow>\n    <sequenceFlow id=\"sid-857F5F7F-7EA9-4986-9270-FFBF13E0B8CD\" sourceRef=\"task03\" targetRef=\"pid02\"></sequenceFlow>\n    <endEvent id=\"end01\" name=\"ç»“æŸ\"></endEvent>\n    <sequenceFlow id=\"sid-02646A89-FCEC-4E7F-95B8-61F2065DE8D4\" sourceRef=\"pid02\" targetRef=\"end01\"></sequenceFlow>\n  </process>\n  <bpmndi:BPMNDiagram id=\"BPMNDiagram_event2003\">\n    <bpmndi:BPMNPlane bpmnElement=\"event2003\" id=\"BPMNPlane_event2003\">\n      <bpmndi:BPMNShape bpmnElement=\"startId01\" id=\"BPMNShape_startId01\">\n        <omgdc:Bounds height=\"30.0\" width=\"30.0\" x=\"100.0\" y=\"163.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"pid01\" id=\"BPMNShape_pid01\">\n        <omgdc:Bounds height=\"40.0\" width=\"40.0\" x=\"270.0\" y=\"158.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"task01\" id=\"BPMNShape_task01\">\n        <omgdc:Bounds height=\"80.0\" width=\"100.0\" x=\"419.5\" y=\"71.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"task02\" id=\"BPMNShape_task02\">\n        <omgdc:Bounds height=\"80.0\" width=\"100.0\" x=\"780.0\" y=\"71.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"task03\" id=\"BPMNShape_task03\">\n        <omgdc:Bounds height=\"80.0\" width=\"100.0\" x=\"795.0\" y=\"255.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"sid-262D1C04-299C-4DE6-BAD9-B8AA0FC4EBAB\" id=\"BPMNShape_sid-262D1C04-299C-4DE6-BAD9-B8AA0FC4EBAB\">\n        <omgdc:Bounds height=\"30.0\" width=\"30.0\" x=\"633.5\" y=\"96.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"sid-51D70059-8D15-4BF7-9151-48CCD99544F1\" id=\"BPMNShape_sid-51D70059-8D15-4BF7-9151-48CCD99544F1\">\n        <omgdc:Bounds height=\"30.0\" width=\"30.0\" x=\"465.0\" y=\"278.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"pid02\" id=\"BPMNShape_pid02\">\n        <omgdc:Bounds height=\"40.0\" width=\"40.0\" x=\"994.5\" y=\"158.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"end01\" id=\"BPMNShape_end01\">\n        <omgdc:Bounds height=\"28.0\" width=\"28.0\" x=\"1079.5\" y=\"164.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNEdge bpmnElement=\"sid-4A038E06-A731-4A5F-A929-840FB8A92AA5\" id=\"BPMNEdge_sid-4A038E06-A731-4A5F-A929-840FB8A92AA5\" flowable:sourceDockerX=\"50.0\" flowable:sourceDockerY=\"40.0\" flowable:targetDockerX=\"15.0\" flowable:targetDockerY=\"15.0\">\n        <omgdi:waypoint x=\"519.45\" y=\"111.0\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"633.5\" y=\"111.0\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"sid-02646A89-FCEC-4E7F-95B8-61F2065DE8D4\" id=\"BPMNEdge_sid-02646A89-FCEC-4E7F-95B8-61F2065DE8D4\" flowable:sourceDockerX=\"20.5\" flowable:sourceDockerY=\"20.5\" flowable:targetDockerX=\"14.0\" flowable:targetDockerY=\"14.0\">\n        <omgdi:waypoint x=\"1034.0591869398208\" y=\"178.3782051282051\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"1079.5002755524838\" y=\"178.08885188426407\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"sid-857F5F7F-7EA9-4986-9270-FFBF13E0B8CD\" id=\"BPMNEdge_sid-857F5F7F-7EA9-4986-9270-FFBF13E0B8CD\" flowable:sourceDockerX=\"50.0\" flowable:sourceDockerY=\"40.0\" flowable:targetDockerX=\"20.0\" flowable:targetDockerY=\"20.0\">\n        <omgdi:waypoint x=\"894.9499999999999\" y=\"260.4867256637168\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"1002.6675392670157\" y=\"186.14712041884815\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"sid-1C87EF67-D60F-47A3-A5B4-06FBC6F2390D\" id=\"BPMNEdge_sid-1C87EF67-D60F-47A3-A5B4-06FBC6F2390D\" flowable:sourceDockerX=\"15.0\" flowable:sourceDockerY=\"15.0\" flowable:targetDockerX=\"50.0\" flowable:targetDockerY=\"40.0\">\n        <omgdi:waypoint x=\"663.4499994451444\" y=\"111.0\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"779.9999999999972\" y=\"111.0\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"sid-0ABE23AE-344C-49D8-B574-010DECD093BE\" id=\"BPMNEdge_sid-0ABE23AE-344C-49D8-B574-010DECD093BE\" flowable:sourceDockerX=\"15.0\" flowable:sourceDockerY=\"15.0\" flowable:targetDockerX=\"50.0\" flowable:targetDockerY=\"40.0\">\n        <omgdi:waypoint x=\"494.9497692355611\" y=\"293.0819166248564\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"794.9999999999911\" y=\"294.7260273972602\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"sid-584ADF4E-9140-4E5A-A396-1257E1436704\" id=\"BPMNEdge_sid-584ADF4E-9140-4E5A-A396-1257E1436704\" flowable:sourceDockerX=\"50.0\" flowable:sourceDockerY=\"40.0\" flowable:targetDockerX=\"20.0\" flowable:targetDockerY=\"20.0\">\n        <omgdi:waypoint x=\"879.9499999999999\" y=\"129.1390243902439\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"999.8065381558029\" y=\"172.67196819085487\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"sid-2325ED54-C769-4161-A00F-001F006B72B5\" id=\"BPMNEdge_sid-2325ED54-C769-4161-A00F-001F006B72B5\" flowable:sourceDockerX=\"20.5\" flowable:sourceDockerY=\"20.5\" flowable:targetDockerX=\"50.0\" flowable:targetDockerY=\"40.0\">\n        <omgdi:waypoint x=\"304.9870182555781\" y=\"173.0233265720081\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"419.49999999999994\" y=\"129.8358938547486\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"sid-DAC2B128-B6A7-48A2-8010-8AC6A806C04D\" id=\"BPMNEdge_sid-DAC2B128-B6A7-48A2-8010-8AC6A806C04D\" flowable:sourceDockerX=\"20.5\" flowable:sourceDockerY=\"20.5\" flowable:targetDockerX=\"15.0\" flowable:targetDockerY=\"15.0\">\n        <omgdi:waypoint x=\"302.31181354817494\" y=\"185.6374177631579\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"467.15151373509184\" y=\"285.24160328636844\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"sid-296CDB16-A9D3-4255-9E44-D7C6F5DA5058\" id=\"BPMNEdge_sid-296CDB16-A9D3-4255-9E44-D7C6F5DA5058\" flowable:sourceDockerX=\"15.0\" flowable:sourceDockerY=\"15.0\" flowable:targetDockerX=\"20.0\" flowable:targetDockerY=\"20.0\">\n        <omgdi:waypoint x=\"129.94999940317362\" y=\"178.0\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"270.0\" y=\"178.0\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n    </bpmndi:BPMNPlane>\n  </bpmndi:BPMNDiagram>\n</definitions>\n```\n\nä¸‰ä¸ªè‡ªå®šä¹‰ä»»åŠ¡ç»‘å®šäº†ä¸‰ä¸ªjavaDelegateåˆ†åˆ«ç»™å‡ºæ‰“å°è¯­å¥æ¥è®°å½•\n\n\n\nç„¶åéƒ¨ç½²ä»»åŠ¡\n\n```java\n    @Test\n    public void test02() throws Exception{\n\n        Deployment deployment = processEngine.getRepositoryService().createDeployment()\n                .addClasspathResource(\"ä¿¡å·ä¸­é—´æŠ›å‡ºäº‹ä»¶.bpmn20.xml\")\n                .name(\"ä¿¡å·ä¸­é—´æŠ›å‡ºäº‹ä»¶\")\n                .deploy();\n        System.out.println(\"-----\");\n    }\n```\n\nç„¶ååœ¨å¯åŠ¨ä»»åŠ¡å³å¯\n\n```java\n /**\n     * å¯åŠ¨æµç¨‹å®ä¾‹\n     *\n     */\n    @Test\n    public void startProcessInstanceByKey()  throws Exception{\n\n        processEngine.getRuntimeService()\n                .startProcessInstanceById(\"event2003:1:665b1533-b020-11ec-877d-c03c59ad2248\");\n        System.out.println(\"å¼€å§‹å¯åŠ¨çš„æ—¶é—´ï¼š\" + LocalDateTime.now().toString());\n        // éœ€è¦åœ¨æ­¤é˜»å¡æ¯”ç­‰å¾…é•¿çš„æ—¶é—´\n        TimeUnit.MINUTES.sleep(3);\n    }\n```\n\nçœ‹æ§åˆ¶å°çš„è¾“å‡º\n\n![image-20220330200124232](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220330200124232.png)\n\n\n\næ•ˆæœï¼š\n\n![image-20220330200235193](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220330200235193.png)\n\n### è¾¹ç•Œäº‹ä»¶\n\næœ€åæ¥çœ‹çœ‹ä¿¡å·è¾¹ç•Œäº‹ä»¶ï¼Œæ¡ˆä¾‹å¦‚ä¸‹ï¼š\n\n![image-20220330202443905](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220330202443905.png)\n\nå®Œæ•´çš„xmlå®šä¹‰ä¸º\n\n```xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<definitions xmlns=\"http://www.omg.org/spec/BPMN/20100524/MODEL\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:flowable=\"http://flowable.org/bpmn\" xmlns:bpmndi=\"http://www.omg.org/spec/BPMN/20100524/DI\" xmlns:omgdc=\"http://www.omg.org/spec/DD/20100524/DC\" xmlns:omgdi=\"http://www.omg.org/spec/DD/20100524/DI\" typeLanguage=\"http://www.w3.org/2001/XMLSchema\" expressionLanguage=\"http://www.w3.org/1999/XPath\" targetNamespace=\"http://www.flowable.org/processdef\" exporter=\"Flowable Open Source Modeler\" exporterVersion=\"6.7.2\">\n  <signal id=\"signal2\" name=\"signal2\" flowable:scope=\"global\"></signal>\n  <process id=\"event2004\" name=\"ä¿¡å·è¾¹ç•Œäº‹ä»¶\" isExecutable=\"true\">\n    <startEvent id=\"startEvent1\" flowable:formFieldValidation=\"true\"></startEvent>\n    <userTask id=\"sid-F11058BE-828A-45FF-A830-8BF099D71FBD\" name=\"äººå·¥ä»»åŠ¡\" flowable:assignee=\"zhangsan\" flowable:formFieldValidation=\"true\">\n      <extensionElements>\n        <modeler:initiator-can-complete xmlns:modeler=\"http://flowable.org/modeler\"><![CDATA[false]]></modeler:initiator-can-complete>\n      </extensionElements>\n    </userTask>\n    <sequenceFlow id=\"sid-D2EE279A-24A2-4B6C-8021-ADC0A1A645EC\" sourceRef=\"startEvent1\" targetRef=\"sid-F11058BE-828A-45FF-A830-8BF099D71FBD\"></sequenceFlow>\n    <serviceTask id=\"sid-FAB46591-3247-4776-B3B5-79826133F5AF\" name=\"è‡ªåŠ¨ä»»åŠ¡ä¸€\" flowable:class=\"com.bobo.delegate.MyOneDelegate\"></serviceTask>\n    <serviceTask id=\"sid-7CD0FBBA-4FE6-4646-B0D6-1D8A4D8D5515\" name=\"è‡ªåŠ¨ä»»åŠ¡äºŒ\" flowable:class=\"com.bobo.delegate.MyTwoDelegate\"></serviceTask>\n    <sequenceFlow id=\"sid-74B48035-4CED-4963-AA87-55D1FB95EEA8\" sourceRef=\"sid-F11058BE-828A-45FF-A830-8BF099D71FBD\" targetRef=\"sid-FAB46591-3247-4776-B3B5-79826133F5AF\"></sequenceFlow>\n    <endEvent id=\"sid-55682CDC-FEBD-44A1-B38C-A3F816AC91F4\"></endEvent>\n    <sequenceFlow id=\"sid-AC84425B-8D8C-4A0F-BDCC-BC1DCF909752\" sourceRef=\"sid-FAB46591-3247-4776-B3B5-79826133F5AF\" targetRef=\"sid-55682CDC-FEBD-44A1-B38C-A3F816AC91F4\"></sequenceFlow>\n    <endEvent id=\"sid-11CA784C-69DE-45B2-AE58-78E64CF2EE8E\"></endEvent>\n    <sequenceFlow id=\"sid-A2E3E7C7-9AD0-46B8-8105-272496599E0D\" sourceRef=\"sid-7CD0FBBA-4FE6-4646-B0D6-1D8A4D8D5515\" targetRef=\"sid-11CA784C-69DE-45B2-AE58-78E64CF2EE8E\"></sequenceFlow>\n    <boundaryEvent id=\"sid-8E473D8E-70D6-4AB3-B1D9-D3E7EFCDB39D\" attachedToRef=\"sid-F11058BE-828A-45FF-A830-8BF099D71FBD\" cancelActivity=\"true\">\n      <signalEventDefinition signalRef=\"signal2\"></signalEventDefinition>\n    </boundaryEvent>\n    <sequenceFlow id=\"sid-C3770DF2-1747-45A7-85B5-2838AB7ECF9C\" sourceRef=\"sid-8E473D8E-70D6-4AB3-B1D9-D3E7EFCDB39D\" targetRef=\"sid-7CD0FBBA-4FE6-4646-B0D6-1D8A4D8D5515\"></sequenceFlow>\n  </process>\n  <bpmndi:BPMNDiagram id=\"BPMNDiagram_event2004\">\n    <bpmndi:BPMNPlane bpmnElement=\"event2004\" id=\"BPMNPlane_event2004\">\n      <bpmndi:BPMNShape bpmnElement=\"startEvent1\" id=\"BPMNShape_startEvent1\">\n        <omgdc:Bounds height=\"30.0\" width=\"30.0\" x=\"100.0\" y=\"163.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"sid-F11058BE-828A-45FF-A830-8BF099D71FBD\" id=\"BPMNShape_sid-F11058BE-828A-45FF-A830-8BF099D71FBD\">\n        <omgdc:Bounds height=\"80.0\" width=\"100.0\" x=\"255.0\" y=\"138.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"sid-FAB46591-3247-4776-B3B5-79826133F5AF\" id=\"BPMNShape_sid-FAB46591-3247-4776-B3B5-79826133F5AF\">\n        <omgdc:Bounds height=\"80.0\" width=\"100.0\" x=\"521.5\" y=\"135.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"sid-7CD0FBBA-4FE6-4646-B0D6-1D8A4D8D5515\" id=\"BPMNShape_sid-7CD0FBBA-4FE6-4646-B0D6-1D8A4D8D5515\">\n        <omgdc:Bounds height=\"80.0\" width=\"100.0\" x=\"521.5\" y=\"315.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"sid-55682CDC-FEBD-44A1-B38C-A3F816AC91F4\" id=\"BPMNShape_sid-55682CDC-FEBD-44A1-B38C-A3F816AC91F4\">\n        <omgdc:Bounds height=\"28.0\" width=\"28.0\" x=\"690.0\" y=\"161.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"sid-11CA784C-69DE-45B2-AE58-78E64CF2EE8E\" id=\"BPMNShape_sid-11CA784C-69DE-45B2-AE58-78E64CF2EE8E\">\n        <omgdc:Bounds height=\"28.0\" width=\"28.0\" x=\"690.0\" y=\"341.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"sid-8E473D8E-70D6-4AB3-B1D9-D3E7EFCDB39D\" id=\"BPMNShape_sid-8E473D8E-70D6-4AB3-B1D9-D3E7EFCDB39D\">\n        <omgdc:Bounds height=\"30.0\" width=\"30.0\" x=\"308.4527694396093\" y=\"203.7233532460343\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNEdge bpmnElement=\"sid-C3770DF2-1747-45A7-85B5-2838AB7ECF9C\" id=\"BPMNEdge_sid-C3770DF2-1747-45A7-85B5-2838AB7ECF9C\" flowable:sourceDockerX=\"15.0\" flowable:sourceDockerY=\"15.0\" flowable:targetDockerX=\"50.0\" flowable:targetDockerY=\"40.0\">\n        <omgdi:waypoint x=\"336.557461183174\" y=\"225.9233207922021\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"521.4999999999999\" y=\"327.5301011331414\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"sid-74B48035-4CED-4963-AA87-55D1FB95EEA8\" id=\"BPMNEdge_sid-74B48035-4CED-4963-AA87-55D1FB95EEA8\" flowable:sourceDockerX=\"50.0\" flowable:sourceDockerY=\"40.0\" flowable:targetDockerX=\"50.0\" flowable:targetDockerY=\"40.0\">\n        <omgdi:waypoint x=\"354.95000000000005\" y=\"177.43714821763604\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"521.5\" y=\"175.56228893058162\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"sid-D2EE279A-24A2-4B6C-8021-ADC0A1A645EC\" id=\"BPMNEdge_sid-D2EE279A-24A2-4B6C-8021-ADC0A1A645EC\" flowable:sourceDockerX=\"15.0\" flowable:sourceDockerY=\"15.0\" flowable:targetDockerX=\"50.0\" flowable:targetDockerY=\"40.0\">\n        <omgdi:waypoint x=\"129.94999949366624\" y=\"178.0\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"254.99999999993574\" y=\"178.0\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"sid-A2E3E7C7-9AD0-46B8-8105-272496599E0D\" id=\"BPMNEdge_sid-A2E3E7C7-9AD0-46B8-8105-272496599E0D\" flowable:sourceDockerX=\"50.0\" flowable:sourceDockerY=\"40.0\" flowable:targetDockerX=\"14.0\" flowable:targetDockerY=\"14.0\">\n        <omgdi:waypoint x=\"621.4499999999999\" y=\"355.0\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"690.0\" y=\"355.0\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"sid-AC84425B-8D8C-4A0F-BDCC-BC1DCF909752\" id=\"BPMNEdge_sid-AC84425B-8D8C-4A0F-BDCC-BC1DCF909752\" flowable:sourceDockerX=\"50.0\" flowable:sourceDockerY=\"40.0\" flowable:targetDockerX=\"14.0\" flowable:targetDockerY=\"14.0\">\n        <omgdi:waypoint x=\"621.4499999999999\" y=\"175.0\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"690.0\" y=\"175.0\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n    </bpmndi:BPMNPlane>\n  </bpmndi:BPMNDiagram>\n</definitions>\n```\n\n\n\nå®šä¹‰çš„ä¿¡å·ä¸ºï¼š\n\n```xml\n<signal id=\"signal2\" name=\"signal2\" flowable:scope=\"global\"></signal>\n```\n\nè‡ªåŠ¨ä»»åŠ¡çš„å†…å®¹\n\n```java\npublic class MyOneDelegate implements JavaDelegate {\n    @Override\n    public void execute(DelegateExecution execution) {\n\n        System.out.println(\"å®Œæˆè‡ªåŠ¨å®¡æ‰¹ä»»åŠ¡-----ã€‹MyOneDelegate\" + LocalDateTime.now().toString());\n    }\n}\n\npublic class MyTwoDelegate implements JavaDelegate {\n    @Override\n    public void execute(DelegateExecution execution) {\n        System.out.println(\"MyTwoDelegate---->æ‰§è¡Œäº†\" + LocalDateTime.now().toString());\n    }\n}\n```\n\n\n\néƒ¨ç½²é¡¹ç›®ç„¶åå¯åŠ¨æµç¨‹\n\n```java\n    @Test\n    public void test02() throws Exception{\n\n        Deployment deployment = processEngine.getRepositoryService().createDeployment()\n                .addClasspathResource(\"ä¿¡å·è¾¹ç•Œäº‹ä»¶.bpmn20.xml\")\n                .name(\"ä¿¡å·è¾¹ç•Œäº‹ä»¶\")\n                .deploy();\n        System.out.println(\"-----\");\n    }\n\n    @Test\n    public void startProcessInstanceByKey()  throws Exception{\n\n        processEngine.getRuntimeService()\n                .startProcessInstanceById(\"event2004:1:e8b5c39f-b024-11ec-bdac-c03c59ad2248\");\n        System.out.println(\"å¼€å§‹å¯åŠ¨çš„æ—¶é—´ï¼š\" + LocalDateTime.now().toString());\n        // éœ€è¦åœ¨æ­¤é˜»å¡æ¯”ç­‰å¾…é•¿çš„æ—¶é—´\n        TimeUnit.MINUTES.sleep(3);\n    }\n```\n\n\n\n![image-20220330203056055](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220330203056055.png)\n\n\n\n```java\n    @Test\n    public void signalGlobal()  throws Exception{\n        String signal = \"signal2\";\n        Map<String, Object> variables = new HashMap();\n        processEngine.getRuntimeService().signalEventReceived(signal,variables);\n    }\n```\n\n![image-20220330203233862](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220330203233862.png)\n\n\n\né€šè¿‡è¾“å‡ºçœ‹åˆ°äº†æˆ‘ä»¬æœŸæœ›çš„ç»“æœäº†ï¼Œè¿™æ ·å°±ç»™å¤§å®¶ä»‹ç»å®Œäº†ä¿¡å·ç›¸å…³çš„å„ç§äº‹ä»¶äº†\n\n\n\n\n\n## ç»“æŸäº‹ä»¶\n\nç»“æŸäº‹ä»¶é¡¾åæ€ä¹‰å°±æ˜¯æµç¨‹ç»“æŸçš„äº‹ä»¶ï¼Œé™¤äº†å‰é¢é‡åˆ°çš„ç©ºç»“æŸäº‹ä»¶å¤–ï¼Œç»“æŸäº‹ä»¶è¿˜åŒ…æ‹¬å¦‚ä¸‹å‡ ç§ï¼š\n\n* é”™è¯¯ç»“æŸäº‹ä»¶\n* ä¸­æ–­ç»“æŸäº‹ä»¶\n* å–æ¶ˆç»“æŸäº‹ä»¶\n\n### é”™è¯¯ç»“æŸäº‹ä»¶\n\nå½“æµç¨‹æ‰§è¡Œåˆ°è¾¾**é”™è¯¯ç»“æŸäº‹ä»¶ï¼ˆerror end eventï¼‰**æ—¶ï¼Œç»“æŸæ‰§è¡Œçš„å½“å‰åˆ†æ”¯ï¼Œå¹¶æŠ›å‡ºé”™è¯¯ã€‚è¿™ä¸ªé”™è¯¯å¯ä»¥ç”±åŒ¹é…çš„é”™è¯¯è¾¹ç•Œä¸­é—´äº‹ä»¶æ•è·ã€‚å¦‚æœæ‰¾ä¸åˆ°åŒ¹é…çš„é”™è¯¯è¾¹ç•Œäº‹ä»¶ï¼Œå°†ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚é€šè¿‡å…·ä½“æ¡ˆä¾‹æ¥è¯¦ç»†è®²è§£ï¼š\n\n![image-20220331100340069](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220331100340069.png)\n\nå®Œæ•´çš„xmlæ–‡ä»¶\n\n```xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<definitions xmlns=\"http://www.omg.org/spec/BPMN/20100524/MODEL\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:flowable=\"http://flowable.org/bpmn\" xmlns:bpmndi=\"http://www.omg.org/spec/BPMN/20100524/DI\" xmlns:omgdc=\"http://www.omg.org/spec/DD/20100524/DC\" xmlns:omgdi=\"http://www.omg.org/spec/DD/20100524/DI\" typeLanguage=\"http://www.w3.org/2001/XMLSchema\" expressionLanguage=\"http://www.w3.org/1999/XPath\" targetNamespace=\"http://www.flowable.org/processdef\" exporter=\"Flowable Open Source Modeler\" exporterVersion=\"6.7.2\">\n  <error id=\"error03\" errorCode=\"error03\" ></error>\n  <process id=\"event5001\" name=\"é”™è¯¯ç»“æŸäº‹ä»¶\" isExecutable=\"true\">\n    <startEvent id=\"start01\" name=\"å¼€å§‹ä»»åŠ¡\" flowable:formFieldValidation=\"true\"></startEvent>\n    <subProcess id=\"sid-794CA748-4381-417F-8350-360E89907E84\" name=\"subProcess\">\n      <startEvent id=\"startc01\" name=\"å¼€å§‹å­æµç¨‹\" flowable:formFieldValidation=\"true\"></startEvent>\n      <serviceTask id=\"task01\" name=\"è‡ªåŠ¨ä»»åŠ¡ä¸€\" flowable:class=\"com.bobo.flow.delegate.MyOneJavaDelegate\"></serviceTask>\n      <exclusiveGateway id=\"p001\" name=\"æ’ä»–ç½‘å…³\"></exclusiveGateway>\n      <endEvent id=\"endc01\" name=\"å­æµç¨‹ç»“æŸ\"></endEvent>\n      <endEvent id=\"errorend01\" name=\"é”™è¯¯ç»“æŸäº‹ä»¶\">\n        <errorEventDefinition errorRef=\"error03\" flowable:errorVariableLocalScope=\"true\" flowable:errorVariableTransient=\"true\"></errorEventDefinition>\n      </endEvent>\n      <sequenceFlow id=\"sid-1B2782FA-5216-4817-B964-A77EDEBB7547\" sourceRef=\"startc01\" targetRef=\"task01\"></sequenceFlow>\n      <sequenceFlow id=\"sid-D2196400-20DC-4D6B-AAD2-AA9308CE8DEA\" sourceRef=\"task01\" targetRef=\"p001\"></sequenceFlow>\n      <sequenceFlow id=\"sid-DEC53745-1E74-4D08-B472-95F9A6B92D98\" sourceRef=\"p001\" targetRef=\"errorend01\">\n        <conditionExpression xsi:type=\"tFormalExpression\"><![CDATA[${flag<=0}]]></conditionExpression>\n      </sequenceFlow>\n    </subProcess>\n    <sequenceFlow id=\"sid-934F4EDF-16A9-4D4E-8D7A-4F8E1EEB0F9E\" sourceRef=\"start01\" targetRef=\"sid-794CA748-4381-417F-8350-360E89907E84\"></sequenceFlow>\n    <serviceTask id=\"task2\" name=\"è‡ªåŠ¨ä»»åŠ¡äºŒ\" flowable:class=\"com.bobo.flow.delegate.MyTwoJavaDelegate\"></serviceTask>\n    <sequenceFlow id=\"sid-E8166885-00F6-49A1-BE26-3AB98FE95455\" sourceRef=\"sid-794CA748-4381-417F-8350-360E89907E84\" targetRef=\"task2\"></sequenceFlow>\n    <endEvent id=\"end02\" name=\"ä¸»æµç¨‹ç»“æŸ\"></endEvent>\n    <sequenceFlow id=\"sid-496A30AE-44AC-4298-83E0-3183F3FF935B\" sourceRef=\"task2\" targetRef=\"end02\"></sequenceFlow>\n    <boundaryEvent id=\"perror01\" name=\"è¾¹ç•Œé”™è¯¯äº‹ä»¶\" attachedToRef=\"sid-794CA748-4381-417F-8350-360E89907E84\">\n      <errorEventDefinition errorRef=\"error03\" flowable:errorVariableLocalScope=\"true\" flowable:errorVariableTransient=\"true\"></errorEventDefinition>\n    </boundaryEvent>\n    <sequenceFlow id=\"sid-9562301E-B400-4D1F-89B8-23E69ADEAE68\" sourceRef=\"perror01\" targetRef=\"task3\"></sequenceFlow>\n    <serviceTask id=\"task3\" name=\"è‡ªåŠ¨ä»»åŠ¡ä¸‰\" flowable:class=\"com.bobo.flow.delegate.MyThreeJavaDelegate\"></serviceTask>\n    <endEvent id=\"end003\" name=\"ä¸»æµç¨‹ç»“æŸ\"></endEvent>\n    <sequenceFlow id=\"sid-436E29BF-7F5E-4A4B-8F62-C0AEA010F4D2\" sourceRef=\"task3\" targetRef=\"end003\"></sequenceFlow>\n    <sequenceFlow id=\"sid-C17C73A1-5853-496B-B686-E7911105D459\" sourceRef=\"sid-794CA748-4381-417F-8350-360E89907E84\" targetRef=\"endc01\">\n      <conditionExpression xsi:type=\"tFormalExpression\"><![CDATA[${flag>0}]]></conditionExpression>\n    </sequenceFlow>\n  </process>\n  <bpmndi:BPMNDiagram id=\"BPMNDiagram_event5001\">\n    <bpmndi:BPMNPlane bpmnElement=\"event5001\" id=\"BPMNPlane_event5001\">\n      <bpmndi:BPMNShape bpmnElement=\"start01\" id=\"BPMNShape_start01\">\n        <omgdc:Bounds height=\"30.0\" width=\"30.0\" x=\"75.0\" y=\"205.5\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"sid-794CA748-4381-417F-8350-360E89907E84\" id=\"BPMNShape_sid-794CA748-4381-417F-8350-360E89907E84\">\n        <omgdc:Bounds height=\"261.0\" width=\"593.0\" x=\"240.0\" y=\"90.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"startc01\" id=\"BPMNShape_startc01\">\n        <omgdc:Bounds height=\"30.0\" width=\"30.0\" x=\"285.0\" y=\"199.5\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"task01\" id=\"BPMNShape_task01\">\n        <omgdc:Bounds height=\"80.0\" width=\"100.0\" x=\"418.5\" y=\"174.5\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"p001\" id=\"BPMNShape_p001\">\n        <omgdc:Bounds height=\"40.0\" width=\"40.0\" x=\"563.5\" y=\"194.5\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"endc01\" id=\"BPMNShape_endc01\">\n        <omgdc:Bounds height=\"28.0\" width=\"28.0\" x=\"675.0\" y=\"150.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"errorend01\" id=\"BPMNShape_errorend01\">\n        <omgdc:Bounds height=\"28.0\" width=\"28.0\" x=\"675.0\" y=\"255.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"task2\" id=\"BPMNShape_task2\">\n        <omgdc:Bounds height=\"80.0\" width=\"100.0\" x=\"942.5\" y=\"176.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"end02\" id=\"BPMNShape_end02\">\n        <omgdc:Bounds height=\"28.0\" width=\"28.0\" x=\"1087.5\" y=\"202.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"perror01\" id=\"BPMNShape_perror01\">\n        <omgdc:Bounds height=\"30.0\" width=\"30.0\" x=\"478.02252392098524\" y=\"336.450017237985\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"task3\" id=\"BPMNShape_task3\">\n        <omgdc:Bounds height=\"80.0\" width=\"100.0\" x=\"665.5\" y=\"406.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"end003\" id=\"BPMNShape_end003\">\n        <omgdc:Bounds height=\"28.0\" width=\"28.0\" x=\"810.5\" y=\"432.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNEdge bpmnElement=\"sid-934F4EDF-16A9-4D4E-8D7A-4F8E1EEB0F9E\" id=\"BPMNEdge_sid-934F4EDF-16A9-4D4E-8D7A-4F8E1EEB0F9E\" flowable:sourceDockerX=\"15.0\" flowable:sourceDockerY=\"15.0\" flowable:targetDockerX=\"296.5\" flowable:targetDockerY=\"130.5\">\n        <omgdi:waypoint x=\"104.9499999082861\" y=\"220.5\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"240.0\" y=\"220.5\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"sid-9562301E-B400-4D1F-89B8-23E69ADEAE68\" id=\"BPMNEdge_sid-9562301E-B400-4D1F-89B8-23E69ADEAE68\" flowable:sourceDockerX=\"15.0\" flowable:sourceDockerY=\"15.0\" flowable:targetDockerX=\"1.0\" flowable:targetDockerY=\"40.0\">\n        <omgdi:waypoint x=\"493.02252392098524\" y=\"366.40001519452954\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"493.02252392098524\" y=\"446.0\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"665.4999999999623\" y=\"446.0\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"sid-E8166885-00F6-49A1-BE26-3AB98FE95455\" id=\"BPMNEdge_sid-E8166885-00F6-49A1-BE26-3AB98FE95455\" flowable:sourceDockerX=\"296.5\" flowable:sourceDockerY=\"130.5\" flowable:targetDockerX=\"50.0\" flowable:targetDockerY=\"40.0\">\n        <omgdi:waypoint x=\"832.9499999999987\" y=\"217.57401315789474\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"942.499999999999\" y=\"216.49292763157894\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"sid-436E29BF-7F5E-4A4B-8F62-C0AEA010F4D2\" id=\"BPMNEdge_sid-436E29BF-7F5E-4A4B-8F62-C0AEA010F4D2\" flowable:sourceDockerX=\"50.0\" flowable:sourceDockerY=\"40.0\" flowable:targetDockerX=\"14.0\" flowable:targetDockerY=\"14.0\">\n        <omgdi:waypoint x=\"765.4499999999999\" y=\"446.0\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"810.5\" y=\"446.0\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"sid-D2196400-20DC-4D6B-AAD2-AA9308CE8DEA\" id=\"BPMNEdge_sid-D2196400-20DC-4D6B-AAD2-AA9308CE8DEA\" flowable:sourceDockerX=\"50.0\" flowable:sourceDockerY=\"40.0\" flowable:targetDockerX=\"20.5\" flowable:targetDockerY=\"20.5\">\n        <omgdi:waypoint x=\"518.4499999999978\" y=\"214.71623376623376\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"563.9130434782609\" y=\"214.91304347826087\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"sid-496A30AE-44AC-4298-83E0-3183F3FF935B\" id=\"BPMNEdge_sid-496A30AE-44AC-4298-83E0-3183F3FF935B\" flowable:sourceDockerX=\"50.0\" flowable:sourceDockerY=\"40.0\" flowable:targetDockerX=\"14.0\" flowable:targetDockerY=\"14.0\">\n        <omgdi:waypoint x=\"1042.449999999996\" y=\"216.0\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"1087.5\" y=\"216.0\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"sid-C17C73A1-5853-496B-B686-E7911105D459\" id=\"BPMNEdge_sid-C17C73A1-5853-496B-B686-E7911105D459\" flowable:sourceDockerX=\"343.3984375\" flowable:sourceDockerY=\"106.0\" flowable:targetDockerX=\"14.0\" flowable:targetDockerY=\"14.0\">\n        <omgdi:waypoint x=\"583.3984375\" y=\"196.0\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"583.3984375\" y=\"164.0\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"675.0\" y=\"164.0\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"sid-1B2782FA-5216-4817-B964-A77EDEBB7547\" id=\"BPMNEdge_sid-1B2782FA-5216-4817-B964-A77EDEBB7547\" flowable:sourceDockerX=\"15.0\" flowable:sourceDockerY=\"15.0\" flowable:targetDockerX=\"50.0\" flowable:targetDockerY=\"40.0\">\n        <omgdi:waypoint x=\"314.949999356254\" y=\"214.5\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"418.5\" y=\"214.5\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"sid-DEC53745-1E74-4D08-B472-95F9A6B92D98\" id=\"BPMNEdge_sid-DEC53745-1E74-4D08-B472-95F9A6B92D98\" flowable:sourceDockerX=\"20.8984375\" flowable:sourceDockerY=\"36.5\" flowable:targetDockerX=\"14.0\" flowable:targetDockerY=\"14.0\">\n        <omgdi:waypoint x=\"584.3984375\" y=\"233.54821399278214\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"584.3984375\" y=\"269.0\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"675.0\" y=\"269.0\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n    </bpmndi:BPMNPlane>\n  </bpmndi:BPMNDiagram>\n</definitions>\n```\n\nå®šä¹‰çš„error\n\n```xml\n<error id=\"error01\" errorCode=\"error01\"></error>\n```\n\nåœ¨å­æµç¨‹ä¸­ï¼Œå½“flagçš„æ•°æ®ä¸º0çš„æ—¶å€™ï¼Œå°±ä¼šè§¦å‘é”™è¯¯ç»“æŸäº‹ä»¶\n\n```xml\n      <sequenceFlow id=\"1111\" sourceRef=\"12222\" targetRef=\"xxxxx44\">\n        <conditionExpression xsi:type=\"tFormalExpression\"><![CDATA[${flag==0}]]></conditionExpression>\n      </sequenceFlow>\n```\n\nç„¶åæˆ‘ä»¬åœ¨å­æµç¨‹ä¸Šç»‘å®šäº†ä¸€ä¸ªé”™è¯¯è¾¹ç•Œäº‹ä»¶ï¼Œç»‘å®šçš„ä¹Ÿæ˜¯error01,ä¹Ÿå°±æ˜¯å½“å­æµç¨‹è§¦å‘é”™è¯¯ç»“æŸäº‹ä»¶ï¼Œå°±ä¼šè§¦å‘è¿™ä¸ªè¾¹ç•Œäº‹ä»¶ï¼Œè¿›è€Œå®Œæˆè‡ªåŠ¨ä»»åŠ¡ä¸‰ã€‚\n\næµç¨‹ä¸­å…³è”çš„ä¸‰ä¸ªè‡ªåŠ¨ä»»åŠ¡éƒ½åªæ˜¯è¾“å‡ºä¸€ä¸ªæ‰“å°è¯­å¥~\n\nç„¶åæˆ‘ä»¬éœ€è¦åšçš„æ“ä½œæœ‰ï¼Œéƒ¨ç½²ï¼Œå¯åŠ¨æµç¨‹ç»‘å®šæµç¨‹å˜é‡flagçš„å€¼ä¸º0ï¼Œç„¶åå°±å¯ä»¥çœ‹è¾“å‡ºç»“æœäº†\n\n```java\n    /**\n    * éƒ¨ç½²\n    */\n    @Test\n    public void test02() throws Exception{\n\n        Deployment deployment = processEngine.getRepositoryService().createDeployment()\n                .addClasspathResource(\"é”™è¯¯ç»“æŸäº‹ä»¶.bpmn20.xml\")\n                .name(\"é”™è¯¯ç»“æŸäº‹ä»¶\")\n                .deploy();\n        System.out.println(\"-----\");\n    }\n```\n\nç„¶åå¯åŠ¨æµç¨‹\n\n```java\n    /**\n     * å¯åŠ¨æµç¨‹å®ä¾‹,è®¾ç½®æµç¨‹å˜é‡ä¸­çš„flag=0è§¦å‘é”™è¯¯ç»“æŸäº‹ä»¶\n     */\n    @Test\n    public void startProcessInstanceByKey()  throws Exception{\n        // è®¾ç½®å¯¹åº”çš„æµç¨‹å˜é‡çš„å€¼\n        Map<String,Object> map = new HashMap<>();\n        map.put(\"flag\",0);// è®¾ç½®flagä¸º0è§¦å‘æµç¨‹ç»“æŸäº‹ä»¶\n        processEngine.getRuntimeService()\n                .startProcessInstanceById(\"event2005:1:ebec87e2-b028-11ec-b93f-c03c59ad2248\",map);\n        System.out.println(\"å¼€å§‹å¯åŠ¨çš„æ—¶é—´ï¼š\" + LocalDateTime.now().toString());\n        // éœ€è¦åœ¨æ­¤é˜»å¡æ¯”ç­‰å¾…é•¿çš„æ—¶é—´\n        TimeUnit.MINUTES.sleep(3);\n    }\n```\n\nçœ‹æ§åˆ¶å°è¾“å‡º\n\n![image-20220330210538338](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220330210538338.png)\n\næ§åˆ¶å°è¾“å‡ºçš„ç»“æœå’Œæˆ‘ä»¬é¢„æœŸçš„æ˜¯ä¸€æ ·çš„\n\n![image-20220330210708334](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220330210708334.png)\n\nè¯´æ˜é”™è¯¯ç»“æŸäº‹ä»¶çš„ä½œç”¨å°±æ˜¯åœ¨æ‰§è¡Œåˆ°é”™è¯¯ç»“æŸçš„èŠ‚ç‚¹ä½ç½®ä¼šæŠ›å‡ºå¯¹åº”çš„é”™è¯¯ï¼Œä¾›éœ€è¦è·å–çš„äº‹ä»¶æ¥å¤„ç†ã€‚\n\n\n\n### ä¸­æ–­ç»“æŸäº‹ä»¶\n\nä¸­æ–­ç»“æŸäº‹ä»¶ä¹Ÿç§°ä¸ºç»ˆæ­¢ç»“æŸäº‹ä»¶ï¼Œä¸»è¦æ˜¯å¯¹æµç¨‹è¿›è¡Œç»ˆæ­¢çš„äº‹ä»¶ï¼Œå¯ä»¥åœ¨ä¸€ä¸ªå¤æ‚çš„æµç¨‹ä¸­ï¼Œå¦‚æœæŸæ–¹æƒ³è¦æå‰ä¸­æ–­è¿™ä¸ªæµç¨‹ï¼Œå¯ä»¥é‡‡ç”¨è¿™ä¸ªäº‹ä»¶æ¥å¤„ç†ï¼Œå¯ä»¥åœ¨å¹¶è¡Œå¤„ç†ä»»åŠ¡ä¸­ã€‚å¦‚æœä½ æ˜¯åœ¨æµç¨‹å®ä¾‹å±‚å¤„ç†ï¼Œæ•´ä¸ªæµç¨‹éƒ½ä¼šè¢«ä¸­æ–­ï¼Œå¦‚æœæ˜¯åœ¨å­æµç¨‹ä¸­ä½¿ç”¨ï¼Œé‚£ä¹ˆå½“å‰ä½œç”¨å’Œä½œç”¨åŸŸå†…çš„æ‰€æœ‰çš„å†…éƒ¨æµç¨‹éƒ½ä¼šè¢«ç»ˆæ­¢ã€‚å…·ä½“è¿˜æ˜¯é€šè¿‡ä¸¤ä¸ªæ¡ˆä¾‹æ¥ç»™å¤§å®¶ä»‹ç»ï¼š\n\n#### æ¡ˆä¾‹ä¸€\n\næ¡ˆä¾‹ä¸€æˆ‘ä»¬ä»‹ç»æ²¡æœ‰å­æµç¨‹çš„æƒ…å†µä¸‹ç»ˆæ­¢çš„åœºæ™¯ï¼Œå…·ä½“æ¡ˆä¾‹å¦‚ä¸‹\n\n![image-20220331102808059](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220331102808059.png)\n\nå®Œæ•´çš„xmlæ–‡ä»¶ï¼š\n\n```xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<definitions xmlns=\"http://www.omg.org/spec/BPMN/20100524/MODEL\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:flowable=\"http://flowable.org/bpmn\" xmlns:bpmndi=\"http://www.omg.org/spec/BPMN/20100524/DI\" xmlns:omgdc=\"http://www.omg.org/spec/DD/20100524/DC\" xmlns:omgdi=\"http://www.omg.org/spec/DD/20100524/DI\" typeLanguage=\"http://www.w3.org/2001/XMLSchema\" expressionLanguage=\"http://www.w3.org/1999/XPath\" targetNamespace=\"http://www.flowable.org/processdef\" exporter=\"Flowable Open Source Modeler\" exporterVersion=\"6.7.2\">\n  <process id=\"event5002\" name=\"ç»ˆæ­¢ç»“æŸäº‹ä»¶01\" isExecutable=\"true\">\n    <startEvent id=\"start01\" name=\"å¼€å§‹äº‹ä»¶\" flowable:formFieldValidation=\"true\"></startEvent>\n    <parallelGateway id=\"p001\" name=\"å¹¶è¡Œç½‘å…³\"></parallelGateway>\n    <parallelGateway id=\"p004\" name=\"å¹¶è¡Œç½‘å…³\"></parallelGateway>\n    <userTask id=\"task2\" name=\"ç”¨æˆ·ä»»åŠ¡äºŒ\" flowable:assignee=\"lisi\" flowable:formFieldValidation=\"true\">\n      <extensionElements>\n        <modeler:initiator-can-complete xmlns:modeler=\"http://flowable.org/modeler\"><![CDATA[false]]></modeler:initiator-can-complete>\n      </extensionElements>\n    </userTask>\n    <sequenceFlow id=\"sid-E3A5580F-4CE3-4556-894E-46C3D2134071\" sourceRef=\"p001\" targetRef=\"task2\"></sequenceFlow>\n    <userTask id=\"task1\" name=\"ç”¨æˆ·ä»»åŠ¡ä¸€\" flowable:assignee=\"zhangsan\" flowable:formFieldValidation=\"true\">\n      <extensionElements>\n        <modeler:initiator-can-complete xmlns:modeler=\"http://flowable.org/modeler\"><![CDATA[false]]></modeler:initiator-can-complete>\n      </extensionElements>\n    </userTask>\n    <sequenceFlow id=\"sid-FF8C06ED-AE40-46A1-A898-9FA4B0D4665A\" sourceRef=\"p001\" targetRef=\"task1\"></sequenceFlow>\n    <userTask id=\"task3\" name=\"ç”¨æˆ·ä»»åŠ¡ä¸‰\" flowable:assignee=\"wangwu\" flowable:formFieldValidation=\"true\">\n      <extensionElements>\n        <modeler:initiator-can-complete xmlns:modeler=\"http://flowable.org/modeler\"><![CDATA[false]]></modeler:initiator-can-complete>\n      </extensionElements>\n    </userTask>\n    <sequenceFlow id=\"sid-226E06CD-07E8-4E38-A3FC-12CD417F54FC\" sourceRef=\"p001\" targetRef=\"task3\"></sequenceFlow>\n    <sequenceFlow id=\"sid-C1280677-F8B9-4C9C-B010-CEEA4DE17176\" sourceRef=\"start01\" targetRef=\"p001\"></sequenceFlow>\n    <sequenceFlow id=\"sid-F5ABC1D7-091F-4966-990F-44CE1A927869\" sourceRef=\"task1\" targetRef=\"p004\"></sequenceFlow>\n    <sequenceFlow id=\"sid-E1E26394-8B33-4766-9B3B-722958B91972\" sourceRef=\"task2\" targetRef=\"p004\"></sequenceFlow>\n    <endEvent id=\"end003\" name=\"ç»“æŸäº‹ä»¶\"></endEvent>\n    <sequenceFlow id=\"sid-074345F1-5C34-435D-AECE-912DDBBBE105\" sourceRef=\"p004\" targetRef=\"end003\"></sequenceFlow>\n    <exclusiveGateway id=\"p003\" name=\"æ’ä»–ç½‘å…³\"></exclusiveGateway>\n    <endEvent id=\"sid-E9A4380A-AAF8-464C-B14B-15A2C1F1C2D2\" name=\"ç»ˆæ­¢ç»“æŸäº‹ä»¶\">\n      <terminateEventDefinition></terminateEventDefinition>\n    </endEvent>\n    <sequenceFlow id=\"sid-D00B6EDC-F2F4-4D8F-89BD-91272363CD49\" sourceRef=\"task3\" targetRef=\"p003\"></sequenceFlow>\n    <sequenceFlow id=\"sid-325962BF-7168-48C0-9107-B232A4627C10\" sourceRef=\"p003\" targetRef=\"sid-E9A4380A-AAF8-464C-B14B-15A2C1F1C2D2\">\n      <conditionExpression xsi:type=\"tFormalExpression\"><![CDATA[${flag<=0}]]></conditionExpression>\n    </sequenceFlow>\n    <sequenceFlow id=\"sid-413A98AF-8CAF-470C-B751-E32229801310\" sourceRef=\"p003\" targetRef=\"p004\">\n      <conditionExpression xsi:type=\"tFormalExpression\"><![CDATA[${flag>0}]]></conditionExpression>\n    </sequenceFlow>\n  </process>\n  <bpmndi:BPMNDiagram id=\"BPMNDiagram_event5002\">\n    <bpmndi:BPMNPlane bpmnElement=\"event5002\" id=\"BPMNPlane_event5002\">\n      <bpmndi:BPMNShape bpmnElement=\"start01\" id=\"BPMNShape_start01\">\n        <omgdc:Bounds height=\"30.0\" width=\"30.0\" x=\"102.5\" y=\"253.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"p001\" id=\"BPMNShape_p001\">\n        <omgdc:Bounds height=\"40.0\" width=\"40.0\" x=\"287.5\" y=\"248.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"p004\" id=\"BPMNShape_p004\">\n        <omgdc:Bounds height=\"40.0\" width=\"40.0\" x=\"720.0\" y=\"248.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"task2\" id=\"BPMNShape_task2\">\n        <omgdc:Bounds height=\"80.0\" width=\"100.0\" x=\"372.5\" y=\"228.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"task1\" id=\"BPMNShape_task1\">\n        <omgdc:Bounds height=\"80.0\" width=\"100.0\" x=\"372.5\" y=\"105.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"task3\" id=\"BPMNShape_task3\">\n        <omgdc:Bounds height=\"80.0\" width=\"100.0\" x=\"377.5\" y=\"390.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"end003\" id=\"BPMNShape_end003\">\n        <omgdc:Bounds height=\"28.0\" width=\"28.0\" x=\"805.0\" y=\"254.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"p003\" id=\"BPMNShape_p003\">\n        <omgdc:Bounds height=\"40.0\" width=\"40.0\" x=\"570.0\" y=\"410.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"sid-E9A4380A-AAF8-464C-B14B-15A2C1F1C2D2\" id=\"BPMNShape_sid-E9A4380A-AAF8-464C-B14B-15A2C1F1C2D2\">\n        <omgdc:Bounds height=\"28.0\" width=\"28.0\" x=\"576.0\" y=\"495.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNEdge bpmnElement=\"sid-E1E26394-8B33-4766-9B3B-722958B91972\" id=\"BPMNEdge_sid-E1E26394-8B33-4766-9B3B-722958B91972\" flowable:sourceDockerX=\"50.0\" flowable:sourceDockerY=\"40.0\" flowable:targetDockerX=\"7.5\" flowable:targetDockerY=\"19.0\">\n        <omgdi:waypoint x=\"472.4499999999732\" y=\"268.0\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"596.25\" y=\"268.0\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"596.25\" y=\"267.0\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"720.9525123715264\" y=\"267.0\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"sid-226E06CD-07E8-4E38-A3FC-12CD417F54FC\" id=\"BPMNEdge_sid-226E06CD-07E8-4E38-A3FC-12CD417F54FC\" flowable:sourceDockerX=\"20.5\" flowable:sourceDockerY=\"20.5\" flowable:targetDockerX=\"50.0\" flowable:targetDockerY=\"40.0\">\n        <omgdi:waypoint x=\"308.0\" y=\"287.4441367574257\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"308.0\" y=\"430.0\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"377.5\" y=\"430.0\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"sid-325962BF-7168-48C0-9107-B232A4627C10\" id=\"BPMNEdge_sid-325962BF-7168-48C0-9107-B232A4627C10\" flowable:sourceDockerX=\"19.53125\" flowable:sourceDockerY=\"34.5\" flowable:targetDockerX=\"14.0\" flowable:targetDockerY=\"14.0\">\n        <omgdi:waypoint x=\"589.5677159590043\" y=\"449.51771595900436\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"589.8981518165715\" y=\"495.0001397608249\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"sid-F5ABC1D7-091F-4966-990F-44CE1A927869\" id=\"BPMNEdge_sid-F5ABC1D7-091F-4966-990F-44CE1A927869\" flowable:sourceDockerX=\"50.0\" flowable:sourceDockerY=\"40.0\" flowable:targetDockerX=\"20.0\" flowable:targetDockerY=\"1.0\">\n        <omgdi:waypoint x=\"472.44999999982196\" y=\"145.0\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"740.0\" y=\"145.0\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"740.0\" y=\"248.0\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"sid-D00B6EDC-F2F4-4D8F-89BD-91272363CD49\" id=\"BPMNEdge_sid-D00B6EDC-F2F4-4D8F-89BD-91272363CD49\" flowable:sourceDockerX=\"50.0\" flowable:sourceDockerY=\"40.0\" flowable:targetDockerX=\"7.0\" flowable:targetDockerY=\"22.0\">\n        <omgdi:waypoint x=\"477.449999999998\" y=\"430.66822742474915\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"571.9322033898305\" y=\"431.93220338983053\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"sid-E3A5580F-4CE3-4556-894E-46C3D2134071\" id=\"BPMNEdge_sid-E3A5580F-4CE3-4556-894E-46C3D2134071\" flowable:sourceDockerX=\"20.5\" flowable:sourceDockerY=\"20.5\" flowable:targetDockerX=\"50.0\" flowable:targetDockerY=\"40.0\">\n        <omgdi:waypoint x=\"327.0247370727432\" y=\"268.4166666666667\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"372.49999999998806\" y=\"268.2181222707423\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"sid-074345F1-5C34-435D-AECE-912DDBBBE105\" id=\"BPMNEdge_sid-074345F1-5C34-435D-AECE-912DDBBBE105\" flowable:sourceDockerX=\"20.5\" flowable:sourceDockerY=\"20.5\" flowable:targetDockerX=\"14.0\" flowable:targetDockerY=\"14.0\">\n        <omgdi:waypoint x=\"759.5591869398207\" y=\"268.37820512820514\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"805.0002755524882\" y=\"268.08885188426405\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"sid-C1280677-F8B9-4C9C-B010-CEEA4DE17176\" id=\"BPMNEdge_sid-C1280677-F8B9-4C9C-B010-CEEA4DE17176\" flowable:sourceDockerX=\"15.0\" flowable:sourceDockerY=\"15.0\" flowable:targetDockerX=\"20.0\" flowable:targetDockerY=\"20.0\">\n        <omgdi:waypoint x=\"132.44999949366624\" y=\"268.0\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"287.5\" y=\"268.0\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"sid-413A98AF-8CAF-470C-B751-E32229801310\" id=\"BPMNEdge_sid-413A98AF-8CAF-470C-B751-E32229801310\" flowable:sourceDockerX=\"37.5\" flowable:sourceDockerY=\"20.4375\" flowable:targetDockerX=\"22.5\" flowable:targetDockerY=\"31.0\">\n        <omgdi:waypoint x=\"609.5117551813031\" y=\"430.4375\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"742.5\" y=\"430.4375\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"742.5\" y=\"285.402097959858\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"sid-FF8C06ED-AE40-46A1-A898-9FA4B0D4665A\" id=\"BPMNEdge_sid-FF8C06ED-AE40-46A1-A898-9FA4B0D4665A\" flowable:sourceDockerX=\"20.5\" flowable:sourceDockerY=\"20.5\" flowable:targetDockerX=\"50.0\" flowable:targetDockerY=\"40.0\">\n        <omgdi:waypoint x=\"308.0\" y=\"248.5\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"308.0\" y=\"145.0\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"372.5\" y=\"145.0\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n    </bpmndi:BPMNPlane>\n  </bpmndi:BPMNDiagram>\n</definitions>\n```\n\næµç¨‹å®šä¹‰è¯´æ˜ï¼šå¹¶è¡Œç½‘å…³ä¸­3ä¸ªäººå·¥å®¡æ ¸ä»»åŠ¡ï¼Œåˆ†åˆ«åˆ†é…çš„ç”¨æˆ·ä¸ºzhangsan lisi wangwu ï¼Œç„¶ååœ¨wangwuå®¡æ ¸åä¼šè¿›å…¥ä¸€ä¸ªæ’ä»–ç½‘å…³ï¼Œå¦‚æœflagæ˜¯å°äºç­‰äº0å°±ä¼šè§¦å‘ç»ˆæ­¢ç»“æŸäº‹ä»¶ã€‚\n\n```xml\n<sequenceFlow id=\"sid-89945688-1D51-4391-A713-3E77ADB2FA06\" sourceRef=\"p001\" targetRef=\"stop001\">\n      <conditionExpression xsi:type=\"tFormalExpression\"><![CDATA[${flag<=0}]]></conditionExpression>\n    </sequenceFlow>\n```\n\nå…·ä½“æ“ä½œï¼šéƒ¨ç½²æµç¨‹-->å¯åŠ¨æµç¨‹å®ä¾‹-->wanwu å¤„ç†ä»»åŠ¡ã€æµç¨‹å®ä¾‹ flag <= 0ã€‘ è§¦å‘ä»»åŠ¡\n\n```java\n    @Test\n    public void test02() throws Exception{\n\n        Deployment deployment = processEngine.getRepositoryService().createDeployment()\n                .addClasspathResource(\"ç»ˆæ­¢æµç¨‹1.bpmn20.xml\")\n                .name(\"ç»ˆæ­¢æµç¨‹1\")\n                .deploy();\n        System.out.println(\"-----\");\n    }\n```\n\nå¯åŠ¨æµç¨‹å®ä¾‹\n\n```java\n    @Test\n    public void startProcessInstanceByKey()  throws Exception{\n        // è®¾ç½®å¯¹åº”çš„æµç¨‹å˜é‡çš„å€¼\n        Map<String,Object> map = new HashMap<>();\n        map.put(\"flag\",0);// è®¾ç½®flagä¸º0è§¦å‘æµç¨‹ç»“æŸäº‹ä»¶\n        processEngine.getRuntimeService()\n                .startProcessInstanceById(\"event3001:1:8b1663fa-b02d-11ec-b480-c03c59ad2248\",map);\n    }\n```\n\nè¿™æ—¶å¯ä»¥çœ‹åˆ°ä¸‰ä¸ªå¹¶è¡Œçš„Taskä»»åŠ¡ï¼š\n\n![image-20220330213147240](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220330213147240.png)\n\nè¿™æ—¶æˆ‘ä»¬åªéœ€ç‹äº”æ¥å¤„ç†å³å¯ï¼Œåœ¨ä¸Šä¸€æ­¥ä¸­æˆ‘ä»¬å·²ç»å¯¹æµç¨‹å˜é‡èµ‹å€¼äº†\n\n```java\n    @Test\n    public void completeTask(){\n        TaskService taskService = processEngine.getTaskService();\n        Task task = taskService.createTaskQuery()\n                .processDefinitionId(\"event3001:1:8b1663fa-b02d-11ec-b480-c03c59ad2248\")\n                .taskAssignee(\"wangwu\")\n                .singleResult();\n        taskService.complete(task.getId());\n    }\n```\n\nç„¶åå†å»çœ‹Taskè¡¨ä¸­å·²ç»æ²¡æœ‰å¦å¤–ä¸¤æ¡è®°å½•äº†å“¦\n\n![image-20220330213516673](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220330213516673.png)\n\né€šè¿‡æ¡ˆä¾‹å¯ä»¥çœ‹åˆ°åœ¨æ²¡æœ‰å­æµç¨‹çš„æƒ…å†µä¸‹ï¼Œç»ˆæ­¢ç»“æŸäº‹ä»¶ä¼šæŠŠæ•´ä¸ªæµç¨‹éƒ½è¿›ç¨‹éƒ½ç»“æŸäº†ï¼Œè€Œä¸”åœ¨å†å²è®°å½•ä¸­ä¹Ÿå¯ä»¥çœ‹åˆ°ä¿¡æ¯\n\n![image-20220330215127129](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220330215127129.png)\n\n\n\n#### æ¡ˆä¾‹äºŒ\n\nç„¶åæˆ‘ä»¬æ¥çœ‹çœ‹åœ¨å­æµç¨‹ä¸­è§¦å‘ç»ˆæ­¢ç»“æŸäº‹ä»¶çš„æ¡ˆä¾‹ï¼š\n\n![image-20220330220208085](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220330220208085.png)\n\nå®Œæ•´çš„xmlå†…å®¹ï¼š\n\n```xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<definitions xmlns=\"http://www.omg.org/spec/BPMN/20100524/MODEL\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:flowable=\"http://flowable.org/bpmn\" xmlns:bpmndi=\"http://www.omg.org/spec/BPMN/20100524/DI\" xmlns:omgdc=\"http://www.omg.org/spec/DD/20100524/DC\" xmlns:omgdi=\"http://www.omg.org/spec/DD/20100524/DI\" typeLanguage=\"http://www.w3.org/2001/XMLSchema\" expressionLanguage=\"http://www.w3.org/1999/XPath\" targetNamespace=\"http://www.flowable.org/processdef\" exporter=\"Flowable Open Source Modeler\" exporterVersion=\"6.7.2\">\n  <process id=\"event3002\" name=\"ç»ˆæ­¢æµç¨‹2\" isExecutable=\"true\">\n    <startEvent id=\"start01\" name=\"ä»»åŠ¡å¼€å§‹\" flowable:formFieldValidation=\"true\"></startEvent>\n    <userTask id=\"task2\" name=\"ç”¨æˆ·ä»»åŠ¡äºŒ\" flowable:assignee=\"lisi\" flowable:formFieldValidation=\"true\">\n      <extensionElements>\n        <modeler:initiator-can-complete xmlns:modeler=\"http://flowable.org/modeler\"><![CDATA[false]]></modeler:initiator-can-complete>\n      </extensionElements>\n    </userTask>\n    <sequenceFlow id=\"sid-03E93AD6-F173-454F-B29F-B61FE45BE1E0\" sourceRef=\"b001\" targetRef=\"task2\"></sequenceFlow>\n    <userTask id=\"task1\" name=\"ç”¨æˆ·ä»»åŠ¡ä¸€\" flowable:assignee=\"zhangsan\" flowable:formFieldValidation=\"true\">\n      <extensionElements>\n        <modeler:initiator-can-complete xmlns:modeler=\"http://flowable.org/modeler\"><![CDATA[false]]></modeler:initiator-can-complete>\n      </extensionElements>\n    </userTask>\n    <sequenceFlow id=\"sid-A4455D52-7DAF-4193-9E4F-D75E133A6EDD\" sourceRef=\"b001\" targetRef=\"task1\"></sequenceFlow>\n    <subProcess id=\"sid-7A5C1ACB-D07C-407D-83BB-C55D04425AC7\" name=\"subProcess\">\n      <startEvent id=\"cstart01\" name=\"å­æµç¨‹å¼€å§‹\" flowable:formFieldValidation=\"true\"></startEvent>\n      <userTask id=\"taskc01\" name=\"å­äººå·¥ä»»åŠ¡ä¸€\" flowable:assignee=\"user1\" flowable:formFieldValidation=\"true\">\n        <extensionElements>\n          <modeler:initiator-can-complete xmlns:modeler=\"http://flowable.org/modeler\"><![CDATA[false]]></modeler:initiator-can-complete>\n        </extensionElements>\n      </userTask>\n      <exclusiveGateway id=\"p001\" name=\"æ’ä»–ç½‘å…³\"></exclusiveGateway>\n      <userTask id=\"taskc02\" name=\"å­äººå·¥ä»»åŠ¡äºŒ\" flowable:assignee=\"user2\" flowable:formFieldValidation=\"true\">\n        <extensionElements>\n          <modeler:initiator-can-complete xmlns:modeler=\"http://flowable.org/modeler\"><![CDATA[false]]></modeler:initiator-can-complete>\n        </extensionElements>\n      </userTask>\n      <endEvent id=\"endc01\" name=\"å­æµç¨‹ç»“æŸ\"></endEvent>\n      <endEvent id=\"sid-BD67523C-DDDA-46B8-A788-C54769B081B1\">\n        <terminateEventDefinition></terminateEventDefinition>\n      </endEvent>\n      <sequenceFlow id=\"sid-2E0A3425-3C34-4771-85C0-C8C7B7D7BFF5\" sourceRef=\"cstart01\" targetRef=\"taskc01\"></sequenceFlow>\n      <sequenceFlow id=\"sid-B0777673-C3BE-488B-87B2-34A71CEE2C73\" sourceRef=\"taskc01\" targetRef=\"p001\"></sequenceFlow>\n      <sequenceFlow id=\"sid-3C938AB5-2FDF-4C0B-AED8-15853AB07FE8\" sourceRef=\"taskc02\" targetRef=\"endc01\"></sequenceFlow>\n      <sequenceFlow id=\"sid-AAC6E950-F7BD-454A-9105-F43E5D4530A1\" sourceRef=\"p001\" targetRef=\"sid-BD67523C-DDDA-46B8-A788-C54769B081B1\">\n        <conditionExpression xsi:type=\"tFormalExpression\"><![CDATA[${flag<=0}]]></conditionExpression>\n      </sequenceFlow>\n      <sequenceFlow id=\"sid-EFCAE414-03A4-4313-B97A-4BF962888C37\" sourceRef=\"p001\" targetRef=\"taskc02\">\n        <conditionExpression xsi:type=\"tFormalExpression\"><![CDATA[${flag>0}]]></conditionExpression>\n      </sequenceFlow>\n    </subProcess>\n    <parallelGateway id=\"b001\" name=\"å¹¶è¡Œç½‘å…³\"></parallelGateway>\n    <sequenceFlow id=\"sid-D87CB0F6-EF35-479A-80A7-5FDACF1022E1\" sourceRef=\"start01\" targetRef=\"b001\"></sequenceFlow>\n    <parallelGateway id=\"b002\" name=\"å¹¶è¡Œç½‘å…³\"></parallelGateway>\n    <sequenceFlow id=\"sid-200E2768-DCA0-4FAD-A3C0-2D69938379A2\" sourceRef=\"task2\" targetRef=\"b002\"></sequenceFlow>\n    <sequenceFlow id=\"sid-A554CEA8-FD95-4EA4-BED3-EA748273D775\" sourceRef=\"sid-7A5C1ACB-D07C-407D-83BB-C55D04425AC7\" targetRef=\"b002\"></sequenceFlow>\n    <sequenceFlow id=\"sid-C5FB6E94-3563-49C8-9BA2-C0C80670E9FD\" sourceRef=\"task1\" targetRef=\"b002\"></sequenceFlow>\n    <endEvent id=\"end003\" name=\"ç»“æŸäº‹ä»¶\"></endEvent>\n    <sequenceFlow id=\"sid-679D7677-4828-4BCF-9F2E-CBC426D4B72B\" sourceRef=\"b002\" targetRef=\"end003\"></sequenceFlow>\n    <sequenceFlow id=\"sid-0264CAD1-386A-4A4F-ADDA-DCF62EE90594\" sourceRef=\"b001\" targetRef=\"sid-7A5C1ACB-D07C-407D-83BB-C55D04425AC7\"></sequenceFlow>\n  </process>\n  <bpmndi:BPMNDiagram id=\"BPMNDiagram_event3002\">\n    <bpmndi:BPMNPlane bpmnElement=\"event3002\" id=\"BPMNPlane_event3002\">\n      <bpmndi:BPMNShape bpmnElement=\"start01\" id=\"BPMNShape_start01\">\n        <omgdc:Bounds height=\"30.0\" width=\"30.0\" x=\"75.0\" y=\"200.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"task2\" id=\"BPMNShape_task2\">\n        <omgdc:Bounds height=\"80.0\" width=\"100.0\" x=\"420.0\" y=\"175.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"task1\" id=\"BPMNShape_task1\">\n        <omgdc:Bounds height=\"80.0\" width=\"100.0\" x=\"420.0\" y=\"15.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"sid-7A5C1ACB-D07C-407D-83BB-C55D04425AC7\" id=\"BPMNShape_sid-7A5C1ACB-D07C-407D-83BB-C55D04425AC7\">\n        <omgdc:Bounds height=\"187.0\" width=\"531.0\" x=\"285.0\" y=\"330.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"cstart01\" id=\"BPMNShape_cstart01\">\n        <omgdc:Bounds height=\"30.0\" width=\"30.0\" x=\"322.5\" y=\"410.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"taskc01\" id=\"BPMNShape_taskc01\">\n        <omgdc:Bounds height=\"80.0\" width=\"100.0\" x=\"390.0\" y=\"385.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"p001\" id=\"BPMNShape_p001\">\n        <omgdc:Bounds height=\"40.0\" width=\"40.0\" x=\"542.5\" y=\"405.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"taskc02\" id=\"BPMNShape_taskc02\">\n        <omgdc:Bounds height=\"80.0\" width=\"100.0\" x=\"627.5\" y=\"385.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"endc01\" id=\"BPMNShape_endc01\">\n        <omgdc:Bounds height=\"28.0\" width=\"28.0\" x=\"765.0\" y=\"411.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"sid-BD67523C-DDDA-46B8-A788-C54769B081B1\" id=\"BPMNShape_sid-BD67523C-DDDA-46B8-A788-C54769B081B1\">\n        <omgdc:Bounds height=\"28.0\" width=\"28.0\" x=\"548.5\" y=\"480.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"b001\" id=\"BPMNShape_b001\">\n        <omgdc:Bounds height=\"40.0\" width=\"40.0\" x=\"165.0\" y=\"195.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"b002\" id=\"BPMNShape_b002\">\n        <omgdc:Bounds height=\"40.0\" width=\"40.0\" x=\"867.5\" y=\"195.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"end003\" id=\"BPMNShape_end003\">\n        <omgdc:Bounds height=\"28.0\" width=\"28.0\" x=\"960.0\" y=\"207.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNEdge bpmnElement=\"sid-EFCAE414-03A4-4313-B97A-4BF962888C37\" id=\"BPMNEdge_sid-EFCAE414-03A4-4313-B97A-4BF962888C37\" flowable:sourceDockerX=\"20.5\" flowable:sourceDockerY=\"20.5\" flowable:targetDockerX=\"50.0\" flowable:targetDockerY=\"40.0\">\n        <omgdi:waypoint x=\"582.0247370727355\" y=\"425.41666666666663\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"627.4999999999881\" y=\"425.2181222707423\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"sid-3C938AB5-2FDF-4C0B-AED8-15853AB07FE8\" id=\"BPMNEdge_sid-3C938AB5-2FDF-4C0B-AED8-15853AB07FE8\" flowable:sourceDockerX=\"50.0\" flowable:sourceDockerY=\"40.0\" flowable:targetDockerX=\"14.0\" flowable:targetDockerY=\"14.0\">\n        <omgdi:waypoint x=\"727.4499999997752\" y=\"425.0\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"765.0\" y=\"425.0\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"sid-2E0A3425-3C34-4771-85C0-C8C7B7D7BFF5\" id=\"BPMNEdge_sid-2E0A3425-3C34-4771-85C0-C8C7B7D7BFF5\" flowable:sourceDockerX=\"15.0\" flowable:sourceDockerY=\"15.0\" flowable:targetDockerX=\"50.0\" flowable:targetDockerY=\"40.0\">\n        <omgdi:waypoint x=\"352.449998261009\" y=\"425.0\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"390.0\" y=\"425.0\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"sid-A554CEA8-FD95-4EA4-BED3-EA748273D775\" id=\"BPMNEdge_sid-A554CEA8-FD95-4EA4-BED3-EA748273D775\" flowable:sourceDockerX=\"265.5\" flowable:sourceDockerY=\"93.5\" flowable:targetDockerX=\"20.5\" flowable:targetDockerY=\"20.5\">\n        <omgdi:waypoint x=\"815.95\" y=\"423.5\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"888.0\" y=\"423.5\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"888.0\" y=\"234.40453342953353\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"sid-AAC6E950-F7BD-454A-9105-F43E5D4530A1\" id=\"BPMNEdge_sid-AAC6E950-F7BD-454A-9105-F43E5D4530A1\" flowable:sourceDockerX=\"20.5\" flowable:sourceDockerY=\"20.5\" flowable:targetDockerX=\"14.0\" flowable:targetDockerY=\"14.0\">\n        <omgdi:waypoint x=\"562.8602941176471\" y=\"444.5752202643172\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"562.6018221538329\" y=\"480.0003662069823\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"sid-200E2768-DCA0-4FAD-A3C0-2D69938379A2\" id=\"BPMNEdge_sid-200E2768-DCA0-4FAD-A3C0-2D69938379A2\" flowable:sourceDockerX=\"50.0\" flowable:sourceDockerY=\"40.0\" flowable:targetDockerX=\"20.5\" flowable:targetDockerY=\"20.5\">\n        <omgdi:waypoint x=\"519.949999999999\" y=\"215.05974880382777\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"867.97604790418\" y=\"215.4760479041916\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"sid-B0777673-C3BE-488B-87B2-34A71CEE2C73\" id=\"BPMNEdge_sid-B0777673-C3BE-488B-87B2-34A71CEE2C73\" flowable:sourceDockerX=\"50.0\" flowable:sourceDockerY=\"40.0\" flowable:targetDockerX=\"20.5\" flowable:targetDockerY=\"20.5\">\n        <omgdi:waypoint x=\"489.9499999999965\" y=\"425.2030487804878\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"542.9183673469388\" y=\"425.4183673469388\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"sid-679D7677-4828-4BCF-9F2E-CBC426D4B72B\" id=\"BPMNEdge_sid-679D7677-4828-4BCF-9F2E-CBC426D4B72B\" flowable:sourceDockerX=\"20.5\" flowable:sourceDockerY=\"20.5\" flowable:targetDockerX=\"14.0\" flowable:targetDockerY=\"14.0\">\n        <omgdi:waypoint x=\"906.92933478735\" y=\"215.5\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"933.75\" y=\"215.5\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"933.75\" y=\"221.0\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"960.0\" y=\"221.0\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"sid-D87CB0F6-EF35-479A-80A7-5FDACF1022E1\" id=\"BPMNEdge_sid-D87CB0F6-EF35-479A-80A7-5FDACF1022E1\" flowable:sourceDockerX=\"15.0\" flowable:sourceDockerY=\"15.0\" flowable:targetDockerX=\"20.0\" flowable:targetDockerY=\"20.0\">\n        <omgdi:waypoint x=\"104.94999797575196\" y=\"215.0\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"165.0\" y=\"215.0\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"sid-0264CAD1-386A-4A4F-ADDA-DCF62EE90594\" id=\"BPMNEdge_sid-0264CAD1-386A-4A4F-ADDA-DCF62EE90594\" flowable:sourceDockerX=\"22.5\" flowable:sourceDockerY=\"32.015625\" flowable:targetDockerX=\"1.1773835920177385\" flowable:targetDockerY=\"93.5\">\n        <omgdi:waypoint x=\"187.5\" y=\"232.44861780088067\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"187.5\" y=\"423.5\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"285.0\" y=\"423.5\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"sid-03E93AD6-F173-454F-B29F-B61FE45BE1E0\" id=\"BPMNEdge_sid-03E93AD6-F173-454F-B29F-B61FE45BE1E0\" flowable:sourceDockerX=\"20.5\" flowable:sourceDockerY=\"20.5\" flowable:targetDockerX=\"50.0\" flowable:targetDockerY=\"40.0\">\n        <omgdi:waypoint x=\"204.4800158394907\" y=\"215.46654929577466\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"419.99999999998107\" y=\"215.08778558875218\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"sid-A4455D52-7DAF-4193-9E4F-D75E133A6EDD\" id=\"BPMNEdge_sid-A4455D52-7DAF-4193-9E4F-D75E133A6EDD\" flowable:sourceDockerX=\"20.5\" flowable:sourceDockerY=\"20.5\" flowable:targetDockerX=\"50.0\" flowable:targetDockerY=\"40.0\">\n        <omgdi:waypoint x=\"185.5\" y=\"195.5\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"185.5\" y=\"55.0\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"420.0\" y=\"55.0\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"sid-C5FB6E94-3563-49C8-9BA2-C0C80670E9FD\" id=\"BPMNEdge_sid-C5FB6E94-3563-49C8-9BA2-C0C80670E9FD\" flowable:sourceDockerX=\"50.0\" flowable:sourceDockerY=\"40.0\" flowable:targetDockerX=\"20.0\" flowable:targetDockerY=\"13.7109375\">\n        <omgdi:waypoint x=\"519.95\" y=\"55.0\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"887.5\" y=\"55.0\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"887.5\" y=\"195.0\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n    </bpmndi:BPMNPlane>\n  </bpmndi:BPMNDiagram>\n</definitions>\n```\n\næµç¨‹è¯´æ˜ï¼šäººå·¥ä»»åŠ¡ä¸€ -->zhangsan  äººå·¥ä»»åŠ¡äºŒ -->lisi  å­äººå·¥ä»»åŠ¡ä¸€ ï¼š user1 å­äººå·¥ä»»åŠ¡äºŒ ï¼š user2\n\nå­ä»»åŠ¡å®Œæˆä»»åŠ¡å¦‚æœflag<=0,é‚£ä¹ˆå­æµç¨‹ä¸­æ–­ç»“æŸï¼Œå­äººå·¥ä»»åŠ¡äºŒä¸ä¼šè§¦å‘\n\néƒ¨ç½²æµç¨‹\n\n```java\n    @Test\n    public void test02() throws Exception{\n\n        Deployment deployment = processEngine.getRepositoryService().createDeployment()\n                .addClasspathResource(\"ç»ˆæ­¢æµç¨‹2.bpmn20.xml\")\n                .name(\"ç»ˆæ­¢æµç¨‹2\")\n                .deploy();\n        System.out.println(\"-----\");\n    }\n```\n\nç„¶åå¯åŠ¨æµç¨‹\n\n```java\n    @Test\n    public void startProcessInstanceByKey()  throws Exception{\n        // è®¾ç½®å¯¹åº”çš„æµç¨‹å˜é‡çš„å€¼\n        Map<String,Object> map = new HashMap<>();\n        map.put(\"flag\",0);// è®¾ç½®flagä¸º0è§¦å‘æµç¨‹ç»“æŸäº‹ä»¶\n        processEngine.getRuntimeService()\n                .startProcessInstanceById(\"event3002:1:92679bec-b03d-11ec-901e-c03c59ad2248\",map);\n    }\n```\n\nè¿™æ—¶åœ¨ACT_RU_TASKä¸­å°±åº”è¯¥æœ‰ä¸‰æ¡å¯¹åº”çš„TASKè®°å½•äº†\n\n![image-20220330232643286](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220330232643286.png)\n\nç„¶åæˆ‘ä»¬æ‰§è¡Œ`user1`çš„å­ä»»åŠ¡ï¼Œå› ä¸ºç°åœ¨æµç¨‹å˜é‡`flag=0`æ‰€ä»¥ä¼šè§¦å‘ç»ˆæ­¢ç»“æŸäº‹ä»¶\n\n![image-20220330232801450](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220330232801450.png)\n\næ‰§è¡Œä»»åŠ¡ï¼š\n\n```java\n    @Test\n    public void completeTask(){\n        TaskService taskService = processEngine.getTaskService();\n        Task task = taskService.createTaskQuery()\n                .processDefinitionId(\"event3002:1:92679bec-b03d-11ec-901e-c03c59ad2248\")\n                .taskAssignee(\"user1\")\n                .singleResult();\n        taskService.complete(task.getId());\n    }\n```\n\næ‰§è¡ŒæˆåŠŸåæˆ‘ä»¬å¯ä»¥å‘ç°å­äººå·¥ä»»åŠ¡ä¸€æ²¡æœ‰äº†ï¼Œä½†æ˜¯ä¹Ÿæ²¡æœ‰å­äººå·¥ä»»åŠ¡äºŒï¼Œä½†æ˜¯ä¸»æµç¨‹ä¸­çš„ä¸¤ä¸ªä»»åŠ¡éƒ½è¿˜åœ¨\n\n![image-20220330232959807](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220330232959807.png)\n\nè€Œä¸”è¿›å…¥åˆ°å†å²æ•°æ®ä¸­ä¹Ÿå¯ä»¥çœ‹åˆ°\n\n![image-20220330233448096](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220330233448096.png)\n\n\n\n\n\n### å–æ¶ˆç»“æŸäº‹ä»¶\n\nå–æ¶ˆç»“æŸäº‹ä»¶ï¼ˆcancel end eventï¼‰åªèƒ½ä¸BPMNäº‹åŠ¡å­æµç¨‹ï¼ˆBPMN transaction subprocessï¼‰ä¸€èµ·ä½¿ç”¨ã€‚å½“åˆ°è¾¾å–æ¶ˆç»“æŸäº‹ä»¶æ—¶ï¼Œä¼šæŠ›å‡ºå–æ¶ˆäº‹ä»¶ï¼Œä¸”å¿…é¡»ç”±å–æ¶ˆè¾¹ç•Œäº‹ä»¶ï¼ˆcancel boundary eventï¼‰æ•è·ã€‚å–æ¶ˆè¾¹ç•Œäº‹ä»¶å°†å–æ¶ˆäº‹åŠ¡ï¼Œå¹¶è§¦å‘è¡¥å¿ï¼ˆcompensationï¼‰ã€‚\n\nå…·ä½“é€šè¿‡æ¡ˆä¾‹æ¥è®²è§£ï¼š\n\n![image-20220401110131810](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220401110131810.png)\n\n\n\nç»“æŸå–æ¶ˆäº‹ä»¶æˆ‘ä»¬åªèƒ½åœ¨äº‹åŠ¡å­æµç¨‹ä¸­ä½¿ç”¨ï¼Œåœ¨FlowableUIä¸­æš‚æ—¶æ²¡æœ‰æ‰¾åˆ°è¿™ä¸ªç»„ä»¶ï¼Œæ‰€ä»¥åœ¨Eclipseä¸­æ¥ç»˜åˆ¶\n\n![image-20220401110621048](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220401110621048.png)\n\n\n\nå®Œæ•´çš„xmlæ–‡ä»¶\n\n```xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<definitions xmlns=\"http://www.omg.org/spec/BPMN/20100524/MODEL\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:activiti=\"http://activiti.org/bpmn\" xmlns:bpmndi=\"http://www.omg.org/spec/BPMN/20100524/DI\" xmlns:omgdc=\"http://www.omg.org/spec/DD/20100524/DC\" xmlns:omgdi=\"http://www.omg.org/spec/DD/20100524/DI\" typeLanguage=\"http://www.w3.org/2001/XMLSchema\" expressionLanguage=\"http://www.w3.org/1999/XPath\" targetNamespace=\"http://www.activiti.org/test\">\n  <process id=\"myProcess\" name=\"My process\" isExecutable=\"true\">\n    <startEvent id=\"startevent1\" name=\"Start\"></startEvent>\n    <transaction id=\"transaction1\" name=\"Transaction\">\n      <startEvent id=\"startevent2\" name=\"äº‹åŠ¡å­æµç¨‹å¼€å§‹\"></startEvent>\n      <userTask id=\"usertask1\" name=\"äººå·¥ä»»åŠ¡ä¸€\" activiti:assignee=\"zhangsan\"></userTask>\n      <sequenceFlow id=\"flow2\" sourceRef=\"startevent2\" targetRef=\"usertask1\"></sequenceFlow>\n      <exclusiveGateway id=\"exclusivegateway1\" name=\"æ’ä»–ç½‘å…³\"></exclusiveGateway>\n      <sequenceFlow id=\"flow3\" sourceRef=\"usertask1\" targetRef=\"exclusivegateway1\"></sequenceFlow>\n      <userTask id=\"usertask2\" name=\"äººå·¥ä»»åŠ¡äºŒ\" activiti:assignee=\"lisi\"></userTask>\n      <sequenceFlow id=\"flow4\" sourceRef=\"exclusivegateway1\" targetRef=\"usertask2\">\n        <conditionExpression xsi:type=\"tFormalExpression\"><![CDATA[${flag>0}]]></conditionExpression>\n      </sequenceFlow>\n      <endEvent id=\"endevent1\" name=\"äº‹åŠ¡å­æµç¨‹ç»“æŸ\"></endEvent>\n      <sequenceFlow id=\"flow5\" sourceRef=\"usertask2\" targetRef=\"endevent1\"></sequenceFlow>\n      <endEvent id=\"cancelendevent1\" name=\"å–æ¶ˆç»“æŸäº‹ä»¶\">\n        <cancelEventDefinition></cancelEventDefinition>\n      </endEvent>\n      <sequenceFlow id=\"flow6\" sourceRef=\"exclusivegateway1\" targetRef=\"cancelendevent1\">\n        <conditionExpression xsi:type=\"tFormalExpression\"><![CDATA[${flag<=0}]]></conditionExpression>\n      </sequenceFlow>\n      <boundaryEvent id=\"boundarycompensation1\" name=\"Compensate\" attachedToRef=\"usertask1\" cancelActivity=\"true\">\n        <compensateEventDefinition></compensateEventDefinition>\n      </boundaryEvent>\n      <serviceTask id=\"servicetask5\" name=\"è¡¥å¿è‡ªåŠ¨ä»»åŠ¡\" isForCompensation=\"true\" activiti:class=\"com.bobo.delegate.MyOneDelegate\"></serviceTask>\n      <association id=\"association1\" sourceRef=\"boundarycompensation1\" targetRef=\"servicetask5\" associationDirection=\"None\"></association>\n    </transaction>\n    <sequenceFlow id=\"flow1\" sourceRef=\"startevent1\" targetRef=\"transaction1\"></sequenceFlow>\n    <boundaryEvent id=\"boundarycancel1\" name=\"å–æ¶ˆè¾¹ç•Œäº‹ä»¶\" attachedToRef=\"transaction1\" cancelActivity=\"true\">\n      <cancelEventDefinition></cancelEventDefinition>\n    </boundaryEvent>\n    <serviceTask id=\"servicetask3\" name=\"å–æ¶ˆäº‹ä»¶ç»“æŸ\" activiti:class=\"com.bobo.delegate.MyThreeDelegate\"></serviceTask>\n    <sequenceFlow id=\"flow8\" sourceRef=\"boundarycancel1\" targetRef=\"servicetask3\"></sequenceFlow>\n    <endEvent id=\"endevent2\" name=\"å–æ¶ˆäº‹ä»¶ç»“æŸ\"></endEvent>\n    <sequenceFlow id=\"flow9\" sourceRef=\"servicetask3\" targetRef=\"endevent2\"></sequenceFlow>\n    <serviceTask id=\"servicetask4\" name=\"æ­£å¸¸ç»“æŸä»»åŠ¡\" activiti:class=\"com.bobo.delegate.MyTwoDelegate\"></serviceTask>\n    <sequenceFlow id=\"flow10\" sourceRef=\"transaction1\" targetRef=\"servicetask4\"></sequenceFlow>\n    <endEvent id=\"endevent3\" name=\"End\"></endEvent>\n    <sequenceFlow id=\"flow11\" sourceRef=\"servicetask4\" targetRef=\"endevent3\"></sequenceFlow>\n  </process>\n  <bpmndi:BPMNDiagram id=\"BPMNDiagram_myProcess\">\n    <bpmndi:BPMNPlane bpmnElement=\"myProcess\" id=\"BPMNPlane_myProcess\">\n      <bpmndi:BPMNShape bpmnElement=\"startevent1\" id=\"BPMNShape_startevent1\">\n        <omgdc:Bounds height=\"35.0\" width=\"35.0\" x=\"248.0\" y=\"390.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"transaction1\" id=\"BPMNShape_transaction1\">\n        <omgdc:Bounds height=\"291.0\" width=\"761.0\" x=\"371.0\" y=\"262.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"startevent2\" id=\"BPMNShape_startevent2\">\n        <omgdc:Bounds height=\"35.0\" width=\"35.0\" x=\"431.0\" y=\"382.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"usertask1\" id=\"BPMNShape_usertask1\">\n        <omgdc:Bounds height=\"55.0\" width=\"105.0\" x=\"511.0\" y=\"372.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"boundarycompensation1\" id=\"BPMNShape_boundarycompensation1\">\n        <omgdc:Bounds height=\"30.0\" width=\"30.0\" x=\"581.0\" y=\"412.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"exclusivegateway1\" id=\"BPMNShape_exclusivegateway1\">\n        <omgdc:Bounds height=\"40.0\" width=\"40.0\" x=\"661.0\" y=\"380.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"usertask2\" id=\"BPMNShape_usertask2\">\n        <omgdc:Bounds height=\"55.0\" width=\"105.0\" x=\"746.0\" y=\"373.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"endevent1\" id=\"BPMNShape_endevent1\">\n        <omgdc:Bounds height=\"35.0\" width=\"35.0\" x=\"896.0\" y=\"383.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"cancelendevent1\" id=\"BPMNShape_cancelendevent1\">\n        <omgdc:Bounds height=\"35.0\" width=\"35.0\" x=\"664.0\" y=\"472.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"servicetask5\" id=\"BPMNShape_servicetask5\">\n        <omgdc:Bounds height=\"55.0\" width=\"105.0\" x=\"511.0\" y=\"472.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"boundarycancel1\" id=\"BPMNShape_boundarycancel1\">\n        <omgdc:Bounds height=\"30.0\" width=\"30.0\" x=\"871.0\" y=\"542.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"servicetask3\" id=\"BPMNShape_servicetask3\">\n        <omgdc:Bounds height=\"55.0\" width=\"105.0\" x=\"980.0\" y=\"640.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"endevent2\" id=\"BPMNShape_endevent2\">\n        <omgdc:Bounds height=\"35.0\" width=\"35.0\" x=\"1130.0\" y=\"650.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"servicetask4\" id=\"BPMNShape_servicetask4\">\n        <omgdc:Bounds height=\"55.0\" width=\"105.0\" x=\"1291.0\" y=\"391.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"endevent3\" id=\"BPMNShape_endevent3\">\n        <omgdc:Bounds height=\"35.0\" width=\"35.0\" x=\"1450.0\" y=\"401.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNEdge bpmnElement=\"flow2\" id=\"BPMNEdge_flow2\">\n        <omgdi:waypoint x=\"466.0\" y=\"399.0\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"511.0\" y=\"399.0\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"flow3\" id=\"BPMNEdge_flow3\">\n        <omgdi:waypoint x=\"616.0\" y=\"399.0\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"661.0\" y=\"400.0\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"flow4\" id=\"BPMNEdge_flow4\">\n        <omgdi:waypoint x=\"701.0\" y=\"400.0\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"746.0\" y=\"400.0\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"flow5\" id=\"BPMNEdge_flow5\">\n        <omgdi:waypoint x=\"851.0\" y=\"400.0\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"896.0\" y=\"400.0\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"flow6\" id=\"BPMNEdge_flow6\">\n        <omgdi:waypoint x=\"681.0\" y=\"420.0\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"681.0\" y=\"472.0\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"association1\" id=\"BPMNEdge_association1\">\n        <omgdi:waypoint x=\"596.0\" y=\"442.0\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"563.0\" y=\"472.0\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"flow1\" id=\"BPMNEdge_flow1\">\n        <omgdi:waypoint x=\"283.0\" y=\"407.0\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"371.0\" y=\"407.0\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"flow8\" id=\"BPMNEdge_flow8\">\n        <omgdi:waypoint x=\"886.0\" y=\"572.0\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"1032.0\" y=\"640.0\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"flow9\" id=\"BPMNEdge_flow9\">\n        <omgdi:waypoint x=\"1085.0\" y=\"667.0\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"1130.0\" y=\"667.0\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"flow10\" id=\"BPMNEdge_flow10\">\n        <omgdi:waypoint x=\"1132.0\" y=\"407.0\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"1291.0\" y=\"418.0\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"flow11\" id=\"BPMNEdge_flow11\">\n        <omgdi:waypoint x=\"1396.0\" y=\"418.0\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"1450.0\" y=\"418.0\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n    </bpmndi:BPMNPlane>\n  </bpmndi:BPMNDiagram>\n</definitions>\n```\n\n\n\næµç¨‹è¯´æ˜ï¼šæµç¨‹ä¸­å®šä¹‰äº†ä¸€ä¸ªäº‹åŠ¡å­æµç¨‹å’Œä¸¤ä¸ªè‡ªåŠ¨ä»»åŠ¡\n\n![image-20220401111036816](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220401111036816.png)\n\n\n\n\n\nç„¶ååœ¨äº‹åŠ¡å­æµç¨‹ä¸­å®šä¹‰äº†ä¸¤ä¸ªäººå·¥ä»»åŠ¡ç”¨ä¸€ä¸ªæ’ä»–ç½‘å…³è¿æ¥ï¼Œflag<=0 çš„æƒ…å†µä¸‹ä¼šè§¦å‘ å–æ¶ˆç»“æŸäº‹ä»¶\n\n![image-20220401111201815](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220401111201815.png)\n\n\n\nè§¦å‘å–æ¶ˆç»“æŸäº‹ä»¶ååŒæ—¶ä¼šè¢«å–æ¶ˆè¾¹ç•Œäº‹ä»¶æ•è·è€Œèµ° å–æ¶ˆäº‹ä»¶ç»“æŸçš„è‡ªåŠ¨ä»»åŠ¡\n\n![image-20220401111316353](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220401111316353.png)\n\n\n\nåŒæ—¶è‡ªåŠ¨è¡¥å¿ä»»åŠ¡ä¹Ÿä¼šè§¦å‘ï¼Œå…³è”çš„è‡ªåŠ¨ä»»åŠ¡ä¹Ÿä¼šè§¦å‘\n\n![image-20220401111351513](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220401111351513.png)\n\næ³¨æ„åœ¨è®¾ç½®çš„æ—¶å€™éœ€è¦è®¾ç½®è¡¥å¿è‡ªåŠ¨ä»»åŠ¡ä¸ºå¯è¡¥å¿çš„\n\n![image-20220401111438577](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220401111438577.png)\n\nè¡¥å¿è‡ªåŠ¨ä»»åŠ¡ç»‘å®šçš„JavaDelegateï¼š\n\n```java\npublic class MyOneDelegate implements JavaDelegate {\n    @Override\n    public void execute(DelegateExecution execution) {\n\n        System.out.println(\"å®Œæˆè‡ªåŠ¨å®¡æ‰¹ä»»åŠ¡-----ã€‹MyOneDelegate\" + LocalDateTime.now().toString());\n    }\n}\n```\n\næ­£å¸¸ç»“æŸä»»åŠ¡ç»‘å®šçš„JavaDelegate:\n\n```java\npublic class MyTwoDelegate implements JavaDelegate {\n    @Override\n    public void execute(DelegateExecution execution) {\n        System.out.println(\"MyTwoDelegate---->æ‰§è¡Œäº†\" + LocalDateTime.now().toString());\n    }\n}\n```\n\nå–æ¶ˆäº‹ä»¶ç»“æŸç»‘å®šçš„JavaDelegate\n\n```java\npublic class MyThreeDelegate implements JavaDelegate {\n    @Override\n    public void execute(DelegateExecution execution) {\n        System.out.println(\"MyThreeDelegate---->æ‰§è¡Œäº†\" + LocalDateTime.now().toString());\n    }\n}\n```\n\nç„¶åæˆ‘ä»¬éƒ¨ç½²ï¼Œå¯åŠ¨ï¼Œå’Œæ‰§è¡Œæµç¨‹ï¼Œçœ‹è¾“å‡ºæƒ…å†µ\n\n```java\n    /**\n     * éƒ¨ç½²æµç¨‹\n     * @throws Exception\n     */\n    @Test\n    public void deploy() throws Exception{\n        Deployment deployment = processEngine.getRepositoryService().createDeployment()\n                .addClasspathResource(\"å–æ¶ˆç»“æŸäº‹ä»¶.bpmn20.xml\")\n                .name(\"å–æ¶ˆç»“æŸäº‹ä»¶\")\n                .deploy();\n        System.out.println(\"-----\");\n    }\n\n    /**\n     * å¯åŠ¨æµç¨‹å®ä¾‹,è®¾ç½®æµç¨‹å˜é‡ä¸­çš„flag=0è§¦å‘å–æ¶ˆç»“æŸäº‹ä»¶\n     */\n    @Test\n    public void startProcessInstanceByKey()  throws Exception{\n        // è®¾ç½®å¯¹åº”çš„æµç¨‹å˜é‡çš„å€¼\n        Map<String,Object> map = new HashMap<>();\n        map.put(\"flag\",0);// è®¾ç½®flagä¸º0è§¦å‘æµç¨‹ç»“æŸäº‹ä»¶\n        processEngine.getRuntimeService()\n                .startProcessInstanceById(\"myProcess:3:effb46cf-b168-11ec-926f-c03c59ad2248\",map);\n    }\n\n    /**\n     * å®Œæˆä»»åŠ¡\n     */\n    @Test\n    public void completeTask(){\n        TaskService taskService = processEngine.getTaskService();\n        Task task = taskService.createTaskQuery()\n                .processDefinitionId(\"myProcess:3:effb46cf-b168-11ec-926f-c03c59ad2248\")\n                .taskAssignee(\"zhangsan\")\n                .singleResult();\n        taskService.complete(task.getId());\n    }\n```\n\n\n\nè¾“å‡ºç»“æœï¼š\n\n![image-20220401111758140](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220401111758140.png)\n\n\n\nè¾“å‡ºç»“æœæ˜¯æ»¡è¶³æˆ‘ä»¬çš„æœŸæœ›çš„ã€‚\n\n\n\n### è¡¥å¿äº‹ä»¶\n\né€šè¿‡è¡¥å¿è¾¾åˆ°æ§åˆ¶ä¸šåŠ¡æµç¨‹çš„ç›®çš„å°±æ˜¯è¡¥å¿äº‹ä»¶ï¼Œæ¯”å¦‚æˆ‘ä»¬æ­£å¸¸çš„ä¹°æœºç¥¨çš„æµç¨‹ä¸‹è®¢å•è´­ä¹°ï¼Œç„¶ååŒæ—¶å¼¹å‡ºæ”¯ä»˜æµç¨‹é¡µé¢ã€‚æ”¯ä»˜æˆåŠŸåå°±å¯ä»¥ç­‰å¾…å‡ºç¥¨äº†ï¼Œä½†æ˜¯å¦‚æœæˆ‘ä»¬æ”¯ä»˜å¤±è´¥çš„è¯ï¼Œè¿™æ—¶è¦ä¹ˆé‡æ–°æ”¯ä»˜ï¼Œæ›´æ¢æ”¯ä»˜æ–¹å¼æˆ–è€…å–æ¶ˆé¢„è®¢ï¼Œè¿™æ—¶å–æ¶ˆé¢„è®¢æˆ‘ä»¬å°±å¯ä»¥é€šè¿‡è¡¥å¿äº‹ä»¶æ¥å®ç°ï¼Œå…·ä½“çš„æ¡ˆä¾‹å¦‚ä¸‹ï¼š\n\n![image-20220401202116847](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220401202116847.png)\n\nå®Œæ•´çš„xmlæ–‡ä»¶ï¼š\n\n```xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<definitions xmlns=\"http://www.omg.org/spec/BPMN/20100524/MODEL\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:activiti=\"http://activiti.org/bpmn\" xmlns:bpmndi=\"http://www.omg.org/spec/BPMN/20100524/DI\" xmlns:omgdc=\"http://www.omg.org/spec/DD/20100524/DC\" xmlns:omgdi=\"http://www.omg.org/spec/DD/20100524/DI\" typeLanguage=\"http://www.w3.org/2001/XMLSchema\" expressionLanguage=\"http://www.w3.org/1999/XPath\" targetNamespace=\"http://www.activiti.org/test\">\n    <error id=\"payFail\" errorCode=\"payFail\" ></error>\n    <process id=\"myProcess\" name=\"My process\" isExecutable=\"true\">\n        <startEvent id=\"startevent1\" name=\"å¼€å§‹äº‹ä»¶\"></startEvent>\n        <parallelGateway id=\"parallelgateway1\" name=\"å¹¶è¡Œç½‘å…³\"></parallelGateway>\n        <sequenceFlow id=\"flow1\" sourceRef=\"startevent1\" targetRef=\"parallelgateway1\"></sequenceFlow>\n        <serviceTask id=\"servicetask1\" name=\"é¢„è®¢æœºç¥¨\" activiti:class=\"com.bobo.delegate.MyTwoDelegate\"></serviceTask>\n        <serviceTask id=\"servicetask2\" name=\"å¾®ä¿¡æ”¯ä»˜\" activiti:class=\"com.bobo.delegate.MyOneDelegate\"></serviceTask>\n        <userTask id=\"usertask1\" name=\"äººå·¥å‡ºç¥¨\" activiti:assignee=\"zhangsan\"></userTask>\n        <sequenceFlow id=\"flow2\" sourceRef=\"servicetask1\" targetRef=\"usertask1\"></sequenceFlow>\n        <parallelGateway id=\"parallelgateway2\" name=\"Parallel Gateway\"></parallelGateway>\n        <sequenceFlow id=\"flow3\" sourceRef=\"usertask1\" targetRef=\"parallelgateway2\"></sequenceFlow>\n        <sequenceFlow id=\"flow4\" sourceRef=\"parallelgateway1\" targetRef=\"servicetask1\"></sequenceFlow>\n        <sequenceFlow id=\"flow5\" sourceRef=\"parallelgateway1\" targetRef=\"servicetask2\"></sequenceFlow>\n        <sequenceFlow id=\"flow6\" sourceRef=\"servicetask2\" targetRef=\"parallelgateway2\"></sequenceFlow>\n        <serviceTask id=\"servicetask3\" name=\"å–æ¶ˆé¢„è®¢\" isForCompensation=\"true\" activiti:class=\"com.bobo.delegate.MyThreeDelegate\"></serviceTask>\n        <boundaryEvent id=\"boundarycompensation1\" name=\"è¡¥å¿è¾¹ç•Œäº‹ä»¶\" attachedToRef=\"servicetask1\" cancelActivity=\"true\">\n            <compensateEventDefinition></compensateEventDefinition>\n        </boundaryEvent>\n        <boundaryEvent id=\"boundaryerror1\" name=\"é”™è¯¯è¾¹ç•Œäº‹ä»¶\" attachedToRef=\"servicetask2\">\n            <errorEventDefinition errorRef=\"payFail\"></errorEventDefinition>\n        </boundaryEvent>\n        <intermediateThrowEvent id=\"compensationintermediatethrowevent1\" name=\"è¡¥å¿æŠ›å‡ºä¸­é—´äº‹ä»¶\">\n            <compensateEventDefinition></compensateEventDefinition>\n        </intermediateThrowEvent>\n        <sequenceFlow id=\"flow7\" sourceRef=\"boundaryerror1\" targetRef=\"compensationintermediatethrowevent1\"></sequenceFlow>\n        <endEvent id=\"endevent1\" name=\"End\"></endEvent>\n        <sequenceFlow id=\"flow8\" sourceRef=\"compensationintermediatethrowevent1\" targetRef=\"endevent1\"></sequenceFlow>\n        <endEvent id=\"endevent2\" name=\"End\"></endEvent>\n        <sequenceFlow id=\"flow9\" sourceRef=\"parallelgateway2\" targetRef=\"endevent2\"></sequenceFlow>\n        <association id=\"association1\" sourceRef=\"boundarycompensation1\" targetRef=\"servicetask3\" associationDirection=\"None\"></association>\n    </process>\n    <bpmndi:BPMNDiagram id=\"BPMNDiagram_myProcess\">\n        <bpmndi:BPMNPlane bpmnElement=\"myProcess\" id=\"BPMNPlane_myProcess\">\n            <bpmndi:BPMNShape bpmnElement=\"startevent1\" id=\"BPMNShape_startevent1\">\n                <omgdc:Bounds height=\"35.0\" width=\"35.0\" x=\"160.0\" y=\"360.0\"></omgdc:Bounds>\n            </bpmndi:BPMNShape>\n            <bpmndi:BPMNShape bpmnElement=\"parallelgateway1\" id=\"BPMNShape_parallelgateway1\">\n                <omgdc:Bounds height=\"40.0\" width=\"40.0\" x=\"380.0\" y=\"357.0\"></omgdc:Bounds>\n            </bpmndi:BPMNShape>\n            <bpmndi:BPMNShape bpmnElement=\"servicetask1\" id=\"BPMNShape_servicetask1\">\n                <omgdc:Bounds height=\"55.0\" width=\"105.0\" x=\"580.0\" y=\"220.0\"></omgdc:Bounds>\n            </bpmndi:BPMNShape>\n            <bpmndi:BPMNShape bpmnElement=\"boundarycompensation1\" id=\"BPMNShape_boundarycompensation1\">\n                <omgdc:Bounds height=\"30.0\" width=\"30.0\" x=\"650.0\" y=\"270.0\"></omgdc:Bounds>\n            </bpmndi:BPMNShape>\n            <bpmndi:BPMNShape bpmnElement=\"servicetask2\" id=\"BPMNShape_servicetask2\">\n                <omgdc:Bounds height=\"55.0\" width=\"105.0\" x=\"580.0\" y=\"450.0\"></omgdc:Bounds>\n            </bpmndi:BPMNShape>\n            <bpmndi:BPMNShape bpmnElement=\"boundaryerror1\" id=\"BPMNShape_boundaryerror1\">\n                <omgdc:Bounds height=\"30.0\" width=\"30.0\" x=\"650.0\" y=\"490.0\"></omgdc:Bounds>\n            </bpmndi:BPMNShape>\n            <bpmndi:BPMNShape bpmnElement=\"usertask1\" id=\"BPMNShape_usertask1\">\n                <omgdc:Bounds height=\"55.0\" width=\"105.0\" x=\"820.0\" y=\"220.0\"></omgdc:Bounds>\n            </bpmndi:BPMNShape>\n            <bpmndi:BPMNShape bpmnElement=\"parallelgateway2\" id=\"BPMNShape_parallelgateway2\">\n                <omgdc:Bounds height=\"40.0\" width=\"40.0\" x=\"1140.0\" y=\"336.0\"></omgdc:Bounds>\n            </bpmndi:BPMNShape>\n            <bpmndi:BPMNShape bpmnElement=\"servicetask3\" id=\"BPMNShape_servicetask3\">\n                <omgdc:Bounds height=\"55.0\" width=\"105.0\" x=\"830.0\" y=\"336.0\"></omgdc:Bounds>\n            </bpmndi:BPMNShape>\n            <bpmndi:BPMNShape bpmnElement=\"compensationintermediatethrowevent1\" id=\"BPMNShape_compensationintermediatethrowevent1\">\n                <omgdc:Bounds height=\"35.0\" width=\"35.0\" x=\"740.0\" y=\"590.0\"></omgdc:Bounds>\n            </bpmndi:BPMNShape>\n            <bpmndi:BPMNShape bpmnElement=\"endevent1\" id=\"BPMNShape_endevent1\">\n                <omgdc:Bounds height=\"35.0\" width=\"35.0\" x=\"820.0\" y=\"590.0\"></omgdc:Bounds>\n            </bpmndi:BPMNShape>\n            <bpmndi:BPMNShape bpmnElement=\"endevent2\" id=\"BPMNShape_endevent2\">\n                <omgdc:Bounds height=\"35.0\" width=\"35.0\" x=\"1225.0\" y=\"339.0\"></omgdc:Bounds>\n            </bpmndi:BPMNShape>\n            <bpmndi:BPMNEdge bpmnElement=\"flow1\" id=\"BPMNEdge_flow1\">\n                <omgdi:waypoint x=\"195.0\" y=\"377.0\"></omgdi:waypoint>\n                <omgdi:waypoint x=\"380.0\" y=\"377.0\"></omgdi:waypoint>\n            </bpmndi:BPMNEdge>\n            <bpmndi:BPMNEdge bpmnElement=\"flow2\" id=\"BPMNEdge_flow2\">\n                <omgdi:waypoint x=\"685.0\" y=\"247.0\"></omgdi:waypoint>\n                <omgdi:waypoint x=\"820.0\" y=\"247.0\"></omgdi:waypoint>\n            </bpmndi:BPMNEdge>\n            <bpmndi:BPMNEdge bpmnElement=\"flow3\" id=\"BPMNEdge_flow3\">\n                <omgdi:waypoint x=\"925.0\" y=\"247.0\"></omgdi:waypoint>\n                <omgdi:waypoint x=\"1160.0\" y=\"247.0\"></omgdi:waypoint>\n                <omgdi:waypoint x=\"1160.0\" y=\"336.0\"></omgdi:waypoint>\n            </bpmndi:BPMNEdge>\n            <bpmndi:BPMNEdge bpmnElement=\"flow4\" id=\"BPMNEdge_flow4\">\n                <omgdi:waypoint x=\"400.0\" y=\"357.0\"></omgdi:waypoint>\n                <omgdi:waypoint x=\"400.0\" y=\"247.0\"></omgdi:waypoint>\n                <omgdi:waypoint x=\"580.0\" y=\"247.0\"></omgdi:waypoint>\n            </bpmndi:BPMNEdge>\n            <bpmndi:BPMNEdge bpmnElement=\"flow5\" id=\"BPMNEdge_flow5\">\n                <omgdi:waypoint x=\"400.0\" y=\"397.0\"></omgdi:waypoint>\n                <omgdi:waypoint x=\"400.0\" y=\"477.0\"></omgdi:waypoint>\n                <omgdi:waypoint x=\"580.0\" y=\"477.0\"></omgdi:waypoint>\n            </bpmndi:BPMNEdge>\n            <bpmndi:BPMNEdge bpmnElement=\"flow6\" id=\"BPMNEdge_flow6\">\n                <omgdi:waypoint x=\"685.0\" y=\"477.0\"></omgdi:waypoint>\n                <omgdi:waypoint x=\"1160.0\" y=\"477.0\"></omgdi:waypoint>\n                <omgdi:waypoint x=\"1160.0\" y=\"376.0\"></omgdi:waypoint>\n            </bpmndi:BPMNEdge>\n            <bpmndi:BPMNEdge bpmnElement=\"flow7\" id=\"BPMNEdge_flow7\">\n                <omgdi:waypoint x=\"665.0\" y=\"520.0\"></omgdi:waypoint>\n                <omgdi:waypoint x=\"664.0\" y=\"607.0\"></omgdi:waypoint>\n                <omgdi:waypoint x=\"740.0\" y=\"607.0\"></omgdi:waypoint>\n            </bpmndi:BPMNEdge>\n            <bpmndi:BPMNEdge bpmnElement=\"flow8\" id=\"BPMNEdge_flow8\">\n                <omgdi:waypoint x=\"775.0\" y=\"607.0\"></omgdi:waypoint>\n                <omgdi:waypoint x=\"820.0\" y=\"607.0\"></omgdi:waypoint>\n            </bpmndi:BPMNEdge>\n            <bpmndi:BPMNEdge bpmnElement=\"flow9\" id=\"BPMNEdge_flow9\">\n                <omgdi:waypoint x=\"1180.0\" y=\"356.0\"></omgdi:waypoint>\n                <omgdi:waypoint x=\"1225.0\" y=\"356.0\"></omgdi:waypoint>\n            </bpmndi:BPMNEdge>\n            <bpmndi:BPMNEdge bpmnElement=\"association1\" id=\"BPMNEdge_association1\">\n                <omgdi:waypoint x=\"665.0\" y=\"300.0\"></omgdi:waypoint>\n                <omgdi:waypoint x=\"664.0\" y=\"363.0\"></omgdi:waypoint>\n                <omgdi:waypoint x=\"830.0\" y=\"363.0\"></omgdi:waypoint>\n            </bpmndi:BPMNEdge>\n        </bpmndi:BPMNPlane>\n    </bpmndi:BPMNDiagram>\n</definitions>\n```\n\næµç¨‹è¯´æ˜ï¼š\n\n\n\n![image-20220401202447583](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220401202447583.png)\n\nå¾®ä¿¡æ”¯ä»˜ç»‘å®šçš„JavaDelegateï¼š\n\n```java\npublic class MyOneDelegate implements JavaDelegate {\n    @Override\n    public void execute(DelegateExecution execution) {\n\n        System.out.println(\"å¾®ä¿¡æ”¯ä»˜-----ã€‹MyOneDelegate\" + LocalDateTime.now().toString());\n        System.out.println(\"ä½™é¢ä¸è¶³....\");\n        throw  new BpmnError(\"payFail\");\n    }\n}\n```\n\né¢„è®¢æœºç¥¨ç»‘å®šçš„JavaDelegate\n\n```java\npublic class MyTwoDelegate implements JavaDelegate {\n    @Override\n    public void execute(DelegateExecution execution) {\n        System.out.println(\"MyTwoDelegate---->é¢„è®¢æœºç¥¨æµç¨‹æ‰§è¡Œäº†\" + LocalDateTime.now().toString());\n    }\n}\n```\n\nå–æ¶ˆè®¢å•ç»‘å®šçš„javaDelegate:\n\n```java\npublic class MyThreeDelegate implements JavaDelegate {\n    @Override\n    public void execute(DelegateExecution execution) {\n        System.out.println(\"MyThreeDelegate---->æœºç¥¨é¢„è®¢å–æ¶ˆäº†....\" + LocalDateTime.now().toString());\n    }\n}\n```\n\næ•´ä¸ªæµç¨‹æ‰§è¡Œçš„è¿‡ç¨‹æ˜¯ï¼šä»»åŠ¡å¼€å§‹åä¼šå¹¶è¡Œçš„æ‰§è¡Œæœºç¥¨é¢„è®¢å’Œå¾®ä¿¡æ”¯ä»˜ï¼Œç„¶ååœ¨å¾®ä¿¡æ”¯ä»˜æ˜¯æŠ›å‡ºpayFailé”™è¯¯ï¼ŒåŒæ—¶é”™è¯¯è¾¹ç•Œäº‹ä»¶ä¼šæ•è·åˆ°è¿™ä¸ªé”™è¯¯ï¼Œç„¶åæ‰§è¡Œåˆ° è¡¥å¿æŠ›å‡ºä¸­é—´äº‹ä»¶ï¼Œä¹‹ååœ¨æœºç¥¨é¢„è®¢çš„ è¡¥å¿è¾¹ç•Œäº‹ä»¶ è¢«è§¦å‘ï¼Œå¯¹åº”çš„è¡¥å¿è§¦å‘å™¨ä¼šæ‰§è¡Œå¯¹åº”çš„ä»£ç ã€‚ ç„¶åæˆ‘ä»¬éƒ¨ç½²åŠ å¯åŠ¨æµç¨‹åè§‚å¯Ÿæ§åˆ¶å°çš„è¾“å‡ºï¼š\n\n```java\n    /**\n     * éƒ¨ç½²æµç¨‹\n     * @throws Exception\n     */\n    @Test\n    public void deploy() throws Exception{\n        Deployment deployment = processEngine.getRepositoryService().createDeployment()\n                .addClasspathResource(\"è¡¥å¿äº‹ä»¶.bpmn20.xml\")\n                .name(\"è¡¥å¿äº‹ä»¶\")\n                .deploy();\n    }\n\n    /**\n     * å¯åŠ¨æµç¨‹å®ä¾‹\n     */\n    @Test\n    public void startProcessInstanceByKey()  throws Exception{\n        processEngine.getRuntimeService()\n                .startProcessInstanceById(\"myProcess:4:a45abe9f-b1b5-11ec-9daf-c03c59ad2248\");\n    }\n```\n\næ§åˆ¶å°è¾“å‡ºï¼š\n\n```txt\nMyTwoDelegate---->é¢„è®¢æœºç¥¨æµç¨‹æ‰§è¡Œäº†2022-04-01T20:17:44.985\nå¾®ä¿¡æ”¯ä»˜-----ã€‹MyOneDelegate2022-04-01T20:17:44.987\nä½™é¢ä¸è¶³....\nMyThreeDelegate---->æœºç¥¨é¢„è®¢å–æ¶ˆäº†....2022-04-01T20:17:45.028\n```\n\nè¾“å‡ºçš„ç»“æœå’Œæˆ‘ä»¬å‰é¢è®¾è®¡çš„æ˜¯ä¸€æ ·çš„ï¼Œæå®š~\n\n","source":"_posts/2022/10/flowableé«˜çº§ç¯‡.md","raw":"---\ntitle: flowableé«˜çº§ç¯‡\ndate: 2022-10-19 23:45:46\ntags: [BPMN,Flowable]\ncategories: [ç¬”è®°]\n---\n# flowableé«˜çº§ç¯‡\n> lectureï¼šæ³¢æ³¢è€å¸ˆ\n\n# ä»»åŠ¡åˆ†é…å’Œæµç¨‹å˜é‡\n\n## ä»»åŠ¡åˆ†é…\n\n### å›ºå®šåˆ†é…\n\nå›ºå®šåˆ†é…å°±æ˜¯æˆ‘ä»¬å‰é¢ä»‹ç»çš„ï¼Œåœ¨ç»˜åˆ¶æµç¨‹å›¾æˆ–è€…ç›´æ¥åœ¨æµç¨‹æ–‡ä»¶ä¸­é€šè¿‡Assigneeæ¥æŒ‡å®šçš„æ–¹å¼\n\n![image-20220322205919319](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220322205919319.png)\n\n![image-20220322210018615](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220322210018615.png)\n\n\n\n### è¡¨è¾¾å¼åˆ†é…\n\nFlowableä½¿ç”¨UELè¿›è¡Œè¡¨è¾¾å¼è§£æã€‚UELä»£è¡¨*Unified Expression Language*ï¼Œæ˜¯EE6è§„èŒƒçš„ä¸€éƒ¨åˆ†.Flowableæ”¯æŒä¸¤ç§UELè¡¨è¾¾å¼ï¼š UEL-value å’ŒUEL-method\n\n#### å€¼è¡¨è¾¾å¼\n\n**å€¼è¡¨è¾¾å¼ Value expression**: è§£æä¸ºä¸€ä¸ªå€¼ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œæ‰€æœ‰æµç¨‹å˜é‡éƒ½å¯ä»¥ä½¿ç”¨ã€‚ï¼ˆè‹¥ä½¿ç”¨Springï¼‰æ‰€æœ‰çš„Spring beanä¹Ÿå¯ä»¥ç”¨åœ¨è¡¨è¾¾å¼é‡Œã€‚ä¾‹å¦‚\n\n```txt\n${myVar}\n${myBean.myProperty}\n```\n\næ¡ˆä¾‹è®²è§£ï¼š\n\n![image-20220322212342245](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220322212342245.png)\n\n\n\nå¯ä»¥çœ‹åˆ°é€šè¿‡è¡¨è¾¾å¼å¤„ç†çš„æ•ˆæœ\n\n![image-20220322212431304](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220322212431304.png)\n\n\n\nå…ˆéƒ¨ç½²æµç¨‹ï¼Œç„¶ååœ¨å¯åŠ¨æµç¨‹å®ä¾‹çš„æ—¶å€™ç»‘å®šè¡¨è¾¾å¼å¯¹åº”çš„å€¼\n\n```java\n/**\n     * å¯åŠ¨æµç¨‹å®ä¾‹\n     */\n    @Test\n    public void testRunProcess(){\n\n        // è·å–æµç¨‹å¼•æ“å¯¹è±¡\n        ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine();\n        // å¯åŠ¨æµç¨‹å®ä¾‹é€šè¿‡ RuntimeService å¯¹è±¡\n        RuntimeService runtimeService = processEngine.getRuntimeService();\n        // è®¾ç½® assignee çš„å–å€¼\n        Map<String,Object> variables = new HashMap<>();\n        variables.put(\"assignee0\",\"å¼ ä¸‰\") ;\n        variables.put(\"assignee1\",\"æå››\"); \n        // å¯åŠ¨æµç¨‹å®ä¾‹ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æµç¨‹å®šä¹‰çš„id\n        ProcessInstance processInstance = runtimeService\n                .startProcessInstanceById(\"MyHolidayUI:1:4\", variables);// å¯åŠ¨æµç¨‹å®ä¾‹\n        // è¾“å‡ºç›¸å…³çš„æµç¨‹å®ä¾‹ä¿¡æ¯\n        System.out.println(\"æµç¨‹å®šä¹‰çš„IDï¼š\" + processInstance.getProcessDefinitionId());\n        System.out.println(\"æµç¨‹å®ä¾‹çš„IDï¼š\" + processInstance.getId());\n        System.out.println(\"å½“å‰æ´»åŠ¨çš„IDï¼š\" + processInstance.getActivityId());\n    }\n```\n\nåœ¨æµç¨‹å˜é‡è¡¨ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°å¯¹åº”çš„æµç¨‹å˜é‡ä¿¡æ¯\n\n![image-20220322213558754](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220322213558754.png)\n\nåŒæ—¶åœ¨Taskè¡¨ä¸­ï¼Œå¯ä»¥çœ‹åˆ°æµç¨‹å½“å‰çš„åˆ†é…äººæ˜¯`å¼ ä¸‰`ï¼Œè¯´æ˜UELè¡¨è¾¾å¼è¢«è§£æäº†\n\n![image-20220322213655020](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220322213655020.png)\n\n\n\n\n\n\n\n#### æ–¹æ³•è¡¨è¾¾å¼\n\n**æ–¹æ³•è¡¨è¾¾å¼ Method expression**: è°ƒç”¨ä¸€ä¸ªæ–¹æ³•ï¼Œå¯ä»¥å¸¦æˆ–ä¸å¸¦å‚æ•°ã€‚**å½“è°ƒç”¨ä¸å¸¦å‚æ•°çš„æ–¹æ³•æ—¶ï¼Œè¦ç¡®ä¿åœ¨æ–¹æ³•ååæ·»åŠ ç©ºæ‹¬å·ï¼ˆä»¥é¿å…ä¸å€¼è¡¨è¾¾å¼æ··æ·†ï¼‰ã€‚**ä¼ é€’çš„å‚æ•°å¯ä»¥æ˜¯å­—é¢å€¼(literal value)ï¼Œä¹Ÿå¯ä»¥æ˜¯è¡¨è¾¾å¼ï¼Œå®ƒä»¬ä¼šè¢«è‡ªåŠ¨è§£æã€‚ä¾‹å¦‚ï¼š\n\n```txt\n${printer.print()}\n${myBean.addNewOrder('orderName')}\n${myBean.doSomething(myVar, execution)}\n```\n\nmyBeanæ˜¯Springå®¹å™¨ä¸­çš„ä¸ªBeanå¯¹è±¡ï¼Œè¡¨ç¤ºè°ƒç”¨çš„æ˜¯beançš„addNewOrderæ–¹æ³•\n\n\n\n\n\n### ç›‘å¬å™¨åˆ†é…\n\nå¯ä»¥ä½¿ç”¨ç›‘å¬å™¨æ¥å®Œæˆå¾ˆå¤šFlowableçš„æµç¨‹ä¸šåŠ¡ã€‚\n\næˆ‘ä»¬åœ¨æ­¤å¤„ä½¿ç”¨ç›‘å¬å™¨æ¥å®Œæˆè´Ÿè´£äººçš„æŒ‡å®šï¼Œé‚£ä¹ˆæˆ‘ä»¬åœ¨æµç¨‹è®¾è®¡çš„æ—¶å€™å°±ä¸éœ€è¦æŒ‡å®šassignee\n\nåˆ›å»ºè‡ªå®šä¹‰ç›‘å¬å™¨ï¼š\n\n```java\n/**\n * è‡ªå®šä¹‰çš„ç›‘å¬å™¨\n */\npublic class MyTaskListener implements TaskListener {\n    @Override\n    public void notify(DelegateTask delegateTask) {\n        System.out.println(\"ç›‘å¬å™¨è§¦å‘äº†ï¼š\" + delegateTask.getName());\n        if(\"æäº¤è¯·å‡æµç¨‹\".equals(delegateTask.getName()) &&\n                \"create\".equals(delegateTask.getEventName())){\n            // æŒ‡å®šä»»åŠ¡çš„è´Ÿè´£äºº\n            delegateTask.setAssignee(\"å°æ˜\");\n        }else {\n            delegateTask.setAssignee(\"å°å¼ \");\n        }\n    }\n}\n```\n\n\n\nç„¶ååœ¨FlowableUIä¸­å…³è”å¯¹åº”çš„ç›‘å¬å™¨\n\n```txt\ncreate:ä»»åŠ¡åˆ›å»ºåè§¦å‘\nassignment:ä»»åŠ¡åˆ†é…åè§¦å‘\nDelete:ä»»åŠ¡å®Œæˆåè§¦å‘\nAllï¼šæ‰€æœ‰äº‹ä»¶éƒ½è§¦å‘\n```\n\n\n\n![image-20220322214807416](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220322214807416.png)\n\nç„¶åæˆ‘ä»¬å…ˆéƒ¨ç½²æµç¨‹ï¼Œç„¶åæ‰§è¡ŒæŸ¥çœ‹æ•ˆæœï¼š\n\n![image-20220322215711211](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220322215711211.png)\n\nç„¶ååœ¨Taskè¡¨ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°å¯¹åº”çš„åˆ†é…äººä¸º`å°æ˜`è¯´æ˜é€šè¿‡ç›‘å¬ä¹Ÿå®Œæˆäº†ä»»åŠ¡åˆ†é…çš„å·¥ä½œäº†\n\n![image-20220322215805734](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220322215805734.png)\n\n\n\n\n\n\n\n## æµç¨‹å˜é‡\n\næµç¨‹å®ä¾‹æŒ‰æ­¥éª¤æ‰§è¡Œæ—¶ï¼Œéœ€è¦ä½¿ç”¨ä¸€äº›æ•°æ®ã€‚åœ¨Flowableä¸­ï¼Œè¿™äº›æ•°æ®ç§°ä½œ*å˜é‡(variable)*ï¼Œå¹¶ä¼šå­˜å‚¨åœ¨æ•°æ®åº“ä¸­ã€‚å˜é‡å¯ä»¥ç”¨åœ¨è¡¨è¾¾å¼ä¸­ï¼ˆä¾‹å¦‚åœ¨æ’ä»–ç½‘å…³ä¸­ç”¨äºé€‰æ‹©æ­£ç¡®çš„å‡ºå£è·¯å¾„ï¼‰ï¼Œä¹Ÿå¯ä»¥åœ¨JavaæœåŠ¡ä»»åŠ¡(service task)ä¸­ç”¨äºè°ƒç”¨å¤–éƒ¨æœåŠ¡ï¼ˆä¾‹å¦‚ä¸ºæœåŠ¡è°ƒç”¨æä¾›è¾“å…¥æˆ–ç»“æœå­˜å‚¨ï¼‰ï¼Œç­‰ç­‰ã€‚\n\næµç¨‹å®ä¾‹å¯ä»¥æŒæœ‰å˜é‡ï¼ˆç§°ä½œ*æµç¨‹å˜é‡ process variables*ï¼‰ï¼›ç”¨æˆ·ä»»åŠ¡ä»¥åŠ*æ‰§è¡Œ(executions)*â€”â€”æµç¨‹å½“å‰æ´»åŠ¨èŠ‚ç‚¹çš„æŒ‡é’ˆâ€”â€”ä¹Ÿå¯ä»¥æŒæœ‰å˜é‡ã€‚æµç¨‹å®ä¾‹å¯ä»¥æŒæœ‰ä»»æ„æ•°é‡çš„å˜é‡ï¼Œæ¯ä¸ªå˜é‡å­˜å‚¨ä¸º*ACT_RU_VARIABLE*æ•°æ®åº“è¡¨çš„ä¸€è¡Œã€‚\n\næ‰€æœ‰çš„*startProcessInstanceXXX*æ–¹æ³•éƒ½æœ‰ä¸€ä¸ªå¯é€‰å‚æ•°ï¼Œç”¨äºåœ¨æµç¨‹å®ä¾‹åˆ›å»ºåŠå¯åŠ¨æ—¶è®¾ç½®å˜é‡ã€‚ä¾‹å¦‚ï¼Œåœ¨*RuntimeService*ä¸­ï¼š\n\n```java\nProcessInstance startProcessInstanceByKey(String processDefinitionKey, Map<String, Object> variables);\n```\n\nä¹Ÿå¯ä»¥åœ¨æµç¨‹æ‰§è¡Œä¸­åŠ å…¥å˜é‡ã€‚ä¾‹å¦‚ï¼Œ(*RuntimeService*):\n\n```java\nvoid setVariable(String executionId, String variableName, Object value);\nvoid setVariableLocal(String executionId, String variableName, Object value);\nvoid setVariables(String executionId, Map<String, ? extends Object> variables);\nvoid setVariablesLocal(String executionId, Map<String, ? extends Object> variables);\n```\n\n\n\n![image-20220324095243595](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220324095243595.png)\n\n\n\n### å…¨å±€å˜é‡\n\næµç¨‹å˜é‡çš„é»˜è®¤ä½œç”¨åŸŸæ˜¯æµç¨‹å®ä¾‹ã€‚å½“ä¸€ä¸ªæµç¨‹å˜é‡çš„ä½œç”¨åŸŸä¸ºæµç¨‹å®ä¾‹æ—¶ï¼Œå¯ä»¥ç§°ä¸º global å˜é‡\n\næ³¨æ„ï¼šå¦‚ï¼š    Globalå˜é‡ï¼šuserIdï¼ˆå˜é‡åï¼‰ã€zhangsanï¼ˆå˜é‡å€¼ï¼‰\n\nglobal å˜é‡ä¸­å˜é‡åä¸å…è®¸é‡å¤ï¼Œè®¾ç½®ç›¸åŒåç§°çš„å˜é‡ï¼Œåè®¾ç½®çš„å€¼ä¼šè¦†ç›–å‰è®¾ç½®çš„å˜é‡å€¼ã€‚\n\n### å±€éƒ¨å˜é‡\n\nä»»åŠ¡å’Œæ‰§è¡Œå®ä¾‹ä»…ä»…æ˜¯é’ˆå¯¹ä¸€ä¸ªä»»åŠ¡å’Œä¸€ä¸ªæ‰§è¡Œå®ä¾‹èŒƒå›´ï¼ŒèŒƒå›´æ²¡æœ‰æµç¨‹å®ä¾‹å¤§ï¼Œ ç§°ä¸º local å˜é‡ã€‚\n\nLocal å˜é‡ç”±äºåœ¨ä¸åŒçš„ä»»åŠ¡æˆ–ä¸åŒçš„æ‰§è¡Œå®ä¾‹ä¸­ï¼Œä½œç”¨åŸŸäº’ä¸å½±å“ï¼Œå˜é‡åå¯ä»¥ç›¸åŒæ²¡æœ‰å½±å“ã€‚Local å˜é‡åä¹Ÿå¯ä»¥å’Œ global å˜é‡åç›¸åŒï¼Œæ²¡æœ‰å½±å“ã€‚ \n\n\n\n\n\n### æ¡ˆä¾‹è®²è§£\n\n éœ€æ±‚ï¼šå‘˜å·¥åˆ›å»ºå‡ºå·®ç”³è¯·å•ï¼Œç”±éƒ¨é—¨ç»ç†å®¡æ ¸ï¼Œéƒ¨é—¨ç»ç†ç”³è¯·é€šè¿‡å3å¤©ä»¥ä¸‹ç”±è´¢åŠ¡ç›´æ¥ç”³æ‰¹ï¼Œ3å¤©ä»¥ä¸Šå…ˆç”±æ€»ç»ç†å®¡æ‰¹ï¼Œæ€»ç»ç†å®¡æ‰¹é€šè¿‡åå†ç”±è´¢åŠ¡å®¡æ‰¹ã€‚\n\n\n\n![image-20220324093855618](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220324093855618.png)\n\n\n\nè¿æ¥å…ˆè®¾ç½®æ¡ä»¶\n\n![image-20220324093806442](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220324093806442.png)\n\n\n\n![image-20220324093700631](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220324093700631.png)\n\n\n\n\n\néƒ¨ç½²æµç¨‹\n\n```java\n@Test\npublic void deploy(){\n    ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine();\n    RepositoryService repositoryService = processEngine.getRepositoryService();\n    Deployment deploy = repositoryService.createDeployment()\n        .addClasspathResource(\"å‡ºå·®ç”³è¯·å•.bpmn20.xml\")\n        .name(\"è¯·å‡æµç¨‹...\")\n        .category(\"è¯·å‡\") // åˆ†ç±»\n        .tenantId(\"dpb\") // ç§Ÿæˆ·id\n        .deploy();\n    System.out.println(\"deploy.getId() = \" + deploy.getId());\n    System.out.println(\"deploy.getName() = \" + deploy.getName());\n    System.out.println(\"deploy.getCategory() = \" + deploy.getCategory());\n}\n```\n\n\n\nå¯åŠ¨æµç¨‹å®ä¾‹ï¼šå¹¶ä¸”æŒ‡å®šå…¨å±€æµç¨‹å˜é‡\n\n```java\n/**\n     * åœ¨å¯åŠ¨æµç¨‹å®ä¾‹çš„æ—¶å€™è®¾ç½®æµç¨‹å˜é‡\n     */\n    @Test\n    public void runProcess(){\n        // è·å–æµç¨‹å¼•æ“å¯¹è±¡\n        ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine();\n        // å¯åŠ¨æµç¨‹å®ä¾‹é€šè¿‡ RuntimeService å¯¹è±¡\n        RuntimeService runtimeService = processEngine.getRuntimeService();\n        // è®¾ç½®æµç¨‹å˜é‡\n        Map<String,Object> variables = new HashMap<>();\n        // è®¾ç½®assigneeçš„å–å€¼\n        variables.put(\"assignee0\",\"å¼ ä¸‰\");\n        variables.put(\"assignee1\",\"æå››\");\n        variables.put(\"assignee2\",\"ç‹äº”\");\n        variables.put(\"assignee3\",\"èµµè´¢åŠ¡\");\n        // å¯åŠ¨æµç¨‹å®ä¾‹ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æµç¨‹å®šä¹‰çš„id\n        ProcessInstance processInstance = runtimeService\n                .startProcessInstanceById(\"evection:1:4\",variables);// å¯åŠ¨æµç¨‹å®ä¾‹\n        // è¾“å‡ºç›¸å…³çš„æµç¨‹å®ä¾‹ä¿¡æ¯\n        System.out.println(\"æµç¨‹å®šä¹‰çš„IDï¼š\" + processInstance.getProcessDefinitionId());\n        System.out.println(\"æµç¨‹å®ä¾‹çš„IDï¼š\" + processInstance.getId());\n        System.out.println(\"å½“å‰æ´»åŠ¨çš„IDï¼š\" + processInstance.getActivityId());\n\n    }\n```\n\nå®ŒæˆTaskä»»åŠ¡ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥æŒ‡å®šæµç¨‹å˜é‡\n\n```java\n/**\n     * å®Œæˆä»»åŠ¡æ—¶æŒ‡å®šæµç¨‹å˜é‡\n     */\n    @Test\n    public void completeTask(){\n\n        // è·å–æµç¨‹å¼•æ“å¯¹è±¡\n        ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine();\n        TaskService taskService = processEngine.getTaskService();\n        Task task = taskService.createTaskQuery()\n                .processDefinitionId(\"evection:1:4\")\n                .taskAssignee(\"æå››\")\n                .singleResult();\n        // æ·»åŠ æµç¨‹å˜é‡\n        Map<String, Object> map = task.getProcessVariables();\n        map.put(\"num\",4);\n\n        // å®Œæˆä»»åŠ¡\n        taskService.complete(task.getId(),map);\n    }\n```\n\nå½“ç„¶æˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨å¤„ç†æµç¨‹ä¹‹å¤–é€šè¿‡Taskç¼–å·æ¥ä¿®æ”¹æµç¨‹å˜é‡\n\n```java\n/**\n     * é€šè¿‡å½“å‰ä»»åŠ¡è®¾ç½®\n     */\n    @Test\n    public void currentTask(){\n        //   å½“å‰å¾…åŠä»»åŠ¡id\n        //  è·å–processEngine\n        ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine();\n        TaskService taskService = processEngine.getTaskService();\n        Task task = taskService.createTaskQuery()\n                .processDefinitionId(\"evection:1:4\")\n                .taskAssignee(\"ç‹äº”\")\n                .singleResult();\n        // æ·»åŠ æµç¨‹å˜é‡\n        Map<String, Object> map = task.getProcessVariables();\n        map.put(\"num\",1);\n        //  ä¸€æ¬¡è®¾ç½®å¤šä¸ªå€¼ è®¾ç½®å±€éƒ¨å˜é‡\n        taskService.setVariables(task.getId(), map);\n    }\n```\n\n\n\n\n\n# å€™é€‰äººå’Œå€™é€‰äººç»„\n\nåœ¨æµç¨‹å®šä¹‰ä¸­åœ¨ä»»åŠ¡ç»“ç‚¹çš„ assignee å›ºå®šè®¾ç½®ä»»åŠ¡è´Ÿè´£äººï¼Œåœ¨æµç¨‹å®šä¹‰æ—¶å°†å‚ä¸è€…å›ºå®šè®¾ç½®åœ¨.bpmn æ–‡ä»¶ä¸­ï¼Œå¦‚æœä¸´æ—¶ä»»åŠ¡è´Ÿè´£äººå˜æ›´åˆ™éœ€è¦ä¿®æ”¹æµç¨‹å®šä¹‰ï¼Œç³»ç»Ÿå¯æ‰©å±•æ€§å·®ã€‚é’ˆå¯¹è¿™ç§æƒ…å†µå¯ä»¥ç»™ä»»åŠ¡è®¾ç½®å¤šä¸ªå€™é€‰äººæˆ–è€…å€™é€‰äººç»„ï¼Œå¯ä»¥ä»å€™é€‰äººä¸­é€‰æ‹©å‚ä¸è€…æ¥å®Œæˆä»»åŠ¡ã€‚\n\n## å€™é€‰äºº\n\n### å®šä¹‰æµç¨‹å›¾\n\nå®šä¹‰æµç¨‹å›¾ï¼ŒåŒæ—¶æŒ‡å®šå€™é€‰äººï¼Œå¤šä¸ªå€™é€‰äººä¼šé€šè¿‡`,`è¿æ¥\n\n![image-20220325095959489](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220325095959489.png)\n\n![image-20220325100835461](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220325100835461.png)\n\n\n\n\n\n### éƒ¨ç½²å’Œå¯åŠ¨æµç¨‹å®ä¾‹\n\néƒ¨ç½²æµç¨‹ï¼Œå¹¶ä¸”åœ¨å¯åŠ¨æµç¨‹å®ä¾‹çš„æ—¶å€™å¯¹UELè¡¨è¾¾å¼èµ‹å€¼\n\n```java\n    /**\n     * éƒ¨ç½²æµç¨‹\n     */\n    @Test\n    public void deploy(){\n        ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine();\n        RepositoryService repositoryService = processEngine.getRepositoryService();\n\n        Deployment deploy = repositoryService.createDeployment()\n                .addClasspathResource(\"è¯·å‡æµç¨‹-å€™é€‰äºº.bpmn20.xml\")\n                .name(\"è¯·æ±‚æµç¨‹-å€™é€‰äºº\")\n                .deploy();\n        System.out.println(\"deploy.getId() = \" + deploy.getId());\n        System.out.println(deploy.getName());\n    }\n\n    /**\n     * å¯åŠ¨æµç¨‹å®ä¾‹\n     */\n    @Test\n    public void runProcess(){\n        ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine();\n        RuntimeService runtimeService = processEngine.getRuntimeService();\n        // ç»™æµç¨‹å®šä¹‰ä¸­çš„UELè¡¨è¾¾å¼èµ‹å€¼\n        Map<String,Object> variables = new HashMap<>();\n        variables.put(\"candidate1\",\"å¼ ä¸‰\");\n        variables.put(\"candidate2\",\"æå››\");\n        variables.put(\"candidate3\",\"ç‹äº”\");\n        runtimeService.startProcessInstanceById(\"holiday-candidate:1:4\",variables);\n    }\n```\n\nåœ¨å¯¹åº”çš„è¡¨ç»“æ„ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°æµç¨‹å˜é‡å·²ç»æœ‰äº†ï¼Œä½†æ˜¯å¯¹äºçš„Taskçš„Assigneeè¿˜æ˜¯ä¸ºç©ºã€‚\n\n![image-20220325101054787](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220325101054787.png)\n\n\n\n\n\n![image-20220325102600573](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220325102600573.png)\n\n\n\n\n\n### ä»»åŠ¡çš„æŸ¥è¯¢\n\næ ¹æ®å½“å‰ç™»å½•çš„ç”¨æˆ·ï¼ŒæŸ¥è¯¢å¯¹åº”çš„å€™é€‰ä»»åŠ¡\n\n```java\n   /**\n     * æ ¹æ®ç™»å½•çš„ç”¨æˆ·æŸ¥è¯¢å¯¹åº”çš„å¯ä»¥æ‹¾å–çš„ä»»åŠ¡\n     *\n     */\n    @Test\n    public void queryTaskCandidate(){\n        ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine();\n        TaskService taskService = processEngine.getTaskService();\n        List<Task> list = taskService.createTaskQuery()\n                //.processInstanceId(\"2501\")\n                .processDefinitionId(\"holiday-candidate:1:4\")\n                .taskCandidateUser(\"æå››\") # æ³¨æ„\n                .list();\n        for (Task task : list) {\n            System.out.println(\"task.getId() = \" + task.getId());\n            System.out.println(\"task.getName() = \" + task.getName());\n        }\n    }\n```\n\n\n\n### ä»»åŠ¡çš„æ‹¾å–\n\nçŸ¥é“äº†æˆ‘æœ‰å¯æ‹¾å–çš„ä»»åŠ¡åï¼Œæ‹¾å–ä»»åŠ¡ã€‚\n\n```java\n/**\n     * æ‹¾å–ä»»åŠ¡\n     *    ä¸€ä¸ªå€™é€‰äººæ‹¾å–äº†è¿™ä¸ªä»»åŠ¡ä¹‹åå…¶ä»–çš„ç”¨æˆ·å°±æ²¡æœ‰åŠæ³•æ‹¾å–è¿™ä¸ªä»»åŠ¡äº†\n     *    æ‰€ä»¥å¦‚æœä¸€ä¸ªç”¨æˆ·æ‹¾å–äº†ä»»åŠ¡ä¹‹ååˆä¸æƒ³å¤„ç†äº†ï¼Œé‚£ä¹ˆå¯ä»¥é€€è¿˜\n     */\n    @Test\n    public void claimTaskCandidate(){\n        ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine();\n        TaskService taskService = processEngine.getTaskService();\n        Task task = taskService.createTaskQuery()\n                //.processInstanceId(\"2501\")\n                .processDefinitionId(\"holiday-candidate:1:4\")\n                .taskCandidateUser(\"æå››\")\n                .singleResult();\n        if(task != null){\n            // æ‹¾å–å¯¹åº”çš„ä»»åŠ¡\n            taskService.claim(task.getId(),\"æå››\");\n            System.out.println(\"ä»»åŠ¡æ‹¾å–æˆåŠŸ\");\n        }\n    }\n```\n\n\n\n![image-20220325103624344](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220325103624344.png)\n\n\n\n### ä»»åŠ¡çš„å½’è¿˜\n\næ‹¾å–ä»»åŠ¡åä¸æƒ³æ“ä½œé‚£ä¹ˆå°±å½’è¿˜ä»»åŠ¡\n\n```java\n    /**\n     * é€€è¿˜ä»»åŠ¡\n     *    ä¸€ä¸ªå€™é€‰äººæ‹¾å–äº†è¿™ä¸ªä»»åŠ¡ä¹‹åå…¶ä»–çš„ç”¨æˆ·å°±æ²¡æœ‰åŠæ³•æ‹¾å–è¿™ä¸ªä»»åŠ¡äº†\n     *    æ‰€ä»¥å¦‚æœä¸€ä¸ªç”¨æˆ·æ‹¾å–äº†ä»»åŠ¡ä¹‹ååˆä¸æƒ³å¤„ç†äº†ï¼Œé‚£ä¹ˆå¯ä»¥é€€è¿˜\n     */\n    @Test\n    public void unclaimTaskCandidate(){\n        ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine();\n        TaskService taskService = processEngine.getTaskService();\n        Task task = taskService.createTaskQuery()\n                //.processInstanceId(\"2501\")\n                .processDefinitionId(\"holiday-candidate:1:4\")\n                .taskAssignee(\"å¼ ä¸‰\")\n                .singleResult();\n        if(task != null){\n            // æ‹¾å–å¯¹åº”çš„ä»»åŠ¡\n            taskService.unclaim(task.getId());\n            System.out.println(\"å½’è¿˜æ‹¾å–æˆåŠŸ\");\n        }\n    }\n```\n\n\n\n\n\n### ä»»åŠ¡çš„äº¤æ¥\n\næ‹¾å–ä»»åŠ¡åå¦‚æœä¸æƒ³æ“ä½œä¹Ÿä¸æƒ³å½’è¿˜å¯ä»¥ç›´æ¥äº¤æ¥ç»™å¦å¤–ä¸€ä¸ªäººæ¥å¤„ç†\n\n```java\n   /**\n     * ä»»åŠ¡çš„äº¤æ¥\n     *    å¦‚æœæˆ‘è·å–äº†ä»»åŠ¡ï¼Œä½†æ˜¯ä¸æƒ³æ‰§è¡Œï¼Œé‚£ä¹ˆæˆ‘å¯ä»¥æŠŠè¿™ä¸ªä»»åŠ¡äº¤æ¥ç»™å…¶ä»–çš„ç”¨æˆ·\n     */\n    @Test\n    public void taskCandidate(){\n        ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine();\n        TaskService taskService = processEngine.getTaskService();\n        Task task = taskService.createTaskQuery()\n                //.processInstanceId(\"2501\")\n                .processDefinitionId(\"holiday-candidate:1:4\")\n                .taskAssignee(\"æå››\")\n                .singleResult();\n        if(task != null){\n            // ä»»åŠ¡çš„äº¤æ¥\n            taskService.setAssignee(task.getId(),\"ç‹äº”\");\n            System.out.println(\"ä»»åŠ¡äº¤æ¥ç»™äº†ç‹äº”\");\n        }\n    }\n```\n\n\n\n\n\n### ä»»åŠ¡çš„å®Œæˆ\n\næ­£å¸¸çš„ä»»åŠ¡å¤„ç†\n\n```java\n   /**\n     * å®Œæˆä»»åŠ¡\n     */\n    @Test\n    public void completeTask(){\n        ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine();\n        TaskService taskService = processEngine.getTaskService();\n        Task task = taskService.createTaskQuery()\n                //.processInstanceId(\"2501\")\n                .processDefinitionId(\"holiday-candidate:1:4\")\n                .taskAssignee(\"ç‹äº”\")\n                .singleResult();\n        if(task != null){\n            // å®Œæˆä»»åŠ¡\n            taskService.complete(task.getId());\n            System.out.println(\"å®ŒæˆTask\");\n        }\n    }\n\n```\n\n\n\n\n\n\n\n## å€™é€‰äººç»„\n\nå½“å€™é€‰äººå¾ˆå¤šçš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥åˆ†ç»„æ¥å¤„ç†ã€‚å…ˆåˆ›å»ºç»„ï¼Œç„¶åæŠŠç”¨æˆ·åˆ†é…åˆ°è¿™ä¸ªç»„ä¸­ã€‚\n\n### ç®¡ç†ç”¨æˆ·å’Œç»„\n\n#### ç”¨æˆ·ç®¡ç†\n\næˆ‘ä»¬éœ€è¦å…ˆå•ç‹¬ç»´æŠ¤ç”¨æˆ·ä¿¡æ¯ã€‚åå°å¯¹åº”çš„è¡¨ç»“æ„æ˜¯`ACT_ID_USER`.\n\n```java\n   /**\n     * ç»´æŠ¤ç”¨æˆ·\n     */\n    @Test\n    public void createUser(){\n        ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine();\n        // é€šè¿‡ IdentityService å®Œæˆç›¸å…³çš„ç”¨æˆ·å’Œç»„çš„ç®¡ç†\n        IdentityService identityService = processEngine.getIdentityService();\n        User user = identityService.newUser(\"ç”°ä½³\");\n        user.setFirstName(\"ç”°\");\n        user.setLastName(\"jia\");\n        user.setEmail(\"tianjia@qq.com\");\n        identityService.saveUser(user);\n    }\n```\n\n\n\n![image-20220325110324815](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220325110324815.png)\n\n\n\n#### Groupç®¡ç†\n\nç»´æŠ¤å¯¹åº”çš„Groupä¿¡æ¯ï¼Œåå°å¯¹åº”çš„è¡¨ç»“æ„æ˜¯`ACT_ID_GROUP`\n\n```java\n    /**\n     * åˆ›å»ºç”¨æˆ·ç»„\n     */\n    @Test\n    public void createGroup(){\n        ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine();\n        IdentityService identityService = processEngine.getIdentityService();\n        // åˆ›å»ºGroupå¯¹è±¡å¹¶æŒ‡å®šç›¸å…³çš„ä¿¡æ¯\n        Group group = identityService.newGroup(\"group2\");\n        group.setName(\"å¼€å‘éƒ¨\");\n        group.setType(\"type1\");\n        // åˆ›å»ºGroupå¯¹åº”çš„è¡¨ç»“æ„æ•°æ®\n        identityService.saveGroup(group);\n\n    }\n```\n\n![image-20220325110408435](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220325110408435.png)\n\n\n\n#### ç”¨æˆ·åˆ†é…ç»„\n\nç”¨æˆ·å’Œç»„æ˜¯ä¸€ä¸ªå¤šå¯¹å¤šçš„å…³è”å…³è”ï¼Œæˆ‘ä»¬éœ€è¦åšç›¸å…³çš„åˆ†é…ï¼Œåå°å¯¹åº”çš„è¡¨ç»“æ„æ˜¯`ACT_ID_MEMBERSHIP`\n\n```java\n    /**\n     * å°†ç”¨æˆ·åˆ†é…ç»™å¯¹åº”çš„Group\n     */\n    @Test\n    public void userGroup(){\n        ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine();\n        IdentityService identityService = processEngine.getIdentityService();\n        // æ ¹æ®ç»„çš„ç¼–å·æ‰¾åˆ°å¯¹åº”çš„Groupå¯¹è±¡\n        Group group = identityService.createGroupQuery().groupId(\"group1\").singleResult();\n        List<User> list = identityService.createUserQuery().list();\n        for (User user : list) {\n            // å°†ç”¨æˆ·åˆ†é…ç»™å¯¹åº”çš„ç»„\n            identityService.createMembership(user.getId(),group.getId());\n        }\n    }\n```\n\n\n\n![image-20220325110511848](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220325110511848.png)\n\n\n\n\n\n### å€™é€‰äººç»„åº”ç”¨\n\nææ¸…æ¥šäº†ç”¨æˆ·å’Œç”¨æˆ·ç»„çš„å…³ç³»åæˆ‘ä»¬å°±å¯ä»¥æ¥ä½¿ç”¨å€™é€‰äººç»„çš„åº”ç”¨äº†\n\n#### åˆ›å»ºæµç¨‹å›¾\n\n![image-20220325111013641](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220325111013641.png)\n\n\n\n![image-20220325110952527](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220325110952527.png)\n\n\n\n\n\n\n\n#### æµç¨‹çš„éƒ¨ç½²è¿è¡Œ\n\nç„¶åæˆ‘ä»¬æŠŠæµç¨‹éƒ¨ç½²å’Œè¿è¡Œï¼Œæ³¨æ„å¯¹UELè¡¨è¾¾å¼èµ‹å€¼ï¼Œå…³è”ä¸ŠGroup\n\n```java\n/**\n     * éƒ¨ç½²æµç¨‹\n     */\n    @Test\n    public void deploy(){\n        ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine();\n        RepositoryService repositoryService = processEngine.getRepositoryService();\n\n        Deployment deploy = repositoryService.createDeployment()\n                .addClasspathResource(\"è¯·å‡æµç¨‹-å€™é€‰äººç»„.bpmn20.xml\")\n                .name(\"è¯·æ±‚æµç¨‹-å€™é€‰äºº\")\n                .deploy();\n        System.out.println(\"deploy.getId() = \" + deploy.getId());\n        System.out.println(deploy.getName());\n    }\n\n    /**\n     * å¯åŠ¨æµç¨‹å®ä¾‹\n     */\n    @Test\n    public void runProcess(){\n        ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine();\n        IdentityService identityService = processEngine.getIdentityService();\n        Group group = identityService.createGroupQuery().groupId(\"group1\").singleResult();\n        RuntimeService runtimeService = processEngine.getRuntimeService();\n        // ç»™æµç¨‹å®šä¹‰ä¸­çš„UELè¡¨è¾¾å¼èµ‹å€¼\n        Map<String,Object> variables = new HashMap<>();\n        // variables.put(\"g1\",\"group1\");\n        variables.put(\"g1\",group.getId()); // ç»™æµç¨‹å®šä¹‰ä¸­çš„UELè¡¨è¾¾å¼èµ‹å€¼\n        runtimeService.startProcessInstanceById(\"holiday-group:1:17504\",variables);\n    }\n```\n\nå¯¹åº”è¡¨ç»“æ„ä¸­å°±æœ‰å¯¹åº”çš„ä½“ç°\n\n![image-20220325112545719](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220325112545719.png)\n\n\n\n\n\n#### ä»»åŠ¡çš„æ‹¾å–å’Œå®Œæˆ\n\nç„¶åå®Œæˆä»»åŠ¡çš„æŸ¥è¯¢æ‹¾å–å’Œå¤„ç†æ“ä½œ\n\n```java\n/**\n     * æ ¹æ®ç™»å½•çš„ç”¨æˆ·æŸ¥è¯¢å¯¹åº”çš„å¯ä»¥æ‹¾å–çš„ä»»åŠ¡\n     *\n     */\n    @Test\n    public void queryTaskCandidateGroup(){\n        ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine();\n        // æ ¹æ®å½“å‰ç™»å½•çš„ç”¨æˆ·æ‰¾åˆ°å¯¹åº”çš„ç»„\n        IdentityService identityService = processEngine.getIdentityService();\n        // å½“å‰ç”¨æˆ·æ‰€åœ¨çš„ç»„\n        Group group = identityService.createGroupQuery().groupMember(\"é‚“å½ª\").singleResult();\n\n        TaskService taskService = processEngine.getTaskService();\n        List<Task> list = taskService.createTaskQuery()\n                //.processInstanceId(\"2501\")\n                .processDefinitionId(\"holiday-group:1:17504\")\n                .taskCandidateGroup(group.getId())\n                .list();\n        for (Task task : list) {\n            System.out.println(\"task.getId() = \" + task.getId());\n            System.out.println(\"task.getName() = \" + task.getName());\n        }\n    }\n\n    /**\n     * æ‹¾å–ä»»åŠ¡\n     *    ä¸€ä¸ªå€™é€‰äººæ‹¾å–äº†è¿™ä¸ªä»»åŠ¡ä¹‹åå…¶ä»–çš„ç”¨æˆ·å°±æ²¡æœ‰åŠæ³•æ‹¾å–è¿™ä¸ªä»»åŠ¡äº†\n     *    æ‰€ä»¥å¦‚æœä¸€ä¸ªç”¨æˆ·æ‹¾å–äº†ä»»åŠ¡ä¹‹ååˆä¸æƒ³å¤„ç†äº†ï¼Œé‚£ä¹ˆå¯ä»¥é€€è¿˜\n     */\n    @Test\n    public void claimTaskCandidate(){\n        String userId = \"ç”°ä½³\";\n        ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine();\n        // æ ¹æ®å½“å‰ç™»å½•çš„ç”¨æˆ·æ‰¾åˆ°å¯¹åº”çš„ç»„\n        IdentityService identityService = processEngine.getIdentityService();\n        // å½“å‰ç”¨æˆ·æ‰€åœ¨çš„ç»„\n        Group group = identityService.createGroupQuery().groupMember(userId).singleResult();\n        TaskService taskService = processEngine.getTaskService();\n        Task task = taskService.createTaskQuery()\n                //.processInstanceId(\"2501\")\n                .processDefinitionId(\"holiday-group:1:17504\")\n                .taskCandidateGroup(group.getId())\n                .singleResult();\n        if(task != null) {\n            // ä»»åŠ¡æ‹¾å–\n            taskService.claim(task.getId(),userId);\n            System.out.println(\"ä»»åŠ¡æ‹¾å–æˆåŠŸ\");\n        }\n    }  \n   /**\n     * å®Œæˆä»»åŠ¡\n     */\n    @Test\n    public void completeTask(){\n        ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine();\n        TaskService taskService = processEngine.getTaskService();\n        Task task = taskService.createTaskQuery()\n                //.processInstanceId(\"2501\")\n                .processDefinitionId(\"holiday-group:1:17504\")\n                .taskAssignee(\"é‚“å½ª\")\n                .singleResult();\n        if(task != null){\n            // å®Œæˆä»»åŠ¡\n            taskService.complete(task.getId());\n            System.out.println(\"å®ŒæˆTask\");\n        }\n    }\n```\n\n\n\n\n\n# ç½‘å…³\n\nç½‘å…³ç”¨æ¥æ§åˆ¶æµç¨‹çš„æµå‘\n\n## æ’ä»–ç½‘å…³\n\næ’ä»–ç½‘å…³ï¼ˆexclusive gatewayï¼‰ï¼ˆä¹Ÿå«*å¼‚æˆ–ç½‘å…³ XOR gateway*ï¼Œæˆ–è€…æ›´ä¸“ä¸šçš„ï¼Œ*åŸºäºæ•°æ®çš„æ’ä»–ç½‘å…³ exclusive data-based gateway*ï¼‰ï¼Œç”¨äºå¯¹æµç¨‹ä¸­çš„**å†³ç­–**å»ºæ¨¡ã€‚å½“æ‰§è¡Œåˆ°è¾¾è¿™ä¸ªç½‘å…³æ—¶ï¼Œä¼šæŒ‰ç…§æ‰€æœ‰å‡ºå£é¡ºåºæµå®šä¹‰çš„é¡ºåºå¯¹å®ƒä»¬è¿›è¡Œè®¡ç®—ã€‚é€‰æ‹©ç¬¬ä¸€ä¸ªæ¡ä»¶è®¡ç®—ä¸ºtrueçš„é¡ºåºæµï¼ˆå½“æ²¡æœ‰è®¾ç½®æ¡ä»¶æ—¶ï¼Œè®¤ä¸ºé¡ºåºæµä¸º*true*ï¼‰ç»§ç»­æµç¨‹ã€‚\n\n**è¯·æ³¨æ„è¿™é‡Œå‡ºå£é¡ºåºæµçš„å«ä¹‰ä¸BPMN 2.0ä¸­çš„ä¸€èˆ¬æƒ…å†µä¸ä¸€æ ·ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œä¼šé€‰æ‹©æ‰€æœ‰æ¡ä»¶è®¡ç®—ä¸ºtrueçš„é¡ºåºæµï¼Œå¹¶è¡Œæ‰§è¡Œã€‚è€Œä½¿ç”¨æ’ä»–ç½‘å…³æ—¶ï¼Œåªä¼šé€‰æ‹©ä¸€æ¡é¡ºåºæµã€‚å½“å¤šæ¡é¡ºåºæµçš„æ¡ä»¶éƒ½è®¡ç®—ä¸ºtrueæ—¶ï¼Œä¼šä¸”ä»…ä¼šé€‰æ‹©åœ¨XMLä¸­æœ€å…ˆå®šä¹‰çš„é¡ºåºæµç»§ç»­æµç¨‹ã€‚å¦‚æœæ²¡æœ‰å¯é€‰çš„é¡ºåºæµï¼Œä¼šæŠ›å‡ºå¼‚å¸¸ã€‚**\n\nå›¾ç¤º\n\næ’ä»–ç½‘å…³ç”¨å†…éƒ¨å¸¦æœ‰â€™Xâ€™å›¾æ ‡çš„æ ‡å‡†ç½‘å…³ï¼ˆè±å½¢ï¼‰è¡¨ç¤ºï¼Œ'Xâ€™å›¾æ ‡ä»£è¡¨*å¼‚æˆ–*çš„å«ä¹‰ã€‚è¯·æ³¨æ„å†…éƒ¨æ²¡æœ‰å›¾æ ‡çš„ç½‘å…³é»˜è®¤ä¸ºæ’ä»–ç½‘å…³ã€‚BPMN 2.0è§„èŒƒä¸å…è®¸åœ¨åŒä¸€ä¸ªæµç¨‹ä¸­æ··åˆä½¿ç”¨æœ‰åŠæ²¡æœ‰Xçš„è±å½¢æ ‡å¿—ã€‚\n\n![image-20220326100630908](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220326100630908.png)\n\n\n\næ¡ˆä¾‹ï¼š\n\n![image-20220326103951903](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220326103951903.png)\n\n\n\n```java\n   /**\n     * éƒ¨ç½²æµç¨‹\n     */\n    @Test\n    public void deploy(){\n        ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine();\n        RepositoryService repositoryService = processEngine.getRepositoryService();\n\n        Deployment deploy = repositoryService.createDeployment()\n                .addClasspathResource(\"è¯·å‡æµç¨‹-æ’ä»–ç½‘å…³.bpmn20.xml\")\n                .name(\"è¯·æ±‚æµç¨‹-æ’ä»–ç½‘å…³\")\n                .deploy();\n        System.out.println(\"deploy.getId() = \" + deploy.getId());\n        System.out.println(deploy.getName());\n    }\n\n    /**\n     * å¯åŠ¨æµç¨‹å®ä¾‹\n     */\n    @Test\n    public void runProcess(){\n        ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine();\n        RuntimeService runtimeService = processEngine.getRuntimeService();\n        // ç»™æµç¨‹å®šä¹‰ä¸­çš„UELè¡¨è¾¾å¼èµ‹å€¼\n        Map<String,Object> variables = new HashMap<>();\n        // variables.put(\"g1\",\"group1\");\n        variables.put(\"num\",3); // ç»™æµç¨‹å®šä¹‰ä¸­çš„UELè¡¨è¾¾å¼èµ‹å€¼\n        runtimeService.startProcessInstanceById(\"holiday-exclusive:1:4\",variables);\n    }\n\n\n    /**\n     * å¯åŠ¨æµç¨‹å®ä¾‹\n     */\n    @Test\n    public void setVariables(){\n        ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine();\n        RuntimeService runtimeService = processEngine.getRuntimeService();\n        // ç»™æµç¨‹å®šä¹‰ä¸­çš„UELè¡¨è¾¾å¼èµ‹å€¼\n        Map<String,Object> variables = new HashMap<>();\n        // variables.put(\"g1\",\"group1\");\n        variables.put(\"num\",4); // ç»™æµç¨‹å®šä¹‰ä¸­çš„UELè¡¨è¾¾å¼èµ‹å€¼\n        runtimeService.setVariables(\"12503\",variables);\n    }\n\n\n\n    /**\n     * å®Œæˆä»»åŠ¡\n     */\n    @Test\n    public void completeTask(){\n        ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine();\n        TaskService taskService = processEngine.getTaskService();\n        Task task = taskService.createTaskQuery()\n                //.processInstanceId(\"2501\")\n                .processDefinitionId(\"holiday-exclusive:1:4\")\n                .taskAssignee(\"zhangsan\")\n                .singleResult();\n        if(task != null){\n            // å®Œæˆä»»åŠ¡\n            taskService.complete(task.getId());\n            System.out.println(\"å®ŒæˆTask\");\n        }\n    }\n```\n\n\n\n\n\nå¦‚æœä»ç½‘å…³å‡ºå»çš„çº¿æ‰€æœ‰æ¡ä»¶éƒ½ä¸æ»¡è¶³çš„æƒ…å†µä¸‹ä¼šæŠ›å‡ºç³»ç»Ÿå¼‚å¸¸ï¼Œ\n\n![image-20220326104744181](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220326104744181.png)\n\n\n\nä½†æ˜¯è¦æ³¨æ„ä»»åŠ¡æ²¡æœ‰ä»‹ç»ï¼Œè¿˜æ˜¯åŸæ¥çš„ä»»åŠ¡ï¼Œæˆ‘ä»¬å¯ä»¥é‡ç½®æµç¨‹å˜é‡\n\n```java\n    @Test\n    public void setVariables(){\n        ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine();\n        RuntimeService runtimeService = processEngine.getRuntimeService();\n        // ç»™æµç¨‹å®šä¹‰ä¸­çš„UELè¡¨è¾¾å¼èµ‹å€¼\n        Map<String,Object> variables = new HashMap<>();\n        // variables.put(\"g1\",\"group1\");\n        variables.put(\"num\",4); // ç»™æµç¨‹å®šä¹‰ä¸­çš„UELè¡¨è¾¾å¼èµ‹å€¼\n        runtimeService.setVariables(\"12503\",variables);\n    }\n```\n\n\n\n\n\nå‰é¢æˆ‘ä»¬å¯ä»¥ç›´æ¥åœ¨è¿æ¥çº¿ä¸Šå®šä¹‰æ¡ä»¶ï¼Œé‚£ä¸ºä»€ä¹ˆè¿˜è¦æœ‰æ’ä»–ç½‘å…³å‘¢ï¼Ÿç›´æ¥åœ¨çº¿ä¸Šçš„æƒ…å†µï¼Œå¦‚æœæ¡ä»¶éƒ½ä¸æ»¡è¶³ï¼Œæµç¨‹å°±ç»“æŸäº†ï¼Œæ˜¯å¼‚å¸¸ç»“æŸ!!\n\n## å¹¶è¡Œç½‘å…³\n\nå¹¶è¡Œç½‘å…³å…è®¸å°†æµç¨‹åˆ†æˆå¤šæ¡åˆ†æ”¯ï¼Œä¹Ÿå¯ä»¥æŠŠå¤šæ¡åˆ†æ”¯æ±‡èšåˆ°ä¸€èµ·ï¼Œå¹¶è¡Œç½‘å…³çš„åŠŸèƒ½æ˜¯åŸºäºè¿›å…¥å’Œå¤–å‡ºé¡ºåºæµçš„ï¼š\n\n* forkåˆ†æ”¯ï¼šå¹¶è¡Œåçš„æ‰€æœ‰å¤–å‡ºé¡ºåºæµï¼Œä¸ºæ¯ä¸ªé¡ºåºæµéƒ½åˆ›å»ºä¸€ä¸ªå¹¶å‘åˆ†æ”¯ã€‚\n\n* joinæ±‡èšï¼š æ‰€æœ‰åˆ°è¾¾å¹¶è¡Œç½‘å…³ï¼Œåœ¨æ­¤ç­‰å¾…çš„è¿›å…¥åˆ†æ”¯ï¼Œ ç›´åˆ°æ‰€æœ‰è¿›å…¥é¡ºåºæµçš„åˆ†æ”¯éƒ½åˆ°è¾¾ä»¥åï¼Œ æµç¨‹å°±ä¼šé€šè¿‡æ±‡èšç½‘å…³ã€‚\n\næ³¨æ„ï¼Œå¦‚æœåŒä¸€ä¸ªå¹¶è¡Œç½‘å…³æœ‰å¤šä¸ªè¿›å…¥å’Œå¤šä¸ªå¤–å‡ºé¡ºåºæµï¼Œ å®ƒå°±åŒæ—¶å…·æœ‰åˆ†æ”¯å’Œæ±‡èšåŠŸèƒ½ã€‚ è¿™æ—¶ï¼Œç½‘å…³ä¼šå…ˆæ±‡èšæ‰€æœ‰è¿›å…¥çš„é¡ºåºæµï¼Œç„¶åå†åˆ‡åˆ†æˆå¤šä¸ªå¹¶è¡Œåˆ†æ”¯ã€‚\n\n**ä¸å…¶ä»–ç½‘å…³çš„ä¸»è¦åŒºåˆ«æ˜¯ï¼Œå¹¶è¡Œç½‘å…³ä¸ä¼šè§£ææ¡ä»¶ã€‚** **å³ä½¿é¡ºåºæµä¸­å®šä¹‰äº†æ¡ä»¶ï¼Œä¹Ÿä¼šè¢«å¿½ç•¥ã€‚**\n\n\n\næ¡ˆä¾‹ï¼š\n\n![image-20220326110341232](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220326110341232.png)\n\nå½“æˆ‘ä»¬æ‰§è¡Œäº†åˆ›å»ºè¯·å‡å•åï¼Œåˆ°å¹¶è¡Œç½‘å…³çš„ä½ç½®çš„æ—¶å€™ï¼Œåœ¨ACT_RU_TASKè¡¨ä¸­å°±æœ‰ä¸¤æ¡è®°å½•\n\n![image-20220326111359504](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220326111359504.png)\n\nç„¶ååŒæ—¶åœ¨ACT_RU_EXECUTIONä¸­æœ‰ä¸‰æ¡è®°å½•ï¼Œä¸€ä¸ªä»»åŠ¡å¯¹åº”çš„æœ‰ä¸¤ä¸ªæ‰§è¡Œå®ä¾‹\n\n![image-20220326111453630](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220326111453630.png)\n\n\n\n\n\n\n\n## åŒ…å«ç½‘å…³\n\nåŒ…å«ç½‘å…³å¯ä»¥çœ‹åšæ˜¯æ’ä»–ç½‘å…³å’Œå¹¶è¡Œç½‘å…³çš„ç»“åˆä½“ã€‚ å’Œæ’ä»–ç½‘å…³ä¸€æ ·ï¼Œä½ å¯ä»¥åœ¨å¤–å‡ºé¡ºåºæµä¸Šå®šä¹‰æ¡ä»¶ï¼ŒåŒ…å«ç½‘å…³ä¼šè§£æå®ƒä»¬ã€‚ ä½†æ˜¯ä¸»è¦çš„åŒºåˆ«æ˜¯åŒ…å«ç½‘å…³å¯ä»¥é€‰æ‹©å¤šäºä¸€æ¡é¡ºåºæµï¼Œè¿™å’Œå¹¶è¡Œç½‘å…³ä¸€æ ·ã€‚\n\nåŒ…å«ç½‘å…³çš„åŠŸèƒ½æ˜¯åŸºäºè¿›å…¥å’Œå¤–å‡ºé¡ºåºæµçš„ï¼š\n\n* åˆ†æ”¯ï¼š æ‰€æœ‰å¤–å‡ºé¡ºåºæµçš„æ¡ä»¶éƒ½ä¼šè¢«è§£æï¼Œç»“æœä¸ºtrueçš„é¡ºåºæµä¼šä»¥å¹¶è¡Œæ–¹å¼ç»§ç»­æ‰§è¡Œï¼Œ ä¼šä¸ºæ¯ä¸ªé¡ºåºæµåˆ›å»ºä¸€ä¸ªåˆ†æ”¯ã€‚\n\n* æ±‡èšï¼šæ‰€æœ‰å¹¶è¡Œåˆ†æ”¯åˆ°è¾¾åŒ…å«ç½‘å…³ï¼Œä¼šè¿›å…¥ç­‰å¾…çŠ¶æ€ï¼Œ ç›´åˆ°æ¯ä¸ªåŒ…å«æµç¨‹tokençš„è¿›å…¥é¡ºåºæµçš„åˆ†æ”¯éƒ½åˆ°è¾¾ã€‚ è¿™æ˜¯ä¸å¹¶è¡Œç½‘å…³çš„æœ€å¤§ä¸åŒã€‚æ¢å¥è¯è¯´ï¼ŒåŒ…å«ç½‘å…³åªä¼šç­‰å¾…è¢«é€‰ä¸­æ‰§è¡Œäº†çš„è¿›å…¥é¡ºåºæµã€‚ åœ¨æ±‡èšä¹‹åï¼Œæµç¨‹ä¼šç©¿è¿‡åŒ…å«ç½‘å…³ç»§ç»­æ‰§è¡Œã€‚\n\n\n\n![image-20220326112720089](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220326112720089.png)\n\n\n\n\n\n## äº‹ä»¶ç½‘å…³\n\näº‹ä»¶ç½‘å…³å…è®¸æ ¹æ®äº‹ä»¶åˆ¤æ–­æµå‘ã€‚ç½‘å…³çš„æ¯ä¸ªå¤–å‡ºé¡ºåºæµéƒ½è¦è¿æ¥åˆ°ä¸€ä¸ªä¸­é—´æ•è·äº‹ä»¶ã€‚ å½“æµç¨‹åˆ°è¾¾ä¸€ä¸ªåŸºäºäº‹ä»¶ç½‘å…³ï¼Œç½‘å…³ä¼šè¿›å…¥ç­‰å¾…çŠ¶æ€ï¼šä¼šæš‚åœæ‰§è¡Œã€‚ä¸æ­¤åŒæ—¶ï¼Œä¼šä¸ºæ¯ä¸ªå¤–å‡ºé¡ºåºæµåˆ›å»ºç›¸å¯¹çš„äº‹ä»¶è®¢é˜…ã€‚\n\näº‹ä»¶ç½‘å…³çš„å¤–å‡ºé¡ºåºæµå’Œæ™®é€šé¡ºåºæµä¸åŒï¼Œè¿™äº›é¡ºåºæµä¸ä¼šçœŸçš„\"æ‰§è¡Œ\"ï¼Œ ç›¸åå®ƒä»¬è®©æµç¨‹å¼•æ“å»å†³å®šæ‰§è¡Œåˆ°äº‹ä»¶ç½‘å…³çš„æµç¨‹éœ€è¦è®¢é˜…å“ªäº›äº‹ä»¶ã€‚ è¦è€ƒè™‘ä»¥ä¸‹æ¡ä»¶ï¼š\n\n1. äº‹ä»¶ç½‘å…³å¿…é¡»æœ‰ä¸¤æ¡æˆ–ä»¥ä¸Šå¤–å‡ºé¡ºåºæµï¼›\n2. äº‹ä»¶ç½‘å…³åï¼Œåªèƒ½ä½¿ç”¨intermediateCatchEventç±»å‹ï¼ˆactivitiä¸æ”¯æŒåŸºäºäº‹ä»¶ç½‘å…³åè¿æ¥ReceiveTaskï¼‰\n3. è¿æ¥åˆ°äº‹ä»¶ç½‘å…³çš„ä¸­é—´æ•è·äº‹ä»¶å¿…é¡»åªæœ‰ä¸€ä¸ªå…¥å£é¡ºåºæµã€‚ \n\n\n\n\n\n# äº‹ä»¶\n\näº‹ä»¶ï¼ˆeventï¼‰é€šå¸¸ç”¨äºä¸ºæµç¨‹ç”Ÿå‘½å‘¨æœŸä¸­å‘ç”Ÿçš„äº‹æƒ…å»ºæ¨¡ã€‚äº‹ä»¶æ€»æ˜¯å›¾å½¢åŒ–ä¸ºåœ†åœˆã€‚åœ¨BPMN 2.0ä¸­ï¼Œæœ‰ä¸¤ç§ä¸»è¦çš„äº‹ä»¶åˆ†ç±»ï¼š*æ•è·ï¼ˆcatchingï¼‰*ä¸*æŠ›å‡ºï¼ˆthrowingï¼‰*äº‹ä»¶ã€‚\n\n- **æ•è·:** å½“æµç¨‹æ‰§è¡Œåˆ°è¾¾è¿™ä¸ªäº‹ä»¶æ—¶ï¼Œä¼šç­‰å¾…ç›´åˆ°è§¦å‘å™¨åŠ¨ä½œã€‚è§¦å‘å™¨çš„ç±»å‹ç”±å…¶ä¸­çš„å›¾æ ‡ï¼Œæˆ–è€…è¯´XMLä¸­çš„ç±»å‹å£°æ˜è€Œå®šä¹‰ã€‚æ•è·äº‹ä»¶ä¸æŠ›å‡ºäº‹ä»¶æ˜¾ç¤ºä¸Šçš„åŒºåˆ«ï¼Œæ˜¯å…¶å†…éƒ¨çš„å›¾æ ‡æ²¡æœ‰å¡«å……ï¼ˆå³æ˜¯ç™½è‰²çš„ï¼‰ã€‚\n- **æŠ›å‡º:** å½“æµç¨‹æ‰§è¡Œåˆ°è¾¾è¿™ä¸ªäº‹ä»¶æ—¶ï¼Œä¼šè§¦å‘ä¸€ä¸ªè§¦å‘å™¨ã€‚è§¦å‘å™¨çš„ç±»å‹ï¼Œç”±å…¶ä¸­çš„å›¾æ ‡ï¼Œæˆ–è€…è¯´XMLä¸­çš„ç±»å‹å£°æ˜è€Œå®šä¹‰ã€‚æŠ›å‡ºäº‹ä»¶ä¸æ•è·äº‹ä»¶æ˜¾ç¤ºä¸Šçš„åŒºåˆ«ï¼Œæ˜¯å…¶å†…éƒ¨çš„å›¾æ ‡å¡«å……ä¸ºé»‘è‰²ã€‚\n\n\n\n## å®šæ—¶äº‹ä»¶\n\nå®šæ—¶è§¦å‘çš„ç›¸å…³äº‹ä»¶ï¼ŒåŒ…æ‹¬å®šæ—¶å™¨å¯åŠ¨äº‹ä»¶ï¼Œå®šæ—¶å™¨æ•è·ä¸­é—´ä»¶äº‹ä»¶ï¼Œå®šæ—¶å™¨è¾¹ç•Œäº‹ä»¶\n\n### å®šæ—¶å™¨å¯åŠ¨äº‹ä»¶\n\nå®šæ—¶å™¨å¯åŠ¨äº‹ä»¶ï¼ˆtimer start eventï¼‰åœ¨æŒ‡å®šæ—¶é—´åˆ›å»ºæµç¨‹å®ä¾‹ã€‚åœ¨æµç¨‹åªéœ€è¦å¯åŠ¨ä¸€æ¬¡ï¼Œæˆ–è€…æµç¨‹éœ€è¦åœ¨ç‰¹å®šçš„æ—¶é—´é—´éš”é‡å¤å¯åŠ¨æ—¶ï¼Œéƒ½å¯ä»¥ä½¿ç”¨ã€‚\n\n***è¯·æ³¨æ„**ï¼š*å­æµç¨‹ä¸èƒ½æœ‰å®šæ—¶å™¨å¯åŠ¨äº‹ä»¶ã€‚\n\n***è¯·æ³¨æ„**ï¼š*å®šæ—¶å™¨å¯åŠ¨äº‹ä»¶ï¼Œåœ¨æµç¨‹éƒ¨ç½²çš„åŒæ—¶å°±å¼€å§‹è®¡æ—¶ã€‚ä¸éœ€è¦è°ƒç”¨startProcessInstanceByXXXå°±ä¼šåœ¨æ—¶é—´å¯åŠ¨ã€‚è°ƒç”¨startProcessInstanceByXXXæ—¶ä¼šåœ¨å®šæ—¶å¯åŠ¨ä¹‹å¤–é¢å¤–å¯åŠ¨ä¸€ä¸ªæµç¨‹ã€‚\n\n***è¯·æ³¨æ„**ï¼š*å½“éƒ¨ç½²å¸¦æœ‰å®šæ—¶å™¨å¯åŠ¨äº‹ä»¶çš„æµç¨‹çš„æ›´æ–°ç‰ˆæœ¬æ—¶ï¼Œä¸Šä¸€ç‰ˆæœ¬çš„å®šæ—¶å™¨ä½œä¸šä¼šè¢«ç§»é™¤ã€‚è¿™æ˜¯å› ä¸ºé€šå¸¸å¹¶ä¸å¸Œæœ›æ—§ç‰ˆæœ¬çš„æµç¨‹ä»ç„¶è‡ªåŠ¨å¯åŠ¨æ–°çš„æµç¨‹å®ä¾‹ã€‚\n\nå®šæ—¶å™¨å¯åŠ¨äº‹ä»¶ï¼Œç”¨å…¶ä¸­æœ‰ä¸€ä¸ªé’Ÿè¡¨å›¾æ ‡çš„åœ†åœˆæ¥è¡¨ç¤ºã€‚\n\n![image-20220327223547656](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220327223547656.png)\n\næ¡ˆä¾‹ï¼š\n\n![image-20220327231015715](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220327231015715.png)\n\nåœ¨å®šæ—¶å¯åŠ¨çš„èŠ‚ç‚¹è®¾ç½®æ—¶é—´ï¼š\n\n![image-20220327231055237](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220327231055237.png)\n\nå¯ä»¥é€šè¿‡FlowableUIä¸­çš„éƒ¨ç½²æ¥æ¼”ç¤ºï¼Œé€šè¿‡FlowableUIæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œæ²¡æœ‰å¯åŠ¨æµç¨‹å®ä¾‹çš„æƒ…å†µä¸‹ï¼Œåˆ°é‡Œ23:14:14ç§’çš„æ—¶å€™è‡ªåŠ¨å¸®åŠ©æˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªæµç¨‹å®ä¾‹ã€‚\n\n![image-20220327231551538](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220327231551538.png)\n\n\n\n\n\n\n\n### å®šæ—¶å™¨æ•è·ä¸­é—´äº‹ä»¶\n\nå½“ç¬¬ä¸€ä¸ªäººå·¥å¤„ç†å®Œæˆåï¼Œç¬¬äºŒä¸ªäººå·¥å¤„ç†çš„ä»»åŠ¡éœ€è¦åœ¨2022-03-27T23:25:14ä¹‹åæ‰§è¡Œ\n\næ¡ˆä¾‹ï¼š\n\n![image-20220327232259428](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220327232259428.png)\n\né€šè¿‡FlowableUIçš„æ¡ˆä¾‹æ¼”ç¤ºæˆ‘ä»¬å¯ä»¥çœ‹åˆ°åä¸€ä¸ªä»»åŠ¡æ˜¯åœ¨å®šæ—¶æ—¶é—´ä¹‹åæ‰§è¡Œçš„\n\n![image-20220327232624091](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220327232624091.png)\n\n\n\n\n\n### å®šæ—¶å™¨è¾¹ç•Œäº‹ä»¶\n\näººå·¥ä»»åŠ¡1å¦‚æœåœ¨å®šä¹‰çš„`2022-03-27T23:36:14`è¿™ä¸ªæ—¶é—´ä¹‹å‰è¿˜æ²¡æœ‰å¤„ç†ï¼Œé‚£ä¹ˆå°±ä¼šè§¦å‘å®šæ—¶è¾¹ç•Œäº‹ä»¶ï¼Œä»è€Œä»äººå·¥ä»»åŠ¡3.\n\næ¡ˆä¾‹\n\n![image-20220327233132259](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220327233132259.png)\n\n\n\n\n\nå‘å¸ƒå¯åŠ¨æµç¨‹\n\n![image-20220327233410596](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220327233410596.png)\n\n\n\nç„¶ååœ¨å¼ ä¸‰è¿™ä¸ªä½ç½®æˆ‘ä»¬ä¸å®Œæˆï¼Œç­‰åˆ°å®šæ—¶åˆ°æ¥ï¼Œè¾¾åˆ°å®šæ—¶çš„æ—¶é—´ï¼Œä»»åŠ¡è¿›å…¥åˆ°äº†äººå·¥å®¡æ‰¹ä¸‰\n\n\n\n### timeDuration\n\nâ€‹       åœ¨å®šæ—¶äº‹ä»¶ä¸­æˆ‘ä»¬ä¸€å®šè¦æ”¾å¼€å¦‚ä¸‹çš„é…ç½®ï¼š\n\n![image-20220329082431920](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220329082431920.png)\n\næŒ‡å®šè®¡æ—¶å™¨åœ¨å¯åŠ¨å‰åº”ç­‰å¾…å¤šé•¿çš„æ—¶é—´ï¼Œé¦–å…ˆä¸€å®šæ—¶å™¨å¯åŠ¨äº‹ä»¶ä¸ºä¾‹ï¼š\n\n#### å¼€å§‹äº‹ä»¶\n\n![image-20220328200755160](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220328200755160.png)\n\nå¯ä»¥é€šè¿‡FlowableUIçš„åº”ç”¨æ¥éªŒè¯\n\n![image-20220328202242555](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220328202242555.png)\n\nå‘å¸ƒä»»åŠ¡åç„¶åæˆ‘ä»¬ç­‰å¾…ä¸¤åˆ†é’Ÿå°±å¯ä»¥çœ‹åˆ°ä»»åŠ¡åˆ°äº†`zhangsan`çš„ä½ç½®ã€‚æˆ–è€…æˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨SpringBootæ•´åˆFlowableçš„é¡¹ç›®ä¸­æ·»åŠ å¯¹åº”çš„Controlleræ¥å¤„ç†\n\n```java\n    @Autowired\n    private ProcessEngine processEngine;\n\n\n    @GetMapping(\"/deploy\")\n    public String deploy(){\n        Deployment deployment = processEngine.getRepositoryService().createDeployment()\n                .addClasspathResource(\"test003.bpmn20.xml\")\n                .name(\"ç­‰å¾…å®šæ—¶å™¨å¯åŠ¨äº‹ä»¶\")\n                .deploy();\n        return \"éƒ¨ç½²ä»»åŠ¡æˆåŠŸ....\";\n    }\n```\n\næäº¤è¯·æ±‚å®Œæˆéƒ¨ç½²æ“ä½œ\n\n![image-20220328202918399](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220328202918399.png)\n\n\n\nç”Ÿæˆäº†å¯¹åº”çš„Taskè®°å½•\n\n![image-20220328203621023](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220328203621023.png)\n\n\n\n**æ³¨æ„**ï¼šåœ¨äº‹ä»¶ä¸­ä¸€å®šè¦å¼€å¯å¼‚æ­¥ä»»åŠ¡ï¼Œä¸ç„¶ç›¸å…³çš„äº‹ä»¶æ˜¯ä¸ä¼šè§¦å‘çš„ï¼\n\n![image-20220328203656000](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220328203656000.png)\n\n\n\n#### ä¸­é—´äº‹ä»¶\n\nç„¶åæ¥çœ‹çœ‹ä¸­é—´äº‹ä»¶çš„ç­‰å¾…å®šæ—¶å™¨äº‹ä»¶æ¡ˆä¾‹ï¼š\n\n![image-20220328204205453](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220328204205453.png)\n\næ¡ˆä¾‹ç”±ä¸¤ä¸ªè‡ªåŠ¨ä»»åŠ¡å’Œä¸€ä¸ªå®šæ—¶å™¨ä¸­é—´äº‹ä»¶ç»„æˆï¼Œåœ¨å®šæ—¶ä»»åŠ¡ä¸­ç»‘å®šäº†ä¸¤ä¸ªJavaDelegateçš„Javaç±»æ¥å¤„ç†\n\n```java\npublic class SignalStartOnedelegate implements JavaDelegate {\n    @Override\n    public void execute(DelegateExecution execution) {\n        System.out.println(\"-------è§¦å‘äº†-111-------->\"+ LocalDateTime.now().toString());\n    }\n}\n\npublic class SignalStartTwodelegate implements JavaDelegate {\n    @Override\n    public void execute(DelegateExecution execution) {\n        System.out.println(\"-------è§¦å‘äº†222--------->\"+ LocalDateTime.now().toString());\n    }\n}\n```\n\n\n\nç„¶åæµç¨‹å›¾ä¸­çš„å…³è”ä¸º\n\n![image-20220328204349358](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220328204349358.png)\n\nå¦ä¸€ä¸ªç±»ä¼¼ï¼Œç„¶åå®šæ—¶å™¨ä¸­é—´äº‹ä»¶çš„ç­‰å¾…æ—¶é—´è®¾ç½®æ˜¯2åˆ†é’Ÿã€‚æˆ‘ä»¬éƒ¨ç½²åé€šè¿‡Javaä»£ç æ¥æ¼”ç¤ºçœ‹çœ‹\n\n```java\n    @Test\n    public void test01() throws Exception{\n        Deployment deployment = processEngine.getRepositoryService().createDeployment()\n                .addClasspathResource(\"ç­‰å¾…å®šæ—¶å™¨ä¸­é—´äº‹ä»¶.bpmn20.xml\")\n                .name(\"ç­‰å¾…å®šæ—¶ä¸­é—´äº‹ä»¶...\")\n                .deploy();\n        System.out.println(\"-----\");\n    }\n```\n\nç„¶åæˆ‘ä»¬éœ€è¦å¯åŠ¨æµç¨‹å®ä¾‹ï¼Œä¹‹åç­‰å¾…ä¸¤åˆ†é’Ÿçœ‹æ•ˆæœ\n\n```java\n    /**\n     * å¯åŠ¨æµç¨‹å®ä¾‹\n     *\n     */\n    @Test\n    public void startProcessInstanceByKey()  throws Exception{\n\n        processEngine.getRuntimeService()\n                .startProcessInstanceById(\"Test04:1:325edb10-ae95-11ec-a77f-c03c59ad2248\");\n        // éœ€è¦åœ¨æ­¤é˜»å¡æ¯”ç­‰å¾…é•¿çš„æ—¶é—´\n        TimeUnit.MINUTES.sleep(3);\n    }\n```\n\n\n\n![image-20220328205718521](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220328205718521.png)\n\n\n\n#### è¾¹ç•Œäº‹ä»¶\n\næœ€åæˆ‘ä»¬æ¥çœ‹çœ‹è¾¹ç•Œäº‹ä»¶ä¸­çš„ç­‰å¾…å®šæ—¶å™¨çš„å¤„ç†ï¼Œæ¡ˆä¾‹ä¸ºï¼š\n\n![image-20220328210150212](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220328210150212.png)\n\nè¯¥æ¡ˆä¾‹ç”±ä¸€ä¸ªäººå·¥å®¡æ ¸+ä¸¤ä¸ªè‡ªåŠ¨ä»»åŠ¡+å®šæ—¶å™¨è¾¹ç•Œäº‹ä»¶ç»„æˆï¼Œè‡ªåŠ¨ä»»åŠ¡ä¸€ç»‘å®šçš„JavaDelegateæ˜¯\n\n```java\npublic class SignalStartOnedelegate implements JavaDelegate {\n    @Override\n    public void execute(DelegateExecution execution) {\n        System.out.println(\"-------è§¦å‘äº†-111-------->\"+ LocalDateTime.now().toString());\n    }\n}\n```\n\nè‡ªåŠ¨ä»»åŠ¡äºŒç»‘å®šçš„JavaDelegateæ˜¯\n\n```java\npublic class SignalStartTwodelegate implements JavaDelegate {\n    @Override\n    public void execute(DelegateExecution execution) {\n        System.out.println(\"-------è§¦å‘äº†222--------->\"+ LocalDateTime.now().toString());\n    }\n}\n```\n\nå®šæ—¶å™¨è¾¹ç•Œäº‹ä»¶è®¾ç½®çš„æ˜¯30Sï¼Œä¹Ÿå°±æ˜¯å¦‚æœäººå·¥å®¡æ ¸åœ¨30Sè¿˜æ²¡å¤„ç†å°±ä¼šè§¦å‘è¾¹ç•Œäº‹ä»¶ï¼šé€šè¿‡ä»£ç æ¥æ¼”ç¤ºï¼Œéƒ¨ç½²æµç¨‹åéœ€è¦å¯åŠ¨æµç¨‹ï¼Œç„¶åç­‰å¾…30Sçœ‹æ§åˆ¶å°è¾“å‡º\n\n```java\n    @Test\n    public void test01() throws Exception{\n        Deployment deployment = processEngine.getRepositoryService().createDeployment()\n                .addClasspathResource(\"ç­‰å¾…å®šæ—¶å™¨è¾¹ç•Œäº‹ä»¶.bpmn20.xml\")\n                .name(\"ç­‰å¾…å®šæ—¶å™¨è¾¹ç•Œäº‹ä»¶...\")\n                .deploy();\n        System.out.println(\"-----\");\n    }\n```\n\n```java\n    /**\n     * å¯åŠ¨æµç¨‹å®ä¾‹\n     *\n     */\n    @Test\n    public void startProcessInstanceByKey()  throws Exception{\n\n        processEngine.getRuntimeService()\n                .startProcessInstanceById(\"test05:1:c46f83bf-ae97-11ec-b055-c03c59ad2248\");\n        System.out.println(\"å¼€å§‹å¯åŠ¨çš„æ—¶é—´ï¼š\" + LocalDateTime.now().toString());\n        // éœ€è¦åœ¨æ­¤é˜»å¡æ¯”ç­‰å¾…é•¿çš„æ—¶é—´\n        TimeUnit.MINUTES.sleep(3);\n    }\n```\n\nç­‰å¾…æ§åˆ¶å°è¾“å‡ºï¼š\n\n![image-20220328210905204](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220328210905204.png)\n\n\n\nå°ç»“ï¼štimeDurationåœ¨ä¸‰ç§å®šæ—¶å™¨çš„äº‹ä»¶ä¸­\n\n* å®šæ—¶å™¨å¯åŠ¨äº‹ä»¶ï¼šç­‰å¾…æŒ‡å®šæ—¶é—´åå¯åŠ¨æµç¨‹å®ä¾‹\n* å®šæ—¶å™¨ä¸­é—´äº‹ä»¶ï¼šABä»»åŠ¡ä¸­é—´æœ‰ä¸ªå®šæ—¶å™¨ä¸­é—´äº‹ä»¶ï¼ŒAä»»åŠ¡å¤„ç†åéœ€è¦ç­‰å¾…å¯¹åº”çš„æ—¶é—´æ‰èƒ½æµè½¬åˆ°Bå¤„\n* å®šæ—¶å™¨è¾¹ç•Œäº‹ä»¶ï¼šä»»åŠ¡Aç»‘å®šäº†å®šæ—¶å™¨è¾¹ç•Œäº‹ä»¶åï¼Œå¦‚æœåœ¨ç­‰å¾…æ—¶é—´ä»¥å†…Aæ²¡æœ‰å¤„ç†ä»»åŠ¡ï¼Œé‚£ä¹ˆå°±ä¼šè§¦å‘å¯¹åº”çš„è¾¹ç•Œäº‹ä»¶\n\n\n\n\n\n### timeCycle\n\næŒ‡å®šé‡å¤å‘¨æœŸï¼Œå¯ç”¨äºå‘¨æœŸæ€§å¯åŠ¨æµç¨‹ï¼Œæˆ–è€…ä¸ºè¶…æœŸç”¨æˆ·ä»»åŠ¡å¤šæ¬¡å‘é€æé†’,è¿™ä¸ªå…ƒç´ å¯ä»¥ä½¿ç”¨ä¸¤ç§æ ¼å¼\n\n* ç¬¬ä¸€ç§æ˜¯æŒ‰ç…§[ISO 8601](http://en.wikipedia.org/wiki/ISO_8601#Repeating_intervals)æ ‡å‡†å®šä¹‰çš„å¾ªç¯æ—¶é—´å‘¨æœŸã€‚ä¾‹å¦‚ï¼ˆä¸‰æ¬¡é‡å¤é—´éš”ï¼Œæ¯æ¬¡é—´éš”ä¸º10å°æ—¶ï¼‰ï¼šR3/PT10H\n* ä¹Ÿå¯ä»¥ä½¿ç”¨*timeCycle*çš„å¯é€‰å±æ€§*endDate*ï¼Œæˆ–è€…åƒè¿™æ ·ç›´æ¥å†™åœ¨æ—¶é—´è¡¨è¾¾å¼çš„ç»“å°¾ï¼š`R3/PT10H/${EndDate}`ã€‚ å½“åˆ°è¾¾endDateæ—¶ï¼Œåº”ç”¨ä¼šåœæ­¢ï¼Œå¹¶ä¸ºè¯¥ä»»åŠ¡åˆ›å»ºå…¶ä»–ä½œä¸š\n* ä¹Ÿå¯ä»¥é€šè¿‡cronè¡¨è¾¾å¼æ¥å¤„ç†\n\n\n\n#### å¼€å§‹äº‹ä»¶\n\nç¼–å†™æ¡ˆä¾‹æ¥æ¼”ç¤ºï¼š\n\n![image-20220328213218525](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220328213218525.png)\n\né‡å¤æ—¶é—´è®¾ç½®ä¸º R3PT30S é‡å¤3æ¬¡ï¼Œé—´éš”30æè¿°ï¼Œè‡ªåŠ¨ä»»åŠ¡ç»‘å®šçš„æ˜¯JavaDelegate\n\n```java\npublic class SignalStartOnedelegate implements JavaDelegate {\n    @Override\n    public void execute(DelegateExecution execution) {\n        System.out.println(\"-------è§¦å‘äº†-111-------->\"+ LocalDateTime.now().toString());\n    }\n}\n```\n\n![image-20220328213330813](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220328213330813.png)\n\nç„¶åæˆ‘ä»¬éƒ¨ç½²çœ‹æ•ˆæœ\n\n```java\n    @Test\n    public void test01() throws Exception{\n        Deployment deployment = processEngine.getRepositoryService().createDeployment()\n                .addClasspathResource(\"é‡å¤å¯åŠ¨äº‹ä»¶.bpmn20.xml\")\n                .name(\"ç­‰å¾…å®šæ—¶å™¨è¾¹ç•Œäº‹ä»¶...\")\n                .deploy();\n        System.out.println(\"-----\");\n        // éœ€è¦åœ¨æ­¤é˜»å¡æ¯”ç­‰å¾…é•¿çš„æ—¶é—´\n        TimeUnit.MINUTES.sleep(3);\n    }\n```\n\n![image-20220328213955271](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220328213955271.png)\n\n\n\nç„¶åæˆ‘ä»¬å†æŒ‡å®šä¸‹endDateæ¥çœ‹çœ‹æ¡ˆä¾‹ï¼Œç›´æ¥å¯ä»¥åœ¨xmlä¸­æ¥å¤„ç†\n\n```xml\n      <timerEventDefinition>\n        <timeCycle>R3/PT30S/2022-03-28T21:46:11+00:00</timeCycle>\n      </timerEventDefinition>\n```\n\n![image-20220328214459137](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220328214459137.png)\n\n\n\næ­¤å¤–è¿˜å¯ä»¥é€šè¿‡cronè¡¨è¾¾å¼æ¥å¤„ç†ï¼š\n\n```corn\n0 0/5 * * * ?\n```\n\n![image-20220328215255141](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220328215255141.png)\n\n![image-20220328215340678](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220328215340678.png)\n\n\n\n#### ä¸­é—´äº‹ä»¶\n\n&emsp;timeCycleä½œä¸ºä¸­é—´äº‹ä»¶çš„è¯ï¼Œåªä¼šæ‰§è¡Œä¸€æ¬¡ï¼Œæ¡ˆä¾‹å¦‚ä¸‹\n\n![image-20220328225250878](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220328225250878.png)\n\næ¡ˆä¾‹ä¸­çš„è‡ªåŠ¨ä»»åŠ¡ä¸€äºŒå¯¹åº”ç»‘å®šå¦‚ä¸‹çš„JavaDelegate.\n\n```java\npublic class SignalStartOnedelegate implements JavaDelegate {\n    @Override\n    public void execute(DelegateExecution execution) {\n        System.out.println(\"-------è§¦å‘äº†-111-------->\"+ LocalDateTime.now().toString());\n    }\n}\n\npublic class SignalStartTwodelegate implements JavaDelegate {\n    @Override\n    public void execute(DelegateExecution execution) {\n        System.out.println(\"-------è§¦å‘äº†222--------->\"+ LocalDateTime.now().toString());\n    }\n}\n```\n\nä¸­é—´äº‹ä»¶çš„è®¾ç½®ä¸º`R3/PT30S` å¾ªç¯3æ¬¡ï¼Œé—´éš”30ç§’æ‰§è¡Œï¼Œä½†æ˜¯è¿™æ˜¯ä¸­é—´äº‹ä»¶ï¼Œå…¶å®åªä¼šæ‰§è¡Œä¸€æ¬¡ï¼Œæˆ‘æ¥çœ‹æ•ˆæœ\n\néƒ¨ç½²åå¯åŠ¨\n\n```java\n@Autowired\n    private ProcessEngine processEngine;\n\n    @Test\n    public void test01() throws Exception{\n        Deployment deployment = processEngine.getRepositoryService().createDeployment()\n                .addClasspathResource(\"å¾ªç¯ä¸­é—´äº‹ä»¶.bpmn20.xml\")\n                .name(\"å¾ªç¯ä¸­é—´äº‹ä»¶...\")\n                .deploy();\n        System.out.println(\"-----\");\n    }\n\n    /**\n     * å¯åŠ¨æµç¨‹å®ä¾‹\n     *\n     */\n    @Test\n    public void startProcessInstanceByKey()  throws Exception{\n\n        processEngine.getRuntimeService()\n                .startProcessInstanceById(\"cycle-middle-event:1:3456ade8-aea7-11ec-9064-c03c59ad2248\");\n        System.out.println(\"å¼€å§‹å¯åŠ¨çš„æ—¶é—´ï¼š\" + LocalDateTime.now().toString());\n        // éœ€è¦åœ¨æ­¤é˜»å¡æ¯”ç­‰å¾…é•¿çš„æ—¶é—´\n        TimeUnit.MINUTES.sleep(3);\n    }\n```\n\n\n\n![image-20220328225931465](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220328225931465.png)\n\n\n\n\n\n#### è¾¹ç•Œäº‹ä»¶\n\nåœ¨è¾¹ç•Œäº‹ä»¶ä¸­ï¼Œå®šä¹‰äº†å¾ªç¯æ¡ä»¶`R3/PT30S`ç†è®ºä¸Šè¦å¾ªç¯3æ¬¡ï¼Œé—´éš”30Sï¼Œå•å…¶å®ä¹Ÿåªä¼šæ‰§è¡Œä¸€æ¬¡ï¼Œæ¥çœ‹æ¡ˆä¾‹\n\n![image-20220328231838967](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220328231838967.png)\n\n\n\næ¡ˆä¾‹ä¸Šé¢çš„ç­‰å¾…æ—¶é—´çš„æ˜¯ä¸€æ ·çš„ï¼Œåªæ˜¯è¾¹ç•Œäº‹ä»¶æ˜¯30S\n\n![image-20220328231955441](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220328231955441.png)\n\n\n\nç„¶åæˆ‘ä»¬éƒ¨ç½²å¯åŠ¨æµç¨‹çœ‹æ•ˆæœ\n\n![image-20220329094741327](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220329094741327.png)\n\n\n\næ€»ç»“ï¼šå¾ªç¯è®¾å®š\n\n* å¯åŠ¨äº‹ä»¶ï¼šæ ¹æ®è®¾ç½®å¾ªç¯å¯åŠ¨æµç¨‹å®ä¾‹\n* ä¸­é—´äº‹ä»¶ï¼šå³ä½¿è®¾ç½®äº†å¾ªç¯æ—¶é—´ä¹Ÿåªä¼šè§¦å‘å¼‚å¸¸\n* è¾¹ç•Œäº‹ä»¶ï¼šå³ä½¿è®¾ç½®äº†å¾ªç¯æ—¶é—´ä¹Ÿåªä¼šè§¦å‘å¼‚å¸¸\n\n\n\n\n\n\n\n## æ¶ˆæ¯äº‹ä»¶\n\næ¶ˆæ¯äº‹ä»¶ï¼ˆmessage eventï¼‰ï¼Œæ˜¯æŒ‡å¼•ç”¨å…·åæ¶ˆæ¯çš„äº‹ä»¶ã€‚æ¶ˆæ¯å…·æœ‰åå­—ä¸è½½è·ã€‚ä¸ä¿¡å·ä¸åŒï¼Œæ¶ˆæ¯äº‹ä»¶åªæœ‰ä¸€ä¸ªæ¥æ”¶è€…\n\n### å¯åŠ¨äº‹ä»¶\n\næ¶ˆæ¯å¯åŠ¨äº‹ä»¶ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬é€šè¿‡æ¥æ”¶åˆ°æŸäº›æ¶ˆæ¯åæ¥å¯åŠ¨æµç¨‹å®ä¾‹ï¼Œæ¯”å¦‚æ¥æ”¶åˆ°äº†ä¸€å°é‚®ä»¶ï¼Œä¸€æ¡çŸ­ä¿¡ç­‰ï¼Œå…·ä½“é€šè¿‡æ¡ˆä¾‹æ¥è®²è§£\n\n![image-20220329103837021](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220329103837021.png)\n\næˆ‘ä»¬éœ€è¦å…ˆå®šä¹‰ä¸€ä¸ªæ¶ˆæ¯\n\n![image-20220329105849732](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220329105849732.png)\n\nç„¶ååœ¨æ¶ˆæ¯å¼€å§‹èŠ‚ç‚¹å‡ºå¼•ç”¨\n\n![image-20220329105922977](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220329105922977.png)\n\nç„¶åé€šè¿‡ä»£ç æ¥å¤„ç†ï¼Œéƒ¨ç½²å’Œå¯åŠ¨\n\n```java\n    /**\n     * Deploy\n     */\n    @Test\n    void testDeploy() throws Exception {\n        //RepositoryService repositoryService = processEngine.getRepositoryService();\n        Deployment deploy = repositoryService.createDeployment()\n                .addClasspathResource(\"æ¶ˆæ¯å¯åŠ¨äº‹ä»¶.bpmn20.xml\")\n                .name(\"æ¶ˆæ¯å¯åŠ¨äº‹ä»¶\")\n                .deploy();\n        System.out.println(\"deploy.getId() = \" + deploy.getId());\n        System.out.println(\"deploy.getName() = \" + deploy.getName());\n        System.out.println(\"éƒ¨ç½²å¼€å§‹çš„æ—¶é—´ï¼š\" + new Date());\n        //TimeUnit.MINUTES.sleep(3);\n    }\n```\n\néƒ¨ç½²åä¸ä¼šè‡ªåŠ¨å¯åŠ¨ï¼Œæˆ‘ä»¬éœ€è¦æ¥æ”¶ç›¸å…³çš„ä¿¡æ¯åæ¥è§¦å‘ã€‚\n\n```java\n   /**\n     * é€šè¿‡æ¶ˆæ¯æ¥å¯åŠ¨ä¸€ä¸ªæµç¨‹å®ä¾‹\n     */\n    @Test\n    void startFlow() throws Exception{\n\n       // runtimeService.startProcessInstanceById(\"event006:1:0532e730-af02-11ec-8cf3-c03c59ad2248\");\n       // æ³¨æ„ï¼šå‘é€æ¶ˆæ¯å‘é€çš„åº”è¯¥æ˜¯æ¶ˆæ¯çš„åç§°è€Œä¸æ˜¯æ¶ˆæ¯çš„ID\n        runtimeService.startProcessInstanceByMessage(\"ç¬¬ä¸€ä¸ªæ¶ˆæ¯\");\n        System.out.println(\"å¯åŠ¨æ—¶é—´ï¼š\" + new Date());\n        // æˆ‘ä»¬å¾—ä¿è¯å®¹å™¨çš„è¿è¡Œï¼Œæ‰€ä»¥éœ€è¦é˜»å¡\n        TimeUnit.MINUTES.sleep(1);\n    }\n```\n\n\n\n\n\n**æ³¨æ„**ï¼šå‘é€æ¶ˆæ¯å‘é€çš„åº”è¯¥æ˜¯æ¶ˆæ¯çš„åç§°è€Œä¸æ˜¯æ¶ˆæ¯çš„IDï¼ŒæŠ¥é”™å¦‚ä¸‹ï¼š\n\n![image-20220329104823537](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220329104823537.png)\n\n\n\n\n\n### ä¸­é—´äº‹ä»¶\n\næ¶ˆæ¯ä¸­é—´äº‹ä»¶å°±æ˜¯åœ¨æµç¨‹è¿ä½œä¸­éœ€è¦æ¶ˆæ¯æ¥è§¦å‘çš„åœºæ™¯ï¼Œæ¡ˆä¾‹æ¼”ç¤ºï¼Œ`è‡ªåŠ¨æµç¨‹1`å¤„ç†å®Œæˆåï¼Œéœ€è¦æ¥æ”¶ç‰¹å®šçš„æ¶ˆæ¯ä¹‹åæ‰èƒ½è¿›å…¥åˆ°`è‡ªåŠ¨æµç¨‹2`\n\n![image-20220329111412619](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220329111412619.png)\n\næ¶ˆæ¯ä¸­é—´äº‹ä»¶ç»‘å®šçš„æ¶ˆæ¯ä¸º\n\n![image-20220329111446959](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220329111446959.png)\n\n\n\n\n\n\n\nç„¶åé€šè¿‡ä»£ç æ¥æ¼”ç¤º\n\n```java\n   /**\n     * Deploy\n     */\n    @Test\n    void testDeploy() throws Exception {\n        //RepositoryService repositoryService = processEngine.getRepositoryService();\n        Deployment deploy = repositoryService.createDeployment()\n                .addClasspathResource(\"æ¶ˆæ¯ä¸­é—´äº‹ä»¶.bpmn20.xml\")\n                .name(\"æ¶ˆæ¯ä¸­é—´äº‹ä»¶\")\n                .deploy();\n        System.out.println(\"deploy.getId() = \" + deploy.getId());\n        System.out.println(\"deploy.getName() = \" + deploy.getName());\n        System.out.println(\"éƒ¨ç½²å¼€å§‹çš„æ—¶é—´ï¼š\" + new Date());\n        //TimeUnit.MINUTES.sleep(3);\n    }\n\n    /**\n     * é€šè¿‡æ¶ˆæ¯æ¥å¯åŠ¨ä¸€ä¸ªæµç¨‹å®ä¾‹\n     */\n    @Test\n    void startFlow() throws Exception{\n\n        runtimeService.startProcessInstanceById(\"event008:1:9217aa5e-af0e-11ec-b11f-c03c59ad2248\");\n       // æ³¨æ„ï¼šå‘é€æ¶ˆæ¯å‘é€çš„åº”è¯¥æ˜¯æ¶ˆæ¯çš„åç§°è€Œä¸æ˜¯æ¶ˆæ¯çš„ID\n        //runtimeService.startProcessInstanceByMessage(\"ç¬¬ä¸€ä¸ªæ¶ˆæ¯\");\n        System.out.println(\"å¯åŠ¨æ—¶é—´ï¼š\" + new Date());\n        // æˆ‘ä»¬å¾—ä¿è¯å®¹å™¨çš„è¿è¡Œï¼Œæ‰€ä»¥éœ€è¦é˜»å¡\n        //TimeUnit.MINUTES.sleep(1);\n    }\n\n    /**\n     * ä¸­é—´äº‹ä»¶-å‘å¸ƒæ¶ˆæ¯\n     */\n    @Test\n    void recevedMsg(){\n        // éœ€è¦æŸ¥è¯¢åˆ°executionId\n        String processExecutionId = \"b5349e22-af0e-11ec-93e6-c03c59ad2248\";\n        // æˆ‘ä»¬éœ€è¦æ ¹æ®æµç¨‹å®ä¾‹ç¼–å·æ‰¾åˆ°å¯¹åº”çš„æ‰§è¡Œç¼–å·\n       /* Execution execution = runtimeService.createExecutionQuery()\n                .processInstanceId(\"event008:1:9217aa5e-af0e-11ec-b11f-c03c59ad2248\")\n                .singleResult();\n        System.out.println(\"----------->\"+execution.getId());*/\n        runtimeService.messageEventReceived(\"ç¬¬äºŒä¸ªæ¶ˆæ¯\",processExecutionId);\n    }\n```\n\nå¯ä»¥çœ‹åˆ°çš„è¾“å‡ºæ•ˆæœ\n\n![image-20220329112435376](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220329112435376.png)\n\n\n\n### è¾¹ç•Œäº‹ä»¶\n\næ¶ˆæ¯è¾¹ç•Œäº‹ä»¶ï¼Œå¦‚æœåœ¨æ¶ˆæ¯è§¦å‘å‰è¿˜æ²¡æœ‰ï¼Œæ¡ˆä¾‹æ¼”ç¤ºï¼š\n\n![image-20220329113848978](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220329113848978.png)\n\néƒ¨ç½²æµç¨‹\n\n```java\n    /**\n     * Deploy\n     */\n    @Test\n    void testDeploy() throws Exception {\n        //RepositoryService repositoryService = processEngine.getRepositoryService();\n        Deployment deploy = repositoryService.createDeployment()\n                .addClasspathResource(\"æ¶ˆæ¯è¾¹ç•Œäº‹ä»¶.bpmn20.xml\")\n                .name(\"æ¶ˆæ¯è¾¹ç•Œäº‹ä»¶\")\n                .deploy();\n        System.out.println(\"deploy.getId() = \" + deploy.getId());\n        System.out.println(\"deploy.getName() = \" + deploy.getName());\n        System.out.println(\"éƒ¨ç½²å¼€å§‹çš„æ—¶é—´ï¼š\" + new Date());\n        //TimeUnit.MINUTES.sleep(3);\n    }\n    /**\n     * é€šè¿‡æ¶ˆæ¯æ¥å¯åŠ¨ä¸€ä¸ªæµç¨‹å®ä¾‹\n     */\n    @Test\n    void startFlow() throws Exception{\n\n        runtimeService.startProcessInstanceById(\"event009:1:f2096787-af11-11ec-b290-c03c59ad2248\");\n       // æ³¨æ„ï¼šå‘é€æ¶ˆæ¯å‘é€çš„åº”è¯¥æ˜¯æ¶ˆæ¯çš„åç§°è€Œä¸æ˜¯æ¶ˆæ¯çš„ID\n        //runtimeService.startProcessInstanceByMessage(\"ç¬¬ä¸€ä¸ªæ¶ˆæ¯\");\n        System.out.println(\"å¯åŠ¨æ—¶é—´ï¼š\" + new Date());\n        // æˆ‘ä»¬å¾—ä¿è¯å®¹å™¨çš„è¿è¡Œï¼Œæ‰€ä»¥éœ€è¦é˜»å¡\n        //TimeUnit.MINUTES.sleep(1);\n    }\n```\n\néƒ¨ç½²æµç¨‹åå¯åŠ¨æµç¨‹å®ä¾‹ä¼šè¿è½¬åˆ°\n\n![image-20220329114038773](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220329114038773.png)\n\n\n\nå¦‚æœäººå·¥å¤„ç†åœ¨æ¶ˆæ¯è®¢é˜…å‰æ²¡æœ‰å¤„ç†å°±ä¼šè§¦å‘è¾¹ç•Œäº‹ä»¶\n\n```java\n    /**\n     * è¾¹ç•Œäº‹ä»¶-å‘å¸ƒæ¶ˆæ¯\n     */\n    @Test\n    void recevedMsg(){\n        // éœ€è¦æŸ¥è¯¢åˆ°executionId\n        String processExecutionId = \"1d503361-af12-11ec-89a4-c03c59ad2248\";\n        // æˆ‘ä»¬éœ€è¦æ ¹æ®æµç¨‹å®ä¾‹ç¼–å·æ‰¾åˆ°å¯¹åº”çš„æ‰§è¡Œç¼–å·\n       /* Execution execution = runtimeService.createExecutionQuery()\n                .processInstanceId(\"event008:1:9217aa5e-af0e-11ec-b11f-c03c59ad2248\")\n                .singleResult();\n        System.out.println(\"----------->\"+execution.getId());*/\n        runtimeService.messageEventReceived(\"ç¬¬ä¸‰ä¸ªæ¶ˆæ¯\",processExecutionId);\n    }\n```\n\n\n\n![image-20220329114505074](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220329114505074.png)\n\n\n\n\n\n\n\n## é”™è¯¯äº‹ä»¶\n\né”™è¯¯äº‹ä»¶å¯ä»¥ç”¨åšä¸€ä¸ªæµç¨‹çš„å¼€å§‹äº‹ä»¶æˆ–è€…ä½œä¸ºä¸€ä¸ªä»»åŠ¡æˆ–è€…å­æµç¨‹çš„è¾¹ç•Œäº‹ä»¶ï¼Œé”™è¯¯äº‹ä»¶æ²¡æœ‰æä¾›ä½œç”¨ä¸­é—´äº‹ä»¶çš„åŠŸèƒ½ï¼Œè¿™ä¸€ç‚¹å’Œå‰é¢ä»‹ç»çš„å®šæ—¶å™¨äº‹ä»¶å’Œæ¶ˆæ¯äº‹ä»¶è¿˜æœ‰åŒºåˆ«çš„ã€‚\n\n### å¼€å§‹äº‹ä»¶\n\né”™è¯¯å¯åŠ¨äº‹ä»¶ï¼ˆerror start eventï¼‰ï¼Œå¯ç”¨äºè§¦å‘äº‹ä»¶å­æµç¨‹ï¼ˆEvent Sub-Processï¼‰ã€‚**é”™è¯¯å¯åŠ¨äº‹ä»¶ä¸èƒ½ç”¨äºå¯åŠ¨æµç¨‹å®ä¾‹**ã€‚\n\né”™è¯¯å¯åŠ¨äº‹ä»¶æ€»æ˜¯ä¸­æ–­ã€‚æˆ‘ä»¬é€šè¿‡æ¡ˆä¾‹æ¥ä»‹ç»ã€‚æ­¤å¤„æˆ‘ä»¬ç”¨Eclipseæ¥ç»˜åˆ¶æµç¨‹å›¾ï¼Œç†Ÿæ‚‰ä¸‹Eclipseå·¥å…·\n\n![image-20220329235608917](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220329235608917.png)\n\næ³¨æ„ï¼šç»˜åˆ¶çš„æ˜¯å­æµç¨‹äº‹ä»¶ï¼š\n\n![image-20220330004724798](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220330004724798.png)\n\nç„¶åæˆ‘ä»¬å†å®šä¹‰ä¸€ä¸ªé”™è¯¯ï¼Œå†…å®¹ä¸ºï¼š\n\n```xml\n<error id=\"error01\" errorCode=\"abcd\">\n```\n\nåœ¨FlowableUIä¸­æ²¡æ‰¾åˆ°é”™è¯¯å®šä¹‰çš„é€‰é¡¹ï¼Œæˆ‘ä»¬å°±åœ¨æµç¨‹æ–‡ä»¶ä¸­è‡ªå·±æ·»åŠ å³å¯ã€‚\n\n\n\n![image-20220329235702382](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220329235702382.png)\n\n\n\n![image-20220329214507352](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220329214507352.png)\n\nå®Œæ•´çš„æµç¨‹æ–‡ä»¶\n\n```xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<definitions xmlns=\"http://www.omg.org/spec/BPMN/20100524/MODEL\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:activiti=\"http://activiti.org/bpmn\" xmlns:bpmndi=\"http://www.omg.org/spec/BPMN/20100524/DI\" xmlns:omgdc=\"http://www.omg.org/spec/DD/20100524/DC\" xmlns:omgdi=\"http://www.omg.org/spec/DD/20100524/DI\" typeLanguage=\"http://www.w3.org/2001/XMLSchema\" expressionLanguage=\"http://www.w3.org/1999/XPath\" targetNamespace=\"http://www.activiti.org/test\">\n  <error id=\"error01\" errorCode=\"abcd\"></error>\n  <process id=\"myProcess\" name=\"My process\" isExecutable=\"true\">\n    <startEvent id=\"startevent1\" name=\"Start\"></startEvent>\n    <serviceTask id=\"servicetask1\" name=\"è‡ªåŠ¨ä»»åŠ¡ä¸€\" activiti:class=\"com.bobo.delegate.MyOneDelegate\"></serviceTask>\n    <sequenceFlow id=\"flow1\" sourceRef=\"startevent1\" targetRef=\"servicetask1\"></sequenceFlow>\n    <endEvent id=\"endevent1\" name=\"End\"></endEvent>\n    <sequenceFlow id=\"flow2\" sourceRef=\"servicetask1\" targetRef=\"endevent1\"></sequenceFlow>\n    <subProcess id=\"eventsubprocess1\" name=\"Event sub Process\" triggeredByEvent=\"true\">\n      <startEvent id=\"errorstartevent1\" name=\"Error start\">\n        <errorEventDefinition errorRef=\"error01\"></errorEventDefinition>\n      </startEvent>\n      <serviceTask id=\"servicetask2\" name=\"è‡ªåŠ¨ä»»åŠ¡äºŒ\" activiti:class=\"com.bobo.delegate.MyTwoDelegate\"></serviceTask>\n      <endEvent id=\"endevent2\" name=\"End\"></endEvent>\n      <sequenceFlow id=\"flow3\" sourceRef=\"servicetask2\" targetRef=\"endevent2\"></sequenceFlow>\n      <sequenceFlow id=\"flow4\" sourceRef=\"errorstartevent1\" targetRef=\"servicetask2\"></sequenceFlow>\n    </subProcess>\n  </process>\n  <bpmndi:BPMNDiagram id=\"BPMNDiagram_myProcess\">\n    <bpmndi:BPMNPlane bpmnElement=\"myProcess\" id=\"BPMNPlane_myProcess\">\n      <bpmndi:BPMNShape bpmnElement=\"startevent1\" id=\"BPMNShape_startevent1\">\n        <omgdc:Bounds height=\"35.0\" width=\"35.0\" x=\"480.0\" y=\"260.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"servicetask1\" id=\"BPMNShape_servicetask1\">\n        <omgdc:Bounds height=\"55.0\" width=\"105.0\" x=\"710.0\" y=\"250.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"endevent1\" id=\"BPMNShape_endevent1\">\n        <omgdc:Bounds height=\"35.0\" width=\"35.0\" x=\"930.0\" y=\"260.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"eventsubprocess1\" id=\"BPMNShape_eventsubprocess1\">\n        <omgdc:Bounds height=\"211.0\" width=\"401.0\" x=\"530.0\" y=\"420.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"errorstartevent1\" id=\"BPMNShape_errorstartevent1\">\n        <omgdc:Bounds height=\"35.0\" width=\"35.0\" x=\"600.0\" y=\"520.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"servicetask2\" id=\"BPMNShape_servicetask2\">\n        <omgdc:Bounds height=\"55.0\" width=\"105.0\" x=\"700.0\" y=\"510.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"endevent2\" id=\"BPMNShape_endevent2\">\n        <omgdc:Bounds height=\"35.0\" width=\"35.0\" x=\"850.0\" y=\"520.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNEdge bpmnElement=\"flow1\" id=\"BPMNEdge_flow1\">\n        <omgdi:waypoint x=\"515.0\" y=\"277.0\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"710.0\" y=\"277.0\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"flow2\" id=\"BPMNEdge_flow2\">\n        <omgdi:waypoint x=\"815.0\" y=\"277.0\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"930.0\" y=\"277.0\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"flow3\" id=\"BPMNEdge_flow3\">\n        <omgdi:waypoint x=\"805.0\" y=\"537.0\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"850.0\" y=\"537.0\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"flow4\" id=\"BPMNEdge_flow4\">\n        <omgdi:waypoint x=\"635.0\" y=\"537.0\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"700.0\" y=\"537.0\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n    </bpmndi:BPMNPlane>\n  </bpmndi:BPMNDiagram>\n</definitions>\n```\n\nç„¶åæˆ‘ä»¬åœ¨ä¸»æµç¨‹ä¸­çš„`è‡ªåŠ¨ä»»åŠ¡ä¸€`ä¸­æˆ‘ä»¬æŠ›å‡ºå¼‚å¸¸\n\n```java\npublic class MyOneDelegate implements JavaDelegate {\n    @Override\n    public void execute(DelegateExecution execution) {\n\n        System.out.println(\"å®Œæˆè‡ªåŠ¨å®¡æ‰¹ä»»åŠ¡-----ã€‹MyOneDelegate\" + LocalDateTime.now().toString());\n        // ä¸šåŠ¡æ‰§è¡Œå‘ç°æœ‰é—®é¢˜ æ­¤å¤„çš„errorCodeéœ€è¦å’Œå®šä¹‰çš„erroræ ‡ç­¾ä¸­çš„errorCodeä¿æŒä¸€è‡´\n        throw new BpmnError(\"abcd\");\n    }\n}\n```\n\nç„¶åæˆ‘ä»¬åœ¨`è‡ªå®šä¹‰ä»»åŠ¡äºŒ`ä¸­ç®€å•å®šä¹‰ä¸€ä¸ªè¾“å‡ºå³å¯ã€‚ç„¶åæˆ‘ä»¬éƒ¨ç½²ä»»åŠ¡\n\n```java\n    @Test\n    public void test01() throws Exception{\n        ZipInputStream in = new ZipInputStream(SpringBootFlowableApplicationTests.class.getClassLoader().getResourceAsStream(\"é”™è¯¯å¯åŠ¨äº‹ä»¶.bar\"));\n        Deployment deployment = processEngine.getRepositoryService().createDeployment()\n                .addZipInputStream(in)\n                .name(\"é”™è¯¯å¯åŠ¨äº‹ä»¶\")\n                .deploy();\n        System.out.println(\"-----\");\n    }\n```\n\n\n\nç„¶åæˆ‘ä»¬å†å¯åŠ¨æµç¨‹å®ä¾‹ï¼Œé‚£ä¹ˆè‡ªåŠ¨ä»»åŠ¡ä¸€å°±ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œç„¶åå¯¹åº”çš„å­æµç¨‹å°±ä¼šå¼€å§‹\n\n```java\n    /**\n     * å¯åŠ¨æµç¨‹å®ä¾‹\n     *\n     */\n    @Test\n    public void startProcessInstanceByKey()  throws Exception{\n\n        processEngine.getRuntimeService()\n                .startProcessInstanceById(\"myProcess:1:c0462994-af79-11ec-8cae-c03c59ad2248\");\n        System.out.println(\"å¼€å§‹å¯åŠ¨çš„æ—¶é—´ï¼š\" + LocalDateTime.now().toString());\n        // éœ€è¦åœ¨æ­¤é˜»å¡æ¯”ç­‰å¾…é•¿çš„æ—¶é—´\n        TimeUnit.MINUTES.sleep(3);\n    }\n```\n\n\n\nè¾“å‡ºç»“æœè·å–åˆ°äº†æˆ‘ä»¬æœŸæœ›çš„ç»“æœ\n\n![image-20220330000557061](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220330000557061.png)\n\n\n\n\n\né€šè¿‡è¾“å‡ºç»“æœä¹Ÿå¯ä»¥çœ‹åˆ°æ‰§è¡Œçš„è‡ªåŠ¨ä»»åŠ¡ä¸€åï¼ŒæŠ›å‡ºé”™è¯¯äº‹ä»¶`abcd`,å­æµç¨‹è§¦å‘å¹¶æ‰§è¡Œäº†ã€‚\n\n![image-20220330000741836](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220330000741836.png)\n\n\n\n\n\n### è¾¹ç•Œäº‹ä»¶\n\nå®šä¹‰å¦‚ä¸‹çš„æµç¨‹å›¾ï¼š\n\n![image-20220330004335187](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220330004335187.png)\n\næ³¨æ„ç»˜åˆ¶çš„æ—¶å€™\n\n![image-20220330004644673](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220330004644673.png)\n\nxmlæ–‡ä»¶å†…å®¹ä¸ºï¼š\n\n```xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<definitions xmlns=\"http://www.omg.org/spec/BPMN/20100524/MODEL\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:activiti=\"http://activiti.org/bpmn\" xmlns:bpmndi=\"http://www.omg.org/spec/BPMN/20100524/DI\" xmlns:omgdc=\"http://www.omg.org/spec/DD/20100524/DC\" xmlns:omgdi=\"http://www.omg.org/spec/DD/20100524/DI\" typeLanguage=\"http://www.w3.org/2001/XMLSchema\" expressionLanguage=\"http://www.w3.org/1999/XPath\" targetNamespace=\"http://www.activiti.org/test\">\n    <error id=\"error02\" errorCode=\"a123\" ></error>\n    <process id=\"myProcess\" name=\"My process\" isExecutable=\"true\">\n        <startEvent id=\"startevent1\" name=\"Start\"></startEvent>\n        <serviceTask id=\"servicetask2\" name=\"è‡ªåŠ¨ä»»åŠ¡äºŒ\" activiti:class=\"com.bobo.delegate.MyTwoDelegate\"></serviceTask>\n        <serviceTask id=\"servicetask3\" name=\"è‡ªåŠ¨ä»»åŠ¡ä¸‰\" activiti:class=\"com.bobo.delegate.MyThreeDelegate\"></serviceTask>\n        <endEvent id=\"endevent2\" name=\"End\"></endEvent>\n        <sequenceFlow id=\"flow5\" sourceRef=\"servicetask2\" targetRef=\"endevent2\"></sequenceFlow>\n        <endEvent id=\"endevent3\" name=\"End\"></endEvent>\n        <sequenceFlow id=\"flow6\" sourceRef=\"servicetask3\" targetRef=\"endevent3\"></sequenceFlow>\n        <subProcess id=\"subprocess1\" name=\"Sub Process\">\n            <startEvent id=\"startevent2\" name=\"Start\"></startEvent>\n            <serviceTask id=\"servicetask4\" name=\"Service Task\" activiti:class=\"com.bobo.delegate.MyOneDelegate\"></serviceTask>\n            <endEvent id=\"endevent4\" name=\"End\"></endEvent>\n            <sequenceFlow id=\"flow10\" sourceRef=\"servicetask4\" targetRef=\"endevent4\"></sequenceFlow>\n            <sequenceFlow id=\"flow11\" sourceRef=\"startevent2\" targetRef=\"servicetask4\"></sequenceFlow>\n        </subProcess>\n        <sequenceFlow id=\"flow8\" sourceRef=\"startevent1\" targetRef=\"subprocess1\"></sequenceFlow>\n        <sequenceFlow id=\"flow9\" sourceRef=\"subprocess1\" targetRef=\"servicetask2\"></sequenceFlow>\n        <boundaryEvent id=\"boundaryerror1\" name=\"Error\" attachedToRef=\"subprocess1\">\n            <errorEventDefinition errorRef=\"error02\"></errorEventDefinition>\n        </boundaryEvent>\n        <sequenceFlow id=\"flow12\" sourceRef=\"boundaryerror1\" targetRef=\"servicetask3\"></sequenceFlow>\n    </process>\n    <bpmndi:BPMNDiagram id=\"BPMNDiagram_myProcess\">\n        <bpmndi:BPMNPlane bpmnElement=\"myProcess\" id=\"BPMNPlane_myProcess\">\n            <bpmndi:BPMNShape bpmnElement=\"startevent1\" id=\"BPMNShape_startevent1\">\n                <omgdc:Bounds height=\"35.0\" width=\"35.0\" x=\"402.0\" y=\"388.0\"></omgdc:Bounds>\n            </bpmndi:BPMNShape>\n            <bpmndi:BPMNShape bpmnElement=\"servicetask2\" id=\"BPMNShape_servicetask2\">\n                <omgdc:Bounds height=\"55.0\" width=\"105.0\" x=\"1285.0\" y=\"368.0\"></omgdc:Bounds>\n            </bpmndi:BPMNShape>\n            <bpmndi:BPMNShape bpmnElement=\"servicetask3\" id=\"BPMNShape_servicetask3\">\n                <omgdc:Bounds height=\"55.0\" width=\"105.0\" x=\"1099.0\" y=\"590.0\"></omgdc:Bounds>\n            </bpmndi:BPMNShape>\n            <bpmndi:BPMNShape bpmnElement=\"endevent2\" id=\"BPMNShape_endevent2\">\n                <omgdc:Bounds height=\"35.0\" width=\"35.0\" x=\"1440.0\" y=\"378.0\"></omgdc:Bounds>\n            </bpmndi:BPMNShape>\n            <bpmndi:BPMNShape bpmnElement=\"endevent3\" id=\"BPMNShape_endevent3\">\n                <omgdc:Bounds height=\"35.0\" width=\"35.0\" x=\"1320.0\" y=\"600.0\"></omgdc:Bounds>\n            </bpmndi:BPMNShape>\n            <bpmndi:BPMNShape bpmnElement=\"subprocess1\" id=\"BPMNShape_subprocess1\">\n                <omgdc:Bounds height=\"271.0\" width=\"451.0\" x=\"660.0\" y=\"270.0\"></omgdc:Bounds>\n            </bpmndi:BPMNShape>\n            <bpmndi:BPMNShape bpmnElement=\"startevent2\" id=\"BPMNShape_startevent2\">\n                <omgdc:Bounds height=\"35.0\" width=\"35.0\" x=\"720.0\" y=\"390.0\"></omgdc:Bounds>\n            </bpmndi:BPMNShape>\n            <bpmndi:BPMNShape bpmnElement=\"servicetask4\" id=\"BPMNShape_servicetask4\">\n                <omgdc:Bounds height=\"55.0\" width=\"105.0\" x=\"850.0\" y=\"381.0\"></omgdc:Bounds>\n            </bpmndi:BPMNShape>\n            <bpmndi:BPMNShape bpmnElement=\"endevent4\" id=\"BPMNShape_endevent4\">\n                <omgdc:Bounds height=\"35.0\" width=\"35.0\" x=\"1030.0\" y=\"391.0\"></omgdc:Bounds>\n            </bpmndi:BPMNShape>\n            <bpmndi:BPMNShape bpmnElement=\"boundaryerror1\" id=\"BPMNShape_boundaryerror1\">\n                <omgdc:Bounds height=\"30.0\" width=\"30.0\" x=\"950.0\" y=\"520.0\"></omgdc:Bounds>\n            </bpmndi:BPMNShape>\n            <bpmndi:BPMNEdge bpmnElement=\"flow5\" id=\"BPMNEdge_flow5\">\n                <omgdi:waypoint x=\"1390.0\" y=\"395.0\"></omgdi:waypoint>\n                <omgdi:waypoint x=\"1440.0\" y=\"395.0\"></omgdi:waypoint>\n            </bpmndi:BPMNEdge>\n            <bpmndi:BPMNEdge bpmnElement=\"flow6\" id=\"BPMNEdge_flow6\">\n                <omgdi:waypoint x=\"1204.0\" y=\"617.0\"></omgdi:waypoint>\n                <omgdi:waypoint x=\"1320.0\" y=\"617.0\"></omgdi:waypoint>\n            </bpmndi:BPMNEdge>\n            <bpmndi:BPMNEdge bpmnElement=\"flow10\" id=\"BPMNEdge_flow10\">\n                <omgdi:waypoint x=\"955.0\" y=\"408.0\"></omgdi:waypoint>\n                <omgdi:waypoint x=\"1030.0\" y=\"408.0\"></omgdi:waypoint>\n            </bpmndi:BPMNEdge>\n            <bpmndi:BPMNEdge bpmnElement=\"flow11\" id=\"BPMNEdge_flow11\">\n                <omgdi:waypoint x=\"755.0\" y=\"407.0\"></omgdi:waypoint>\n                <omgdi:waypoint x=\"850.0\" y=\"408.0\"></omgdi:waypoint>\n            </bpmndi:BPMNEdge>\n            <bpmndi:BPMNEdge bpmnElement=\"flow8\" id=\"BPMNEdge_flow8\">\n                <omgdi:waypoint x=\"437.0\" y=\"405.0\"></omgdi:waypoint>\n                <omgdi:waypoint x=\"660.0\" y=\"405.0\"></omgdi:waypoint>\n            </bpmndi:BPMNEdge>\n            <bpmndi:BPMNEdge bpmnElement=\"flow9\" id=\"BPMNEdge_flow9\">\n                <omgdi:waypoint x=\"1111.0\" y=\"405.0\"></omgdi:waypoint>\n                <omgdi:waypoint x=\"1285.0\" y=\"395.0\"></omgdi:waypoint>\n            </bpmndi:BPMNEdge>\n            <bpmndi:BPMNEdge bpmnElement=\"flow12\" id=\"BPMNEdge_flow12\">\n                <omgdi:waypoint x=\"965.0\" y=\"550.0\"></omgdi:waypoint>\n                <omgdi:waypoint x=\"964.0\" y=\"617.0\"></omgdi:waypoint>\n                <omgdi:waypoint x=\"1099.0\" y=\"617.0\"></omgdi:waypoint>\n            </bpmndi:BPMNEdge>\n        </bpmndi:BPMNPlane>\n    </bpmndi:BPMNDiagram>\n</definitions>\n```\n\nå¯¹åº”çš„ä¸‰ä¸ªè‡ªå®šä¹‰ä»»åŠ¡ç»‘å®šçš„JavaDelegateä¸ºï¼š\n\n```java\npublic class MyOneDelegate implements JavaDelegate {\n    @Override\n    public void execute(DelegateExecution execution) {\n\n        System.out.println(\"å®Œæˆè‡ªåŠ¨å®¡æ‰¹ä»»åŠ¡-----ã€‹MyOneDelegate\" + LocalDateTime.now().toString());\n        // ä¸šåŠ¡æ‰§è¡Œå‘ç°æœ‰é—®é¢˜ æ­¤å¤„çš„errorCodeéœ€è¦å’Œå®šä¹‰çš„erroræ ‡ç­¾ä¸­çš„errorCodeä¿æŒä¸€è‡´\n        throw new BpmnError(\"a123\");\n    }\n}\n\npublic class MyTwoDelegate implements JavaDelegate {\n    @Override\n    public void execute(DelegateExecution execution) {\n        System.out.println(\"MyTwoDelegate---->æ‰§è¡Œäº†\" + LocalDateTime.now().toString());\n    }\n}\n\npublic class MyThreeDelegate implements JavaDelegate {\n    @Override\n    public void execute(DelegateExecution execution) {\n        System.out.println(\"MyThreeDelegate---->æ‰§è¡Œäº†\" + LocalDateTime.now().toString());\n    }\n}\n```\n\nç„¶åæˆ‘ä»¬éƒ¨ç½²æ–‡ä»¶\n\n```java\n    @Test\n    public void test01() throws Exception{\n        ZipInputStream in = new ZipInputStream(SpringBootFlowableApplicationTests.class\n                .getClassLoader()\n                .getResourceAsStream(\"é”™è¯¯è¾¹ç•Œäº‹ä»¶.bar\"));\n        Deployment deployment = processEngine.getRepositoryService().createDeployment()\n                .addZipInputStream(in)\n                .name(\"é”™è¯¯è¾¹ç•Œäº‹ä»¶\")\n                .deploy();\n        System.out.println(\"-----\");\n    }\n```\n\néƒ¨ç½²æˆåŠŸåæˆ‘ä»¬å†å¯åŠ¨ä¸€ä¸ªæµç¨‹å®ä¾‹ï¼Œè¿›å…¥åˆ°è‡ªå®šä¹‰ä»»åŠ¡ä¸€å¤„ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œè§¦å‘è¾¹ç•Œå¼‚å¸¸å¤„ç†\n\n![image-20220330003624235](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220330003624235.png)\n\nè¾“å‡ºçš„ç»“æœå’Œæˆ‘ä»¬é¢„æœŸçš„æ˜¯ä¸€æ ·çš„\n\n\n\n\n\n## ä¿¡å·äº‹ä»¶\n\n### å¼€å§‹äº‹ä»¶\n\n\n\n![image-20220330095103789](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220330095103789.png)\n\nç„¶åè®¾ç½®ç›¸å…³çš„å±æ€§ï¼Œå¹¶å®šä¹‰ä¸€ä¸ªä¿¡å·\n\n![image-20220330095157518](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220330095157518.png)\n\nç„¶ååœ¨æˆ‘ä»¬å£°æ˜çš„ä¿¡å·å¼€å§‹å¼•ç”¨æˆ‘ä»¬ä¸Šé¢åˆ›å»ºçš„ä¿¡å·\n\n![image-20220330095725130](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220330095725130.png)\n\nå®Œæ•´çš„xmlæ–‡ä»¶\n\n```xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<definitions xmlns=\"http://www.omg.org/spec/BPMN/20100524/MODEL\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:flowable=\"http://flowable.org/bpmn\" xmlns:bpmndi=\"http://www.omg.org/spec/BPMN/20100524/DI\" xmlns:omgdc=\"http://www.omg.org/spec/DD/20100524/DC\" xmlns:omgdi=\"http://www.omg.org/spec/DD/20100524/DI\" typeLanguage=\"http://www.w3.org/2001/XMLSchema\" expressionLanguage=\"http://www.w3.org/1999/XPath\" targetNamespace=\"http://www.flowable.org/processdef\" exporter=\"Flowable Open Source Modeler\" exporterVersion=\"6.7.2\">\n  <signal id=\"signal01\" name=\"firstSignal\" flowable:scope=\"global\"></signal>\n  <process id=\"event2001\" name=\"ä¿¡å·å¯åŠ¨äº‹ä»¶\" isExecutable=\"true\">\n    <startEvent id=\"start01\" name=\"ä¿¡å·å¼€å§‹\" isInterrupting=\"true\">\n      <signalEventDefinition signalRef=\"signal01\"></signalEventDefinition>\n    </startEvent>\n    <serviceTask id=\"task1\" name=\"è‡ªåŠ¨ä»»åŠ¡\" flowable:class=\"com.bobo.flow.delegate.MyTwoJavaDelegate\"></serviceTask>\n    <endEvent id=\"end01\" name=\"ç»“æŸ\"></endEvent>\n    <sequenceFlow id=\"sid-0FF05CCE-85CB-416C-8D36-A935AF9586C2\" sourceRef=\"task1\" targetRef=\"end01\"></sequenceFlow>\n    <sequenceFlow id=\"sid-C8AD1AEE-5FCB-4419-8596-74532DD71ABC\" sourceRef=\"start01\" targetRef=\"task1\"></sequenceFlow>\n  </process>\n  <bpmndi:BPMNDiagram id=\"BPMNDiagram_event2001\">\n    <bpmndi:BPMNPlane bpmnElement=\"event2001\" id=\"BPMNPlane_event2001\">\n      <bpmndi:BPMNShape bpmnElement=\"start01\" id=\"BPMNShape_start01\">\n        <omgdc:Bounds height=\"30.0\" width=\"30.0\" x=\"285.0\" y=\"172.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"task1\" id=\"BPMNShape_task1\">\n        <omgdc:Bounds height=\"80.0\" width=\"100.0\" x=\"467.5\" y=\"147.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"end01\" id=\"BPMNShape_end01\">\n        <omgdc:Bounds height=\"28.0\" width=\"28.0\" x=\"612.5\" y=\"173.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNEdge bpmnElement=\"sid-C8AD1AEE-5FCB-4419-8596-74532DD71ABC\" id=\"BPMNEdge_sid-C8AD1AEE-5FCB-4419-8596-74532DD71ABC\" flowable:sourceDockerX=\"15.0\" flowable:sourceDockerY=\"15.0\" flowable:targetDockerX=\"50.0\" flowable:targetDockerY=\"40.0\">\n        <omgdi:waypoint x=\"314.94999961358405\" y=\"187.0\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"467.4999999999399\" y=\"187.0\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"sid-0FF05CCE-85CB-416C-8D36-A935AF9586C2\" id=\"BPMNEdge_sid-0FF05CCE-85CB-416C-8D36-A935AF9586C2\" flowable:sourceDockerX=\"50.0\" flowable:sourceDockerY=\"40.0\" flowable:targetDockerX=\"14.0\" flowable:targetDockerY=\"14.0\">\n        <omgdi:waypoint x=\"567.449999999996\" y=\"187.0\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"612.5\" y=\"187.0\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n    </bpmndi:BPMNPlane>\n  </bpmndi:BPMNDiagram>\n</definitions>\n```\n\néƒ¨ç½²æµç¨‹ï¼š\n\n```java\n   /**\n     * Deploy\n     */\n    @Test\n    void testDeploy() throws Exception {\n        //RepositoryService repositoryService = processEngine.getRepositoryService();\n        Deployment deploy = repositoryService.createDeployment()\n                .addClasspathResource(\"ä¿¡å·å¯åŠ¨äº‹ä»¶.bpmn20.xml\")\n                .name(\"ä¿¡å·å¯åŠ¨äº‹ä»¶\")\n                .deploy();\n        System.out.println(\"deploy.getId() = \" + deploy.getId());\n        System.out.println(\"deploy.getName() = \" + deploy.getName());\n        System.out.println(\"éƒ¨ç½²å¼€å§‹çš„æ—¶é—´ï¼š\" + new Date());\n        //TimeUnit.MINUTES.sleep(3);\n    }\n```\n\næµç¨‹æ˜¯ä¸€ä¸ªä¿¡æ¯å¯åŠ¨äº‹ä»¶ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦é‡Šæ”¾å¯¹åº”çš„ä¿¡å·æ¥è§¦å‘æµç¨‹çš„å¯åŠ¨\n\n```java\n    /**\n     * é€šè¿‡ä¿¡å·å‘é€æ¥è§¦å‘ä¿¡å·å¯åŠ¨äº‹ä»¶çš„æ‰§è¡Œ\n     * å…¨å±€çš„ä¿¡æ¯\n     */\n    @Test\n    void signalReceived() throws Exception {\n        runtimeService.signalEventReceived(\"firstSignal\");\n        // æˆ‘ä»¬å¾—ä¿è¯å®¹å™¨çš„è¿è¡Œï¼Œæ‰€ä»¥éœ€è¦é˜»å¡\n        TimeUnit.MINUTES.sleep(1);\n    }\n```\n\né€šè¿‡è¾“å‡ºè¯­å¥å¯ä»¥çœ‹åˆ°è‡ªå®šä¹‰ä»»åŠ¡è§¦å‘äº†\n\n![image-20220330100203036](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220330100203036.png)\n\n\n\næˆ‘ä»¬å¯ä»¥æŠŠä¿¡æ¯çš„ä½œç”¨åŸŸç”±åŸæ¥çš„golbalå…¨å±€çš„è°ƒæ•´ä¸ºprocessInstanceï¼Œæµ‹è¯•åå‘ç°è¿˜æ˜¯æ‰§è¡Œäº†ï¼Œè¯´æ˜åœ¨å¯åŠ¨äº‹ä»¶ä¿¡æ¯çš„ä½œç”¨åŸŸå…¶å®æ˜¯ä¸èµ·ä½œç”¨çš„ã€‚\n\n```java\n  <signal id=\"signal01\" name=\"firstSignal\" flowable:scope=\"processInstance\"></signal>\n```\n\n\n\n### ä¸­é—´æ•è·äº‹ä»¶\n\næ¡ˆä¾‹å¦‚ä¸‹ï¼šå½“æˆ‘ä»¬å¯åŠ¨äº‹ä»¶åï¼Œä¼šé˜»å¡åœ¨è¿™ä¸ªæ¶ˆæ¯è·å–ä¸­é—´äº‹ä»¶å¤„ï¼Œç­‰å¾…ç›¸å…³ä¿¡å·åæ‰ä¼šç»§ç»­æµè½¬ã€‚\n\n![image-20220330101820083](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220330101820083.png)\n\nå¯¹åº”çš„ä¿¡å·ç»‘å®š\n\n```xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<definitions xmlns=\"http://www.omg.org/spec/BPMN/20100524/MODEL\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:flowable=\"http://flowable.org/bpmn\" xmlns:bpmndi=\"http://www.omg.org/spec/BPMN/20100524/DI\" xmlns:omgdc=\"http://www.omg.org/spec/DD/20100524/DC\" xmlns:omgdi=\"http://www.omg.org/spec/DD/20100524/DI\" typeLanguage=\"http://www.w3.org/2001/XMLSchema\" expressionLanguage=\"http://www.w3.org/1999/XPath\" targetNamespace=\"http://www.flowable.org/processdef\" exporter=\"Flowable Open Source Modeler\" exporterVersion=\"6.7.2\">\n  <signal id=\"singnal02\" name=\"secondSingal\" flowable:scope=\"global\"></signal>\n  <process id=\"event2002\" name=\"ä¿¡å·ä¸­é—´æ•è·äº‹ä»¶\" isExecutable=\"true\">\n    <startEvent id=\"start01\" name=\"å¼€å§‹\" flowable:formFieldValidation=\"true\"></startEvent>\n    <intermediateCatchEvent id=\"signal01\" name=\"ä¿¡å·æ•è·ä¸­é—´äº‹ä»¶\">\n      <signalEventDefinition signalRef=\"singnal02\"></signalEventDefinition>\n    </intermediateCatchEvent>\n    <sequenceFlow id=\"sid-FBD95BC3-BA38-4863-95E6-E7D484FE80CB\" sourceRef=\"start01\" targetRef=\"signal01\"></sequenceFlow>\n    <serviceTask id=\"task01\" name=\"è‡ªåŠ¨ä»»åŠ¡\" flowable:class=\"com.bobo.flow.delegate.MyTwoJavaDelegate\"></serviceTask>\n    <sequenceFlow id=\"sid-BF5FB671-5895-4FAC-8F92-E4BC4DEE821A\" sourceRef=\"signal01\" targetRef=\"task01\"></sequenceFlow>\n    <endEvent id=\"end01\" name=\"ç»“æŸä»»åŠ¡\"></endEvent>\n    <sequenceFlow id=\"sid-4F4853C5-0FE6-48AB-BD80-A37CF807D90D\" sourceRef=\"task01\" targetRef=\"end01\"></sequenceFlow>\n  </process>\n  <bpmndi:BPMNDiagram id=\"BPMNDiagram_event2002\">\n    <bpmndi:BPMNPlane bpmnElement=\"event2002\" id=\"BPMNPlane_event2002\">\n      <bpmndi:BPMNShape bpmnElement=\"start01\" id=\"BPMNShape_start01\">\n        <omgdc:Bounds height=\"30.0\" width=\"30.0\" x=\"120.0\" y=\"150.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"signal01\" id=\"BPMNShape_signal01\">\n        <omgdc:Bounds height=\"30.0\" width=\"30.0\" x=\"318.5\" y=\"150.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"task01\" id=\"BPMNShape_task01\">\n        <omgdc:Bounds height=\"80.0\" width=\"100.0\" x=\"495.5\" y=\"122.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"end01\" id=\"BPMNShape_end01\">\n        <omgdc:Bounds height=\"28.0\" width=\"28.0\" x=\"690.0\" y=\"151.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNEdge bpmnElement=\"sid-BF5FB671-5895-4FAC-8F92-E4BC4DEE821A\" id=\"BPMNEdge_sid-BF5FB671-5895-4FAC-8F92-E4BC4DEE821A\" flowable:sourceDockerX=\"15.0\" flowable:sourceDockerY=\"15.0\" flowable:targetDockerX=\"50.0\" flowable:targetDockerY=\"40.0\">\n        <omgdi:waypoint x=\"348.44853390329115\" y=\"164.78775666509335\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"495.49999999999903\" y=\"162.7068396226415\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"sid-4F4853C5-0FE6-48AB-BD80-A37CF807D90D\" id=\"BPMNEdge_sid-4F4853C5-0FE6-48AB-BD80-A37CF807D90D\" flowable:sourceDockerX=\"50.0\" flowable:sourceDockerY=\"40.0\" flowable:targetDockerX=\"14.0\" flowable:targetDockerY=\"14.0\">\n        <omgdi:waypoint x=\"595.4499999999996\" y=\"162.94542586750788\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"690.0016973189436\" y=\"164.73506227304313\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"sid-FBD95BC3-BA38-4863-95E6-E7D484FE80CB\" id=\"BPMNEdge_sid-FBD95BC3-BA38-4863-95E6-E7D484FE80CB\" flowable:sourceDockerX=\"15.0\" flowable:sourceDockerY=\"15.0\" flowable:targetDockerX=\"15.0\" flowable:targetDockerY=\"15.0\">\n        <omgdi:waypoint x=\"149.94999953609073\" y=\"165.0\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"318.5\" y=\"165.0\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n    </bpmndi:BPMNPlane>\n  </bpmndi:BPMNDiagram>\n</definitions>\n```\n\nå…ˆéƒ¨ç½²ï¼š\n\n```java\n    /**\n     * Deploy\n     */\n    @Test\n    void testDeploy() throws Exception {\n        //RepositoryService repositoryService = processEngine.getRepositoryService();\n        Deployment deploy = repositoryService.createDeployment()\n                .addClasspathResource(\"ä¿¡å·ä¸­é—´æ•è·äº‹ä»¶.bpmn20.xml\")\n                .name(\"ä¿¡å·ä¸­é—´æ•è·äº‹ä»¶\")\n                .deploy();\n        System.out.println(\"deploy.getId() = \" + deploy.getId());\n        System.out.println(\"deploy.getName() = \" + deploy.getName());\n        System.out.println(\"éƒ¨ç½²å¼€å§‹çš„æ—¶é—´ï¼š\" + new Date());\n        //TimeUnit.MINUTES.sleep(3);\n    }\n```\n\nç„¶åæˆ‘ä»¬éœ€è¦å¯åŠ¨æµç¨‹ï¼š\n\n```java\n    @Test\n    void startFlow() throws Exception{\n        runtimeService.startProcessInstanceById(\"event2002:1:adc5b8f8-afcf-11ec-959a-c03c59ad2248\");\n        System.out.println(\"å¯åŠ¨æ—¶é—´ï¼š\" + new Date());\n    }\n```\n\nå‘é€ä¿¡å·ä¿¡æ¯\n\n```java\n    /**\n     * é€šè¿‡ä¿¡å·å‘é€æ¥è§¦å‘ä¿¡å·å¯åŠ¨äº‹ä»¶çš„æ‰§è¡Œ\n     * å…¨å±€çš„ä¿¡æ¯\n     */\n    @Test\n    void signalGolbal() throws Exception {\n        runtimeService.signalEventReceived(\"secondSingal\");\n        // æˆ‘ä»¬å¾—ä¿è¯å®¹å™¨çš„è¿è¡Œï¼Œæ‰€ä»¥éœ€è¦é˜»å¡\n        TimeUnit.MINUTES.sleep(1);\n    }\n```\n\nç„¶åè¢«æˆ‘ä»¬çš„ä¿¡å·æ•è·ä¸­é—´äº‹ä»¶æ•è·\n\n![image-20220330102256367](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220330102256367.png)\n\nä¿¡å·ä½œç”¨åŸŸä¸ºprocessInstanceçš„æƒ…å†µ\n\n![image-20220330102524238](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220330102524238.png)\n\n\n\né¦–å…ˆé’ˆå¯¹processInstanceçš„ä¿¡å·ï¼Œæˆ‘ä»¬å‘é€globalä¿¡å·æ˜¯ä¸ä¼šè¢«æ•è·çš„\n\n![image-20220330102808127](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220330102808127.png)\n\n\n\nç„¶åprocessInstanceçš„ä¿¡æ¯æˆ‘ä»¬éœ€è¦åœ¨æµç¨‹å®ä¾‹å†…éƒ¨æŠ›å‡ºä¿¡å·\n\n![image-20220330112205035](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220330112205035.png)\n\n\n\n### ä¸­é—´æŠ›å‡ºäº‹ä»¶\n\nä¿¡å·ä¸­é—´æŠ›å‡ºäº‹ä»¶ä¹Ÿå°±æ˜¯åœ¨æµç¨‹æ‰§è¡Œä¸­çš„æŸä¸ªèŠ‚ç‚¹æŠ›å‡ºäº†å¯¹åº”çš„ä¿¡å·ï¼Œç„¶åå¯¹åº”çš„ä¿¡å·ä¸­é—´æ•è·äº‹ä»¶å°±ä¼šè§¦å‘ï¼Œæˆ‘ä»¬é€šè¿‡å…·ä½“çš„æ¡ˆä¾‹æ¥æ¼”ç¤ºå¦‚ï¼š\n\n![image-20220330235847392](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220330235847392.png)\n\n\n\nå®šä¹‰ä¿¡æ¯ä¿¡æ¯ï¼š\n\n![image-20220330193530718](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220330193530718.png)\n\n\n\n\n\n\n\n![image-20220331000011215](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220331000011215.png)\n\nå®Œæ•´çš„xmlæ–‡ä»¶\n\n```xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<definitions xmlns=\"http://www.omg.org/spec/BPMN/20100524/MODEL\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:flowable=\"http://flowable.org/bpmn\" xmlns:bpmndi=\"http://www.omg.org/spec/BPMN/20100524/DI\" xmlns:omgdc=\"http://www.omg.org/spec/DD/20100524/DC\" xmlns:omgdi=\"http://www.omg.org/spec/DD/20100524/DI\" typeLanguage=\"http://www.w3.org/2001/XMLSchema\" expressionLanguage=\"http://www.w3.org/1999/XPath\" targetNamespace=\"http://www.flowable.org/processdef\" exporter=\"Flowable Open Source Modeler\" exporterVersion=\"6.7.2\">\n  <signal id=\"signal01\" name=\"signal01\" flowable:scope=\"global\"></signal>\n  <process id=\"event2003\" name=\"ä¿¡å·ä¸­é—´æŠ›å‡ºäº‹ä»¶\" isExecutable=\"true\">\n    <startEvent id=\"startId01\" flowable:formFieldValidation=\"true\"></startEvent>\n    <parallelGateway id=\"pid01\" name=\"å¹¶è¡Œç½‘å…³\"></parallelGateway>\n    <sequenceFlow id=\"sid-296CDB16-A9D3-4255-9E44-D7C6F5DA5058\" sourceRef=\"startId01\" targetRef=\"pid01\"></sequenceFlow>\n    <serviceTask id=\"task01\" name=\"è‡ªåŠ¨ä»»åŠ¡ä¸€\" flowable:class=\"com.bobo.delegate.MyOneDelegate\"></serviceTask>\n    <serviceTask id=\"task02\" name=\"è‡ªåŠ¨ä»»åŠ¡äºŒ\" flowable:class=\"com.bobo.delegate.MyTwoDelegate\"></serviceTask>\n    <serviceTask id=\"task03\" name=\"è‡ªåŠ¨ä»»åŠ¡ä¸‰\" flowable:class=\"com.bobo.delegate.MyThreeDelegate\"></serviceTask>\n    <sequenceFlow id=\"sid-2325ED54-C769-4161-A00F-001F006B72B5\" sourceRef=\"pid01\" targetRef=\"task01\"></sequenceFlow>\n    <intermediateThrowEvent id=\"sid-262D1C04-299C-4DE6-BAD9-B8AA0FC4EBAB\">\n      <signalEventDefinition signalRef=\"signal01\"></signalEventDefinition>\n    </intermediateThrowEvent>\n    <intermediateCatchEvent id=\"sid-51D70059-8D15-4BF7-9151-48CCD99544F1\">\n      <signalEventDefinition signalRef=\"signal01\"></signalEventDefinition>\n    </intermediateCatchEvent>\n    <sequenceFlow id=\"sid-4A038E06-A731-4A5F-A929-840FB8A92AA5\" sourceRef=\"task01\" targetRef=\"sid-262D1C04-299C-4DE6-BAD9-B8AA0FC4EBAB\"></sequenceFlow>\n    <sequenceFlow id=\"sid-1C87EF67-D60F-47A3-A5B4-06FBC6F2390D\" sourceRef=\"sid-262D1C04-299C-4DE6-BAD9-B8AA0FC4EBAB\" targetRef=\"task02\"></sequenceFlow>\n    <sequenceFlow id=\"sid-DAC2B128-B6A7-48A2-8010-8AC6A806C04D\" sourceRef=\"pid01\" targetRef=\"sid-51D70059-8D15-4BF7-9151-48CCD99544F1\"></sequenceFlow>\n    <sequenceFlow id=\"sid-0ABE23AE-344C-49D8-B574-010DECD093BE\" sourceRef=\"sid-51D70059-8D15-4BF7-9151-48CCD99544F1\" targetRef=\"task03\"></sequenceFlow>\n    <parallelGateway id=\"pid02\" name=\"å¹¶è¡Œç½‘å…³\"></parallelGateway>\n    <sequenceFlow id=\"sid-584ADF4E-9140-4E5A-A396-1257E1436704\" sourceRef=\"task02\" targetRef=\"pid02\"></sequenceFlow>\n    <sequenceFlow id=\"sid-857F5F7F-7EA9-4986-9270-FFBF13E0B8CD\" sourceRef=\"task03\" targetRef=\"pid02\"></sequenceFlow>\n    <endEvent id=\"end01\" name=\"ç»“æŸ\"></endEvent>\n    <sequenceFlow id=\"sid-02646A89-FCEC-4E7F-95B8-61F2065DE8D4\" sourceRef=\"pid02\" targetRef=\"end01\"></sequenceFlow>\n  </process>\n  <bpmndi:BPMNDiagram id=\"BPMNDiagram_event2003\">\n    <bpmndi:BPMNPlane bpmnElement=\"event2003\" id=\"BPMNPlane_event2003\">\n      <bpmndi:BPMNShape bpmnElement=\"startId01\" id=\"BPMNShape_startId01\">\n        <omgdc:Bounds height=\"30.0\" width=\"30.0\" x=\"100.0\" y=\"163.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"pid01\" id=\"BPMNShape_pid01\">\n        <omgdc:Bounds height=\"40.0\" width=\"40.0\" x=\"270.0\" y=\"158.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"task01\" id=\"BPMNShape_task01\">\n        <omgdc:Bounds height=\"80.0\" width=\"100.0\" x=\"419.5\" y=\"71.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"task02\" id=\"BPMNShape_task02\">\n        <omgdc:Bounds height=\"80.0\" width=\"100.0\" x=\"780.0\" y=\"71.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"task03\" id=\"BPMNShape_task03\">\n        <omgdc:Bounds height=\"80.0\" width=\"100.0\" x=\"795.0\" y=\"255.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"sid-262D1C04-299C-4DE6-BAD9-B8AA0FC4EBAB\" id=\"BPMNShape_sid-262D1C04-299C-4DE6-BAD9-B8AA0FC4EBAB\">\n        <omgdc:Bounds height=\"30.0\" width=\"30.0\" x=\"633.5\" y=\"96.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"sid-51D70059-8D15-4BF7-9151-48CCD99544F1\" id=\"BPMNShape_sid-51D70059-8D15-4BF7-9151-48CCD99544F1\">\n        <omgdc:Bounds height=\"30.0\" width=\"30.0\" x=\"465.0\" y=\"278.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"pid02\" id=\"BPMNShape_pid02\">\n        <omgdc:Bounds height=\"40.0\" width=\"40.0\" x=\"994.5\" y=\"158.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"end01\" id=\"BPMNShape_end01\">\n        <omgdc:Bounds height=\"28.0\" width=\"28.0\" x=\"1079.5\" y=\"164.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNEdge bpmnElement=\"sid-4A038E06-A731-4A5F-A929-840FB8A92AA5\" id=\"BPMNEdge_sid-4A038E06-A731-4A5F-A929-840FB8A92AA5\" flowable:sourceDockerX=\"50.0\" flowable:sourceDockerY=\"40.0\" flowable:targetDockerX=\"15.0\" flowable:targetDockerY=\"15.0\">\n        <omgdi:waypoint x=\"519.45\" y=\"111.0\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"633.5\" y=\"111.0\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"sid-02646A89-FCEC-4E7F-95B8-61F2065DE8D4\" id=\"BPMNEdge_sid-02646A89-FCEC-4E7F-95B8-61F2065DE8D4\" flowable:sourceDockerX=\"20.5\" flowable:sourceDockerY=\"20.5\" flowable:targetDockerX=\"14.0\" flowable:targetDockerY=\"14.0\">\n        <omgdi:waypoint x=\"1034.0591869398208\" y=\"178.3782051282051\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"1079.5002755524838\" y=\"178.08885188426407\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"sid-857F5F7F-7EA9-4986-9270-FFBF13E0B8CD\" id=\"BPMNEdge_sid-857F5F7F-7EA9-4986-9270-FFBF13E0B8CD\" flowable:sourceDockerX=\"50.0\" flowable:sourceDockerY=\"40.0\" flowable:targetDockerX=\"20.0\" flowable:targetDockerY=\"20.0\">\n        <omgdi:waypoint x=\"894.9499999999999\" y=\"260.4867256637168\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"1002.6675392670157\" y=\"186.14712041884815\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"sid-1C87EF67-D60F-47A3-A5B4-06FBC6F2390D\" id=\"BPMNEdge_sid-1C87EF67-D60F-47A3-A5B4-06FBC6F2390D\" flowable:sourceDockerX=\"15.0\" flowable:sourceDockerY=\"15.0\" flowable:targetDockerX=\"50.0\" flowable:targetDockerY=\"40.0\">\n        <omgdi:waypoint x=\"663.4499994451444\" y=\"111.0\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"779.9999999999972\" y=\"111.0\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"sid-0ABE23AE-344C-49D8-B574-010DECD093BE\" id=\"BPMNEdge_sid-0ABE23AE-344C-49D8-B574-010DECD093BE\" flowable:sourceDockerX=\"15.0\" flowable:sourceDockerY=\"15.0\" flowable:targetDockerX=\"50.0\" flowable:targetDockerY=\"40.0\">\n        <omgdi:waypoint x=\"494.9497692355611\" y=\"293.0819166248564\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"794.9999999999911\" y=\"294.7260273972602\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"sid-584ADF4E-9140-4E5A-A396-1257E1436704\" id=\"BPMNEdge_sid-584ADF4E-9140-4E5A-A396-1257E1436704\" flowable:sourceDockerX=\"50.0\" flowable:sourceDockerY=\"40.0\" flowable:targetDockerX=\"20.0\" flowable:targetDockerY=\"20.0\">\n        <omgdi:waypoint x=\"879.9499999999999\" y=\"129.1390243902439\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"999.8065381558029\" y=\"172.67196819085487\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"sid-2325ED54-C769-4161-A00F-001F006B72B5\" id=\"BPMNEdge_sid-2325ED54-C769-4161-A00F-001F006B72B5\" flowable:sourceDockerX=\"20.5\" flowable:sourceDockerY=\"20.5\" flowable:targetDockerX=\"50.0\" flowable:targetDockerY=\"40.0\">\n        <omgdi:waypoint x=\"304.9870182555781\" y=\"173.0233265720081\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"419.49999999999994\" y=\"129.8358938547486\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"sid-DAC2B128-B6A7-48A2-8010-8AC6A806C04D\" id=\"BPMNEdge_sid-DAC2B128-B6A7-48A2-8010-8AC6A806C04D\" flowable:sourceDockerX=\"20.5\" flowable:sourceDockerY=\"20.5\" flowable:targetDockerX=\"15.0\" flowable:targetDockerY=\"15.0\">\n        <omgdi:waypoint x=\"302.31181354817494\" y=\"185.6374177631579\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"467.15151373509184\" y=\"285.24160328636844\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"sid-296CDB16-A9D3-4255-9E44-D7C6F5DA5058\" id=\"BPMNEdge_sid-296CDB16-A9D3-4255-9E44-D7C6F5DA5058\" flowable:sourceDockerX=\"15.0\" flowable:sourceDockerY=\"15.0\" flowable:targetDockerX=\"20.0\" flowable:targetDockerY=\"20.0\">\n        <omgdi:waypoint x=\"129.94999940317362\" y=\"178.0\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"270.0\" y=\"178.0\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n    </bpmndi:BPMNPlane>\n  </bpmndi:BPMNDiagram>\n</definitions>\n```\n\nä¸‰ä¸ªè‡ªå®šä¹‰ä»»åŠ¡ç»‘å®šäº†ä¸‰ä¸ªjavaDelegateåˆ†åˆ«ç»™å‡ºæ‰“å°è¯­å¥æ¥è®°å½•\n\n\n\nç„¶åéƒ¨ç½²ä»»åŠ¡\n\n```java\n    @Test\n    public void test02() throws Exception{\n\n        Deployment deployment = processEngine.getRepositoryService().createDeployment()\n                .addClasspathResource(\"ä¿¡å·ä¸­é—´æŠ›å‡ºäº‹ä»¶.bpmn20.xml\")\n                .name(\"ä¿¡å·ä¸­é—´æŠ›å‡ºäº‹ä»¶\")\n                .deploy();\n        System.out.println(\"-----\");\n    }\n```\n\nç„¶ååœ¨å¯åŠ¨ä»»åŠ¡å³å¯\n\n```java\n /**\n     * å¯åŠ¨æµç¨‹å®ä¾‹\n     *\n     */\n    @Test\n    public void startProcessInstanceByKey()  throws Exception{\n\n        processEngine.getRuntimeService()\n                .startProcessInstanceById(\"event2003:1:665b1533-b020-11ec-877d-c03c59ad2248\");\n        System.out.println(\"å¼€å§‹å¯åŠ¨çš„æ—¶é—´ï¼š\" + LocalDateTime.now().toString());\n        // éœ€è¦åœ¨æ­¤é˜»å¡æ¯”ç­‰å¾…é•¿çš„æ—¶é—´\n        TimeUnit.MINUTES.sleep(3);\n    }\n```\n\nçœ‹æ§åˆ¶å°çš„è¾“å‡º\n\n![image-20220330200124232](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220330200124232.png)\n\n\n\næ•ˆæœï¼š\n\n![image-20220330200235193](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220330200235193.png)\n\n### è¾¹ç•Œäº‹ä»¶\n\næœ€åæ¥çœ‹çœ‹ä¿¡å·è¾¹ç•Œäº‹ä»¶ï¼Œæ¡ˆä¾‹å¦‚ä¸‹ï¼š\n\n![image-20220330202443905](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220330202443905.png)\n\nå®Œæ•´çš„xmlå®šä¹‰ä¸º\n\n```xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<definitions xmlns=\"http://www.omg.org/spec/BPMN/20100524/MODEL\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:flowable=\"http://flowable.org/bpmn\" xmlns:bpmndi=\"http://www.omg.org/spec/BPMN/20100524/DI\" xmlns:omgdc=\"http://www.omg.org/spec/DD/20100524/DC\" xmlns:omgdi=\"http://www.omg.org/spec/DD/20100524/DI\" typeLanguage=\"http://www.w3.org/2001/XMLSchema\" expressionLanguage=\"http://www.w3.org/1999/XPath\" targetNamespace=\"http://www.flowable.org/processdef\" exporter=\"Flowable Open Source Modeler\" exporterVersion=\"6.7.2\">\n  <signal id=\"signal2\" name=\"signal2\" flowable:scope=\"global\"></signal>\n  <process id=\"event2004\" name=\"ä¿¡å·è¾¹ç•Œäº‹ä»¶\" isExecutable=\"true\">\n    <startEvent id=\"startEvent1\" flowable:formFieldValidation=\"true\"></startEvent>\n    <userTask id=\"sid-F11058BE-828A-45FF-A830-8BF099D71FBD\" name=\"äººå·¥ä»»åŠ¡\" flowable:assignee=\"zhangsan\" flowable:formFieldValidation=\"true\">\n      <extensionElements>\n        <modeler:initiator-can-complete xmlns:modeler=\"http://flowable.org/modeler\"><![CDATA[false]]></modeler:initiator-can-complete>\n      </extensionElements>\n    </userTask>\n    <sequenceFlow id=\"sid-D2EE279A-24A2-4B6C-8021-ADC0A1A645EC\" sourceRef=\"startEvent1\" targetRef=\"sid-F11058BE-828A-45FF-A830-8BF099D71FBD\"></sequenceFlow>\n    <serviceTask id=\"sid-FAB46591-3247-4776-B3B5-79826133F5AF\" name=\"è‡ªåŠ¨ä»»åŠ¡ä¸€\" flowable:class=\"com.bobo.delegate.MyOneDelegate\"></serviceTask>\n    <serviceTask id=\"sid-7CD0FBBA-4FE6-4646-B0D6-1D8A4D8D5515\" name=\"è‡ªåŠ¨ä»»åŠ¡äºŒ\" flowable:class=\"com.bobo.delegate.MyTwoDelegate\"></serviceTask>\n    <sequenceFlow id=\"sid-74B48035-4CED-4963-AA87-55D1FB95EEA8\" sourceRef=\"sid-F11058BE-828A-45FF-A830-8BF099D71FBD\" targetRef=\"sid-FAB46591-3247-4776-B3B5-79826133F5AF\"></sequenceFlow>\n    <endEvent id=\"sid-55682CDC-FEBD-44A1-B38C-A3F816AC91F4\"></endEvent>\n    <sequenceFlow id=\"sid-AC84425B-8D8C-4A0F-BDCC-BC1DCF909752\" sourceRef=\"sid-FAB46591-3247-4776-B3B5-79826133F5AF\" targetRef=\"sid-55682CDC-FEBD-44A1-B38C-A3F816AC91F4\"></sequenceFlow>\n    <endEvent id=\"sid-11CA784C-69DE-45B2-AE58-78E64CF2EE8E\"></endEvent>\n    <sequenceFlow id=\"sid-A2E3E7C7-9AD0-46B8-8105-272496599E0D\" sourceRef=\"sid-7CD0FBBA-4FE6-4646-B0D6-1D8A4D8D5515\" targetRef=\"sid-11CA784C-69DE-45B2-AE58-78E64CF2EE8E\"></sequenceFlow>\n    <boundaryEvent id=\"sid-8E473D8E-70D6-4AB3-B1D9-D3E7EFCDB39D\" attachedToRef=\"sid-F11058BE-828A-45FF-A830-8BF099D71FBD\" cancelActivity=\"true\">\n      <signalEventDefinition signalRef=\"signal2\"></signalEventDefinition>\n    </boundaryEvent>\n    <sequenceFlow id=\"sid-C3770DF2-1747-45A7-85B5-2838AB7ECF9C\" sourceRef=\"sid-8E473D8E-70D6-4AB3-B1D9-D3E7EFCDB39D\" targetRef=\"sid-7CD0FBBA-4FE6-4646-B0D6-1D8A4D8D5515\"></sequenceFlow>\n  </process>\n  <bpmndi:BPMNDiagram id=\"BPMNDiagram_event2004\">\n    <bpmndi:BPMNPlane bpmnElement=\"event2004\" id=\"BPMNPlane_event2004\">\n      <bpmndi:BPMNShape bpmnElement=\"startEvent1\" id=\"BPMNShape_startEvent1\">\n        <omgdc:Bounds height=\"30.0\" width=\"30.0\" x=\"100.0\" y=\"163.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"sid-F11058BE-828A-45FF-A830-8BF099D71FBD\" id=\"BPMNShape_sid-F11058BE-828A-45FF-A830-8BF099D71FBD\">\n        <omgdc:Bounds height=\"80.0\" width=\"100.0\" x=\"255.0\" y=\"138.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"sid-FAB46591-3247-4776-B3B5-79826133F5AF\" id=\"BPMNShape_sid-FAB46591-3247-4776-B3B5-79826133F5AF\">\n        <omgdc:Bounds height=\"80.0\" width=\"100.0\" x=\"521.5\" y=\"135.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"sid-7CD0FBBA-4FE6-4646-B0D6-1D8A4D8D5515\" id=\"BPMNShape_sid-7CD0FBBA-4FE6-4646-B0D6-1D8A4D8D5515\">\n        <omgdc:Bounds height=\"80.0\" width=\"100.0\" x=\"521.5\" y=\"315.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"sid-55682CDC-FEBD-44A1-B38C-A3F816AC91F4\" id=\"BPMNShape_sid-55682CDC-FEBD-44A1-B38C-A3F816AC91F4\">\n        <omgdc:Bounds height=\"28.0\" width=\"28.0\" x=\"690.0\" y=\"161.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"sid-11CA784C-69DE-45B2-AE58-78E64CF2EE8E\" id=\"BPMNShape_sid-11CA784C-69DE-45B2-AE58-78E64CF2EE8E\">\n        <omgdc:Bounds height=\"28.0\" width=\"28.0\" x=\"690.0\" y=\"341.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"sid-8E473D8E-70D6-4AB3-B1D9-D3E7EFCDB39D\" id=\"BPMNShape_sid-8E473D8E-70D6-4AB3-B1D9-D3E7EFCDB39D\">\n        <omgdc:Bounds height=\"30.0\" width=\"30.0\" x=\"308.4527694396093\" y=\"203.7233532460343\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNEdge bpmnElement=\"sid-C3770DF2-1747-45A7-85B5-2838AB7ECF9C\" id=\"BPMNEdge_sid-C3770DF2-1747-45A7-85B5-2838AB7ECF9C\" flowable:sourceDockerX=\"15.0\" flowable:sourceDockerY=\"15.0\" flowable:targetDockerX=\"50.0\" flowable:targetDockerY=\"40.0\">\n        <omgdi:waypoint x=\"336.557461183174\" y=\"225.9233207922021\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"521.4999999999999\" y=\"327.5301011331414\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"sid-74B48035-4CED-4963-AA87-55D1FB95EEA8\" id=\"BPMNEdge_sid-74B48035-4CED-4963-AA87-55D1FB95EEA8\" flowable:sourceDockerX=\"50.0\" flowable:sourceDockerY=\"40.0\" flowable:targetDockerX=\"50.0\" flowable:targetDockerY=\"40.0\">\n        <omgdi:waypoint x=\"354.95000000000005\" y=\"177.43714821763604\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"521.5\" y=\"175.56228893058162\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"sid-D2EE279A-24A2-4B6C-8021-ADC0A1A645EC\" id=\"BPMNEdge_sid-D2EE279A-24A2-4B6C-8021-ADC0A1A645EC\" flowable:sourceDockerX=\"15.0\" flowable:sourceDockerY=\"15.0\" flowable:targetDockerX=\"50.0\" flowable:targetDockerY=\"40.0\">\n        <omgdi:waypoint x=\"129.94999949366624\" y=\"178.0\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"254.99999999993574\" y=\"178.0\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"sid-A2E3E7C7-9AD0-46B8-8105-272496599E0D\" id=\"BPMNEdge_sid-A2E3E7C7-9AD0-46B8-8105-272496599E0D\" flowable:sourceDockerX=\"50.0\" flowable:sourceDockerY=\"40.0\" flowable:targetDockerX=\"14.0\" flowable:targetDockerY=\"14.0\">\n        <omgdi:waypoint x=\"621.4499999999999\" y=\"355.0\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"690.0\" y=\"355.0\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"sid-AC84425B-8D8C-4A0F-BDCC-BC1DCF909752\" id=\"BPMNEdge_sid-AC84425B-8D8C-4A0F-BDCC-BC1DCF909752\" flowable:sourceDockerX=\"50.0\" flowable:sourceDockerY=\"40.0\" flowable:targetDockerX=\"14.0\" flowable:targetDockerY=\"14.0\">\n        <omgdi:waypoint x=\"621.4499999999999\" y=\"175.0\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"690.0\" y=\"175.0\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n    </bpmndi:BPMNPlane>\n  </bpmndi:BPMNDiagram>\n</definitions>\n```\n\n\n\nå®šä¹‰çš„ä¿¡å·ä¸ºï¼š\n\n```xml\n<signal id=\"signal2\" name=\"signal2\" flowable:scope=\"global\"></signal>\n```\n\nè‡ªåŠ¨ä»»åŠ¡çš„å†…å®¹\n\n```java\npublic class MyOneDelegate implements JavaDelegate {\n    @Override\n    public void execute(DelegateExecution execution) {\n\n        System.out.println(\"å®Œæˆè‡ªåŠ¨å®¡æ‰¹ä»»åŠ¡-----ã€‹MyOneDelegate\" + LocalDateTime.now().toString());\n    }\n}\n\npublic class MyTwoDelegate implements JavaDelegate {\n    @Override\n    public void execute(DelegateExecution execution) {\n        System.out.println(\"MyTwoDelegate---->æ‰§è¡Œäº†\" + LocalDateTime.now().toString());\n    }\n}\n```\n\n\n\néƒ¨ç½²é¡¹ç›®ç„¶åå¯åŠ¨æµç¨‹\n\n```java\n    @Test\n    public void test02() throws Exception{\n\n        Deployment deployment = processEngine.getRepositoryService().createDeployment()\n                .addClasspathResource(\"ä¿¡å·è¾¹ç•Œäº‹ä»¶.bpmn20.xml\")\n                .name(\"ä¿¡å·è¾¹ç•Œäº‹ä»¶\")\n                .deploy();\n        System.out.println(\"-----\");\n    }\n\n    @Test\n    public void startProcessInstanceByKey()  throws Exception{\n\n        processEngine.getRuntimeService()\n                .startProcessInstanceById(\"event2004:1:e8b5c39f-b024-11ec-bdac-c03c59ad2248\");\n        System.out.println(\"å¼€å§‹å¯åŠ¨çš„æ—¶é—´ï¼š\" + LocalDateTime.now().toString());\n        // éœ€è¦åœ¨æ­¤é˜»å¡æ¯”ç­‰å¾…é•¿çš„æ—¶é—´\n        TimeUnit.MINUTES.sleep(3);\n    }\n```\n\n\n\n![image-20220330203056055](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220330203056055.png)\n\n\n\n```java\n    @Test\n    public void signalGlobal()  throws Exception{\n        String signal = \"signal2\";\n        Map<String, Object> variables = new HashMap();\n        processEngine.getRuntimeService().signalEventReceived(signal,variables);\n    }\n```\n\n![image-20220330203233862](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220330203233862.png)\n\n\n\né€šè¿‡è¾“å‡ºçœ‹åˆ°äº†æˆ‘ä»¬æœŸæœ›çš„ç»“æœäº†ï¼Œè¿™æ ·å°±ç»™å¤§å®¶ä»‹ç»å®Œäº†ä¿¡å·ç›¸å…³çš„å„ç§äº‹ä»¶äº†\n\n\n\n\n\n## ç»“æŸäº‹ä»¶\n\nç»“æŸäº‹ä»¶é¡¾åæ€ä¹‰å°±æ˜¯æµç¨‹ç»“æŸçš„äº‹ä»¶ï¼Œé™¤äº†å‰é¢é‡åˆ°çš„ç©ºç»“æŸäº‹ä»¶å¤–ï¼Œç»“æŸäº‹ä»¶è¿˜åŒ…æ‹¬å¦‚ä¸‹å‡ ç§ï¼š\n\n* é”™è¯¯ç»“æŸäº‹ä»¶\n* ä¸­æ–­ç»“æŸäº‹ä»¶\n* å–æ¶ˆç»“æŸäº‹ä»¶\n\n### é”™è¯¯ç»“æŸäº‹ä»¶\n\nå½“æµç¨‹æ‰§è¡Œåˆ°è¾¾**é”™è¯¯ç»“æŸäº‹ä»¶ï¼ˆerror end eventï¼‰**æ—¶ï¼Œç»“æŸæ‰§è¡Œçš„å½“å‰åˆ†æ”¯ï¼Œå¹¶æŠ›å‡ºé”™è¯¯ã€‚è¿™ä¸ªé”™è¯¯å¯ä»¥ç”±åŒ¹é…çš„é”™è¯¯è¾¹ç•Œä¸­é—´äº‹ä»¶æ•è·ã€‚å¦‚æœæ‰¾ä¸åˆ°åŒ¹é…çš„é”™è¯¯è¾¹ç•Œäº‹ä»¶ï¼Œå°†ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚é€šè¿‡å…·ä½“æ¡ˆä¾‹æ¥è¯¦ç»†è®²è§£ï¼š\n\n![image-20220331100340069](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220331100340069.png)\n\nå®Œæ•´çš„xmlæ–‡ä»¶\n\n```xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<definitions xmlns=\"http://www.omg.org/spec/BPMN/20100524/MODEL\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:flowable=\"http://flowable.org/bpmn\" xmlns:bpmndi=\"http://www.omg.org/spec/BPMN/20100524/DI\" xmlns:omgdc=\"http://www.omg.org/spec/DD/20100524/DC\" xmlns:omgdi=\"http://www.omg.org/spec/DD/20100524/DI\" typeLanguage=\"http://www.w3.org/2001/XMLSchema\" expressionLanguage=\"http://www.w3.org/1999/XPath\" targetNamespace=\"http://www.flowable.org/processdef\" exporter=\"Flowable Open Source Modeler\" exporterVersion=\"6.7.2\">\n  <error id=\"error03\" errorCode=\"error03\" ></error>\n  <process id=\"event5001\" name=\"é”™è¯¯ç»“æŸäº‹ä»¶\" isExecutable=\"true\">\n    <startEvent id=\"start01\" name=\"å¼€å§‹ä»»åŠ¡\" flowable:formFieldValidation=\"true\"></startEvent>\n    <subProcess id=\"sid-794CA748-4381-417F-8350-360E89907E84\" name=\"subProcess\">\n      <startEvent id=\"startc01\" name=\"å¼€å§‹å­æµç¨‹\" flowable:formFieldValidation=\"true\"></startEvent>\n      <serviceTask id=\"task01\" name=\"è‡ªåŠ¨ä»»åŠ¡ä¸€\" flowable:class=\"com.bobo.flow.delegate.MyOneJavaDelegate\"></serviceTask>\n      <exclusiveGateway id=\"p001\" name=\"æ’ä»–ç½‘å…³\"></exclusiveGateway>\n      <endEvent id=\"endc01\" name=\"å­æµç¨‹ç»“æŸ\"></endEvent>\n      <endEvent id=\"errorend01\" name=\"é”™è¯¯ç»“æŸäº‹ä»¶\">\n        <errorEventDefinition errorRef=\"error03\" flowable:errorVariableLocalScope=\"true\" flowable:errorVariableTransient=\"true\"></errorEventDefinition>\n      </endEvent>\n      <sequenceFlow id=\"sid-1B2782FA-5216-4817-B964-A77EDEBB7547\" sourceRef=\"startc01\" targetRef=\"task01\"></sequenceFlow>\n      <sequenceFlow id=\"sid-D2196400-20DC-4D6B-AAD2-AA9308CE8DEA\" sourceRef=\"task01\" targetRef=\"p001\"></sequenceFlow>\n      <sequenceFlow id=\"sid-DEC53745-1E74-4D08-B472-95F9A6B92D98\" sourceRef=\"p001\" targetRef=\"errorend01\">\n        <conditionExpression xsi:type=\"tFormalExpression\"><![CDATA[${flag<=0}]]></conditionExpression>\n      </sequenceFlow>\n    </subProcess>\n    <sequenceFlow id=\"sid-934F4EDF-16A9-4D4E-8D7A-4F8E1EEB0F9E\" sourceRef=\"start01\" targetRef=\"sid-794CA748-4381-417F-8350-360E89907E84\"></sequenceFlow>\n    <serviceTask id=\"task2\" name=\"è‡ªåŠ¨ä»»åŠ¡äºŒ\" flowable:class=\"com.bobo.flow.delegate.MyTwoJavaDelegate\"></serviceTask>\n    <sequenceFlow id=\"sid-E8166885-00F6-49A1-BE26-3AB98FE95455\" sourceRef=\"sid-794CA748-4381-417F-8350-360E89907E84\" targetRef=\"task2\"></sequenceFlow>\n    <endEvent id=\"end02\" name=\"ä¸»æµç¨‹ç»“æŸ\"></endEvent>\n    <sequenceFlow id=\"sid-496A30AE-44AC-4298-83E0-3183F3FF935B\" sourceRef=\"task2\" targetRef=\"end02\"></sequenceFlow>\n    <boundaryEvent id=\"perror01\" name=\"è¾¹ç•Œé”™è¯¯äº‹ä»¶\" attachedToRef=\"sid-794CA748-4381-417F-8350-360E89907E84\">\n      <errorEventDefinition errorRef=\"error03\" flowable:errorVariableLocalScope=\"true\" flowable:errorVariableTransient=\"true\"></errorEventDefinition>\n    </boundaryEvent>\n    <sequenceFlow id=\"sid-9562301E-B400-4D1F-89B8-23E69ADEAE68\" sourceRef=\"perror01\" targetRef=\"task3\"></sequenceFlow>\n    <serviceTask id=\"task3\" name=\"è‡ªåŠ¨ä»»åŠ¡ä¸‰\" flowable:class=\"com.bobo.flow.delegate.MyThreeJavaDelegate\"></serviceTask>\n    <endEvent id=\"end003\" name=\"ä¸»æµç¨‹ç»“æŸ\"></endEvent>\n    <sequenceFlow id=\"sid-436E29BF-7F5E-4A4B-8F62-C0AEA010F4D2\" sourceRef=\"task3\" targetRef=\"end003\"></sequenceFlow>\n    <sequenceFlow id=\"sid-C17C73A1-5853-496B-B686-E7911105D459\" sourceRef=\"sid-794CA748-4381-417F-8350-360E89907E84\" targetRef=\"endc01\">\n      <conditionExpression xsi:type=\"tFormalExpression\"><![CDATA[${flag>0}]]></conditionExpression>\n    </sequenceFlow>\n  </process>\n  <bpmndi:BPMNDiagram id=\"BPMNDiagram_event5001\">\n    <bpmndi:BPMNPlane bpmnElement=\"event5001\" id=\"BPMNPlane_event5001\">\n      <bpmndi:BPMNShape bpmnElement=\"start01\" id=\"BPMNShape_start01\">\n        <omgdc:Bounds height=\"30.0\" width=\"30.0\" x=\"75.0\" y=\"205.5\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"sid-794CA748-4381-417F-8350-360E89907E84\" id=\"BPMNShape_sid-794CA748-4381-417F-8350-360E89907E84\">\n        <omgdc:Bounds height=\"261.0\" width=\"593.0\" x=\"240.0\" y=\"90.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"startc01\" id=\"BPMNShape_startc01\">\n        <omgdc:Bounds height=\"30.0\" width=\"30.0\" x=\"285.0\" y=\"199.5\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"task01\" id=\"BPMNShape_task01\">\n        <omgdc:Bounds height=\"80.0\" width=\"100.0\" x=\"418.5\" y=\"174.5\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"p001\" id=\"BPMNShape_p001\">\n        <omgdc:Bounds height=\"40.0\" width=\"40.0\" x=\"563.5\" y=\"194.5\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"endc01\" id=\"BPMNShape_endc01\">\n        <omgdc:Bounds height=\"28.0\" width=\"28.0\" x=\"675.0\" y=\"150.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"errorend01\" id=\"BPMNShape_errorend01\">\n        <omgdc:Bounds height=\"28.0\" width=\"28.0\" x=\"675.0\" y=\"255.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"task2\" id=\"BPMNShape_task2\">\n        <omgdc:Bounds height=\"80.0\" width=\"100.0\" x=\"942.5\" y=\"176.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"end02\" id=\"BPMNShape_end02\">\n        <omgdc:Bounds height=\"28.0\" width=\"28.0\" x=\"1087.5\" y=\"202.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"perror01\" id=\"BPMNShape_perror01\">\n        <omgdc:Bounds height=\"30.0\" width=\"30.0\" x=\"478.02252392098524\" y=\"336.450017237985\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"task3\" id=\"BPMNShape_task3\">\n        <omgdc:Bounds height=\"80.0\" width=\"100.0\" x=\"665.5\" y=\"406.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"end003\" id=\"BPMNShape_end003\">\n        <omgdc:Bounds height=\"28.0\" width=\"28.0\" x=\"810.5\" y=\"432.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNEdge bpmnElement=\"sid-934F4EDF-16A9-4D4E-8D7A-4F8E1EEB0F9E\" id=\"BPMNEdge_sid-934F4EDF-16A9-4D4E-8D7A-4F8E1EEB0F9E\" flowable:sourceDockerX=\"15.0\" flowable:sourceDockerY=\"15.0\" flowable:targetDockerX=\"296.5\" flowable:targetDockerY=\"130.5\">\n        <omgdi:waypoint x=\"104.9499999082861\" y=\"220.5\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"240.0\" y=\"220.5\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"sid-9562301E-B400-4D1F-89B8-23E69ADEAE68\" id=\"BPMNEdge_sid-9562301E-B400-4D1F-89B8-23E69ADEAE68\" flowable:sourceDockerX=\"15.0\" flowable:sourceDockerY=\"15.0\" flowable:targetDockerX=\"1.0\" flowable:targetDockerY=\"40.0\">\n        <omgdi:waypoint x=\"493.02252392098524\" y=\"366.40001519452954\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"493.02252392098524\" y=\"446.0\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"665.4999999999623\" y=\"446.0\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"sid-E8166885-00F6-49A1-BE26-3AB98FE95455\" id=\"BPMNEdge_sid-E8166885-00F6-49A1-BE26-3AB98FE95455\" flowable:sourceDockerX=\"296.5\" flowable:sourceDockerY=\"130.5\" flowable:targetDockerX=\"50.0\" flowable:targetDockerY=\"40.0\">\n        <omgdi:waypoint x=\"832.9499999999987\" y=\"217.57401315789474\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"942.499999999999\" y=\"216.49292763157894\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"sid-436E29BF-7F5E-4A4B-8F62-C0AEA010F4D2\" id=\"BPMNEdge_sid-436E29BF-7F5E-4A4B-8F62-C0AEA010F4D2\" flowable:sourceDockerX=\"50.0\" flowable:sourceDockerY=\"40.0\" flowable:targetDockerX=\"14.0\" flowable:targetDockerY=\"14.0\">\n        <omgdi:waypoint x=\"765.4499999999999\" y=\"446.0\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"810.5\" y=\"446.0\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"sid-D2196400-20DC-4D6B-AAD2-AA9308CE8DEA\" id=\"BPMNEdge_sid-D2196400-20DC-4D6B-AAD2-AA9308CE8DEA\" flowable:sourceDockerX=\"50.0\" flowable:sourceDockerY=\"40.0\" flowable:targetDockerX=\"20.5\" flowable:targetDockerY=\"20.5\">\n        <omgdi:waypoint x=\"518.4499999999978\" y=\"214.71623376623376\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"563.9130434782609\" y=\"214.91304347826087\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"sid-496A30AE-44AC-4298-83E0-3183F3FF935B\" id=\"BPMNEdge_sid-496A30AE-44AC-4298-83E0-3183F3FF935B\" flowable:sourceDockerX=\"50.0\" flowable:sourceDockerY=\"40.0\" flowable:targetDockerX=\"14.0\" flowable:targetDockerY=\"14.0\">\n        <omgdi:waypoint x=\"1042.449999999996\" y=\"216.0\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"1087.5\" y=\"216.0\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"sid-C17C73A1-5853-496B-B686-E7911105D459\" id=\"BPMNEdge_sid-C17C73A1-5853-496B-B686-E7911105D459\" flowable:sourceDockerX=\"343.3984375\" flowable:sourceDockerY=\"106.0\" flowable:targetDockerX=\"14.0\" flowable:targetDockerY=\"14.0\">\n        <omgdi:waypoint x=\"583.3984375\" y=\"196.0\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"583.3984375\" y=\"164.0\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"675.0\" y=\"164.0\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"sid-1B2782FA-5216-4817-B964-A77EDEBB7547\" id=\"BPMNEdge_sid-1B2782FA-5216-4817-B964-A77EDEBB7547\" flowable:sourceDockerX=\"15.0\" flowable:sourceDockerY=\"15.0\" flowable:targetDockerX=\"50.0\" flowable:targetDockerY=\"40.0\">\n        <omgdi:waypoint x=\"314.949999356254\" y=\"214.5\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"418.5\" y=\"214.5\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"sid-DEC53745-1E74-4D08-B472-95F9A6B92D98\" id=\"BPMNEdge_sid-DEC53745-1E74-4D08-B472-95F9A6B92D98\" flowable:sourceDockerX=\"20.8984375\" flowable:sourceDockerY=\"36.5\" flowable:targetDockerX=\"14.0\" flowable:targetDockerY=\"14.0\">\n        <omgdi:waypoint x=\"584.3984375\" y=\"233.54821399278214\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"584.3984375\" y=\"269.0\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"675.0\" y=\"269.0\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n    </bpmndi:BPMNPlane>\n  </bpmndi:BPMNDiagram>\n</definitions>\n```\n\nå®šä¹‰çš„error\n\n```xml\n<error id=\"error01\" errorCode=\"error01\"></error>\n```\n\nåœ¨å­æµç¨‹ä¸­ï¼Œå½“flagçš„æ•°æ®ä¸º0çš„æ—¶å€™ï¼Œå°±ä¼šè§¦å‘é”™è¯¯ç»“æŸäº‹ä»¶\n\n```xml\n      <sequenceFlow id=\"1111\" sourceRef=\"12222\" targetRef=\"xxxxx44\">\n        <conditionExpression xsi:type=\"tFormalExpression\"><![CDATA[${flag==0}]]></conditionExpression>\n      </sequenceFlow>\n```\n\nç„¶åæˆ‘ä»¬åœ¨å­æµç¨‹ä¸Šç»‘å®šäº†ä¸€ä¸ªé”™è¯¯è¾¹ç•Œäº‹ä»¶ï¼Œç»‘å®šçš„ä¹Ÿæ˜¯error01,ä¹Ÿå°±æ˜¯å½“å­æµç¨‹è§¦å‘é”™è¯¯ç»“æŸäº‹ä»¶ï¼Œå°±ä¼šè§¦å‘è¿™ä¸ªè¾¹ç•Œäº‹ä»¶ï¼Œè¿›è€Œå®Œæˆè‡ªåŠ¨ä»»åŠ¡ä¸‰ã€‚\n\næµç¨‹ä¸­å…³è”çš„ä¸‰ä¸ªè‡ªåŠ¨ä»»åŠ¡éƒ½åªæ˜¯è¾“å‡ºä¸€ä¸ªæ‰“å°è¯­å¥~\n\nç„¶åæˆ‘ä»¬éœ€è¦åšçš„æ“ä½œæœ‰ï¼Œéƒ¨ç½²ï¼Œå¯åŠ¨æµç¨‹ç»‘å®šæµç¨‹å˜é‡flagçš„å€¼ä¸º0ï¼Œç„¶åå°±å¯ä»¥çœ‹è¾“å‡ºç»“æœäº†\n\n```java\n    /**\n    * éƒ¨ç½²\n    */\n    @Test\n    public void test02() throws Exception{\n\n        Deployment deployment = processEngine.getRepositoryService().createDeployment()\n                .addClasspathResource(\"é”™è¯¯ç»“æŸäº‹ä»¶.bpmn20.xml\")\n                .name(\"é”™è¯¯ç»“æŸäº‹ä»¶\")\n                .deploy();\n        System.out.println(\"-----\");\n    }\n```\n\nç„¶åå¯åŠ¨æµç¨‹\n\n```java\n    /**\n     * å¯åŠ¨æµç¨‹å®ä¾‹,è®¾ç½®æµç¨‹å˜é‡ä¸­çš„flag=0è§¦å‘é”™è¯¯ç»“æŸäº‹ä»¶\n     */\n    @Test\n    public void startProcessInstanceByKey()  throws Exception{\n        // è®¾ç½®å¯¹åº”çš„æµç¨‹å˜é‡çš„å€¼\n        Map<String,Object> map = new HashMap<>();\n        map.put(\"flag\",0);// è®¾ç½®flagä¸º0è§¦å‘æµç¨‹ç»“æŸäº‹ä»¶\n        processEngine.getRuntimeService()\n                .startProcessInstanceById(\"event2005:1:ebec87e2-b028-11ec-b93f-c03c59ad2248\",map);\n        System.out.println(\"å¼€å§‹å¯åŠ¨çš„æ—¶é—´ï¼š\" + LocalDateTime.now().toString());\n        // éœ€è¦åœ¨æ­¤é˜»å¡æ¯”ç­‰å¾…é•¿çš„æ—¶é—´\n        TimeUnit.MINUTES.sleep(3);\n    }\n```\n\nçœ‹æ§åˆ¶å°è¾“å‡º\n\n![image-20220330210538338](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220330210538338.png)\n\næ§åˆ¶å°è¾“å‡ºçš„ç»“æœå’Œæˆ‘ä»¬é¢„æœŸçš„æ˜¯ä¸€æ ·çš„\n\n![image-20220330210708334](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220330210708334.png)\n\nè¯´æ˜é”™è¯¯ç»“æŸäº‹ä»¶çš„ä½œç”¨å°±æ˜¯åœ¨æ‰§è¡Œåˆ°é”™è¯¯ç»“æŸçš„èŠ‚ç‚¹ä½ç½®ä¼šæŠ›å‡ºå¯¹åº”çš„é”™è¯¯ï¼Œä¾›éœ€è¦è·å–çš„äº‹ä»¶æ¥å¤„ç†ã€‚\n\n\n\n### ä¸­æ–­ç»“æŸäº‹ä»¶\n\nä¸­æ–­ç»“æŸäº‹ä»¶ä¹Ÿç§°ä¸ºç»ˆæ­¢ç»“æŸäº‹ä»¶ï¼Œä¸»è¦æ˜¯å¯¹æµç¨‹è¿›è¡Œç»ˆæ­¢çš„äº‹ä»¶ï¼Œå¯ä»¥åœ¨ä¸€ä¸ªå¤æ‚çš„æµç¨‹ä¸­ï¼Œå¦‚æœæŸæ–¹æƒ³è¦æå‰ä¸­æ–­è¿™ä¸ªæµç¨‹ï¼Œå¯ä»¥é‡‡ç”¨è¿™ä¸ªäº‹ä»¶æ¥å¤„ç†ï¼Œå¯ä»¥åœ¨å¹¶è¡Œå¤„ç†ä»»åŠ¡ä¸­ã€‚å¦‚æœä½ æ˜¯åœ¨æµç¨‹å®ä¾‹å±‚å¤„ç†ï¼Œæ•´ä¸ªæµç¨‹éƒ½ä¼šè¢«ä¸­æ–­ï¼Œå¦‚æœæ˜¯åœ¨å­æµç¨‹ä¸­ä½¿ç”¨ï¼Œé‚£ä¹ˆå½“å‰ä½œç”¨å’Œä½œç”¨åŸŸå†…çš„æ‰€æœ‰çš„å†…éƒ¨æµç¨‹éƒ½ä¼šè¢«ç»ˆæ­¢ã€‚å…·ä½“è¿˜æ˜¯é€šè¿‡ä¸¤ä¸ªæ¡ˆä¾‹æ¥ç»™å¤§å®¶ä»‹ç»ï¼š\n\n#### æ¡ˆä¾‹ä¸€\n\næ¡ˆä¾‹ä¸€æˆ‘ä»¬ä»‹ç»æ²¡æœ‰å­æµç¨‹çš„æƒ…å†µä¸‹ç»ˆæ­¢çš„åœºæ™¯ï¼Œå…·ä½“æ¡ˆä¾‹å¦‚ä¸‹\n\n![image-20220331102808059](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220331102808059.png)\n\nå®Œæ•´çš„xmlæ–‡ä»¶ï¼š\n\n```xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<definitions xmlns=\"http://www.omg.org/spec/BPMN/20100524/MODEL\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:flowable=\"http://flowable.org/bpmn\" xmlns:bpmndi=\"http://www.omg.org/spec/BPMN/20100524/DI\" xmlns:omgdc=\"http://www.omg.org/spec/DD/20100524/DC\" xmlns:omgdi=\"http://www.omg.org/spec/DD/20100524/DI\" typeLanguage=\"http://www.w3.org/2001/XMLSchema\" expressionLanguage=\"http://www.w3.org/1999/XPath\" targetNamespace=\"http://www.flowable.org/processdef\" exporter=\"Flowable Open Source Modeler\" exporterVersion=\"6.7.2\">\n  <process id=\"event5002\" name=\"ç»ˆæ­¢ç»“æŸäº‹ä»¶01\" isExecutable=\"true\">\n    <startEvent id=\"start01\" name=\"å¼€å§‹äº‹ä»¶\" flowable:formFieldValidation=\"true\"></startEvent>\n    <parallelGateway id=\"p001\" name=\"å¹¶è¡Œç½‘å…³\"></parallelGateway>\n    <parallelGateway id=\"p004\" name=\"å¹¶è¡Œç½‘å…³\"></parallelGateway>\n    <userTask id=\"task2\" name=\"ç”¨æˆ·ä»»åŠ¡äºŒ\" flowable:assignee=\"lisi\" flowable:formFieldValidation=\"true\">\n      <extensionElements>\n        <modeler:initiator-can-complete xmlns:modeler=\"http://flowable.org/modeler\"><![CDATA[false]]></modeler:initiator-can-complete>\n      </extensionElements>\n    </userTask>\n    <sequenceFlow id=\"sid-E3A5580F-4CE3-4556-894E-46C3D2134071\" sourceRef=\"p001\" targetRef=\"task2\"></sequenceFlow>\n    <userTask id=\"task1\" name=\"ç”¨æˆ·ä»»åŠ¡ä¸€\" flowable:assignee=\"zhangsan\" flowable:formFieldValidation=\"true\">\n      <extensionElements>\n        <modeler:initiator-can-complete xmlns:modeler=\"http://flowable.org/modeler\"><![CDATA[false]]></modeler:initiator-can-complete>\n      </extensionElements>\n    </userTask>\n    <sequenceFlow id=\"sid-FF8C06ED-AE40-46A1-A898-9FA4B0D4665A\" sourceRef=\"p001\" targetRef=\"task1\"></sequenceFlow>\n    <userTask id=\"task3\" name=\"ç”¨æˆ·ä»»åŠ¡ä¸‰\" flowable:assignee=\"wangwu\" flowable:formFieldValidation=\"true\">\n      <extensionElements>\n        <modeler:initiator-can-complete xmlns:modeler=\"http://flowable.org/modeler\"><![CDATA[false]]></modeler:initiator-can-complete>\n      </extensionElements>\n    </userTask>\n    <sequenceFlow id=\"sid-226E06CD-07E8-4E38-A3FC-12CD417F54FC\" sourceRef=\"p001\" targetRef=\"task3\"></sequenceFlow>\n    <sequenceFlow id=\"sid-C1280677-F8B9-4C9C-B010-CEEA4DE17176\" sourceRef=\"start01\" targetRef=\"p001\"></sequenceFlow>\n    <sequenceFlow id=\"sid-F5ABC1D7-091F-4966-990F-44CE1A927869\" sourceRef=\"task1\" targetRef=\"p004\"></sequenceFlow>\n    <sequenceFlow id=\"sid-E1E26394-8B33-4766-9B3B-722958B91972\" sourceRef=\"task2\" targetRef=\"p004\"></sequenceFlow>\n    <endEvent id=\"end003\" name=\"ç»“æŸäº‹ä»¶\"></endEvent>\n    <sequenceFlow id=\"sid-074345F1-5C34-435D-AECE-912DDBBBE105\" sourceRef=\"p004\" targetRef=\"end003\"></sequenceFlow>\n    <exclusiveGateway id=\"p003\" name=\"æ’ä»–ç½‘å…³\"></exclusiveGateway>\n    <endEvent id=\"sid-E9A4380A-AAF8-464C-B14B-15A2C1F1C2D2\" name=\"ç»ˆæ­¢ç»“æŸäº‹ä»¶\">\n      <terminateEventDefinition></terminateEventDefinition>\n    </endEvent>\n    <sequenceFlow id=\"sid-D00B6EDC-F2F4-4D8F-89BD-91272363CD49\" sourceRef=\"task3\" targetRef=\"p003\"></sequenceFlow>\n    <sequenceFlow id=\"sid-325962BF-7168-48C0-9107-B232A4627C10\" sourceRef=\"p003\" targetRef=\"sid-E9A4380A-AAF8-464C-B14B-15A2C1F1C2D2\">\n      <conditionExpression xsi:type=\"tFormalExpression\"><![CDATA[${flag<=0}]]></conditionExpression>\n    </sequenceFlow>\n    <sequenceFlow id=\"sid-413A98AF-8CAF-470C-B751-E32229801310\" sourceRef=\"p003\" targetRef=\"p004\">\n      <conditionExpression xsi:type=\"tFormalExpression\"><![CDATA[${flag>0}]]></conditionExpression>\n    </sequenceFlow>\n  </process>\n  <bpmndi:BPMNDiagram id=\"BPMNDiagram_event5002\">\n    <bpmndi:BPMNPlane bpmnElement=\"event5002\" id=\"BPMNPlane_event5002\">\n      <bpmndi:BPMNShape bpmnElement=\"start01\" id=\"BPMNShape_start01\">\n        <omgdc:Bounds height=\"30.0\" width=\"30.0\" x=\"102.5\" y=\"253.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"p001\" id=\"BPMNShape_p001\">\n        <omgdc:Bounds height=\"40.0\" width=\"40.0\" x=\"287.5\" y=\"248.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"p004\" id=\"BPMNShape_p004\">\n        <omgdc:Bounds height=\"40.0\" width=\"40.0\" x=\"720.0\" y=\"248.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"task2\" id=\"BPMNShape_task2\">\n        <omgdc:Bounds height=\"80.0\" width=\"100.0\" x=\"372.5\" y=\"228.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"task1\" id=\"BPMNShape_task1\">\n        <omgdc:Bounds height=\"80.0\" width=\"100.0\" x=\"372.5\" y=\"105.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"task3\" id=\"BPMNShape_task3\">\n        <omgdc:Bounds height=\"80.0\" width=\"100.0\" x=\"377.5\" y=\"390.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"end003\" id=\"BPMNShape_end003\">\n        <omgdc:Bounds height=\"28.0\" width=\"28.0\" x=\"805.0\" y=\"254.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"p003\" id=\"BPMNShape_p003\">\n        <omgdc:Bounds height=\"40.0\" width=\"40.0\" x=\"570.0\" y=\"410.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"sid-E9A4380A-AAF8-464C-B14B-15A2C1F1C2D2\" id=\"BPMNShape_sid-E9A4380A-AAF8-464C-B14B-15A2C1F1C2D2\">\n        <omgdc:Bounds height=\"28.0\" width=\"28.0\" x=\"576.0\" y=\"495.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNEdge bpmnElement=\"sid-E1E26394-8B33-4766-9B3B-722958B91972\" id=\"BPMNEdge_sid-E1E26394-8B33-4766-9B3B-722958B91972\" flowable:sourceDockerX=\"50.0\" flowable:sourceDockerY=\"40.0\" flowable:targetDockerX=\"7.5\" flowable:targetDockerY=\"19.0\">\n        <omgdi:waypoint x=\"472.4499999999732\" y=\"268.0\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"596.25\" y=\"268.0\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"596.25\" y=\"267.0\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"720.9525123715264\" y=\"267.0\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"sid-226E06CD-07E8-4E38-A3FC-12CD417F54FC\" id=\"BPMNEdge_sid-226E06CD-07E8-4E38-A3FC-12CD417F54FC\" flowable:sourceDockerX=\"20.5\" flowable:sourceDockerY=\"20.5\" flowable:targetDockerX=\"50.0\" flowable:targetDockerY=\"40.0\">\n        <omgdi:waypoint x=\"308.0\" y=\"287.4441367574257\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"308.0\" y=\"430.0\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"377.5\" y=\"430.0\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"sid-325962BF-7168-48C0-9107-B232A4627C10\" id=\"BPMNEdge_sid-325962BF-7168-48C0-9107-B232A4627C10\" flowable:sourceDockerX=\"19.53125\" flowable:sourceDockerY=\"34.5\" flowable:targetDockerX=\"14.0\" flowable:targetDockerY=\"14.0\">\n        <omgdi:waypoint x=\"589.5677159590043\" y=\"449.51771595900436\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"589.8981518165715\" y=\"495.0001397608249\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"sid-F5ABC1D7-091F-4966-990F-44CE1A927869\" id=\"BPMNEdge_sid-F5ABC1D7-091F-4966-990F-44CE1A927869\" flowable:sourceDockerX=\"50.0\" flowable:sourceDockerY=\"40.0\" flowable:targetDockerX=\"20.0\" flowable:targetDockerY=\"1.0\">\n        <omgdi:waypoint x=\"472.44999999982196\" y=\"145.0\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"740.0\" y=\"145.0\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"740.0\" y=\"248.0\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"sid-D00B6EDC-F2F4-4D8F-89BD-91272363CD49\" id=\"BPMNEdge_sid-D00B6EDC-F2F4-4D8F-89BD-91272363CD49\" flowable:sourceDockerX=\"50.0\" flowable:sourceDockerY=\"40.0\" flowable:targetDockerX=\"7.0\" flowable:targetDockerY=\"22.0\">\n        <omgdi:waypoint x=\"477.449999999998\" y=\"430.66822742474915\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"571.9322033898305\" y=\"431.93220338983053\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"sid-E3A5580F-4CE3-4556-894E-46C3D2134071\" id=\"BPMNEdge_sid-E3A5580F-4CE3-4556-894E-46C3D2134071\" flowable:sourceDockerX=\"20.5\" flowable:sourceDockerY=\"20.5\" flowable:targetDockerX=\"50.0\" flowable:targetDockerY=\"40.0\">\n        <omgdi:waypoint x=\"327.0247370727432\" y=\"268.4166666666667\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"372.49999999998806\" y=\"268.2181222707423\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"sid-074345F1-5C34-435D-AECE-912DDBBBE105\" id=\"BPMNEdge_sid-074345F1-5C34-435D-AECE-912DDBBBE105\" flowable:sourceDockerX=\"20.5\" flowable:sourceDockerY=\"20.5\" flowable:targetDockerX=\"14.0\" flowable:targetDockerY=\"14.0\">\n        <omgdi:waypoint x=\"759.5591869398207\" y=\"268.37820512820514\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"805.0002755524882\" y=\"268.08885188426405\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"sid-C1280677-F8B9-4C9C-B010-CEEA4DE17176\" id=\"BPMNEdge_sid-C1280677-F8B9-4C9C-B010-CEEA4DE17176\" flowable:sourceDockerX=\"15.0\" flowable:sourceDockerY=\"15.0\" flowable:targetDockerX=\"20.0\" flowable:targetDockerY=\"20.0\">\n        <omgdi:waypoint x=\"132.44999949366624\" y=\"268.0\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"287.5\" y=\"268.0\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"sid-413A98AF-8CAF-470C-B751-E32229801310\" id=\"BPMNEdge_sid-413A98AF-8CAF-470C-B751-E32229801310\" flowable:sourceDockerX=\"37.5\" flowable:sourceDockerY=\"20.4375\" flowable:targetDockerX=\"22.5\" flowable:targetDockerY=\"31.0\">\n        <omgdi:waypoint x=\"609.5117551813031\" y=\"430.4375\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"742.5\" y=\"430.4375\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"742.5\" y=\"285.402097959858\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"sid-FF8C06ED-AE40-46A1-A898-9FA4B0D4665A\" id=\"BPMNEdge_sid-FF8C06ED-AE40-46A1-A898-9FA4B0D4665A\" flowable:sourceDockerX=\"20.5\" flowable:sourceDockerY=\"20.5\" flowable:targetDockerX=\"50.0\" flowable:targetDockerY=\"40.0\">\n        <omgdi:waypoint x=\"308.0\" y=\"248.5\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"308.0\" y=\"145.0\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"372.5\" y=\"145.0\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n    </bpmndi:BPMNPlane>\n  </bpmndi:BPMNDiagram>\n</definitions>\n```\n\næµç¨‹å®šä¹‰è¯´æ˜ï¼šå¹¶è¡Œç½‘å…³ä¸­3ä¸ªäººå·¥å®¡æ ¸ä»»åŠ¡ï¼Œåˆ†åˆ«åˆ†é…çš„ç”¨æˆ·ä¸ºzhangsan lisi wangwu ï¼Œç„¶ååœ¨wangwuå®¡æ ¸åä¼šè¿›å…¥ä¸€ä¸ªæ’ä»–ç½‘å…³ï¼Œå¦‚æœflagæ˜¯å°äºç­‰äº0å°±ä¼šè§¦å‘ç»ˆæ­¢ç»“æŸäº‹ä»¶ã€‚\n\n```xml\n<sequenceFlow id=\"sid-89945688-1D51-4391-A713-3E77ADB2FA06\" sourceRef=\"p001\" targetRef=\"stop001\">\n      <conditionExpression xsi:type=\"tFormalExpression\"><![CDATA[${flag<=0}]]></conditionExpression>\n    </sequenceFlow>\n```\n\nå…·ä½“æ“ä½œï¼šéƒ¨ç½²æµç¨‹-->å¯åŠ¨æµç¨‹å®ä¾‹-->wanwu å¤„ç†ä»»åŠ¡ã€æµç¨‹å®ä¾‹ flag <= 0ã€‘ è§¦å‘ä»»åŠ¡\n\n```java\n    @Test\n    public void test02() throws Exception{\n\n        Deployment deployment = processEngine.getRepositoryService().createDeployment()\n                .addClasspathResource(\"ç»ˆæ­¢æµç¨‹1.bpmn20.xml\")\n                .name(\"ç»ˆæ­¢æµç¨‹1\")\n                .deploy();\n        System.out.println(\"-----\");\n    }\n```\n\nå¯åŠ¨æµç¨‹å®ä¾‹\n\n```java\n    @Test\n    public void startProcessInstanceByKey()  throws Exception{\n        // è®¾ç½®å¯¹åº”çš„æµç¨‹å˜é‡çš„å€¼\n        Map<String,Object> map = new HashMap<>();\n        map.put(\"flag\",0);// è®¾ç½®flagä¸º0è§¦å‘æµç¨‹ç»“æŸäº‹ä»¶\n        processEngine.getRuntimeService()\n                .startProcessInstanceById(\"event3001:1:8b1663fa-b02d-11ec-b480-c03c59ad2248\",map);\n    }\n```\n\nè¿™æ—¶å¯ä»¥çœ‹åˆ°ä¸‰ä¸ªå¹¶è¡Œçš„Taskä»»åŠ¡ï¼š\n\n![image-20220330213147240](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220330213147240.png)\n\nè¿™æ—¶æˆ‘ä»¬åªéœ€ç‹äº”æ¥å¤„ç†å³å¯ï¼Œåœ¨ä¸Šä¸€æ­¥ä¸­æˆ‘ä»¬å·²ç»å¯¹æµç¨‹å˜é‡èµ‹å€¼äº†\n\n```java\n    @Test\n    public void completeTask(){\n        TaskService taskService = processEngine.getTaskService();\n        Task task = taskService.createTaskQuery()\n                .processDefinitionId(\"event3001:1:8b1663fa-b02d-11ec-b480-c03c59ad2248\")\n                .taskAssignee(\"wangwu\")\n                .singleResult();\n        taskService.complete(task.getId());\n    }\n```\n\nç„¶åå†å»çœ‹Taskè¡¨ä¸­å·²ç»æ²¡æœ‰å¦å¤–ä¸¤æ¡è®°å½•äº†å“¦\n\n![image-20220330213516673](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220330213516673.png)\n\né€šè¿‡æ¡ˆä¾‹å¯ä»¥çœ‹åˆ°åœ¨æ²¡æœ‰å­æµç¨‹çš„æƒ…å†µä¸‹ï¼Œç»ˆæ­¢ç»“æŸäº‹ä»¶ä¼šæŠŠæ•´ä¸ªæµç¨‹éƒ½è¿›ç¨‹éƒ½ç»“æŸäº†ï¼Œè€Œä¸”åœ¨å†å²è®°å½•ä¸­ä¹Ÿå¯ä»¥çœ‹åˆ°ä¿¡æ¯\n\n![image-20220330215127129](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220330215127129.png)\n\n\n\n#### æ¡ˆä¾‹äºŒ\n\nç„¶åæˆ‘ä»¬æ¥çœ‹çœ‹åœ¨å­æµç¨‹ä¸­è§¦å‘ç»ˆæ­¢ç»“æŸäº‹ä»¶çš„æ¡ˆä¾‹ï¼š\n\n![image-20220330220208085](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220330220208085.png)\n\nå®Œæ•´çš„xmlå†…å®¹ï¼š\n\n```xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<definitions xmlns=\"http://www.omg.org/spec/BPMN/20100524/MODEL\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:flowable=\"http://flowable.org/bpmn\" xmlns:bpmndi=\"http://www.omg.org/spec/BPMN/20100524/DI\" xmlns:omgdc=\"http://www.omg.org/spec/DD/20100524/DC\" xmlns:omgdi=\"http://www.omg.org/spec/DD/20100524/DI\" typeLanguage=\"http://www.w3.org/2001/XMLSchema\" expressionLanguage=\"http://www.w3.org/1999/XPath\" targetNamespace=\"http://www.flowable.org/processdef\" exporter=\"Flowable Open Source Modeler\" exporterVersion=\"6.7.2\">\n  <process id=\"event3002\" name=\"ç»ˆæ­¢æµç¨‹2\" isExecutable=\"true\">\n    <startEvent id=\"start01\" name=\"ä»»åŠ¡å¼€å§‹\" flowable:formFieldValidation=\"true\"></startEvent>\n    <userTask id=\"task2\" name=\"ç”¨æˆ·ä»»åŠ¡äºŒ\" flowable:assignee=\"lisi\" flowable:formFieldValidation=\"true\">\n      <extensionElements>\n        <modeler:initiator-can-complete xmlns:modeler=\"http://flowable.org/modeler\"><![CDATA[false]]></modeler:initiator-can-complete>\n      </extensionElements>\n    </userTask>\n    <sequenceFlow id=\"sid-03E93AD6-F173-454F-B29F-B61FE45BE1E0\" sourceRef=\"b001\" targetRef=\"task2\"></sequenceFlow>\n    <userTask id=\"task1\" name=\"ç”¨æˆ·ä»»åŠ¡ä¸€\" flowable:assignee=\"zhangsan\" flowable:formFieldValidation=\"true\">\n      <extensionElements>\n        <modeler:initiator-can-complete xmlns:modeler=\"http://flowable.org/modeler\"><![CDATA[false]]></modeler:initiator-can-complete>\n      </extensionElements>\n    </userTask>\n    <sequenceFlow id=\"sid-A4455D52-7DAF-4193-9E4F-D75E133A6EDD\" sourceRef=\"b001\" targetRef=\"task1\"></sequenceFlow>\n    <subProcess id=\"sid-7A5C1ACB-D07C-407D-83BB-C55D04425AC7\" name=\"subProcess\">\n      <startEvent id=\"cstart01\" name=\"å­æµç¨‹å¼€å§‹\" flowable:formFieldValidation=\"true\"></startEvent>\n      <userTask id=\"taskc01\" name=\"å­äººå·¥ä»»åŠ¡ä¸€\" flowable:assignee=\"user1\" flowable:formFieldValidation=\"true\">\n        <extensionElements>\n          <modeler:initiator-can-complete xmlns:modeler=\"http://flowable.org/modeler\"><![CDATA[false]]></modeler:initiator-can-complete>\n        </extensionElements>\n      </userTask>\n      <exclusiveGateway id=\"p001\" name=\"æ’ä»–ç½‘å…³\"></exclusiveGateway>\n      <userTask id=\"taskc02\" name=\"å­äººå·¥ä»»åŠ¡äºŒ\" flowable:assignee=\"user2\" flowable:formFieldValidation=\"true\">\n        <extensionElements>\n          <modeler:initiator-can-complete xmlns:modeler=\"http://flowable.org/modeler\"><![CDATA[false]]></modeler:initiator-can-complete>\n        </extensionElements>\n      </userTask>\n      <endEvent id=\"endc01\" name=\"å­æµç¨‹ç»“æŸ\"></endEvent>\n      <endEvent id=\"sid-BD67523C-DDDA-46B8-A788-C54769B081B1\">\n        <terminateEventDefinition></terminateEventDefinition>\n      </endEvent>\n      <sequenceFlow id=\"sid-2E0A3425-3C34-4771-85C0-C8C7B7D7BFF5\" sourceRef=\"cstart01\" targetRef=\"taskc01\"></sequenceFlow>\n      <sequenceFlow id=\"sid-B0777673-C3BE-488B-87B2-34A71CEE2C73\" sourceRef=\"taskc01\" targetRef=\"p001\"></sequenceFlow>\n      <sequenceFlow id=\"sid-3C938AB5-2FDF-4C0B-AED8-15853AB07FE8\" sourceRef=\"taskc02\" targetRef=\"endc01\"></sequenceFlow>\n      <sequenceFlow id=\"sid-AAC6E950-F7BD-454A-9105-F43E5D4530A1\" sourceRef=\"p001\" targetRef=\"sid-BD67523C-DDDA-46B8-A788-C54769B081B1\">\n        <conditionExpression xsi:type=\"tFormalExpression\"><![CDATA[${flag<=0}]]></conditionExpression>\n      </sequenceFlow>\n      <sequenceFlow id=\"sid-EFCAE414-03A4-4313-B97A-4BF962888C37\" sourceRef=\"p001\" targetRef=\"taskc02\">\n        <conditionExpression xsi:type=\"tFormalExpression\"><![CDATA[${flag>0}]]></conditionExpression>\n      </sequenceFlow>\n    </subProcess>\n    <parallelGateway id=\"b001\" name=\"å¹¶è¡Œç½‘å…³\"></parallelGateway>\n    <sequenceFlow id=\"sid-D87CB0F6-EF35-479A-80A7-5FDACF1022E1\" sourceRef=\"start01\" targetRef=\"b001\"></sequenceFlow>\n    <parallelGateway id=\"b002\" name=\"å¹¶è¡Œç½‘å…³\"></parallelGateway>\n    <sequenceFlow id=\"sid-200E2768-DCA0-4FAD-A3C0-2D69938379A2\" sourceRef=\"task2\" targetRef=\"b002\"></sequenceFlow>\n    <sequenceFlow id=\"sid-A554CEA8-FD95-4EA4-BED3-EA748273D775\" sourceRef=\"sid-7A5C1ACB-D07C-407D-83BB-C55D04425AC7\" targetRef=\"b002\"></sequenceFlow>\n    <sequenceFlow id=\"sid-C5FB6E94-3563-49C8-9BA2-C0C80670E9FD\" sourceRef=\"task1\" targetRef=\"b002\"></sequenceFlow>\n    <endEvent id=\"end003\" name=\"ç»“æŸäº‹ä»¶\"></endEvent>\n    <sequenceFlow id=\"sid-679D7677-4828-4BCF-9F2E-CBC426D4B72B\" sourceRef=\"b002\" targetRef=\"end003\"></sequenceFlow>\n    <sequenceFlow id=\"sid-0264CAD1-386A-4A4F-ADDA-DCF62EE90594\" sourceRef=\"b001\" targetRef=\"sid-7A5C1ACB-D07C-407D-83BB-C55D04425AC7\"></sequenceFlow>\n  </process>\n  <bpmndi:BPMNDiagram id=\"BPMNDiagram_event3002\">\n    <bpmndi:BPMNPlane bpmnElement=\"event3002\" id=\"BPMNPlane_event3002\">\n      <bpmndi:BPMNShape bpmnElement=\"start01\" id=\"BPMNShape_start01\">\n        <omgdc:Bounds height=\"30.0\" width=\"30.0\" x=\"75.0\" y=\"200.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"task2\" id=\"BPMNShape_task2\">\n        <omgdc:Bounds height=\"80.0\" width=\"100.0\" x=\"420.0\" y=\"175.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"task1\" id=\"BPMNShape_task1\">\n        <omgdc:Bounds height=\"80.0\" width=\"100.0\" x=\"420.0\" y=\"15.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"sid-7A5C1ACB-D07C-407D-83BB-C55D04425AC7\" id=\"BPMNShape_sid-7A5C1ACB-D07C-407D-83BB-C55D04425AC7\">\n        <omgdc:Bounds height=\"187.0\" width=\"531.0\" x=\"285.0\" y=\"330.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"cstart01\" id=\"BPMNShape_cstart01\">\n        <omgdc:Bounds height=\"30.0\" width=\"30.0\" x=\"322.5\" y=\"410.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"taskc01\" id=\"BPMNShape_taskc01\">\n        <omgdc:Bounds height=\"80.0\" width=\"100.0\" x=\"390.0\" y=\"385.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"p001\" id=\"BPMNShape_p001\">\n        <omgdc:Bounds height=\"40.0\" width=\"40.0\" x=\"542.5\" y=\"405.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"taskc02\" id=\"BPMNShape_taskc02\">\n        <omgdc:Bounds height=\"80.0\" width=\"100.0\" x=\"627.5\" y=\"385.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"endc01\" id=\"BPMNShape_endc01\">\n        <omgdc:Bounds height=\"28.0\" width=\"28.0\" x=\"765.0\" y=\"411.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"sid-BD67523C-DDDA-46B8-A788-C54769B081B1\" id=\"BPMNShape_sid-BD67523C-DDDA-46B8-A788-C54769B081B1\">\n        <omgdc:Bounds height=\"28.0\" width=\"28.0\" x=\"548.5\" y=\"480.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"b001\" id=\"BPMNShape_b001\">\n        <omgdc:Bounds height=\"40.0\" width=\"40.0\" x=\"165.0\" y=\"195.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"b002\" id=\"BPMNShape_b002\">\n        <omgdc:Bounds height=\"40.0\" width=\"40.0\" x=\"867.5\" y=\"195.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"end003\" id=\"BPMNShape_end003\">\n        <omgdc:Bounds height=\"28.0\" width=\"28.0\" x=\"960.0\" y=\"207.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNEdge bpmnElement=\"sid-EFCAE414-03A4-4313-B97A-4BF962888C37\" id=\"BPMNEdge_sid-EFCAE414-03A4-4313-B97A-4BF962888C37\" flowable:sourceDockerX=\"20.5\" flowable:sourceDockerY=\"20.5\" flowable:targetDockerX=\"50.0\" flowable:targetDockerY=\"40.0\">\n        <omgdi:waypoint x=\"582.0247370727355\" y=\"425.41666666666663\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"627.4999999999881\" y=\"425.2181222707423\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"sid-3C938AB5-2FDF-4C0B-AED8-15853AB07FE8\" id=\"BPMNEdge_sid-3C938AB5-2FDF-4C0B-AED8-15853AB07FE8\" flowable:sourceDockerX=\"50.0\" flowable:sourceDockerY=\"40.0\" flowable:targetDockerX=\"14.0\" flowable:targetDockerY=\"14.0\">\n        <omgdi:waypoint x=\"727.4499999997752\" y=\"425.0\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"765.0\" y=\"425.0\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"sid-2E0A3425-3C34-4771-85C0-C8C7B7D7BFF5\" id=\"BPMNEdge_sid-2E0A3425-3C34-4771-85C0-C8C7B7D7BFF5\" flowable:sourceDockerX=\"15.0\" flowable:sourceDockerY=\"15.0\" flowable:targetDockerX=\"50.0\" flowable:targetDockerY=\"40.0\">\n        <omgdi:waypoint x=\"352.449998261009\" y=\"425.0\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"390.0\" y=\"425.0\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"sid-A554CEA8-FD95-4EA4-BED3-EA748273D775\" id=\"BPMNEdge_sid-A554CEA8-FD95-4EA4-BED3-EA748273D775\" flowable:sourceDockerX=\"265.5\" flowable:sourceDockerY=\"93.5\" flowable:targetDockerX=\"20.5\" flowable:targetDockerY=\"20.5\">\n        <omgdi:waypoint x=\"815.95\" y=\"423.5\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"888.0\" y=\"423.5\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"888.0\" y=\"234.40453342953353\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"sid-AAC6E950-F7BD-454A-9105-F43E5D4530A1\" id=\"BPMNEdge_sid-AAC6E950-F7BD-454A-9105-F43E5D4530A1\" flowable:sourceDockerX=\"20.5\" flowable:sourceDockerY=\"20.5\" flowable:targetDockerX=\"14.0\" flowable:targetDockerY=\"14.0\">\n        <omgdi:waypoint x=\"562.8602941176471\" y=\"444.5752202643172\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"562.6018221538329\" y=\"480.0003662069823\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"sid-200E2768-DCA0-4FAD-A3C0-2D69938379A2\" id=\"BPMNEdge_sid-200E2768-DCA0-4FAD-A3C0-2D69938379A2\" flowable:sourceDockerX=\"50.0\" flowable:sourceDockerY=\"40.0\" flowable:targetDockerX=\"20.5\" flowable:targetDockerY=\"20.5\">\n        <omgdi:waypoint x=\"519.949999999999\" y=\"215.05974880382777\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"867.97604790418\" y=\"215.4760479041916\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"sid-B0777673-C3BE-488B-87B2-34A71CEE2C73\" id=\"BPMNEdge_sid-B0777673-C3BE-488B-87B2-34A71CEE2C73\" flowable:sourceDockerX=\"50.0\" flowable:sourceDockerY=\"40.0\" flowable:targetDockerX=\"20.5\" flowable:targetDockerY=\"20.5\">\n        <omgdi:waypoint x=\"489.9499999999965\" y=\"425.2030487804878\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"542.9183673469388\" y=\"425.4183673469388\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"sid-679D7677-4828-4BCF-9F2E-CBC426D4B72B\" id=\"BPMNEdge_sid-679D7677-4828-4BCF-9F2E-CBC426D4B72B\" flowable:sourceDockerX=\"20.5\" flowable:sourceDockerY=\"20.5\" flowable:targetDockerX=\"14.0\" flowable:targetDockerY=\"14.0\">\n        <omgdi:waypoint x=\"906.92933478735\" y=\"215.5\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"933.75\" y=\"215.5\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"933.75\" y=\"221.0\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"960.0\" y=\"221.0\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"sid-D87CB0F6-EF35-479A-80A7-5FDACF1022E1\" id=\"BPMNEdge_sid-D87CB0F6-EF35-479A-80A7-5FDACF1022E1\" flowable:sourceDockerX=\"15.0\" flowable:sourceDockerY=\"15.0\" flowable:targetDockerX=\"20.0\" flowable:targetDockerY=\"20.0\">\n        <omgdi:waypoint x=\"104.94999797575196\" y=\"215.0\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"165.0\" y=\"215.0\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"sid-0264CAD1-386A-4A4F-ADDA-DCF62EE90594\" id=\"BPMNEdge_sid-0264CAD1-386A-4A4F-ADDA-DCF62EE90594\" flowable:sourceDockerX=\"22.5\" flowable:sourceDockerY=\"32.015625\" flowable:targetDockerX=\"1.1773835920177385\" flowable:targetDockerY=\"93.5\">\n        <omgdi:waypoint x=\"187.5\" y=\"232.44861780088067\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"187.5\" y=\"423.5\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"285.0\" y=\"423.5\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"sid-03E93AD6-F173-454F-B29F-B61FE45BE1E0\" id=\"BPMNEdge_sid-03E93AD6-F173-454F-B29F-B61FE45BE1E0\" flowable:sourceDockerX=\"20.5\" flowable:sourceDockerY=\"20.5\" flowable:targetDockerX=\"50.0\" flowable:targetDockerY=\"40.0\">\n        <omgdi:waypoint x=\"204.4800158394907\" y=\"215.46654929577466\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"419.99999999998107\" y=\"215.08778558875218\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"sid-A4455D52-7DAF-4193-9E4F-D75E133A6EDD\" id=\"BPMNEdge_sid-A4455D52-7DAF-4193-9E4F-D75E133A6EDD\" flowable:sourceDockerX=\"20.5\" flowable:sourceDockerY=\"20.5\" flowable:targetDockerX=\"50.0\" flowable:targetDockerY=\"40.0\">\n        <omgdi:waypoint x=\"185.5\" y=\"195.5\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"185.5\" y=\"55.0\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"420.0\" y=\"55.0\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"sid-C5FB6E94-3563-49C8-9BA2-C0C80670E9FD\" id=\"BPMNEdge_sid-C5FB6E94-3563-49C8-9BA2-C0C80670E9FD\" flowable:sourceDockerX=\"50.0\" flowable:sourceDockerY=\"40.0\" flowable:targetDockerX=\"20.0\" flowable:targetDockerY=\"13.7109375\">\n        <omgdi:waypoint x=\"519.95\" y=\"55.0\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"887.5\" y=\"55.0\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"887.5\" y=\"195.0\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n    </bpmndi:BPMNPlane>\n  </bpmndi:BPMNDiagram>\n</definitions>\n```\n\næµç¨‹è¯´æ˜ï¼šäººå·¥ä»»åŠ¡ä¸€ -->zhangsan  äººå·¥ä»»åŠ¡äºŒ -->lisi  å­äººå·¥ä»»åŠ¡ä¸€ ï¼š user1 å­äººå·¥ä»»åŠ¡äºŒ ï¼š user2\n\nå­ä»»åŠ¡å®Œæˆä»»åŠ¡å¦‚æœflag<=0,é‚£ä¹ˆå­æµç¨‹ä¸­æ–­ç»“æŸï¼Œå­äººå·¥ä»»åŠ¡äºŒä¸ä¼šè§¦å‘\n\néƒ¨ç½²æµç¨‹\n\n```java\n    @Test\n    public void test02() throws Exception{\n\n        Deployment deployment = processEngine.getRepositoryService().createDeployment()\n                .addClasspathResource(\"ç»ˆæ­¢æµç¨‹2.bpmn20.xml\")\n                .name(\"ç»ˆæ­¢æµç¨‹2\")\n                .deploy();\n        System.out.println(\"-----\");\n    }\n```\n\nç„¶åå¯åŠ¨æµç¨‹\n\n```java\n    @Test\n    public void startProcessInstanceByKey()  throws Exception{\n        // è®¾ç½®å¯¹åº”çš„æµç¨‹å˜é‡çš„å€¼\n        Map<String,Object> map = new HashMap<>();\n        map.put(\"flag\",0);// è®¾ç½®flagä¸º0è§¦å‘æµç¨‹ç»“æŸäº‹ä»¶\n        processEngine.getRuntimeService()\n                .startProcessInstanceById(\"event3002:1:92679bec-b03d-11ec-901e-c03c59ad2248\",map);\n    }\n```\n\nè¿™æ—¶åœ¨ACT_RU_TASKä¸­å°±åº”è¯¥æœ‰ä¸‰æ¡å¯¹åº”çš„TASKè®°å½•äº†\n\n![image-20220330232643286](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220330232643286.png)\n\nç„¶åæˆ‘ä»¬æ‰§è¡Œ`user1`çš„å­ä»»åŠ¡ï¼Œå› ä¸ºç°åœ¨æµç¨‹å˜é‡`flag=0`æ‰€ä»¥ä¼šè§¦å‘ç»ˆæ­¢ç»“æŸäº‹ä»¶\n\n![image-20220330232801450](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220330232801450.png)\n\næ‰§è¡Œä»»åŠ¡ï¼š\n\n```java\n    @Test\n    public void completeTask(){\n        TaskService taskService = processEngine.getTaskService();\n        Task task = taskService.createTaskQuery()\n                .processDefinitionId(\"event3002:1:92679bec-b03d-11ec-901e-c03c59ad2248\")\n                .taskAssignee(\"user1\")\n                .singleResult();\n        taskService.complete(task.getId());\n    }\n```\n\næ‰§è¡ŒæˆåŠŸåæˆ‘ä»¬å¯ä»¥å‘ç°å­äººå·¥ä»»åŠ¡ä¸€æ²¡æœ‰äº†ï¼Œä½†æ˜¯ä¹Ÿæ²¡æœ‰å­äººå·¥ä»»åŠ¡äºŒï¼Œä½†æ˜¯ä¸»æµç¨‹ä¸­çš„ä¸¤ä¸ªä»»åŠ¡éƒ½è¿˜åœ¨\n\n![image-20220330232959807](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220330232959807.png)\n\nè€Œä¸”è¿›å…¥åˆ°å†å²æ•°æ®ä¸­ä¹Ÿå¯ä»¥çœ‹åˆ°\n\n![image-20220330233448096](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220330233448096.png)\n\n\n\n\n\n### å–æ¶ˆç»“æŸäº‹ä»¶\n\nå–æ¶ˆç»“æŸäº‹ä»¶ï¼ˆcancel end eventï¼‰åªèƒ½ä¸BPMNäº‹åŠ¡å­æµç¨‹ï¼ˆBPMN transaction subprocessï¼‰ä¸€èµ·ä½¿ç”¨ã€‚å½“åˆ°è¾¾å–æ¶ˆç»“æŸäº‹ä»¶æ—¶ï¼Œä¼šæŠ›å‡ºå–æ¶ˆäº‹ä»¶ï¼Œä¸”å¿…é¡»ç”±å–æ¶ˆè¾¹ç•Œäº‹ä»¶ï¼ˆcancel boundary eventï¼‰æ•è·ã€‚å–æ¶ˆè¾¹ç•Œäº‹ä»¶å°†å–æ¶ˆäº‹åŠ¡ï¼Œå¹¶è§¦å‘è¡¥å¿ï¼ˆcompensationï¼‰ã€‚\n\nå…·ä½“é€šè¿‡æ¡ˆä¾‹æ¥è®²è§£ï¼š\n\n![image-20220401110131810](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220401110131810.png)\n\n\n\nç»“æŸå–æ¶ˆäº‹ä»¶æˆ‘ä»¬åªèƒ½åœ¨äº‹åŠ¡å­æµç¨‹ä¸­ä½¿ç”¨ï¼Œåœ¨FlowableUIä¸­æš‚æ—¶æ²¡æœ‰æ‰¾åˆ°è¿™ä¸ªç»„ä»¶ï¼Œæ‰€ä»¥åœ¨Eclipseä¸­æ¥ç»˜åˆ¶\n\n![image-20220401110621048](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220401110621048.png)\n\n\n\nå®Œæ•´çš„xmlæ–‡ä»¶\n\n```xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<definitions xmlns=\"http://www.omg.org/spec/BPMN/20100524/MODEL\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:activiti=\"http://activiti.org/bpmn\" xmlns:bpmndi=\"http://www.omg.org/spec/BPMN/20100524/DI\" xmlns:omgdc=\"http://www.omg.org/spec/DD/20100524/DC\" xmlns:omgdi=\"http://www.omg.org/spec/DD/20100524/DI\" typeLanguage=\"http://www.w3.org/2001/XMLSchema\" expressionLanguage=\"http://www.w3.org/1999/XPath\" targetNamespace=\"http://www.activiti.org/test\">\n  <process id=\"myProcess\" name=\"My process\" isExecutable=\"true\">\n    <startEvent id=\"startevent1\" name=\"Start\"></startEvent>\n    <transaction id=\"transaction1\" name=\"Transaction\">\n      <startEvent id=\"startevent2\" name=\"äº‹åŠ¡å­æµç¨‹å¼€å§‹\"></startEvent>\n      <userTask id=\"usertask1\" name=\"äººå·¥ä»»åŠ¡ä¸€\" activiti:assignee=\"zhangsan\"></userTask>\n      <sequenceFlow id=\"flow2\" sourceRef=\"startevent2\" targetRef=\"usertask1\"></sequenceFlow>\n      <exclusiveGateway id=\"exclusivegateway1\" name=\"æ’ä»–ç½‘å…³\"></exclusiveGateway>\n      <sequenceFlow id=\"flow3\" sourceRef=\"usertask1\" targetRef=\"exclusivegateway1\"></sequenceFlow>\n      <userTask id=\"usertask2\" name=\"äººå·¥ä»»åŠ¡äºŒ\" activiti:assignee=\"lisi\"></userTask>\n      <sequenceFlow id=\"flow4\" sourceRef=\"exclusivegateway1\" targetRef=\"usertask2\">\n        <conditionExpression xsi:type=\"tFormalExpression\"><![CDATA[${flag>0}]]></conditionExpression>\n      </sequenceFlow>\n      <endEvent id=\"endevent1\" name=\"äº‹åŠ¡å­æµç¨‹ç»“æŸ\"></endEvent>\n      <sequenceFlow id=\"flow5\" sourceRef=\"usertask2\" targetRef=\"endevent1\"></sequenceFlow>\n      <endEvent id=\"cancelendevent1\" name=\"å–æ¶ˆç»“æŸäº‹ä»¶\">\n        <cancelEventDefinition></cancelEventDefinition>\n      </endEvent>\n      <sequenceFlow id=\"flow6\" sourceRef=\"exclusivegateway1\" targetRef=\"cancelendevent1\">\n        <conditionExpression xsi:type=\"tFormalExpression\"><![CDATA[${flag<=0}]]></conditionExpression>\n      </sequenceFlow>\n      <boundaryEvent id=\"boundarycompensation1\" name=\"Compensate\" attachedToRef=\"usertask1\" cancelActivity=\"true\">\n        <compensateEventDefinition></compensateEventDefinition>\n      </boundaryEvent>\n      <serviceTask id=\"servicetask5\" name=\"è¡¥å¿è‡ªåŠ¨ä»»åŠ¡\" isForCompensation=\"true\" activiti:class=\"com.bobo.delegate.MyOneDelegate\"></serviceTask>\n      <association id=\"association1\" sourceRef=\"boundarycompensation1\" targetRef=\"servicetask5\" associationDirection=\"None\"></association>\n    </transaction>\n    <sequenceFlow id=\"flow1\" sourceRef=\"startevent1\" targetRef=\"transaction1\"></sequenceFlow>\n    <boundaryEvent id=\"boundarycancel1\" name=\"å–æ¶ˆè¾¹ç•Œäº‹ä»¶\" attachedToRef=\"transaction1\" cancelActivity=\"true\">\n      <cancelEventDefinition></cancelEventDefinition>\n    </boundaryEvent>\n    <serviceTask id=\"servicetask3\" name=\"å–æ¶ˆäº‹ä»¶ç»“æŸ\" activiti:class=\"com.bobo.delegate.MyThreeDelegate\"></serviceTask>\n    <sequenceFlow id=\"flow8\" sourceRef=\"boundarycancel1\" targetRef=\"servicetask3\"></sequenceFlow>\n    <endEvent id=\"endevent2\" name=\"å–æ¶ˆäº‹ä»¶ç»“æŸ\"></endEvent>\n    <sequenceFlow id=\"flow9\" sourceRef=\"servicetask3\" targetRef=\"endevent2\"></sequenceFlow>\n    <serviceTask id=\"servicetask4\" name=\"æ­£å¸¸ç»“æŸä»»åŠ¡\" activiti:class=\"com.bobo.delegate.MyTwoDelegate\"></serviceTask>\n    <sequenceFlow id=\"flow10\" sourceRef=\"transaction1\" targetRef=\"servicetask4\"></sequenceFlow>\n    <endEvent id=\"endevent3\" name=\"End\"></endEvent>\n    <sequenceFlow id=\"flow11\" sourceRef=\"servicetask4\" targetRef=\"endevent3\"></sequenceFlow>\n  </process>\n  <bpmndi:BPMNDiagram id=\"BPMNDiagram_myProcess\">\n    <bpmndi:BPMNPlane bpmnElement=\"myProcess\" id=\"BPMNPlane_myProcess\">\n      <bpmndi:BPMNShape bpmnElement=\"startevent1\" id=\"BPMNShape_startevent1\">\n        <omgdc:Bounds height=\"35.0\" width=\"35.0\" x=\"248.0\" y=\"390.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"transaction1\" id=\"BPMNShape_transaction1\">\n        <omgdc:Bounds height=\"291.0\" width=\"761.0\" x=\"371.0\" y=\"262.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"startevent2\" id=\"BPMNShape_startevent2\">\n        <omgdc:Bounds height=\"35.0\" width=\"35.0\" x=\"431.0\" y=\"382.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"usertask1\" id=\"BPMNShape_usertask1\">\n        <omgdc:Bounds height=\"55.0\" width=\"105.0\" x=\"511.0\" y=\"372.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"boundarycompensation1\" id=\"BPMNShape_boundarycompensation1\">\n        <omgdc:Bounds height=\"30.0\" width=\"30.0\" x=\"581.0\" y=\"412.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"exclusivegateway1\" id=\"BPMNShape_exclusivegateway1\">\n        <omgdc:Bounds height=\"40.0\" width=\"40.0\" x=\"661.0\" y=\"380.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"usertask2\" id=\"BPMNShape_usertask2\">\n        <omgdc:Bounds height=\"55.0\" width=\"105.0\" x=\"746.0\" y=\"373.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"endevent1\" id=\"BPMNShape_endevent1\">\n        <omgdc:Bounds height=\"35.0\" width=\"35.0\" x=\"896.0\" y=\"383.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"cancelendevent1\" id=\"BPMNShape_cancelendevent1\">\n        <omgdc:Bounds height=\"35.0\" width=\"35.0\" x=\"664.0\" y=\"472.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"servicetask5\" id=\"BPMNShape_servicetask5\">\n        <omgdc:Bounds height=\"55.0\" width=\"105.0\" x=\"511.0\" y=\"472.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"boundarycancel1\" id=\"BPMNShape_boundarycancel1\">\n        <omgdc:Bounds height=\"30.0\" width=\"30.0\" x=\"871.0\" y=\"542.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"servicetask3\" id=\"BPMNShape_servicetask3\">\n        <omgdc:Bounds height=\"55.0\" width=\"105.0\" x=\"980.0\" y=\"640.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"endevent2\" id=\"BPMNShape_endevent2\">\n        <omgdc:Bounds height=\"35.0\" width=\"35.0\" x=\"1130.0\" y=\"650.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"servicetask4\" id=\"BPMNShape_servicetask4\">\n        <omgdc:Bounds height=\"55.0\" width=\"105.0\" x=\"1291.0\" y=\"391.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape bpmnElement=\"endevent3\" id=\"BPMNShape_endevent3\">\n        <omgdc:Bounds height=\"35.0\" width=\"35.0\" x=\"1450.0\" y=\"401.0\"></omgdc:Bounds>\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNEdge bpmnElement=\"flow2\" id=\"BPMNEdge_flow2\">\n        <omgdi:waypoint x=\"466.0\" y=\"399.0\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"511.0\" y=\"399.0\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"flow3\" id=\"BPMNEdge_flow3\">\n        <omgdi:waypoint x=\"616.0\" y=\"399.0\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"661.0\" y=\"400.0\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"flow4\" id=\"BPMNEdge_flow4\">\n        <omgdi:waypoint x=\"701.0\" y=\"400.0\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"746.0\" y=\"400.0\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"flow5\" id=\"BPMNEdge_flow5\">\n        <omgdi:waypoint x=\"851.0\" y=\"400.0\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"896.0\" y=\"400.0\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"flow6\" id=\"BPMNEdge_flow6\">\n        <omgdi:waypoint x=\"681.0\" y=\"420.0\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"681.0\" y=\"472.0\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"association1\" id=\"BPMNEdge_association1\">\n        <omgdi:waypoint x=\"596.0\" y=\"442.0\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"563.0\" y=\"472.0\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"flow1\" id=\"BPMNEdge_flow1\">\n        <omgdi:waypoint x=\"283.0\" y=\"407.0\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"371.0\" y=\"407.0\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"flow8\" id=\"BPMNEdge_flow8\">\n        <omgdi:waypoint x=\"886.0\" y=\"572.0\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"1032.0\" y=\"640.0\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"flow9\" id=\"BPMNEdge_flow9\">\n        <omgdi:waypoint x=\"1085.0\" y=\"667.0\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"1130.0\" y=\"667.0\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"flow10\" id=\"BPMNEdge_flow10\">\n        <omgdi:waypoint x=\"1132.0\" y=\"407.0\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"1291.0\" y=\"418.0\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge bpmnElement=\"flow11\" id=\"BPMNEdge_flow11\">\n        <omgdi:waypoint x=\"1396.0\" y=\"418.0\"></omgdi:waypoint>\n        <omgdi:waypoint x=\"1450.0\" y=\"418.0\"></omgdi:waypoint>\n      </bpmndi:BPMNEdge>\n    </bpmndi:BPMNPlane>\n  </bpmndi:BPMNDiagram>\n</definitions>\n```\n\n\n\næµç¨‹è¯´æ˜ï¼šæµç¨‹ä¸­å®šä¹‰äº†ä¸€ä¸ªäº‹åŠ¡å­æµç¨‹å’Œä¸¤ä¸ªè‡ªåŠ¨ä»»åŠ¡\n\n![image-20220401111036816](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220401111036816.png)\n\n\n\n\n\nç„¶ååœ¨äº‹åŠ¡å­æµç¨‹ä¸­å®šä¹‰äº†ä¸¤ä¸ªäººå·¥ä»»åŠ¡ç”¨ä¸€ä¸ªæ’ä»–ç½‘å…³è¿æ¥ï¼Œflag<=0 çš„æƒ…å†µä¸‹ä¼šè§¦å‘ å–æ¶ˆç»“æŸäº‹ä»¶\n\n![image-20220401111201815](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220401111201815.png)\n\n\n\nè§¦å‘å–æ¶ˆç»“æŸäº‹ä»¶ååŒæ—¶ä¼šè¢«å–æ¶ˆè¾¹ç•Œäº‹ä»¶æ•è·è€Œèµ° å–æ¶ˆäº‹ä»¶ç»“æŸçš„è‡ªåŠ¨ä»»åŠ¡\n\n![image-20220401111316353](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220401111316353.png)\n\n\n\nåŒæ—¶è‡ªåŠ¨è¡¥å¿ä»»åŠ¡ä¹Ÿä¼šè§¦å‘ï¼Œå…³è”çš„è‡ªåŠ¨ä»»åŠ¡ä¹Ÿä¼šè§¦å‘\n\n![image-20220401111351513](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220401111351513.png)\n\næ³¨æ„åœ¨è®¾ç½®çš„æ—¶å€™éœ€è¦è®¾ç½®è¡¥å¿è‡ªåŠ¨ä»»åŠ¡ä¸ºå¯è¡¥å¿çš„\n\n![image-20220401111438577](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220401111438577.png)\n\nè¡¥å¿è‡ªåŠ¨ä»»åŠ¡ç»‘å®šçš„JavaDelegateï¼š\n\n```java\npublic class MyOneDelegate implements JavaDelegate {\n    @Override\n    public void execute(DelegateExecution execution) {\n\n        System.out.println(\"å®Œæˆè‡ªåŠ¨å®¡æ‰¹ä»»åŠ¡-----ã€‹MyOneDelegate\" + LocalDateTime.now().toString());\n    }\n}\n```\n\næ­£å¸¸ç»“æŸä»»åŠ¡ç»‘å®šçš„JavaDelegate:\n\n```java\npublic class MyTwoDelegate implements JavaDelegate {\n    @Override\n    public void execute(DelegateExecution execution) {\n        System.out.println(\"MyTwoDelegate---->æ‰§è¡Œäº†\" + LocalDateTime.now().toString());\n    }\n}\n```\n\nå–æ¶ˆäº‹ä»¶ç»“æŸç»‘å®šçš„JavaDelegate\n\n```java\npublic class MyThreeDelegate implements JavaDelegate {\n    @Override\n    public void execute(DelegateExecution execution) {\n        System.out.println(\"MyThreeDelegate---->æ‰§è¡Œäº†\" + LocalDateTime.now().toString());\n    }\n}\n```\n\nç„¶åæˆ‘ä»¬éƒ¨ç½²ï¼Œå¯åŠ¨ï¼Œå’Œæ‰§è¡Œæµç¨‹ï¼Œçœ‹è¾“å‡ºæƒ…å†µ\n\n```java\n    /**\n     * éƒ¨ç½²æµç¨‹\n     * @throws Exception\n     */\n    @Test\n    public void deploy() throws Exception{\n        Deployment deployment = processEngine.getRepositoryService().createDeployment()\n                .addClasspathResource(\"å–æ¶ˆç»“æŸäº‹ä»¶.bpmn20.xml\")\n                .name(\"å–æ¶ˆç»“æŸäº‹ä»¶\")\n                .deploy();\n        System.out.println(\"-----\");\n    }\n\n    /**\n     * å¯åŠ¨æµç¨‹å®ä¾‹,è®¾ç½®æµç¨‹å˜é‡ä¸­çš„flag=0è§¦å‘å–æ¶ˆç»“æŸäº‹ä»¶\n     */\n    @Test\n    public void startProcessInstanceByKey()  throws Exception{\n        // è®¾ç½®å¯¹åº”çš„æµç¨‹å˜é‡çš„å€¼\n        Map<String,Object> map = new HashMap<>();\n        map.put(\"flag\",0);// è®¾ç½®flagä¸º0è§¦å‘æµç¨‹ç»“æŸäº‹ä»¶\n        processEngine.getRuntimeService()\n                .startProcessInstanceById(\"myProcess:3:effb46cf-b168-11ec-926f-c03c59ad2248\",map);\n    }\n\n    /**\n     * å®Œæˆä»»åŠ¡\n     */\n    @Test\n    public void completeTask(){\n        TaskService taskService = processEngine.getTaskService();\n        Task task = taskService.createTaskQuery()\n                .processDefinitionId(\"myProcess:3:effb46cf-b168-11ec-926f-c03c59ad2248\")\n                .taskAssignee(\"zhangsan\")\n                .singleResult();\n        taskService.complete(task.getId());\n    }\n```\n\n\n\nè¾“å‡ºç»“æœï¼š\n\n![image-20220401111758140](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220401111758140.png)\n\n\n\nè¾“å‡ºç»“æœæ˜¯æ»¡è¶³æˆ‘ä»¬çš„æœŸæœ›çš„ã€‚\n\n\n\n### è¡¥å¿äº‹ä»¶\n\né€šè¿‡è¡¥å¿è¾¾åˆ°æ§åˆ¶ä¸šåŠ¡æµç¨‹çš„ç›®çš„å°±æ˜¯è¡¥å¿äº‹ä»¶ï¼Œæ¯”å¦‚æˆ‘ä»¬æ­£å¸¸çš„ä¹°æœºç¥¨çš„æµç¨‹ä¸‹è®¢å•è´­ä¹°ï¼Œç„¶ååŒæ—¶å¼¹å‡ºæ”¯ä»˜æµç¨‹é¡µé¢ã€‚æ”¯ä»˜æˆåŠŸåå°±å¯ä»¥ç­‰å¾…å‡ºç¥¨äº†ï¼Œä½†æ˜¯å¦‚æœæˆ‘ä»¬æ”¯ä»˜å¤±è´¥çš„è¯ï¼Œè¿™æ—¶è¦ä¹ˆé‡æ–°æ”¯ä»˜ï¼Œæ›´æ¢æ”¯ä»˜æ–¹å¼æˆ–è€…å–æ¶ˆé¢„è®¢ï¼Œè¿™æ—¶å–æ¶ˆé¢„è®¢æˆ‘ä»¬å°±å¯ä»¥é€šè¿‡è¡¥å¿äº‹ä»¶æ¥å®ç°ï¼Œå…·ä½“çš„æ¡ˆä¾‹å¦‚ä¸‹ï¼š\n\n![image-20220401202116847](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220401202116847.png)\n\nå®Œæ•´çš„xmlæ–‡ä»¶ï¼š\n\n```xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<definitions xmlns=\"http://www.omg.org/spec/BPMN/20100524/MODEL\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:activiti=\"http://activiti.org/bpmn\" xmlns:bpmndi=\"http://www.omg.org/spec/BPMN/20100524/DI\" xmlns:omgdc=\"http://www.omg.org/spec/DD/20100524/DC\" xmlns:omgdi=\"http://www.omg.org/spec/DD/20100524/DI\" typeLanguage=\"http://www.w3.org/2001/XMLSchema\" expressionLanguage=\"http://www.w3.org/1999/XPath\" targetNamespace=\"http://www.activiti.org/test\">\n    <error id=\"payFail\" errorCode=\"payFail\" ></error>\n    <process id=\"myProcess\" name=\"My process\" isExecutable=\"true\">\n        <startEvent id=\"startevent1\" name=\"å¼€å§‹äº‹ä»¶\"></startEvent>\n        <parallelGateway id=\"parallelgateway1\" name=\"å¹¶è¡Œç½‘å…³\"></parallelGateway>\n        <sequenceFlow id=\"flow1\" sourceRef=\"startevent1\" targetRef=\"parallelgateway1\"></sequenceFlow>\n        <serviceTask id=\"servicetask1\" name=\"é¢„è®¢æœºç¥¨\" activiti:class=\"com.bobo.delegate.MyTwoDelegate\"></serviceTask>\n        <serviceTask id=\"servicetask2\" name=\"å¾®ä¿¡æ”¯ä»˜\" activiti:class=\"com.bobo.delegate.MyOneDelegate\"></serviceTask>\n        <userTask id=\"usertask1\" name=\"äººå·¥å‡ºç¥¨\" activiti:assignee=\"zhangsan\"></userTask>\n        <sequenceFlow id=\"flow2\" sourceRef=\"servicetask1\" targetRef=\"usertask1\"></sequenceFlow>\n        <parallelGateway id=\"parallelgateway2\" name=\"Parallel Gateway\"></parallelGateway>\n        <sequenceFlow id=\"flow3\" sourceRef=\"usertask1\" targetRef=\"parallelgateway2\"></sequenceFlow>\n        <sequenceFlow id=\"flow4\" sourceRef=\"parallelgateway1\" targetRef=\"servicetask1\"></sequenceFlow>\n        <sequenceFlow id=\"flow5\" sourceRef=\"parallelgateway1\" targetRef=\"servicetask2\"></sequenceFlow>\n        <sequenceFlow id=\"flow6\" sourceRef=\"servicetask2\" targetRef=\"parallelgateway2\"></sequenceFlow>\n        <serviceTask id=\"servicetask3\" name=\"å–æ¶ˆé¢„è®¢\" isForCompensation=\"true\" activiti:class=\"com.bobo.delegate.MyThreeDelegate\"></serviceTask>\n        <boundaryEvent id=\"boundarycompensation1\" name=\"è¡¥å¿è¾¹ç•Œäº‹ä»¶\" attachedToRef=\"servicetask1\" cancelActivity=\"true\">\n            <compensateEventDefinition></compensateEventDefinition>\n        </boundaryEvent>\n        <boundaryEvent id=\"boundaryerror1\" name=\"é”™è¯¯è¾¹ç•Œäº‹ä»¶\" attachedToRef=\"servicetask2\">\n            <errorEventDefinition errorRef=\"payFail\"></errorEventDefinition>\n        </boundaryEvent>\n        <intermediateThrowEvent id=\"compensationintermediatethrowevent1\" name=\"è¡¥å¿æŠ›å‡ºä¸­é—´äº‹ä»¶\">\n            <compensateEventDefinition></compensateEventDefinition>\n        </intermediateThrowEvent>\n        <sequenceFlow id=\"flow7\" sourceRef=\"boundaryerror1\" targetRef=\"compensationintermediatethrowevent1\"></sequenceFlow>\n        <endEvent id=\"endevent1\" name=\"End\"></endEvent>\n        <sequenceFlow id=\"flow8\" sourceRef=\"compensationintermediatethrowevent1\" targetRef=\"endevent1\"></sequenceFlow>\n        <endEvent id=\"endevent2\" name=\"End\"></endEvent>\n        <sequenceFlow id=\"flow9\" sourceRef=\"parallelgateway2\" targetRef=\"endevent2\"></sequenceFlow>\n        <association id=\"association1\" sourceRef=\"boundarycompensation1\" targetRef=\"servicetask3\" associationDirection=\"None\"></association>\n    </process>\n    <bpmndi:BPMNDiagram id=\"BPMNDiagram_myProcess\">\n        <bpmndi:BPMNPlane bpmnElement=\"myProcess\" id=\"BPMNPlane_myProcess\">\n            <bpmndi:BPMNShape bpmnElement=\"startevent1\" id=\"BPMNShape_startevent1\">\n                <omgdc:Bounds height=\"35.0\" width=\"35.0\" x=\"160.0\" y=\"360.0\"></omgdc:Bounds>\n            </bpmndi:BPMNShape>\n            <bpmndi:BPMNShape bpmnElement=\"parallelgateway1\" id=\"BPMNShape_parallelgateway1\">\n                <omgdc:Bounds height=\"40.0\" width=\"40.0\" x=\"380.0\" y=\"357.0\"></omgdc:Bounds>\n            </bpmndi:BPMNShape>\n            <bpmndi:BPMNShape bpmnElement=\"servicetask1\" id=\"BPMNShape_servicetask1\">\n                <omgdc:Bounds height=\"55.0\" width=\"105.0\" x=\"580.0\" y=\"220.0\"></omgdc:Bounds>\n            </bpmndi:BPMNShape>\n            <bpmndi:BPMNShape bpmnElement=\"boundarycompensation1\" id=\"BPMNShape_boundarycompensation1\">\n                <omgdc:Bounds height=\"30.0\" width=\"30.0\" x=\"650.0\" y=\"270.0\"></omgdc:Bounds>\n            </bpmndi:BPMNShape>\n            <bpmndi:BPMNShape bpmnElement=\"servicetask2\" id=\"BPMNShape_servicetask2\">\n                <omgdc:Bounds height=\"55.0\" width=\"105.0\" x=\"580.0\" y=\"450.0\"></omgdc:Bounds>\n            </bpmndi:BPMNShape>\n            <bpmndi:BPMNShape bpmnElement=\"boundaryerror1\" id=\"BPMNShape_boundaryerror1\">\n                <omgdc:Bounds height=\"30.0\" width=\"30.0\" x=\"650.0\" y=\"490.0\"></omgdc:Bounds>\n            </bpmndi:BPMNShape>\n            <bpmndi:BPMNShape bpmnElement=\"usertask1\" id=\"BPMNShape_usertask1\">\n                <omgdc:Bounds height=\"55.0\" width=\"105.0\" x=\"820.0\" y=\"220.0\"></omgdc:Bounds>\n            </bpmndi:BPMNShape>\n            <bpmndi:BPMNShape bpmnElement=\"parallelgateway2\" id=\"BPMNShape_parallelgateway2\">\n                <omgdc:Bounds height=\"40.0\" width=\"40.0\" x=\"1140.0\" y=\"336.0\"></omgdc:Bounds>\n            </bpmndi:BPMNShape>\n            <bpmndi:BPMNShape bpmnElement=\"servicetask3\" id=\"BPMNShape_servicetask3\">\n                <omgdc:Bounds height=\"55.0\" width=\"105.0\" x=\"830.0\" y=\"336.0\"></omgdc:Bounds>\n            </bpmndi:BPMNShape>\n            <bpmndi:BPMNShape bpmnElement=\"compensationintermediatethrowevent1\" id=\"BPMNShape_compensationintermediatethrowevent1\">\n                <omgdc:Bounds height=\"35.0\" width=\"35.0\" x=\"740.0\" y=\"590.0\"></omgdc:Bounds>\n            </bpmndi:BPMNShape>\n            <bpmndi:BPMNShape bpmnElement=\"endevent1\" id=\"BPMNShape_endevent1\">\n                <omgdc:Bounds height=\"35.0\" width=\"35.0\" x=\"820.0\" y=\"590.0\"></omgdc:Bounds>\n            </bpmndi:BPMNShape>\n            <bpmndi:BPMNShape bpmnElement=\"endevent2\" id=\"BPMNShape_endevent2\">\n                <omgdc:Bounds height=\"35.0\" width=\"35.0\" x=\"1225.0\" y=\"339.0\"></omgdc:Bounds>\n            </bpmndi:BPMNShape>\n            <bpmndi:BPMNEdge bpmnElement=\"flow1\" id=\"BPMNEdge_flow1\">\n                <omgdi:waypoint x=\"195.0\" y=\"377.0\"></omgdi:waypoint>\n                <omgdi:waypoint x=\"380.0\" y=\"377.0\"></omgdi:waypoint>\n            </bpmndi:BPMNEdge>\n            <bpmndi:BPMNEdge bpmnElement=\"flow2\" id=\"BPMNEdge_flow2\">\n                <omgdi:waypoint x=\"685.0\" y=\"247.0\"></omgdi:waypoint>\n                <omgdi:waypoint x=\"820.0\" y=\"247.0\"></omgdi:waypoint>\n            </bpmndi:BPMNEdge>\n            <bpmndi:BPMNEdge bpmnElement=\"flow3\" id=\"BPMNEdge_flow3\">\n                <omgdi:waypoint x=\"925.0\" y=\"247.0\"></omgdi:waypoint>\n                <omgdi:waypoint x=\"1160.0\" y=\"247.0\"></omgdi:waypoint>\n                <omgdi:waypoint x=\"1160.0\" y=\"336.0\"></omgdi:waypoint>\n            </bpmndi:BPMNEdge>\n            <bpmndi:BPMNEdge bpmnElement=\"flow4\" id=\"BPMNEdge_flow4\">\n                <omgdi:waypoint x=\"400.0\" y=\"357.0\"></omgdi:waypoint>\n                <omgdi:waypoint x=\"400.0\" y=\"247.0\"></omgdi:waypoint>\n                <omgdi:waypoint x=\"580.0\" y=\"247.0\"></omgdi:waypoint>\n            </bpmndi:BPMNEdge>\n            <bpmndi:BPMNEdge bpmnElement=\"flow5\" id=\"BPMNEdge_flow5\">\n                <omgdi:waypoint x=\"400.0\" y=\"397.0\"></omgdi:waypoint>\n                <omgdi:waypoint x=\"400.0\" y=\"477.0\"></omgdi:waypoint>\n                <omgdi:waypoint x=\"580.0\" y=\"477.0\"></omgdi:waypoint>\n            </bpmndi:BPMNEdge>\n            <bpmndi:BPMNEdge bpmnElement=\"flow6\" id=\"BPMNEdge_flow6\">\n                <omgdi:waypoint x=\"685.0\" y=\"477.0\"></omgdi:waypoint>\n                <omgdi:waypoint x=\"1160.0\" y=\"477.0\"></omgdi:waypoint>\n                <omgdi:waypoint x=\"1160.0\" y=\"376.0\"></omgdi:waypoint>\n            </bpmndi:BPMNEdge>\n            <bpmndi:BPMNEdge bpmnElement=\"flow7\" id=\"BPMNEdge_flow7\">\n                <omgdi:waypoint x=\"665.0\" y=\"520.0\"></omgdi:waypoint>\n                <omgdi:waypoint x=\"664.0\" y=\"607.0\"></omgdi:waypoint>\n                <omgdi:waypoint x=\"740.0\" y=\"607.0\"></omgdi:waypoint>\n            </bpmndi:BPMNEdge>\n            <bpmndi:BPMNEdge bpmnElement=\"flow8\" id=\"BPMNEdge_flow8\">\n                <omgdi:waypoint x=\"775.0\" y=\"607.0\"></omgdi:waypoint>\n                <omgdi:waypoint x=\"820.0\" y=\"607.0\"></omgdi:waypoint>\n            </bpmndi:BPMNEdge>\n            <bpmndi:BPMNEdge bpmnElement=\"flow9\" id=\"BPMNEdge_flow9\">\n                <omgdi:waypoint x=\"1180.0\" y=\"356.0\"></omgdi:waypoint>\n                <omgdi:waypoint x=\"1225.0\" y=\"356.0\"></omgdi:waypoint>\n            </bpmndi:BPMNEdge>\n            <bpmndi:BPMNEdge bpmnElement=\"association1\" id=\"BPMNEdge_association1\">\n                <omgdi:waypoint x=\"665.0\" y=\"300.0\"></omgdi:waypoint>\n                <omgdi:waypoint x=\"664.0\" y=\"363.0\"></omgdi:waypoint>\n                <omgdi:waypoint x=\"830.0\" y=\"363.0\"></omgdi:waypoint>\n            </bpmndi:BPMNEdge>\n        </bpmndi:BPMNPlane>\n    </bpmndi:BPMNDiagram>\n</definitions>\n```\n\næµç¨‹è¯´æ˜ï¼š\n\n\n\n![image-20220401202447583](https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220401202447583.png)\n\nå¾®ä¿¡æ”¯ä»˜ç»‘å®šçš„JavaDelegateï¼š\n\n```java\npublic class MyOneDelegate implements JavaDelegate {\n    @Override\n    public void execute(DelegateExecution execution) {\n\n        System.out.println(\"å¾®ä¿¡æ”¯ä»˜-----ã€‹MyOneDelegate\" + LocalDateTime.now().toString());\n        System.out.println(\"ä½™é¢ä¸è¶³....\");\n        throw  new BpmnError(\"payFail\");\n    }\n}\n```\n\né¢„è®¢æœºç¥¨ç»‘å®šçš„JavaDelegate\n\n```java\npublic class MyTwoDelegate implements JavaDelegate {\n    @Override\n    public void execute(DelegateExecution execution) {\n        System.out.println(\"MyTwoDelegate---->é¢„è®¢æœºç¥¨æµç¨‹æ‰§è¡Œäº†\" + LocalDateTime.now().toString());\n    }\n}\n```\n\nå–æ¶ˆè®¢å•ç»‘å®šçš„javaDelegate:\n\n```java\npublic class MyThreeDelegate implements JavaDelegate {\n    @Override\n    public void execute(DelegateExecution execution) {\n        System.out.println(\"MyThreeDelegate---->æœºç¥¨é¢„è®¢å–æ¶ˆäº†....\" + LocalDateTime.now().toString());\n    }\n}\n```\n\næ•´ä¸ªæµç¨‹æ‰§è¡Œçš„è¿‡ç¨‹æ˜¯ï¼šä»»åŠ¡å¼€å§‹åä¼šå¹¶è¡Œçš„æ‰§è¡Œæœºç¥¨é¢„è®¢å’Œå¾®ä¿¡æ”¯ä»˜ï¼Œç„¶ååœ¨å¾®ä¿¡æ”¯ä»˜æ˜¯æŠ›å‡ºpayFailé”™è¯¯ï¼ŒåŒæ—¶é”™è¯¯è¾¹ç•Œäº‹ä»¶ä¼šæ•è·åˆ°è¿™ä¸ªé”™è¯¯ï¼Œç„¶åæ‰§è¡Œåˆ° è¡¥å¿æŠ›å‡ºä¸­é—´äº‹ä»¶ï¼Œä¹‹ååœ¨æœºç¥¨é¢„è®¢çš„ è¡¥å¿è¾¹ç•Œäº‹ä»¶ è¢«è§¦å‘ï¼Œå¯¹åº”çš„è¡¥å¿è§¦å‘å™¨ä¼šæ‰§è¡Œå¯¹åº”çš„ä»£ç ã€‚ ç„¶åæˆ‘ä»¬éƒ¨ç½²åŠ å¯åŠ¨æµç¨‹åè§‚å¯Ÿæ§åˆ¶å°çš„è¾“å‡ºï¼š\n\n```java\n    /**\n     * éƒ¨ç½²æµç¨‹\n     * @throws Exception\n     */\n    @Test\n    public void deploy() throws Exception{\n        Deployment deployment = processEngine.getRepositoryService().createDeployment()\n                .addClasspathResource(\"è¡¥å¿äº‹ä»¶.bpmn20.xml\")\n                .name(\"è¡¥å¿äº‹ä»¶\")\n                .deploy();\n    }\n\n    /**\n     * å¯åŠ¨æµç¨‹å®ä¾‹\n     */\n    @Test\n    public void startProcessInstanceByKey()  throws Exception{\n        processEngine.getRuntimeService()\n                .startProcessInstanceById(\"myProcess:4:a45abe9f-b1b5-11ec-9daf-c03c59ad2248\");\n    }\n```\n\næ§åˆ¶å°è¾“å‡ºï¼š\n\n```txt\nMyTwoDelegate---->é¢„è®¢æœºç¥¨æµç¨‹æ‰§è¡Œäº†2022-04-01T20:17:44.985\nå¾®ä¿¡æ”¯ä»˜-----ã€‹MyOneDelegate2022-04-01T20:17:44.987\nä½™é¢ä¸è¶³....\nMyThreeDelegate---->æœºç¥¨é¢„è®¢å–æ¶ˆäº†....2022-04-01T20:17:45.028\n```\n\nè¾“å‡ºçš„ç»“æœå’Œæˆ‘ä»¬å‰é¢è®¾è®¡çš„æ˜¯ä¸€æ ·çš„ï¼Œæå®š~\n\n","slug":"flowableé«˜çº§ç¯‡","published":1,"updated":"2022-11-05T14:16:59.513Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clas9ert0000ydk8f9qtnbesv","content":"<h1 id=\"flowableé«˜çº§ç¯‡\"><a href=\"#flowableé«˜çº§ç¯‡\" class=\"headerlink\" title=\"flowableé«˜çº§ç¯‡\"></a>flowableé«˜çº§ç¯‡</h1><blockquote>\n<p>lectureï¼šæ³¢æ³¢è€å¸ˆ</p>\n</blockquote>\n<h1 id=\"ä»»åŠ¡åˆ†é…å’Œæµç¨‹å˜é‡\"><a href=\"#ä»»åŠ¡åˆ†é…å’Œæµç¨‹å˜é‡\" class=\"headerlink\" title=\"ä»»åŠ¡åˆ†é…å’Œæµç¨‹å˜é‡\"></a>ä»»åŠ¡åˆ†é…å’Œæµç¨‹å˜é‡</h1><h2 id=\"ä»»åŠ¡åˆ†é…\"><a href=\"#ä»»åŠ¡åˆ†é…\" class=\"headerlink\" title=\"ä»»åŠ¡åˆ†é…\"></a>ä»»åŠ¡åˆ†é…</h2><h3 id=\"å›ºå®šåˆ†é…\"><a href=\"#å›ºå®šåˆ†é…\" class=\"headerlink\" title=\"å›ºå®šåˆ†é…\"></a>å›ºå®šåˆ†é…</h3><p>å›ºå®šåˆ†é…å°±æ˜¯æˆ‘ä»¬å‰é¢ä»‹ç»çš„ï¼Œåœ¨ç»˜åˆ¶æµç¨‹å›¾æˆ–è€…ç›´æ¥åœ¨æµç¨‹æ–‡ä»¶ä¸­é€šè¿‡Assigneeæ¥æŒ‡å®šçš„æ–¹å¼</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220322205919319.png\"\n                      alt=\"image-20220322205919319\"\n                ></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220322210018615.png\"\n                      alt=\"image-20220322210018615\"\n                ></p>\n<h3 id=\"è¡¨è¾¾å¼åˆ†é…\"><a href=\"#è¡¨è¾¾å¼åˆ†é…\" class=\"headerlink\" title=\"è¡¨è¾¾å¼åˆ†é…\"></a>è¡¨è¾¾å¼åˆ†é…</h3><p>Flowableä½¿ç”¨UELè¿›è¡Œè¡¨è¾¾å¼è§£æã€‚UELä»£è¡¨<em>Unified Expression Language</em>ï¼Œæ˜¯EE6è§„èŒƒçš„ä¸€éƒ¨åˆ†.Flowableæ”¯æŒä¸¤ç§UELè¡¨è¾¾å¼ï¼š UEL-value å’ŒUEL-method</p>\n<h4 id=\"å€¼è¡¨è¾¾å¼\"><a href=\"#å€¼è¡¨è¾¾å¼\" class=\"headerlink\" title=\"å€¼è¡¨è¾¾å¼\"></a>å€¼è¡¨è¾¾å¼</h4><p><strong>å€¼è¡¨è¾¾å¼ Value expression</strong>: è§£æä¸ºä¸€ä¸ªå€¼ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œæ‰€æœ‰æµç¨‹å˜é‡éƒ½å¯ä»¥ä½¿ç”¨ã€‚ï¼ˆè‹¥ä½¿ç”¨Springï¼‰æ‰€æœ‰çš„Spring beanä¹Ÿå¯ä»¥ç”¨åœ¨è¡¨è¾¾å¼é‡Œã€‚ä¾‹å¦‚</p>\n<figure class=\"highlight txt\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$&#123;myVar&#125;</span><br><span class=\"line\">$&#123;myBean.myProperty&#125;</span><br></pre></td></tr></table></figure>\n\n<p>æ¡ˆä¾‹è®²è§£ï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220322212342245.png\"\n                      alt=\"image-20220322212342245\"\n                ></p>\n<p>å¯ä»¥çœ‹åˆ°é€šè¿‡è¡¨è¾¾å¼å¤„ç†çš„æ•ˆæœ</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220322212431304.png\"\n                      alt=\"image-20220322212431304\"\n                ></p>\n<p>å…ˆéƒ¨ç½²æµç¨‹ï¼Œç„¶ååœ¨å¯åŠ¨æµç¨‹å®ä¾‹çš„æ—¶å€™ç»‘å®šè¡¨è¾¾å¼å¯¹åº”çš„å€¼</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * å¯åŠ¨æµç¨‹å®ä¾‹</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">testRunProcess</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// è·å–æµç¨‹å¼•æ“å¯¹è±¡</span></span><br><span class=\"line\">        <span class=\"type\">ProcessEngine</span> <span class=\"variable\">processEngine</span> <span class=\"operator\">=</span> ProcessEngines.getDefaultProcessEngine();</span><br><span class=\"line\">        <span class=\"comment\">// å¯åŠ¨æµç¨‹å®ä¾‹é€šè¿‡ RuntimeService å¯¹è±¡</span></span><br><span class=\"line\">        <span class=\"type\">RuntimeService</span> <span class=\"variable\">runtimeService</span> <span class=\"operator\">=</span> processEngine.getRuntimeService();</span><br><span class=\"line\">        <span class=\"comment\">// è®¾ç½® assignee çš„å–å€¼</span></span><br><span class=\"line\">        Map&lt;String,Object&gt; variables = <span class=\"keyword\">new</span> <span class=\"title class_\">HashMap</span>&lt;&gt;();</span><br><span class=\"line\">        variables.put(<span class=\"string\">&quot;assignee0&quot;</span>,<span class=\"string\">&quot;å¼ ä¸‰&quot;</span>) ;</span><br><span class=\"line\">        variables.put(<span class=\"string\">&quot;assignee1&quot;</span>,<span class=\"string\">&quot;æå››&quot;</span>); </span><br><span class=\"line\">        <span class=\"comment\">// å¯åŠ¨æµç¨‹å®ä¾‹ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æµç¨‹å®šä¹‰çš„id</span></span><br><span class=\"line\">        <span class=\"type\">ProcessInstance</span> <span class=\"variable\">processInstance</span> <span class=\"operator\">=</span> runtimeService</span><br><span class=\"line\">                .startProcessInstanceById(<span class=\"string\">&quot;MyHolidayUI:1:4&quot;</span>, variables);<span class=\"comment\">// å¯åŠ¨æµç¨‹å®ä¾‹</span></span><br><span class=\"line\">        <span class=\"comment\">// è¾“å‡ºç›¸å…³çš„æµç¨‹å®ä¾‹ä¿¡æ¯</span></span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;æµç¨‹å®šä¹‰çš„IDï¼š&quot;</span> + processInstance.getProcessDefinitionId());</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;æµç¨‹å®ä¾‹çš„IDï¼š&quot;</span> + processInstance.getId());</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;å½“å‰æ´»åŠ¨çš„IDï¼š&quot;</span> + processInstance.getActivityId());</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n\n<p>åœ¨æµç¨‹å˜é‡è¡¨ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°å¯¹åº”çš„æµç¨‹å˜é‡ä¿¡æ¯</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220322213558754.png\"\n                      alt=\"image-20220322213558754\"\n                ></p>\n<p>åŒæ—¶åœ¨Taskè¡¨ä¸­ï¼Œå¯ä»¥çœ‹åˆ°æµç¨‹å½“å‰çš„åˆ†é…äººæ˜¯<code>å¼ ä¸‰</code>ï¼Œè¯´æ˜UELè¡¨è¾¾å¼è¢«è§£æäº†</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220322213655020.png\"\n                      alt=\"image-20220322213655020\"\n                ></p>\n<h4 id=\"æ–¹æ³•è¡¨è¾¾å¼\"><a href=\"#æ–¹æ³•è¡¨è¾¾å¼\" class=\"headerlink\" title=\"æ–¹æ³•è¡¨è¾¾å¼\"></a>æ–¹æ³•è¡¨è¾¾å¼</h4><p><strong>æ–¹æ³•è¡¨è¾¾å¼ Method expression</strong>: è°ƒç”¨ä¸€ä¸ªæ–¹æ³•ï¼Œå¯ä»¥å¸¦æˆ–ä¸å¸¦å‚æ•°ã€‚<strong>å½“è°ƒç”¨ä¸å¸¦å‚æ•°çš„æ–¹æ³•æ—¶ï¼Œè¦ç¡®ä¿åœ¨æ–¹æ³•ååæ·»åŠ ç©ºæ‹¬å·ï¼ˆä»¥é¿å…ä¸å€¼è¡¨è¾¾å¼æ··æ·†ï¼‰ã€‚</strong>ä¼ é€’çš„å‚æ•°å¯ä»¥æ˜¯å­—é¢å€¼(literal value)ï¼Œä¹Ÿå¯ä»¥æ˜¯è¡¨è¾¾å¼ï¼Œå®ƒä»¬ä¼šè¢«è‡ªåŠ¨è§£æã€‚ä¾‹å¦‚ï¼š</p>\n<figure class=\"highlight txt\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$&#123;printer.print()&#125;</span><br><span class=\"line\">$&#123;myBean.addNewOrder(&#x27;orderName&#x27;)&#125;</span><br><span class=\"line\">$&#123;myBean.doSomething(myVar, execution)&#125;</span><br></pre></td></tr></table></figure>\n\n<p>myBeanæ˜¯Springå®¹å™¨ä¸­çš„ä¸ªBeanå¯¹è±¡ï¼Œè¡¨ç¤ºè°ƒç”¨çš„æ˜¯beançš„addNewOrderæ–¹æ³•</p>\n<h3 id=\"ç›‘å¬å™¨åˆ†é…\"><a href=\"#ç›‘å¬å™¨åˆ†é…\" class=\"headerlink\" title=\"ç›‘å¬å™¨åˆ†é…\"></a>ç›‘å¬å™¨åˆ†é…</h3><p>å¯ä»¥ä½¿ç”¨ç›‘å¬å™¨æ¥å®Œæˆå¾ˆå¤šFlowableçš„æµç¨‹ä¸šåŠ¡ã€‚</p>\n<p>æˆ‘ä»¬åœ¨æ­¤å¤„ä½¿ç”¨ç›‘å¬å™¨æ¥å®Œæˆè´Ÿè´£äººçš„æŒ‡å®šï¼Œé‚£ä¹ˆæˆ‘ä»¬åœ¨æµç¨‹è®¾è®¡çš„æ—¶å€™å°±ä¸éœ€è¦æŒ‡å®šassignee</p>\n<p>åˆ›å»ºè‡ªå®šä¹‰ç›‘å¬å™¨ï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * è‡ªå®šä¹‰çš„ç›‘å¬å™¨</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">MyTaskListener</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">TaskListener</span> &#123;</span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">notify</span><span class=\"params\">(DelegateTask delegateTask)</span> &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;ç›‘å¬å™¨è§¦å‘äº†ï¼š&quot;</span> + delegateTask.getName());</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(<span class=\"string\">&quot;æäº¤è¯·å‡æµç¨‹&quot;</span>.equals(delegateTask.getName()) &amp;&amp;</span><br><span class=\"line\">                <span class=\"string\">&quot;create&quot;</span>.equals(delegateTask.getEventName()))&#123;</span><br><span class=\"line\">            <span class=\"comment\">// æŒ‡å®šä»»åŠ¡çš„è´Ÿè´£äºº</span></span><br><span class=\"line\">            delegateTask.setAssignee(<span class=\"string\">&quot;å°æ˜&quot;</span>);</span><br><span class=\"line\">        &#125;<span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            delegateTask.setAssignee(<span class=\"string\">&quot;å°å¼ &quot;</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<p>ç„¶ååœ¨FlowableUIä¸­å…³è”å¯¹åº”çš„ç›‘å¬å™¨</p>\n<figure class=\"highlight txt\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">create:ä»»åŠ¡åˆ›å»ºåè§¦å‘</span><br><span class=\"line\">assignment:ä»»åŠ¡åˆ†é…åè§¦å‘</span><br><span class=\"line\">Delete:ä»»åŠ¡å®Œæˆåè§¦å‘</span><br><span class=\"line\">Allï¼šæ‰€æœ‰äº‹ä»¶éƒ½è§¦å‘</span><br></pre></td></tr></table></figure>\n\n\n\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220322214807416.png\"\n                      alt=\"image-20220322214807416\"\n                ></p>\n<p>ç„¶åæˆ‘ä»¬å…ˆéƒ¨ç½²æµç¨‹ï¼Œç„¶åæ‰§è¡ŒæŸ¥çœ‹æ•ˆæœï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220322215711211.png\"\n                      alt=\"image-20220322215711211\"\n                ></p>\n<p>ç„¶ååœ¨Taskè¡¨ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°å¯¹åº”çš„åˆ†é…äººä¸º<code>å°æ˜</code>è¯´æ˜é€šè¿‡ç›‘å¬ä¹Ÿå®Œæˆäº†ä»»åŠ¡åˆ†é…çš„å·¥ä½œäº†</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220322215805734.png\"\n                      alt=\"image-20220322215805734\"\n                ></p>\n<h2 id=\"æµç¨‹å˜é‡\"><a href=\"#æµç¨‹å˜é‡\" class=\"headerlink\" title=\"æµç¨‹å˜é‡\"></a>æµç¨‹å˜é‡</h2><p>æµç¨‹å®ä¾‹æŒ‰æ­¥éª¤æ‰§è¡Œæ—¶ï¼Œéœ€è¦ä½¿ç”¨ä¸€äº›æ•°æ®ã€‚åœ¨Flowableä¸­ï¼Œè¿™äº›æ•°æ®ç§°ä½œ*å˜é‡(variable)*ï¼Œå¹¶ä¼šå­˜å‚¨åœ¨æ•°æ®åº“ä¸­ã€‚å˜é‡å¯ä»¥ç”¨åœ¨è¡¨è¾¾å¼ä¸­ï¼ˆä¾‹å¦‚åœ¨æ’ä»–ç½‘å…³ä¸­ç”¨äºé€‰æ‹©æ­£ç¡®çš„å‡ºå£è·¯å¾„ï¼‰ï¼Œä¹Ÿå¯ä»¥åœ¨JavaæœåŠ¡ä»»åŠ¡(service task)ä¸­ç”¨äºè°ƒç”¨å¤–éƒ¨æœåŠ¡ï¼ˆä¾‹å¦‚ä¸ºæœåŠ¡è°ƒç”¨æä¾›è¾“å…¥æˆ–ç»“æœå­˜å‚¨ï¼‰ï¼Œç­‰ç­‰ã€‚</p>\n<p>æµç¨‹å®ä¾‹å¯ä»¥æŒæœ‰å˜é‡ï¼ˆç§°ä½œ<em>æµç¨‹å˜é‡ process variables</em>ï¼‰ï¼›ç”¨æˆ·ä»»åŠ¡ä»¥åŠ<em>æ‰§è¡Œ(executions)<em>â€”â€”æµç¨‹å½“å‰æ´»åŠ¨èŠ‚ç‚¹çš„æŒ‡é’ˆâ€”â€”ä¹Ÿå¯ä»¥æŒæœ‰å˜é‡ã€‚æµç¨‹å®ä¾‹å¯ä»¥æŒæœ‰ä»»æ„æ•°é‡çš„å˜é‡ï¼Œæ¯ä¸ªå˜é‡å­˜å‚¨ä¸º</em>ACT_RU_VARIABLE</em>æ•°æ®åº“è¡¨çš„ä¸€è¡Œã€‚</p>\n<p>æ‰€æœ‰çš„<em>startProcessInstanceXXX</em>æ–¹æ³•éƒ½æœ‰ä¸€ä¸ªå¯é€‰å‚æ•°ï¼Œç”¨äºåœ¨æµç¨‹å®ä¾‹åˆ›å»ºåŠå¯åŠ¨æ—¶è®¾ç½®å˜é‡ã€‚ä¾‹å¦‚ï¼Œåœ¨<em>RuntimeService</em>ä¸­ï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ProcessInstance <span class=\"title function_\">startProcessInstanceByKey</span><span class=\"params\">(String processDefinitionKey, Map&lt;String, Object&gt; variables)</span>;</span><br></pre></td></tr></table></figure>\n\n<p>ä¹Ÿå¯ä»¥åœ¨æµç¨‹æ‰§è¡Œä¸­åŠ å…¥å˜é‡ã€‚ä¾‹å¦‚ï¼Œ(<em>RuntimeService</em>):</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"title function_\">setVariable</span><span class=\"params\">(String executionId, String variableName, Object value)</span>;</span><br><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"title function_\">setVariableLocal</span><span class=\"params\">(String executionId, String variableName, Object value)</span>;</span><br><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"title function_\">setVariables</span><span class=\"params\">(String executionId, Map&lt;String, ? extends Object&gt; variables)</span>;</span><br><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"title function_\">setVariablesLocal</span><span class=\"params\">(String executionId, Map&lt;String, ? extends Object&gt; variables)</span>;</span><br></pre></td></tr></table></figure>\n\n\n\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220324095243595.png\"\n                      alt=\"image-20220324095243595\"\n                ></p>\n<h3 id=\"å…¨å±€å˜é‡\"><a href=\"#å…¨å±€å˜é‡\" class=\"headerlink\" title=\"å…¨å±€å˜é‡\"></a>å…¨å±€å˜é‡</h3><p>æµç¨‹å˜é‡çš„é»˜è®¤ä½œç”¨åŸŸæ˜¯æµç¨‹å®ä¾‹ã€‚å½“ä¸€ä¸ªæµç¨‹å˜é‡çš„ä½œç”¨åŸŸä¸ºæµç¨‹å®ä¾‹æ—¶ï¼Œå¯ä»¥ç§°ä¸º global å˜é‡</p>\n<p>æ³¨æ„ï¼šå¦‚ï¼š    Globalå˜é‡ï¼šuserIdï¼ˆå˜é‡åï¼‰ã€zhangsanï¼ˆå˜é‡å€¼ï¼‰</p>\n<p>global å˜é‡ä¸­å˜é‡åä¸å…è®¸é‡å¤ï¼Œè®¾ç½®ç›¸åŒåç§°çš„å˜é‡ï¼Œåè®¾ç½®çš„å€¼ä¼šè¦†ç›–å‰è®¾ç½®çš„å˜é‡å€¼ã€‚</p>\n<h3 id=\"å±€éƒ¨å˜é‡\"><a href=\"#å±€éƒ¨å˜é‡\" class=\"headerlink\" title=\"å±€éƒ¨å˜é‡\"></a>å±€éƒ¨å˜é‡</h3><p>ä»»åŠ¡å’Œæ‰§è¡Œå®ä¾‹ä»…ä»…æ˜¯é’ˆå¯¹ä¸€ä¸ªä»»åŠ¡å’Œä¸€ä¸ªæ‰§è¡Œå®ä¾‹èŒƒå›´ï¼ŒèŒƒå›´æ²¡æœ‰æµç¨‹å®ä¾‹å¤§ï¼Œ ç§°ä¸º local å˜é‡ã€‚</p>\n<p>Local å˜é‡ç”±äºåœ¨ä¸åŒçš„ä»»åŠ¡æˆ–ä¸åŒçš„æ‰§è¡Œå®ä¾‹ä¸­ï¼Œä½œç”¨åŸŸäº’ä¸å½±å“ï¼Œå˜é‡åå¯ä»¥ç›¸åŒæ²¡æœ‰å½±å“ã€‚Local å˜é‡åä¹Ÿå¯ä»¥å’Œ global å˜é‡åç›¸åŒï¼Œæ²¡æœ‰å½±å“ã€‚ </p>\n<h3 id=\"æ¡ˆä¾‹è®²è§£\"><a href=\"#æ¡ˆä¾‹è®²è§£\" class=\"headerlink\" title=\"æ¡ˆä¾‹è®²è§£\"></a>æ¡ˆä¾‹è®²è§£</h3><p> éœ€æ±‚ï¼šå‘˜å·¥åˆ›å»ºå‡ºå·®ç”³è¯·å•ï¼Œç”±éƒ¨é—¨ç»ç†å®¡æ ¸ï¼Œéƒ¨é—¨ç»ç†ç”³è¯·é€šè¿‡å3å¤©ä»¥ä¸‹ç”±è´¢åŠ¡ç›´æ¥ç”³æ‰¹ï¼Œ3å¤©ä»¥ä¸Šå…ˆç”±æ€»ç»ç†å®¡æ‰¹ï¼Œæ€»ç»ç†å®¡æ‰¹é€šè¿‡åå†ç”±è´¢åŠ¡å®¡æ‰¹ã€‚</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220324093855618.png\"\n                      alt=\"image-20220324093855618\"\n                ></p>\n<p>è¿æ¥å…ˆè®¾ç½®æ¡ä»¶</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220324093806442.png\"\n                      alt=\"image-20220324093806442\"\n                ></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220324093700631.png\"\n                      alt=\"image-20220324093700631\"\n                ></p>\n<p>éƒ¨ç½²æµç¨‹</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">deploy</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"type\">ProcessEngine</span> <span class=\"variable\">processEngine</span> <span class=\"operator\">=</span> ProcessEngines.getDefaultProcessEngine();</span><br><span class=\"line\">    <span class=\"type\">RepositoryService</span> <span class=\"variable\">repositoryService</span> <span class=\"operator\">=</span> processEngine.getRepositoryService();</span><br><span class=\"line\">    <span class=\"type\">Deployment</span> <span class=\"variable\">deploy</span> <span class=\"operator\">=</span> repositoryService.createDeployment()</span><br><span class=\"line\">        .addClasspathResource(<span class=\"string\">&quot;å‡ºå·®ç”³è¯·å•.bpmn20.xml&quot;</span>)</span><br><span class=\"line\">        .name(<span class=\"string\">&quot;è¯·å‡æµç¨‹...&quot;</span>)</span><br><span class=\"line\">        .category(<span class=\"string\">&quot;è¯·å‡&quot;</span>) <span class=\"comment\">// åˆ†ç±»</span></span><br><span class=\"line\">        .tenantId(<span class=\"string\">&quot;dpb&quot;</span>) <span class=\"comment\">// ç§Ÿæˆ·id</span></span><br><span class=\"line\">        .deploy();</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;deploy.getId() = &quot;</span> + deploy.getId());</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;deploy.getName() = &quot;</span> + deploy.getName());</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;deploy.getCategory() = &quot;</span> + deploy.getCategory());</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<p>å¯åŠ¨æµç¨‹å®ä¾‹ï¼šå¹¶ä¸”æŒ‡å®šå…¨å±€æµç¨‹å˜é‡</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * åœ¨å¯åŠ¨æµç¨‹å®ä¾‹çš„æ—¶å€™è®¾ç½®æµç¨‹å˜é‡</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">runProcess</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// è·å–æµç¨‹å¼•æ“å¯¹è±¡</span></span><br><span class=\"line\">        <span class=\"type\">ProcessEngine</span> <span class=\"variable\">processEngine</span> <span class=\"operator\">=</span> ProcessEngines.getDefaultProcessEngine();</span><br><span class=\"line\">        <span class=\"comment\">// å¯åŠ¨æµç¨‹å®ä¾‹é€šè¿‡ RuntimeService å¯¹è±¡</span></span><br><span class=\"line\">        <span class=\"type\">RuntimeService</span> <span class=\"variable\">runtimeService</span> <span class=\"operator\">=</span> processEngine.getRuntimeService();</span><br><span class=\"line\">        <span class=\"comment\">// è®¾ç½®æµç¨‹å˜é‡</span></span><br><span class=\"line\">        Map&lt;String,Object&gt; variables = <span class=\"keyword\">new</span> <span class=\"title class_\">HashMap</span>&lt;&gt;();</span><br><span class=\"line\">        <span class=\"comment\">// è®¾ç½®assigneeçš„å–å€¼</span></span><br><span class=\"line\">        variables.put(<span class=\"string\">&quot;assignee0&quot;</span>,<span class=\"string\">&quot;å¼ ä¸‰&quot;</span>);</span><br><span class=\"line\">        variables.put(<span class=\"string\">&quot;assignee1&quot;</span>,<span class=\"string\">&quot;æå››&quot;</span>);</span><br><span class=\"line\">        variables.put(<span class=\"string\">&quot;assignee2&quot;</span>,<span class=\"string\">&quot;ç‹äº”&quot;</span>);</span><br><span class=\"line\">        variables.put(<span class=\"string\">&quot;assignee3&quot;</span>,<span class=\"string\">&quot;èµµè´¢åŠ¡&quot;</span>);</span><br><span class=\"line\">        <span class=\"comment\">// å¯åŠ¨æµç¨‹å®ä¾‹ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æµç¨‹å®šä¹‰çš„id</span></span><br><span class=\"line\">        <span class=\"type\">ProcessInstance</span> <span class=\"variable\">processInstance</span> <span class=\"operator\">=</span> runtimeService</span><br><span class=\"line\">                .startProcessInstanceById(<span class=\"string\">&quot;evection:1:4&quot;</span>,variables);<span class=\"comment\">// å¯åŠ¨æµç¨‹å®ä¾‹</span></span><br><span class=\"line\">        <span class=\"comment\">// è¾“å‡ºç›¸å…³çš„æµç¨‹å®ä¾‹ä¿¡æ¯</span></span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;æµç¨‹å®šä¹‰çš„IDï¼š&quot;</span> + processInstance.getProcessDefinitionId());</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;æµç¨‹å®ä¾‹çš„IDï¼š&quot;</span> + processInstance.getId());</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;å½“å‰æ´»åŠ¨çš„IDï¼š&quot;</span> + processInstance.getActivityId());</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n\n<p>å®ŒæˆTaskä»»åŠ¡ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥æŒ‡å®šæµç¨‹å˜é‡</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * å®Œæˆä»»åŠ¡æ—¶æŒ‡å®šæµç¨‹å˜é‡</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">completeTask</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// è·å–æµç¨‹å¼•æ“å¯¹è±¡</span></span><br><span class=\"line\">        <span class=\"type\">ProcessEngine</span> <span class=\"variable\">processEngine</span> <span class=\"operator\">=</span> ProcessEngines.getDefaultProcessEngine();</span><br><span class=\"line\">        <span class=\"type\">TaskService</span> <span class=\"variable\">taskService</span> <span class=\"operator\">=</span> processEngine.getTaskService();</span><br><span class=\"line\">        <span class=\"type\">Task</span> <span class=\"variable\">task</span> <span class=\"operator\">=</span> taskService.createTaskQuery()</span><br><span class=\"line\">                .processDefinitionId(<span class=\"string\">&quot;evection:1:4&quot;</span>)</span><br><span class=\"line\">                .taskAssignee(<span class=\"string\">&quot;æå››&quot;</span>)</span><br><span class=\"line\">                .singleResult();</span><br><span class=\"line\">        <span class=\"comment\">// æ·»åŠ æµç¨‹å˜é‡</span></span><br><span class=\"line\">        Map&lt;String, Object&gt; map = task.getProcessVariables();</span><br><span class=\"line\">        map.put(<span class=\"string\">&quot;num&quot;</span>,<span class=\"number\">4</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// å®Œæˆä»»åŠ¡</span></span><br><span class=\"line\">        taskService.complete(task.getId(),map);</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n\n<p>å½“ç„¶æˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨å¤„ç†æµç¨‹ä¹‹å¤–é€šè¿‡Taskç¼–å·æ¥ä¿®æ”¹æµç¨‹å˜é‡</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * é€šè¿‡å½“å‰ä»»åŠ¡è®¾ç½®</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">currentTask</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">//   å½“å‰å¾…åŠä»»åŠ¡id</span></span><br><span class=\"line\">        <span class=\"comment\">//  è·å–processEngine</span></span><br><span class=\"line\">        <span class=\"type\">ProcessEngine</span> <span class=\"variable\">processEngine</span> <span class=\"operator\">=</span> ProcessEngines.getDefaultProcessEngine();</span><br><span class=\"line\">        <span class=\"type\">TaskService</span> <span class=\"variable\">taskService</span> <span class=\"operator\">=</span> processEngine.getTaskService();</span><br><span class=\"line\">        <span class=\"type\">Task</span> <span class=\"variable\">task</span> <span class=\"operator\">=</span> taskService.createTaskQuery()</span><br><span class=\"line\">                .processDefinitionId(<span class=\"string\">&quot;evection:1:4&quot;</span>)</span><br><span class=\"line\">                .taskAssignee(<span class=\"string\">&quot;ç‹äº”&quot;</span>)</span><br><span class=\"line\">                .singleResult();</span><br><span class=\"line\">        <span class=\"comment\">// æ·»åŠ æµç¨‹å˜é‡</span></span><br><span class=\"line\">        Map&lt;String, Object&gt; map = task.getProcessVariables();</span><br><span class=\"line\">        map.put(<span class=\"string\">&quot;num&quot;</span>,<span class=\"number\">1</span>);</span><br><span class=\"line\">        <span class=\"comment\">//  ä¸€æ¬¡è®¾ç½®å¤šä¸ªå€¼ è®¾ç½®å±€éƒ¨å˜é‡</span></span><br><span class=\"line\">        taskService.setVariables(task.getId(), map);</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n\n\n\n\n\n<h1 id=\"å€™é€‰äººå’Œå€™é€‰äººç»„\"><a href=\"#å€™é€‰äººå’Œå€™é€‰äººç»„\" class=\"headerlink\" title=\"å€™é€‰äººå’Œå€™é€‰äººç»„\"></a>å€™é€‰äººå’Œå€™é€‰äººç»„</h1><p>åœ¨æµç¨‹å®šä¹‰ä¸­åœ¨ä»»åŠ¡ç»“ç‚¹çš„ assignee å›ºå®šè®¾ç½®ä»»åŠ¡è´Ÿè´£äººï¼Œåœ¨æµç¨‹å®šä¹‰æ—¶å°†å‚ä¸è€…å›ºå®šè®¾ç½®åœ¨.bpmn æ–‡ä»¶ä¸­ï¼Œå¦‚æœä¸´æ—¶ä»»åŠ¡è´Ÿè´£äººå˜æ›´åˆ™éœ€è¦ä¿®æ”¹æµç¨‹å®šä¹‰ï¼Œç³»ç»Ÿå¯æ‰©å±•æ€§å·®ã€‚é’ˆå¯¹è¿™ç§æƒ…å†µå¯ä»¥ç»™ä»»åŠ¡è®¾ç½®å¤šä¸ªå€™é€‰äººæˆ–è€…å€™é€‰äººç»„ï¼Œå¯ä»¥ä»å€™é€‰äººä¸­é€‰æ‹©å‚ä¸è€…æ¥å®Œæˆä»»åŠ¡ã€‚</p>\n<h2 id=\"å€™é€‰äºº\"><a href=\"#å€™é€‰äºº\" class=\"headerlink\" title=\"å€™é€‰äºº\"></a>å€™é€‰äºº</h2><h3 id=\"å®šä¹‰æµç¨‹å›¾\"><a href=\"#å®šä¹‰æµç¨‹å›¾\" class=\"headerlink\" title=\"å®šä¹‰æµç¨‹å›¾\"></a>å®šä¹‰æµç¨‹å›¾</h3><p>å®šä¹‰æµç¨‹å›¾ï¼ŒåŒæ—¶æŒ‡å®šå€™é€‰äººï¼Œå¤šä¸ªå€™é€‰äººä¼šé€šè¿‡<code>,</code>è¿æ¥</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220325095959489.png\"\n                      alt=\"image-20220325095959489\"\n                ></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220325100835461.png\"\n                      alt=\"image-20220325100835461\"\n                ></p>\n<h3 id=\"éƒ¨ç½²å’Œå¯åŠ¨æµç¨‹å®ä¾‹\"><a href=\"#éƒ¨ç½²å’Œå¯åŠ¨æµç¨‹å®ä¾‹\" class=\"headerlink\" title=\"éƒ¨ç½²å’Œå¯åŠ¨æµç¨‹å®ä¾‹\"></a>éƒ¨ç½²å’Œå¯åŠ¨æµç¨‹å®ä¾‹</h3><p>éƒ¨ç½²æµç¨‹ï¼Œå¹¶ä¸”åœ¨å¯åŠ¨æµç¨‹å®ä¾‹çš„æ—¶å€™å¯¹UELè¡¨è¾¾å¼èµ‹å€¼</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * éƒ¨ç½²æµç¨‹</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">deploy</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"type\">ProcessEngine</span> <span class=\"variable\">processEngine</span> <span class=\"operator\">=</span> ProcessEngines.getDefaultProcessEngine();</span><br><span class=\"line\">    <span class=\"type\">RepositoryService</span> <span class=\"variable\">repositoryService</span> <span class=\"operator\">=</span> processEngine.getRepositoryService();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"type\">Deployment</span> <span class=\"variable\">deploy</span> <span class=\"operator\">=</span> repositoryService.createDeployment()</span><br><span class=\"line\">            .addClasspathResource(<span class=\"string\">&quot;è¯·å‡æµç¨‹-å€™é€‰äºº.bpmn20.xml&quot;</span>)</span><br><span class=\"line\">            .name(<span class=\"string\">&quot;è¯·æ±‚æµç¨‹-å€™é€‰äºº&quot;</span>)</span><br><span class=\"line\">            .deploy();</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;deploy.getId() = &quot;</span> + deploy.getId());</span><br><span class=\"line\">    System.out.println(deploy.getName());</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * å¯åŠ¨æµç¨‹å®ä¾‹</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">runProcess</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"type\">ProcessEngine</span> <span class=\"variable\">processEngine</span> <span class=\"operator\">=</span> ProcessEngines.getDefaultProcessEngine();</span><br><span class=\"line\">    <span class=\"type\">RuntimeService</span> <span class=\"variable\">runtimeService</span> <span class=\"operator\">=</span> processEngine.getRuntimeService();</span><br><span class=\"line\">    <span class=\"comment\">// ç»™æµç¨‹å®šä¹‰ä¸­çš„UELè¡¨è¾¾å¼èµ‹å€¼</span></span><br><span class=\"line\">    Map&lt;String,Object&gt; variables = <span class=\"keyword\">new</span> <span class=\"title class_\">HashMap</span>&lt;&gt;();</span><br><span class=\"line\">    variables.put(<span class=\"string\">&quot;candidate1&quot;</span>,<span class=\"string\">&quot;å¼ ä¸‰&quot;</span>);</span><br><span class=\"line\">    variables.put(<span class=\"string\">&quot;candidate2&quot;</span>,<span class=\"string\">&quot;æå››&quot;</span>);</span><br><span class=\"line\">    variables.put(<span class=\"string\">&quot;candidate3&quot;</span>,<span class=\"string\">&quot;ç‹äº”&quot;</span>);</span><br><span class=\"line\">    runtimeService.startProcessInstanceById(<span class=\"string\">&quot;holiday-candidate:1:4&quot;</span>,variables);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>åœ¨å¯¹åº”çš„è¡¨ç»“æ„ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°æµç¨‹å˜é‡å·²ç»æœ‰äº†ï¼Œä½†æ˜¯å¯¹äºçš„Taskçš„Assigneeè¿˜æ˜¯ä¸ºç©ºã€‚</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220325101054787.png\"\n                      alt=\"image-20220325101054787\"\n                ></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220325102600573.png\"\n                      alt=\"image-20220325102600573\"\n                ></p>\n<h3 id=\"ä»»åŠ¡çš„æŸ¥è¯¢\"><a href=\"#ä»»åŠ¡çš„æŸ¥è¯¢\" class=\"headerlink\" title=\"ä»»åŠ¡çš„æŸ¥è¯¢\"></a>ä»»åŠ¡çš„æŸ¥è¯¢</h3><p>æ ¹æ®å½“å‰ç™»å½•çš„ç”¨æˆ·ï¼ŒæŸ¥è¯¢å¯¹åº”çš„å€™é€‰ä»»åŠ¡</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  * æ ¹æ®ç™»å½•çš„ç”¨æˆ·æŸ¥è¯¢å¯¹åº”çš„å¯ä»¥æ‹¾å–çš„ä»»åŠ¡</span></span><br><span class=\"line\"><span class=\"comment\">  *</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\"> <span class=\"meta\">@Test</span></span><br><span class=\"line\"> <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">queryTaskCandidate</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">     <span class=\"type\">ProcessEngine</span> <span class=\"variable\">processEngine</span> <span class=\"operator\">=</span> ProcessEngines.getDefaultProcessEngine();</span><br><span class=\"line\">     <span class=\"type\">TaskService</span> <span class=\"variable\">taskService</span> <span class=\"operator\">=</span> processEngine.getTaskService();</span><br><span class=\"line\">     List&lt;Task&gt; list = taskService.createTaskQuery()</span><br><span class=\"line\">             <span class=\"comment\">//.processInstanceId(&quot;2501&quot;)</span></span><br><span class=\"line\">             .processDefinitionId(<span class=\"string\">&quot;holiday-candidate:1:4&quot;</span>)</span><br><span class=\"line\">             .taskCandidateUser(<span class=\"string\">&quot;æå››&quot;</span>) # æ³¨æ„</span><br><span class=\"line\">             .list();</span><br><span class=\"line\">     <span class=\"keyword\">for</span> (Task task : list) &#123;</span><br><span class=\"line\">         System.out.println(<span class=\"string\">&quot;task.getId() = &quot;</span> + task.getId());</span><br><span class=\"line\">         System.out.println(<span class=\"string\">&quot;task.getName() = &quot;</span> + task.getName());</span><br><span class=\"line\">     &#125;</span><br><span class=\"line\"> &#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"ä»»åŠ¡çš„æ‹¾å–\"><a href=\"#ä»»åŠ¡çš„æ‹¾å–\" class=\"headerlink\" title=\"ä»»åŠ¡çš„æ‹¾å–\"></a>ä»»åŠ¡çš„æ‹¾å–</h3><p>çŸ¥é“äº†æˆ‘æœ‰å¯æ‹¾å–çš„ä»»åŠ¡åï¼Œæ‹¾å–ä»»åŠ¡ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * æ‹¾å–ä»»åŠ¡</span></span><br><span class=\"line\"><span class=\"comment\">     *    ä¸€ä¸ªå€™é€‰äººæ‹¾å–äº†è¿™ä¸ªä»»åŠ¡ä¹‹åå…¶ä»–çš„ç”¨æˆ·å°±æ²¡æœ‰åŠæ³•æ‹¾å–è¿™ä¸ªä»»åŠ¡äº†</span></span><br><span class=\"line\"><span class=\"comment\">     *    æ‰€ä»¥å¦‚æœä¸€ä¸ªç”¨æˆ·æ‹¾å–äº†ä»»åŠ¡ä¹‹ååˆä¸æƒ³å¤„ç†äº†ï¼Œé‚£ä¹ˆå¯ä»¥é€€è¿˜</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">claimTaskCandidate</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">        <span class=\"type\">ProcessEngine</span> <span class=\"variable\">processEngine</span> <span class=\"operator\">=</span> ProcessEngines.getDefaultProcessEngine();</span><br><span class=\"line\">        <span class=\"type\">TaskService</span> <span class=\"variable\">taskService</span> <span class=\"operator\">=</span> processEngine.getTaskService();</span><br><span class=\"line\">        <span class=\"type\">Task</span> <span class=\"variable\">task</span> <span class=\"operator\">=</span> taskService.createTaskQuery()</span><br><span class=\"line\">                <span class=\"comment\">//.processInstanceId(&quot;2501&quot;)</span></span><br><span class=\"line\">                .processDefinitionId(<span class=\"string\">&quot;holiday-candidate:1:4&quot;</span>)</span><br><span class=\"line\">                .taskCandidateUser(<span class=\"string\">&quot;æå››&quot;</span>)</span><br><span class=\"line\">                .singleResult();</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(task != <span class=\"literal\">null</span>)&#123;</span><br><span class=\"line\">            <span class=\"comment\">// æ‹¾å–å¯¹åº”çš„ä»»åŠ¡</span></span><br><span class=\"line\">            taskService.claim(task.getId(),<span class=\"string\">&quot;æå››&quot;</span>);</span><br><span class=\"line\">            System.out.println(<span class=\"string\">&quot;ä»»åŠ¡æ‹¾å–æˆåŠŸ&quot;</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220325103624344.png\"\n                      alt=\"image-20220325103624344\"\n                ></p>\n<h3 id=\"ä»»åŠ¡çš„å½’è¿˜\"><a href=\"#ä»»åŠ¡çš„å½’è¿˜\" class=\"headerlink\" title=\"ä»»åŠ¡çš„å½’è¿˜\"></a>ä»»åŠ¡çš„å½’è¿˜</h3><p>æ‹¾å–ä»»åŠ¡åä¸æƒ³æ“ä½œé‚£ä¹ˆå°±å½’è¿˜ä»»åŠ¡</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * é€€è¿˜ä»»åŠ¡</span></span><br><span class=\"line\"><span class=\"comment\"> *    ä¸€ä¸ªå€™é€‰äººæ‹¾å–äº†è¿™ä¸ªä»»åŠ¡ä¹‹åå…¶ä»–çš„ç”¨æˆ·å°±æ²¡æœ‰åŠæ³•æ‹¾å–è¿™ä¸ªä»»åŠ¡äº†</span></span><br><span class=\"line\"><span class=\"comment\"> *    æ‰€ä»¥å¦‚æœä¸€ä¸ªç”¨æˆ·æ‹¾å–äº†ä»»åŠ¡ä¹‹ååˆä¸æƒ³å¤„ç†äº†ï¼Œé‚£ä¹ˆå¯ä»¥é€€è¿˜</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">unclaimTaskCandidate</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"type\">ProcessEngine</span> <span class=\"variable\">processEngine</span> <span class=\"operator\">=</span> ProcessEngines.getDefaultProcessEngine();</span><br><span class=\"line\">    <span class=\"type\">TaskService</span> <span class=\"variable\">taskService</span> <span class=\"operator\">=</span> processEngine.getTaskService();</span><br><span class=\"line\">    <span class=\"type\">Task</span> <span class=\"variable\">task</span> <span class=\"operator\">=</span> taskService.createTaskQuery()</span><br><span class=\"line\">            <span class=\"comment\">//.processInstanceId(&quot;2501&quot;)</span></span><br><span class=\"line\">            .processDefinitionId(<span class=\"string\">&quot;holiday-candidate:1:4&quot;</span>)</span><br><span class=\"line\">            .taskAssignee(<span class=\"string\">&quot;å¼ ä¸‰&quot;</span>)</span><br><span class=\"line\">            .singleResult();</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(task != <span class=\"literal\">null</span>)&#123;</span><br><span class=\"line\">        <span class=\"comment\">// æ‹¾å–å¯¹åº”çš„ä»»åŠ¡</span></span><br><span class=\"line\">        taskService.unclaim(task.getId());</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;å½’è¿˜æ‹¾å–æˆåŠŸ&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n\n\n<h3 id=\"ä»»åŠ¡çš„äº¤æ¥\"><a href=\"#ä»»åŠ¡çš„äº¤æ¥\" class=\"headerlink\" title=\"ä»»åŠ¡çš„äº¤æ¥\"></a>ä»»åŠ¡çš„äº¤æ¥</h3><p>æ‹¾å–ä»»åŠ¡åå¦‚æœä¸æƒ³æ“ä½œä¹Ÿä¸æƒ³å½’è¿˜å¯ä»¥ç›´æ¥äº¤æ¥ç»™å¦å¤–ä¸€ä¸ªäººæ¥å¤„ç†</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  * ä»»åŠ¡çš„äº¤æ¥</span></span><br><span class=\"line\"><span class=\"comment\">  *    å¦‚æœæˆ‘è·å–äº†ä»»åŠ¡ï¼Œä½†æ˜¯ä¸æƒ³æ‰§è¡Œï¼Œé‚£ä¹ˆæˆ‘å¯ä»¥æŠŠè¿™ä¸ªä»»åŠ¡äº¤æ¥ç»™å…¶ä»–çš„ç”¨æˆ·</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\"> <span class=\"meta\">@Test</span></span><br><span class=\"line\"> <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">taskCandidate</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">     <span class=\"type\">ProcessEngine</span> <span class=\"variable\">processEngine</span> <span class=\"operator\">=</span> ProcessEngines.getDefaultProcessEngine();</span><br><span class=\"line\">     <span class=\"type\">TaskService</span> <span class=\"variable\">taskService</span> <span class=\"operator\">=</span> processEngine.getTaskService();</span><br><span class=\"line\">     <span class=\"type\">Task</span> <span class=\"variable\">task</span> <span class=\"operator\">=</span> taskService.createTaskQuery()</span><br><span class=\"line\">             <span class=\"comment\">//.processInstanceId(&quot;2501&quot;)</span></span><br><span class=\"line\">             .processDefinitionId(<span class=\"string\">&quot;holiday-candidate:1:4&quot;</span>)</span><br><span class=\"line\">             .taskAssignee(<span class=\"string\">&quot;æå››&quot;</span>)</span><br><span class=\"line\">             .singleResult();</span><br><span class=\"line\">     <span class=\"keyword\">if</span>(task != <span class=\"literal\">null</span>)&#123;</span><br><span class=\"line\">         <span class=\"comment\">// ä»»åŠ¡çš„äº¤æ¥</span></span><br><span class=\"line\">         taskService.setAssignee(task.getId(),<span class=\"string\">&quot;ç‹äº”&quot;</span>);</span><br><span class=\"line\">         System.out.println(<span class=\"string\">&quot;ä»»åŠ¡äº¤æ¥ç»™äº†ç‹äº”&quot;</span>);</span><br><span class=\"line\">     &#125;</span><br><span class=\"line\"> &#125;</span><br></pre></td></tr></table></figure>\n\n\n\n\n\n<h3 id=\"ä»»åŠ¡çš„å®Œæˆ\"><a href=\"#ä»»åŠ¡çš„å®Œæˆ\" class=\"headerlink\" title=\"ä»»åŠ¡çš„å®Œæˆ\"></a>ä»»åŠ¡çš„å®Œæˆ</h3><p>æ­£å¸¸çš„ä»»åŠ¡å¤„ç†</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  * å®Œæˆä»»åŠ¡</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\"> <span class=\"meta\">@Test</span></span><br><span class=\"line\"> <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">completeTask</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">     <span class=\"type\">ProcessEngine</span> <span class=\"variable\">processEngine</span> <span class=\"operator\">=</span> ProcessEngines.getDefaultProcessEngine();</span><br><span class=\"line\">     <span class=\"type\">TaskService</span> <span class=\"variable\">taskService</span> <span class=\"operator\">=</span> processEngine.getTaskService();</span><br><span class=\"line\">     <span class=\"type\">Task</span> <span class=\"variable\">task</span> <span class=\"operator\">=</span> taskService.createTaskQuery()</span><br><span class=\"line\">             <span class=\"comment\">//.processInstanceId(&quot;2501&quot;)</span></span><br><span class=\"line\">             .processDefinitionId(<span class=\"string\">&quot;holiday-candidate:1:4&quot;</span>)</span><br><span class=\"line\">             .taskAssignee(<span class=\"string\">&quot;ç‹äº”&quot;</span>)</span><br><span class=\"line\">             .singleResult();</span><br><span class=\"line\">     <span class=\"keyword\">if</span>(task != <span class=\"literal\">null</span>)&#123;</span><br><span class=\"line\">         <span class=\"comment\">// å®Œæˆä»»åŠ¡</span></span><br><span class=\"line\">         taskService.complete(task.getId());</span><br><span class=\"line\">         System.out.println(<span class=\"string\">&quot;å®ŒæˆTask&quot;</span>);</span><br><span class=\"line\">     &#125;</span><br><span class=\"line\"> &#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n\n\n\n\n\n\n<h2 id=\"å€™é€‰äººç»„\"><a href=\"#å€™é€‰äººç»„\" class=\"headerlink\" title=\"å€™é€‰äººç»„\"></a>å€™é€‰äººç»„</h2><p>å½“å€™é€‰äººå¾ˆå¤šçš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥åˆ†ç»„æ¥å¤„ç†ã€‚å…ˆåˆ›å»ºç»„ï¼Œç„¶åæŠŠç”¨æˆ·åˆ†é…åˆ°è¿™ä¸ªç»„ä¸­ã€‚</p>\n<h3 id=\"ç®¡ç†ç”¨æˆ·å’Œç»„\"><a href=\"#ç®¡ç†ç”¨æˆ·å’Œç»„\" class=\"headerlink\" title=\"ç®¡ç†ç”¨æˆ·å’Œç»„\"></a>ç®¡ç†ç”¨æˆ·å’Œç»„</h3><h4 id=\"ç”¨æˆ·ç®¡ç†\"><a href=\"#ç”¨æˆ·ç®¡ç†\" class=\"headerlink\" title=\"ç”¨æˆ·ç®¡ç†\"></a>ç”¨æˆ·ç®¡ç†</h4><p>æˆ‘ä»¬éœ€è¦å…ˆå•ç‹¬ç»´æŠ¤ç”¨æˆ·ä¿¡æ¯ã€‚åå°å¯¹åº”çš„è¡¨ç»“æ„æ˜¯<code>ACT_ID_USER</code>.</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  * ç»´æŠ¤ç”¨æˆ·</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\"> <span class=\"meta\">@Test</span></span><br><span class=\"line\"> <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">createUser</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">     <span class=\"type\">ProcessEngine</span> <span class=\"variable\">processEngine</span> <span class=\"operator\">=</span> ProcessEngines.getDefaultProcessEngine();</span><br><span class=\"line\">     <span class=\"comment\">// é€šè¿‡ IdentityService å®Œæˆç›¸å…³çš„ç”¨æˆ·å’Œç»„çš„ç®¡ç†</span></span><br><span class=\"line\">     <span class=\"type\">IdentityService</span> <span class=\"variable\">identityService</span> <span class=\"operator\">=</span> processEngine.getIdentityService();</span><br><span class=\"line\">     <span class=\"type\">User</span> <span class=\"variable\">user</span> <span class=\"operator\">=</span> identityService.newUser(<span class=\"string\">&quot;ç”°ä½³&quot;</span>);</span><br><span class=\"line\">     user.setFirstName(<span class=\"string\">&quot;ç”°&quot;</span>);</span><br><span class=\"line\">     user.setLastName(<span class=\"string\">&quot;jia&quot;</span>);</span><br><span class=\"line\">     user.setEmail(<span class=\"string\">&quot;tianjia@qq.com&quot;</span>);</span><br><span class=\"line\">     identityService.saveUser(user);</span><br><span class=\"line\"> &#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220325110324815.png\"\n                      alt=\"image-20220325110324815\"\n                ></p>\n<h4 id=\"Groupç®¡ç†\"><a href=\"#Groupç®¡ç†\" class=\"headerlink\" title=\"Groupç®¡ç†\"></a>Groupç®¡ç†</h4><p>ç»´æŠ¤å¯¹åº”çš„Groupä¿¡æ¯ï¼Œåå°å¯¹åº”çš„è¡¨ç»“æ„æ˜¯<code>ACT_ID_GROUP</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * åˆ›å»ºç”¨æˆ·ç»„</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">createGroup</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"type\">ProcessEngine</span> <span class=\"variable\">processEngine</span> <span class=\"operator\">=</span> ProcessEngines.getDefaultProcessEngine();</span><br><span class=\"line\">    <span class=\"type\">IdentityService</span> <span class=\"variable\">identityService</span> <span class=\"operator\">=</span> processEngine.getIdentityService();</span><br><span class=\"line\">    <span class=\"comment\">// åˆ›å»ºGroupå¯¹è±¡å¹¶æŒ‡å®šç›¸å…³çš„ä¿¡æ¯</span></span><br><span class=\"line\">    <span class=\"type\">Group</span> <span class=\"variable\">group</span> <span class=\"operator\">=</span> identityService.newGroup(<span class=\"string\">&quot;group2&quot;</span>);</span><br><span class=\"line\">    group.setName(<span class=\"string\">&quot;å¼€å‘éƒ¨&quot;</span>);</span><br><span class=\"line\">    group.setType(<span class=\"string\">&quot;type1&quot;</span>);</span><br><span class=\"line\">    <span class=\"comment\">// åˆ›å»ºGroupå¯¹åº”çš„è¡¨ç»“æ„æ•°æ®</span></span><br><span class=\"line\">    identityService.saveGroup(group);</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220325110408435.png\"\n                      alt=\"image-20220325110408435\"\n                ></p>\n<h4 id=\"ç”¨æˆ·åˆ†é…ç»„\"><a href=\"#ç”¨æˆ·åˆ†é…ç»„\" class=\"headerlink\" title=\"ç”¨æˆ·åˆ†é…ç»„\"></a>ç”¨æˆ·åˆ†é…ç»„</h4><p>ç”¨æˆ·å’Œç»„æ˜¯ä¸€ä¸ªå¤šå¯¹å¤šçš„å…³è”å…³è”ï¼Œæˆ‘ä»¬éœ€è¦åšç›¸å…³çš„åˆ†é…ï¼Œåå°å¯¹åº”çš„è¡¨ç»“æ„æ˜¯<code>ACT_ID_MEMBERSHIP</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * å°†ç”¨æˆ·åˆ†é…ç»™å¯¹åº”çš„Group</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">userGroup</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"type\">ProcessEngine</span> <span class=\"variable\">processEngine</span> <span class=\"operator\">=</span> ProcessEngines.getDefaultProcessEngine();</span><br><span class=\"line\">    <span class=\"type\">IdentityService</span> <span class=\"variable\">identityService</span> <span class=\"operator\">=</span> processEngine.getIdentityService();</span><br><span class=\"line\">    <span class=\"comment\">// æ ¹æ®ç»„çš„ç¼–å·æ‰¾åˆ°å¯¹åº”çš„Groupå¯¹è±¡</span></span><br><span class=\"line\">    <span class=\"type\">Group</span> <span class=\"variable\">group</span> <span class=\"operator\">=</span> identityService.createGroupQuery().groupId(<span class=\"string\">&quot;group1&quot;</span>).singleResult();</span><br><span class=\"line\">    List&lt;User&gt; list = identityService.createUserQuery().list();</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (User user : list) &#123;</span><br><span class=\"line\">        <span class=\"comment\">// å°†ç”¨æˆ·åˆ†é…ç»™å¯¹åº”çš„ç»„</span></span><br><span class=\"line\">        identityService.createMembership(user.getId(),group.getId());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220325110511848.png\"\n                      alt=\"image-20220325110511848\"\n                ></p>\n<h3 id=\"å€™é€‰äººç»„åº”ç”¨\"><a href=\"#å€™é€‰äººç»„åº”ç”¨\" class=\"headerlink\" title=\"å€™é€‰äººç»„åº”ç”¨\"></a>å€™é€‰äººç»„åº”ç”¨</h3><p>ææ¸…æ¥šäº†ç”¨æˆ·å’Œç”¨æˆ·ç»„çš„å…³ç³»åæˆ‘ä»¬å°±å¯ä»¥æ¥ä½¿ç”¨å€™é€‰äººç»„çš„åº”ç”¨äº†</p>\n<h4 id=\"åˆ›å»ºæµç¨‹å›¾\"><a href=\"#åˆ›å»ºæµç¨‹å›¾\" class=\"headerlink\" title=\"åˆ›å»ºæµç¨‹å›¾\"></a>åˆ›å»ºæµç¨‹å›¾</h4><p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220325111013641.png\"\n                      alt=\"image-20220325111013641\"\n                ></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220325110952527.png\"\n                      alt=\"image-20220325110952527\"\n                ></p>\n<h4 id=\"æµç¨‹çš„éƒ¨ç½²è¿è¡Œ\"><a href=\"#æµç¨‹çš„éƒ¨ç½²è¿è¡Œ\" class=\"headerlink\" title=\"æµç¨‹çš„éƒ¨ç½²è¿è¡Œ\"></a>æµç¨‹çš„éƒ¨ç½²è¿è¡Œ</h4><p>ç„¶åæˆ‘ä»¬æŠŠæµç¨‹éƒ¨ç½²å’Œè¿è¡Œï¼Œæ³¨æ„å¯¹UELè¡¨è¾¾å¼èµ‹å€¼ï¼Œå…³è”ä¸ŠGroup</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * éƒ¨ç½²æµç¨‹</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">deploy</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">        <span class=\"type\">ProcessEngine</span> <span class=\"variable\">processEngine</span> <span class=\"operator\">=</span> ProcessEngines.getDefaultProcessEngine();</span><br><span class=\"line\">        <span class=\"type\">RepositoryService</span> <span class=\"variable\">repositoryService</span> <span class=\"operator\">=</span> processEngine.getRepositoryService();</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"type\">Deployment</span> <span class=\"variable\">deploy</span> <span class=\"operator\">=</span> repositoryService.createDeployment()</span><br><span class=\"line\">                .addClasspathResource(<span class=\"string\">&quot;è¯·å‡æµç¨‹-å€™é€‰äººç»„.bpmn20.xml&quot;</span>)</span><br><span class=\"line\">                .name(<span class=\"string\">&quot;è¯·æ±‚æµç¨‹-å€™é€‰äºº&quot;</span>)</span><br><span class=\"line\">                .deploy();</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;deploy.getId() = &quot;</span> + deploy.getId());</span><br><span class=\"line\">        System.out.println(deploy.getName());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * å¯åŠ¨æµç¨‹å®ä¾‹</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">runProcess</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">        <span class=\"type\">ProcessEngine</span> <span class=\"variable\">processEngine</span> <span class=\"operator\">=</span> ProcessEngines.getDefaultProcessEngine();</span><br><span class=\"line\">        <span class=\"type\">IdentityService</span> <span class=\"variable\">identityService</span> <span class=\"operator\">=</span> processEngine.getIdentityService();</span><br><span class=\"line\">        <span class=\"type\">Group</span> <span class=\"variable\">group</span> <span class=\"operator\">=</span> identityService.createGroupQuery().groupId(<span class=\"string\">&quot;group1&quot;</span>).singleResult();</span><br><span class=\"line\">        <span class=\"type\">RuntimeService</span> <span class=\"variable\">runtimeService</span> <span class=\"operator\">=</span> processEngine.getRuntimeService();</span><br><span class=\"line\">        <span class=\"comment\">// ç»™æµç¨‹å®šä¹‰ä¸­çš„UELè¡¨è¾¾å¼èµ‹å€¼</span></span><br><span class=\"line\">        Map&lt;String,Object&gt; variables = <span class=\"keyword\">new</span> <span class=\"title class_\">HashMap</span>&lt;&gt;();</span><br><span class=\"line\">        <span class=\"comment\">// variables.put(&quot;g1&quot;,&quot;group1&quot;);</span></span><br><span class=\"line\">        variables.put(<span class=\"string\">&quot;g1&quot;</span>,group.getId()); <span class=\"comment\">// ç»™æµç¨‹å®šä¹‰ä¸­çš„UELè¡¨è¾¾å¼èµ‹å€¼</span></span><br><span class=\"line\">        runtimeService.startProcessInstanceById(<span class=\"string\">&quot;holiday-group:1:17504&quot;</span>,variables);</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n\n<p>å¯¹åº”è¡¨ç»“æ„ä¸­å°±æœ‰å¯¹åº”çš„ä½“ç°</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220325112545719.png\"\n                      alt=\"image-20220325112545719\"\n                ></p>\n<h4 id=\"ä»»åŠ¡çš„æ‹¾å–å’Œå®Œæˆ\"><a href=\"#ä»»åŠ¡çš„æ‹¾å–å’Œå®Œæˆ\" class=\"headerlink\" title=\"ä»»åŠ¡çš„æ‹¾å–å’Œå®Œæˆ\"></a>ä»»åŠ¡çš„æ‹¾å–å’Œå®Œæˆ</h4><p>ç„¶åå®Œæˆä»»åŠ¡çš„æŸ¥è¯¢æ‹¾å–å’Œå¤„ç†æ“ä½œ</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * æ ¹æ®ç™»å½•çš„ç”¨æˆ·æŸ¥è¯¢å¯¹åº”çš„å¯ä»¥æ‹¾å–çš„ä»»åŠ¡</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">queryTaskCandidateGroup</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">        <span class=\"type\">ProcessEngine</span> <span class=\"variable\">processEngine</span> <span class=\"operator\">=</span> ProcessEngines.getDefaultProcessEngine();</span><br><span class=\"line\">        <span class=\"comment\">// æ ¹æ®å½“å‰ç™»å½•çš„ç”¨æˆ·æ‰¾åˆ°å¯¹åº”çš„ç»„</span></span><br><span class=\"line\">        <span class=\"type\">IdentityService</span> <span class=\"variable\">identityService</span> <span class=\"operator\">=</span> processEngine.getIdentityService();</span><br><span class=\"line\">        <span class=\"comment\">// å½“å‰ç”¨æˆ·æ‰€åœ¨çš„ç»„</span></span><br><span class=\"line\">        <span class=\"type\">Group</span> <span class=\"variable\">group</span> <span class=\"operator\">=</span> identityService.createGroupQuery().groupMember(<span class=\"string\">&quot;é‚“å½ª&quot;</span>).singleResult();</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"type\">TaskService</span> <span class=\"variable\">taskService</span> <span class=\"operator\">=</span> processEngine.getTaskService();</span><br><span class=\"line\">        List&lt;Task&gt; list = taskService.createTaskQuery()</span><br><span class=\"line\">                <span class=\"comment\">//.processInstanceId(&quot;2501&quot;)</span></span><br><span class=\"line\">                .processDefinitionId(<span class=\"string\">&quot;holiday-group:1:17504&quot;</span>)</span><br><span class=\"line\">                .taskCandidateGroup(group.getId())</span><br><span class=\"line\">                .list();</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (Task task : list) &#123;</span><br><span class=\"line\">            System.out.println(<span class=\"string\">&quot;task.getId() = &quot;</span> + task.getId());</span><br><span class=\"line\">            System.out.println(<span class=\"string\">&quot;task.getName() = &quot;</span> + task.getName());</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * æ‹¾å–ä»»åŠ¡</span></span><br><span class=\"line\"><span class=\"comment\">     *    ä¸€ä¸ªå€™é€‰äººæ‹¾å–äº†è¿™ä¸ªä»»åŠ¡ä¹‹åå…¶ä»–çš„ç”¨æˆ·å°±æ²¡æœ‰åŠæ³•æ‹¾å–è¿™ä¸ªä»»åŠ¡äº†</span></span><br><span class=\"line\"><span class=\"comment\">     *    æ‰€ä»¥å¦‚æœä¸€ä¸ªç”¨æˆ·æ‹¾å–äº†ä»»åŠ¡ä¹‹ååˆä¸æƒ³å¤„ç†äº†ï¼Œé‚£ä¹ˆå¯ä»¥é€€è¿˜</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">claimTaskCandidate</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">        <span class=\"type\">String</span> <span class=\"variable\">userId</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;ç”°ä½³&quot;</span>;</span><br><span class=\"line\">        <span class=\"type\">ProcessEngine</span> <span class=\"variable\">processEngine</span> <span class=\"operator\">=</span> ProcessEngines.getDefaultProcessEngine();</span><br><span class=\"line\">        <span class=\"comment\">// æ ¹æ®å½“å‰ç™»å½•çš„ç”¨æˆ·æ‰¾åˆ°å¯¹åº”çš„ç»„</span></span><br><span class=\"line\">        <span class=\"type\">IdentityService</span> <span class=\"variable\">identityService</span> <span class=\"operator\">=</span> processEngine.getIdentityService();</span><br><span class=\"line\">        <span class=\"comment\">// å½“å‰ç”¨æˆ·æ‰€åœ¨çš„ç»„</span></span><br><span class=\"line\">        <span class=\"type\">Group</span> <span class=\"variable\">group</span> <span class=\"operator\">=</span> identityService.createGroupQuery().groupMember(userId).singleResult();</span><br><span class=\"line\">        <span class=\"type\">TaskService</span> <span class=\"variable\">taskService</span> <span class=\"operator\">=</span> processEngine.getTaskService();</span><br><span class=\"line\">        <span class=\"type\">Task</span> <span class=\"variable\">task</span> <span class=\"operator\">=</span> taskService.createTaskQuery()</span><br><span class=\"line\">                <span class=\"comment\">//.processInstanceId(&quot;2501&quot;)</span></span><br><span class=\"line\">                .processDefinitionId(<span class=\"string\">&quot;holiday-group:1:17504&quot;</span>)</span><br><span class=\"line\">                .taskCandidateGroup(group.getId())</span><br><span class=\"line\">                .singleResult();</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(task != <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">            <span class=\"comment\">// ä»»åŠ¡æ‹¾å–</span></span><br><span class=\"line\">            taskService.claim(task.getId(),userId);</span><br><span class=\"line\">            System.out.println(<span class=\"string\">&quot;ä»»åŠ¡æ‹¾å–æˆåŠŸ&quot;</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;  </span><br><span class=\"line\">   <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * å®Œæˆä»»åŠ¡</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">completeTask</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">        <span class=\"type\">ProcessEngine</span> <span class=\"variable\">processEngine</span> <span class=\"operator\">=</span> ProcessEngines.getDefaultProcessEngine();</span><br><span class=\"line\">        <span class=\"type\">TaskService</span> <span class=\"variable\">taskService</span> <span class=\"operator\">=</span> processEngine.getTaskService();</span><br><span class=\"line\">        <span class=\"type\">Task</span> <span class=\"variable\">task</span> <span class=\"operator\">=</span> taskService.createTaskQuery()</span><br><span class=\"line\">                <span class=\"comment\">//.processInstanceId(&quot;2501&quot;)</span></span><br><span class=\"line\">                .processDefinitionId(<span class=\"string\">&quot;holiday-group:1:17504&quot;</span>)</span><br><span class=\"line\">                .taskAssignee(<span class=\"string\">&quot;é‚“å½ª&quot;</span>)</span><br><span class=\"line\">                .singleResult();</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(task != <span class=\"literal\">null</span>)&#123;</span><br><span class=\"line\">            <span class=\"comment\">// å®Œæˆä»»åŠ¡</span></span><br><span class=\"line\">            taskService.complete(task.getId());</span><br><span class=\"line\">            System.out.println(<span class=\"string\">&quot;å®ŒæˆTask&quot;</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n\n\n\n\n\n<h1 id=\"ç½‘å…³\"><a href=\"#ç½‘å…³\" class=\"headerlink\" title=\"ç½‘å…³\"></a>ç½‘å…³</h1><p>ç½‘å…³ç”¨æ¥æ§åˆ¶æµç¨‹çš„æµå‘</p>\n<h2 id=\"æ’ä»–ç½‘å…³\"><a href=\"#æ’ä»–ç½‘å…³\" class=\"headerlink\" title=\"æ’ä»–ç½‘å…³\"></a>æ’ä»–ç½‘å…³</h2><p>æ’ä»–ç½‘å…³ï¼ˆexclusive gatewayï¼‰ï¼ˆä¹Ÿå«<em>å¼‚æˆ–ç½‘å…³ XOR gateway</em>ï¼Œæˆ–è€…æ›´ä¸“ä¸šçš„ï¼Œ<em>åŸºäºæ•°æ®çš„æ’ä»–ç½‘å…³ exclusive data-based gateway</em>ï¼‰ï¼Œç”¨äºå¯¹æµç¨‹ä¸­çš„<strong>å†³ç­–</strong>å»ºæ¨¡ã€‚å½“æ‰§è¡Œåˆ°è¾¾è¿™ä¸ªç½‘å…³æ—¶ï¼Œä¼šæŒ‰ç…§æ‰€æœ‰å‡ºå£é¡ºåºæµå®šä¹‰çš„é¡ºåºå¯¹å®ƒä»¬è¿›è¡Œè®¡ç®—ã€‚é€‰æ‹©ç¬¬ä¸€ä¸ªæ¡ä»¶è®¡ç®—ä¸ºtrueçš„é¡ºåºæµï¼ˆå½“æ²¡æœ‰è®¾ç½®æ¡ä»¶æ—¶ï¼Œè®¤ä¸ºé¡ºåºæµä¸º<em>true</em>ï¼‰ç»§ç»­æµç¨‹ã€‚</p>\n<p><strong>è¯·æ³¨æ„è¿™é‡Œå‡ºå£é¡ºåºæµçš„å«ä¹‰ä¸BPMN 2.0ä¸­çš„ä¸€èˆ¬æƒ…å†µä¸ä¸€æ ·ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œä¼šé€‰æ‹©æ‰€æœ‰æ¡ä»¶è®¡ç®—ä¸ºtrueçš„é¡ºåºæµï¼Œå¹¶è¡Œæ‰§è¡Œã€‚è€Œä½¿ç”¨æ’ä»–ç½‘å…³æ—¶ï¼Œåªä¼šé€‰æ‹©ä¸€æ¡é¡ºåºæµã€‚å½“å¤šæ¡é¡ºåºæµçš„æ¡ä»¶éƒ½è®¡ç®—ä¸ºtrueæ—¶ï¼Œä¼šä¸”ä»…ä¼šé€‰æ‹©åœ¨XMLä¸­æœ€å…ˆå®šä¹‰çš„é¡ºåºæµç»§ç»­æµç¨‹ã€‚å¦‚æœæ²¡æœ‰å¯é€‰çš„é¡ºåºæµï¼Œä¼šæŠ›å‡ºå¼‚å¸¸ã€‚</strong></p>\n<p>å›¾ç¤º</p>\n<p>æ’ä»–ç½‘å…³ç”¨å†…éƒ¨å¸¦æœ‰â€™Xâ€™å›¾æ ‡çš„æ ‡å‡†ç½‘å…³ï¼ˆè±å½¢ï¼‰è¡¨ç¤ºï¼Œâ€™Xâ€™å›¾æ ‡ä»£è¡¨<em>å¼‚æˆ–</em>çš„å«ä¹‰ã€‚è¯·æ³¨æ„å†…éƒ¨æ²¡æœ‰å›¾æ ‡çš„ç½‘å…³é»˜è®¤ä¸ºæ’ä»–ç½‘å…³ã€‚BPMN 2.0è§„èŒƒä¸å…è®¸åœ¨åŒä¸€ä¸ªæµç¨‹ä¸­æ··åˆä½¿ç”¨æœ‰åŠæ²¡æœ‰Xçš„è±å½¢æ ‡å¿—ã€‚</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220326100630908.png\"\n                      alt=\"image-20220326100630908\"\n                ></p>\n<p>æ¡ˆä¾‹ï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220326103951903.png\"\n                      alt=\"image-20220326103951903\"\n                ></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  * éƒ¨ç½²æµç¨‹</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\"> <span class=\"meta\">@Test</span></span><br><span class=\"line\"> <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">deploy</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">     <span class=\"type\">ProcessEngine</span> <span class=\"variable\">processEngine</span> <span class=\"operator\">=</span> ProcessEngines.getDefaultProcessEngine();</span><br><span class=\"line\">     <span class=\"type\">RepositoryService</span> <span class=\"variable\">repositoryService</span> <span class=\"operator\">=</span> processEngine.getRepositoryService();</span><br><span class=\"line\"></span><br><span class=\"line\">     <span class=\"type\">Deployment</span> <span class=\"variable\">deploy</span> <span class=\"operator\">=</span> repositoryService.createDeployment()</span><br><span class=\"line\">             .addClasspathResource(<span class=\"string\">&quot;è¯·å‡æµç¨‹-æ’ä»–ç½‘å…³.bpmn20.xml&quot;</span>)</span><br><span class=\"line\">             .name(<span class=\"string\">&quot;è¯·æ±‚æµç¨‹-æ’ä»–ç½‘å…³&quot;</span>)</span><br><span class=\"line\">             .deploy();</span><br><span class=\"line\">     System.out.println(<span class=\"string\">&quot;deploy.getId() = &quot;</span> + deploy.getId());</span><br><span class=\"line\">     System.out.println(deploy.getName());</span><br><span class=\"line\"> &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"> <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  * å¯åŠ¨æµç¨‹å®ä¾‹</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\"> <span class=\"meta\">@Test</span></span><br><span class=\"line\"> <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">runProcess</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">     <span class=\"type\">ProcessEngine</span> <span class=\"variable\">processEngine</span> <span class=\"operator\">=</span> ProcessEngines.getDefaultProcessEngine();</span><br><span class=\"line\">     <span class=\"type\">RuntimeService</span> <span class=\"variable\">runtimeService</span> <span class=\"operator\">=</span> processEngine.getRuntimeService();</span><br><span class=\"line\">     <span class=\"comment\">// ç»™æµç¨‹å®šä¹‰ä¸­çš„UELè¡¨è¾¾å¼èµ‹å€¼</span></span><br><span class=\"line\">     Map&lt;String,Object&gt; variables = <span class=\"keyword\">new</span> <span class=\"title class_\">HashMap</span>&lt;&gt;();</span><br><span class=\"line\">     <span class=\"comment\">// variables.put(&quot;g1&quot;,&quot;group1&quot;);</span></span><br><span class=\"line\">     variables.put(<span class=\"string\">&quot;num&quot;</span>,<span class=\"number\">3</span>); <span class=\"comment\">// ç»™æµç¨‹å®šä¹‰ä¸­çš„UELè¡¨è¾¾å¼èµ‹å€¼</span></span><br><span class=\"line\">     runtimeService.startProcessInstanceById(<span class=\"string\">&quot;holiday-exclusive:1:4&quot;</span>,variables);</span><br><span class=\"line\"> &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"> <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  * å¯åŠ¨æµç¨‹å®ä¾‹</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\"> <span class=\"meta\">@Test</span></span><br><span class=\"line\"> <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">setVariables</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">     <span class=\"type\">ProcessEngine</span> <span class=\"variable\">processEngine</span> <span class=\"operator\">=</span> ProcessEngines.getDefaultProcessEngine();</span><br><span class=\"line\">     <span class=\"type\">RuntimeService</span> <span class=\"variable\">runtimeService</span> <span class=\"operator\">=</span> processEngine.getRuntimeService();</span><br><span class=\"line\">     <span class=\"comment\">// ç»™æµç¨‹å®šä¹‰ä¸­çš„UELè¡¨è¾¾å¼èµ‹å€¼</span></span><br><span class=\"line\">     Map&lt;String,Object&gt; variables = <span class=\"keyword\">new</span> <span class=\"title class_\">HashMap</span>&lt;&gt;();</span><br><span class=\"line\">     <span class=\"comment\">// variables.put(&quot;g1&quot;,&quot;group1&quot;);</span></span><br><span class=\"line\">     variables.put(<span class=\"string\">&quot;num&quot;</span>,<span class=\"number\">4</span>); <span class=\"comment\">// ç»™æµç¨‹å®šä¹‰ä¸­çš„UELè¡¨è¾¾å¼èµ‹å€¼</span></span><br><span class=\"line\">     runtimeService.setVariables(<span class=\"string\">&quot;12503&quot;</span>,variables);</span><br><span class=\"line\"> &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"> <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  * å®Œæˆä»»åŠ¡</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\"> <span class=\"meta\">@Test</span></span><br><span class=\"line\"> <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">completeTask</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">     <span class=\"type\">ProcessEngine</span> <span class=\"variable\">processEngine</span> <span class=\"operator\">=</span> ProcessEngines.getDefaultProcessEngine();</span><br><span class=\"line\">     <span class=\"type\">TaskService</span> <span class=\"variable\">taskService</span> <span class=\"operator\">=</span> processEngine.getTaskService();</span><br><span class=\"line\">     <span class=\"type\">Task</span> <span class=\"variable\">task</span> <span class=\"operator\">=</span> taskService.createTaskQuery()</span><br><span class=\"line\">             <span class=\"comment\">//.processInstanceId(&quot;2501&quot;)</span></span><br><span class=\"line\">             .processDefinitionId(<span class=\"string\">&quot;holiday-exclusive:1:4&quot;</span>)</span><br><span class=\"line\">             .taskAssignee(<span class=\"string\">&quot;zhangsan&quot;</span>)</span><br><span class=\"line\">             .singleResult();</span><br><span class=\"line\">     <span class=\"keyword\">if</span>(task != <span class=\"literal\">null</span>)&#123;</span><br><span class=\"line\">         <span class=\"comment\">// å®Œæˆä»»åŠ¡</span></span><br><span class=\"line\">         taskService.complete(task.getId());</span><br><span class=\"line\">         System.out.println(<span class=\"string\">&quot;å®ŒæˆTask&quot;</span>);</span><br><span class=\"line\">     &#125;</span><br><span class=\"line\"> &#125;</span><br></pre></td></tr></table></figure>\n\n\n\n\n\n<p>å¦‚æœä»ç½‘å…³å‡ºå»çš„çº¿æ‰€æœ‰æ¡ä»¶éƒ½ä¸æ»¡è¶³çš„æƒ…å†µä¸‹ä¼šæŠ›å‡ºç³»ç»Ÿå¼‚å¸¸ï¼Œ</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220326104744181.png\"\n                      alt=\"image-20220326104744181\"\n                ></p>\n<p>ä½†æ˜¯è¦æ³¨æ„ä»»åŠ¡æ²¡æœ‰ä»‹ç»ï¼Œè¿˜æ˜¯åŸæ¥çš„ä»»åŠ¡ï¼Œæˆ‘ä»¬å¯ä»¥é‡ç½®æµç¨‹å˜é‡</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">setVariables</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"type\">ProcessEngine</span> <span class=\"variable\">processEngine</span> <span class=\"operator\">=</span> ProcessEngines.getDefaultProcessEngine();</span><br><span class=\"line\">    <span class=\"type\">RuntimeService</span> <span class=\"variable\">runtimeService</span> <span class=\"operator\">=</span> processEngine.getRuntimeService();</span><br><span class=\"line\">    <span class=\"comment\">// ç»™æµç¨‹å®šä¹‰ä¸­çš„UELè¡¨è¾¾å¼èµ‹å€¼</span></span><br><span class=\"line\">    Map&lt;String,Object&gt; variables = <span class=\"keyword\">new</span> <span class=\"title class_\">HashMap</span>&lt;&gt;();</span><br><span class=\"line\">    <span class=\"comment\">// variables.put(&quot;g1&quot;,&quot;group1&quot;);</span></span><br><span class=\"line\">    variables.put(<span class=\"string\">&quot;num&quot;</span>,<span class=\"number\">4</span>); <span class=\"comment\">// ç»™æµç¨‹å®šä¹‰ä¸­çš„UELè¡¨è¾¾å¼èµ‹å€¼</span></span><br><span class=\"line\">    runtimeService.setVariables(<span class=\"string\">&quot;12503&quot;</span>,variables);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n\n\n<p>å‰é¢æˆ‘ä»¬å¯ä»¥ç›´æ¥åœ¨è¿æ¥çº¿ä¸Šå®šä¹‰æ¡ä»¶ï¼Œé‚£ä¸ºä»€ä¹ˆè¿˜è¦æœ‰æ’ä»–ç½‘å…³å‘¢ï¼Ÿç›´æ¥åœ¨çº¿ä¸Šçš„æƒ…å†µï¼Œå¦‚æœæ¡ä»¶éƒ½ä¸æ»¡è¶³ï¼Œæµç¨‹å°±ç»“æŸäº†ï¼Œæ˜¯å¼‚å¸¸ç»“æŸ!!</p>\n<h2 id=\"å¹¶è¡Œç½‘å…³\"><a href=\"#å¹¶è¡Œç½‘å…³\" class=\"headerlink\" title=\"å¹¶è¡Œç½‘å…³\"></a>å¹¶è¡Œç½‘å…³</h2><p>å¹¶è¡Œç½‘å…³å…è®¸å°†æµç¨‹åˆ†æˆå¤šæ¡åˆ†æ”¯ï¼Œä¹Ÿå¯ä»¥æŠŠå¤šæ¡åˆ†æ”¯æ±‡èšåˆ°ä¸€èµ·ï¼Œå¹¶è¡Œç½‘å…³çš„åŠŸèƒ½æ˜¯åŸºäºè¿›å…¥å’Œå¤–å‡ºé¡ºåºæµçš„ï¼š</p>\n<ul>\n<li><p>forkåˆ†æ”¯ï¼šå¹¶è¡Œåçš„æ‰€æœ‰å¤–å‡ºé¡ºåºæµï¼Œä¸ºæ¯ä¸ªé¡ºåºæµéƒ½åˆ›å»ºä¸€ä¸ªå¹¶å‘åˆ†æ”¯ã€‚</p>\n</li>\n<li><p>joinæ±‡èšï¼š æ‰€æœ‰åˆ°è¾¾å¹¶è¡Œç½‘å…³ï¼Œåœ¨æ­¤ç­‰å¾…çš„è¿›å…¥åˆ†æ”¯ï¼Œ ç›´åˆ°æ‰€æœ‰è¿›å…¥é¡ºåºæµçš„åˆ†æ”¯éƒ½åˆ°è¾¾ä»¥åï¼Œ æµç¨‹å°±ä¼šé€šè¿‡æ±‡èšç½‘å…³ã€‚</p>\n</li>\n</ul>\n<p>æ³¨æ„ï¼Œå¦‚æœåŒä¸€ä¸ªå¹¶è¡Œç½‘å…³æœ‰å¤šä¸ªè¿›å…¥å’Œå¤šä¸ªå¤–å‡ºé¡ºåºæµï¼Œ å®ƒå°±åŒæ—¶å…·æœ‰åˆ†æ”¯å’Œæ±‡èšåŠŸèƒ½ã€‚ è¿™æ—¶ï¼Œç½‘å…³ä¼šå…ˆæ±‡èšæ‰€æœ‰è¿›å…¥çš„é¡ºåºæµï¼Œç„¶åå†åˆ‡åˆ†æˆå¤šä¸ªå¹¶è¡Œåˆ†æ”¯ã€‚</p>\n<p><strong>ä¸å…¶ä»–ç½‘å…³çš„ä¸»è¦åŒºåˆ«æ˜¯ï¼Œå¹¶è¡Œç½‘å…³ä¸ä¼šè§£ææ¡ä»¶ã€‚</strong> <strong>å³ä½¿é¡ºåºæµä¸­å®šä¹‰äº†æ¡ä»¶ï¼Œä¹Ÿä¼šè¢«å¿½ç•¥ã€‚</strong></p>\n<p>æ¡ˆä¾‹ï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220326110341232.png\"\n                      alt=\"image-20220326110341232\"\n                ></p>\n<p>å½“æˆ‘ä»¬æ‰§è¡Œäº†åˆ›å»ºè¯·å‡å•åï¼Œåˆ°å¹¶è¡Œç½‘å…³çš„ä½ç½®çš„æ—¶å€™ï¼Œåœ¨ACT_RU_TASKè¡¨ä¸­å°±æœ‰ä¸¤æ¡è®°å½•</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220326111359504.png\"\n                      alt=\"image-20220326111359504\"\n                ></p>\n<p>ç„¶ååŒæ—¶åœ¨ACT_RU_EXECUTIONä¸­æœ‰ä¸‰æ¡è®°å½•ï¼Œä¸€ä¸ªä»»åŠ¡å¯¹åº”çš„æœ‰ä¸¤ä¸ªæ‰§è¡Œå®ä¾‹</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220326111453630.png\"\n                      alt=\"image-20220326111453630\"\n                ></p>\n<h2 id=\"åŒ…å«ç½‘å…³\"><a href=\"#åŒ…å«ç½‘å…³\" class=\"headerlink\" title=\"åŒ…å«ç½‘å…³\"></a>åŒ…å«ç½‘å…³</h2><p>åŒ…å«ç½‘å…³å¯ä»¥çœ‹åšæ˜¯æ’ä»–ç½‘å…³å’Œå¹¶è¡Œç½‘å…³çš„ç»“åˆä½“ã€‚ å’Œæ’ä»–ç½‘å…³ä¸€æ ·ï¼Œä½ å¯ä»¥åœ¨å¤–å‡ºé¡ºåºæµä¸Šå®šä¹‰æ¡ä»¶ï¼ŒåŒ…å«ç½‘å…³ä¼šè§£æå®ƒä»¬ã€‚ ä½†æ˜¯ä¸»è¦çš„åŒºåˆ«æ˜¯åŒ…å«ç½‘å…³å¯ä»¥é€‰æ‹©å¤šäºä¸€æ¡é¡ºåºæµï¼Œè¿™å’Œå¹¶è¡Œç½‘å…³ä¸€æ ·ã€‚</p>\n<p>åŒ…å«ç½‘å…³çš„åŠŸèƒ½æ˜¯åŸºäºè¿›å…¥å’Œå¤–å‡ºé¡ºåºæµçš„ï¼š</p>\n<ul>\n<li><p>åˆ†æ”¯ï¼š æ‰€æœ‰å¤–å‡ºé¡ºåºæµçš„æ¡ä»¶éƒ½ä¼šè¢«è§£æï¼Œç»“æœä¸ºtrueçš„é¡ºåºæµä¼šä»¥å¹¶è¡Œæ–¹å¼ç»§ç»­æ‰§è¡Œï¼Œ ä¼šä¸ºæ¯ä¸ªé¡ºåºæµåˆ›å»ºä¸€ä¸ªåˆ†æ”¯ã€‚</p>\n</li>\n<li><p>æ±‡èšï¼šæ‰€æœ‰å¹¶è¡Œåˆ†æ”¯åˆ°è¾¾åŒ…å«ç½‘å…³ï¼Œä¼šè¿›å…¥ç­‰å¾…çŠ¶æ€ï¼Œ ç›´åˆ°æ¯ä¸ªåŒ…å«æµç¨‹tokençš„è¿›å…¥é¡ºåºæµçš„åˆ†æ”¯éƒ½åˆ°è¾¾ã€‚ è¿™æ˜¯ä¸å¹¶è¡Œç½‘å…³çš„æœ€å¤§ä¸åŒã€‚æ¢å¥è¯è¯´ï¼ŒåŒ…å«ç½‘å…³åªä¼šç­‰å¾…è¢«é€‰ä¸­æ‰§è¡Œäº†çš„è¿›å…¥é¡ºåºæµã€‚ åœ¨æ±‡èšä¹‹åï¼Œæµç¨‹ä¼šç©¿è¿‡åŒ…å«ç½‘å…³ç»§ç»­æ‰§è¡Œã€‚</p>\n</li>\n</ul>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220326112720089.png\"\n                      alt=\"image-20220326112720089\"\n                ></p>\n<h2 id=\"äº‹ä»¶ç½‘å…³\"><a href=\"#äº‹ä»¶ç½‘å…³\" class=\"headerlink\" title=\"äº‹ä»¶ç½‘å…³\"></a>äº‹ä»¶ç½‘å…³</h2><p>äº‹ä»¶ç½‘å…³å…è®¸æ ¹æ®äº‹ä»¶åˆ¤æ–­æµå‘ã€‚ç½‘å…³çš„æ¯ä¸ªå¤–å‡ºé¡ºåºæµéƒ½è¦è¿æ¥åˆ°ä¸€ä¸ªä¸­é—´æ•è·äº‹ä»¶ã€‚ å½“æµç¨‹åˆ°è¾¾ä¸€ä¸ªåŸºäºäº‹ä»¶ç½‘å…³ï¼Œç½‘å…³ä¼šè¿›å…¥ç­‰å¾…çŠ¶æ€ï¼šä¼šæš‚åœæ‰§è¡Œã€‚ä¸æ­¤åŒæ—¶ï¼Œä¼šä¸ºæ¯ä¸ªå¤–å‡ºé¡ºåºæµåˆ›å»ºç›¸å¯¹çš„äº‹ä»¶è®¢é˜…ã€‚</p>\n<p>äº‹ä»¶ç½‘å…³çš„å¤–å‡ºé¡ºåºæµå’Œæ™®é€šé¡ºåºæµä¸åŒï¼Œè¿™äº›é¡ºåºæµä¸ä¼šçœŸçš„â€æ‰§è¡Œâ€ï¼Œ ç›¸åå®ƒä»¬è®©æµç¨‹å¼•æ“å»å†³å®šæ‰§è¡Œåˆ°äº‹ä»¶ç½‘å…³çš„æµç¨‹éœ€è¦è®¢é˜…å“ªäº›äº‹ä»¶ã€‚ è¦è€ƒè™‘ä»¥ä¸‹æ¡ä»¶ï¼š</p>\n<ol>\n<li>äº‹ä»¶ç½‘å…³å¿…é¡»æœ‰ä¸¤æ¡æˆ–ä»¥ä¸Šå¤–å‡ºé¡ºåºæµï¼›</li>\n<li>äº‹ä»¶ç½‘å…³åï¼Œåªèƒ½ä½¿ç”¨intermediateCatchEventç±»å‹ï¼ˆactivitiä¸æ”¯æŒåŸºäºäº‹ä»¶ç½‘å…³åè¿æ¥ReceiveTaskï¼‰</li>\n<li>è¿æ¥åˆ°äº‹ä»¶ç½‘å…³çš„ä¸­é—´æ•è·äº‹ä»¶å¿…é¡»åªæœ‰ä¸€ä¸ªå…¥å£é¡ºåºæµã€‚</li>\n</ol>\n<h1 id=\"äº‹ä»¶\"><a href=\"#äº‹ä»¶\" class=\"headerlink\" title=\"äº‹ä»¶\"></a>äº‹ä»¶</h1><p>äº‹ä»¶ï¼ˆeventï¼‰é€šå¸¸ç”¨äºä¸ºæµç¨‹ç”Ÿå‘½å‘¨æœŸä¸­å‘ç”Ÿçš„äº‹æƒ…å»ºæ¨¡ã€‚äº‹ä»¶æ€»æ˜¯å›¾å½¢åŒ–ä¸ºåœ†åœˆã€‚åœ¨BPMN 2.0ä¸­ï¼Œæœ‰ä¸¤ç§ä¸»è¦çš„äº‹ä»¶åˆ†ç±»ï¼š<em>æ•è·ï¼ˆcatchingï¼‰</em>ä¸<em>æŠ›å‡ºï¼ˆthrowingï¼‰</em>äº‹ä»¶ã€‚</p>\n<ul>\n<li><strong>æ•è·:</strong> å½“æµç¨‹æ‰§è¡Œåˆ°è¾¾è¿™ä¸ªäº‹ä»¶æ—¶ï¼Œä¼šç­‰å¾…ç›´åˆ°è§¦å‘å™¨åŠ¨ä½œã€‚è§¦å‘å™¨çš„ç±»å‹ç”±å…¶ä¸­çš„å›¾æ ‡ï¼Œæˆ–è€…è¯´XMLä¸­çš„ç±»å‹å£°æ˜è€Œå®šä¹‰ã€‚æ•è·äº‹ä»¶ä¸æŠ›å‡ºäº‹ä»¶æ˜¾ç¤ºä¸Šçš„åŒºåˆ«ï¼Œæ˜¯å…¶å†…éƒ¨çš„å›¾æ ‡æ²¡æœ‰å¡«å……ï¼ˆå³æ˜¯ç™½è‰²çš„ï¼‰ã€‚</li>\n<li><strong>æŠ›å‡º:</strong> å½“æµç¨‹æ‰§è¡Œåˆ°è¾¾è¿™ä¸ªäº‹ä»¶æ—¶ï¼Œä¼šè§¦å‘ä¸€ä¸ªè§¦å‘å™¨ã€‚è§¦å‘å™¨çš„ç±»å‹ï¼Œç”±å…¶ä¸­çš„å›¾æ ‡ï¼Œæˆ–è€…è¯´XMLä¸­çš„ç±»å‹å£°æ˜è€Œå®šä¹‰ã€‚æŠ›å‡ºäº‹ä»¶ä¸æ•è·äº‹ä»¶æ˜¾ç¤ºä¸Šçš„åŒºåˆ«ï¼Œæ˜¯å…¶å†…éƒ¨çš„å›¾æ ‡å¡«å……ä¸ºé»‘è‰²ã€‚</li>\n</ul>\n<h2 id=\"å®šæ—¶äº‹ä»¶\"><a href=\"#å®šæ—¶äº‹ä»¶\" class=\"headerlink\" title=\"å®šæ—¶äº‹ä»¶\"></a>å®šæ—¶äº‹ä»¶</h2><p>å®šæ—¶è§¦å‘çš„ç›¸å…³äº‹ä»¶ï¼ŒåŒ…æ‹¬å®šæ—¶å™¨å¯åŠ¨äº‹ä»¶ï¼Œå®šæ—¶å™¨æ•è·ä¸­é—´ä»¶äº‹ä»¶ï¼Œå®šæ—¶å™¨è¾¹ç•Œäº‹ä»¶</p>\n<h3 id=\"å®šæ—¶å™¨å¯åŠ¨äº‹ä»¶\"><a href=\"#å®šæ—¶å™¨å¯åŠ¨äº‹ä»¶\" class=\"headerlink\" title=\"å®šæ—¶å™¨å¯åŠ¨äº‹ä»¶\"></a>å®šæ—¶å™¨å¯åŠ¨äº‹ä»¶</h3><p>å®šæ—¶å™¨å¯åŠ¨äº‹ä»¶ï¼ˆtimer start eventï¼‰åœ¨æŒ‡å®šæ—¶é—´åˆ›å»ºæµç¨‹å®ä¾‹ã€‚åœ¨æµç¨‹åªéœ€è¦å¯åŠ¨ä¸€æ¬¡ï¼Œæˆ–è€…æµç¨‹éœ€è¦åœ¨ç‰¹å®šçš„æ—¶é—´é—´éš”é‡å¤å¯åŠ¨æ—¶ï¼Œéƒ½å¯ä»¥ä½¿ç”¨ã€‚</p>\n<p><em><strong>è¯·æ³¨æ„</strong>ï¼š</em>å­æµç¨‹ä¸èƒ½æœ‰å®šæ—¶å™¨å¯åŠ¨äº‹ä»¶ã€‚</p>\n<p><em><strong>è¯·æ³¨æ„</strong>ï¼š</em>å®šæ—¶å™¨å¯åŠ¨äº‹ä»¶ï¼Œåœ¨æµç¨‹éƒ¨ç½²çš„åŒæ—¶å°±å¼€å§‹è®¡æ—¶ã€‚ä¸éœ€è¦è°ƒç”¨startProcessInstanceByXXXå°±ä¼šåœ¨æ—¶é—´å¯åŠ¨ã€‚è°ƒç”¨startProcessInstanceByXXXæ—¶ä¼šåœ¨å®šæ—¶å¯åŠ¨ä¹‹å¤–é¢å¤–å¯åŠ¨ä¸€ä¸ªæµç¨‹ã€‚</p>\n<p><em><strong>è¯·æ³¨æ„</strong>ï¼š</em>å½“éƒ¨ç½²å¸¦æœ‰å®šæ—¶å™¨å¯åŠ¨äº‹ä»¶çš„æµç¨‹çš„æ›´æ–°ç‰ˆæœ¬æ—¶ï¼Œä¸Šä¸€ç‰ˆæœ¬çš„å®šæ—¶å™¨ä½œä¸šä¼šè¢«ç§»é™¤ã€‚è¿™æ˜¯å› ä¸ºé€šå¸¸å¹¶ä¸å¸Œæœ›æ—§ç‰ˆæœ¬çš„æµç¨‹ä»ç„¶è‡ªåŠ¨å¯åŠ¨æ–°çš„æµç¨‹å®ä¾‹ã€‚</p>\n<p>å®šæ—¶å™¨å¯åŠ¨äº‹ä»¶ï¼Œç”¨å…¶ä¸­æœ‰ä¸€ä¸ªé’Ÿè¡¨å›¾æ ‡çš„åœ†åœˆæ¥è¡¨ç¤ºã€‚</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220327223547656.png\"\n                      alt=\"image-20220327223547656\"\n                ></p>\n<p>æ¡ˆä¾‹ï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220327231015715.png\"\n                      alt=\"image-20220327231015715\"\n                ></p>\n<p>åœ¨å®šæ—¶å¯åŠ¨çš„èŠ‚ç‚¹è®¾ç½®æ—¶é—´ï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220327231055237.png\"\n                      alt=\"image-20220327231055237\"\n                ></p>\n<p>å¯ä»¥é€šè¿‡FlowableUIä¸­çš„éƒ¨ç½²æ¥æ¼”ç¤ºï¼Œé€šè¿‡FlowableUIæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œæ²¡æœ‰å¯åŠ¨æµç¨‹å®ä¾‹çš„æƒ…å†µä¸‹ï¼Œåˆ°é‡Œ23:14:14ç§’çš„æ—¶å€™è‡ªåŠ¨å¸®åŠ©æˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªæµç¨‹å®ä¾‹ã€‚</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220327231551538.png\"\n                      alt=\"image-20220327231551538\"\n                ></p>\n<h3 id=\"å®šæ—¶å™¨æ•è·ä¸­é—´äº‹ä»¶\"><a href=\"#å®šæ—¶å™¨æ•è·ä¸­é—´äº‹ä»¶\" class=\"headerlink\" title=\"å®šæ—¶å™¨æ•è·ä¸­é—´äº‹ä»¶\"></a>å®šæ—¶å™¨æ•è·ä¸­é—´äº‹ä»¶</h3><p>å½“ç¬¬ä¸€ä¸ªäººå·¥å¤„ç†å®Œæˆåï¼Œç¬¬äºŒä¸ªäººå·¥å¤„ç†çš„ä»»åŠ¡éœ€è¦åœ¨2022-03-27T23:25:14ä¹‹åæ‰§è¡Œ</p>\n<p>æ¡ˆä¾‹ï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220327232259428.png\"\n                      alt=\"image-20220327232259428\"\n                ></p>\n<p>é€šè¿‡FlowableUIçš„æ¡ˆä¾‹æ¼”ç¤ºæˆ‘ä»¬å¯ä»¥çœ‹åˆ°åä¸€ä¸ªä»»åŠ¡æ˜¯åœ¨å®šæ—¶æ—¶é—´ä¹‹åæ‰§è¡Œçš„</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220327232624091.png\"\n                      alt=\"image-20220327232624091\"\n                ></p>\n<h3 id=\"å®šæ—¶å™¨è¾¹ç•Œäº‹ä»¶\"><a href=\"#å®šæ—¶å™¨è¾¹ç•Œäº‹ä»¶\" class=\"headerlink\" title=\"å®šæ—¶å™¨è¾¹ç•Œäº‹ä»¶\"></a>å®šæ—¶å™¨è¾¹ç•Œäº‹ä»¶</h3><p>äººå·¥ä»»åŠ¡1å¦‚æœåœ¨å®šä¹‰çš„<code>2022-03-27T23:36:14</code>è¿™ä¸ªæ—¶é—´ä¹‹å‰è¿˜æ²¡æœ‰å¤„ç†ï¼Œé‚£ä¹ˆå°±ä¼šè§¦å‘å®šæ—¶è¾¹ç•Œäº‹ä»¶ï¼Œä»è€Œä»äººå·¥ä»»åŠ¡3.</p>\n<p>æ¡ˆä¾‹</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220327233132259.png\"\n                      alt=\"image-20220327233132259\"\n                ></p>\n<p>å‘å¸ƒå¯åŠ¨æµç¨‹</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220327233410596.png\"\n                      alt=\"image-20220327233410596\"\n                ></p>\n<p>ç„¶ååœ¨å¼ ä¸‰è¿™ä¸ªä½ç½®æˆ‘ä»¬ä¸å®Œæˆï¼Œç­‰åˆ°å®šæ—¶åˆ°æ¥ï¼Œè¾¾åˆ°å®šæ—¶çš„æ—¶é—´ï¼Œä»»åŠ¡è¿›å…¥åˆ°äº†äººå·¥å®¡æ‰¹ä¸‰</p>\n<h3 id=\"timeDuration\"><a href=\"#timeDuration\" class=\"headerlink\" title=\"timeDuration\"></a>timeDuration</h3><p>â€‹       åœ¨å®šæ—¶äº‹ä»¶ä¸­æˆ‘ä»¬ä¸€å®šè¦æ”¾å¼€å¦‚ä¸‹çš„é…ç½®ï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220329082431920.png\"\n                      alt=\"image-20220329082431920\"\n                ></p>\n<p>æŒ‡å®šè®¡æ—¶å™¨åœ¨å¯åŠ¨å‰åº”ç­‰å¾…å¤šé•¿çš„æ—¶é—´ï¼Œé¦–å…ˆä¸€å®šæ—¶å™¨å¯åŠ¨äº‹ä»¶ä¸ºä¾‹ï¼š</p>\n<h4 id=\"å¼€å§‹äº‹ä»¶\"><a href=\"#å¼€å§‹äº‹ä»¶\" class=\"headerlink\" title=\"å¼€å§‹äº‹ä»¶\"></a>å¼€å§‹äº‹ä»¶</h4><p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220328200755160.png\"\n                      alt=\"image-20220328200755160\"\n                ></p>\n<p>å¯ä»¥é€šè¿‡FlowableUIçš„åº”ç”¨æ¥éªŒè¯</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220328202242555.png\"\n                      alt=\"image-20220328202242555\"\n                ></p>\n<p>å‘å¸ƒä»»åŠ¡åç„¶åæˆ‘ä»¬ç­‰å¾…ä¸¤åˆ†é’Ÿå°±å¯ä»¥çœ‹åˆ°ä»»åŠ¡åˆ°äº†<code>zhangsan</code>çš„ä½ç½®ã€‚æˆ–è€…æˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨SpringBootæ•´åˆFlowableçš„é¡¹ç›®ä¸­æ·»åŠ å¯¹åº”çš„Controlleræ¥å¤„ç†</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Autowired</span></span><br><span class=\"line\"><span class=\"keyword\">private</span> ProcessEngine processEngine;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@GetMapping(&quot;/deploy&quot;)</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> String <span class=\"title function_\">deploy</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"type\">Deployment</span> <span class=\"variable\">deployment</span> <span class=\"operator\">=</span> processEngine.getRepositoryService().createDeployment()</span><br><span class=\"line\">            .addClasspathResource(<span class=\"string\">&quot;test003.bpmn20.xml&quot;</span>)</span><br><span class=\"line\">            .name(<span class=\"string\">&quot;ç­‰å¾…å®šæ—¶å™¨å¯åŠ¨äº‹ä»¶&quot;</span>)</span><br><span class=\"line\">            .deploy();</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">&quot;éƒ¨ç½²ä»»åŠ¡æˆåŠŸ....&quot;</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>æäº¤è¯·æ±‚å®Œæˆéƒ¨ç½²æ“ä½œ</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220328202918399.png\"\n                      alt=\"image-20220328202918399\"\n                ></p>\n<p>ç”Ÿæˆäº†å¯¹åº”çš„Taskè®°å½•</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220328203621023.png\"\n                      alt=\"image-20220328203621023\"\n                ></p>\n<p><strong>æ³¨æ„</strong>ï¼šåœ¨äº‹ä»¶ä¸­ä¸€å®šè¦å¼€å¯å¼‚æ­¥ä»»åŠ¡ï¼Œä¸ç„¶ç›¸å…³çš„äº‹ä»¶æ˜¯ä¸ä¼šè§¦å‘çš„ï¼</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220328203656000.png\"\n                      alt=\"image-20220328203656000\"\n                ></p>\n<h4 id=\"ä¸­é—´äº‹ä»¶\"><a href=\"#ä¸­é—´äº‹ä»¶\" class=\"headerlink\" title=\"ä¸­é—´äº‹ä»¶\"></a>ä¸­é—´äº‹ä»¶</h4><p>ç„¶åæ¥çœ‹çœ‹ä¸­é—´äº‹ä»¶çš„ç­‰å¾…å®šæ—¶å™¨äº‹ä»¶æ¡ˆä¾‹ï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220328204205453.png\"\n                      alt=\"image-20220328204205453\"\n                ></p>\n<p>æ¡ˆä¾‹ç”±ä¸¤ä¸ªè‡ªåŠ¨ä»»åŠ¡å’Œä¸€ä¸ªå®šæ—¶å™¨ä¸­é—´äº‹ä»¶ç»„æˆï¼Œåœ¨å®šæ—¶ä»»åŠ¡ä¸­ç»‘å®šäº†ä¸¤ä¸ªJavaDelegateçš„Javaç±»æ¥å¤„ç†</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">SignalStartOnedelegate</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">JavaDelegate</span> &#123;</span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">execute</span><span class=\"params\">(DelegateExecution execution)</span> &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;-------è§¦å‘äº†-111--------&gt;&quot;</span>+ LocalDateTime.now().toString());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">SignalStartTwodelegate</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">JavaDelegate</span> &#123;</span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">execute</span><span class=\"params\">(DelegateExecution execution)</span> &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;-------è§¦å‘äº†222---------&gt;&quot;</span>+ LocalDateTime.now().toString());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<p>ç„¶åæµç¨‹å›¾ä¸­çš„å…³è”ä¸º</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220328204349358.png\"\n                      alt=\"image-20220328204349358\"\n                ></p>\n<p>å¦ä¸€ä¸ªç±»ä¼¼ï¼Œç„¶åå®šæ—¶å™¨ä¸­é—´äº‹ä»¶çš„ç­‰å¾…æ—¶é—´è®¾ç½®æ˜¯2åˆ†é’Ÿã€‚æˆ‘ä»¬éƒ¨ç½²åé€šè¿‡Javaä»£ç æ¥æ¼”ç¤ºçœ‹çœ‹</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">test01</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> Exception&#123;</span><br><span class=\"line\">    <span class=\"type\">Deployment</span> <span class=\"variable\">deployment</span> <span class=\"operator\">=</span> processEngine.getRepositoryService().createDeployment()</span><br><span class=\"line\">            .addClasspathResource(<span class=\"string\">&quot;ç­‰å¾…å®šæ—¶å™¨ä¸­é—´äº‹ä»¶.bpmn20.xml&quot;</span>)</span><br><span class=\"line\">            .name(<span class=\"string\">&quot;ç­‰å¾…å®šæ—¶ä¸­é—´äº‹ä»¶...&quot;</span>)</span><br><span class=\"line\">            .deploy();</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;-----&quot;</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ç„¶åæˆ‘ä»¬éœ€è¦å¯åŠ¨æµç¨‹å®ä¾‹ï¼Œä¹‹åç­‰å¾…ä¸¤åˆ†é’Ÿçœ‹æ•ˆæœ</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * å¯åŠ¨æµç¨‹å®ä¾‹</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">startProcessInstanceByKey</span><span class=\"params\">()</span>  <span class=\"keyword\">throws</span> Exception&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    processEngine.getRuntimeService()</span><br><span class=\"line\">            .startProcessInstanceById(<span class=\"string\">&quot;Test04:1:325edb10-ae95-11ec-a77f-c03c59ad2248&quot;</span>);</span><br><span class=\"line\">    <span class=\"comment\">// éœ€è¦åœ¨æ­¤é˜»å¡æ¯”ç­‰å¾…é•¿çš„æ—¶é—´</span></span><br><span class=\"line\">    TimeUnit.MINUTES.sleep(<span class=\"number\">3</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220328205718521.png\"\n                      alt=\"image-20220328205718521\"\n                ></p>\n<h4 id=\"è¾¹ç•Œäº‹ä»¶\"><a href=\"#è¾¹ç•Œäº‹ä»¶\" class=\"headerlink\" title=\"è¾¹ç•Œäº‹ä»¶\"></a>è¾¹ç•Œäº‹ä»¶</h4><p>æœ€åæˆ‘ä»¬æ¥çœ‹çœ‹è¾¹ç•Œäº‹ä»¶ä¸­çš„ç­‰å¾…å®šæ—¶å™¨çš„å¤„ç†ï¼Œæ¡ˆä¾‹ä¸ºï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220328210150212.png\"\n                      alt=\"image-20220328210150212\"\n                ></p>\n<p>è¯¥æ¡ˆä¾‹ç”±ä¸€ä¸ªäººå·¥å®¡æ ¸+ä¸¤ä¸ªè‡ªåŠ¨ä»»åŠ¡+å®šæ—¶å™¨è¾¹ç•Œäº‹ä»¶ç»„æˆï¼Œè‡ªåŠ¨ä»»åŠ¡ä¸€ç»‘å®šçš„JavaDelegateæ˜¯</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">SignalStartOnedelegate</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">JavaDelegate</span> &#123;</span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">execute</span><span class=\"params\">(DelegateExecution execution)</span> &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;-------è§¦å‘äº†-111--------&gt;&quot;</span>+ LocalDateTime.now().toString());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>è‡ªåŠ¨ä»»åŠ¡äºŒç»‘å®šçš„JavaDelegateæ˜¯</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">SignalStartTwodelegate</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">JavaDelegate</span> &#123;</span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">execute</span><span class=\"params\">(DelegateExecution execution)</span> &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;-------è§¦å‘äº†222---------&gt;&quot;</span>+ LocalDateTime.now().toString());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>å®šæ—¶å™¨è¾¹ç•Œäº‹ä»¶è®¾ç½®çš„æ˜¯30Sï¼Œä¹Ÿå°±æ˜¯å¦‚æœäººå·¥å®¡æ ¸åœ¨30Sè¿˜æ²¡å¤„ç†å°±ä¼šè§¦å‘è¾¹ç•Œäº‹ä»¶ï¼šé€šè¿‡ä»£ç æ¥æ¼”ç¤ºï¼Œéƒ¨ç½²æµç¨‹åéœ€è¦å¯åŠ¨æµç¨‹ï¼Œç„¶åç­‰å¾…30Sçœ‹æ§åˆ¶å°è¾“å‡º</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">test01</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> Exception&#123;</span><br><span class=\"line\">    <span class=\"type\">Deployment</span> <span class=\"variable\">deployment</span> <span class=\"operator\">=</span> processEngine.getRepositoryService().createDeployment()</span><br><span class=\"line\">            .addClasspathResource(<span class=\"string\">&quot;ç­‰å¾…å®šæ—¶å™¨è¾¹ç•Œäº‹ä»¶.bpmn20.xml&quot;</span>)</span><br><span class=\"line\">            .name(<span class=\"string\">&quot;ç­‰å¾…å®šæ—¶å™¨è¾¹ç•Œäº‹ä»¶...&quot;</span>)</span><br><span class=\"line\">            .deploy();</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;-----&quot;</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * å¯åŠ¨æµç¨‹å®ä¾‹</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">startProcessInstanceByKey</span><span class=\"params\">()</span>  <span class=\"keyword\">throws</span> Exception&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    processEngine.getRuntimeService()</span><br><span class=\"line\">            .startProcessInstanceById(<span class=\"string\">&quot;test05:1:c46f83bf-ae97-11ec-b055-c03c59ad2248&quot;</span>);</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;å¼€å§‹å¯åŠ¨çš„æ—¶é—´ï¼š&quot;</span> + LocalDateTime.now().toString());</span><br><span class=\"line\">    <span class=\"comment\">// éœ€è¦åœ¨æ­¤é˜»å¡æ¯”ç­‰å¾…é•¿çš„æ—¶é—´</span></span><br><span class=\"line\">    TimeUnit.MINUTES.sleep(<span class=\"number\">3</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ç­‰å¾…æ§åˆ¶å°è¾“å‡ºï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220328210905204.png\"\n                      alt=\"image-20220328210905204\"\n                ></p>\n<p>å°ç»“ï¼štimeDurationåœ¨ä¸‰ç§å®šæ—¶å™¨çš„äº‹ä»¶ä¸­</p>\n<ul>\n<li>å®šæ—¶å™¨å¯åŠ¨äº‹ä»¶ï¼šç­‰å¾…æŒ‡å®šæ—¶é—´åå¯åŠ¨æµç¨‹å®ä¾‹</li>\n<li>å®šæ—¶å™¨ä¸­é—´äº‹ä»¶ï¼šABä»»åŠ¡ä¸­é—´æœ‰ä¸ªå®šæ—¶å™¨ä¸­é—´äº‹ä»¶ï¼ŒAä»»åŠ¡å¤„ç†åéœ€è¦ç­‰å¾…å¯¹åº”çš„æ—¶é—´æ‰èƒ½æµè½¬åˆ°Bå¤„</li>\n<li>å®šæ—¶å™¨è¾¹ç•Œäº‹ä»¶ï¼šä»»åŠ¡Aç»‘å®šäº†å®šæ—¶å™¨è¾¹ç•Œäº‹ä»¶åï¼Œå¦‚æœåœ¨ç­‰å¾…æ—¶é—´ä»¥å†…Aæ²¡æœ‰å¤„ç†ä»»åŠ¡ï¼Œé‚£ä¹ˆå°±ä¼šè§¦å‘å¯¹åº”çš„è¾¹ç•Œäº‹ä»¶</li>\n</ul>\n<h3 id=\"timeCycle\"><a href=\"#timeCycle\" class=\"headerlink\" title=\"timeCycle\"></a>timeCycle</h3><p>æŒ‡å®šé‡å¤å‘¨æœŸï¼Œå¯ç”¨äºå‘¨æœŸæ€§å¯åŠ¨æµç¨‹ï¼Œæˆ–è€…ä¸ºè¶…æœŸç”¨æˆ·ä»»åŠ¡å¤šæ¬¡å‘é€æé†’,è¿™ä¸ªå…ƒç´ å¯ä»¥ä½¿ç”¨ä¸¤ç§æ ¼å¼</p>\n<ul>\n<li>ç¬¬ä¸€ç§æ˜¯æŒ‰ç…§<a class=\"link\"   href=\"http://en.wikipedia.org/wiki/ISO_8601#Repeating_intervals\" >ISO 8601<i class=\"fas fa-external-link-alt\"></i></a>æ ‡å‡†å®šä¹‰çš„å¾ªç¯æ—¶é—´å‘¨æœŸã€‚ä¾‹å¦‚ï¼ˆä¸‰æ¬¡é‡å¤é—´éš”ï¼Œæ¯æ¬¡é—´éš”ä¸º10å°æ—¶ï¼‰ï¼šR3&#x2F;PT10H</li>\n<li>ä¹Ÿå¯ä»¥ä½¿ç”¨<em>timeCycle</em>çš„å¯é€‰å±æ€§<em>endDate</em>ï¼Œæˆ–è€…åƒè¿™æ ·ç›´æ¥å†™åœ¨æ—¶é—´è¡¨è¾¾å¼çš„ç»“å°¾ï¼š<code>R3/PT10H/$&#123;EndDate&#125;</code>ã€‚ å½“åˆ°è¾¾endDateæ—¶ï¼Œåº”ç”¨ä¼šåœæ­¢ï¼Œå¹¶ä¸ºè¯¥ä»»åŠ¡åˆ›å»ºå…¶ä»–ä½œä¸š</li>\n<li>ä¹Ÿå¯ä»¥é€šè¿‡cronè¡¨è¾¾å¼æ¥å¤„ç†</li>\n</ul>\n<h4 id=\"å¼€å§‹äº‹ä»¶-1\"><a href=\"#å¼€å§‹äº‹ä»¶-1\" class=\"headerlink\" title=\"å¼€å§‹äº‹ä»¶\"></a>å¼€å§‹äº‹ä»¶</h4><p>ç¼–å†™æ¡ˆä¾‹æ¥æ¼”ç¤ºï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220328213218525.png\"\n                      alt=\"image-20220328213218525\"\n                ></p>\n<p>é‡å¤æ—¶é—´è®¾ç½®ä¸º R3PT30S é‡å¤3æ¬¡ï¼Œé—´éš”30æè¿°ï¼Œè‡ªåŠ¨ä»»åŠ¡ç»‘å®šçš„æ˜¯JavaDelegate</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">SignalStartOnedelegate</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">JavaDelegate</span> &#123;</span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">execute</span><span class=\"params\">(DelegateExecution execution)</span> &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;-------è§¦å‘äº†-111--------&gt;&quot;</span>+ LocalDateTime.now().toString());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220328213330813.png\"\n                      alt=\"image-20220328213330813\"\n                ></p>\n<p>ç„¶åæˆ‘ä»¬éƒ¨ç½²çœ‹æ•ˆæœ</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">test01</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> Exception&#123;</span><br><span class=\"line\">    <span class=\"type\">Deployment</span> <span class=\"variable\">deployment</span> <span class=\"operator\">=</span> processEngine.getRepositoryService().createDeployment()</span><br><span class=\"line\">            .addClasspathResource(<span class=\"string\">&quot;é‡å¤å¯åŠ¨äº‹ä»¶.bpmn20.xml&quot;</span>)</span><br><span class=\"line\">            .name(<span class=\"string\">&quot;ç­‰å¾…å®šæ—¶å™¨è¾¹ç•Œäº‹ä»¶...&quot;</span>)</span><br><span class=\"line\">            .deploy();</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;-----&quot;</span>);</span><br><span class=\"line\">    <span class=\"comment\">// éœ€è¦åœ¨æ­¤é˜»å¡æ¯”ç­‰å¾…é•¿çš„æ—¶é—´</span></span><br><span class=\"line\">    TimeUnit.MINUTES.sleep(<span class=\"number\">3</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220328213955271.png\"\n                      alt=\"image-20220328213955271\"\n                ></p>\n<p>ç„¶åæˆ‘ä»¬å†æŒ‡å®šä¸‹endDateæ¥çœ‹çœ‹æ¡ˆä¾‹ï¼Œç›´æ¥å¯ä»¥åœ¨xmlä¸­æ¥å¤„ç†</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">timerEventDefinition</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">timeCycle</span>&gt;</span>R3/PT30S/2022-03-28T21:46:11+00:00<span class=\"tag\">&lt;/<span class=\"name\">timeCycle</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">timerEventDefinition</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220328214459137.png\"\n                      alt=\"image-20220328214459137\"\n                ></p>\n<p>æ­¤å¤–è¿˜å¯ä»¥é€šè¿‡cronè¡¨è¾¾å¼æ¥å¤„ç†ï¼š</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">0 0/5 * * * ?</span><br></pre></td></tr></table></figure>\n\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220328215255141.png\"\n                      alt=\"image-20220328215255141\"\n                ></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220328215340678.png\"\n                      alt=\"image-20220328215340678\"\n                ></p>\n<h4 id=\"ä¸­é—´äº‹ä»¶-1\"><a href=\"#ä¸­é—´äº‹ä»¶-1\" class=\"headerlink\" title=\"ä¸­é—´äº‹ä»¶\"></a>ä¸­é—´äº‹ä»¶</h4><p>&amp;emsp;timeCycleä½œä¸ºä¸­é—´äº‹ä»¶çš„è¯ï¼Œåªä¼šæ‰§è¡Œä¸€æ¬¡ï¼Œæ¡ˆä¾‹å¦‚ä¸‹</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220328225250878.png\"\n                      alt=\"image-20220328225250878\"\n                ></p>\n<p>æ¡ˆä¾‹ä¸­çš„è‡ªåŠ¨ä»»åŠ¡ä¸€äºŒå¯¹åº”ç»‘å®šå¦‚ä¸‹çš„JavaDelegate.</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">SignalStartOnedelegate</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">JavaDelegate</span> &#123;</span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">execute</span><span class=\"params\">(DelegateExecution execution)</span> &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;-------è§¦å‘äº†-111--------&gt;&quot;</span>+ LocalDateTime.now().toString());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">SignalStartTwodelegate</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">JavaDelegate</span> &#123;</span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">execute</span><span class=\"params\">(DelegateExecution execution)</span> &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;-------è§¦å‘äº†222---------&gt;&quot;</span>+ LocalDateTime.now().toString());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ä¸­é—´äº‹ä»¶çš„è®¾ç½®ä¸º<code>R3/PT30S</code> å¾ªç¯3æ¬¡ï¼Œé—´éš”30ç§’æ‰§è¡Œï¼Œä½†æ˜¯è¿™æ˜¯ä¸­é—´äº‹ä»¶ï¼Œå…¶å®åªä¼šæ‰§è¡Œä¸€æ¬¡ï¼Œæˆ‘æ¥çœ‹æ•ˆæœ</p>\n<p>éƒ¨ç½²åå¯åŠ¨</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Autowired</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> ProcessEngine processEngine;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">test01</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> Exception&#123;</span><br><span class=\"line\">        <span class=\"type\">Deployment</span> <span class=\"variable\">deployment</span> <span class=\"operator\">=</span> processEngine.getRepositoryService().createDeployment()</span><br><span class=\"line\">                .addClasspathResource(<span class=\"string\">&quot;å¾ªç¯ä¸­é—´äº‹ä»¶.bpmn20.xml&quot;</span>)</span><br><span class=\"line\">                .name(<span class=\"string\">&quot;å¾ªç¯ä¸­é—´äº‹ä»¶...&quot;</span>)</span><br><span class=\"line\">                .deploy();</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;-----&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * å¯åŠ¨æµç¨‹å®ä¾‹</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">startProcessInstanceByKey</span><span class=\"params\">()</span>  <span class=\"keyword\">throws</span> Exception&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        processEngine.getRuntimeService()</span><br><span class=\"line\">                .startProcessInstanceById(<span class=\"string\">&quot;cycle-middle-event:1:3456ade8-aea7-11ec-9064-c03c59ad2248&quot;</span>);</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;å¼€å§‹å¯åŠ¨çš„æ—¶é—´ï¼š&quot;</span> + LocalDateTime.now().toString());</span><br><span class=\"line\">        <span class=\"comment\">// éœ€è¦åœ¨æ­¤é˜»å¡æ¯”ç­‰å¾…é•¿çš„æ—¶é—´</span></span><br><span class=\"line\">        TimeUnit.MINUTES.sleep(<span class=\"number\">3</span>);</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220328225931465.png\"\n                      alt=\"image-20220328225931465\"\n                ></p>\n<h4 id=\"è¾¹ç•Œäº‹ä»¶-1\"><a href=\"#è¾¹ç•Œäº‹ä»¶-1\" class=\"headerlink\" title=\"è¾¹ç•Œäº‹ä»¶\"></a>è¾¹ç•Œäº‹ä»¶</h4><p>åœ¨è¾¹ç•Œäº‹ä»¶ä¸­ï¼Œå®šä¹‰äº†å¾ªç¯æ¡ä»¶<code>R3/PT30S</code>ç†è®ºä¸Šè¦å¾ªç¯3æ¬¡ï¼Œé—´éš”30Sï¼Œå•å…¶å®ä¹Ÿåªä¼šæ‰§è¡Œä¸€æ¬¡ï¼Œæ¥çœ‹æ¡ˆä¾‹</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220328231838967.png\"\n                      alt=\"image-20220328231838967\"\n                ></p>\n<p>æ¡ˆä¾‹ä¸Šé¢çš„ç­‰å¾…æ—¶é—´çš„æ˜¯ä¸€æ ·çš„ï¼Œåªæ˜¯è¾¹ç•Œäº‹ä»¶æ˜¯30S</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220328231955441.png\"\n                      alt=\"image-20220328231955441\"\n                ></p>\n<p>ç„¶åæˆ‘ä»¬éƒ¨ç½²å¯åŠ¨æµç¨‹çœ‹æ•ˆæœ</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220329094741327.png\"\n                      alt=\"image-20220329094741327\"\n                ></p>\n<p>æ€»ç»“ï¼šå¾ªç¯è®¾å®š</p>\n<ul>\n<li>å¯åŠ¨äº‹ä»¶ï¼šæ ¹æ®è®¾ç½®å¾ªç¯å¯åŠ¨æµç¨‹å®ä¾‹</li>\n<li>ä¸­é—´äº‹ä»¶ï¼šå³ä½¿è®¾ç½®äº†å¾ªç¯æ—¶é—´ä¹Ÿåªä¼šè§¦å‘å¼‚å¸¸</li>\n<li>è¾¹ç•Œäº‹ä»¶ï¼šå³ä½¿è®¾ç½®äº†å¾ªç¯æ—¶é—´ä¹Ÿåªä¼šè§¦å‘å¼‚å¸¸</li>\n</ul>\n<h2 id=\"æ¶ˆæ¯äº‹ä»¶\"><a href=\"#æ¶ˆæ¯äº‹ä»¶\" class=\"headerlink\" title=\"æ¶ˆæ¯äº‹ä»¶\"></a>æ¶ˆæ¯äº‹ä»¶</h2><p>æ¶ˆæ¯äº‹ä»¶ï¼ˆmessage eventï¼‰ï¼Œæ˜¯æŒ‡å¼•ç”¨å…·åæ¶ˆæ¯çš„äº‹ä»¶ã€‚æ¶ˆæ¯å…·æœ‰åå­—ä¸è½½è·ã€‚ä¸ä¿¡å·ä¸åŒï¼Œæ¶ˆæ¯äº‹ä»¶åªæœ‰ä¸€ä¸ªæ¥æ”¶è€…</p>\n<h3 id=\"å¯åŠ¨äº‹ä»¶\"><a href=\"#å¯åŠ¨äº‹ä»¶\" class=\"headerlink\" title=\"å¯åŠ¨äº‹ä»¶\"></a>å¯åŠ¨äº‹ä»¶</h3><p>æ¶ˆæ¯å¯åŠ¨äº‹ä»¶ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬é€šè¿‡æ¥æ”¶åˆ°æŸäº›æ¶ˆæ¯åæ¥å¯åŠ¨æµç¨‹å®ä¾‹ï¼Œæ¯”å¦‚æ¥æ”¶åˆ°äº†ä¸€å°é‚®ä»¶ï¼Œä¸€æ¡çŸ­ä¿¡ç­‰ï¼Œå…·ä½“é€šè¿‡æ¡ˆä¾‹æ¥è®²è§£</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220329103837021.png\"\n                      alt=\"image-20220329103837021\"\n                ></p>\n<p>æˆ‘ä»¬éœ€è¦å…ˆå®šä¹‰ä¸€ä¸ªæ¶ˆæ¯</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220329105849732.png\"\n                      alt=\"image-20220329105849732\"\n                ></p>\n<p>ç„¶ååœ¨æ¶ˆæ¯å¼€å§‹èŠ‚ç‚¹å‡ºå¼•ç”¨</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220329105922977.png\"\n                      alt=\"image-20220329105922977\"\n                ></p>\n<p>ç„¶åé€šè¿‡ä»£ç æ¥å¤„ç†ï¼Œéƒ¨ç½²å’Œå¯åŠ¨</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Deploy</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"title function_\">testDeploy</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> Exception &#123;</span><br><span class=\"line\">    <span class=\"comment\">//RepositoryService repositoryService = processEngine.getRepositoryService();</span></span><br><span class=\"line\">    <span class=\"type\">Deployment</span> <span class=\"variable\">deploy</span> <span class=\"operator\">=</span> repositoryService.createDeployment()</span><br><span class=\"line\">            .addClasspathResource(<span class=\"string\">&quot;æ¶ˆæ¯å¯åŠ¨äº‹ä»¶.bpmn20.xml&quot;</span>)</span><br><span class=\"line\">            .name(<span class=\"string\">&quot;æ¶ˆæ¯å¯åŠ¨äº‹ä»¶&quot;</span>)</span><br><span class=\"line\">            .deploy();</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;deploy.getId() = &quot;</span> + deploy.getId());</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;deploy.getName() = &quot;</span> + deploy.getName());</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;éƒ¨ç½²å¼€å§‹çš„æ—¶é—´ï¼š&quot;</span> + <span class=\"keyword\">new</span> <span class=\"title class_\">Date</span>());</span><br><span class=\"line\">    <span class=\"comment\">//TimeUnit.MINUTES.sleep(3);</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>éƒ¨ç½²åä¸ä¼šè‡ªåŠ¨å¯åŠ¨ï¼Œæˆ‘ä»¬éœ€è¦æ¥æ”¶ç›¸å…³çš„ä¿¡æ¯åæ¥è§¦å‘ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  * é€šè¿‡æ¶ˆæ¯æ¥å¯åŠ¨ä¸€ä¸ªæµç¨‹å®ä¾‹</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\"> <span class=\"meta\">@Test</span></span><br><span class=\"line\"> <span class=\"keyword\">void</span> <span class=\"title function_\">startFlow</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> Exception&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// runtimeService.startProcessInstanceById(&quot;event006:1:0532e730-af02-11ec-8cf3-c03c59ad2248&quot;);</span></span><br><span class=\"line\">    <span class=\"comment\">// æ³¨æ„ï¼šå‘é€æ¶ˆæ¯å‘é€çš„åº”è¯¥æ˜¯æ¶ˆæ¯çš„åç§°è€Œä¸æ˜¯æ¶ˆæ¯çš„ID</span></span><br><span class=\"line\">     runtimeService.startProcessInstanceByMessage(<span class=\"string\">&quot;ç¬¬ä¸€ä¸ªæ¶ˆæ¯&quot;</span>);</span><br><span class=\"line\">     System.out.println(<span class=\"string\">&quot;å¯åŠ¨æ—¶é—´ï¼š&quot;</span> + <span class=\"keyword\">new</span> <span class=\"title class_\">Date</span>());</span><br><span class=\"line\">     <span class=\"comment\">// æˆ‘ä»¬å¾—ä¿è¯å®¹å™¨çš„è¿è¡Œï¼Œæ‰€ä»¥éœ€è¦é˜»å¡</span></span><br><span class=\"line\">     TimeUnit.MINUTES.sleep(<span class=\"number\">1</span>);</span><br><span class=\"line\"> &#125;</span><br></pre></td></tr></table></figure>\n\n\n\n\n\n<p><strong>æ³¨æ„</strong>ï¼šå‘é€æ¶ˆæ¯å‘é€çš„åº”è¯¥æ˜¯æ¶ˆæ¯çš„åç§°è€Œä¸æ˜¯æ¶ˆæ¯çš„IDï¼ŒæŠ¥é”™å¦‚ä¸‹ï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220329104823537.png\"\n                      alt=\"image-20220329104823537\"\n                ></p>\n<h3 id=\"ä¸­é—´äº‹ä»¶-2\"><a href=\"#ä¸­é—´äº‹ä»¶-2\" class=\"headerlink\" title=\"ä¸­é—´äº‹ä»¶\"></a>ä¸­é—´äº‹ä»¶</h3><p>æ¶ˆæ¯ä¸­é—´äº‹ä»¶å°±æ˜¯åœ¨æµç¨‹è¿ä½œä¸­éœ€è¦æ¶ˆæ¯æ¥è§¦å‘çš„åœºæ™¯ï¼Œæ¡ˆä¾‹æ¼”ç¤ºï¼Œ<code>è‡ªåŠ¨æµç¨‹1</code>å¤„ç†å®Œæˆåï¼Œéœ€è¦æ¥æ”¶ç‰¹å®šçš„æ¶ˆæ¯ä¹‹åæ‰èƒ½è¿›å…¥åˆ°<code>è‡ªåŠ¨æµç¨‹2</code></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220329111412619.png\"\n                      alt=\"image-20220329111412619\"\n                ></p>\n<p>æ¶ˆæ¯ä¸­é—´äº‹ä»¶ç»‘å®šçš„æ¶ˆæ¯ä¸º</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220329111446959.png\"\n                      alt=\"image-20220329111446959\"\n                ></p>\n<p>ç„¶åé€šè¿‡ä»£ç æ¥æ¼”ç¤º</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  * Deploy</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\"> <span class=\"meta\">@Test</span></span><br><span class=\"line\"> <span class=\"keyword\">void</span> <span class=\"title function_\">testDeploy</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> Exception &#123;</span><br><span class=\"line\">     <span class=\"comment\">//RepositoryService repositoryService = processEngine.getRepositoryService();</span></span><br><span class=\"line\">     <span class=\"type\">Deployment</span> <span class=\"variable\">deploy</span> <span class=\"operator\">=</span> repositoryService.createDeployment()</span><br><span class=\"line\">             .addClasspathResource(<span class=\"string\">&quot;æ¶ˆæ¯ä¸­é—´äº‹ä»¶.bpmn20.xml&quot;</span>)</span><br><span class=\"line\">             .name(<span class=\"string\">&quot;æ¶ˆæ¯ä¸­é—´äº‹ä»¶&quot;</span>)</span><br><span class=\"line\">             .deploy();</span><br><span class=\"line\">     System.out.println(<span class=\"string\">&quot;deploy.getId() = &quot;</span> + deploy.getId());</span><br><span class=\"line\">     System.out.println(<span class=\"string\">&quot;deploy.getName() = &quot;</span> + deploy.getName());</span><br><span class=\"line\">     System.out.println(<span class=\"string\">&quot;éƒ¨ç½²å¼€å§‹çš„æ—¶é—´ï¼š&quot;</span> + <span class=\"keyword\">new</span> <span class=\"title class_\">Date</span>());</span><br><span class=\"line\">     <span class=\"comment\">//TimeUnit.MINUTES.sleep(3);</span></span><br><span class=\"line\"> &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"> <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  * é€šè¿‡æ¶ˆæ¯æ¥å¯åŠ¨ä¸€ä¸ªæµç¨‹å®ä¾‹</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\"> <span class=\"meta\">@Test</span></span><br><span class=\"line\"> <span class=\"keyword\">void</span> <span class=\"title function_\">startFlow</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> Exception&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">     runtimeService.startProcessInstanceById(<span class=\"string\">&quot;event008:1:9217aa5e-af0e-11ec-b11f-c03c59ad2248&quot;</span>);</span><br><span class=\"line\">    <span class=\"comment\">// æ³¨æ„ï¼šå‘é€æ¶ˆæ¯å‘é€çš„åº”è¯¥æ˜¯æ¶ˆæ¯çš„åç§°è€Œä¸æ˜¯æ¶ˆæ¯çš„ID</span></span><br><span class=\"line\">     <span class=\"comment\">//runtimeService.startProcessInstanceByMessage(&quot;ç¬¬ä¸€ä¸ªæ¶ˆæ¯&quot;);</span></span><br><span class=\"line\">     System.out.println(<span class=\"string\">&quot;å¯åŠ¨æ—¶é—´ï¼š&quot;</span> + <span class=\"keyword\">new</span> <span class=\"title class_\">Date</span>());</span><br><span class=\"line\">     <span class=\"comment\">// æˆ‘ä»¬å¾—ä¿è¯å®¹å™¨çš„è¿è¡Œï¼Œæ‰€ä»¥éœ€è¦é˜»å¡</span></span><br><span class=\"line\">     <span class=\"comment\">//TimeUnit.MINUTES.sleep(1);</span></span><br><span class=\"line\"> &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"> <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  * ä¸­é—´äº‹ä»¶-å‘å¸ƒæ¶ˆæ¯</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\"> <span class=\"meta\">@Test</span></span><br><span class=\"line\"> <span class=\"keyword\">void</span> <span class=\"title function_\">recevedMsg</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">     <span class=\"comment\">// éœ€è¦æŸ¥è¯¢åˆ°executionId</span></span><br><span class=\"line\">     <span class=\"type\">String</span> <span class=\"variable\">processExecutionId</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;b5349e22-af0e-11ec-93e6-c03c59ad2248&quot;</span>;</span><br><span class=\"line\">     <span class=\"comment\">// æˆ‘ä»¬éœ€è¦æ ¹æ®æµç¨‹å®ä¾‹ç¼–å·æ‰¾åˆ°å¯¹åº”çš„æ‰§è¡Œç¼–å·</span></span><br><span class=\"line\">    <span class=\"comment\">/* Execution execution = runtimeService.createExecutionQuery()</span></span><br><span class=\"line\"><span class=\"comment\">             .processInstanceId(&quot;event008:1:9217aa5e-af0e-11ec-b11f-c03c59ad2248&quot;)</span></span><br><span class=\"line\"><span class=\"comment\">             .singleResult();</span></span><br><span class=\"line\"><span class=\"comment\">     System.out.println(&quot;-----------&gt;&quot;+execution.getId());*/</span></span><br><span class=\"line\">     runtimeService.messageEventReceived(<span class=\"string\">&quot;ç¬¬äºŒä¸ªæ¶ˆæ¯&quot;</span>,processExecutionId);</span><br><span class=\"line\"> &#125;</span><br></pre></td></tr></table></figure>\n\n<p>å¯ä»¥çœ‹åˆ°çš„è¾“å‡ºæ•ˆæœ</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220329112435376.png\"\n                      alt=\"image-20220329112435376\"\n                ></p>\n<h3 id=\"è¾¹ç•Œäº‹ä»¶-2\"><a href=\"#è¾¹ç•Œäº‹ä»¶-2\" class=\"headerlink\" title=\"è¾¹ç•Œäº‹ä»¶\"></a>è¾¹ç•Œäº‹ä»¶</h3><p>æ¶ˆæ¯è¾¹ç•Œäº‹ä»¶ï¼Œå¦‚æœåœ¨æ¶ˆæ¯è§¦å‘å‰è¿˜æ²¡æœ‰ï¼Œæ¡ˆä¾‹æ¼”ç¤ºï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220329113848978.png\"\n                      alt=\"image-20220329113848978\"\n                ></p>\n<p>éƒ¨ç½²æµç¨‹</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Deploy</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"title function_\">testDeploy</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> Exception &#123;</span><br><span class=\"line\">    <span class=\"comment\">//RepositoryService repositoryService = processEngine.getRepositoryService();</span></span><br><span class=\"line\">    <span class=\"type\">Deployment</span> <span class=\"variable\">deploy</span> <span class=\"operator\">=</span> repositoryService.createDeployment()</span><br><span class=\"line\">            .addClasspathResource(<span class=\"string\">&quot;æ¶ˆæ¯è¾¹ç•Œäº‹ä»¶.bpmn20.xml&quot;</span>)</span><br><span class=\"line\">            .name(<span class=\"string\">&quot;æ¶ˆæ¯è¾¹ç•Œäº‹ä»¶&quot;</span>)</span><br><span class=\"line\">            .deploy();</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;deploy.getId() = &quot;</span> + deploy.getId());</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;deploy.getName() = &quot;</span> + deploy.getName());</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;éƒ¨ç½²å¼€å§‹çš„æ—¶é—´ï¼š&quot;</span> + <span class=\"keyword\">new</span> <span class=\"title class_\">Date</span>());</span><br><span class=\"line\">    <span class=\"comment\">//TimeUnit.MINUTES.sleep(3);</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * é€šè¿‡æ¶ˆæ¯æ¥å¯åŠ¨ä¸€ä¸ªæµç¨‹å®ä¾‹</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"title function_\">startFlow</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> Exception&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    runtimeService.startProcessInstanceById(<span class=\"string\">&quot;event009:1:f2096787-af11-11ec-b290-c03c59ad2248&quot;</span>);</span><br><span class=\"line\">   <span class=\"comment\">// æ³¨æ„ï¼šå‘é€æ¶ˆæ¯å‘é€çš„åº”è¯¥æ˜¯æ¶ˆæ¯çš„åç§°è€Œä¸æ˜¯æ¶ˆæ¯çš„ID</span></span><br><span class=\"line\">    <span class=\"comment\">//runtimeService.startProcessInstanceByMessage(&quot;ç¬¬ä¸€ä¸ªæ¶ˆæ¯&quot;);</span></span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;å¯åŠ¨æ—¶é—´ï¼š&quot;</span> + <span class=\"keyword\">new</span> <span class=\"title class_\">Date</span>());</span><br><span class=\"line\">    <span class=\"comment\">// æˆ‘ä»¬å¾—ä¿è¯å®¹å™¨çš„è¿è¡Œï¼Œæ‰€ä»¥éœ€è¦é˜»å¡</span></span><br><span class=\"line\">    <span class=\"comment\">//TimeUnit.MINUTES.sleep(1);</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>éƒ¨ç½²æµç¨‹åå¯åŠ¨æµç¨‹å®ä¾‹ä¼šè¿è½¬åˆ°</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220329114038773.png\"\n                      alt=\"image-20220329114038773\"\n                ></p>\n<p>å¦‚æœäººå·¥å¤„ç†åœ¨æ¶ˆæ¯è®¢é˜…å‰æ²¡æœ‰å¤„ç†å°±ä¼šè§¦å‘è¾¹ç•Œäº‹ä»¶</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * è¾¹ç•Œäº‹ä»¶-å‘å¸ƒæ¶ˆæ¯</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"title function_\">recevedMsg</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// éœ€è¦æŸ¥è¯¢åˆ°executionId</span></span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">processExecutionId</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;1d503361-af12-11ec-89a4-c03c59ad2248&quot;</span>;</span><br><span class=\"line\">    <span class=\"comment\">// æˆ‘ä»¬éœ€è¦æ ¹æ®æµç¨‹å®ä¾‹ç¼–å·æ‰¾åˆ°å¯¹åº”çš„æ‰§è¡Œç¼–å·</span></span><br><span class=\"line\">   <span class=\"comment\">/* Execution execution = runtimeService.createExecutionQuery()</span></span><br><span class=\"line\"><span class=\"comment\">            .processInstanceId(&quot;event008:1:9217aa5e-af0e-11ec-b11f-c03c59ad2248&quot;)</span></span><br><span class=\"line\"><span class=\"comment\">            .singleResult();</span></span><br><span class=\"line\"><span class=\"comment\">    System.out.println(&quot;-----------&gt;&quot;+execution.getId());*/</span></span><br><span class=\"line\">    runtimeService.messageEventReceived(<span class=\"string\">&quot;ç¬¬ä¸‰ä¸ªæ¶ˆæ¯&quot;</span>,processExecutionId);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220329114505074.png\"\n                      alt=\"image-20220329114505074\"\n                ></p>\n<h2 id=\"é”™è¯¯äº‹ä»¶\"><a href=\"#é”™è¯¯äº‹ä»¶\" class=\"headerlink\" title=\"é”™è¯¯äº‹ä»¶\"></a>é”™è¯¯äº‹ä»¶</h2><p>é”™è¯¯äº‹ä»¶å¯ä»¥ç”¨åšä¸€ä¸ªæµç¨‹çš„å¼€å§‹äº‹ä»¶æˆ–è€…ä½œä¸ºä¸€ä¸ªä»»åŠ¡æˆ–è€…å­æµç¨‹çš„è¾¹ç•Œäº‹ä»¶ï¼Œé”™è¯¯äº‹ä»¶æ²¡æœ‰æä¾›ä½œç”¨ä¸­é—´äº‹ä»¶çš„åŠŸèƒ½ï¼Œè¿™ä¸€ç‚¹å’Œå‰é¢ä»‹ç»çš„å®šæ—¶å™¨äº‹ä»¶å’Œæ¶ˆæ¯äº‹ä»¶è¿˜æœ‰åŒºåˆ«çš„ã€‚</p>\n<h3 id=\"å¼€å§‹äº‹ä»¶-2\"><a href=\"#å¼€å§‹äº‹ä»¶-2\" class=\"headerlink\" title=\"å¼€å§‹äº‹ä»¶\"></a>å¼€å§‹äº‹ä»¶</h3><p>é”™è¯¯å¯åŠ¨äº‹ä»¶ï¼ˆerror start eventï¼‰ï¼Œå¯ç”¨äºè§¦å‘äº‹ä»¶å­æµç¨‹ï¼ˆEvent Sub-Processï¼‰ã€‚<strong>é”™è¯¯å¯åŠ¨äº‹ä»¶ä¸èƒ½ç”¨äºå¯åŠ¨æµç¨‹å®ä¾‹</strong>ã€‚</p>\n<p>é”™è¯¯å¯åŠ¨äº‹ä»¶æ€»æ˜¯ä¸­æ–­ã€‚æˆ‘ä»¬é€šè¿‡æ¡ˆä¾‹æ¥ä»‹ç»ã€‚æ­¤å¤„æˆ‘ä»¬ç”¨Eclipseæ¥ç»˜åˆ¶æµç¨‹å›¾ï¼Œç†Ÿæ‚‰ä¸‹Eclipseå·¥å…·</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220329235608917.png\"\n                      alt=\"image-20220329235608917\"\n                ></p>\n<p>æ³¨æ„ï¼šç»˜åˆ¶çš„æ˜¯å­æµç¨‹äº‹ä»¶ï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220330004724798.png\"\n                      alt=\"image-20220330004724798\"\n                ></p>\n<p>ç„¶åæˆ‘ä»¬å†å®šä¹‰ä¸€ä¸ªé”™è¯¯ï¼Œå†…å®¹ä¸ºï¼š</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">error</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;error01&quot;</span> <span class=\"attr\">errorCode</span>=<span class=\"string\">&quot;abcd&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>åœ¨FlowableUIä¸­æ²¡æ‰¾åˆ°é”™è¯¯å®šä¹‰çš„é€‰é¡¹ï¼Œæˆ‘ä»¬å°±åœ¨æµç¨‹æ–‡ä»¶ä¸­è‡ªå·±æ·»åŠ å³å¯ã€‚</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220329235702382.png\"\n                      alt=\"image-20220329235702382\"\n                ></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220329214507352.png\"\n                      alt=\"image-20220329214507352\"\n                ></p>\n<p>å®Œæ•´çš„æµç¨‹æ–‡ä»¶</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=<span class=\"string\">&quot;1.0&quot;</span> encoding=<span class=\"string\">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">definitions</span> <span class=\"attr\">xmlns</span>=<span class=\"string\">&quot;http://www.omg.org/spec/BPMN/20100524/MODEL&quot;</span> <span class=\"attr\">xmlns:xsi</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span> <span class=\"attr\">xmlns:xsd</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema&quot;</span> <span class=\"attr\">xmlns:activiti</span>=<span class=\"string\">&quot;http://activiti.org/bpmn&quot;</span> <span class=\"attr\">xmlns:bpmndi</span>=<span class=\"string\">&quot;http://www.omg.org/spec/BPMN/20100524/DI&quot;</span> <span class=\"attr\">xmlns:omgdc</span>=<span class=\"string\">&quot;http://www.omg.org/spec/DD/20100524/DC&quot;</span> <span class=\"attr\">xmlns:omgdi</span>=<span class=\"string\">&quot;http://www.omg.org/spec/DD/20100524/DI&quot;</span> <span class=\"attr\">typeLanguage</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema&quot;</span> <span class=\"attr\">expressionLanguage</span>=<span class=\"string\">&quot;http://www.w3.org/1999/XPath&quot;</span> <span class=\"attr\">targetNamespace</span>=<span class=\"string\">&quot;http://www.activiti.org/test&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">error</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;error01&quot;</span> <span class=\"attr\">errorCode</span>=<span class=\"string\">&quot;abcd&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">error</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">process</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;myProcess&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;My process&quot;</span> <span class=\"attr\">isExecutable</span>=<span class=\"string\">&quot;true&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">startEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;startevent1&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;Start&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">startEvent</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">serviceTask</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;servicetask1&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;è‡ªåŠ¨ä»»åŠ¡ä¸€&quot;</span> <span class=\"attr\">activiti:class</span>=<span class=\"string\">&quot;com.bobo.delegate.MyOneDelegate&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">serviceTask</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;flow1&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;startevent1&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;servicetask1&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">endEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;endevent1&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;End&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">endEvent</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;flow2&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;servicetask1&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;endevent1&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">subProcess</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;eventsubprocess1&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;Event sub Process&quot;</span> <span class=\"attr\">triggeredByEvent</span>=<span class=\"string\">&quot;true&quot;</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">startEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;errorstartevent1&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;Error start&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">errorEventDefinition</span> <span class=\"attr\">errorRef</span>=<span class=\"string\">&quot;error01&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">errorEventDefinition</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">startEvent</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">serviceTask</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;servicetask2&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;è‡ªåŠ¨ä»»åŠ¡äºŒ&quot;</span> <span class=\"attr\">activiti:class</span>=<span class=\"string\">&quot;com.bobo.delegate.MyTwoDelegate&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">serviceTask</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">endEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;endevent2&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;End&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">endEvent</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;flow3&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;servicetask2&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;endevent2&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;flow4&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;errorstartevent1&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;servicetask2&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">subProcess</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">process</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNDiagram</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNDiagram_myProcess&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNPlane</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;myProcess&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNPlane_myProcess&quot;</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;startevent1&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_startevent1&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;35.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;35.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;480.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;260.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;servicetask1&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_servicetask1&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;55.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;105.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;710.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;250.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;endevent1&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_endevent1&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;35.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;35.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;930.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;260.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;eventsubprocess1&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_eventsubprocess1&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;211.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;401.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;530.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;420.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;errorstartevent1&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_errorstartevent1&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;35.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;35.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;600.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;520.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;servicetask2&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_servicetask2&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;55.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;105.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;700.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;510.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;endevent2&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_endevent2&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;35.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;35.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;850.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;520.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;flow1&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_flow1&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;515.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;277.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;710.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;277.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;flow2&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_flow2&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;815.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;277.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;930.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;277.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;flow3&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_flow3&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;805.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;537.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;850.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;537.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;flow4&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_flow4&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;635.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;537.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;700.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;537.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNPlane</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNDiagram</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">definitions</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>ç„¶åæˆ‘ä»¬åœ¨ä¸»æµç¨‹ä¸­çš„<code>è‡ªåŠ¨ä»»åŠ¡ä¸€</code>ä¸­æˆ‘ä»¬æŠ›å‡ºå¼‚å¸¸</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">MyOneDelegate</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">JavaDelegate</span> &#123;</span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">execute</span><span class=\"params\">(DelegateExecution execution)</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;å®Œæˆè‡ªåŠ¨å®¡æ‰¹ä»»åŠ¡-----ã€‹MyOneDelegate&quot;</span> + LocalDateTime.now().toString());</span><br><span class=\"line\">        <span class=\"comment\">// ä¸šåŠ¡æ‰§è¡Œå‘ç°æœ‰é—®é¢˜ æ­¤å¤„çš„errorCodeéœ€è¦å’Œå®šä¹‰çš„erroræ ‡ç­¾ä¸­çš„errorCodeä¿æŒä¸€è‡´</span></span><br><span class=\"line\">        <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"title class_\">BpmnError</span>(<span class=\"string\">&quot;abcd&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ç„¶åæˆ‘ä»¬åœ¨<code>è‡ªå®šä¹‰ä»»åŠ¡äºŒ</code>ä¸­ç®€å•å®šä¹‰ä¸€ä¸ªè¾“å‡ºå³å¯ã€‚ç„¶åæˆ‘ä»¬éƒ¨ç½²ä»»åŠ¡</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">test01</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> Exception&#123;</span><br><span class=\"line\">    <span class=\"type\">ZipInputStream</span> <span class=\"variable\">in</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">ZipInputStream</span>(SpringBootFlowableApplicationTests.class.getClassLoader().getResourceAsStream(<span class=\"string\">&quot;é”™è¯¯å¯åŠ¨äº‹ä»¶.bar&quot;</span>));</span><br><span class=\"line\">    <span class=\"type\">Deployment</span> <span class=\"variable\">deployment</span> <span class=\"operator\">=</span> processEngine.getRepositoryService().createDeployment()</span><br><span class=\"line\">            .addZipInputStream(in)</span><br><span class=\"line\">            .name(<span class=\"string\">&quot;é”™è¯¯å¯åŠ¨äº‹ä»¶&quot;</span>)</span><br><span class=\"line\">            .deploy();</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;-----&quot;</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<p>ç„¶åæˆ‘ä»¬å†å¯åŠ¨æµç¨‹å®ä¾‹ï¼Œé‚£ä¹ˆè‡ªåŠ¨ä»»åŠ¡ä¸€å°±ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œç„¶åå¯¹åº”çš„å­æµç¨‹å°±ä¼šå¼€å§‹</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * å¯åŠ¨æµç¨‹å®ä¾‹</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">startProcessInstanceByKey</span><span class=\"params\">()</span>  <span class=\"keyword\">throws</span> Exception&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    processEngine.getRuntimeService()</span><br><span class=\"line\">            .startProcessInstanceById(<span class=\"string\">&quot;myProcess:1:c0462994-af79-11ec-8cae-c03c59ad2248&quot;</span>);</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;å¼€å§‹å¯åŠ¨çš„æ—¶é—´ï¼š&quot;</span> + LocalDateTime.now().toString());</span><br><span class=\"line\">    <span class=\"comment\">// éœ€è¦åœ¨æ­¤é˜»å¡æ¯”ç­‰å¾…é•¿çš„æ—¶é—´</span></span><br><span class=\"line\">    TimeUnit.MINUTES.sleep(<span class=\"number\">3</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<p>è¾“å‡ºç»“æœè·å–åˆ°äº†æˆ‘ä»¬æœŸæœ›çš„ç»“æœ</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220330000557061.png\"\n                      alt=\"image-20220330000557061\"\n                ></p>\n<p>é€šè¿‡è¾“å‡ºç»“æœä¹Ÿå¯ä»¥çœ‹åˆ°æ‰§è¡Œçš„è‡ªåŠ¨ä»»åŠ¡ä¸€åï¼ŒæŠ›å‡ºé”™è¯¯äº‹ä»¶<code>abcd</code>,å­æµç¨‹è§¦å‘å¹¶æ‰§è¡Œäº†ã€‚</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220330000741836.png\"\n                      alt=\"image-20220330000741836\"\n                ></p>\n<h3 id=\"è¾¹ç•Œäº‹ä»¶-3\"><a href=\"#è¾¹ç•Œäº‹ä»¶-3\" class=\"headerlink\" title=\"è¾¹ç•Œäº‹ä»¶\"></a>è¾¹ç•Œäº‹ä»¶</h3><p>å®šä¹‰å¦‚ä¸‹çš„æµç¨‹å›¾ï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220330004335187.png\"\n                      alt=\"image-20220330004335187\"\n                ></p>\n<p>æ³¨æ„ç»˜åˆ¶çš„æ—¶å€™</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220330004644673.png\"\n                      alt=\"image-20220330004644673\"\n                ></p>\n<p>xmlæ–‡ä»¶å†…å®¹ä¸ºï¼š</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=<span class=\"string\">&quot;1.0&quot;</span> encoding=<span class=\"string\">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">definitions</span> <span class=\"attr\">xmlns</span>=<span class=\"string\">&quot;http://www.omg.org/spec/BPMN/20100524/MODEL&quot;</span> <span class=\"attr\">xmlns:xsi</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span> <span class=\"attr\">xmlns:xsd</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema&quot;</span> <span class=\"attr\">xmlns:activiti</span>=<span class=\"string\">&quot;http://activiti.org/bpmn&quot;</span> <span class=\"attr\">xmlns:bpmndi</span>=<span class=\"string\">&quot;http://www.omg.org/spec/BPMN/20100524/DI&quot;</span> <span class=\"attr\">xmlns:omgdc</span>=<span class=\"string\">&quot;http://www.omg.org/spec/DD/20100524/DC&quot;</span> <span class=\"attr\">xmlns:omgdi</span>=<span class=\"string\">&quot;http://www.omg.org/spec/DD/20100524/DI&quot;</span> <span class=\"attr\">typeLanguage</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema&quot;</span> <span class=\"attr\">expressionLanguage</span>=<span class=\"string\">&quot;http://www.w3.org/1999/XPath&quot;</span> <span class=\"attr\">targetNamespace</span>=<span class=\"string\">&quot;http://www.activiti.org/test&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">error</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;error02&quot;</span> <span class=\"attr\">errorCode</span>=<span class=\"string\">&quot;a123&quot;</span> &gt;</span><span class=\"tag\">&lt;/<span class=\"name\">error</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">process</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;myProcess&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;My process&quot;</span> <span class=\"attr\">isExecutable</span>=<span class=\"string\">&quot;true&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">startEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;startevent1&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;Start&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">startEvent</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">serviceTask</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;servicetask2&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;è‡ªåŠ¨ä»»åŠ¡äºŒ&quot;</span> <span class=\"attr\">activiti:class</span>=<span class=\"string\">&quot;com.bobo.delegate.MyTwoDelegate&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">serviceTask</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">serviceTask</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;servicetask3&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;è‡ªåŠ¨ä»»åŠ¡ä¸‰&quot;</span> <span class=\"attr\">activiti:class</span>=<span class=\"string\">&quot;com.bobo.delegate.MyThreeDelegate&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">serviceTask</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">endEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;endevent2&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;End&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">endEvent</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;flow5&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;servicetask2&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;endevent2&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">endEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;endevent3&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;End&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">endEvent</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;flow6&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;servicetask3&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;endevent3&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">subProcess</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;subprocess1&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;Sub Process&quot;</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">startEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;startevent2&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;Start&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">startEvent</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">serviceTask</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;servicetask4&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;Service Task&quot;</span> <span class=\"attr\">activiti:class</span>=<span class=\"string\">&quot;com.bobo.delegate.MyOneDelegate&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">serviceTask</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">endEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;endevent4&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;End&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">endEvent</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;flow10&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;servicetask4&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;endevent4&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;flow11&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;startevent2&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;servicetask4&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">subProcess</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;flow8&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;startevent1&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;subprocess1&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;flow9&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;subprocess1&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;servicetask2&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">boundaryEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;boundaryerror1&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;Error&quot;</span> <span class=\"attr\">attachedToRef</span>=<span class=\"string\">&quot;subprocess1&quot;</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">errorEventDefinition</span> <span class=\"attr\">errorRef</span>=<span class=\"string\">&quot;error02&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">errorEventDefinition</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">boundaryEvent</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;flow12&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;boundaryerror1&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;servicetask3&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">process</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNDiagram</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNDiagram_myProcess&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNPlane</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;myProcess&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNPlane_myProcess&quot;</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;startevent1&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_startevent1&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;35.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;35.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;402.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;388.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;servicetask2&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_servicetask2&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;55.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;105.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;1285.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;368.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;servicetask3&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_servicetask3&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;55.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;105.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;1099.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;590.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;endevent2&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_endevent2&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;35.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;35.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;1440.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;378.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;endevent3&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_endevent3&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;35.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;35.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;1320.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;600.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;subprocess1&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_subprocess1&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;271.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;451.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;660.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;270.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;startevent2&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_startevent2&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;35.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;35.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;720.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;390.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;servicetask4&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_servicetask4&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;55.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;105.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;850.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;381.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;endevent4&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_endevent4&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;35.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;35.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;1030.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;391.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;boundaryerror1&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_boundaryerror1&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;30.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;30.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;950.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;520.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;flow5&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_flow5&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;1390.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;395.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;1440.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;395.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;flow6&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_flow6&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;1204.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;617.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;1320.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;617.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;flow10&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_flow10&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;955.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;408.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;1030.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;408.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;flow11&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_flow11&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;755.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;407.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;850.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;408.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;flow8&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_flow8&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;437.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;405.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;660.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;405.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;flow9&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_flow9&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;1111.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;405.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;1285.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;395.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;flow12&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_flow12&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;965.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;550.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;964.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;617.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;1099.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;617.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNPlane</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNDiagram</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">definitions</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>å¯¹åº”çš„ä¸‰ä¸ªè‡ªå®šä¹‰ä»»åŠ¡ç»‘å®šçš„JavaDelegateä¸ºï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">MyOneDelegate</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">JavaDelegate</span> &#123;</span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">execute</span><span class=\"params\">(DelegateExecution execution)</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;å®Œæˆè‡ªåŠ¨å®¡æ‰¹ä»»åŠ¡-----ã€‹MyOneDelegate&quot;</span> + LocalDateTime.now().toString());</span><br><span class=\"line\">        <span class=\"comment\">// ä¸šåŠ¡æ‰§è¡Œå‘ç°æœ‰é—®é¢˜ æ­¤å¤„çš„errorCodeéœ€è¦å’Œå®šä¹‰çš„erroræ ‡ç­¾ä¸­çš„errorCodeä¿æŒä¸€è‡´</span></span><br><span class=\"line\">        <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"title class_\">BpmnError</span>(<span class=\"string\">&quot;a123&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">MyTwoDelegate</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">JavaDelegate</span> &#123;</span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">execute</span><span class=\"params\">(DelegateExecution execution)</span> &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;MyTwoDelegate----&gt;æ‰§è¡Œäº†&quot;</span> + LocalDateTime.now().toString());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">MyThreeDelegate</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">JavaDelegate</span> &#123;</span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">execute</span><span class=\"params\">(DelegateExecution execution)</span> &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;MyThreeDelegate----&gt;æ‰§è¡Œäº†&quot;</span> + LocalDateTime.now().toString());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ç„¶åæˆ‘ä»¬éƒ¨ç½²æ–‡ä»¶</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">test01</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> Exception&#123;</span><br><span class=\"line\">    <span class=\"type\">ZipInputStream</span> <span class=\"variable\">in</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">ZipInputStream</span>(SpringBootFlowableApplicationTests.class</span><br><span class=\"line\">            .getClassLoader()</span><br><span class=\"line\">            .getResourceAsStream(<span class=\"string\">&quot;é”™è¯¯è¾¹ç•Œäº‹ä»¶.bar&quot;</span>));</span><br><span class=\"line\">    <span class=\"type\">Deployment</span> <span class=\"variable\">deployment</span> <span class=\"operator\">=</span> processEngine.getRepositoryService().createDeployment()</span><br><span class=\"line\">            .addZipInputStream(in)</span><br><span class=\"line\">            .name(<span class=\"string\">&quot;é”™è¯¯è¾¹ç•Œäº‹ä»¶&quot;</span>)</span><br><span class=\"line\">            .deploy();</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;-----&quot;</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>éƒ¨ç½²æˆåŠŸåæˆ‘ä»¬å†å¯åŠ¨ä¸€ä¸ªæµç¨‹å®ä¾‹ï¼Œè¿›å…¥åˆ°è‡ªå®šä¹‰ä»»åŠ¡ä¸€å¤„ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œè§¦å‘è¾¹ç•Œå¼‚å¸¸å¤„ç†</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220330003624235.png\"\n                      alt=\"image-20220330003624235\"\n                ></p>\n<p>è¾“å‡ºçš„ç»“æœå’Œæˆ‘ä»¬é¢„æœŸçš„æ˜¯ä¸€æ ·çš„</p>\n<h2 id=\"ä¿¡å·äº‹ä»¶\"><a href=\"#ä¿¡å·äº‹ä»¶\" class=\"headerlink\" title=\"ä¿¡å·äº‹ä»¶\"></a>ä¿¡å·äº‹ä»¶</h2><h3 id=\"å¼€å§‹äº‹ä»¶-3\"><a href=\"#å¼€å§‹äº‹ä»¶-3\" class=\"headerlink\" title=\"å¼€å§‹äº‹ä»¶\"></a>å¼€å§‹äº‹ä»¶</h3><p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220330095103789.png\"\n                      alt=\"image-20220330095103789\"\n                ></p>\n<p>ç„¶åè®¾ç½®ç›¸å…³çš„å±æ€§ï¼Œå¹¶å®šä¹‰ä¸€ä¸ªä¿¡å·</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220330095157518.png\"\n                      alt=\"image-20220330095157518\"\n                ></p>\n<p>ç„¶ååœ¨æˆ‘ä»¬å£°æ˜çš„ä¿¡å·å¼€å§‹å¼•ç”¨æˆ‘ä»¬ä¸Šé¢åˆ›å»ºçš„ä¿¡å·</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220330095725130.png\"\n                      alt=\"image-20220330095725130\"\n                ></p>\n<p>å®Œæ•´çš„xmlæ–‡ä»¶</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=<span class=\"string\">&quot;1.0&quot;</span> encoding=<span class=\"string\">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">definitions</span> <span class=\"attr\">xmlns</span>=<span class=\"string\">&quot;http://www.omg.org/spec/BPMN/20100524/MODEL&quot;</span> <span class=\"attr\">xmlns:xsi</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span> <span class=\"attr\">xmlns:xsd</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema&quot;</span> <span class=\"attr\">xmlns:flowable</span>=<span class=\"string\">&quot;http://flowable.org/bpmn&quot;</span> <span class=\"attr\">xmlns:bpmndi</span>=<span class=\"string\">&quot;http://www.omg.org/spec/BPMN/20100524/DI&quot;</span> <span class=\"attr\">xmlns:omgdc</span>=<span class=\"string\">&quot;http://www.omg.org/spec/DD/20100524/DC&quot;</span> <span class=\"attr\">xmlns:omgdi</span>=<span class=\"string\">&quot;http://www.omg.org/spec/DD/20100524/DI&quot;</span> <span class=\"attr\">typeLanguage</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema&quot;</span> <span class=\"attr\">expressionLanguage</span>=<span class=\"string\">&quot;http://www.w3.org/1999/XPath&quot;</span> <span class=\"attr\">targetNamespace</span>=<span class=\"string\">&quot;http://www.flowable.org/processdef&quot;</span> <span class=\"attr\">exporter</span>=<span class=\"string\">&quot;Flowable Open Source Modeler&quot;</span> <span class=\"attr\">exporterVersion</span>=<span class=\"string\">&quot;6.7.2&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">signal</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;signal01&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;firstSignal&quot;</span> <span class=\"attr\">flowable:scope</span>=<span class=\"string\">&quot;global&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">signal</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">process</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;event2001&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;ä¿¡å·å¯åŠ¨äº‹ä»¶&quot;</span> <span class=\"attr\">isExecutable</span>=<span class=\"string\">&quot;true&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">startEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;start01&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;ä¿¡å·å¼€å§‹&quot;</span> <span class=\"attr\">isInterrupting</span>=<span class=\"string\">&quot;true&quot;</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">signalEventDefinition</span> <span class=\"attr\">signalRef</span>=<span class=\"string\">&quot;signal01&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">signalEventDefinition</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">startEvent</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">serviceTask</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;task1&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;è‡ªåŠ¨ä»»åŠ¡&quot;</span> <span class=\"attr\">flowable:class</span>=<span class=\"string\">&quot;com.bobo.flow.delegate.MyTwoJavaDelegate&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">serviceTask</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">endEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;end01&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;ç»“æŸ&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">endEvent</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;sid-0FF05CCE-85CB-416C-8D36-A935AF9586C2&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;task1&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;end01&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;sid-C8AD1AEE-5FCB-4419-8596-74532DD71ABC&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;start01&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;task1&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">process</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNDiagram</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNDiagram_event2001&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNPlane</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;event2001&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNPlane_event2001&quot;</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;start01&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_start01&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;30.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;30.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;285.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;172.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;task1&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_task1&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;80.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;100.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;467.5&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;147.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;end01&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_end01&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;28.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;28.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;612.5&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;173.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;sid-C8AD1AEE-5FCB-4419-8596-74532DD71ABC&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_sid-C8AD1AEE-5FCB-4419-8596-74532DD71ABC&quot;</span> <span class=\"attr\">flowable:sourceDockerX</span>=<span class=\"string\">&quot;15.0&quot;</span> <span class=\"attr\">flowable:sourceDockerY</span>=<span class=\"string\">&quot;15.0&quot;</span> <span class=\"attr\">flowable:targetDockerX</span>=<span class=\"string\">&quot;50.0&quot;</span> <span class=\"attr\">flowable:targetDockerY</span>=<span class=\"string\">&quot;40.0&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;314.94999961358405&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;187.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;467.4999999999399&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;187.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;sid-0FF05CCE-85CB-416C-8D36-A935AF9586C2&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_sid-0FF05CCE-85CB-416C-8D36-A935AF9586C2&quot;</span> <span class=\"attr\">flowable:sourceDockerX</span>=<span class=\"string\">&quot;50.0&quot;</span> <span class=\"attr\">flowable:sourceDockerY</span>=<span class=\"string\">&quot;40.0&quot;</span> <span class=\"attr\">flowable:targetDockerX</span>=<span class=\"string\">&quot;14.0&quot;</span> <span class=\"attr\">flowable:targetDockerY</span>=<span class=\"string\">&quot;14.0&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;567.449999999996&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;187.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;612.5&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;187.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNPlane</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNDiagram</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">definitions</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>éƒ¨ç½²æµç¨‹ï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  * Deploy</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\"> <span class=\"meta\">@Test</span></span><br><span class=\"line\"> <span class=\"keyword\">void</span> <span class=\"title function_\">testDeploy</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> Exception &#123;</span><br><span class=\"line\">     <span class=\"comment\">//RepositoryService repositoryService = processEngine.getRepositoryService();</span></span><br><span class=\"line\">     <span class=\"type\">Deployment</span> <span class=\"variable\">deploy</span> <span class=\"operator\">=</span> repositoryService.createDeployment()</span><br><span class=\"line\">             .addClasspathResource(<span class=\"string\">&quot;ä¿¡å·å¯åŠ¨äº‹ä»¶.bpmn20.xml&quot;</span>)</span><br><span class=\"line\">             .name(<span class=\"string\">&quot;ä¿¡å·å¯åŠ¨äº‹ä»¶&quot;</span>)</span><br><span class=\"line\">             .deploy();</span><br><span class=\"line\">     System.out.println(<span class=\"string\">&quot;deploy.getId() = &quot;</span> + deploy.getId());</span><br><span class=\"line\">     System.out.println(<span class=\"string\">&quot;deploy.getName() = &quot;</span> + deploy.getName());</span><br><span class=\"line\">     System.out.println(<span class=\"string\">&quot;éƒ¨ç½²å¼€å§‹çš„æ—¶é—´ï¼š&quot;</span> + <span class=\"keyword\">new</span> <span class=\"title class_\">Date</span>());</span><br><span class=\"line\">     <span class=\"comment\">//TimeUnit.MINUTES.sleep(3);</span></span><br><span class=\"line\"> &#125;</span><br></pre></td></tr></table></figure>\n\n<p>æµç¨‹æ˜¯ä¸€ä¸ªä¿¡æ¯å¯åŠ¨äº‹ä»¶ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦é‡Šæ”¾å¯¹åº”çš„ä¿¡å·æ¥è§¦å‘æµç¨‹çš„å¯åŠ¨</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * é€šè¿‡ä¿¡å·å‘é€æ¥è§¦å‘ä¿¡å·å¯åŠ¨äº‹ä»¶çš„æ‰§è¡Œ</span></span><br><span class=\"line\"><span class=\"comment\"> * å…¨å±€çš„ä¿¡æ¯</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"title function_\">signalReceived</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> Exception &#123;</span><br><span class=\"line\">    runtimeService.signalEventReceived(<span class=\"string\">&quot;firstSignal&quot;</span>);</span><br><span class=\"line\">    <span class=\"comment\">// æˆ‘ä»¬å¾—ä¿è¯å®¹å™¨çš„è¿è¡Œï¼Œæ‰€ä»¥éœ€è¦é˜»å¡</span></span><br><span class=\"line\">    TimeUnit.MINUTES.sleep(<span class=\"number\">1</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>é€šè¿‡è¾“å‡ºè¯­å¥å¯ä»¥çœ‹åˆ°è‡ªå®šä¹‰ä»»åŠ¡è§¦å‘äº†</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220330100203036.png\"\n                      alt=\"image-20220330100203036\"\n                ></p>\n<p>æˆ‘ä»¬å¯ä»¥æŠŠä¿¡æ¯çš„ä½œç”¨åŸŸç”±åŸæ¥çš„golbalå…¨å±€çš„è°ƒæ•´ä¸ºprocessInstanceï¼Œæµ‹è¯•åå‘ç°è¿˜æ˜¯æ‰§è¡Œäº†ï¼Œè¯´æ˜åœ¨å¯åŠ¨äº‹ä»¶ä¿¡æ¯çš„ä½œç”¨åŸŸå…¶å®æ˜¯ä¸èµ·ä½œç”¨çš„ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;signal id=<span class=\"string\">&quot;signal01&quot;</span> name=<span class=\"string\">&quot;firstSignal&quot;</span> flowable:scope=<span class=\"string\">&quot;processInstance&quot;</span>&gt;&lt;/signal&gt;</span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"ä¸­é—´æ•è·äº‹ä»¶\"><a href=\"#ä¸­é—´æ•è·äº‹ä»¶\" class=\"headerlink\" title=\"ä¸­é—´æ•è·äº‹ä»¶\"></a>ä¸­é—´æ•è·äº‹ä»¶</h3><p>æ¡ˆä¾‹å¦‚ä¸‹ï¼šå½“æˆ‘ä»¬å¯åŠ¨äº‹ä»¶åï¼Œä¼šé˜»å¡åœ¨è¿™ä¸ªæ¶ˆæ¯è·å–ä¸­é—´äº‹ä»¶å¤„ï¼Œç­‰å¾…ç›¸å…³ä¿¡å·åæ‰ä¼šç»§ç»­æµè½¬ã€‚</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220330101820083.png\"\n                      alt=\"image-20220330101820083\"\n                ></p>\n<p>å¯¹åº”çš„ä¿¡å·ç»‘å®š</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=<span class=\"string\">&quot;1.0&quot;</span> encoding=<span class=\"string\">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">definitions</span> <span class=\"attr\">xmlns</span>=<span class=\"string\">&quot;http://www.omg.org/spec/BPMN/20100524/MODEL&quot;</span> <span class=\"attr\">xmlns:xsi</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span> <span class=\"attr\">xmlns:xsd</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema&quot;</span> <span class=\"attr\">xmlns:flowable</span>=<span class=\"string\">&quot;http://flowable.org/bpmn&quot;</span> <span class=\"attr\">xmlns:bpmndi</span>=<span class=\"string\">&quot;http://www.omg.org/spec/BPMN/20100524/DI&quot;</span> <span class=\"attr\">xmlns:omgdc</span>=<span class=\"string\">&quot;http://www.omg.org/spec/DD/20100524/DC&quot;</span> <span class=\"attr\">xmlns:omgdi</span>=<span class=\"string\">&quot;http://www.omg.org/spec/DD/20100524/DI&quot;</span> <span class=\"attr\">typeLanguage</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema&quot;</span> <span class=\"attr\">expressionLanguage</span>=<span class=\"string\">&quot;http://www.w3.org/1999/XPath&quot;</span> <span class=\"attr\">targetNamespace</span>=<span class=\"string\">&quot;http://www.flowable.org/processdef&quot;</span> <span class=\"attr\">exporter</span>=<span class=\"string\">&quot;Flowable Open Source Modeler&quot;</span> <span class=\"attr\">exporterVersion</span>=<span class=\"string\">&quot;6.7.2&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">signal</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;singnal02&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;secondSingal&quot;</span> <span class=\"attr\">flowable:scope</span>=<span class=\"string\">&quot;global&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">signal</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">process</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;event2002&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;ä¿¡å·ä¸­é—´æ•è·äº‹ä»¶&quot;</span> <span class=\"attr\">isExecutable</span>=<span class=\"string\">&quot;true&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">startEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;start01&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;å¼€å§‹&quot;</span> <span class=\"attr\">flowable:formFieldValidation</span>=<span class=\"string\">&quot;true&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">startEvent</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">intermediateCatchEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;signal01&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;ä¿¡å·æ•è·ä¸­é—´äº‹ä»¶&quot;</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">signalEventDefinition</span> <span class=\"attr\">signalRef</span>=<span class=\"string\">&quot;singnal02&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">signalEventDefinition</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">intermediateCatchEvent</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;sid-FBD95BC3-BA38-4863-95E6-E7D484FE80CB&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;start01&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;signal01&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">serviceTask</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;task01&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;è‡ªåŠ¨ä»»åŠ¡&quot;</span> <span class=\"attr\">flowable:class</span>=<span class=\"string\">&quot;com.bobo.flow.delegate.MyTwoJavaDelegate&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">serviceTask</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;sid-BF5FB671-5895-4FAC-8F92-E4BC4DEE821A&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;signal01&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;task01&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">endEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;end01&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;ç»“æŸä»»åŠ¡&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">endEvent</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;sid-4F4853C5-0FE6-48AB-BD80-A37CF807D90D&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;task01&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;end01&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">process</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNDiagram</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNDiagram_event2002&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNPlane</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;event2002&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNPlane_event2002&quot;</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;start01&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_start01&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;30.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;30.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;120.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;150.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;signal01&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_signal01&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;30.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;30.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;318.5&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;150.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;task01&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_task01&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;80.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;100.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;495.5&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;122.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;end01&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_end01&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;28.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;28.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;690.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;151.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;sid-BF5FB671-5895-4FAC-8F92-E4BC4DEE821A&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_sid-BF5FB671-5895-4FAC-8F92-E4BC4DEE821A&quot;</span> <span class=\"attr\">flowable:sourceDockerX</span>=<span class=\"string\">&quot;15.0&quot;</span> <span class=\"attr\">flowable:sourceDockerY</span>=<span class=\"string\">&quot;15.0&quot;</span> <span class=\"attr\">flowable:targetDockerX</span>=<span class=\"string\">&quot;50.0&quot;</span> <span class=\"attr\">flowable:targetDockerY</span>=<span class=\"string\">&quot;40.0&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;348.44853390329115&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;164.78775666509335&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;495.49999999999903&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;162.7068396226415&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;sid-4F4853C5-0FE6-48AB-BD80-A37CF807D90D&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_sid-4F4853C5-0FE6-48AB-BD80-A37CF807D90D&quot;</span> <span class=\"attr\">flowable:sourceDockerX</span>=<span class=\"string\">&quot;50.0&quot;</span> <span class=\"attr\">flowable:sourceDockerY</span>=<span class=\"string\">&quot;40.0&quot;</span> <span class=\"attr\">flowable:targetDockerX</span>=<span class=\"string\">&quot;14.0&quot;</span> <span class=\"attr\">flowable:targetDockerY</span>=<span class=\"string\">&quot;14.0&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;595.4499999999996&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;162.94542586750788&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;690.0016973189436&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;164.73506227304313&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;sid-FBD95BC3-BA38-4863-95E6-E7D484FE80CB&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_sid-FBD95BC3-BA38-4863-95E6-E7D484FE80CB&quot;</span> <span class=\"attr\">flowable:sourceDockerX</span>=<span class=\"string\">&quot;15.0&quot;</span> <span class=\"attr\">flowable:sourceDockerY</span>=<span class=\"string\">&quot;15.0&quot;</span> <span class=\"attr\">flowable:targetDockerX</span>=<span class=\"string\">&quot;15.0&quot;</span> <span class=\"attr\">flowable:targetDockerY</span>=<span class=\"string\">&quot;15.0&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;149.94999953609073&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;165.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;318.5&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;165.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNPlane</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNDiagram</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">definitions</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>å…ˆéƒ¨ç½²ï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Deploy</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"title function_\">testDeploy</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> Exception &#123;</span><br><span class=\"line\">    <span class=\"comment\">//RepositoryService repositoryService = processEngine.getRepositoryService();</span></span><br><span class=\"line\">    <span class=\"type\">Deployment</span> <span class=\"variable\">deploy</span> <span class=\"operator\">=</span> repositoryService.createDeployment()</span><br><span class=\"line\">            .addClasspathResource(<span class=\"string\">&quot;ä¿¡å·ä¸­é—´æ•è·äº‹ä»¶.bpmn20.xml&quot;</span>)</span><br><span class=\"line\">            .name(<span class=\"string\">&quot;ä¿¡å·ä¸­é—´æ•è·äº‹ä»¶&quot;</span>)</span><br><span class=\"line\">            .deploy();</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;deploy.getId() = &quot;</span> + deploy.getId());</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;deploy.getName() = &quot;</span> + deploy.getName());</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;éƒ¨ç½²å¼€å§‹çš„æ—¶é—´ï¼š&quot;</span> + <span class=\"keyword\">new</span> <span class=\"title class_\">Date</span>());</span><br><span class=\"line\">    <span class=\"comment\">//TimeUnit.MINUTES.sleep(3);</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ç„¶åæˆ‘ä»¬éœ€è¦å¯åŠ¨æµç¨‹ï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"title function_\">startFlow</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> Exception&#123;</span><br><span class=\"line\">    runtimeService.startProcessInstanceById(<span class=\"string\">&quot;event2002:1:adc5b8f8-afcf-11ec-959a-c03c59ad2248&quot;</span>);</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;å¯åŠ¨æ—¶é—´ï¼š&quot;</span> + <span class=\"keyword\">new</span> <span class=\"title class_\">Date</span>());</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>å‘é€ä¿¡å·ä¿¡æ¯</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * é€šè¿‡ä¿¡å·å‘é€æ¥è§¦å‘ä¿¡å·å¯åŠ¨äº‹ä»¶çš„æ‰§è¡Œ</span></span><br><span class=\"line\"><span class=\"comment\"> * å…¨å±€çš„ä¿¡æ¯</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"title function_\">signalGolbal</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> Exception &#123;</span><br><span class=\"line\">    runtimeService.signalEventReceived(<span class=\"string\">&quot;secondSingal&quot;</span>);</span><br><span class=\"line\">    <span class=\"comment\">// æˆ‘ä»¬å¾—ä¿è¯å®¹å™¨çš„è¿è¡Œï¼Œæ‰€ä»¥éœ€è¦é˜»å¡</span></span><br><span class=\"line\">    TimeUnit.MINUTES.sleep(<span class=\"number\">1</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ç„¶åè¢«æˆ‘ä»¬çš„ä¿¡å·æ•è·ä¸­é—´äº‹ä»¶æ•è·</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220330102256367.png\"\n                      alt=\"image-20220330102256367\"\n                ></p>\n<p>ä¿¡å·ä½œç”¨åŸŸä¸ºprocessInstanceçš„æƒ…å†µ</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220330102524238.png\"\n                      alt=\"image-20220330102524238\"\n                ></p>\n<p>é¦–å…ˆé’ˆå¯¹processInstanceçš„ä¿¡å·ï¼Œæˆ‘ä»¬å‘é€globalä¿¡å·æ˜¯ä¸ä¼šè¢«æ•è·çš„</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220330102808127.png\"\n                      alt=\"image-20220330102808127\"\n                ></p>\n<p>ç„¶åprocessInstanceçš„ä¿¡æ¯æˆ‘ä»¬éœ€è¦åœ¨æµç¨‹å®ä¾‹å†…éƒ¨æŠ›å‡ºä¿¡å·</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220330112205035.png\"\n                      alt=\"image-20220330112205035\"\n                ></p>\n<h3 id=\"ä¸­é—´æŠ›å‡ºäº‹ä»¶\"><a href=\"#ä¸­é—´æŠ›å‡ºäº‹ä»¶\" class=\"headerlink\" title=\"ä¸­é—´æŠ›å‡ºäº‹ä»¶\"></a>ä¸­é—´æŠ›å‡ºäº‹ä»¶</h3><p>ä¿¡å·ä¸­é—´æŠ›å‡ºäº‹ä»¶ä¹Ÿå°±æ˜¯åœ¨æµç¨‹æ‰§è¡Œä¸­çš„æŸä¸ªèŠ‚ç‚¹æŠ›å‡ºäº†å¯¹åº”çš„ä¿¡å·ï¼Œç„¶åå¯¹åº”çš„ä¿¡å·ä¸­é—´æ•è·äº‹ä»¶å°±ä¼šè§¦å‘ï¼Œæˆ‘ä»¬é€šè¿‡å…·ä½“çš„æ¡ˆä¾‹æ¥æ¼”ç¤ºå¦‚ï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220330235847392.png\"\n                      alt=\"image-20220330235847392\"\n                ></p>\n<p>å®šä¹‰ä¿¡æ¯ä¿¡æ¯ï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220330193530718.png\"\n                      alt=\"image-20220330193530718\"\n                ></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220331000011215.png\"\n                      alt=\"image-20220331000011215\"\n                ></p>\n<p>å®Œæ•´çš„xmlæ–‡ä»¶</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=<span class=\"string\">&quot;1.0&quot;</span> encoding=<span class=\"string\">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">definitions</span> <span class=\"attr\">xmlns</span>=<span class=\"string\">&quot;http://www.omg.org/spec/BPMN/20100524/MODEL&quot;</span> <span class=\"attr\">xmlns:xsi</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span> <span class=\"attr\">xmlns:xsd</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema&quot;</span> <span class=\"attr\">xmlns:flowable</span>=<span class=\"string\">&quot;http://flowable.org/bpmn&quot;</span> <span class=\"attr\">xmlns:bpmndi</span>=<span class=\"string\">&quot;http://www.omg.org/spec/BPMN/20100524/DI&quot;</span> <span class=\"attr\">xmlns:omgdc</span>=<span class=\"string\">&quot;http://www.omg.org/spec/DD/20100524/DC&quot;</span> <span class=\"attr\">xmlns:omgdi</span>=<span class=\"string\">&quot;http://www.omg.org/spec/DD/20100524/DI&quot;</span> <span class=\"attr\">typeLanguage</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema&quot;</span> <span class=\"attr\">expressionLanguage</span>=<span class=\"string\">&quot;http://www.w3.org/1999/XPath&quot;</span> <span class=\"attr\">targetNamespace</span>=<span class=\"string\">&quot;http://www.flowable.org/processdef&quot;</span> <span class=\"attr\">exporter</span>=<span class=\"string\">&quot;Flowable Open Source Modeler&quot;</span> <span class=\"attr\">exporterVersion</span>=<span class=\"string\">&quot;6.7.2&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">signal</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;signal01&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;signal01&quot;</span> <span class=\"attr\">flowable:scope</span>=<span class=\"string\">&quot;global&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">signal</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">process</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;event2003&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;ä¿¡å·ä¸­é—´æŠ›å‡ºäº‹ä»¶&quot;</span> <span class=\"attr\">isExecutable</span>=<span class=\"string\">&quot;true&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">startEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;startId01&quot;</span> <span class=\"attr\">flowable:formFieldValidation</span>=<span class=\"string\">&quot;true&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">startEvent</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">parallelGateway</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;pid01&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;å¹¶è¡Œç½‘å…³&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">parallelGateway</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;sid-296CDB16-A9D3-4255-9E44-D7C6F5DA5058&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;startId01&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;pid01&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">serviceTask</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;task01&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;è‡ªåŠ¨ä»»åŠ¡ä¸€&quot;</span> <span class=\"attr\">flowable:class</span>=<span class=\"string\">&quot;com.bobo.delegate.MyOneDelegate&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">serviceTask</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">serviceTask</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;task02&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;è‡ªåŠ¨ä»»åŠ¡äºŒ&quot;</span> <span class=\"attr\">flowable:class</span>=<span class=\"string\">&quot;com.bobo.delegate.MyTwoDelegate&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">serviceTask</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">serviceTask</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;task03&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;è‡ªåŠ¨ä»»åŠ¡ä¸‰&quot;</span> <span class=\"attr\">flowable:class</span>=<span class=\"string\">&quot;com.bobo.delegate.MyThreeDelegate&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">serviceTask</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;sid-2325ED54-C769-4161-A00F-001F006B72B5&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;pid01&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;task01&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">intermediateThrowEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;sid-262D1C04-299C-4DE6-BAD9-B8AA0FC4EBAB&quot;</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">signalEventDefinition</span> <span class=\"attr\">signalRef</span>=<span class=\"string\">&quot;signal01&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">signalEventDefinition</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">intermediateThrowEvent</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">intermediateCatchEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;sid-51D70059-8D15-4BF7-9151-48CCD99544F1&quot;</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">signalEventDefinition</span> <span class=\"attr\">signalRef</span>=<span class=\"string\">&quot;signal01&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">signalEventDefinition</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">intermediateCatchEvent</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;sid-4A038E06-A731-4A5F-A929-840FB8A92AA5&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;task01&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;sid-262D1C04-299C-4DE6-BAD9-B8AA0FC4EBAB&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;sid-1C87EF67-D60F-47A3-A5B4-06FBC6F2390D&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;sid-262D1C04-299C-4DE6-BAD9-B8AA0FC4EBAB&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;task02&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;sid-DAC2B128-B6A7-48A2-8010-8AC6A806C04D&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;pid01&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;sid-51D70059-8D15-4BF7-9151-48CCD99544F1&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;sid-0ABE23AE-344C-49D8-B574-010DECD093BE&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;sid-51D70059-8D15-4BF7-9151-48CCD99544F1&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;task03&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">parallelGateway</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;pid02&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;å¹¶è¡Œç½‘å…³&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">parallelGateway</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;sid-584ADF4E-9140-4E5A-A396-1257E1436704&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;task02&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;pid02&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;sid-857F5F7F-7EA9-4986-9270-FFBF13E0B8CD&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;task03&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;pid02&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">endEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;end01&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;ç»“æŸ&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">endEvent</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;sid-02646A89-FCEC-4E7F-95B8-61F2065DE8D4&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;pid02&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;end01&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">process</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNDiagram</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNDiagram_event2003&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNPlane</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;event2003&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNPlane_event2003&quot;</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;startId01&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_startId01&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;30.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;30.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;100.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;163.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;pid01&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_pid01&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;40.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;40.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;270.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;158.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;task01&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_task01&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;80.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;100.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;419.5&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;71.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;task02&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_task02&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;80.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;100.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;780.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;71.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;task03&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_task03&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;80.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;100.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;795.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;255.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;sid-262D1C04-299C-4DE6-BAD9-B8AA0FC4EBAB&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_sid-262D1C04-299C-4DE6-BAD9-B8AA0FC4EBAB&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;30.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;30.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;633.5&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;96.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;sid-51D70059-8D15-4BF7-9151-48CCD99544F1&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_sid-51D70059-8D15-4BF7-9151-48CCD99544F1&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;30.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;30.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;465.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;278.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;pid02&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_pid02&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;40.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;40.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;994.5&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;158.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;end01&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_end01&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;28.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;28.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;1079.5&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;164.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;sid-4A038E06-A731-4A5F-A929-840FB8A92AA5&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_sid-4A038E06-A731-4A5F-A929-840FB8A92AA5&quot;</span> <span class=\"attr\">flowable:sourceDockerX</span>=<span class=\"string\">&quot;50.0&quot;</span> <span class=\"attr\">flowable:sourceDockerY</span>=<span class=\"string\">&quot;40.0&quot;</span> <span class=\"attr\">flowable:targetDockerX</span>=<span class=\"string\">&quot;15.0&quot;</span> <span class=\"attr\">flowable:targetDockerY</span>=<span class=\"string\">&quot;15.0&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;519.45&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;111.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;633.5&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;111.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;sid-02646A89-FCEC-4E7F-95B8-61F2065DE8D4&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_sid-02646A89-FCEC-4E7F-95B8-61F2065DE8D4&quot;</span> <span class=\"attr\">flowable:sourceDockerX</span>=<span class=\"string\">&quot;20.5&quot;</span> <span class=\"attr\">flowable:sourceDockerY</span>=<span class=\"string\">&quot;20.5&quot;</span> <span class=\"attr\">flowable:targetDockerX</span>=<span class=\"string\">&quot;14.0&quot;</span> <span class=\"attr\">flowable:targetDockerY</span>=<span class=\"string\">&quot;14.0&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;1034.0591869398208&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;178.3782051282051&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;1079.5002755524838&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;178.08885188426407&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;sid-857F5F7F-7EA9-4986-9270-FFBF13E0B8CD&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_sid-857F5F7F-7EA9-4986-9270-FFBF13E0B8CD&quot;</span> <span class=\"attr\">flowable:sourceDockerX</span>=<span class=\"string\">&quot;50.0&quot;</span> <span class=\"attr\">flowable:sourceDockerY</span>=<span class=\"string\">&quot;40.0&quot;</span> <span class=\"attr\">flowable:targetDockerX</span>=<span class=\"string\">&quot;20.0&quot;</span> <span class=\"attr\">flowable:targetDockerY</span>=<span class=\"string\">&quot;20.0&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;894.9499999999999&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;260.4867256637168&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;1002.6675392670157&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;186.14712041884815&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;sid-1C87EF67-D60F-47A3-A5B4-06FBC6F2390D&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_sid-1C87EF67-D60F-47A3-A5B4-06FBC6F2390D&quot;</span> <span class=\"attr\">flowable:sourceDockerX</span>=<span class=\"string\">&quot;15.0&quot;</span> <span class=\"attr\">flowable:sourceDockerY</span>=<span class=\"string\">&quot;15.0&quot;</span> <span class=\"attr\">flowable:targetDockerX</span>=<span class=\"string\">&quot;50.0&quot;</span> <span class=\"attr\">flowable:targetDockerY</span>=<span class=\"string\">&quot;40.0&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;663.4499994451444&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;111.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;779.9999999999972&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;111.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;sid-0ABE23AE-344C-49D8-B574-010DECD093BE&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_sid-0ABE23AE-344C-49D8-B574-010DECD093BE&quot;</span> <span class=\"attr\">flowable:sourceDockerX</span>=<span class=\"string\">&quot;15.0&quot;</span> <span class=\"attr\">flowable:sourceDockerY</span>=<span class=\"string\">&quot;15.0&quot;</span> <span class=\"attr\">flowable:targetDockerX</span>=<span class=\"string\">&quot;50.0&quot;</span> <span class=\"attr\">flowable:targetDockerY</span>=<span class=\"string\">&quot;40.0&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;494.9497692355611&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;293.0819166248564&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;794.9999999999911&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;294.7260273972602&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;sid-584ADF4E-9140-4E5A-A396-1257E1436704&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_sid-584ADF4E-9140-4E5A-A396-1257E1436704&quot;</span> <span class=\"attr\">flowable:sourceDockerX</span>=<span class=\"string\">&quot;50.0&quot;</span> <span class=\"attr\">flowable:sourceDockerY</span>=<span class=\"string\">&quot;40.0&quot;</span> <span class=\"attr\">flowable:targetDockerX</span>=<span class=\"string\">&quot;20.0&quot;</span> <span class=\"attr\">flowable:targetDockerY</span>=<span class=\"string\">&quot;20.0&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;879.9499999999999&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;129.1390243902439&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;999.8065381558029&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;172.67196819085487&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;sid-2325ED54-C769-4161-A00F-001F006B72B5&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_sid-2325ED54-C769-4161-A00F-001F006B72B5&quot;</span> <span class=\"attr\">flowable:sourceDockerX</span>=<span class=\"string\">&quot;20.5&quot;</span> <span class=\"attr\">flowable:sourceDockerY</span>=<span class=\"string\">&quot;20.5&quot;</span> <span class=\"attr\">flowable:targetDockerX</span>=<span class=\"string\">&quot;50.0&quot;</span> <span class=\"attr\">flowable:targetDockerY</span>=<span class=\"string\">&quot;40.0&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;304.9870182555781&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;173.0233265720081&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;419.49999999999994&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;129.8358938547486&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;sid-DAC2B128-B6A7-48A2-8010-8AC6A806C04D&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_sid-DAC2B128-B6A7-48A2-8010-8AC6A806C04D&quot;</span> <span class=\"attr\">flowable:sourceDockerX</span>=<span class=\"string\">&quot;20.5&quot;</span> <span class=\"attr\">flowable:sourceDockerY</span>=<span class=\"string\">&quot;20.5&quot;</span> <span class=\"attr\">flowable:targetDockerX</span>=<span class=\"string\">&quot;15.0&quot;</span> <span class=\"attr\">flowable:targetDockerY</span>=<span class=\"string\">&quot;15.0&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;302.31181354817494&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;185.6374177631579&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;467.15151373509184&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;285.24160328636844&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;sid-296CDB16-A9D3-4255-9E44-D7C6F5DA5058&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_sid-296CDB16-A9D3-4255-9E44-D7C6F5DA5058&quot;</span> <span class=\"attr\">flowable:sourceDockerX</span>=<span class=\"string\">&quot;15.0&quot;</span> <span class=\"attr\">flowable:sourceDockerY</span>=<span class=\"string\">&quot;15.0&quot;</span> <span class=\"attr\">flowable:targetDockerX</span>=<span class=\"string\">&quot;20.0&quot;</span> <span class=\"attr\">flowable:targetDockerY</span>=<span class=\"string\">&quot;20.0&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;129.94999940317362&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;178.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;270.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;178.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNPlane</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNDiagram</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">definitions</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>ä¸‰ä¸ªè‡ªå®šä¹‰ä»»åŠ¡ç»‘å®šäº†ä¸‰ä¸ªjavaDelegateåˆ†åˆ«ç»™å‡ºæ‰“å°è¯­å¥æ¥è®°å½•</p>\n<p>ç„¶åéƒ¨ç½²ä»»åŠ¡</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">test02</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> Exception&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"type\">Deployment</span> <span class=\"variable\">deployment</span> <span class=\"operator\">=</span> processEngine.getRepositoryService().createDeployment()</span><br><span class=\"line\">            .addClasspathResource(<span class=\"string\">&quot;ä¿¡å·ä¸­é—´æŠ›å‡ºäº‹ä»¶.bpmn20.xml&quot;</span>)</span><br><span class=\"line\">            .name(<span class=\"string\">&quot;ä¿¡å·ä¸­é—´æŠ›å‡ºäº‹ä»¶&quot;</span>)</span><br><span class=\"line\">            .deploy();</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;-----&quot;</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ç„¶ååœ¨å¯åŠ¨ä»»åŠ¡å³å¯</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">    * å¯åŠ¨æµç¨‹å®ä¾‹</span></span><br><span class=\"line\"><span class=\"comment\">    *</span></span><br><span class=\"line\"><span class=\"comment\">    */</span></span><br><span class=\"line\">   <span class=\"meta\">@Test</span></span><br><span class=\"line\">   <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">startProcessInstanceByKey</span><span class=\"params\">()</span>  <span class=\"keyword\">throws</span> Exception&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">       processEngine.getRuntimeService()</span><br><span class=\"line\">               .startProcessInstanceById(<span class=\"string\">&quot;event2003:1:665b1533-b020-11ec-877d-c03c59ad2248&quot;</span>);</span><br><span class=\"line\">       System.out.println(<span class=\"string\">&quot;å¼€å§‹å¯åŠ¨çš„æ—¶é—´ï¼š&quot;</span> + LocalDateTime.now().toString());</span><br><span class=\"line\">       <span class=\"comment\">// éœ€è¦åœ¨æ­¤é˜»å¡æ¯”ç­‰å¾…é•¿çš„æ—¶é—´</span></span><br><span class=\"line\">       TimeUnit.MINUTES.sleep(<span class=\"number\">3</span>);</span><br><span class=\"line\">   &#125;</span><br></pre></td></tr></table></figure>\n\n<p>çœ‹æ§åˆ¶å°çš„è¾“å‡º</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220330200124232.png\"\n                      alt=\"image-20220330200124232\"\n                ></p>\n<p>æ•ˆæœï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220330200235193.png\"\n                      alt=\"image-20220330200235193\"\n                ></p>\n<h3 id=\"è¾¹ç•Œäº‹ä»¶-4\"><a href=\"#è¾¹ç•Œäº‹ä»¶-4\" class=\"headerlink\" title=\"è¾¹ç•Œäº‹ä»¶\"></a>è¾¹ç•Œäº‹ä»¶</h3><p>æœ€åæ¥çœ‹çœ‹ä¿¡å·è¾¹ç•Œäº‹ä»¶ï¼Œæ¡ˆä¾‹å¦‚ä¸‹ï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220330202443905.png\"\n                      alt=\"image-20220330202443905\"\n                ></p>\n<p>å®Œæ•´çš„xmlå®šä¹‰ä¸º</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=<span class=\"string\">&quot;1.0&quot;</span> encoding=<span class=\"string\">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">definitions</span> <span class=\"attr\">xmlns</span>=<span class=\"string\">&quot;http://www.omg.org/spec/BPMN/20100524/MODEL&quot;</span> <span class=\"attr\">xmlns:xsi</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span> <span class=\"attr\">xmlns:xsd</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema&quot;</span> <span class=\"attr\">xmlns:flowable</span>=<span class=\"string\">&quot;http://flowable.org/bpmn&quot;</span> <span class=\"attr\">xmlns:bpmndi</span>=<span class=\"string\">&quot;http://www.omg.org/spec/BPMN/20100524/DI&quot;</span> <span class=\"attr\">xmlns:omgdc</span>=<span class=\"string\">&quot;http://www.omg.org/spec/DD/20100524/DC&quot;</span> <span class=\"attr\">xmlns:omgdi</span>=<span class=\"string\">&quot;http://www.omg.org/spec/DD/20100524/DI&quot;</span> <span class=\"attr\">typeLanguage</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema&quot;</span> <span class=\"attr\">expressionLanguage</span>=<span class=\"string\">&quot;http://www.w3.org/1999/XPath&quot;</span> <span class=\"attr\">targetNamespace</span>=<span class=\"string\">&quot;http://www.flowable.org/processdef&quot;</span> <span class=\"attr\">exporter</span>=<span class=\"string\">&quot;Flowable Open Source Modeler&quot;</span> <span class=\"attr\">exporterVersion</span>=<span class=\"string\">&quot;6.7.2&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">signal</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;signal2&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;signal2&quot;</span> <span class=\"attr\">flowable:scope</span>=<span class=\"string\">&quot;global&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">signal</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">process</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;event2004&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;ä¿¡å·è¾¹ç•Œäº‹ä»¶&quot;</span> <span class=\"attr\">isExecutable</span>=<span class=\"string\">&quot;true&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">startEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;startEvent1&quot;</span> <span class=\"attr\">flowable:formFieldValidation</span>=<span class=\"string\">&quot;true&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">startEvent</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">userTask</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;sid-F11058BE-828A-45FF-A830-8BF099D71FBD&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;äººå·¥ä»»åŠ¡&quot;</span> <span class=\"attr\">flowable:assignee</span>=<span class=\"string\">&quot;zhangsan&quot;</span> <span class=\"attr\">flowable:formFieldValidation</span>=<span class=\"string\">&quot;true&quot;</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">extensionElements</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">modeler:initiator-can-complete</span> <span class=\"attr\">xmlns:modeler</span>=<span class=\"string\">&quot;http://flowable.org/modeler&quot;</span>&gt;</span>&lt;![CDATA[false]]&gt;<span class=\"tag\">&lt;/<span class=\"name\">modeler:initiator-can-complete</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">extensionElements</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">userTask</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;sid-D2EE279A-24A2-4B6C-8021-ADC0A1A645EC&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;startEvent1&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;sid-F11058BE-828A-45FF-A830-8BF099D71FBD&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">serviceTask</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;sid-FAB46591-3247-4776-B3B5-79826133F5AF&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;è‡ªåŠ¨ä»»åŠ¡ä¸€&quot;</span> <span class=\"attr\">flowable:class</span>=<span class=\"string\">&quot;com.bobo.delegate.MyOneDelegate&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">serviceTask</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">serviceTask</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;sid-7CD0FBBA-4FE6-4646-B0D6-1D8A4D8D5515&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;è‡ªåŠ¨ä»»åŠ¡äºŒ&quot;</span> <span class=\"attr\">flowable:class</span>=<span class=\"string\">&quot;com.bobo.delegate.MyTwoDelegate&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">serviceTask</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;sid-74B48035-4CED-4963-AA87-55D1FB95EEA8&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;sid-F11058BE-828A-45FF-A830-8BF099D71FBD&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;sid-FAB46591-3247-4776-B3B5-79826133F5AF&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">endEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;sid-55682CDC-FEBD-44A1-B38C-A3F816AC91F4&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">endEvent</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;sid-AC84425B-8D8C-4A0F-BDCC-BC1DCF909752&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;sid-FAB46591-3247-4776-B3B5-79826133F5AF&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;sid-55682CDC-FEBD-44A1-B38C-A3F816AC91F4&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">endEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;sid-11CA784C-69DE-45B2-AE58-78E64CF2EE8E&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">endEvent</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;sid-A2E3E7C7-9AD0-46B8-8105-272496599E0D&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;sid-7CD0FBBA-4FE6-4646-B0D6-1D8A4D8D5515&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;sid-11CA784C-69DE-45B2-AE58-78E64CF2EE8E&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">boundaryEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;sid-8E473D8E-70D6-4AB3-B1D9-D3E7EFCDB39D&quot;</span> <span class=\"attr\">attachedToRef</span>=<span class=\"string\">&quot;sid-F11058BE-828A-45FF-A830-8BF099D71FBD&quot;</span> <span class=\"attr\">cancelActivity</span>=<span class=\"string\">&quot;true&quot;</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">signalEventDefinition</span> <span class=\"attr\">signalRef</span>=<span class=\"string\">&quot;signal2&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">signalEventDefinition</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">boundaryEvent</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;sid-C3770DF2-1747-45A7-85B5-2838AB7ECF9C&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;sid-8E473D8E-70D6-4AB3-B1D9-D3E7EFCDB39D&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;sid-7CD0FBBA-4FE6-4646-B0D6-1D8A4D8D5515&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">process</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNDiagram</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNDiagram_event2004&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNPlane</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;event2004&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNPlane_event2004&quot;</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;startEvent1&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_startEvent1&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;30.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;30.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;100.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;163.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;sid-F11058BE-828A-45FF-A830-8BF099D71FBD&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_sid-F11058BE-828A-45FF-A830-8BF099D71FBD&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;80.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;100.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;255.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;138.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;sid-FAB46591-3247-4776-B3B5-79826133F5AF&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_sid-FAB46591-3247-4776-B3B5-79826133F5AF&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;80.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;100.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;521.5&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;135.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;sid-7CD0FBBA-4FE6-4646-B0D6-1D8A4D8D5515&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_sid-7CD0FBBA-4FE6-4646-B0D6-1D8A4D8D5515&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;80.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;100.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;521.5&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;315.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;sid-55682CDC-FEBD-44A1-B38C-A3F816AC91F4&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_sid-55682CDC-FEBD-44A1-B38C-A3F816AC91F4&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;28.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;28.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;690.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;161.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;sid-11CA784C-69DE-45B2-AE58-78E64CF2EE8E&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_sid-11CA784C-69DE-45B2-AE58-78E64CF2EE8E&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;28.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;28.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;690.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;341.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;sid-8E473D8E-70D6-4AB3-B1D9-D3E7EFCDB39D&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_sid-8E473D8E-70D6-4AB3-B1D9-D3E7EFCDB39D&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;30.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;30.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;308.4527694396093&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;203.7233532460343&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;sid-C3770DF2-1747-45A7-85B5-2838AB7ECF9C&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_sid-C3770DF2-1747-45A7-85B5-2838AB7ECF9C&quot;</span> <span class=\"attr\">flowable:sourceDockerX</span>=<span class=\"string\">&quot;15.0&quot;</span> <span class=\"attr\">flowable:sourceDockerY</span>=<span class=\"string\">&quot;15.0&quot;</span> <span class=\"attr\">flowable:targetDockerX</span>=<span class=\"string\">&quot;50.0&quot;</span> <span class=\"attr\">flowable:targetDockerY</span>=<span class=\"string\">&quot;40.0&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;336.557461183174&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;225.9233207922021&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;521.4999999999999&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;327.5301011331414&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;sid-74B48035-4CED-4963-AA87-55D1FB95EEA8&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_sid-74B48035-4CED-4963-AA87-55D1FB95EEA8&quot;</span> <span class=\"attr\">flowable:sourceDockerX</span>=<span class=\"string\">&quot;50.0&quot;</span> <span class=\"attr\">flowable:sourceDockerY</span>=<span class=\"string\">&quot;40.0&quot;</span> <span class=\"attr\">flowable:targetDockerX</span>=<span class=\"string\">&quot;50.0&quot;</span> <span class=\"attr\">flowable:targetDockerY</span>=<span class=\"string\">&quot;40.0&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;354.95000000000005&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;177.43714821763604&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;521.5&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;175.56228893058162&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;sid-D2EE279A-24A2-4B6C-8021-ADC0A1A645EC&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_sid-D2EE279A-24A2-4B6C-8021-ADC0A1A645EC&quot;</span> <span class=\"attr\">flowable:sourceDockerX</span>=<span class=\"string\">&quot;15.0&quot;</span> <span class=\"attr\">flowable:sourceDockerY</span>=<span class=\"string\">&quot;15.0&quot;</span> <span class=\"attr\">flowable:targetDockerX</span>=<span class=\"string\">&quot;50.0&quot;</span> <span class=\"attr\">flowable:targetDockerY</span>=<span class=\"string\">&quot;40.0&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;129.94999949366624&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;178.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;254.99999999993574&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;178.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;sid-A2E3E7C7-9AD0-46B8-8105-272496599E0D&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_sid-A2E3E7C7-9AD0-46B8-8105-272496599E0D&quot;</span> <span class=\"attr\">flowable:sourceDockerX</span>=<span class=\"string\">&quot;50.0&quot;</span> <span class=\"attr\">flowable:sourceDockerY</span>=<span class=\"string\">&quot;40.0&quot;</span> <span class=\"attr\">flowable:targetDockerX</span>=<span class=\"string\">&quot;14.0&quot;</span> <span class=\"attr\">flowable:targetDockerY</span>=<span class=\"string\">&quot;14.0&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;621.4499999999999&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;355.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;690.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;355.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;sid-AC84425B-8D8C-4A0F-BDCC-BC1DCF909752&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_sid-AC84425B-8D8C-4A0F-BDCC-BC1DCF909752&quot;</span> <span class=\"attr\">flowable:sourceDockerX</span>=<span class=\"string\">&quot;50.0&quot;</span> <span class=\"attr\">flowable:sourceDockerY</span>=<span class=\"string\">&quot;40.0&quot;</span> <span class=\"attr\">flowable:targetDockerX</span>=<span class=\"string\">&quot;14.0&quot;</span> <span class=\"attr\">flowable:targetDockerY</span>=<span class=\"string\">&quot;14.0&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;621.4499999999999&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;175.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;690.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;175.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNPlane</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNDiagram</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">definitions</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n\n\n<p>å®šä¹‰çš„ä¿¡å·ä¸ºï¼š</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">signal</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;signal2&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;signal2&quot;</span> <span class=\"attr\">flowable:scope</span>=<span class=\"string\">&quot;global&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">signal</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>è‡ªåŠ¨ä»»åŠ¡çš„å†…å®¹</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">MyOneDelegate</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">JavaDelegate</span> &#123;</span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">execute</span><span class=\"params\">(DelegateExecution execution)</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;å®Œæˆè‡ªåŠ¨å®¡æ‰¹ä»»åŠ¡-----ã€‹MyOneDelegate&quot;</span> + LocalDateTime.now().toString());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">MyTwoDelegate</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">JavaDelegate</span> &#123;</span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">execute</span><span class=\"params\">(DelegateExecution execution)</span> &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;MyTwoDelegate----&gt;æ‰§è¡Œäº†&quot;</span> + LocalDateTime.now().toString());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<p>éƒ¨ç½²é¡¹ç›®ç„¶åå¯åŠ¨æµç¨‹</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">test02</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> Exception&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"type\">Deployment</span> <span class=\"variable\">deployment</span> <span class=\"operator\">=</span> processEngine.getRepositoryService().createDeployment()</span><br><span class=\"line\">            .addClasspathResource(<span class=\"string\">&quot;ä¿¡å·è¾¹ç•Œäº‹ä»¶.bpmn20.xml&quot;</span>)</span><br><span class=\"line\">            .name(<span class=\"string\">&quot;ä¿¡å·è¾¹ç•Œäº‹ä»¶&quot;</span>)</span><br><span class=\"line\">            .deploy();</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;-----&quot;</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">startProcessInstanceByKey</span><span class=\"params\">()</span>  <span class=\"keyword\">throws</span> Exception&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    processEngine.getRuntimeService()</span><br><span class=\"line\">            .startProcessInstanceById(<span class=\"string\">&quot;event2004:1:e8b5c39f-b024-11ec-bdac-c03c59ad2248&quot;</span>);</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;å¼€å§‹å¯åŠ¨çš„æ—¶é—´ï¼š&quot;</span> + LocalDateTime.now().toString());</span><br><span class=\"line\">    <span class=\"comment\">// éœ€è¦åœ¨æ­¤é˜»å¡æ¯”ç­‰å¾…é•¿çš„æ—¶é—´</span></span><br><span class=\"line\">    TimeUnit.MINUTES.sleep(<span class=\"number\">3</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220330203056055.png\"\n                      alt=\"image-20220330203056055\"\n                ></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">signalGlobal</span><span class=\"params\">()</span>  <span class=\"keyword\">throws</span> Exception&#123;</span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">signal</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;signal2&quot;</span>;</span><br><span class=\"line\">    Map&lt;String, Object&gt; variables = <span class=\"keyword\">new</span> <span class=\"title class_\">HashMap</span>();</span><br><span class=\"line\">    processEngine.getRuntimeService().signalEventReceived(signal,variables);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220330203233862.png\"\n                      alt=\"image-20220330203233862\"\n                ></p>\n<p>é€šè¿‡è¾“å‡ºçœ‹åˆ°äº†æˆ‘ä»¬æœŸæœ›çš„ç»“æœäº†ï¼Œè¿™æ ·å°±ç»™å¤§å®¶ä»‹ç»å®Œäº†ä¿¡å·ç›¸å…³çš„å„ç§äº‹ä»¶äº†</p>\n<h2 id=\"ç»“æŸäº‹ä»¶\"><a href=\"#ç»“æŸäº‹ä»¶\" class=\"headerlink\" title=\"ç»“æŸäº‹ä»¶\"></a>ç»“æŸäº‹ä»¶</h2><p>ç»“æŸäº‹ä»¶é¡¾åæ€ä¹‰å°±æ˜¯æµç¨‹ç»“æŸçš„äº‹ä»¶ï¼Œé™¤äº†å‰é¢é‡åˆ°çš„ç©ºç»“æŸäº‹ä»¶å¤–ï¼Œç»“æŸäº‹ä»¶è¿˜åŒ…æ‹¬å¦‚ä¸‹å‡ ç§ï¼š</p>\n<ul>\n<li>é”™è¯¯ç»“æŸäº‹ä»¶</li>\n<li>ä¸­æ–­ç»“æŸäº‹ä»¶</li>\n<li>å–æ¶ˆç»“æŸäº‹ä»¶</li>\n</ul>\n<h3 id=\"é”™è¯¯ç»“æŸäº‹ä»¶\"><a href=\"#é”™è¯¯ç»“æŸäº‹ä»¶\" class=\"headerlink\" title=\"é”™è¯¯ç»“æŸäº‹ä»¶\"></a>é”™è¯¯ç»“æŸäº‹ä»¶</h3><p>å½“æµç¨‹æ‰§è¡Œåˆ°è¾¾<strong>é”™è¯¯ç»“æŸäº‹ä»¶ï¼ˆerror end eventï¼‰</strong>æ—¶ï¼Œç»“æŸæ‰§è¡Œçš„å½“å‰åˆ†æ”¯ï¼Œå¹¶æŠ›å‡ºé”™è¯¯ã€‚è¿™ä¸ªé”™è¯¯å¯ä»¥ç”±åŒ¹é…çš„é”™è¯¯è¾¹ç•Œä¸­é—´äº‹ä»¶æ•è·ã€‚å¦‚æœæ‰¾ä¸åˆ°åŒ¹é…çš„é”™è¯¯è¾¹ç•Œäº‹ä»¶ï¼Œå°†ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚é€šè¿‡å…·ä½“æ¡ˆä¾‹æ¥è¯¦ç»†è®²è§£ï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220331100340069.png\"\n                      alt=\"image-20220331100340069\"\n                ></p>\n<p>å®Œæ•´çš„xmlæ–‡ä»¶</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=<span class=\"string\">&quot;1.0&quot;</span> encoding=<span class=\"string\">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">definitions</span> <span class=\"attr\">xmlns</span>=<span class=\"string\">&quot;http://www.omg.org/spec/BPMN/20100524/MODEL&quot;</span> <span class=\"attr\">xmlns:xsi</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span> <span class=\"attr\">xmlns:xsd</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema&quot;</span> <span class=\"attr\">xmlns:flowable</span>=<span class=\"string\">&quot;http://flowable.org/bpmn&quot;</span> <span class=\"attr\">xmlns:bpmndi</span>=<span class=\"string\">&quot;http://www.omg.org/spec/BPMN/20100524/DI&quot;</span> <span class=\"attr\">xmlns:omgdc</span>=<span class=\"string\">&quot;http://www.omg.org/spec/DD/20100524/DC&quot;</span> <span class=\"attr\">xmlns:omgdi</span>=<span class=\"string\">&quot;http://www.omg.org/spec/DD/20100524/DI&quot;</span> <span class=\"attr\">typeLanguage</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema&quot;</span> <span class=\"attr\">expressionLanguage</span>=<span class=\"string\">&quot;http://www.w3.org/1999/XPath&quot;</span> <span class=\"attr\">targetNamespace</span>=<span class=\"string\">&quot;http://www.flowable.org/processdef&quot;</span> <span class=\"attr\">exporter</span>=<span class=\"string\">&quot;Flowable Open Source Modeler&quot;</span> <span class=\"attr\">exporterVersion</span>=<span class=\"string\">&quot;6.7.2&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">error</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;error03&quot;</span> <span class=\"attr\">errorCode</span>=<span class=\"string\">&quot;error03&quot;</span> &gt;</span><span class=\"tag\">&lt;/<span class=\"name\">error</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">process</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;event5001&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;é”™è¯¯ç»“æŸäº‹ä»¶&quot;</span> <span class=\"attr\">isExecutable</span>=<span class=\"string\">&quot;true&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">startEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;start01&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;å¼€å§‹ä»»åŠ¡&quot;</span> <span class=\"attr\">flowable:formFieldValidation</span>=<span class=\"string\">&quot;true&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">startEvent</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">subProcess</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;sid-794CA748-4381-417F-8350-360E89907E84&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;subProcess&quot;</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">startEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;startc01&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;å¼€å§‹å­æµç¨‹&quot;</span> <span class=\"attr\">flowable:formFieldValidation</span>=<span class=\"string\">&quot;true&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">startEvent</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">serviceTask</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;task01&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;è‡ªåŠ¨ä»»åŠ¡ä¸€&quot;</span> <span class=\"attr\">flowable:class</span>=<span class=\"string\">&quot;com.bobo.flow.delegate.MyOneJavaDelegate&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">serviceTask</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">exclusiveGateway</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;p001&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;æ’ä»–ç½‘å…³&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">exclusiveGateway</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">endEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;endc01&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;å­æµç¨‹ç»“æŸ&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">endEvent</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">endEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;errorend01&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;é”™è¯¯ç»“æŸäº‹ä»¶&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">errorEventDefinition</span> <span class=\"attr\">errorRef</span>=<span class=\"string\">&quot;error03&quot;</span> <span class=\"attr\">flowable:errorVariableLocalScope</span>=<span class=\"string\">&quot;true&quot;</span> <span class=\"attr\">flowable:errorVariableTransient</span>=<span class=\"string\">&quot;true&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">errorEventDefinition</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">endEvent</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;sid-1B2782FA-5216-4817-B964-A77EDEBB7547&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;startc01&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;task01&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;sid-D2196400-20DC-4D6B-AAD2-AA9308CE8DEA&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;task01&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;p001&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;sid-DEC53745-1E74-4D08-B472-95F9A6B92D98&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;p001&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;errorend01&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">conditionExpression</span> <span class=\"attr\">xsi:type</span>=<span class=\"string\">&quot;tFormalExpression&quot;</span>&gt;</span>&lt;![CDATA[$&#123;flag&lt;=0&#125;]]&gt;<span class=\"tag\">&lt;/<span class=\"name\">conditionExpression</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">subProcess</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;sid-934F4EDF-16A9-4D4E-8D7A-4F8E1EEB0F9E&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;start01&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;sid-794CA748-4381-417F-8350-360E89907E84&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">serviceTask</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;task2&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;è‡ªåŠ¨ä»»åŠ¡äºŒ&quot;</span> <span class=\"attr\">flowable:class</span>=<span class=\"string\">&quot;com.bobo.flow.delegate.MyTwoJavaDelegate&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">serviceTask</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;sid-E8166885-00F6-49A1-BE26-3AB98FE95455&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;sid-794CA748-4381-417F-8350-360E89907E84&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;task2&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">endEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;end02&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;ä¸»æµç¨‹ç»“æŸ&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">endEvent</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;sid-496A30AE-44AC-4298-83E0-3183F3FF935B&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;task2&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;end02&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">boundaryEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;perror01&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;è¾¹ç•Œé”™è¯¯äº‹ä»¶&quot;</span> <span class=\"attr\">attachedToRef</span>=<span class=\"string\">&quot;sid-794CA748-4381-417F-8350-360E89907E84&quot;</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">errorEventDefinition</span> <span class=\"attr\">errorRef</span>=<span class=\"string\">&quot;error03&quot;</span> <span class=\"attr\">flowable:errorVariableLocalScope</span>=<span class=\"string\">&quot;true&quot;</span> <span class=\"attr\">flowable:errorVariableTransient</span>=<span class=\"string\">&quot;true&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">errorEventDefinition</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">boundaryEvent</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;sid-9562301E-B400-4D1F-89B8-23E69ADEAE68&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;perror01&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;task3&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">serviceTask</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;task3&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;è‡ªåŠ¨ä»»åŠ¡ä¸‰&quot;</span> <span class=\"attr\">flowable:class</span>=<span class=\"string\">&quot;com.bobo.flow.delegate.MyThreeJavaDelegate&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">serviceTask</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">endEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;end003&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;ä¸»æµç¨‹ç»“æŸ&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">endEvent</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;sid-436E29BF-7F5E-4A4B-8F62-C0AEA010F4D2&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;task3&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;end003&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;sid-C17C73A1-5853-496B-B686-E7911105D459&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;sid-794CA748-4381-417F-8350-360E89907E84&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;endc01&quot;</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">conditionExpression</span> <span class=\"attr\">xsi:type</span>=<span class=\"string\">&quot;tFormalExpression&quot;</span>&gt;</span>&lt;![CDATA[$&#123;flag&gt;0&#125;]]&gt;<span class=\"tag\">&lt;/<span class=\"name\">conditionExpression</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">process</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNDiagram</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNDiagram_event5001&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNPlane</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;event5001&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNPlane_event5001&quot;</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;start01&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_start01&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;30.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;30.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;75.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;205.5&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;sid-794CA748-4381-417F-8350-360E89907E84&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_sid-794CA748-4381-417F-8350-360E89907E84&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;261.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;593.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;240.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;90.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;startc01&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_startc01&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;30.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;30.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;285.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;199.5&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;task01&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_task01&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;80.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;100.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;418.5&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;174.5&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;p001&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_p001&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;40.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;40.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;563.5&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;194.5&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;endc01&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_endc01&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;28.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;28.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;675.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;150.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;errorend01&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_errorend01&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;28.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;28.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;675.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;255.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;task2&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_task2&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;80.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;100.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;942.5&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;176.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;end02&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_end02&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;28.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;28.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;1087.5&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;202.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;perror01&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_perror01&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;30.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;30.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;478.02252392098524&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;336.450017237985&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;task3&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_task3&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;80.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;100.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;665.5&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;406.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;end003&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_end003&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;28.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;28.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;810.5&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;432.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;sid-934F4EDF-16A9-4D4E-8D7A-4F8E1EEB0F9E&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_sid-934F4EDF-16A9-4D4E-8D7A-4F8E1EEB0F9E&quot;</span> <span class=\"attr\">flowable:sourceDockerX</span>=<span class=\"string\">&quot;15.0&quot;</span> <span class=\"attr\">flowable:sourceDockerY</span>=<span class=\"string\">&quot;15.0&quot;</span> <span class=\"attr\">flowable:targetDockerX</span>=<span class=\"string\">&quot;296.5&quot;</span> <span class=\"attr\">flowable:targetDockerY</span>=<span class=\"string\">&quot;130.5&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;104.9499999082861&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;220.5&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;240.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;220.5&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;sid-9562301E-B400-4D1F-89B8-23E69ADEAE68&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_sid-9562301E-B400-4D1F-89B8-23E69ADEAE68&quot;</span> <span class=\"attr\">flowable:sourceDockerX</span>=<span class=\"string\">&quot;15.0&quot;</span> <span class=\"attr\">flowable:sourceDockerY</span>=<span class=\"string\">&quot;15.0&quot;</span> <span class=\"attr\">flowable:targetDockerX</span>=<span class=\"string\">&quot;1.0&quot;</span> <span class=\"attr\">flowable:targetDockerY</span>=<span class=\"string\">&quot;40.0&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;493.02252392098524&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;366.40001519452954&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;493.02252392098524&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;446.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;665.4999999999623&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;446.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;sid-E8166885-00F6-49A1-BE26-3AB98FE95455&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_sid-E8166885-00F6-49A1-BE26-3AB98FE95455&quot;</span> <span class=\"attr\">flowable:sourceDockerX</span>=<span class=\"string\">&quot;296.5&quot;</span> <span class=\"attr\">flowable:sourceDockerY</span>=<span class=\"string\">&quot;130.5&quot;</span> <span class=\"attr\">flowable:targetDockerX</span>=<span class=\"string\">&quot;50.0&quot;</span> <span class=\"attr\">flowable:targetDockerY</span>=<span class=\"string\">&quot;40.0&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;832.9499999999987&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;217.57401315789474&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;942.499999999999&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;216.49292763157894&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;sid-436E29BF-7F5E-4A4B-8F62-C0AEA010F4D2&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_sid-436E29BF-7F5E-4A4B-8F62-C0AEA010F4D2&quot;</span> <span class=\"attr\">flowable:sourceDockerX</span>=<span class=\"string\">&quot;50.0&quot;</span> <span class=\"attr\">flowable:sourceDockerY</span>=<span class=\"string\">&quot;40.0&quot;</span> <span class=\"attr\">flowable:targetDockerX</span>=<span class=\"string\">&quot;14.0&quot;</span> <span class=\"attr\">flowable:targetDockerY</span>=<span class=\"string\">&quot;14.0&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;765.4499999999999&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;446.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;810.5&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;446.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;sid-D2196400-20DC-4D6B-AAD2-AA9308CE8DEA&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_sid-D2196400-20DC-4D6B-AAD2-AA9308CE8DEA&quot;</span> <span class=\"attr\">flowable:sourceDockerX</span>=<span class=\"string\">&quot;50.0&quot;</span> <span class=\"attr\">flowable:sourceDockerY</span>=<span class=\"string\">&quot;40.0&quot;</span> <span class=\"attr\">flowable:targetDockerX</span>=<span class=\"string\">&quot;20.5&quot;</span> <span class=\"attr\">flowable:targetDockerY</span>=<span class=\"string\">&quot;20.5&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;518.4499999999978&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;214.71623376623376&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;563.9130434782609&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;214.91304347826087&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;sid-496A30AE-44AC-4298-83E0-3183F3FF935B&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_sid-496A30AE-44AC-4298-83E0-3183F3FF935B&quot;</span> <span class=\"attr\">flowable:sourceDockerX</span>=<span class=\"string\">&quot;50.0&quot;</span> <span class=\"attr\">flowable:sourceDockerY</span>=<span class=\"string\">&quot;40.0&quot;</span> <span class=\"attr\">flowable:targetDockerX</span>=<span class=\"string\">&quot;14.0&quot;</span> <span class=\"attr\">flowable:targetDockerY</span>=<span class=\"string\">&quot;14.0&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;1042.449999999996&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;216.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;1087.5&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;216.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;sid-C17C73A1-5853-496B-B686-E7911105D459&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_sid-C17C73A1-5853-496B-B686-E7911105D459&quot;</span> <span class=\"attr\">flowable:sourceDockerX</span>=<span class=\"string\">&quot;343.3984375&quot;</span> <span class=\"attr\">flowable:sourceDockerY</span>=<span class=\"string\">&quot;106.0&quot;</span> <span class=\"attr\">flowable:targetDockerX</span>=<span class=\"string\">&quot;14.0&quot;</span> <span class=\"attr\">flowable:targetDockerY</span>=<span class=\"string\">&quot;14.0&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;583.3984375&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;196.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;583.3984375&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;164.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;675.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;164.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;sid-1B2782FA-5216-4817-B964-A77EDEBB7547&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_sid-1B2782FA-5216-4817-B964-A77EDEBB7547&quot;</span> <span class=\"attr\">flowable:sourceDockerX</span>=<span class=\"string\">&quot;15.0&quot;</span> <span class=\"attr\">flowable:sourceDockerY</span>=<span class=\"string\">&quot;15.0&quot;</span> <span class=\"attr\">flowable:targetDockerX</span>=<span class=\"string\">&quot;50.0&quot;</span> <span class=\"attr\">flowable:targetDockerY</span>=<span class=\"string\">&quot;40.0&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;314.949999356254&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;214.5&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;418.5&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;214.5&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;sid-DEC53745-1E74-4D08-B472-95F9A6B92D98&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_sid-DEC53745-1E74-4D08-B472-95F9A6B92D98&quot;</span> <span class=\"attr\">flowable:sourceDockerX</span>=<span class=\"string\">&quot;20.8984375&quot;</span> <span class=\"attr\">flowable:sourceDockerY</span>=<span class=\"string\">&quot;36.5&quot;</span> <span class=\"attr\">flowable:targetDockerX</span>=<span class=\"string\">&quot;14.0&quot;</span> <span class=\"attr\">flowable:targetDockerY</span>=<span class=\"string\">&quot;14.0&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;584.3984375&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;233.54821399278214&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;584.3984375&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;269.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;675.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;269.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNPlane</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNDiagram</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">definitions</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>å®šä¹‰çš„error</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">error</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;error01&quot;</span> <span class=\"attr\">errorCode</span>=<span class=\"string\">&quot;error01&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">error</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>åœ¨å­æµç¨‹ä¸­ï¼Œå½“flagçš„æ•°æ®ä¸º0çš„æ—¶å€™ï¼Œå°±ä¼šè§¦å‘é”™è¯¯ç»“æŸäº‹ä»¶</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;1111&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;12222&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;xxxxx44&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">conditionExpression</span> <span class=\"attr\">xsi:type</span>=<span class=\"string\">&quot;tFormalExpression&quot;</span>&gt;</span>&lt;![CDATA[$&#123;flag==0&#125;]]&gt;<span class=\"tag\">&lt;/<span class=\"name\">conditionExpression</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>ç„¶åæˆ‘ä»¬åœ¨å­æµç¨‹ä¸Šç»‘å®šäº†ä¸€ä¸ªé”™è¯¯è¾¹ç•Œäº‹ä»¶ï¼Œç»‘å®šçš„ä¹Ÿæ˜¯error01,ä¹Ÿå°±æ˜¯å½“å­æµç¨‹è§¦å‘é”™è¯¯ç»“æŸäº‹ä»¶ï¼Œå°±ä¼šè§¦å‘è¿™ä¸ªè¾¹ç•Œäº‹ä»¶ï¼Œè¿›è€Œå®Œæˆè‡ªåŠ¨ä»»åŠ¡ä¸‰ã€‚</p>\n<p>æµç¨‹ä¸­å…³è”çš„ä¸‰ä¸ªè‡ªåŠ¨ä»»åŠ¡éƒ½åªæ˜¯è¾“å‡ºä¸€ä¸ªæ‰“å°è¯­å¥~</p>\n<p>ç„¶åæˆ‘ä»¬éœ€è¦åšçš„æ“ä½œæœ‰ï¼Œéƒ¨ç½²ï¼Œå¯åŠ¨æµç¨‹ç»‘å®šæµç¨‹å˜é‡flagçš„å€¼ä¸º0ï¼Œç„¶åå°±å¯ä»¥çœ‹è¾“å‡ºç»“æœäº†</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">* éƒ¨ç½²</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">test02</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> Exception&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"type\">Deployment</span> <span class=\"variable\">deployment</span> <span class=\"operator\">=</span> processEngine.getRepositoryService().createDeployment()</span><br><span class=\"line\">            .addClasspathResource(<span class=\"string\">&quot;é”™è¯¯ç»“æŸäº‹ä»¶.bpmn20.xml&quot;</span>)</span><br><span class=\"line\">            .name(<span class=\"string\">&quot;é”™è¯¯ç»“æŸäº‹ä»¶&quot;</span>)</span><br><span class=\"line\">            .deploy();</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;-----&quot;</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ç„¶åå¯åŠ¨æµç¨‹</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * å¯åŠ¨æµç¨‹å®ä¾‹,è®¾ç½®æµç¨‹å˜é‡ä¸­çš„flag=0è§¦å‘é”™è¯¯ç»“æŸäº‹ä»¶</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">startProcessInstanceByKey</span><span class=\"params\">()</span>  <span class=\"keyword\">throws</span> Exception&#123;</span><br><span class=\"line\">    <span class=\"comment\">// è®¾ç½®å¯¹åº”çš„æµç¨‹å˜é‡çš„å€¼</span></span><br><span class=\"line\">    Map&lt;String,Object&gt; map = <span class=\"keyword\">new</span> <span class=\"title class_\">HashMap</span>&lt;&gt;();</span><br><span class=\"line\">    map.put(<span class=\"string\">&quot;flag&quot;</span>,<span class=\"number\">0</span>);<span class=\"comment\">// è®¾ç½®flagä¸º0è§¦å‘æµç¨‹ç»“æŸäº‹ä»¶</span></span><br><span class=\"line\">    processEngine.getRuntimeService()</span><br><span class=\"line\">            .startProcessInstanceById(<span class=\"string\">&quot;event2005:1:ebec87e2-b028-11ec-b93f-c03c59ad2248&quot;</span>,map);</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;å¼€å§‹å¯åŠ¨çš„æ—¶é—´ï¼š&quot;</span> + LocalDateTime.now().toString());</span><br><span class=\"line\">    <span class=\"comment\">// éœ€è¦åœ¨æ­¤é˜»å¡æ¯”ç­‰å¾…é•¿çš„æ—¶é—´</span></span><br><span class=\"line\">    TimeUnit.MINUTES.sleep(<span class=\"number\">3</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>çœ‹æ§åˆ¶å°è¾“å‡º</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220330210538338.png\"\n                      alt=\"image-20220330210538338\"\n                ></p>\n<p>æ§åˆ¶å°è¾“å‡ºçš„ç»“æœå’Œæˆ‘ä»¬é¢„æœŸçš„æ˜¯ä¸€æ ·çš„</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220330210708334.png\"\n                      alt=\"image-20220330210708334\"\n                ></p>\n<p>è¯´æ˜é”™è¯¯ç»“æŸäº‹ä»¶çš„ä½œç”¨å°±æ˜¯åœ¨æ‰§è¡Œåˆ°é”™è¯¯ç»“æŸçš„èŠ‚ç‚¹ä½ç½®ä¼šæŠ›å‡ºå¯¹åº”çš„é”™è¯¯ï¼Œä¾›éœ€è¦è·å–çš„äº‹ä»¶æ¥å¤„ç†ã€‚</p>\n<h3 id=\"ä¸­æ–­ç»“æŸäº‹ä»¶\"><a href=\"#ä¸­æ–­ç»“æŸäº‹ä»¶\" class=\"headerlink\" title=\"ä¸­æ–­ç»“æŸäº‹ä»¶\"></a>ä¸­æ–­ç»“æŸäº‹ä»¶</h3><p>ä¸­æ–­ç»“æŸäº‹ä»¶ä¹Ÿç§°ä¸ºç»ˆæ­¢ç»“æŸäº‹ä»¶ï¼Œä¸»è¦æ˜¯å¯¹æµç¨‹è¿›è¡Œç»ˆæ­¢çš„äº‹ä»¶ï¼Œå¯ä»¥åœ¨ä¸€ä¸ªå¤æ‚çš„æµç¨‹ä¸­ï¼Œå¦‚æœæŸæ–¹æƒ³è¦æå‰ä¸­æ–­è¿™ä¸ªæµç¨‹ï¼Œå¯ä»¥é‡‡ç”¨è¿™ä¸ªäº‹ä»¶æ¥å¤„ç†ï¼Œå¯ä»¥åœ¨å¹¶è¡Œå¤„ç†ä»»åŠ¡ä¸­ã€‚å¦‚æœä½ æ˜¯åœ¨æµç¨‹å®ä¾‹å±‚å¤„ç†ï¼Œæ•´ä¸ªæµç¨‹éƒ½ä¼šè¢«ä¸­æ–­ï¼Œå¦‚æœæ˜¯åœ¨å­æµç¨‹ä¸­ä½¿ç”¨ï¼Œé‚£ä¹ˆå½“å‰ä½œç”¨å’Œä½œç”¨åŸŸå†…çš„æ‰€æœ‰çš„å†…éƒ¨æµç¨‹éƒ½ä¼šè¢«ç»ˆæ­¢ã€‚å…·ä½“è¿˜æ˜¯é€šè¿‡ä¸¤ä¸ªæ¡ˆä¾‹æ¥ç»™å¤§å®¶ä»‹ç»ï¼š</p>\n<h4 id=\"æ¡ˆä¾‹ä¸€\"><a href=\"#æ¡ˆä¾‹ä¸€\" class=\"headerlink\" title=\"æ¡ˆä¾‹ä¸€\"></a>æ¡ˆä¾‹ä¸€</h4><p>æ¡ˆä¾‹ä¸€æˆ‘ä»¬ä»‹ç»æ²¡æœ‰å­æµç¨‹çš„æƒ…å†µä¸‹ç»ˆæ­¢çš„åœºæ™¯ï¼Œå…·ä½“æ¡ˆä¾‹å¦‚ä¸‹</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220331102808059.png\"\n                      alt=\"image-20220331102808059\"\n                ></p>\n<p>å®Œæ•´çš„xmlæ–‡ä»¶ï¼š</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=<span class=\"string\">&quot;1.0&quot;</span> encoding=<span class=\"string\">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">definitions</span> <span class=\"attr\">xmlns</span>=<span class=\"string\">&quot;http://www.omg.org/spec/BPMN/20100524/MODEL&quot;</span> <span class=\"attr\">xmlns:xsi</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span> <span class=\"attr\">xmlns:xsd</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema&quot;</span> <span class=\"attr\">xmlns:flowable</span>=<span class=\"string\">&quot;http://flowable.org/bpmn&quot;</span> <span class=\"attr\">xmlns:bpmndi</span>=<span class=\"string\">&quot;http://www.omg.org/spec/BPMN/20100524/DI&quot;</span> <span class=\"attr\">xmlns:omgdc</span>=<span class=\"string\">&quot;http://www.omg.org/spec/DD/20100524/DC&quot;</span> <span class=\"attr\">xmlns:omgdi</span>=<span class=\"string\">&quot;http://www.omg.org/spec/DD/20100524/DI&quot;</span> <span class=\"attr\">typeLanguage</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema&quot;</span> <span class=\"attr\">expressionLanguage</span>=<span class=\"string\">&quot;http://www.w3.org/1999/XPath&quot;</span> <span class=\"attr\">targetNamespace</span>=<span class=\"string\">&quot;http://www.flowable.org/processdef&quot;</span> <span class=\"attr\">exporter</span>=<span class=\"string\">&quot;Flowable Open Source Modeler&quot;</span> <span class=\"attr\">exporterVersion</span>=<span class=\"string\">&quot;6.7.2&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">process</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;event5002&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;ç»ˆæ­¢ç»“æŸäº‹ä»¶01&quot;</span> <span class=\"attr\">isExecutable</span>=<span class=\"string\">&quot;true&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">startEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;start01&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;å¼€å§‹äº‹ä»¶&quot;</span> <span class=\"attr\">flowable:formFieldValidation</span>=<span class=\"string\">&quot;true&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">startEvent</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">parallelGateway</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;p001&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;å¹¶è¡Œç½‘å…³&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">parallelGateway</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">parallelGateway</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;p004&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;å¹¶è¡Œç½‘å…³&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">parallelGateway</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">userTask</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;task2&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;ç”¨æˆ·ä»»åŠ¡äºŒ&quot;</span> <span class=\"attr\">flowable:assignee</span>=<span class=\"string\">&quot;lisi&quot;</span> <span class=\"attr\">flowable:formFieldValidation</span>=<span class=\"string\">&quot;true&quot;</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">extensionElements</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">modeler:initiator-can-complete</span> <span class=\"attr\">xmlns:modeler</span>=<span class=\"string\">&quot;http://flowable.org/modeler&quot;</span>&gt;</span>&lt;![CDATA[false]]&gt;<span class=\"tag\">&lt;/<span class=\"name\">modeler:initiator-can-complete</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">extensionElements</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">userTask</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;sid-E3A5580F-4CE3-4556-894E-46C3D2134071&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;p001&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;task2&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">userTask</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;task1&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;ç”¨æˆ·ä»»åŠ¡ä¸€&quot;</span> <span class=\"attr\">flowable:assignee</span>=<span class=\"string\">&quot;zhangsan&quot;</span> <span class=\"attr\">flowable:formFieldValidation</span>=<span class=\"string\">&quot;true&quot;</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">extensionElements</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">modeler:initiator-can-complete</span> <span class=\"attr\">xmlns:modeler</span>=<span class=\"string\">&quot;http://flowable.org/modeler&quot;</span>&gt;</span>&lt;![CDATA[false]]&gt;<span class=\"tag\">&lt;/<span class=\"name\">modeler:initiator-can-complete</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">extensionElements</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">userTask</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;sid-FF8C06ED-AE40-46A1-A898-9FA4B0D4665A&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;p001&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;task1&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">userTask</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;task3&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;ç”¨æˆ·ä»»åŠ¡ä¸‰&quot;</span> <span class=\"attr\">flowable:assignee</span>=<span class=\"string\">&quot;wangwu&quot;</span> <span class=\"attr\">flowable:formFieldValidation</span>=<span class=\"string\">&quot;true&quot;</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">extensionElements</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">modeler:initiator-can-complete</span> <span class=\"attr\">xmlns:modeler</span>=<span class=\"string\">&quot;http://flowable.org/modeler&quot;</span>&gt;</span>&lt;![CDATA[false]]&gt;<span class=\"tag\">&lt;/<span class=\"name\">modeler:initiator-can-complete</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">extensionElements</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">userTask</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;sid-226E06CD-07E8-4E38-A3FC-12CD417F54FC&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;p001&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;task3&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;sid-C1280677-F8B9-4C9C-B010-CEEA4DE17176&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;start01&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;p001&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;sid-F5ABC1D7-091F-4966-990F-44CE1A927869&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;task1&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;p004&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;sid-E1E26394-8B33-4766-9B3B-722958B91972&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;task2&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;p004&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">endEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;end003&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;ç»“æŸäº‹ä»¶&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">endEvent</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;sid-074345F1-5C34-435D-AECE-912DDBBBE105&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;p004&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;end003&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">exclusiveGateway</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;p003&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;æ’ä»–ç½‘å…³&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">exclusiveGateway</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">endEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;sid-E9A4380A-AAF8-464C-B14B-15A2C1F1C2D2&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;ç»ˆæ­¢ç»“æŸäº‹ä»¶&quot;</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">terminateEventDefinition</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">terminateEventDefinition</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">endEvent</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;sid-D00B6EDC-F2F4-4D8F-89BD-91272363CD49&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;task3&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;p003&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;sid-325962BF-7168-48C0-9107-B232A4627C10&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;p003&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;sid-E9A4380A-AAF8-464C-B14B-15A2C1F1C2D2&quot;</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">conditionExpression</span> <span class=\"attr\">xsi:type</span>=<span class=\"string\">&quot;tFormalExpression&quot;</span>&gt;</span>&lt;![CDATA[$&#123;flag&lt;=0&#125;]]&gt;<span class=\"tag\">&lt;/<span class=\"name\">conditionExpression</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;sid-413A98AF-8CAF-470C-B751-E32229801310&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;p003&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;p004&quot;</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">conditionExpression</span> <span class=\"attr\">xsi:type</span>=<span class=\"string\">&quot;tFormalExpression&quot;</span>&gt;</span>&lt;![CDATA[$&#123;flag&gt;0&#125;]]&gt;<span class=\"tag\">&lt;/<span class=\"name\">conditionExpression</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">process</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNDiagram</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNDiagram_event5002&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNPlane</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;event5002&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNPlane_event5002&quot;</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;start01&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_start01&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;30.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;30.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;102.5&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;253.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;p001&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_p001&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;40.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;40.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;287.5&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;248.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;p004&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_p004&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;40.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;40.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;720.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;248.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;task2&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_task2&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;80.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;100.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;372.5&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;228.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;task1&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_task1&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;80.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;100.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;372.5&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;105.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;task3&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_task3&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;80.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;100.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;377.5&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;390.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;end003&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_end003&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;28.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;28.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;805.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;254.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;p003&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_p003&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;40.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;40.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;570.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;410.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;sid-E9A4380A-AAF8-464C-B14B-15A2C1F1C2D2&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_sid-E9A4380A-AAF8-464C-B14B-15A2C1F1C2D2&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;28.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;28.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;576.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;495.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;sid-E1E26394-8B33-4766-9B3B-722958B91972&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_sid-E1E26394-8B33-4766-9B3B-722958B91972&quot;</span> <span class=\"attr\">flowable:sourceDockerX</span>=<span class=\"string\">&quot;50.0&quot;</span> <span class=\"attr\">flowable:sourceDockerY</span>=<span class=\"string\">&quot;40.0&quot;</span> <span class=\"attr\">flowable:targetDockerX</span>=<span class=\"string\">&quot;7.5&quot;</span> <span class=\"attr\">flowable:targetDockerY</span>=<span class=\"string\">&quot;19.0&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;472.4499999999732&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;268.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;596.25&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;268.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;596.25&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;267.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;720.9525123715264&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;267.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;sid-226E06CD-07E8-4E38-A3FC-12CD417F54FC&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_sid-226E06CD-07E8-4E38-A3FC-12CD417F54FC&quot;</span> <span class=\"attr\">flowable:sourceDockerX</span>=<span class=\"string\">&quot;20.5&quot;</span> <span class=\"attr\">flowable:sourceDockerY</span>=<span class=\"string\">&quot;20.5&quot;</span> <span class=\"attr\">flowable:targetDockerX</span>=<span class=\"string\">&quot;50.0&quot;</span> <span class=\"attr\">flowable:targetDockerY</span>=<span class=\"string\">&quot;40.0&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;308.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;287.4441367574257&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;308.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;430.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;377.5&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;430.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;sid-325962BF-7168-48C0-9107-B232A4627C10&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_sid-325962BF-7168-48C0-9107-B232A4627C10&quot;</span> <span class=\"attr\">flowable:sourceDockerX</span>=<span class=\"string\">&quot;19.53125&quot;</span> <span class=\"attr\">flowable:sourceDockerY</span>=<span class=\"string\">&quot;34.5&quot;</span> <span class=\"attr\">flowable:targetDockerX</span>=<span class=\"string\">&quot;14.0&quot;</span> <span class=\"attr\">flowable:targetDockerY</span>=<span class=\"string\">&quot;14.0&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;589.5677159590043&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;449.51771595900436&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;589.8981518165715&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;495.0001397608249&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;sid-F5ABC1D7-091F-4966-990F-44CE1A927869&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_sid-F5ABC1D7-091F-4966-990F-44CE1A927869&quot;</span> <span class=\"attr\">flowable:sourceDockerX</span>=<span class=\"string\">&quot;50.0&quot;</span> <span class=\"attr\">flowable:sourceDockerY</span>=<span class=\"string\">&quot;40.0&quot;</span> <span class=\"attr\">flowable:targetDockerX</span>=<span class=\"string\">&quot;20.0&quot;</span> <span class=\"attr\">flowable:targetDockerY</span>=<span class=\"string\">&quot;1.0&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;472.44999999982196&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;145.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;740.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;145.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;740.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;248.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;sid-D00B6EDC-F2F4-4D8F-89BD-91272363CD49&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_sid-D00B6EDC-F2F4-4D8F-89BD-91272363CD49&quot;</span> <span class=\"attr\">flowable:sourceDockerX</span>=<span class=\"string\">&quot;50.0&quot;</span> <span class=\"attr\">flowable:sourceDockerY</span>=<span class=\"string\">&quot;40.0&quot;</span> <span class=\"attr\">flowable:targetDockerX</span>=<span class=\"string\">&quot;7.0&quot;</span> <span class=\"attr\">flowable:targetDockerY</span>=<span class=\"string\">&quot;22.0&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;477.449999999998&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;430.66822742474915&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;571.9322033898305&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;431.93220338983053&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;sid-E3A5580F-4CE3-4556-894E-46C3D2134071&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_sid-E3A5580F-4CE3-4556-894E-46C3D2134071&quot;</span> <span class=\"attr\">flowable:sourceDockerX</span>=<span class=\"string\">&quot;20.5&quot;</span> <span class=\"attr\">flowable:sourceDockerY</span>=<span class=\"string\">&quot;20.5&quot;</span> <span class=\"attr\">flowable:targetDockerX</span>=<span class=\"string\">&quot;50.0&quot;</span> <span class=\"attr\">flowable:targetDockerY</span>=<span class=\"string\">&quot;40.0&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;327.0247370727432&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;268.4166666666667&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;372.49999999998806&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;268.2181222707423&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;sid-074345F1-5C34-435D-AECE-912DDBBBE105&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_sid-074345F1-5C34-435D-AECE-912DDBBBE105&quot;</span> <span class=\"attr\">flowable:sourceDockerX</span>=<span class=\"string\">&quot;20.5&quot;</span> <span class=\"attr\">flowable:sourceDockerY</span>=<span class=\"string\">&quot;20.5&quot;</span> <span class=\"attr\">flowable:targetDockerX</span>=<span class=\"string\">&quot;14.0&quot;</span> <span class=\"attr\">flowable:targetDockerY</span>=<span class=\"string\">&quot;14.0&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;759.5591869398207&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;268.37820512820514&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;805.0002755524882&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;268.08885188426405&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;sid-C1280677-F8B9-4C9C-B010-CEEA4DE17176&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_sid-C1280677-F8B9-4C9C-B010-CEEA4DE17176&quot;</span> <span class=\"attr\">flowable:sourceDockerX</span>=<span class=\"string\">&quot;15.0&quot;</span> <span class=\"attr\">flowable:sourceDockerY</span>=<span class=\"string\">&quot;15.0&quot;</span> <span class=\"attr\">flowable:targetDockerX</span>=<span class=\"string\">&quot;20.0&quot;</span> <span class=\"attr\">flowable:targetDockerY</span>=<span class=\"string\">&quot;20.0&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;132.44999949366624&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;268.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;287.5&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;268.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;sid-413A98AF-8CAF-470C-B751-E32229801310&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_sid-413A98AF-8CAF-470C-B751-E32229801310&quot;</span> <span class=\"attr\">flowable:sourceDockerX</span>=<span class=\"string\">&quot;37.5&quot;</span> <span class=\"attr\">flowable:sourceDockerY</span>=<span class=\"string\">&quot;20.4375&quot;</span> <span class=\"attr\">flowable:targetDockerX</span>=<span class=\"string\">&quot;22.5&quot;</span> <span class=\"attr\">flowable:targetDockerY</span>=<span class=\"string\">&quot;31.0&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;609.5117551813031&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;430.4375&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;742.5&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;430.4375&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;742.5&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;285.402097959858&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;sid-FF8C06ED-AE40-46A1-A898-9FA4B0D4665A&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_sid-FF8C06ED-AE40-46A1-A898-9FA4B0D4665A&quot;</span> <span class=\"attr\">flowable:sourceDockerX</span>=<span class=\"string\">&quot;20.5&quot;</span> <span class=\"attr\">flowable:sourceDockerY</span>=<span class=\"string\">&quot;20.5&quot;</span> <span class=\"attr\">flowable:targetDockerX</span>=<span class=\"string\">&quot;50.0&quot;</span> <span class=\"attr\">flowable:targetDockerY</span>=<span class=\"string\">&quot;40.0&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;308.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;248.5&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;308.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;145.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;372.5&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;145.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNPlane</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNDiagram</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">definitions</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>æµç¨‹å®šä¹‰è¯´æ˜ï¼šå¹¶è¡Œç½‘å…³ä¸­3ä¸ªäººå·¥å®¡æ ¸ä»»åŠ¡ï¼Œåˆ†åˆ«åˆ†é…çš„ç”¨æˆ·ä¸ºzhangsan lisi wangwu ï¼Œç„¶ååœ¨wangwuå®¡æ ¸åä¼šè¿›å…¥ä¸€ä¸ªæ’ä»–ç½‘å…³ï¼Œå¦‚æœflagæ˜¯å°äºç­‰äº0å°±ä¼šè§¦å‘ç»ˆæ­¢ç»“æŸäº‹ä»¶ã€‚</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;sid-89945688-1D51-4391-A713-3E77ADB2FA06&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;p001&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;stop001&quot;</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">conditionExpression</span> <span class=\"attr\">xsi:type</span>=<span class=\"string\">&quot;tFormalExpression&quot;</span>&gt;</span>&lt;![CDATA[$&#123;flag&lt;=0&#125;]]&gt;<span class=\"tag\">&lt;/<span class=\"name\">conditionExpression</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>å…·ä½“æ“ä½œï¼šéƒ¨ç½²æµç¨‹â€“&gt;å¯åŠ¨æµç¨‹å®ä¾‹â€“&gt;wanwu å¤„ç†ä»»åŠ¡ã€æµç¨‹å®ä¾‹ flag &lt;&#x3D; 0ã€‘ è§¦å‘ä»»åŠ¡</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">test02</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> Exception&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"type\">Deployment</span> <span class=\"variable\">deployment</span> <span class=\"operator\">=</span> processEngine.getRepositoryService().createDeployment()</span><br><span class=\"line\">            .addClasspathResource(<span class=\"string\">&quot;ç»ˆæ­¢æµç¨‹1.bpmn20.xml&quot;</span>)</span><br><span class=\"line\">            .name(<span class=\"string\">&quot;ç»ˆæ­¢æµç¨‹1&quot;</span>)</span><br><span class=\"line\">            .deploy();</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;-----&quot;</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>å¯åŠ¨æµç¨‹å®ä¾‹</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">startProcessInstanceByKey</span><span class=\"params\">()</span>  <span class=\"keyword\">throws</span> Exception&#123;</span><br><span class=\"line\">    <span class=\"comment\">// è®¾ç½®å¯¹åº”çš„æµç¨‹å˜é‡çš„å€¼</span></span><br><span class=\"line\">    Map&lt;String,Object&gt; map = <span class=\"keyword\">new</span> <span class=\"title class_\">HashMap</span>&lt;&gt;();</span><br><span class=\"line\">    map.put(<span class=\"string\">&quot;flag&quot;</span>,<span class=\"number\">0</span>);<span class=\"comment\">// è®¾ç½®flagä¸º0è§¦å‘æµç¨‹ç»“æŸäº‹ä»¶</span></span><br><span class=\"line\">    processEngine.getRuntimeService()</span><br><span class=\"line\">            .startProcessInstanceById(<span class=\"string\">&quot;event3001:1:8b1663fa-b02d-11ec-b480-c03c59ad2248&quot;</span>,map);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>è¿™æ—¶å¯ä»¥çœ‹åˆ°ä¸‰ä¸ªå¹¶è¡Œçš„Taskä»»åŠ¡ï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220330213147240.png\"\n                      alt=\"image-20220330213147240\"\n                ></p>\n<p>è¿™æ—¶æˆ‘ä»¬åªéœ€ç‹äº”æ¥å¤„ç†å³å¯ï¼Œåœ¨ä¸Šä¸€æ­¥ä¸­æˆ‘ä»¬å·²ç»å¯¹æµç¨‹å˜é‡èµ‹å€¼äº†</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">completeTask</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"type\">TaskService</span> <span class=\"variable\">taskService</span> <span class=\"operator\">=</span> processEngine.getTaskService();</span><br><span class=\"line\">    <span class=\"type\">Task</span> <span class=\"variable\">task</span> <span class=\"operator\">=</span> taskService.createTaskQuery()</span><br><span class=\"line\">            .processDefinitionId(<span class=\"string\">&quot;event3001:1:8b1663fa-b02d-11ec-b480-c03c59ad2248&quot;</span>)</span><br><span class=\"line\">            .taskAssignee(<span class=\"string\">&quot;wangwu&quot;</span>)</span><br><span class=\"line\">            .singleResult();</span><br><span class=\"line\">    taskService.complete(task.getId());</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ç„¶åå†å»çœ‹Taskè¡¨ä¸­å·²ç»æ²¡æœ‰å¦å¤–ä¸¤æ¡è®°å½•äº†å“¦</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220330213516673.png\"\n                      alt=\"image-20220330213516673\"\n                ></p>\n<p>é€šè¿‡æ¡ˆä¾‹å¯ä»¥çœ‹åˆ°åœ¨æ²¡æœ‰å­æµç¨‹çš„æƒ…å†µä¸‹ï¼Œç»ˆæ­¢ç»“æŸäº‹ä»¶ä¼šæŠŠæ•´ä¸ªæµç¨‹éƒ½è¿›ç¨‹éƒ½ç»“æŸäº†ï¼Œè€Œä¸”åœ¨å†å²è®°å½•ä¸­ä¹Ÿå¯ä»¥çœ‹åˆ°ä¿¡æ¯</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220330215127129.png\"\n                      alt=\"image-20220330215127129\"\n                ></p>\n<h4 id=\"æ¡ˆä¾‹äºŒ\"><a href=\"#æ¡ˆä¾‹äºŒ\" class=\"headerlink\" title=\"æ¡ˆä¾‹äºŒ\"></a>æ¡ˆä¾‹äºŒ</h4><p>ç„¶åæˆ‘ä»¬æ¥çœ‹çœ‹åœ¨å­æµç¨‹ä¸­è§¦å‘ç»ˆæ­¢ç»“æŸäº‹ä»¶çš„æ¡ˆä¾‹ï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220330220208085.png\"\n                      alt=\"image-20220330220208085\"\n                ></p>\n<p>å®Œæ•´çš„xmlå†…å®¹ï¼š</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=<span class=\"string\">&quot;1.0&quot;</span> encoding=<span class=\"string\">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">definitions</span> <span class=\"attr\">xmlns</span>=<span class=\"string\">&quot;http://www.omg.org/spec/BPMN/20100524/MODEL&quot;</span> <span class=\"attr\">xmlns:xsi</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span> <span class=\"attr\">xmlns:xsd</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema&quot;</span> <span class=\"attr\">xmlns:flowable</span>=<span class=\"string\">&quot;http://flowable.org/bpmn&quot;</span> <span class=\"attr\">xmlns:bpmndi</span>=<span class=\"string\">&quot;http://www.omg.org/spec/BPMN/20100524/DI&quot;</span> <span class=\"attr\">xmlns:omgdc</span>=<span class=\"string\">&quot;http://www.omg.org/spec/DD/20100524/DC&quot;</span> <span class=\"attr\">xmlns:omgdi</span>=<span class=\"string\">&quot;http://www.omg.org/spec/DD/20100524/DI&quot;</span> <span class=\"attr\">typeLanguage</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema&quot;</span> <span class=\"attr\">expressionLanguage</span>=<span class=\"string\">&quot;http://www.w3.org/1999/XPath&quot;</span> <span class=\"attr\">targetNamespace</span>=<span class=\"string\">&quot;http://www.flowable.org/processdef&quot;</span> <span class=\"attr\">exporter</span>=<span class=\"string\">&quot;Flowable Open Source Modeler&quot;</span> <span class=\"attr\">exporterVersion</span>=<span class=\"string\">&quot;6.7.2&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">process</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;event3002&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;ç»ˆæ­¢æµç¨‹2&quot;</span> <span class=\"attr\">isExecutable</span>=<span class=\"string\">&quot;true&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">startEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;start01&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;ä»»åŠ¡å¼€å§‹&quot;</span> <span class=\"attr\">flowable:formFieldValidation</span>=<span class=\"string\">&quot;true&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">startEvent</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">userTask</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;task2&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;ç”¨æˆ·ä»»åŠ¡äºŒ&quot;</span> <span class=\"attr\">flowable:assignee</span>=<span class=\"string\">&quot;lisi&quot;</span> <span class=\"attr\">flowable:formFieldValidation</span>=<span class=\"string\">&quot;true&quot;</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">extensionElements</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">modeler:initiator-can-complete</span> <span class=\"attr\">xmlns:modeler</span>=<span class=\"string\">&quot;http://flowable.org/modeler&quot;</span>&gt;</span>&lt;![CDATA[false]]&gt;<span class=\"tag\">&lt;/<span class=\"name\">modeler:initiator-can-complete</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">extensionElements</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">userTask</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;sid-03E93AD6-F173-454F-B29F-B61FE45BE1E0&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;b001&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;task2&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">userTask</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;task1&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;ç”¨æˆ·ä»»åŠ¡ä¸€&quot;</span> <span class=\"attr\">flowable:assignee</span>=<span class=\"string\">&quot;zhangsan&quot;</span> <span class=\"attr\">flowable:formFieldValidation</span>=<span class=\"string\">&quot;true&quot;</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">extensionElements</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">modeler:initiator-can-complete</span> <span class=\"attr\">xmlns:modeler</span>=<span class=\"string\">&quot;http://flowable.org/modeler&quot;</span>&gt;</span>&lt;![CDATA[false]]&gt;<span class=\"tag\">&lt;/<span class=\"name\">modeler:initiator-can-complete</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">extensionElements</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">userTask</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;sid-A4455D52-7DAF-4193-9E4F-D75E133A6EDD&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;b001&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;task1&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">subProcess</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;sid-7A5C1ACB-D07C-407D-83BB-C55D04425AC7&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;subProcess&quot;</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">startEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;cstart01&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;å­æµç¨‹å¼€å§‹&quot;</span> <span class=\"attr\">flowable:formFieldValidation</span>=<span class=\"string\">&quot;true&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">startEvent</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">userTask</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;taskc01&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;å­äººå·¥ä»»åŠ¡ä¸€&quot;</span> <span class=\"attr\">flowable:assignee</span>=<span class=\"string\">&quot;user1&quot;</span> <span class=\"attr\">flowable:formFieldValidation</span>=<span class=\"string\">&quot;true&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">extensionElements</span>&gt;</span></span><br><span class=\"line\">          <span class=\"tag\">&lt;<span class=\"name\">modeler:initiator-can-complete</span> <span class=\"attr\">xmlns:modeler</span>=<span class=\"string\">&quot;http://flowable.org/modeler&quot;</span>&gt;</span>&lt;![CDATA[false]]&gt;<span class=\"tag\">&lt;/<span class=\"name\">modeler:initiator-can-complete</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">extensionElements</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">userTask</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">exclusiveGateway</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;p001&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;æ’ä»–ç½‘å…³&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">exclusiveGateway</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">userTask</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;taskc02&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;å­äººå·¥ä»»åŠ¡äºŒ&quot;</span> <span class=\"attr\">flowable:assignee</span>=<span class=\"string\">&quot;user2&quot;</span> <span class=\"attr\">flowable:formFieldValidation</span>=<span class=\"string\">&quot;true&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">extensionElements</span>&gt;</span></span><br><span class=\"line\">          <span class=\"tag\">&lt;<span class=\"name\">modeler:initiator-can-complete</span> <span class=\"attr\">xmlns:modeler</span>=<span class=\"string\">&quot;http://flowable.org/modeler&quot;</span>&gt;</span>&lt;![CDATA[false]]&gt;<span class=\"tag\">&lt;/<span class=\"name\">modeler:initiator-can-complete</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">extensionElements</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">userTask</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">endEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;endc01&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;å­æµç¨‹ç»“æŸ&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">endEvent</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">endEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;sid-BD67523C-DDDA-46B8-A788-C54769B081B1&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">terminateEventDefinition</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">terminateEventDefinition</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">endEvent</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;sid-2E0A3425-3C34-4771-85C0-C8C7B7D7BFF5&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;cstart01&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;taskc01&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;sid-B0777673-C3BE-488B-87B2-34A71CEE2C73&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;taskc01&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;p001&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;sid-3C938AB5-2FDF-4C0B-AED8-15853AB07FE8&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;taskc02&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;endc01&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;sid-AAC6E950-F7BD-454A-9105-F43E5D4530A1&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;p001&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;sid-BD67523C-DDDA-46B8-A788-C54769B081B1&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">conditionExpression</span> <span class=\"attr\">xsi:type</span>=<span class=\"string\">&quot;tFormalExpression&quot;</span>&gt;</span>&lt;![CDATA[$&#123;flag&lt;=0&#125;]]&gt;<span class=\"tag\">&lt;/<span class=\"name\">conditionExpression</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;sid-EFCAE414-03A4-4313-B97A-4BF962888C37&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;p001&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;taskc02&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">conditionExpression</span> <span class=\"attr\">xsi:type</span>=<span class=\"string\">&quot;tFormalExpression&quot;</span>&gt;</span>&lt;![CDATA[$&#123;flag&gt;0&#125;]]&gt;<span class=\"tag\">&lt;/<span class=\"name\">conditionExpression</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">subProcess</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">parallelGateway</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;b001&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;å¹¶è¡Œç½‘å…³&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">parallelGateway</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;sid-D87CB0F6-EF35-479A-80A7-5FDACF1022E1&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;start01&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;b001&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">parallelGateway</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;b002&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;å¹¶è¡Œç½‘å…³&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">parallelGateway</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;sid-200E2768-DCA0-4FAD-A3C0-2D69938379A2&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;task2&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;b002&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;sid-A554CEA8-FD95-4EA4-BED3-EA748273D775&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;sid-7A5C1ACB-D07C-407D-83BB-C55D04425AC7&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;b002&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;sid-C5FB6E94-3563-49C8-9BA2-C0C80670E9FD&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;task1&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;b002&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">endEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;end003&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;ç»“æŸäº‹ä»¶&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">endEvent</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;sid-679D7677-4828-4BCF-9F2E-CBC426D4B72B&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;b002&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;end003&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;sid-0264CAD1-386A-4A4F-ADDA-DCF62EE90594&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;b001&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;sid-7A5C1ACB-D07C-407D-83BB-C55D04425AC7&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">process</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNDiagram</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNDiagram_event3002&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNPlane</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;event3002&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNPlane_event3002&quot;</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;start01&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_start01&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;30.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;30.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;75.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;200.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;task2&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_task2&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;80.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;100.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;420.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;175.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;task1&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_task1&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;80.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;100.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;420.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;15.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;sid-7A5C1ACB-D07C-407D-83BB-C55D04425AC7&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_sid-7A5C1ACB-D07C-407D-83BB-C55D04425AC7&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;187.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;531.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;285.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;330.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;cstart01&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_cstart01&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;30.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;30.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;322.5&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;410.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;taskc01&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_taskc01&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;80.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;100.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;390.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;385.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;p001&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_p001&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;40.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;40.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;542.5&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;405.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;taskc02&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_taskc02&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;80.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;100.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;627.5&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;385.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;endc01&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_endc01&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;28.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;28.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;765.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;411.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;sid-BD67523C-DDDA-46B8-A788-C54769B081B1&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_sid-BD67523C-DDDA-46B8-A788-C54769B081B1&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;28.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;28.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;548.5&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;480.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;b001&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_b001&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;40.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;40.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;165.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;195.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;b002&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_b002&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;40.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;40.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;867.5&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;195.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;end003&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_end003&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;28.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;28.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;960.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;207.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;sid-EFCAE414-03A4-4313-B97A-4BF962888C37&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_sid-EFCAE414-03A4-4313-B97A-4BF962888C37&quot;</span> <span class=\"attr\">flowable:sourceDockerX</span>=<span class=\"string\">&quot;20.5&quot;</span> <span class=\"attr\">flowable:sourceDockerY</span>=<span class=\"string\">&quot;20.5&quot;</span> <span class=\"attr\">flowable:targetDockerX</span>=<span class=\"string\">&quot;50.0&quot;</span> <span class=\"attr\">flowable:targetDockerY</span>=<span class=\"string\">&quot;40.0&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;582.0247370727355&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;425.41666666666663&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;627.4999999999881&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;425.2181222707423&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;sid-3C938AB5-2FDF-4C0B-AED8-15853AB07FE8&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_sid-3C938AB5-2FDF-4C0B-AED8-15853AB07FE8&quot;</span> <span class=\"attr\">flowable:sourceDockerX</span>=<span class=\"string\">&quot;50.0&quot;</span> <span class=\"attr\">flowable:sourceDockerY</span>=<span class=\"string\">&quot;40.0&quot;</span> <span class=\"attr\">flowable:targetDockerX</span>=<span class=\"string\">&quot;14.0&quot;</span> <span class=\"attr\">flowable:targetDockerY</span>=<span class=\"string\">&quot;14.0&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;727.4499999997752&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;425.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;765.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;425.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;sid-2E0A3425-3C34-4771-85C0-C8C7B7D7BFF5&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_sid-2E0A3425-3C34-4771-85C0-C8C7B7D7BFF5&quot;</span> <span class=\"attr\">flowable:sourceDockerX</span>=<span class=\"string\">&quot;15.0&quot;</span> <span class=\"attr\">flowable:sourceDockerY</span>=<span class=\"string\">&quot;15.0&quot;</span> <span class=\"attr\">flowable:targetDockerX</span>=<span class=\"string\">&quot;50.0&quot;</span> <span class=\"attr\">flowable:targetDockerY</span>=<span class=\"string\">&quot;40.0&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;352.449998261009&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;425.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;390.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;425.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;sid-A554CEA8-FD95-4EA4-BED3-EA748273D775&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_sid-A554CEA8-FD95-4EA4-BED3-EA748273D775&quot;</span> <span class=\"attr\">flowable:sourceDockerX</span>=<span class=\"string\">&quot;265.5&quot;</span> <span class=\"attr\">flowable:sourceDockerY</span>=<span class=\"string\">&quot;93.5&quot;</span> <span class=\"attr\">flowable:targetDockerX</span>=<span class=\"string\">&quot;20.5&quot;</span> <span class=\"attr\">flowable:targetDockerY</span>=<span class=\"string\">&quot;20.5&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;815.95&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;423.5&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;888.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;423.5&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;888.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;234.40453342953353&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;sid-AAC6E950-F7BD-454A-9105-F43E5D4530A1&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_sid-AAC6E950-F7BD-454A-9105-F43E5D4530A1&quot;</span> <span class=\"attr\">flowable:sourceDockerX</span>=<span class=\"string\">&quot;20.5&quot;</span> <span class=\"attr\">flowable:sourceDockerY</span>=<span class=\"string\">&quot;20.5&quot;</span> <span class=\"attr\">flowable:targetDockerX</span>=<span class=\"string\">&quot;14.0&quot;</span> <span class=\"attr\">flowable:targetDockerY</span>=<span class=\"string\">&quot;14.0&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;562.8602941176471&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;444.5752202643172&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;562.6018221538329&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;480.0003662069823&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;sid-200E2768-DCA0-4FAD-A3C0-2D69938379A2&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_sid-200E2768-DCA0-4FAD-A3C0-2D69938379A2&quot;</span> <span class=\"attr\">flowable:sourceDockerX</span>=<span class=\"string\">&quot;50.0&quot;</span> <span class=\"attr\">flowable:sourceDockerY</span>=<span class=\"string\">&quot;40.0&quot;</span> <span class=\"attr\">flowable:targetDockerX</span>=<span class=\"string\">&quot;20.5&quot;</span> <span class=\"attr\">flowable:targetDockerY</span>=<span class=\"string\">&quot;20.5&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;519.949999999999&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;215.05974880382777&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;867.97604790418&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;215.4760479041916&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;sid-B0777673-C3BE-488B-87B2-34A71CEE2C73&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_sid-B0777673-C3BE-488B-87B2-34A71CEE2C73&quot;</span> <span class=\"attr\">flowable:sourceDockerX</span>=<span class=\"string\">&quot;50.0&quot;</span> <span class=\"attr\">flowable:sourceDockerY</span>=<span class=\"string\">&quot;40.0&quot;</span> <span class=\"attr\">flowable:targetDockerX</span>=<span class=\"string\">&quot;20.5&quot;</span> <span class=\"attr\">flowable:targetDockerY</span>=<span class=\"string\">&quot;20.5&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;489.9499999999965&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;425.2030487804878&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;542.9183673469388&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;425.4183673469388&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;sid-679D7677-4828-4BCF-9F2E-CBC426D4B72B&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_sid-679D7677-4828-4BCF-9F2E-CBC426D4B72B&quot;</span> <span class=\"attr\">flowable:sourceDockerX</span>=<span class=\"string\">&quot;20.5&quot;</span> <span class=\"attr\">flowable:sourceDockerY</span>=<span class=\"string\">&quot;20.5&quot;</span> <span class=\"attr\">flowable:targetDockerX</span>=<span class=\"string\">&quot;14.0&quot;</span> <span class=\"attr\">flowable:targetDockerY</span>=<span class=\"string\">&quot;14.0&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;906.92933478735&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;215.5&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;933.75&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;215.5&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;933.75&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;221.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;960.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;221.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;sid-D87CB0F6-EF35-479A-80A7-5FDACF1022E1&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_sid-D87CB0F6-EF35-479A-80A7-5FDACF1022E1&quot;</span> <span class=\"attr\">flowable:sourceDockerX</span>=<span class=\"string\">&quot;15.0&quot;</span> <span class=\"attr\">flowable:sourceDockerY</span>=<span class=\"string\">&quot;15.0&quot;</span> <span class=\"attr\">flowable:targetDockerX</span>=<span class=\"string\">&quot;20.0&quot;</span> <span class=\"attr\">flowable:targetDockerY</span>=<span class=\"string\">&quot;20.0&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;104.94999797575196&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;215.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;165.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;215.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;sid-0264CAD1-386A-4A4F-ADDA-DCF62EE90594&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_sid-0264CAD1-386A-4A4F-ADDA-DCF62EE90594&quot;</span> <span class=\"attr\">flowable:sourceDockerX</span>=<span class=\"string\">&quot;22.5&quot;</span> <span class=\"attr\">flowable:sourceDockerY</span>=<span class=\"string\">&quot;32.015625&quot;</span> <span class=\"attr\">flowable:targetDockerX</span>=<span class=\"string\">&quot;1.1773835920177385&quot;</span> <span class=\"attr\">flowable:targetDockerY</span>=<span class=\"string\">&quot;93.5&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;187.5&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;232.44861780088067&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;187.5&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;423.5&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;285.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;423.5&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;sid-03E93AD6-F173-454F-B29F-B61FE45BE1E0&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_sid-03E93AD6-F173-454F-B29F-B61FE45BE1E0&quot;</span> <span class=\"attr\">flowable:sourceDockerX</span>=<span class=\"string\">&quot;20.5&quot;</span> <span class=\"attr\">flowable:sourceDockerY</span>=<span class=\"string\">&quot;20.5&quot;</span> <span class=\"attr\">flowable:targetDockerX</span>=<span class=\"string\">&quot;50.0&quot;</span> <span class=\"attr\">flowable:targetDockerY</span>=<span class=\"string\">&quot;40.0&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;204.4800158394907&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;215.46654929577466&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;419.99999999998107&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;215.08778558875218&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;sid-A4455D52-7DAF-4193-9E4F-D75E133A6EDD&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_sid-A4455D52-7DAF-4193-9E4F-D75E133A6EDD&quot;</span> <span class=\"attr\">flowable:sourceDockerX</span>=<span class=\"string\">&quot;20.5&quot;</span> <span class=\"attr\">flowable:sourceDockerY</span>=<span class=\"string\">&quot;20.5&quot;</span> <span class=\"attr\">flowable:targetDockerX</span>=<span class=\"string\">&quot;50.0&quot;</span> <span class=\"attr\">flowable:targetDockerY</span>=<span class=\"string\">&quot;40.0&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;185.5&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;195.5&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;185.5&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;55.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;420.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;55.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;sid-C5FB6E94-3563-49C8-9BA2-C0C80670E9FD&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_sid-C5FB6E94-3563-49C8-9BA2-C0C80670E9FD&quot;</span> <span class=\"attr\">flowable:sourceDockerX</span>=<span class=\"string\">&quot;50.0&quot;</span> <span class=\"attr\">flowable:sourceDockerY</span>=<span class=\"string\">&quot;40.0&quot;</span> <span class=\"attr\">flowable:targetDockerX</span>=<span class=\"string\">&quot;20.0&quot;</span> <span class=\"attr\">flowable:targetDockerY</span>=<span class=\"string\">&quot;13.7109375&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;519.95&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;55.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;887.5&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;55.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;887.5&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;195.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNPlane</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNDiagram</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">definitions</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>æµç¨‹è¯´æ˜ï¼šäººå·¥ä»»åŠ¡ä¸€ â€“&gt;zhangsan  äººå·¥ä»»åŠ¡äºŒ â€“&gt;lisi  å­äººå·¥ä»»åŠ¡ä¸€ ï¼š user1 å­äººå·¥ä»»åŠ¡äºŒ ï¼š user2</p>\n<p>å­ä»»åŠ¡å®Œæˆä»»åŠ¡å¦‚æœflag&lt;&#x3D;0,é‚£ä¹ˆå­æµç¨‹ä¸­æ–­ç»“æŸï¼Œå­äººå·¥ä»»åŠ¡äºŒä¸ä¼šè§¦å‘</p>\n<p>éƒ¨ç½²æµç¨‹</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">test02</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> Exception&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"type\">Deployment</span> <span class=\"variable\">deployment</span> <span class=\"operator\">=</span> processEngine.getRepositoryService().createDeployment()</span><br><span class=\"line\">            .addClasspathResource(<span class=\"string\">&quot;ç»ˆæ­¢æµç¨‹2.bpmn20.xml&quot;</span>)</span><br><span class=\"line\">            .name(<span class=\"string\">&quot;ç»ˆæ­¢æµç¨‹2&quot;</span>)</span><br><span class=\"line\">            .deploy();</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;-----&quot;</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ç„¶åå¯åŠ¨æµç¨‹</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">startProcessInstanceByKey</span><span class=\"params\">()</span>  <span class=\"keyword\">throws</span> Exception&#123;</span><br><span class=\"line\">    <span class=\"comment\">// è®¾ç½®å¯¹åº”çš„æµç¨‹å˜é‡çš„å€¼</span></span><br><span class=\"line\">    Map&lt;String,Object&gt; map = <span class=\"keyword\">new</span> <span class=\"title class_\">HashMap</span>&lt;&gt;();</span><br><span class=\"line\">    map.put(<span class=\"string\">&quot;flag&quot;</span>,<span class=\"number\">0</span>);<span class=\"comment\">// è®¾ç½®flagä¸º0è§¦å‘æµç¨‹ç»“æŸäº‹ä»¶</span></span><br><span class=\"line\">    processEngine.getRuntimeService()</span><br><span class=\"line\">            .startProcessInstanceById(<span class=\"string\">&quot;event3002:1:92679bec-b03d-11ec-901e-c03c59ad2248&quot;</span>,map);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>è¿™æ—¶åœ¨ACT_RU_TASKä¸­å°±åº”è¯¥æœ‰ä¸‰æ¡å¯¹åº”çš„TASKè®°å½•äº†</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220330232643286.png\"\n                      alt=\"image-20220330232643286\"\n                ></p>\n<p>ç„¶åæˆ‘ä»¬æ‰§è¡Œ<code>user1</code>çš„å­ä»»åŠ¡ï¼Œå› ä¸ºç°åœ¨æµç¨‹å˜é‡<code>flag=0</code>æ‰€ä»¥ä¼šè§¦å‘ç»ˆæ­¢ç»“æŸäº‹ä»¶</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220330232801450.png\"\n                      alt=\"image-20220330232801450\"\n                ></p>\n<p>æ‰§è¡Œä»»åŠ¡ï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">completeTask</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"type\">TaskService</span> <span class=\"variable\">taskService</span> <span class=\"operator\">=</span> processEngine.getTaskService();</span><br><span class=\"line\">    <span class=\"type\">Task</span> <span class=\"variable\">task</span> <span class=\"operator\">=</span> taskService.createTaskQuery()</span><br><span class=\"line\">            .processDefinitionId(<span class=\"string\">&quot;event3002:1:92679bec-b03d-11ec-901e-c03c59ad2248&quot;</span>)</span><br><span class=\"line\">            .taskAssignee(<span class=\"string\">&quot;user1&quot;</span>)</span><br><span class=\"line\">            .singleResult();</span><br><span class=\"line\">    taskService.complete(task.getId());</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>æ‰§è¡ŒæˆåŠŸåæˆ‘ä»¬å¯ä»¥å‘ç°å­äººå·¥ä»»åŠ¡ä¸€æ²¡æœ‰äº†ï¼Œä½†æ˜¯ä¹Ÿæ²¡æœ‰å­äººå·¥ä»»åŠ¡äºŒï¼Œä½†æ˜¯ä¸»æµç¨‹ä¸­çš„ä¸¤ä¸ªä»»åŠ¡éƒ½è¿˜åœ¨</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220330232959807.png\"\n                      alt=\"image-20220330232959807\"\n                ></p>\n<p>è€Œä¸”è¿›å…¥åˆ°å†å²æ•°æ®ä¸­ä¹Ÿå¯ä»¥çœ‹åˆ°</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220330233448096.png\"\n                      alt=\"image-20220330233448096\"\n                ></p>\n<h3 id=\"å–æ¶ˆç»“æŸäº‹ä»¶\"><a href=\"#å–æ¶ˆç»“æŸäº‹ä»¶\" class=\"headerlink\" title=\"å–æ¶ˆç»“æŸäº‹ä»¶\"></a>å–æ¶ˆç»“æŸäº‹ä»¶</h3><p>å–æ¶ˆç»“æŸäº‹ä»¶ï¼ˆcancel end eventï¼‰åªèƒ½ä¸BPMNäº‹åŠ¡å­æµç¨‹ï¼ˆBPMN transaction subprocessï¼‰ä¸€èµ·ä½¿ç”¨ã€‚å½“åˆ°è¾¾å–æ¶ˆç»“æŸäº‹ä»¶æ—¶ï¼Œä¼šæŠ›å‡ºå–æ¶ˆäº‹ä»¶ï¼Œä¸”å¿…é¡»ç”±å–æ¶ˆè¾¹ç•Œäº‹ä»¶ï¼ˆcancel boundary eventï¼‰æ•è·ã€‚å–æ¶ˆè¾¹ç•Œäº‹ä»¶å°†å–æ¶ˆäº‹åŠ¡ï¼Œå¹¶è§¦å‘è¡¥å¿ï¼ˆcompensationï¼‰ã€‚</p>\n<p>å…·ä½“é€šè¿‡æ¡ˆä¾‹æ¥è®²è§£ï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220401110131810.png\"\n                      alt=\"image-20220401110131810\"\n                ></p>\n<p>ç»“æŸå–æ¶ˆäº‹ä»¶æˆ‘ä»¬åªèƒ½åœ¨äº‹åŠ¡å­æµç¨‹ä¸­ä½¿ç”¨ï¼Œåœ¨FlowableUIä¸­æš‚æ—¶æ²¡æœ‰æ‰¾åˆ°è¿™ä¸ªç»„ä»¶ï¼Œæ‰€ä»¥åœ¨Eclipseä¸­æ¥ç»˜åˆ¶</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220401110621048.png\"\n                      alt=\"image-20220401110621048\"\n                ></p>\n<p>å®Œæ•´çš„xmlæ–‡ä»¶</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=<span class=\"string\">&quot;1.0&quot;</span> encoding=<span class=\"string\">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">definitions</span> <span class=\"attr\">xmlns</span>=<span class=\"string\">&quot;http://www.omg.org/spec/BPMN/20100524/MODEL&quot;</span> <span class=\"attr\">xmlns:xsi</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span> <span class=\"attr\">xmlns:xsd</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema&quot;</span> <span class=\"attr\">xmlns:activiti</span>=<span class=\"string\">&quot;http://activiti.org/bpmn&quot;</span> <span class=\"attr\">xmlns:bpmndi</span>=<span class=\"string\">&quot;http://www.omg.org/spec/BPMN/20100524/DI&quot;</span> <span class=\"attr\">xmlns:omgdc</span>=<span class=\"string\">&quot;http://www.omg.org/spec/DD/20100524/DC&quot;</span> <span class=\"attr\">xmlns:omgdi</span>=<span class=\"string\">&quot;http://www.omg.org/spec/DD/20100524/DI&quot;</span> <span class=\"attr\">typeLanguage</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema&quot;</span> <span class=\"attr\">expressionLanguage</span>=<span class=\"string\">&quot;http://www.w3.org/1999/XPath&quot;</span> <span class=\"attr\">targetNamespace</span>=<span class=\"string\">&quot;http://www.activiti.org/test&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">process</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;myProcess&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;My process&quot;</span> <span class=\"attr\">isExecutable</span>=<span class=\"string\">&quot;true&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">startEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;startevent1&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;Start&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">startEvent</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">transaction</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;transaction1&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;Transaction&quot;</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">startEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;startevent2&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;äº‹åŠ¡å­æµç¨‹å¼€å§‹&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">startEvent</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">userTask</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;usertask1&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;äººå·¥ä»»åŠ¡ä¸€&quot;</span> <span class=\"attr\">activiti:assignee</span>=<span class=\"string\">&quot;zhangsan&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">userTask</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;flow2&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;startevent2&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;usertask1&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">exclusiveGateway</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;exclusivegateway1&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;æ’ä»–ç½‘å…³&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">exclusiveGateway</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;flow3&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;usertask1&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;exclusivegateway1&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">userTask</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;usertask2&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;äººå·¥ä»»åŠ¡äºŒ&quot;</span> <span class=\"attr\">activiti:assignee</span>=<span class=\"string\">&quot;lisi&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">userTask</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;flow4&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;exclusivegateway1&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;usertask2&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">conditionExpression</span> <span class=\"attr\">xsi:type</span>=<span class=\"string\">&quot;tFormalExpression&quot;</span>&gt;</span>&lt;![CDATA[$&#123;flag&gt;0&#125;]]&gt;<span class=\"tag\">&lt;/<span class=\"name\">conditionExpression</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">endEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;endevent1&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;äº‹åŠ¡å­æµç¨‹ç»“æŸ&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">endEvent</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;flow5&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;usertask2&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;endevent1&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">endEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;cancelendevent1&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;å–æ¶ˆç»“æŸäº‹ä»¶&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">cancelEventDefinition</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">cancelEventDefinition</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">endEvent</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;flow6&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;exclusivegateway1&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;cancelendevent1&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">conditionExpression</span> <span class=\"attr\">xsi:type</span>=<span class=\"string\">&quot;tFormalExpression&quot;</span>&gt;</span>&lt;![CDATA[$&#123;flag&lt;=0&#125;]]&gt;<span class=\"tag\">&lt;/<span class=\"name\">conditionExpression</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">boundaryEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;boundarycompensation1&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;Compensate&quot;</span> <span class=\"attr\">attachedToRef</span>=<span class=\"string\">&quot;usertask1&quot;</span> <span class=\"attr\">cancelActivity</span>=<span class=\"string\">&quot;true&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">compensateEventDefinition</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">compensateEventDefinition</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">boundaryEvent</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">serviceTask</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;servicetask5&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;è¡¥å¿è‡ªåŠ¨ä»»åŠ¡&quot;</span> <span class=\"attr\">isForCompensation</span>=<span class=\"string\">&quot;true&quot;</span> <span class=\"attr\">activiti:class</span>=<span class=\"string\">&quot;com.bobo.delegate.MyOneDelegate&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">serviceTask</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">association</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;association1&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;boundarycompensation1&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;servicetask5&quot;</span> <span class=\"attr\">associationDirection</span>=<span class=\"string\">&quot;None&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">association</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">transaction</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;flow1&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;startevent1&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;transaction1&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">boundaryEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;boundarycancel1&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;å–æ¶ˆè¾¹ç•Œäº‹ä»¶&quot;</span> <span class=\"attr\">attachedToRef</span>=<span class=\"string\">&quot;transaction1&quot;</span> <span class=\"attr\">cancelActivity</span>=<span class=\"string\">&quot;true&quot;</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">cancelEventDefinition</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">cancelEventDefinition</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">boundaryEvent</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">serviceTask</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;servicetask3&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;å–æ¶ˆäº‹ä»¶ç»“æŸ&quot;</span> <span class=\"attr\">activiti:class</span>=<span class=\"string\">&quot;com.bobo.delegate.MyThreeDelegate&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">serviceTask</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;flow8&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;boundarycancel1&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;servicetask3&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">endEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;endevent2&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;å–æ¶ˆäº‹ä»¶ç»“æŸ&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">endEvent</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;flow9&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;servicetask3&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;endevent2&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">serviceTask</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;servicetask4&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;æ­£å¸¸ç»“æŸä»»åŠ¡&quot;</span> <span class=\"attr\">activiti:class</span>=<span class=\"string\">&quot;com.bobo.delegate.MyTwoDelegate&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">serviceTask</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;flow10&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;transaction1&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;servicetask4&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">endEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;endevent3&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;End&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">endEvent</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;flow11&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;servicetask4&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;endevent3&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">process</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNDiagram</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNDiagram_myProcess&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNPlane</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;myProcess&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNPlane_myProcess&quot;</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;startevent1&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_startevent1&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;35.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;35.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;248.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;390.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;transaction1&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_transaction1&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;291.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;761.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;371.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;262.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;startevent2&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_startevent2&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;35.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;35.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;431.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;382.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;usertask1&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_usertask1&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;55.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;105.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;511.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;372.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;boundarycompensation1&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_boundarycompensation1&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;30.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;30.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;581.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;412.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;exclusivegateway1&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_exclusivegateway1&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;40.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;40.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;661.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;380.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;usertask2&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_usertask2&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;55.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;105.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;746.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;373.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;endevent1&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_endevent1&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;35.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;35.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;896.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;383.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;cancelendevent1&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_cancelendevent1&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;35.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;35.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;664.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;472.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;servicetask5&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_servicetask5&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;55.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;105.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;511.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;472.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;boundarycancel1&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_boundarycancel1&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;30.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;30.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;871.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;542.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;servicetask3&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_servicetask3&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;55.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;105.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;980.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;640.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;endevent2&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_endevent2&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;35.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;35.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;1130.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;650.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;servicetask4&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_servicetask4&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;55.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;105.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;1291.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;391.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;endevent3&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_endevent3&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;35.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;35.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;1450.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;401.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;flow2&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_flow2&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;466.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;399.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;511.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;399.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;flow3&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_flow3&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;616.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;399.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;661.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;400.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;flow4&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_flow4&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;701.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;400.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;746.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;400.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;flow5&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_flow5&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;851.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;400.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;896.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;400.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;flow6&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_flow6&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;681.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;420.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;681.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;472.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;association1&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_association1&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;596.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;442.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;563.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;472.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;flow1&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_flow1&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;283.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;407.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;371.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;407.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;flow8&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_flow8&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;886.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;572.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;1032.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;640.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;flow9&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_flow9&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;1085.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;667.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;1130.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;667.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;flow10&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_flow10&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;1132.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;407.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;1291.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;418.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;flow11&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_flow11&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;1396.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;418.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;1450.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;418.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNPlane</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNDiagram</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">definitions</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n\n\n<p>æµç¨‹è¯´æ˜ï¼šæµç¨‹ä¸­å®šä¹‰äº†ä¸€ä¸ªäº‹åŠ¡å­æµç¨‹å’Œä¸¤ä¸ªè‡ªåŠ¨ä»»åŠ¡</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220401111036816.png\"\n                      alt=\"image-20220401111036816\"\n                ></p>\n<p>ç„¶ååœ¨äº‹åŠ¡å­æµç¨‹ä¸­å®šä¹‰äº†ä¸¤ä¸ªäººå·¥ä»»åŠ¡ç”¨ä¸€ä¸ªæ’ä»–ç½‘å…³è¿æ¥ï¼Œflag&lt;&#x3D;0 çš„æƒ…å†µä¸‹ä¼šè§¦å‘ å–æ¶ˆç»“æŸäº‹ä»¶</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220401111201815.png\"\n                      alt=\"image-20220401111201815\"\n                ></p>\n<p>è§¦å‘å–æ¶ˆç»“æŸäº‹ä»¶ååŒæ—¶ä¼šè¢«å–æ¶ˆè¾¹ç•Œäº‹ä»¶æ•è·è€Œèµ° å–æ¶ˆäº‹ä»¶ç»“æŸçš„è‡ªåŠ¨ä»»åŠ¡</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220401111316353.png\"\n                      alt=\"image-20220401111316353\"\n                ></p>\n<p>åŒæ—¶è‡ªåŠ¨è¡¥å¿ä»»åŠ¡ä¹Ÿä¼šè§¦å‘ï¼Œå…³è”çš„è‡ªåŠ¨ä»»åŠ¡ä¹Ÿä¼šè§¦å‘</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220401111351513.png\"\n                      alt=\"image-20220401111351513\"\n                ></p>\n<p>æ³¨æ„åœ¨è®¾ç½®çš„æ—¶å€™éœ€è¦è®¾ç½®è¡¥å¿è‡ªåŠ¨ä»»åŠ¡ä¸ºå¯è¡¥å¿çš„</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220401111438577.png\"\n                      alt=\"image-20220401111438577\"\n                ></p>\n<p>è¡¥å¿è‡ªåŠ¨ä»»åŠ¡ç»‘å®šçš„JavaDelegateï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">MyOneDelegate</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">JavaDelegate</span> &#123;</span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">execute</span><span class=\"params\">(DelegateExecution execution)</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;å®Œæˆè‡ªåŠ¨å®¡æ‰¹ä»»åŠ¡-----ã€‹MyOneDelegate&quot;</span> + LocalDateTime.now().toString());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>æ­£å¸¸ç»“æŸä»»åŠ¡ç»‘å®šçš„JavaDelegate:</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">MyTwoDelegate</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">JavaDelegate</span> &#123;</span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">execute</span><span class=\"params\">(DelegateExecution execution)</span> &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;MyTwoDelegate----&gt;æ‰§è¡Œäº†&quot;</span> + LocalDateTime.now().toString());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>å–æ¶ˆäº‹ä»¶ç»“æŸç»‘å®šçš„JavaDelegate</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">MyThreeDelegate</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">JavaDelegate</span> &#123;</span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">execute</span><span class=\"params\">(DelegateExecution execution)</span> &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;MyThreeDelegate----&gt;æ‰§è¡Œäº†&quot;</span> + LocalDateTime.now().toString());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ç„¶åæˆ‘ä»¬éƒ¨ç½²ï¼Œå¯åŠ¨ï¼Œå’Œæ‰§è¡Œæµç¨‹ï¼Œçœ‹è¾“å‡ºæƒ…å†µ</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * éƒ¨ç½²æµç¨‹</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@throws</span> Exception</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">deploy</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> Exception&#123;</span><br><span class=\"line\">    <span class=\"type\">Deployment</span> <span class=\"variable\">deployment</span> <span class=\"operator\">=</span> processEngine.getRepositoryService().createDeployment()</span><br><span class=\"line\">            .addClasspathResource(<span class=\"string\">&quot;å–æ¶ˆç»“æŸäº‹ä»¶.bpmn20.xml&quot;</span>)</span><br><span class=\"line\">            .name(<span class=\"string\">&quot;å–æ¶ˆç»“æŸäº‹ä»¶&quot;</span>)</span><br><span class=\"line\">            .deploy();</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;-----&quot;</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * å¯åŠ¨æµç¨‹å®ä¾‹,è®¾ç½®æµç¨‹å˜é‡ä¸­çš„flag=0è§¦å‘å–æ¶ˆç»“æŸäº‹ä»¶</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">startProcessInstanceByKey</span><span class=\"params\">()</span>  <span class=\"keyword\">throws</span> Exception&#123;</span><br><span class=\"line\">    <span class=\"comment\">// è®¾ç½®å¯¹åº”çš„æµç¨‹å˜é‡çš„å€¼</span></span><br><span class=\"line\">    Map&lt;String,Object&gt; map = <span class=\"keyword\">new</span> <span class=\"title class_\">HashMap</span>&lt;&gt;();</span><br><span class=\"line\">    map.put(<span class=\"string\">&quot;flag&quot;</span>,<span class=\"number\">0</span>);<span class=\"comment\">// è®¾ç½®flagä¸º0è§¦å‘æµç¨‹ç»“æŸäº‹ä»¶</span></span><br><span class=\"line\">    processEngine.getRuntimeService()</span><br><span class=\"line\">            .startProcessInstanceById(<span class=\"string\">&quot;myProcess:3:effb46cf-b168-11ec-926f-c03c59ad2248&quot;</span>,map);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * å®Œæˆä»»åŠ¡</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">completeTask</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"type\">TaskService</span> <span class=\"variable\">taskService</span> <span class=\"operator\">=</span> processEngine.getTaskService();</span><br><span class=\"line\">    <span class=\"type\">Task</span> <span class=\"variable\">task</span> <span class=\"operator\">=</span> taskService.createTaskQuery()</span><br><span class=\"line\">            .processDefinitionId(<span class=\"string\">&quot;myProcess:3:effb46cf-b168-11ec-926f-c03c59ad2248&quot;</span>)</span><br><span class=\"line\">            .taskAssignee(<span class=\"string\">&quot;zhangsan&quot;</span>)</span><br><span class=\"line\">            .singleResult();</span><br><span class=\"line\">    taskService.complete(task.getId());</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<p>è¾“å‡ºç»“æœï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220401111758140.png\"\n                      alt=\"image-20220401111758140\"\n                ></p>\n<p>è¾“å‡ºç»“æœæ˜¯æ»¡è¶³æˆ‘ä»¬çš„æœŸæœ›çš„ã€‚</p>\n<h3 id=\"è¡¥å¿äº‹ä»¶\"><a href=\"#è¡¥å¿äº‹ä»¶\" class=\"headerlink\" title=\"è¡¥å¿äº‹ä»¶\"></a>è¡¥å¿äº‹ä»¶</h3><p>é€šè¿‡è¡¥å¿è¾¾åˆ°æ§åˆ¶ä¸šåŠ¡æµç¨‹çš„ç›®çš„å°±æ˜¯è¡¥å¿äº‹ä»¶ï¼Œæ¯”å¦‚æˆ‘ä»¬æ­£å¸¸çš„ä¹°æœºç¥¨çš„æµç¨‹ä¸‹è®¢å•è´­ä¹°ï¼Œç„¶ååŒæ—¶å¼¹å‡ºæ”¯ä»˜æµç¨‹é¡µé¢ã€‚æ”¯ä»˜æˆåŠŸåå°±å¯ä»¥ç­‰å¾…å‡ºç¥¨äº†ï¼Œä½†æ˜¯å¦‚æœæˆ‘ä»¬æ”¯ä»˜å¤±è´¥çš„è¯ï¼Œè¿™æ—¶è¦ä¹ˆé‡æ–°æ”¯ä»˜ï¼Œæ›´æ¢æ”¯ä»˜æ–¹å¼æˆ–è€…å–æ¶ˆé¢„è®¢ï¼Œè¿™æ—¶å–æ¶ˆé¢„è®¢æˆ‘ä»¬å°±å¯ä»¥é€šè¿‡è¡¥å¿äº‹ä»¶æ¥å®ç°ï¼Œå…·ä½“çš„æ¡ˆä¾‹å¦‚ä¸‹ï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220401202116847.png\"\n                      alt=\"image-20220401202116847\"\n                ></p>\n<p>å®Œæ•´çš„xmlæ–‡ä»¶ï¼š</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=<span class=\"string\">&quot;1.0&quot;</span> encoding=<span class=\"string\">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">definitions</span> <span class=\"attr\">xmlns</span>=<span class=\"string\">&quot;http://www.omg.org/spec/BPMN/20100524/MODEL&quot;</span> <span class=\"attr\">xmlns:xsi</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span> <span class=\"attr\">xmlns:xsd</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema&quot;</span> <span class=\"attr\">xmlns:activiti</span>=<span class=\"string\">&quot;http://activiti.org/bpmn&quot;</span> <span class=\"attr\">xmlns:bpmndi</span>=<span class=\"string\">&quot;http://www.omg.org/spec/BPMN/20100524/DI&quot;</span> <span class=\"attr\">xmlns:omgdc</span>=<span class=\"string\">&quot;http://www.omg.org/spec/DD/20100524/DC&quot;</span> <span class=\"attr\">xmlns:omgdi</span>=<span class=\"string\">&quot;http://www.omg.org/spec/DD/20100524/DI&quot;</span> <span class=\"attr\">typeLanguage</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema&quot;</span> <span class=\"attr\">expressionLanguage</span>=<span class=\"string\">&quot;http://www.w3.org/1999/XPath&quot;</span> <span class=\"attr\">targetNamespace</span>=<span class=\"string\">&quot;http://www.activiti.org/test&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">error</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;payFail&quot;</span> <span class=\"attr\">errorCode</span>=<span class=\"string\">&quot;payFail&quot;</span> &gt;</span><span class=\"tag\">&lt;/<span class=\"name\">error</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">process</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;myProcess&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;My process&quot;</span> <span class=\"attr\">isExecutable</span>=<span class=\"string\">&quot;true&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">startEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;startevent1&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;å¼€å§‹äº‹ä»¶&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">startEvent</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">parallelGateway</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;parallelgateway1&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;å¹¶è¡Œç½‘å…³&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">parallelGateway</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;flow1&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;startevent1&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;parallelgateway1&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">serviceTask</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;servicetask1&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;é¢„è®¢æœºç¥¨&quot;</span> <span class=\"attr\">activiti:class</span>=<span class=\"string\">&quot;com.bobo.delegate.MyTwoDelegate&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">serviceTask</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">serviceTask</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;servicetask2&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;å¾®ä¿¡æ”¯ä»˜&quot;</span> <span class=\"attr\">activiti:class</span>=<span class=\"string\">&quot;com.bobo.delegate.MyOneDelegate&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">serviceTask</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">userTask</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;usertask1&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;äººå·¥å‡ºç¥¨&quot;</span> <span class=\"attr\">activiti:assignee</span>=<span class=\"string\">&quot;zhangsan&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">userTask</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;flow2&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;servicetask1&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;usertask1&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">parallelGateway</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;parallelgateway2&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;Parallel Gateway&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">parallelGateway</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;flow3&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;usertask1&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;parallelgateway2&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;flow4&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;parallelgateway1&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;servicetask1&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;flow5&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;parallelgateway1&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;servicetask2&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;flow6&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;servicetask2&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;parallelgateway2&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">serviceTask</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;servicetask3&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;å–æ¶ˆé¢„è®¢&quot;</span> <span class=\"attr\">isForCompensation</span>=<span class=\"string\">&quot;true&quot;</span> <span class=\"attr\">activiti:class</span>=<span class=\"string\">&quot;com.bobo.delegate.MyThreeDelegate&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">serviceTask</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">boundaryEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;boundarycompensation1&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;è¡¥å¿è¾¹ç•Œäº‹ä»¶&quot;</span> <span class=\"attr\">attachedToRef</span>=<span class=\"string\">&quot;servicetask1&quot;</span> <span class=\"attr\">cancelActivity</span>=<span class=\"string\">&quot;true&quot;</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">compensateEventDefinition</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">compensateEventDefinition</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">boundaryEvent</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">boundaryEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;boundaryerror1&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;é”™è¯¯è¾¹ç•Œäº‹ä»¶&quot;</span> <span class=\"attr\">attachedToRef</span>=<span class=\"string\">&quot;servicetask2&quot;</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">errorEventDefinition</span> <span class=\"attr\">errorRef</span>=<span class=\"string\">&quot;payFail&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">errorEventDefinition</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">boundaryEvent</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">intermediateThrowEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;compensationintermediatethrowevent1&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;è¡¥å¿æŠ›å‡ºä¸­é—´äº‹ä»¶&quot;</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">compensateEventDefinition</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">compensateEventDefinition</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">intermediateThrowEvent</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;flow7&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;boundaryerror1&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;compensationintermediatethrowevent1&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">endEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;endevent1&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;End&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">endEvent</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;flow8&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;compensationintermediatethrowevent1&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;endevent1&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">endEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;endevent2&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;End&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">endEvent</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;flow9&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;parallelgateway2&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;endevent2&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">association</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;association1&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;boundarycompensation1&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;servicetask3&quot;</span> <span class=\"attr\">associationDirection</span>=<span class=\"string\">&quot;None&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">association</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">process</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNDiagram</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNDiagram_myProcess&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNPlane</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;myProcess&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNPlane_myProcess&quot;</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;startevent1&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_startevent1&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;35.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;35.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;160.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;360.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;parallelgateway1&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_parallelgateway1&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;40.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;40.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;380.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;357.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;servicetask1&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_servicetask1&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;55.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;105.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;580.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;220.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;boundarycompensation1&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_boundarycompensation1&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;30.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;30.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;650.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;270.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;servicetask2&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_servicetask2&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;55.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;105.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;580.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;450.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;boundaryerror1&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_boundaryerror1&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;30.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;30.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;650.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;490.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;usertask1&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_usertask1&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;55.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;105.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;820.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;220.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;parallelgateway2&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_parallelgateway2&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;40.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;40.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;1140.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;336.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;servicetask3&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_servicetask3&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;55.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;105.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;830.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;336.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;compensationintermediatethrowevent1&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_compensationintermediatethrowevent1&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;35.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;35.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;740.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;590.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;endevent1&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_endevent1&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;35.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;35.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;820.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;590.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;endevent2&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_endevent2&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;35.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;35.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;1225.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;339.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;flow1&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_flow1&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;195.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;377.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;380.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;377.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;flow2&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_flow2&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;685.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;247.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;820.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;247.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;flow3&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_flow3&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;925.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;247.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;1160.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;247.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;1160.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;336.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;flow4&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_flow4&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;400.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;357.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;400.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;247.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;580.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;247.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;flow5&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_flow5&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;400.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;397.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;400.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;477.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;580.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;477.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;flow6&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_flow6&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;685.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;477.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;1160.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;477.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;1160.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;376.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;flow7&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_flow7&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;665.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;520.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;664.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;607.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;740.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;607.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;flow8&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_flow8&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;775.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;607.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;820.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;607.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;flow9&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_flow9&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;1180.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;356.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;1225.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;356.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;association1&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_association1&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;665.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;300.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;664.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;363.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;830.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;363.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNPlane</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNDiagram</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">definitions</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>æµç¨‹è¯´æ˜ï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220401202447583.png\"\n                      alt=\"image-20220401202447583\"\n                ></p>\n<p>å¾®ä¿¡æ”¯ä»˜ç»‘å®šçš„JavaDelegateï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">MyOneDelegate</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">JavaDelegate</span> &#123;</span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">execute</span><span class=\"params\">(DelegateExecution execution)</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;å¾®ä¿¡æ”¯ä»˜-----ã€‹MyOneDelegate&quot;</span> + LocalDateTime.now().toString());</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;ä½™é¢ä¸è¶³....&quot;</span>);</span><br><span class=\"line\">        <span class=\"keyword\">throw</span>  <span class=\"keyword\">new</span> <span class=\"title class_\">BpmnError</span>(<span class=\"string\">&quot;payFail&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>é¢„è®¢æœºç¥¨ç»‘å®šçš„JavaDelegate</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">MyTwoDelegate</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">JavaDelegate</span> &#123;</span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">execute</span><span class=\"params\">(DelegateExecution execution)</span> &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;MyTwoDelegate----&gt;é¢„è®¢æœºç¥¨æµç¨‹æ‰§è¡Œäº†&quot;</span> + LocalDateTime.now().toString());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>å–æ¶ˆè®¢å•ç»‘å®šçš„javaDelegate:</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">MyThreeDelegate</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">JavaDelegate</span> &#123;</span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">execute</span><span class=\"params\">(DelegateExecution execution)</span> &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;MyThreeDelegate----&gt;æœºç¥¨é¢„è®¢å–æ¶ˆäº†....&quot;</span> + LocalDateTime.now().toString());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>æ•´ä¸ªæµç¨‹æ‰§è¡Œçš„è¿‡ç¨‹æ˜¯ï¼šä»»åŠ¡å¼€å§‹åä¼šå¹¶è¡Œçš„æ‰§è¡Œæœºç¥¨é¢„è®¢å’Œå¾®ä¿¡æ”¯ä»˜ï¼Œç„¶ååœ¨å¾®ä¿¡æ”¯ä»˜æ˜¯æŠ›å‡ºpayFailé”™è¯¯ï¼ŒåŒæ—¶é”™è¯¯è¾¹ç•Œäº‹ä»¶ä¼šæ•è·åˆ°è¿™ä¸ªé”™è¯¯ï¼Œç„¶åæ‰§è¡Œåˆ° è¡¥å¿æŠ›å‡ºä¸­é—´äº‹ä»¶ï¼Œä¹‹ååœ¨æœºç¥¨é¢„è®¢çš„ è¡¥å¿è¾¹ç•Œäº‹ä»¶ è¢«è§¦å‘ï¼Œå¯¹åº”çš„è¡¥å¿è§¦å‘å™¨ä¼šæ‰§è¡Œå¯¹åº”çš„ä»£ç ã€‚ ç„¶åæˆ‘ä»¬éƒ¨ç½²åŠ å¯åŠ¨æµç¨‹åè§‚å¯Ÿæ§åˆ¶å°çš„è¾“å‡ºï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * éƒ¨ç½²æµç¨‹</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@throws</span> Exception</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">deploy</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> Exception&#123;</span><br><span class=\"line\">    <span class=\"type\">Deployment</span> <span class=\"variable\">deployment</span> <span class=\"operator\">=</span> processEngine.getRepositoryService().createDeployment()</span><br><span class=\"line\">            .addClasspathResource(<span class=\"string\">&quot;è¡¥å¿äº‹ä»¶.bpmn20.xml&quot;</span>)</span><br><span class=\"line\">            .name(<span class=\"string\">&quot;è¡¥å¿äº‹ä»¶&quot;</span>)</span><br><span class=\"line\">            .deploy();</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * å¯åŠ¨æµç¨‹å®ä¾‹</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">startProcessInstanceByKey</span><span class=\"params\">()</span>  <span class=\"keyword\">throws</span> Exception&#123;</span><br><span class=\"line\">    processEngine.getRuntimeService()</span><br><span class=\"line\">            .startProcessInstanceById(<span class=\"string\">&quot;myProcess:4:a45abe9f-b1b5-11ec-9daf-c03c59ad2248&quot;</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>æ§åˆ¶å°è¾“å‡ºï¼š</p>\n<figure class=\"highlight txt\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">MyTwoDelegate----&gt;é¢„è®¢æœºç¥¨æµç¨‹æ‰§è¡Œäº†2022-04-01T20:17:44.985</span><br><span class=\"line\">å¾®ä¿¡æ”¯ä»˜-----ã€‹MyOneDelegate2022-04-01T20:17:44.987</span><br><span class=\"line\">ä½™é¢ä¸è¶³....</span><br><span class=\"line\">MyThreeDelegate----&gt;æœºç¥¨é¢„è®¢å–æ¶ˆäº†....2022-04-01T20:17:45.028</span><br></pre></td></tr></table></figure>\n\n<p>è¾“å‡ºçš„ç»“æœå’Œæˆ‘ä»¬å‰é¢è®¾è®¡çš„æ˜¯ä¸€æ ·çš„ï¼Œæå®š~</p>\n","site":{"data":{"links":[{"name":"CZMæœ‰ç‚¹å†·","link":"https://czm.cool/","description":"CZMçš„åšå®¢","avatar":"https://img.czm.cool/avatar/avatar.png"},{"name":"PSH","link":"https://shamd.cloud/","description":"PSHçš„åšå®¢.","avatar":"https://shamd.cloud/upload/2022/07/afbb577733f46c9535dd1d6d6388278.jpg"},{"name":"KAI","link":"https://kainote.top/","description":"love artist, love code.","avatar":"https://cdn.jsdelivr.net/gh/kaix2301/pictures/img202201072101018.jpg"}]}},"excerpt":"","more":"<h1 id=\"flowableé«˜çº§ç¯‡\"><a href=\"#flowableé«˜çº§ç¯‡\" class=\"headerlink\" title=\"flowableé«˜çº§ç¯‡\"></a>flowableé«˜çº§ç¯‡</h1><blockquote>\n<p>lectureï¼šæ³¢æ³¢è€å¸ˆ</p>\n</blockquote>\n<h1 id=\"ä»»åŠ¡åˆ†é…å’Œæµç¨‹å˜é‡\"><a href=\"#ä»»åŠ¡åˆ†é…å’Œæµç¨‹å˜é‡\" class=\"headerlink\" title=\"ä»»åŠ¡åˆ†é…å’Œæµç¨‹å˜é‡\"></a>ä»»åŠ¡åˆ†é…å’Œæµç¨‹å˜é‡</h1><h2 id=\"ä»»åŠ¡åˆ†é…\"><a href=\"#ä»»åŠ¡åˆ†é…\" class=\"headerlink\" title=\"ä»»åŠ¡åˆ†é…\"></a>ä»»åŠ¡åˆ†é…</h2><h3 id=\"å›ºå®šåˆ†é…\"><a href=\"#å›ºå®šåˆ†é…\" class=\"headerlink\" title=\"å›ºå®šåˆ†é…\"></a>å›ºå®šåˆ†é…</h3><p>å›ºå®šåˆ†é…å°±æ˜¯æˆ‘ä»¬å‰é¢ä»‹ç»çš„ï¼Œåœ¨ç»˜åˆ¶æµç¨‹å›¾æˆ–è€…ç›´æ¥åœ¨æµç¨‹æ–‡ä»¶ä¸­é€šè¿‡Assigneeæ¥æŒ‡å®šçš„æ–¹å¼</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220322205919319.png\"\n                      alt=\"image-20220322205919319\"\n                ></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220322210018615.png\"\n                      alt=\"image-20220322210018615\"\n                ></p>\n<h3 id=\"è¡¨è¾¾å¼åˆ†é…\"><a href=\"#è¡¨è¾¾å¼åˆ†é…\" class=\"headerlink\" title=\"è¡¨è¾¾å¼åˆ†é…\"></a>è¡¨è¾¾å¼åˆ†é…</h3><p>Flowableä½¿ç”¨UELè¿›è¡Œè¡¨è¾¾å¼è§£æã€‚UELä»£è¡¨<em>Unified Expression Language</em>ï¼Œæ˜¯EE6è§„èŒƒçš„ä¸€éƒ¨åˆ†.Flowableæ”¯æŒä¸¤ç§UELè¡¨è¾¾å¼ï¼š UEL-value å’ŒUEL-method</p>\n<h4 id=\"å€¼è¡¨è¾¾å¼\"><a href=\"#å€¼è¡¨è¾¾å¼\" class=\"headerlink\" title=\"å€¼è¡¨è¾¾å¼\"></a>å€¼è¡¨è¾¾å¼</h4><p><strong>å€¼è¡¨è¾¾å¼ Value expression</strong>: è§£æä¸ºä¸€ä¸ªå€¼ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œæ‰€æœ‰æµç¨‹å˜é‡éƒ½å¯ä»¥ä½¿ç”¨ã€‚ï¼ˆè‹¥ä½¿ç”¨Springï¼‰æ‰€æœ‰çš„Spring beanä¹Ÿå¯ä»¥ç”¨åœ¨è¡¨è¾¾å¼é‡Œã€‚ä¾‹å¦‚</p>\n<figure class=\"highlight txt\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$&#123;myVar&#125;</span><br><span class=\"line\">$&#123;myBean.myProperty&#125;</span><br></pre></td></tr></table></figure>\n\n<p>æ¡ˆä¾‹è®²è§£ï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220322212342245.png\"\n                      alt=\"image-20220322212342245\"\n                ></p>\n<p>å¯ä»¥çœ‹åˆ°é€šè¿‡è¡¨è¾¾å¼å¤„ç†çš„æ•ˆæœ</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220322212431304.png\"\n                      alt=\"image-20220322212431304\"\n                ></p>\n<p>å…ˆéƒ¨ç½²æµç¨‹ï¼Œç„¶ååœ¨å¯åŠ¨æµç¨‹å®ä¾‹çš„æ—¶å€™ç»‘å®šè¡¨è¾¾å¼å¯¹åº”çš„å€¼</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * å¯åŠ¨æµç¨‹å®ä¾‹</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">testRunProcess</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// è·å–æµç¨‹å¼•æ“å¯¹è±¡</span></span><br><span class=\"line\">        <span class=\"type\">ProcessEngine</span> <span class=\"variable\">processEngine</span> <span class=\"operator\">=</span> ProcessEngines.getDefaultProcessEngine();</span><br><span class=\"line\">        <span class=\"comment\">// å¯åŠ¨æµç¨‹å®ä¾‹é€šè¿‡ RuntimeService å¯¹è±¡</span></span><br><span class=\"line\">        <span class=\"type\">RuntimeService</span> <span class=\"variable\">runtimeService</span> <span class=\"operator\">=</span> processEngine.getRuntimeService();</span><br><span class=\"line\">        <span class=\"comment\">// è®¾ç½® assignee çš„å–å€¼</span></span><br><span class=\"line\">        Map&lt;String,Object&gt; variables = <span class=\"keyword\">new</span> <span class=\"title class_\">HashMap</span>&lt;&gt;();</span><br><span class=\"line\">        variables.put(<span class=\"string\">&quot;assignee0&quot;</span>,<span class=\"string\">&quot;å¼ ä¸‰&quot;</span>) ;</span><br><span class=\"line\">        variables.put(<span class=\"string\">&quot;assignee1&quot;</span>,<span class=\"string\">&quot;æå››&quot;</span>); </span><br><span class=\"line\">        <span class=\"comment\">// å¯åŠ¨æµç¨‹å®ä¾‹ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æµç¨‹å®šä¹‰çš„id</span></span><br><span class=\"line\">        <span class=\"type\">ProcessInstance</span> <span class=\"variable\">processInstance</span> <span class=\"operator\">=</span> runtimeService</span><br><span class=\"line\">                .startProcessInstanceById(<span class=\"string\">&quot;MyHolidayUI:1:4&quot;</span>, variables);<span class=\"comment\">// å¯åŠ¨æµç¨‹å®ä¾‹</span></span><br><span class=\"line\">        <span class=\"comment\">// è¾“å‡ºç›¸å…³çš„æµç¨‹å®ä¾‹ä¿¡æ¯</span></span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;æµç¨‹å®šä¹‰çš„IDï¼š&quot;</span> + processInstance.getProcessDefinitionId());</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;æµç¨‹å®ä¾‹çš„IDï¼š&quot;</span> + processInstance.getId());</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;å½“å‰æ´»åŠ¨çš„IDï¼š&quot;</span> + processInstance.getActivityId());</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n\n<p>åœ¨æµç¨‹å˜é‡è¡¨ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°å¯¹åº”çš„æµç¨‹å˜é‡ä¿¡æ¯</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220322213558754.png\"\n                      alt=\"image-20220322213558754\"\n                ></p>\n<p>åŒæ—¶åœ¨Taskè¡¨ä¸­ï¼Œå¯ä»¥çœ‹åˆ°æµç¨‹å½“å‰çš„åˆ†é…äººæ˜¯<code>å¼ ä¸‰</code>ï¼Œè¯´æ˜UELè¡¨è¾¾å¼è¢«è§£æäº†</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220322213655020.png\"\n                      alt=\"image-20220322213655020\"\n                ></p>\n<h4 id=\"æ–¹æ³•è¡¨è¾¾å¼\"><a href=\"#æ–¹æ³•è¡¨è¾¾å¼\" class=\"headerlink\" title=\"æ–¹æ³•è¡¨è¾¾å¼\"></a>æ–¹æ³•è¡¨è¾¾å¼</h4><p><strong>æ–¹æ³•è¡¨è¾¾å¼ Method expression</strong>: è°ƒç”¨ä¸€ä¸ªæ–¹æ³•ï¼Œå¯ä»¥å¸¦æˆ–ä¸å¸¦å‚æ•°ã€‚<strong>å½“è°ƒç”¨ä¸å¸¦å‚æ•°çš„æ–¹æ³•æ—¶ï¼Œè¦ç¡®ä¿åœ¨æ–¹æ³•ååæ·»åŠ ç©ºæ‹¬å·ï¼ˆä»¥é¿å…ä¸å€¼è¡¨è¾¾å¼æ··æ·†ï¼‰ã€‚</strong>ä¼ é€’çš„å‚æ•°å¯ä»¥æ˜¯å­—é¢å€¼(literal value)ï¼Œä¹Ÿå¯ä»¥æ˜¯è¡¨è¾¾å¼ï¼Œå®ƒä»¬ä¼šè¢«è‡ªåŠ¨è§£æã€‚ä¾‹å¦‚ï¼š</p>\n<figure class=\"highlight txt\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$&#123;printer.print()&#125;</span><br><span class=\"line\">$&#123;myBean.addNewOrder(&#x27;orderName&#x27;)&#125;</span><br><span class=\"line\">$&#123;myBean.doSomething(myVar, execution)&#125;</span><br></pre></td></tr></table></figure>\n\n<p>myBeanæ˜¯Springå®¹å™¨ä¸­çš„ä¸ªBeanå¯¹è±¡ï¼Œè¡¨ç¤ºè°ƒç”¨çš„æ˜¯beançš„addNewOrderæ–¹æ³•</p>\n<h3 id=\"ç›‘å¬å™¨åˆ†é…\"><a href=\"#ç›‘å¬å™¨åˆ†é…\" class=\"headerlink\" title=\"ç›‘å¬å™¨åˆ†é…\"></a>ç›‘å¬å™¨åˆ†é…</h3><p>å¯ä»¥ä½¿ç”¨ç›‘å¬å™¨æ¥å®Œæˆå¾ˆå¤šFlowableçš„æµç¨‹ä¸šåŠ¡ã€‚</p>\n<p>æˆ‘ä»¬åœ¨æ­¤å¤„ä½¿ç”¨ç›‘å¬å™¨æ¥å®Œæˆè´Ÿè´£äººçš„æŒ‡å®šï¼Œé‚£ä¹ˆæˆ‘ä»¬åœ¨æµç¨‹è®¾è®¡çš„æ—¶å€™å°±ä¸éœ€è¦æŒ‡å®šassignee</p>\n<p>åˆ›å»ºè‡ªå®šä¹‰ç›‘å¬å™¨ï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * è‡ªå®šä¹‰çš„ç›‘å¬å™¨</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">MyTaskListener</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">TaskListener</span> &#123;</span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">notify</span><span class=\"params\">(DelegateTask delegateTask)</span> &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;ç›‘å¬å™¨è§¦å‘äº†ï¼š&quot;</span> + delegateTask.getName());</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(<span class=\"string\">&quot;æäº¤è¯·å‡æµç¨‹&quot;</span>.equals(delegateTask.getName()) &amp;&amp;</span><br><span class=\"line\">                <span class=\"string\">&quot;create&quot;</span>.equals(delegateTask.getEventName()))&#123;</span><br><span class=\"line\">            <span class=\"comment\">// æŒ‡å®šä»»åŠ¡çš„è´Ÿè´£äºº</span></span><br><span class=\"line\">            delegateTask.setAssignee(<span class=\"string\">&quot;å°æ˜&quot;</span>);</span><br><span class=\"line\">        &#125;<span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            delegateTask.setAssignee(<span class=\"string\">&quot;å°å¼ &quot;</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<p>ç„¶ååœ¨FlowableUIä¸­å…³è”å¯¹åº”çš„ç›‘å¬å™¨</p>\n<figure class=\"highlight txt\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">create:ä»»åŠ¡åˆ›å»ºåè§¦å‘</span><br><span class=\"line\">assignment:ä»»åŠ¡åˆ†é…åè§¦å‘</span><br><span class=\"line\">Delete:ä»»åŠ¡å®Œæˆåè§¦å‘</span><br><span class=\"line\">Allï¼šæ‰€æœ‰äº‹ä»¶éƒ½è§¦å‘</span><br></pre></td></tr></table></figure>\n\n\n\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220322214807416.png\"\n                      alt=\"image-20220322214807416\"\n                ></p>\n<p>ç„¶åæˆ‘ä»¬å…ˆéƒ¨ç½²æµç¨‹ï¼Œç„¶åæ‰§è¡ŒæŸ¥çœ‹æ•ˆæœï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220322215711211.png\"\n                      alt=\"image-20220322215711211\"\n                ></p>\n<p>ç„¶ååœ¨Taskè¡¨ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°å¯¹åº”çš„åˆ†é…äººä¸º<code>å°æ˜</code>è¯´æ˜é€šè¿‡ç›‘å¬ä¹Ÿå®Œæˆäº†ä»»åŠ¡åˆ†é…çš„å·¥ä½œäº†</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220322215805734.png\"\n                      alt=\"image-20220322215805734\"\n                ></p>\n<h2 id=\"æµç¨‹å˜é‡\"><a href=\"#æµç¨‹å˜é‡\" class=\"headerlink\" title=\"æµç¨‹å˜é‡\"></a>æµç¨‹å˜é‡</h2><p>æµç¨‹å®ä¾‹æŒ‰æ­¥éª¤æ‰§è¡Œæ—¶ï¼Œéœ€è¦ä½¿ç”¨ä¸€äº›æ•°æ®ã€‚åœ¨Flowableä¸­ï¼Œè¿™äº›æ•°æ®ç§°ä½œ*å˜é‡(variable)*ï¼Œå¹¶ä¼šå­˜å‚¨åœ¨æ•°æ®åº“ä¸­ã€‚å˜é‡å¯ä»¥ç”¨åœ¨è¡¨è¾¾å¼ä¸­ï¼ˆä¾‹å¦‚åœ¨æ’ä»–ç½‘å…³ä¸­ç”¨äºé€‰æ‹©æ­£ç¡®çš„å‡ºå£è·¯å¾„ï¼‰ï¼Œä¹Ÿå¯ä»¥åœ¨JavaæœåŠ¡ä»»åŠ¡(service task)ä¸­ç”¨äºè°ƒç”¨å¤–éƒ¨æœåŠ¡ï¼ˆä¾‹å¦‚ä¸ºæœåŠ¡è°ƒç”¨æä¾›è¾“å…¥æˆ–ç»“æœå­˜å‚¨ï¼‰ï¼Œç­‰ç­‰ã€‚</p>\n<p>æµç¨‹å®ä¾‹å¯ä»¥æŒæœ‰å˜é‡ï¼ˆç§°ä½œ<em>æµç¨‹å˜é‡ process variables</em>ï¼‰ï¼›ç”¨æˆ·ä»»åŠ¡ä»¥åŠ<em>æ‰§è¡Œ(executions)<em>â€”â€”æµç¨‹å½“å‰æ´»åŠ¨èŠ‚ç‚¹çš„æŒ‡é’ˆâ€”â€”ä¹Ÿå¯ä»¥æŒæœ‰å˜é‡ã€‚æµç¨‹å®ä¾‹å¯ä»¥æŒæœ‰ä»»æ„æ•°é‡çš„å˜é‡ï¼Œæ¯ä¸ªå˜é‡å­˜å‚¨ä¸º</em>ACT_RU_VARIABLE</em>æ•°æ®åº“è¡¨çš„ä¸€è¡Œã€‚</p>\n<p>æ‰€æœ‰çš„<em>startProcessInstanceXXX</em>æ–¹æ³•éƒ½æœ‰ä¸€ä¸ªå¯é€‰å‚æ•°ï¼Œç”¨äºåœ¨æµç¨‹å®ä¾‹åˆ›å»ºåŠå¯åŠ¨æ—¶è®¾ç½®å˜é‡ã€‚ä¾‹å¦‚ï¼Œåœ¨<em>RuntimeService</em>ä¸­ï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ProcessInstance <span class=\"title function_\">startProcessInstanceByKey</span><span class=\"params\">(String processDefinitionKey, Map&lt;String, Object&gt; variables)</span>;</span><br></pre></td></tr></table></figure>\n\n<p>ä¹Ÿå¯ä»¥åœ¨æµç¨‹æ‰§è¡Œä¸­åŠ å…¥å˜é‡ã€‚ä¾‹å¦‚ï¼Œ(<em>RuntimeService</em>):</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"title function_\">setVariable</span><span class=\"params\">(String executionId, String variableName, Object value)</span>;</span><br><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"title function_\">setVariableLocal</span><span class=\"params\">(String executionId, String variableName, Object value)</span>;</span><br><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"title function_\">setVariables</span><span class=\"params\">(String executionId, Map&lt;String, ? extends Object&gt; variables)</span>;</span><br><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"title function_\">setVariablesLocal</span><span class=\"params\">(String executionId, Map&lt;String, ? extends Object&gt; variables)</span>;</span><br></pre></td></tr></table></figure>\n\n\n\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220324095243595.png\"\n                      alt=\"image-20220324095243595\"\n                ></p>\n<h3 id=\"å…¨å±€å˜é‡\"><a href=\"#å…¨å±€å˜é‡\" class=\"headerlink\" title=\"å…¨å±€å˜é‡\"></a>å…¨å±€å˜é‡</h3><p>æµç¨‹å˜é‡çš„é»˜è®¤ä½œç”¨åŸŸæ˜¯æµç¨‹å®ä¾‹ã€‚å½“ä¸€ä¸ªæµç¨‹å˜é‡çš„ä½œç”¨åŸŸä¸ºæµç¨‹å®ä¾‹æ—¶ï¼Œå¯ä»¥ç§°ä¸º global å˜é‡</p>\n<p>æ³¨æ„ï¼šå¦‚ï¼š    Globalå˜é‡ï¼šuserIdï¼ˆå˜é‡åï¼‰ã€zhangsanï¼ˆå˜é‡å€¼ï¼‰</p>\n<p>global å˜é‡ä¸­å˜é‡åä¸å…è®¸é‡å¤ï¼Œè®¾ç½®ç›¸åŒåç§°çš„å˜é‡ï¼Œåè®¾ç½®çš„å€¼ä¼šè¦†ç›–å‰è®¾ç½®çš„å˜é‡å€¼ã€‚</p>\n<h3 id=\"å±€éƒ¨å˜é‡\"><a href=\"#å±€éƒ¨å˜é‡\" class=\"headerlink\" title=\"å±€éƒ¨å˜é‡\"></a>å±€éƒ¨å˜é‡</h3><p>ä»»åŠ¡å’Œæ‰§è¡Œå®ä¾‹ä»…ä»…æ˜¯é’ˆå¯¹ä¸€ä¸ªä»»åŠ¡å’Œä¸€ä¸ªæ‰§è¡Œå®ä¾‹èŒƒå›´ï¼ŒèŒƒå›´æ²¡æœ‰æµç¨‹å®ä¾‹å¤§ï¼Œ ç§°ä¸º local å˜é‡ã€‚</p>\n<p>Local å˜é‡ç”±äºåœ¨ä¸åŒçš„ä»»åŠ¡æˆ–ä¸åŒçš„æ‰§è¡Œå®ä¾‹ä¸­ï¼Œä½œç”¨åŸŸäº’ä¸å½±å“ï¼Œå˜é‡åå¯ä»¥ç›¸åŒæ²¡æœ‰å½±å“ã€‚Local å˜é‡åä¹Ÿå¯ä»¥å’Œ global å˜é‡åç›¸åŒï¼Œæ²¡æœ‰å½±å“ã€‚ </p>\n<h3 id=\"æ¡ˆä¾‹è®²è§£\"><a href=\"#æ¡ˆä¾‹è®²è§£\" class=\"headerlink\" title=\"æ¡ˆä¾‹è®²è§£\"></a>æ¡ˆä¾‹è®²è§£</h3><p> éœ€æ±‚ï¼šå‘˜å·¥åˆ›å»ºå‡ºå·®ç”³è¯·å•ï¼Œç”±éƒ¨é—¨ç»ç†å®¡æ ¸ï¼Œéƒ¨é—¨ç»ç†ç”³è¯·é€šè¿‡å3å¤©ä»¥ä¸‹ç”±è´¢åŠ¡ç›´æ¥ç”³æ‰¹ï¼Œ3å¤©ä»¥ä¸Šå…ˆç”±æ€»ç»ç†å®¡æ‰¹ï¼Œæ€»ç»ç†å®¡æ‰¹é€šè¿‡åå†ç”±è´¢åŠ¡å®¡æ‰¹ã€‚</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220324093855618.png\"\n                      alt=\"image-20220324093855618\"\n                ></p>\n<p>è¿æ¥å…ˆè®¾ç½®æ¡ä»¶</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220324093806442.png\"\n                      alt=\"image-20220324093806442\"\n                ></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220324093700631.png\"\n                      alt=\"image-20220324093700631\"\n                ></p>\n<p>éƒ¨ç½²æµç¨‹</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">deploy</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"type\">ProcessEngine</span> <span class=\"variable\">processEngine</span> <span class=\"operator\">=</span> ProcessEngines.getDefaultProcessEngine();</span><br><span class=\"line\">    <span class=\"type\">RepositoryService</span> <span class=\"variable\">repositoryService</span> <span class=\"operator\">=</span> processEngine.getRepositoryService();</span><br><span class=\"line\">    <span class=\"type\">Deployment</span> <span class=\"variable\">deploy</span> <span class=\"operator\">=</span> repositoryService.createDeployment()</span><br><span class=\"line\">        .addClasspathResource(<span class=\"string\">&quot;å‡ºå·®ç”³è¯·å•.bpmn20.xml&quot;</span>)</span><br><span class=\"line\">        .name(<span class=\"string\">&quot;è¯·å‡æµç¨‹...&quot;</span>)</span><br><span class=\"line\">        .category(<span class=\"string\">&quot;è¯·å‡&quot;</span>) <span class=\"comment\">// åˆ†ç±»</span></span><br><span class=\"line\">        .tenantId(<span class=\"string\">&quot;dpb&quot;</span>) <span class=\"comment\">// ç§Ÿæˆ·id</span></span><br><span class=\"line\">        .deploy();</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;deploy.getId() = &quot;</span> + deploy.getId());</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;deploy.getName() = &quot;</span> + deploy.getName());</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;deploy.getCategory() = &quot;</span> + deploy.getCategory());</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<p>å¯åŠ¨æµç¨‹å®ä¾‹ï¼šå¹¶ä¸”æŒ‡å®šå…¨å±€æµç¨‹å˜é‡</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * åœ¨å¯åŠ¨æµç¨‹å®ä¾‹çš„æ—¶å€™è®¾ç½®æµç¨‹å˜é‡</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">runProcess</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// è·å–æµç¨‹å¼•æ“å¯¹è±¡</span></span><br><span class=\"line\">        <span class=\"type\">ProcessEngine</span> <span class=\"variable\">processEngine</span> <span class=\"operator\">=</span> ProcessEngines.getDefaultProcessEngine();</span><br><span class=\"line\">        <span class=\"comment\">// å¯åŠ¨æµç¨‹å®ä¾‹é€šè¿‡ RuntimeService å¯¹è±¡</span></span><br><span class=\"line\">        <span class=\"type\">RuntimeService</span> <span class=\"variable\">runtimeService</span> <span class=\"operator\">=</span> processEngine.getRuntimeService();</span><br><span class=\"line\">        <span class=\"comment\">// è®¾ç½®æµç¨‹å˜é‡</span></span><br><span class=\"line\">        Map&lt;String,Object&gt; variables = <span class=\"keyword\">new</span> <span class=\"title class_\">HashMap</span>&lt;&gt;();</span><br><span class=\"line\">        <span class=\"comment\">// è®¾ç½®assigneeçš„å–å€¼</span></span><br><span class=\"line\">        variables.put(<span class=\"string\">&quot;assignee0&quot;</span>,<span class=\"string\">&quot;å¼ ä¸‰&quot;</span>);</span><br><span class=\"line\">        variables.put(<span class=\"string\">&quot;assignee1&quot;</span>,<span class=\"string\">&quot;æå››&quot;</span>);</span><br><span class=\"line\">        variables.put(<span class=\"string\">&quot;assignee2&quot;</span>,<span class=\"string\">&quot;ç‹äº”&quot;</span>);</span><br><span class=\"line\">        variables.put(<span class=\"string\">&quot;assignee3&quot;</span>,<span class=\"string\">&quot;èµµè´¢åŠ¡&quot;</span>);</span><br><span class=\"line\">        <span class=\"comment\">// å¯åŠ¨æµç¨‹å®ä¾‹ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æµç¨‹å®šä¹‰çš„id</span></span><br><span class=\"line\">        <span class=\"type\">ProcessInstance</span> <span class=\"variable\">processInstance</span> <span class=\"operator\">=</span> runtimeService</span><br><span class=\"line\">                .startProcessInstanceById(<span class=\"string\">&quot;evection:1:4&quot;</span>,variables);<span class=\"comment\">// å¯åŠ¨æµç¨‹å®ä¾‹</span></span><br><span class=\"line\">        <span class=\"comment\">// è¾“å‡ºç›¸å…³çš„æµç¨‹å®ä¾‹ä¿¡æ¯</span></span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;æµç¨‹å®šä¹‰çš„IDï¼š&quot;</span> + processInstance.getProcessDefinitionId());</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;æµç¨‹å®ä¾‹çš„IDï¼š&quot;</span> + processInstance.getId());</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;å½“å‰æ´»åŠ¨çš„IDï¼š&quot;</span> + processInstance.getActivityId());</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n\n<p>å®ŒæˆTaskä»»åŠ¡ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥æŒ‡å®šæµç¨‹å˜é‡</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * å®Œæˆä»»åŠ¡æ—¶æŒ‡å®šæµç¨‹å˜é‡</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">completeTask</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// è·å–æµç¨‹å¼•æ“å¯¹è±¡</span></span><br><span class=\"line\">        <span class=\"type\">ProcessEngine</span> <span class=\"variable\">processEngine</span> <span class=\"operator\">=</span> ProcessEngines.getDefaultProcessEngine();</span><br><span class=\"line\">        <span class=\"type\">TaskService</span> <span class=\"variable\">taskService</span> <span class=\"operator\">=</span> processEngine.getTaskService();</span><br><span class=\"line\">        <span class=\"type\">Task</span> <span class=\"variable\">task</span> <span class=\"operator\">=</span> taskService.createTaskQuery()</span><br><span class=\"line\">                .processDefinitionId(<span class=\"string\">&quot;evection:1:4&quot;</span>)</span><br><span class=\"line\">                .taskAssignee(<span class=\"string\">&quot;æå››&quot;</span>)</span><br><span class=\"line\">                .singleResult();</span><br><span class=\"line\">        <span class=\"comment\">// æ·»åŠ æµç¨‹å˜é‡</span></span><br><span class=\"line\">        Map&lt;String, Object&gt; map = task.getProcessVariables();</span><br><span class=\"line\">        map.put(<span class=\"string\">&quot;num&quot;</span>,<span class=\"number\">4</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// å®Œæˆä»»åŠ¡</span></span><br><span class=\"line\">        taskService.complete(task.getId(),map);</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n\n<p>å½“ç„¶æˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨å¤„ç†æµç¨‹ä¹‹å¤–é€šè¿‡Taskç¼–å·æ¥ä¿®æ”¹æµç¨‹å˜é‡</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * é€šè¿‡å½“å‰ä»»åŠ¡è®¾ç½®</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">currentTask</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">//   å½“å‰å¾…åŠä»»åŠ¡id</span></span><br><span class=\"line\">        <span class=\"comment\">//  è·å–processEngine</span></span><br><span class=\"line\">        <span class=\"type\">ProcessEngine</span> <span class=\"variable\">processEngine</span> <span class=\"operator\">=</span> ProcessEngines.getDefaultProcessEngine();</span><br><span class=\"line\">        <span class=\"type\">TaskService</span> <span class=\"variable\">taskService</span> <span class=\"operator\">=</span> processEngine.getTaskService();</span><br><span class=\"line\">        <span class=\"type\">Task</span> <span class=\"variable\">task</span> <span class=\"operator\">=</span> taskService.createTaskQuery()</span><br><span class=\"line\">                .processDefinitionId(<span class=\"string\">&quot;evection:1:4&quot;</span>)</span><br><span class=\"line\">                .taskAssignee(<span class=\"string\">&quot;ç‹äº”&quot;</span>)</span><br><span class=\"line\">                .singleResult();</span><br><span class=\"line\">        <span class=\"comment\">// æ·»åŠ æµç¨‹å˜é‡</span></span><br><span class=\"line\">        Map&lt;String, Object&gt; map = task.getProcessVariables();</span><br><span class=\"line\">        map.put(<span class=\"string\">&quot;num&quot;</span>,<span class=\"number\">1</span>);</span><br><span class=\"line\">        <span class=\"comment\">//  ä¸€æ¬¡è®¾ç½®å¤šä¸ªå€¼ è®¾ç½®å±€éƒ¨å˜é‡</span></span><br><span class=\"line\">        taskService.setVariables(task.getId(), map);</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n\n\n\n\n\n<h1 id=\"å€™é€‰äººå’Œå€™é€‰äººç»„\"><a href=\"#å€™é€‰äººå’Œå€™é€‰äººç»„\" class=\"headerlink\" title=\"å€™é€‰äººå’Œå€™é€‰äººç»„\"></a>å€™é€‰äººå’Œå€™é€‰äººç»„</h1><p>åœ¨æµç¨‹å®šä¹‰ä¸­åœ¨ä»»åŠ¡ç»“ç‚¹çš„ assignee å›ºå®šè®¾ç½®ä»»åŠ¡è´Ÿè´£äººï¼Œåœ¨æµç¨‹å®šä¹‰æ—¶å°†å‚ä¸è€…å›ºå®šè®¾ç½®åœ¨.bpmn æ–‡ä»¶ä¸­ï¼Œå¦‚æœä¸´æ—¶ä»»åŠ¡è´Ÿè´£äººå˜æ›´åˆ™éœ€è¦ä¿®æ”¹æµç¨‹å®šä¹‰ï¼Œç³»ç»Ÿå¯æ‰©å±•æ€§å·®ã€‚é’ˆå¯¹è¿™ç§æƒ…å†µå¯ä»¥ç»™ä»»åŠ¡è®¾ç½®å¤šä¸ªå€™é€‰äººæˆ–è€…å€™é€‰äººç»„ï¼Œå¯ä»¥ä»å€™é€‰äººä¸­é€‰æ‹©å‚ä¸è€…æ¥å®Œæˆä»»åŠ¡ã€‚</p>\n<h2 id=\"å€™é€‰äºº\"><a href=\"#å€™é€‰äºº\" class=\"headerlink\" title=\"å€™é€‰äºº\"></a>å€™é€‰äºº</h2><h3 id=\"å®šä¹‰æµç¨‹å›¾\"><a href=\"#å®šä¹‰æµç¨‹å›¾\" class=\"headerlink\" title=\"å®šä¹‰æµç¨‹å›¾\"></a>å®šä¹‰æµç¨‹å›¾</h3><p>å®šä¹‰æµç¨‹å›¾ï¼ŒåŒæ—¶æŒ‡å®šå€™é€‰äººï¼Œå¤šä¸ªå€™é€‰äººä¼šé€šè¿‡<code>,</code>è¿æ¥</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220325095959489.png\"\n                      alt=\"image-20220325095959489\"\n                ></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220325100835461.png\"\n                      alt=\"image-20220325100835461\"\n                ></p>\n<h3 id=\"éƒ¨ç½²å’Œå¯åŠ¨æµç¨‹å®ä¾‹\"><a href=\"#éƒ¨ç½²å’Œå¯åŠ¨æµç¨‹å®ä¾‹\" class=\"headerlink\" title=\"éƒ¨ç½²å’Œå¯åŠ¨æµç¨‹å®ä¾‹\"></a>éƒ¨ç½²å’Œå¯åŠ¨æµç¨‹å®ä¾‹</h3><p>éƒ¨ç½²æµç¨‹ï¼Œå¹¶ä¸”åœ¨å¯åŠ¨æµç¨‹å®ä¾‹çš„æ—¶å€™å¯¹UELè¡¨è¾¾å¼èµ‹å€¼</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * éƒ¨ç½²æµç¨‹</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">deploy</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"type\">ProcessEngine</span> <span class=\"variable\">processEngine</span> <span class=\"operator\">=</span> ProcessEngines.getDefaultProcessEngine();</span><br><span class=\"line\">    <span class=\"type\">RepositoryService</span> <span class=\"variable\">repositoryService</span> <span class=\"operator\">=</span> processEngine.getRepositoryService();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"type\">Deployment</span> <span class=\"variable\">deploy</span> <span class=\"operator\">=</span> repositoryService.createDeployment()</span><br><span class=\"line\">            .addClasspathResource(<span class=\"string\">&quot;è¯·å‡æµç¨‹-å€™é€‰äºº.bpmn20.xml&quot;</span>)</span><br><span class=\"line\">            .name(<span class=\"string\">&quot;è¯·æ±‚æµç¨‹-å€™é€‰äºº&quot;</span>)</span><br><span class=\"line\">            .deploy();</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;deploy.getId() = &quot;</span> + deploy.getId());</span><br><span class=\"line\">    System.out.println(deploy.getName());</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * å¯åŠ¨æµç¨‹å®ä¾‹</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">runProcess</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"type\">ProcessEngine</span> <span class=\"variable\">processEngine</span> <span class=\"operator\">=</span> ProcessEngines.getDefaultProcessEngine();</span><br><span class=\"line\">    <span class=\"type\">RuntimeService</span> <span class=\"variable\">runtimeService</span> <span class=\"operator\">=</span> processEngine.getRuntimeService();</span><br><span class=\"line\">    <span class=\"comment\">// ç»™æµç¨‹å®šä¹‰ä¸­çš„UELè¡¨è¾¾å¼èµ‹å€¼</span></span><br><span class=\"line\">    Map&lt;String,Object&gt; variables = <span class=\"keyword\">new</span> <span class=\"title class_\">HashMap</span>&lt;&gt;();</span><br><span class=\"line\">    variables.put(<span class=\"string\">&quot;candidate1&quot;</span>,<span class=\"string\">&quot;å¼ ä¸‰&quot;</span>);</span><br><span class=\"line\">    variables.put(<span class=\"string\">&quot;candidate2&quot;</span>,<span class=\"string\">&quot;æå››&quot;</span>);</span><br><span class=\"line\">    variables.put(<span class=\"string\">&quot;candidate3&quot;</span>,<span class=\"string\">&quot;ç‹äº”&quot;</span>);</span><br><span class=\"line\">    runtimeService.startProcessInstanceById(<span class=\"string\">&quot;holiday-candidate:1:4&quot;</span>,variables);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>åœ¨å¯¹åº”çš„è¡¨ç»“æ„ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°æµç¨‹å˜é‡å·²ç»æœ‰äº†ï¼Œä½†æ˜¯å¯¹äºçš„Taskçš„Assigneeè¿˜æ˜¯ä¸ºç©ºã€‚</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220325101054787.png\"\n                      alt=\"image-20220325101054787\"\n                ></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220325102600573.png\"\n                      alt=\"image-20220325102600573\"\n                ></p>\n<h3 id=\"ä»»åŠ¡çš„æŸ¥è¯¢\"><a href=\"#ä»»åŠ¡çš„æŸ¥è¯¢\" class=\"headerlink\" title=\"ä»»åŠ¡çš„æŸ¥è¯¢\"></a>ä»»åŠ¡çš„æŸ¥è¯¢</h3><p>æ ¹æ®å½“å‰ç™»å½•çš„ç”¨æˆ·ï¼ŒæŸ¥è¯¢å¯¹åº”çš„å€™é€‰ä»»åŠ¡</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  * æ ¹æ®ç™»å½•çš„ç”¨æˆ·æŸ¥è¯¢å¯¹åº”çš„å¯ä»¥æ‹¾å–çš„ä»»åŠ¡</span></span><br><span class=\"line\"><span class=\"comment\">  *</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\"> <span class=\"meta\">@Test</span></span><br><span class=\"line\"> <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">queryTaskCandidate</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">     <span class=\"type\">ProcessEngine</span> <span class=\"variable\">processEngine</span> <span class=\"operator\">=</span> ProcessEngines.getDefaultProcessEngine();</span><br><span class=\"line\">     <span class=\"type\">TaskService</span> <span class=\"variable\">taskService</span> <span class=\"operator\">=</span> processEngine.getTaskService();</span><br><span class=\"line\">     List&lt;Task&gt; list = taskService.createTaskQuery()</span><br><span class=\"line\">             <span class=\"comment\">//.processInstanceId(&quot;2501&quot;)</span></span><br><span class=\"line\">             .processDefinitionId(<span class=\"string\">&quot;holiday-candidate:1:4&quot;</span>)</span><br><span class=\"line\">             .taskCandidateUser(<span class=\"string\">&quot;æå››&quot;</span>) # æ³¨æ„</span><br><span class=\"line\">             .list();</span><br><span class=\"line\">     <span class=\"keyword\">for</span> (Task task : list) &#123;</span><br><span class=\"line\">         System.out.println(<span class=\"string\">&quot;task.getId() = &quot;</span> + task.getId());</span><br><span class=\"line\">         System.out.println(<span class=\"string\">&quot;task.getName() = &quot;</span> + task.getName());</span><br><span class=\"line\">     &#125;</span><br><span class=\"line\"> &#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"ä»»åŠ¡çš„æ‹¾å–\"><a href=\"#ä»»åŠ¡çš„æ‹¾å–\" class=\"headerlink\" title=\"ä»»åŠ¡çš„æ‹¾å–\"></a>ä»»åŠ¡çš„æ‹¾å–</h3><p>çŸ¥é“äº†æˆ‘æœ‰å¯æ‹¾å–çš„ä»»åŠ¡åï¼Œæ‹¾å–ä»»åŠ¡ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * æ‹¾å–ä»»åŠ¡</span></span><br><span class=\"line\"><span class=\"comment\">     *    ä¸€ä¸ªå€™é€‰äººæ‹¾å–äº†è¿™ä¸ªä»»åŠ¡ä¹‹åå…¶ä»–çš„ç”¨æˆ·å°±æ²¡æœ‰åŠæ³•æ‹¾å–è¿™ä¸ªä»»åŠ¡äº†</span></span><br><span class=\"line\"><span class=\"comment\">     *    æ‰€ä»¥å¦‚æœä¸€ä¸ªç”¨æˆ·æ‹¾å–äº†ä»»åŠ¡ä¹‹ååˆä¸æƒ³å¤„ç†äº†ï¼Œé‚£ä¹ˆå¯ä»¥é€€è¿˜</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">claimTaskCandidate</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">        <span class=\"type\">ProcessEngine</span> <span class=\"variable\">processEngine</span> <span class=\"operator\">=</span> ProcessEngines.getDefaultProcessEngine();</span><br><span class=\"line\">        <span class=\"type\">TaskService</span> <span class=\"variable\">taskService</span> <span class=\"operator\">=</span> processEngine.getTaskService();</span><br><span class=\"line\">        <span class=\"type\">Task</span> <span class=\"variable\">task</span> <span class=\"operator\">=</span> taskService.createTaskQuery()</span><br><span class=\"line\">                <span class=\"comment\">//.processInstanceId(&quot;2501&quot;)</span></span><br><span class=\"line\">                .processDefinitionId(<span class=\"string\">&quot;holiday-candidate:1:4&quot;</span>)</span><br><span class=\"line\">                .taskCandidateUser(<span class=\"string\">&quot;æå››&quot;</span>)</span><br><span class=\"line\">                .singleResult();</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(task != <span class=\"literal\">null</span>)&#123;</span><br><span class=\"line\">            <span class=\"comment\">// æ‹¾å–å¯¹åº”çš„ä»»åŠ¡</span></span><br><span class=\"line\">            taskService.claim(task.getId(),<span class=\"string\">&quot;æå››&quot;</span>);</span><br><span class=\"line\">            System.out.println(<span class=\"string\">&quot;ä»»åŠ¡æ‹¾å–æˆåŠŸ&quot;</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220325103624344.png\"\n                      alt=\"image-20220325103624344\"\n                ></p>\n<h3 id=\"ä»»åŠ¡çš„å½’è¿˜\"><a href=\"#ä»»åŠ¡çš„å½’è¿˜\" class=\"headerlink\" title=\"ä»»åŠ¡çš„å½’è¿˜\"></a>ä»»åŠ¡çš„å½’è¿˜</h3><p>æ‹¾å–ä»»åŠ¡åä¸æƒ³æ“ä½œé‚£ä¹ˆå°±å½’è¿˜ä»»åŠ¡</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * é€€è¿˜ä»»åŠ¡</span></span><br><span class=\"line\"><span class=\"comment\"> *    ä¸€ä¸ªå€™é€‰äººæ‹¾å–äº†è¿™ä¸ªä»»åŠ¡ä¹‹åå…¶ä»–çš„ç”¨æˆ·å°±æ²¡æœ‰åŠæ³•æ‹¾å–è¿™ä¸ªä»»åŠ¡äº†</span></span><br><span class=\"line\"><span class=\"comment\"> *    æ‰€ä»¥å¦‚æœä¸€ä¸ªç”¨æˆ·æ‹¾å–äº†ä»»åŠ¡ä¹‹ååˆä¸æƒ³å¤„ç†äº†ï¼Œé‚£ä¹ˆå¯ä»¥é€€è¿˜</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">unclaimTaskCandidate</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"type\">ProcessEngine</span> <span class=\"variable\">processEngine</span> <span class=\"operator\">=</span> ProcessEngines.getDefaultProcessEngine();</span><br><span class=\"line\">    <span class=\"type\">TaskService</span> <span class=\"variable\">taskService</span> <span class=\"operator\">=</span> processEngine.getTaskService();</span><br><span class=\"line\">    <span class=\"type\">Task</span> <span class=\"variable\">task</span> <span class=\"operator\">=</span> taskService.createTaskQuery()</span><br><span class=\"line\">            <span class=\"comment\">//.processInstanceId(&quot;2501&quot;)</span></span><br><span class=\"line\">            .processDefinitionId(<span class=\"string\">&quot;holiday-candidate:1:4&quot;</span>)</span><br><span class=\"line\">            .taskAssignee(<span class=\"string\">&quot;å¼ ä¸‰&quot;</span>)</span><br><span class=\"line\">            .singleResult();</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(task != <span class=\"literal\">null</span>)&#123;</span><br><span class=\"line\">        <span class=\"comment\">// æ‹¾å–å¯¹åº”çš„ä»»åŠ¡</span></span><br><span class=\"line\">        taskService.unclaim(task.getId());</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;å½’è¿˜æ‹¾å–æˆåŠŸ&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n\n\n<h3 id=\"ä»»åŠ¡çš„äº¤æ¥\"><a href=\"#ä»»åŠ¡çš„äº¤æ¥\" class=\"headerlink\" title=\"ä»»åŠ¡çš„äº¤æ¥\"></a>ä»»åŠ¡çš„äº¤æ¥</h3><p>æ‹¾å–ä»»åŠ¡åå¦‚æœä¸æƒ³æ“ä½œä¹Ÿä¸æƒ³å½’è¿˜å¯ä»¥ç›´æ¥äº¤æ¥ç»™å¦å¤–ä¸€ä¸ªäººæ¥å¤„ç†</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  * ä»»åŠ¡çš„äº¤æ¥</span></span><br><span class=\"line\"><span class=\"comment\">  *    å¦‚æœæˆ‘è·å–äº†ä»»åŠ¡ï¼Œä½†æ˜¯ä¸æƒ³æ‰§è¡Œï¼Œé‚£ä¹ˆæˆ‘å¯ä»¥æŠŠè¿™ä¸ªä»»åŠ¡äº¤æ¥ç»™å…¶ä»–çš„ç”¨æˆ·</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\"> <span class=\"meta\">@Test</span></span><br><span class=\"line\"> <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">taskCandidate</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">     <span class=\"type\">ProcessEngine</span> <span class=\"variable\">processEngine</span> <span class=\"operator\">=</span> ProcessEngines.getDefaultProcessEngine();</span><br><span class=\"line\">     <span class=\"type\">TaskService</span> <span class=\"variable\">taskService</span> <span class=\"operator\">=</span> processEngine.getTaskService();</span><br><span class=\"line\">     <span class=\"type\">Task</span> <span class=\"variable\">task</span> <span class=\"operator\">=</span> taskService.createTaskQuery()</span><br><span class=\"line\">             <span class=\"comment\">//.processInstanceId(&quot;2501&quot;)</span></span><br><span class=\"line\">             .processDefinitionId(<span class=\"string\">&quot;holiday-candidate:1:4&quot;</span>)</span><br><span class=\"line\">             .taskAssignee(<span class=\"string\">&quot;æå››&quot;</span>)</span><br><span class=\"line\">             .singleResult();</span><br><span class=\"line\">     <span class=\"keyword\">if</span>(task != <span class=\"literal\">null</span>)&#123;</span><br><span class=\"line\">         <span class=\"comment\">// ä»»åŠ¡çš„äº¤æ¥</span></span><br><span class=\"line\">         taskService.setAssignee(task.getId(),<span class=\"string\">&quot;ç‹äº”&quot;</span>);</span><br><span class=\"line\">         System.out.println(<span class=\"string\">&quot;ä»»åŠ¡äº¤æ¥ç»™äº†ç‹äº”&quot;</span>);</span><br><span class=\"line\">     &#125;</span><br><span class=\"line\"> &#125;</span><br></pre></td></tr></table></figure>\n\n\n\n\n\n<h3 id=\"ä»»åŠ¡çš„å®Œæˆ\"><a href=\"#ä»»åŠ¡çš„å®Œæˆ\" class=\"headerlink\" title=\"ä»»åŠ¡çš„å®Œæˆ\"></a>ä»»åŠ¡çš„å®Œæˆ</h3><p>æ­£å¸¸çš„ä»»åŠ¡å¤„ç†</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  * å®Œæˆä»»åŠ¡</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\"> <span class=\"meta\">@Test</span></span><br><span class=\"line\"> <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">completeTask</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">     <span class=\"type\">ProcessEngine</span> <span class=\"variable\">processEngine</span> <span class=\"operator\">=</span> ProcessEngines.getDefaultProcessEngine();</span><br><span class=\"line\">     <span class=\"type\">TaskService</span> <span class=\"variable\">taskService</span> <span class=\"operator\">=</span> processEngine.getTaskService();</span><br><span class=\"line\">     <span class=\"type\">Task</span> <span class=\"variable\">task</span> <span class=\"operator\">=</span> taskService.createTaskQuery()</span><br><span class=\"line\">             <span class=\"comment\">//.processInstanceId(&quot;2501&quot;)</span></span><br><span class=\"line\">             .processDefinitionId(<span class=\"string\">&quot;holiday-candidate:1:4&quot;</span>)</span><br><span class=\"line\">             .taskAssignee(<span class=\"string\">&quot;ç‹äº”&quot;</span>)</span><br><span class=\"line\">             .singleResult();</span><br><span class=\"line\">     <span class=\"keyword\">if</span>(task != <span class=\"literal\">null</span>)&#123;</span><br><span class=\"line\">         <span class=\"comment\">// å®Œæˆä»»åŠ¡</span></span><br><span class=\"line\">         taskService.complete(task.getId());</span><br><span class=\"line\">         System.out.println(<span class=\"string\">&quot;å®ŒæˆTask&quot;</span>);</span><br><span class=\"line\">     &#125;</span><br><span class=\"line\"> &#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n\n\n\n\n\n\n<h2 id=\"å€™é€‰äººç»„\"><a href=\"#å€™é€‰äººç»„\" class=\"headerlink\" title=\"å€™é€‰äººç»„\"></a>å€™é€‰äººç»„</h2><p>å½“å€™é€‰äººå¾ˆå¤šçš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥åˆ†ç»„æ¥å¤„ç†ã€‚å…ˆåˆ›å»ºç»„ï¼Œç„¶åæŠŠç”¨æˆ·åˆ†é…åˆ°è¿™ä¸ªç»„ä¸­ã€‚</p>\n<h3 id=\"ç®¡ç†ç”¨æˆ·å’Œç»„\"><a href=\"#ç®¡ç†ç”¨æˆ·å’Œç»„\" class=\"headerlink\" title=\"ç®¡ç†ç”¨æˆ·å’Œç»„\"></a>ç®¡ç†ç”¨æˆ·å’Œç»„</h3><h4 id=\"ç”¨æˆ·ç®¡ç†\"><a href=\"#ç”¨æˆ·ç®¡ç†\" class=\"headerlink\" title=\"ç”¨æˆ·ç®¡ç†\"></a>ç”¨æˆ·ç®¡ç†</h4><p>æˆ‘ä»¬éœ€è¦å…ˆå•ç‹¬ç»´æŠ¤ç”¨æˆ·ä¿¡æ¯ã€‚åå°å¯¹åº”çš„è¡¨ç»“æ„æ˜¯<code>ACT_ID_USER</code>.</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  * ç»´æŠ¤ç”¨æˆ·</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\"> <span class=\"meta\">@Test</span></span><br><span class=\"line\"> <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">createUser</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">     <span class=\"type\">ProcessEngine</span> <span class=\"variable\">processEngine</span> <span class=\"operator\">=</span> ProcessEngines.getDefaultProcessEngine();</span><br><span class=\"line\">     <span class=\"comment\">// é€šè¿‡ IdentityService å®Œæˆç›¸å…³çš„ç”¨æˆ·å’Œç»„çš„ç®¡ç†</span></span><br><span class=\"line\">     <span class=\"type\">IdentityService</span> <span class=\"variable\">identityService</span> <span class=\"operator\">=</span> processEngine.getIdentityService();</span><br><span class=\"line\">     <span class=\"type\">User</span> <span class=\"variable\">user</span> <span class=\"operator\">=</span> identityService.newUser(<span class=\"string\">&quot;ç”°ä½³&quot;</span>);</span><br><span class=\"line\">     user.setFirstName(<span class=\"string\">&quot;ç”°&quot;</span>);</span><br><span class=\"line\">     user.setLastName(<span class=\"string\">&quot;jia&quot;</span>);</span><br><span class=\"line\">     user.setEmail(<span class=\"string\">&quot;tianjia@qq.com&quot;</span>);</span><br><span class=\"line\">     identityService.saveUser(user);</span><br><span class=\"line\"> &#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220325110324815.png\"\n                      alt=\"image-20220325110324815\"\n                ></p>\n<h4 id=\"Groupç®¡ç†\"><a href=\"#Groupç®¡ç†\" class=\"headerlink\" title=\"Groupç®¡ç†\"></a>Groupç®¡ç†</h4><p>ç»´æŠ¤å¯¹åº”çš„Groupä¿¡æ¯ï¼Œåå°å¯¹åº”çš„è¡¨ç»“æ„æ˜¯<code>ACT_ID_GROUP</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * åˆ›å»ºç”¨æˆ·ç»„</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">createGroup</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"type\">ProcessEngine</span> <span class=\"variable\">processEngine</span> <span class=\"operator\">=</span> ProcessEngines.getDefaultProcessEngine();</span><br><span class=\"line\">    <span class=\"type\">IdentityService</span> <span class=\"variable\">identityService</span> <span class=\"operator\">=</span> processEngine.getIdentityService();</span><br><span class=\"line\">    <span class=\"comment\">// åˆ›å»ºGroupå¯¹è±¡å¹¶æŒ‡å®šç›¸å…³çš„ä¿¡æ¯</span></span><br><span class=\"line\">    <span class=\"type\">Group</span> <span class=\"variable\">group</span> <span class=\"operator\">=</span> identityService.newGroup(<span class=\"string\">&quot;group2&quot;</span>);</span><br><span class=\"line\">    group.setName(<span class=\"string\">&quot;å¼€å‘éƒ¨&quot;</span>);</span><br><span class=\"line\">    group.setType(<span class=\"string\">&quot;type1&quot;</span>);</span><br><span class=\"line\">    <span class=\"comment\">// åˆ›å»ºGroupå¯¹åº”çš„è¡¨ç»“æ„æ•°æ®</span></span><br><span class=\"line\">    identityService.saveGroup(group);</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220325110408435.png\"\n                      alt=\"image-20220325110408435\"\n                ></p>\n<h4 id=\"ç”¨æˆ·åˆ†é…ç»„\"><a href=\"#ç”¨æˆ·åˆ†é…ç»„\" class=\"headerlink\" title=\"ç”¨æˆ·åˆ†é…ç»„\"></a>ç”¨æˆ·åˆ†é…ç»„</h4><p>ç”¨æˆ·å’Œç»„æ˜¯ä¸€ä¸ªå¤šå¯¹å¤šçš„å…³è”å…³è”ï¼Œæˆ‘ä»¬éœ€è¦åšç›¸å…³çš„åˆ†é…ï¼Œåå°å¯¹åº”çš„è¡¨ç»“æ„æ˜¯<code>ACT_ID_MEMBERSHIP</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * å°†ç”¨æˆ·åˆ†é…ç»™å¯¹åº”çš„Group</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">userGroup</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"type\">ProcessEngine</span> <span class=\"variable\">processEngine</span> <span class=\"operator\">=</span> ProcessEngines.getDefaultProcessEngine();</span><br><span class=\"line\">    <span class=\"type\">IdentityService</span> <span class=\"variable\">identityService</span> <span class=\"operator\">=</span> processEngine.getIdentityService();</span><br><span class=\"line\">    <span class=\"comment\">// æ ¹æ®ç»„çš„ç¼–å·æ‰¾åˆ°å¯¹åº”çš„Groupå¯¹è±¡</span></span><br><span class=\"line\">    <span class=\"type\">Group</span> <span class=\"variable\">group</span> <span class=\"operator\">=</span> identityService.createGroupQuery().groupId(<span class=\"string\">&quot;group1&quot;</span>).singleResult();</span><br><span class=\"line\">    List&lt;User&gt; list = identityService.createUserQuery().list();</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (User user : list) &#123;</span><br><span class=\"line\">        <span class=\"comment\">// å°†ç”¨æˆ·åˆ†é…ç»™å¯¹åº”çš„ç»„</span></span><br><span class=\"line\">        identityService.createMembership(user.getId(),group.getId());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220325110511848.png\"\n                      alt=\"image-20220325110511848\"\n                ></p>\n<h3 id=\"å€™é€‰äººç»„åº”ç”¨\"><a href=\"#å€™é€‰äººç»„åº”ç”¨\" class=\"headerlink\" title=\"å€™é€‰äººç»„åº”ç”¨\"></a>å€™é€‰äººç»„åº”ç”¨</h3><p>ææ¸…æ¥šäº†ç”¨æˆ·å’Œç”¨æˆ·ç»„çš„å…³ç³»åæˆ‘ä»¬å°±å¯ä»¥æ¥ä½¿ç”¨å€™é€‰äººç»„çš„åº”ç”¨äº†</p>\n<h4 id=\"åˆ›å»ºæµç¨‹å›¾\"><a href=\"#åˆ›å»ºæµç¨‹å›¾\" class=\"headerlink\" title=\"åˆ›å»ºæµç¨‹å›¾\"></a>åˆ›å»ºæµç¨‹å›¾</h4><p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220325111013641.png\"\n                      alt=\"image-20220325111013641\"\n                ></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220325110952527.png\"\n                      alt=\"image-20220325110952527\"\n                ></p>\n<h4 id=\"æµç¨‹çš„éƒ¨ç½²è¿è¡Œ\"><a href=\"#æµç¨‹çš„éƒ¨ç½²è¿è¡Œ\" class=\"headerlink\" title=\"æµç¨‹çš„éƒ¨ç½²è¿è¡Œ\"></a>æµç¨‹çš„éƒ¨ç½²è¿è¡Œ</h4><p>ç„¶åæˆ‘ä»¬æŠŠæµç¨‹éƒ¨ç½²å’Œè¿è¡Œï¼Œæ³¨æ„å¯¹UELè¡¨è¾¾å¼èµ‹å€¼ï¼Œå…³è”ä¸ŠGroup</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * éƒ¨ç½²æµç¨‹</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">deploy</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">        <span class=\"type\">ProcessEngine</span> <span class=\"variable\">processEngine</span> <span class=\"operator\">=</span> ProcessEngines.getDefaultProcessEngine();</span><br><span class=\"line\">        <span class=\"type\">RepositoryService</span> <span class=\"variable\">repositoryService</span> <span class=\"operator\">=</span> processEngine.getRepositoryService();</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"type\">Deployment</span> <span class=\"variable\">deploy</span> <span class=\"operator\">=</span> repositoryService.createDeployment()</span><br><span class=\"line\">                .addClasspathResource(<span class=\"string\">&quot;è¯·å‡æµç¨‹-å€™é€‰äººç»„.bpmn20.xml&quot;</span>)</span><br><span class=\"line\">                .name(<span class=\"string\">&quot;è¯·æ±‚æµç¨‹-å€™é€‰äºº&quot;</span>)</span><br><span class=\"line\">                .deploy();</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;deploy.getId() = &quot;</span> + deploy.getId());</span><br><span class=\"line\">        System.out.println(deploy.getName());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * å¯åŠ¨æµç¨‹å®ä¾‹</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">runProcess</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">        <span class=\"type\">ProcessEngine</span> <span class=\"variable\">processEngine</span> <span class=\"operator\">=</span> ProcessEngines.getDefaultProcessEngine();</span><br><span class=\"line\">        <span class=\"type\">IdentityService</span> <span class=\"variable\">identityService</span> <span class=\"operator\">=</span> processEngine.getIdentityService();</span><br><span class=\"line\">        <span class=\"type\">Group</span> <span class=\"variable\">group</span> <span class=\"operator\">=</span> identityService.createGroupQuery().groupId(<span class=\"string\">&quot;group1&quot;</span>).singleResult();</span><br><span class=\"line\">        <span class=\"type\">RuntimeService</span> <span class=\"variable\">runtimeService</span> <span class=\"operator\">=</span> processEngine.getRuntimeService();</span><br><span class=\"line\">        <span class=\"comment\">// ç»™æµç¨‹å®šä¹‰ä¸­çš„UELè¡¨è¾¾å¼èµ‹å€¼</span></span><br><span class=\"line\">        Map&lt;String,Object&gt; variables = <span class=\"keyword\">new</span> <span class=\"title class_\">HashMap</span>&lt;&gt;();</span><br><span class=\"line\">        <span class=\"comment\">// variables.put(&quot;g1&quot;,&quot;group1&quot;);</span></span><br><span class=\"line\">        variables.put(<span class=\"string\">&quot;g1&quot;</span>,group.getId()); <span class=\"comment\">// ç»™æµç¨‹å®šä¹‰ä¸­çš„UELè¡¨è¾¾å¼èµ‹å€¼</span></span><br><span class=\"line\">        runtimeService.startProcessInstanceById(<span class=\"string\">&quot;holiday-group:1:17504&quot;</span>,variables);</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n\n<p>å¯¹åº”è¡¨ç»“æ„ä¸­å°±æœ‰å¯¹åº”çš„ä½“ç°</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220325112545719.png\"\n                      alt=\"image-20220325112545719\"\n                ></p>\n<h4 id=\"ä»»åŠ¡çš„æ‹¾å–å’Œå®Œæˆ\"><a href=\"#ä»»åŠ¡çš„æ‹¾å–å’Œå®Œæˆ\" class=\"headerlink\" title=\"ä»»åŠ¡çš„æ‹¾å–å’Œå®Œæˆ\"></a>ä»»åŠ¡çš„æ‹¾å–å’Œå®Œæˆ</h4><p>ç„¶åå®Œæˆä»»åŠ¡çš„æŸ¥è¯¢æ‹¾å–å’Œå¤„ç†æ“ä½œ</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * æ ¹æ®ç™»å½•çš„ç”¨æˆ·æŸ¥è¯¢å¯¹åº”çš„å¯ä»¥æ‹¾å–çš„ä»»åŠ¡</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">queryTaskCandidateGroup</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">        <span class=\"type\">ProcessEngine</span> <span class=\"variable\">processEngine</span> <span class=\"operator\">=</span> ProcessEngines.getDefaultProcessEngine();</span><br><span class=\"line\">        <span class=\"comment\">// æ ¹æ®å½“å‰ç™»å½•çš„ç”¨æˆ·æ‰¾åˆ°å¯¹åº”çš„ç»„</span></span><br><span class=\"line\">        <span class=\"type\">IdentityService</span> <span class=\"variable\">identityService</span> <span class=\"operator\">=</span> processEngine.getIdentityService();</span><br><span class=\"line\">        <span class=\"comment\">// å½“å‰ç”¨æˆ·æ‰€åœ¨çš„ç»„</span></span><br><span class=\"line\">        <span class=\"type\">Group</span> <span class=\"variable\">group</span> <span class=\"operator\">=</span> identityService.createGroupQuery().groupMember(<span class=\"string\">&quot;é‚“å½ª&quot;</span>).singleResult();</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"type\">TaskService</span> <span class=\"variable\">taskService</span> <span class=\"operator\">=</span> processEngine.getTaskService();</span><br><span class=\"line\">        List&lt;Task&gt; list = taskService.createTaskQuery()</span><br><span class=\"line\">                <span class=\"comment\">//.processInstanceId(&quot;2501&quot;)</span></span><br><span class=\"line\">                .processDefinitionId(<span class=\"string\">&quot;holiday-group:1:17504&quot;</span>)</span><br><span class=\"line\">                .taskCandidateGroup(group.getId())</span><br><span class=\"line\">                .list();</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (Task task : list) &#123;</span><br><span class=\"line\">            System.out.println(<span class=\"string\">&quot;task.getId() = &quot;</span> + task.getId());</span><br><span class=\"line\">            System.out.println(<span class=\"string\">&quot;task.getName() = &quot;</span> + task.getName());</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * æ‹¾å–ä»»åŠ¡</span></span><br><span class=\"line\"><span class=\"comment\">     *    ä¸€ä¸ªå€™é€‰äººæ‹¾å–äº†è¿™ä¸ªä»»åŠ¡ä¹‹åå…¶ä»–çš„ç”¨æˆ·å°±æ²¡æœ‰åŠæ³•æ‹¾å–è¿™ä¸ªä»»åŠ¡äº†</span></span><br><span class=\"line\"><span class=\"comment\">     *    æ‰€ä»¥å¦‚æœä¸€ä¸ªç”¨æˆ·æ‹¾å–äº†ä»»åŠ¡ä¹‹ååˆä¸æƒ³å¤„ç†äº†ï¼Œé‚£ä¹ˆå¯ä»¥é€€è¿˜</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">claimTaskCandidate</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">        <span class=\"type\">String</span> <span class=\"variable\">userId</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;ç”°ä½³&quot;</span>;</span><br><span class=\"line\">        <span class=\"type\">ProcessEngine</span> <span class=\"variable\">processEngine</span> <span class=\"operator\">=</span> ProcessEngines.getDefaultProcessEngine();</span><br><span class=\"line\">        <span class=\"comment\">// æ ¹æ®å½“å‰ç™»å½•çš„ç”¨æˆ·æ‰¾åˆ°å¯¹åº”çš„ç»„</span></span><br><span class=\"line\">        <span class=\"type\">IdentityService</span> <span class=\"variable\">identityService</span> <span class=\"operator\">=</span> processEngine.getIdentityService();</span><br><span class=\"line\">        <span class=\"comment\">// å½“å‰ç”¨æˆ·æ‰€åœ¨çš„ç»„</span></span><br><span class=\"line\">        <span class=\"type\">Group</span> <span class=\"variable\">group</span> <span class=\"operator\">=</span> identityService.createGroupQuery().groupMember(userId).singleResult();</span><br><span class=\"line\">        <span class=\"type\">TaskService</span> <span class=\"variable\">taskService</span> <span class=\"operator\">=</span> processEngine.getTaskService();</span><br><span class=\"line\">        <span class=\"type\">Task</span> <span class=\"variable\">task</span> <span class=\"operator\">=</span> taskService.createTaskQuery()</span><br><span class=\"line\">                <span class=\"comment\">//.processInstanceId(&quot;2501&quot;)</span></span><br><span class=\"line\">                .processDefinitionId(<span class=\"string\">&quot;holiday-group:1:17504&quot;</span>)</span><br><span class=\"line\">                .taskCandidateGroup(group.getId())</span><br><span class=\"line\">                .singleResult();</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(task != <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">            <span class=\"comment\">// ä»»åŠ¡æ‹¾å–</span></span><br><span class=\"line\">            taskService.claim(task.getId(),userId);</span><br><span class=\"line\">            System.out.println(<span class=\"string\">&quot;ä»»åŠ¡æ‹¾å–æˆåŠŸ&quot;</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;  </span><br><span class=\"line\">   <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * å®Œæˆä»»åŠ¡</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">completeTask</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">        <span class=\"type\">ProcessEngine</span> <span class=\"variable\">processEngine</span> <span class=\"operator\">=</span> ProcessEngines.getDefaultProcessEngine();</span><br><span class=\"line\">        <span class=\"type\">TaskService</span> <span class=\"variable\">taskService</span> <span class=\"operator\">=</span> processEngine.getTaskService();</span><br><span class=\"line\">        <span class=\"type\">Task</span> <span class=\"variable\">task</span> <span class=\"operator\">=</span> taskService.createTaskQuery()</span><br><span class=\"line\">                <span class=\"comment\">//.processInstanceId(&quot;2501&quot;)</span></span><br><span class=\"line\">                .processDefinitionId(<span class=\"string\">&quot;holiday-group:1:17504&quot;</span>)</span><br><span class=\"line\">                .taskAssignee(<span class=\"string\">&quot;é‚“å½ª&quot;</span>)</span><br><span class=\"line\">                .singleResult();</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(task != <span class=\"literal\">null</span>)&#123;</span><br><span class=\"line\">            <span class=\"comment\">// å®Œæˆä»»åŠ¡</span></span><br><span class=\"line\">            taskService.complete(task.getId());</span><br><span class=\"line\">            System.out.println(<span class=\"string\">&quot;å®ŒæˆTask&quot;</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n\n\n\n\n\n<h1 id=\"ç½‘å…³\"><a href=\"#ç½‘å…³\" class=\"headerlink\" title=\"ç½‘å…³\"></a>ç½‘å…³</h1><p>ç½‘å…³ç”¨æ¥æ§åˆ¶æµç¨‹çš„æµå‘</p>\n<h2 id=\"æ’ä»–ç½‘å…³\"><a href=\"#æ’ä»–ç½‘å…³\" class=\"headerlink\" title=\"æ’ä»–ç½‘å…³\"></a>æ’ä»–ç½‘å…³</h2><p>æ’ä»–ç½‘å…³ï¼ˆexclusive gatewayï¼‰ï¼ˆä¹Ÿå«<em>å¼‚æˆ–ç½‘å…³ XOR gateway</em>ï¼Œæˆ–è€…æ›´ä¸“ä¸šçš„ï¼Œ<em>åŸºäºæ•°æ®çš„æ’ä»–ç½‘å…³ exclusive data-based gateway</em>ï¼‰ï¼Œç”¨äºå¯¹æµç¨‹ä¸­çš„<strong>å†³ç­–</strong>å»ºæ¨¡ã€‚å½“æ‰§è¡Œåˆ°è¾¾è¿™ä¸ªç½‘å…³æ—¶ï¼Œä¼šæŒ‰ç…§æ‰€æœ‰å‡ºå£é¡ºåºæµå®šä¹‰çš„é¡ºåºå¯¹å®ƒä»¬è¿›è¡Œè®¡ç®—ã€‚é€‰æ‹©ç¬¬ä¸€ä¸ªæ¡ä»¶è®¡ç®—ä¸ºtrueçš„é¡ºåºæµï¼ˆå½“æ²¡æœ‰è®¾ç½®æ¡ä»¶æ—¶ï¼Œè®¤ä¸ºé¡ºåºæµä¸º<em>true</em>ï¼‰ç»§ç»­æµç¨‹ã€‚</p>\n<p><strong>è¯·æ³¨æ„è¿™é‡Œå‡ºå£é¡ºåºæµçš„å«ä¹‰ä¸BPMN 2.0ä¸­çš„ä¸€èˆ¬æƒ…å†µä¸ä¸€æ ·ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œä¼šé€‰æ‹©æ‰€æœ‰æ¡ä»¶è®¡ç®—ä¸ºtrueçš„é¡ºåºæµï¼Œå¹¶è¡Œæ‰§è¡Œã€‚è€Œä½¿ç”¨æ’ä»–ç½‘å…³æ—¶ï¼Œåªä¼šé€‰æ‹©ä¸€æ¡é¡ºåºæµã€‚å½“å¤šæ¡é¡ºåºæµçš„æ¡ä»¶éƒ½è®¡ç®—ä¸ºtrueæ—¶ï¼Œä¼šä¸”ä»…ä¼šé€‰æ‹©åœ¨XMLä¸­æœ€å…ˆå®šä¹‰çš„é¡ºåºæµç»§ç»­æµç¨‹ã€‚å¦‚æœæ²¡æœ‰å¯é€‰çš„é¡ºåºæµï¼Œä¼šæŠ›å‡ºå¼‚å¸¸ã€‚</strong></p>\n<p>å›¾ç¤º</p>\n<p>æ’ä»–ç½‘å…³ç”¨å†…éƒ¨å¸¦æœ‰â€™Xâ€™å›¾æ ‡çš„æ ‡å‡†ç½‘å…³ï¼ˆè±å½¢ï¼‰è¡¨ç¤ºï¼Œâ€™Xâ€™å›¾æ ‡ä»£è¡¨<em>å¼‚æˆ–</em>çš„å«ä¹‰ã€‚è¯·æ³¨æ„å†…éƒ¨æ²¡æœ‰å›¾æ ‡çš„ç½‘å…³é»˜è®¤ä¸ºæ’ä»–ç½‘å…³ã€‚BPMN 2.0è§„èŒƒä¸å…è®¸åœ¨åŒä¸€ä¸ªæµç¨‹ä¸­æ··åˆä½¿ç”¨æœ‰åŠæ²¡æœ‰Xçš„è±å½¢æ ‡å¿—ã€‚</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220326100630908.png\"\n                      alt=\"image-20220326100630908\"\n                ></p>\n<p>æ¡ˆä¾‹ï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220326103951903.png\"\n                      alt=\"image-20220326103951903\"\n                ></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  * éƒ¨ç½²æµç¨‹</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\"> <span class=\"meta\">@Test</span></span><br><span class=\"line\"> <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">deploy</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">     <span class=\"type\">ProcessEngine</span> <span class=\"variable\">processEngine</span> <span class=\"operator\">=</span> ProcessEngines.getDefaultProcessEngine();</span><br><span class=\"line\">     <span class=\"type\">RepositoryService</span> <span class=\"variable\">repositoryService</span> <span class=\"operator\">=</span> processEngine.getRepositoryService();</span><br><span class=\"line\"></span><br><span class=\"line\">     <span class=\"type\">Deployment</span> <span class=\"variable\">deploy</span> <span class=\"operator\">=</span> repositoryService.createDeployment()</span><br><span class=\"line\">             .addClasspathResource(<span class=\"string\">&quot;è¯·å‡æµç¨‹-æ’ä»–ç½‘å…³.bpmn20.xml&quot;</span>)</span><br><span class=\"line\">             .name(<span class=\"string\">&quot;è¯·æ±‚æµç¨‹-æ’ä»–ç½‘å…³&quot;</span>)</span><br><span class=\"line\">             .deploy();</span><br><span class=\"line\">     System.out.println(<span class=\"string\">&quot;deploy.getId() = &quot;</span> + deploy.getId());</span><br><span class=\"line\">     System.out.println(deploy.getName());</span><br><span class=\"line\"> &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"> <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  * å¯åŠ¨æµç¨‹å®ä¾‹</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\"> <span class=\"meta\">@Test</span></span><br><span class=\"line\"> <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">runProcess</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">     <span class=\"type\">ProcessEngine</span> <span class=\"variable\">processEngine</span> <span class=\"operator\">=</span> ProcessEngines.getDefaultProcessEngine();</span><br><span class=\"line\">     <span class=\"type\">RuntimeService</span> <span class=\"variable\">runtimeService</span> <span class=\"operator\">=</span> processEngine.getRuntimeService();</span><br><span class=\"line\">     <span class=\"comment\">// ç»™æµç¨‹å®šä¹‰ä¸­çš„UELè¡¨è¾¾å¼èµ‹å€¼</span></span><br><span class=\"line\">     Map&lt;String,Object&gt; variables = <span class=\"keyword\">new</span> <span class=\"title class_\">HashMap</span>&lt;&gt;();</span><br><span class=\"line\">     <span class=\"comment\">// variables.put(&quot;g1&quot;,&quot;group1&quot;);</span></span><br><span class=\"line\">     variables.put(<span class=\"string\">&quot;num&quot;</span>,<span class=\"number\">3</span>); <span class=\"comment\">// ç»™æµç¨‹å®šä¹‰ä¸­çš„UELè¡¨è¾¾å¼èµ‹å€¼</span></span><br><span class=\"line\">     runtimeService.startProcessInstanceById(<span class=\"string\">&quot;holiday-exclusive:1:4&quot;</span>,variables);</span><br><span class=\"line\"> &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"> <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  * å¯åŠ¨æµç¨‹å®ä¾‹</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\"> <span class=\"meta\">@Test</span></span><br><span class=\"line\"> <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">setVariables</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">     <span class=\"type\">ProcessEngine</span> <span class=\"variable\">processEngine</span> <span class=\"operator\">=</span> ProcessEngines.getDefaultProcessEngine();</span><br><span class=\"line\">     <span class=\"type\">RuntimeService</span> <span class=\"variable\">runtimeService</span> <span class=\"operator\">=</span> processEngine.getRuntimeService();</span><br><span class=\"line\">     <span class=\"comment\">// ç»™æµç¨‹å®šä¹‰ä¸­çš„UELè¡¨è¾¾å¼èµ‹å€¼</span></span><br><span class=\"line\">     Map&lt;String,Object&gt; variables = <span class=\"keyword\">new</span> <span class=\"title class_\">HashMap</span>&lt;&gt;();</span><br><span class=\"line\">     <span class=\"comment\">// variables.put(&quot;g1&quot;,&quot;group1&quot;);</span></span><br><span class=\"line\">     variables.put(<span class=\"string\">&quot;num&quot;</span>,<span class=\"number\">4</span>); <span class=\"comment\">// ç»™æµç¨‹å®šä¹‰ä¸­çš„UELè¡¨è¾¾å¼èµ‹å€¼</span></span><br><span class=\"line\">     runtimeService.setVariables(<span class=\"string\">&quot;12503&quot;</span>,variables);</span><br><span class=\"line\"> &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"> <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  * å®Œæˆä»»åŠ¡</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\"> <span class=\"meta\">@Test</span></span><br><span class=\"line\"> <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">completeTask</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">     <span class=\"type\">ProcessEngine</span> <span class=\"variable\">processEngine</span> <span class=\"operator\">=</span> ProcessEngines.getDefaultProcessEngine();</span><br><span class=\"line\">     <span class=\"type\">TaskService</span> <span class=\"variable\">taskService</span> <span class=\"operator\">=</span> processEngine.getTaskService();</span><br><span class=\"line\">     <span class=\"type\">Task</span> <span class=\"variable\">task</span> <span class=\"operator\">=</span> taskService.createTaskQuery()</span><br><span class=\"line\">             <span class=\"comment\">//.processInstanceId(&quot;2501&quot;)</span></span><br><span class=\"line\">             .processDefinitionId(<span class=\"string\">&quot;holiday-exclusive:1:4&quot;</span>)</span><br><span class=\"line\">             .taskAssignee(<span class=\"string\">&quot;zhangsan&quot;</span>)</span><br><span class=\"line\">             .singleResult();</span><br><span class=\"line\">     <span class=\"keyword\">if</span>(task != <span class=\"literal\">null</span>)&#123;</span><br><span class=\"line\">         <span class=\"comment\">// å®Œæˆä»»åŠ¡</span></span><br><span class=\"line\">         taskService.complete(task.getId());</span><br><span class=\"line\">         System.out.println(<span class=\"string\">&quot;å®ŒæˆTask&quot;</span>);</span><br><span class=\"line\">     &#125;</span><br><span class=\"line\"> &#125;</span><br></pre></td></tr></table></figure>\n\n\n\n\n\n<p>å¦‚æœä»ç½‘å…³å‡ºå»çš„çº¿æ‰€æœ‰æ¡ä»¶éƒ½ä¸æ»¡è¶³çš„æƒ…å†µä¸‹ä¼šæŠ›å‡ºç³»ç»Ÿå¼‚å¸¸ï¼Œ</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220326104744181.png\"\n                      alt=\"image-20220326104744181\"\n                ></p>\n<p>ä½†æ˜¯è¦æ³¨æ„ä»»åŠ¡æ²¡æœ‰ä»‹ç»ï¼Œè¿˜æ˜¯åŸæ¥çš„ä»»åŠ¡ï¼Œæˆ‘ä»¬å¯ä»¥é‡ç½®æµç¨‹å˜é‡</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">setVariables</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"type\">ProcessEngine</span> <span class=\"variable\">processEngine</span> <span class=\"operator\">=</span> ProcessEngines.getDefaultProcessEngine();</span><br><span class=\"line\">    <span class=\"type\">RuntimeService</span> <span class=\"variable\">runtimeService</span> <span class=\"operator\">=</span> processEngine.getRuntimeService();</span><br><span class=\"line\">    <span class=\"comment\">// ç»™æµç¨‹å®šä¹‰ä¸­çš„UELè¡¨è¾¾å¼èµ‹å€¼</span></span><br><span class=\"line\">    Map&lt;String,Object&gt; variables = <span class=\"keyword\">new</span> <span class=\"title class_\">HashMap</span>&lt;&gt;();</span><br><span class=\"line\">    <span class=\"comment\">// variables.put(&quot;g1&quot;,&quot;group1&quot;);</span></span><br><span class=\"line\">    variables.put(<span class=\"string\">&quot;num&quot;</span>,<span class=\"number\">4</span>); <span class=\"comment\">// ç»™æµç¨‹å®šä¹‰ä¸­çš„UELè¡¨è¾¾å¼èµ‹å€¼</span></span><br><span class=\"line\">    runtimeService.setVariables(<span class=\"string\">&quot;12503&quot;</span>,variables);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n\n\n<p>å‰é¢æˆ‘ä»¬å¯ä»¥ç›´æ¥åœ¨è¿æ¥çº¿ä¸Šå®šä¹‰æ¡ä»¶ï¼Œé‚£ä¸ºä»€ä¹ˆè¿˜è¦æœ‰æ’ä»–ç½‘å…³å‘¢ï¼Ÿç›´æ¥åœ¨çº¿ä¸Šçš„æƒ…å†µï¼Œå¦‚æœæ¡ä»¶éƒ½ä¸æ»¡è¶³ï¼Œæµç¨‹å°±ç»“æŸäº†ï¼Œæ˜¯å¼‚å¸¸ç»“æŸ!!</p>\n<h2 id=\"å¹¶è¡Œç½‘å…³\"><a href=\"#å¹¶è¡Œç½‘å…³\" class=\"headerlink\" title=\"å¹¶è¡Œç½‘å…³\"></a>å¹¶è¡Œç½‘å…³</h2><p>å¹¶è¡Œç½‘å…³å…è®¸å°†æµç¨‹åˆ†æˆå¤šæ¡åˆ†æ”¯ï¼Œä¹Ÿå¯ä»¥æŠŠå¤šæ¡åˆ†æ”¯æ±‡èšåˆ°ä¸€èµ·ï¼Œå¹¶è¡Œç½‘å…³çš„åŠŸèƒ½æ˜¯åŸºäºè¿›å…¥å’Œå¤–å‡ºé¡ºåºæµçš„ï¼š</p>\n<ul>\n<li><p>forkåˆ†æ”¯ï¼šå¹¶è¡Œåçš„æ‰€æœ‰å¤–å‡ºé¡ºåºæµï¼Œä¸ºæ¯ä¸ªé¡ºåºæµéƒ½åˆ›å»ºä¸€ä¸ªå¹¶å‘åˆ†æ”¯ã€‚</p>\n</li>\n<li><p>joinæ±‡èšï¼š æ‰€æœ‰åˆ°è¾¾å¹¶è¡Œç½‘å…³ï¼Œåœ¨æ­¤ç­‰å¾…çš„è¿›å…¥åˆ†æ”¯ï¼Œ ç›´åˆ°æ‰€æœ‰è¿›å…¥é¡ºåºæµçš„åˆ†æ”¯éƒ½åˆ°è¾¾ä»¥åï¼Œ æµç¨‹å°±ä¼šé€šè¿‡æ±‡èšç½‘å…³ã€‚</p>\n</li>\n</ul>\n<p>æ³¨æ„ï¼Œå¦‚æœåŒä¸€ä¸ªå¹¶è¡Œç½‘å…³æœ‰å¤šä¸ªè¿›å…¥å’Œå¤šä¸ªå¤–å‡ºé¡ºåºæµï¼Œ å®ƒå°±åŒæ—¶å…·æœ‰åˆ†æ”¯å’Œæ±‡èšåŠŸèƒ½ã€‚ è¿™æ—¶ï¼Œç½‘å…³ä¼šå…ˆæ±‡èšæ‰€æœ‰è¿›å…¥çš„é¡ºåºæµï¼Œç„¶åå†åˆ‡åˆ†æˆå¤šä¸ªå¹¶è¡Œåˆ†æ”¯ã€‚</p>\n<p><strong>ä¸å…¶ä»–ç½‘å…³çš„ä¸»è¦åŒºåˆ«æ˜¯ï¼Œå¹¶è¡Œç½‘å…³ä¸ä¼šè§£ææ¡ä»¶ã€‚</strong> <strong>å³ä½¿é¡ºåºæµä¸­å®šä¹‰äº†æ¡ä»¶ï¼Œä¹Ÿä¼šè¢«å¿½ç•¥ã€‚</strong></p>\n<p>æ¡ˆä¾‹ï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220326110341232.png\"\n                      alt=\"image-20220326110341232\"\n                ></p>\n<p>å½“æˆ‘ä»¬æ‰§è¡Œäº†åˆ›å»ºè¯·å‡å•åï¼Œåˆ°å¹¶è¡Œç½‘å…³çš„ä½ç½®çš„æ—¶å€™ï¼Œåœ¨ACT_RU_TASKè¡¨ä¸­å°±æœ‰ä¸¤æ¡è®°å½•</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220326111359504.png\"\n                      alt=\"image-20220326111359504\"\n                ></p>\n<p>ç„¶ååŒæ—¶åœ¨ACT_RU_EXECUTIONä¸­æœ‰ä¸‰æ¡è®°å½•ï¼Œä¸€ä¸ªä»»åŠ¡å¯¹åº”çš„æœ‰ä¸¤ä¸ªæ‰§è¡Œå®ä¾‹</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220326111453630.png\"\n                      alt=\"image-20220326111453630\"\n                ></p>\n<h2 id=\"åŒ…å«ç½‘å…³\"><a href=\"#åŒ…å«ç½‘å…³\" class=\"headerlink\" title=\"åŒ…å«ç½‘å…³\"></a>åŒ…å«ç½‘å…³</h2><p>åŒ…å«ç½‘å…³å¯ä»¥çœ‹åšæ˜¯æ’ä»–ç½‘å…³å’Œå¹¶è¡Œç½‘å…³çš„ç»“åˆä½“ã€‚ å’Œæ’ä»–ç½‘å…³ä¸€æ ·ï¼Œä½ å¯ä»¥åœ¨å¤–å‡ºé¡ºåºæµä¸Šå®šä¹‰æ¡ä»¶ï¼ŒåŒ…å«ç½‘å…³ä¼šè§£æå®ƒä»¬ã€‚ ä½†æ˜¯ä¸»è¦çš„åŒºåˆ«æ˜¯åŒ…å«ç½‘å…³å¯ä»¥é€‰æ‹©å¤šäºä¸€æ¡é¡ºåºæµï¼Œè¿™å’Œå¹¶è¡Œç½‘å…³ä¸€æ ·ã€‚</p>\n<p>åŒ…å«ç½‘å…³çš„åŠŸèƒ½æ˜¯åŸºäºè¿›å…¥å’Œå¤–å‡ºé¡ºåºæµçš„ï¼š</p>\n<ul>\n<li><p>åˆ†æ”¯ï¼š æ‰€æœ‰å¤–å‡ºé¡ºåºæµçš„æ¡ä»¶éƒ½ä¼šè¢«è§£æï¼Œç»“æœä¸ºtrueçš„é¡ºåºæµä¼šä»¥å¹¶è¡Œæ–¹å¼ç»§ç»­æ‰§è¡Œï¼Œ ä¼šä¸ºæ¯ä¸ªé¡ºåºæµåˆ›å»ºä¸€ä¸ªåˆ†æ”¯ã€‚</p>\n</li>\n<li><p>æ±‡èšï¼šæ‰€æœ‰å¹¶è¡Œåˆ†æ”¯åˆ°è¾¾åŒ…å«ç½‘å…³ï¼Œä¼šè¿›å…¥ç­‰å¾…çŠ¶æ€ï¼Œ ç›´åˆ°æ¯ä¸ªåŒ…å«æµç¨‹tokençš„è¿›å…¥é¡ºåºæµçš„åˆ†æ”¯éƒ½åˆ°è¾¾ã€‚ è¿™æ˜¯ä¸å¹¶è¡Œç½‘å…³çš„æœ€å¤§ä¸åŒã€‚æ¢å¥è¯è¯´ï¼ŒåŒ…å«ç½‘å…³åªä¼šç­‰å¾…è¢«é€‰ä¸­æ‰§è¡Œäº†çš„è¿›å…¥é¡ºåºæµã€‚ åœ¨æ±‡èšä¹‹åï¼Œæµç¨‹ä¼šç©¿è¿‡åŒ…å«ç½‘å…³ç»§ç»­æ‰§è¡Œã€‚</p>\n</li>\n</ul>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220326112720089.png\"\n                      alt=\"image-20220326112720089\"\n                ></p>\n<h2 id=\"äº‹ä»¶ç½‘å…³\"><a href=\"#äº‹ä»¶ç½‘å…³\" class=\"headerlink\" title=\"äº‹ä»¶ç½‘å…³\"></a>äº‹ä»¶ç½‘å…³</h2><p>äº‹ä»¶ç½‘å…³å…è®¸æ ¹æ®äº‹ä»¶åˆ¤æ–­æµå‘ã€‚ç½‘å…³çš„æ¯ä¸ªå¤–å‡ºé¡ºåºæµéƒ½è¦è¿æ¥åˆ°ä¸€ä¸ªä¸­é—´æ•è·äº‹ä»¶ã€‚ å½“æµç¨‹åˆ°è¾¾ä¸€ä¸ªåŸºäºäº‹ä»¶ç½‘å…³ï¼Œç½‘å…³ä¼šè¿›å…¥ç­‰å¾…çŠ¶æ€ï¼šä¼šæš‚åœæ‰§è¡Œã€‚ä¸æ­¤åŒæ—¶ï¼Œä¼šä¸ºæ¯ä¸ªå¤–å‡ºé¡ºåºæµåˆ›å»ºç›¸å¯¹çš„äº‹ä»¶è®¢é˜…ã€‚</p>\n<p>äº‹ä»¶ç½‘å…³çš„å¤–å‡ºé¡ºåºæµå’Œæ™®é€šé¡ºåºæµä¸åŒï¼Œè¿™äº›é¡ºåºæµä¸ä¼šçœŸçš„â€æ‰§è¡Œâ€ï¼Œ ç›¸åå®ƒä»¬è®©æµç¨‹å¼•æ“å»å†³å®šæ‰§è¡Œåˆ°äº‹ä»¶ç½‘å…³çš„æµç¨‹éœ€è¦è®¢é˜…å“ªäº›äº‹ä»¶ã€‚ è¦è€ƒè™‘ä»¥ä¸‹æ¡ä»¶ï¼š</p>\n<ol>\n<li>äº‹ä»¶ç½‘å…³å¿…é¡»æœ‰ä¸¤æ¡æˆ–ä»¥ä¸Šå¤–å‡ºé¡ºåºæµï¼›</li>\n<li>äº‹ä»¶ç½‘å…³åï¼Œåªèƒ½ä½¿ç”¨intermediateCatchEventç±»å‹ï¼ˆactivitiä¸æ”¯æŒåŸºäºäº‹ä»¶ç½‘å…³åè¿æ¥ReceiveTaskï¼‰</li>\n<li>è¿æ¥åˆ°äº‹ä»¶ç½‘å…³çš„ä¸­é—´æ•è·äº‹ä»¶å¿…é¡»åªæœ‰ä¸€ä¸ªå…¥å£é¡ºåºæµã€‚</li>\n</ol>\n<h1 id=\"äº‹ä»¶\"><a href=\"#äº‹ä»¶\" class=\"headerlink\" title=\"äº‹ä»¶\"></a>äº‹ä»¶</h1><p>äº‹ä»¶ï¼ˆeventï¼‰é€šå¸¸ç”¨äºä¸ºæµç¨‹ç”Ÿå‘½å‘¨æœŸä¸­å‘ç”Ÿçš„äº‹æƒ…å»ºæ¨¡ã€‚äº‹ä»¶æ€»æ˜¯å›¾å½¢åŒ–ä¸ºåœ†åœˆã€‚åœ¨BPMN 2.0ä¸­ï¼Œæœ‰ä¸¤ç§ä¸»è¦çš„äº‹ä»¶åˆ†ç±»ï¼š<em>æ•è·ï¼ˆcatchingï¼‰</em>ä¸<em>æŠ›å‡ºï¼ˆthrowingï¼‰</em>äº‹ä»¶ã€‚</p>\n<ul>\n<li><strong>æ•è·:</strong> å½“æµç¨‹æ‰§è¡Œåˆ°è¾¾è¿™ä¸ªäº‹ä»¶æ—¶ï¼Œä¼šç­‰å¾…ç›´åˆ°è§¦å‘å™¨åŠ¨ä½œã€‚è§¦å‘å™¨çš„ç±»å‹ç”±å…¶ä¸­çš„å›¾æ ‡ï¼Œæˆ–è€…è¯´XMLä¸­çš„ç±»å‹å£°æ˜è€Œå®šä¹‰ã€‚æ•è·äº‹ä»¶ä¸æŠ›å‡ºäº‹ä»¶æ˜¾ç¤ºä¸Šçš„åŒºåˆ«ï¼Œæ˜¯å…¶å†…éƒ¨çš„å›¾æ ‡æ²¡æœ‰å¡«å……ï¼ˆå³æ˜¯ç™½è‰²çš„ï¼‰ã€‚</li>\n<li><strong>æŠ›å‡º:</strong> å½“æµç¨‹æ‰§è¡Œåˆ°è¾¾è¿™ä¸ªäº‹ä»¶æ—¶ï¼Œä¼šè§¦å‘ä¸€ä¸ªè§¦å‘å™¨ã€‚è§¦å‘å™¨çš„ç±»å‹ï¼Œç”±å…¶ä¸­çš„å›¾æ ‡ï¼Œæˆ–è€…è¯´XMLä¸­çš„ç±»å‹å£°æ˜è€Œå®šä¹‰ã€‚æŠ›å‡ºäº‹ä»¶ä¸æ•è·äº‹ä»¶æ˜¾ç¤ºä¸Šçš„åŒºåˆ«ï¼Œæ˜¯å…¶å†…éƒ¨çš„å›¾æ ‡å¡«å……ä¸ºé»‘è‰²ã€‚</li>\n</ul>\n<h2 id=\"å®šæ—¶äº‹ä»¶\"><a href=\"#å®šæ—¶äº‹ä»¶\" class=\"headerlink\" title=\"å®šæ—¶äº‹ä»¶\"></a>å®šæ—¶äº‹ä»¶</h2><p>å®šæ—¶è§¦å‘çš„ç›¸å…³äº‹ä»¶ï¼ŒåŒ…æ‹¬å®šæ—¶å™¨å¯åŠ¨äº‹ä»¶ï¼Œå®šæ—¶å™¨æ•è·ä¸­é—´ä»¶äº‹ä»¶ï¼Œå®šæ—¶å™¨è¾¹ç•Œäº‹ä»¶</p>\n<h3 id=\"å®šæ—¶å™¨å¯åŠ¨äº‹ä»¶\"><a href=\"#å®šæ—¶å™¨å¯åŠ¨äº‹ä»¶\" class=\"headerlink\" title=\"å®šæ—¶å™¨å¯åŠ¨äº‹ä»¶\"></a>å®šæ—¶å™¨å¯åŠ¨äº‹ä»¶</h3><p>å®šæ—¶å™¨å¯åŠ¨äº‹ä»¶ï¼ˆtimer start eventï¼‰åœ¨æŒ‡å®šæ—¶é—´åˆ›å»ºæµç¨‹å®ä¾‹ã€‚åœ¨æµç¨‹åªéœ€è¦å¯åŠ¨ä¸€æ¬¡ï¼Œæˆ–è€…æµç¨‹éœ€è¦åœ¨ç‰¹å®šçš„æ—¶é—´é—´éš”é‡å¤å¯åŠ¨æ—¶ï¼Œéƒ½å¯ä»¥ä½¿ç”¨ã€‚</p>\n<p><em><strong>è¯·æ³¨æ„</strong>ï¼š</em>å­æµç¨‹ä¸èƒ½æœ‰å®šæ—¶å™¨å¯åŠ¨äº‹ä»¶ã€‚</p>\n<p><em><strong>è¯·æ³¨æ„</strong>ï¼š</em>å®šæ—¶å™¨å¯åŠ¨äº‹ä»¶ï¼Œåœ¨æµç¨‹éƒ¨ç½²çš„åŒæ—¶å°±å¼€å§‹è®¡æ—¶ã€‚ä¸éœ€è¦è°ƒç”¨startProcessInstanceByXXXå°±ä¼šåœ¨æ—¶é—´å¯åŠ¨ã€‚è°ƒç”¨startProcessInstanceByXXXæ—¶ä¼šåœ¨å®šæ—¶å¯åŠ¨ä¹‹å¤–é¢å¤–å¯åŠ¨ä¸€ä¸ªæµç¨‹ã€‚</p>\n<p><em><strong>è¯·æ³¨æ„</strong>ï¼š</em>å½“éƒ¨ç½²å¸¦æœ‰å®šæ—¶å™¨å¯åŠ¨äº‹ä»¶çš„æµç¨‹çš„æ›´æ–°ç‰ˆæœ¬æ—¶ï¼Œä¸Šä¸€ç‰ˆæœ¬çš„å®šæ—¶å™¨ä½œä¸šä¼šè¢«ç§»é™¤ã€‚è¿™æ˜¯å› ä¸ºé€šå¸¸å¹¶ä¸å¸Œæœ›æ—§ç‰ˆæœ¬çš„æµç¨‹ä»ç„¶è‡ªåŠ¨å¯åŠ¨æ–°çš„æµç¨‹å®ä¾‹ã€‚</p>\n<p>å®šæ—¶å™¨å¯åŠ¨äº‹ä»¶ï¼Œç”¨å…¶ä¸­æœ‰ä¸€ä¸ªé’Ÿè¡¨å›¾æ ‡çš„åœ†åœˆæ¥è¡¨ç¤ºã€‚</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220327223547656.png\"\n                      alt=\"image-20220327223547656\"\n                ></p>\n<p>æ¡ˆä¾‹ï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220327231015715.png\"\n                      alt=\"image-20220327231015715\"\n                ></p>\n<p>åœ¨å®šæ—¶å¯åŠ¨çš„èŠ‚ç‚¹è®¾ç½®æ—¶é—´ï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220327231055237.png\"\n                      alt=\"image-20220327231055237\"\n                ></p>\n<p>å¯ä»¥é€šè¿‡FlowableUIä¸­çš„éƒ¨ç½²æ¥æ¼”ç¤ºï¼Œé€šè¿‡FlowableUIæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œæ²¡æœ‰å¯åŠ¨æµç¨‹å®ä¾‹çš„æƒ…å†µä¸‹ï¼Œåˆ°é‡Œ23:14:14ç§’çš„æ—¶å€™è‡ªåŠ¨å¸®åŠ©æˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªæµç¨‹å®ä¾‹ã€‚</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220327231551538.png\"\n                      alt=\"image-20220327231551538\"\n                ></p>\n<h3 id=\"å®šæ—¶å™¨æ•è·ä¸­é—´äº‹ä»¶\"><a href=\"#å®šæ—¶å™¨æ•è·ä¸­é—´äº‹ä»¶\" class=\"headerlink\" title=\"å®šæ—¶å™¨æ•è·ä¸­é—´äº‹ä»¶\"></a>å®šæ—¶å™¨æ•è·ä¸­é—´äº‹ä»¶</h3><p>å½“ç¬¬ä¸€ä¸ªäººå·¥å¤„ç†å®Œæˆåï¼Œç¬¬äºŒä¸ªäººå·¥å¤„ç†çš„ä»»åŠ¡éœ€è¦åœ¨2022-03-27T23:25:14ä¹‹åæ‰§è¡Œ</p>\n<p>æ¡ˆä¾‹ï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220327232259428.png\"\n                      alt=\"image-20220327232259428\"\n                ></p>\n<p>é€šè¿‡FlowableUIçš„æ¡ˆä¾‹æ¼”ç¤ºæˆ‘ä»¬å¯ä»¥çœ‹åˆ°åä¸€ä¸ªä»»åŠ¡æ˜¯åœ¨å®šæ—¶æ—¶é—´ä¹‹åæ‰§è¡Œçš„</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220327232624091.png\"\n                      alt=\"image-20220327232624091\"\n                ></p>\n<h3 id=\"å®šæ—¶å™¨è¾¹ç•Œäº‹ä»¶\"><a href=\"#å®šæ—¶å™¨è¾¹ç•Œäº‹ä»¶\" class=\"headerlink\" title=\"å®šæ—¶å™¨è¾¹ç•Œäº‹ä»¶\"></a>å®šæ—¶å™¨è¾¹ç•Œäº‹ä»¶</h3><p>äººå·¥ä»»åŠ¡1å¦‚æœåœ¨å®šä¹‰çš„<code>2022-03-27T23:36:14</code>è¿™ä¸ªæ—¶é—´ä¹‹å‰è¿˜æ²¡æœ‰å¤„ç†ï¼Œé‚£ä¹ˆå°±ä¼šè§¦å‘å®šæ—¶è¾¹ç•Œäº‹ä»¶ï¼Œä»è€Œä»äººå·¥ä»»åŠ¡3.</p>\n<p>æ¡ˆä¾‹</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220327233132259.png\"\n                      alt=\"image-20220327233132259\"\n                ></p>\n<p>å‘å¸ƒå¯åŠ¨æµç¨‹</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220327233410596.png\"\n                      alt=\"image-20220327233410596\"\n                ></p>\n<p>ç„¶ååœ¨å¼ ä¸‰è¿™ä¸ªä½ç½®æˆ‘ä»¬ä¸å®Œæˆï¼Œç­‰åˆ°å®šæ—¶åˆ°æ¥ï¼Œè¾¾åˆ°å®šæ—¶çš„æ—¶é—´ï¼Œä»»åŠ¡è¿›å…¥åˆ°äº†äººå·¥å®¡æ‰¹ä¸‰</p>\n<h3 id=\"timeDuration\"><a href=\"#timeDuration\" class=\"headerlink\" title=\"timeDuration\"></a>timeDuration</h3><p>â€‹       åœ¨å®šæ—¶äº‹ä»¶ä¸­æˆ‘ä»¬ä¸€å®šè¦æ”¾å¼€å¦‚ä¸‹çš„é…ç½®ï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220329082431920.png\"\n                      alt=\"image-20220329082431920\"\n                ></p>\n<p>æŒ‡å®šè®¡æ—¶å™¨åœ¨å¯åŠ¨å‰åº”ç­‰å¾…å¤šé•¿çš„æ—¶é—´ï¼Œé¦–å…ˆä¸€å®šæ—¶å™¨å¯åŠ¨äº‹ä»¶ä¸ºä¾‹ï¼š</p>\n<h4 id=\"å¼€å§‹äº‹ä»¶\"><a href=\"#å¼€å§‹äº‹ä»¶\" class=\"headerlink\" title=\"å¼€å§‹äº‹ä»¶\"></a>å¼€å§‹äº‹ä»¶</h4><p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220328200755160.png\"\n                      alt=\"image-20220328200755160\"\n                ></p>\n<p>å¯ä»¥é€šè¿‡FlowableUIçš„åº”ç”¨æ¥éªŒè¯</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220328202242555.png\"\n                      alt=\"image-20220328202242555\"\n                ></p>\n<p>å‘å¸ƒä»»åŠ¡åç„¶åæˆ‘ä»¬ç­‰å¾…ä¸¤åˆ†é’Ÿå°±å¯ä»¥çœ‹åˆ°ä»»åŠ¡åˆ°äº†<code>zhangsan</code>çš„ä½ç½®ã€‚æˆ–è€…æˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨SpringBootæ•´åˆFlowableçš„é¡¹ç›®ä¸­æ·»åŠ å¯¹åº”çš„Controlleræ¥å¤„ç†</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Autowired</span></span><br><span class=\"line\"><span class=\"keyword\">private</span> ProcessEngine processEngine;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@GetMapping(&quot;/deploy&quot;)</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> String <span class=\"title function_\">deploy</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"type\">Deployment</span> <span class=\"variable\">deployment</span> <span class=\"operator\">=</span> processEngine.getRepositoryService().createDeployment()</span><br><span class=\"line\">            .addClasspathResource(<span class=\"string\">&quot;test003.bpmn20.xml&quot;</span>)</span><br><span class=\"line\">            .name(<span class=\"string\">&quot;ç­‰å¾…å®šæ—¶å™¨å¯åŠ¨äº‹ä»¶&quot;</span>)</span><br><span class=\"line\">            .deploy();</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">&quot;éƒ¨ç½²ä»»åŠ¡æˆåŠŸ....&quot;</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>æäº¤è¯·æ±‚å®Œæˆéƒ¨ç½²æ“ä½œ</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220328202918399.png\"\n                      alt=\"image-20220328202918399\"\n                ></p>\n<p>ç”Ÿæˆäº†å¯¹åº”çš„Taskè®°å½•</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220328203621023.png\"\n                      alt=\"image-20220328203621023\"\n                ></p>\n<p><strong>æ³¨æ„</strong>ï¼šåœ¨äº‹ä»¶ä¸­ä¸€å®šè¦å¼€å¯å¼‚æ­¥ä»»åŠ¡ï¼Œä¸ç„¶ç›¸å…³çš„äº‹ä»¶æ˜¯ä¸ä¼šè§¦å‘çš„ï¼</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220328203656000.png\"\n                      alt=\"image-20220328203656000\"\n                ></p>\n<h4 id=\"ä¸­é—´äº‹ä»¶\"><a href=\"#ä¸­é—´äº‹ä»¶\" class=\"headerlink\" title=\"ä¸­é—´äº‹ä»¶\"></a>ä¸­é—´äº‹ä»¶</h4><p>ç„¶åæ¥çœ‹çœ‹ä¸­é—´äº‹ä»¶çš„ç­‰å¾…å®šæ—¶å™¨äº‹ä»¶æ¡ˆä¾‹ï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220328204205453.png\"\n                      alt=\"image-20220328204205453\"\n                ></p>\n<p>æ¡ˆä¾‹ç”±ä¸¤ä¸ªè‡ªåŠ¨ä»»åŠ¡å’Œä¸€ä¸ªå®šæ—¶å™¨ä¸­é—´äº‹ä»¶ç»„æˆï¼Œåœ¨å®šæ—¶ä»»åŠ¡ä¸­ç»‘å®šäº†ä¸¤ä¸ªJavaDelegateçš„Javaç±»æ¥å¤„ç†</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">SignalStartOnedelegate</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">JavaDelegate</span> &#123;</span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">execute</span><span class=\"params\">(DelegateExecution execution)</span> &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;-------è§¦å‘äº†-111--------&gt;&quot;</span>+ LocalDateTime.now().toString());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">SignalStartTwodelegate</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">JavaDelegate</span> &#123;</span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">execute</span><span class=\"params\">(DelegateExecution execution)</span> &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;-------è§¦å‘äº†222---------&gt;&quot;</span>+ LocalDateTime.now().toString());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<p>ç„¶åæµç¨‹å›¾ä¸­çš„å…³è”ä¸º</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220328204349358.png\"\n                      alt=\"image-20220328204349358\"\n                ></p>\n<p>å¦ä¸€ä¸ªç±»ä¼¼ï¼Œç„¶åå®šæ—¶å™¨ä¸­é—´äº‹ä»¶çš„ç­‰å¾…æ—¶é—´è®¾ç½®æ˜¯2åˆ†é’Ÿã€‚æˆ‘ä»¬éƒ¨ç½²åé€šè¿‡Javaä»£ç æ¥æ¼”ç¤ºçœ‹çœ‹</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">test01</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> Exception&#123;</span><br><span class=\"line\">    <span class=\"type\">Deployment</span> <span class=\"variable\">deployment</span> <span class=\"operator\">=</span> processEngine.getRepositoryService().createDeployment()</span><br><span class=\"line\">            .addClasspathResource(<span class=\"string\">&quot;ç­‰å¾…å®šæ—¶å™¨ä¸­é—´äº‹ä»¶.bpmn20.xml&quot;</span>)</span><br><span class=\"line\">            .name(<span class=\"string\">&quot;ç­‰å¾…å®šæ—¶ä¸­é—´äº‹ä»¶...&quot;</span>)</span><br><span class=\"line\">            .deploy();</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;-----&quot;</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ç„¶åæˆ‘ä»¬éœ€è¦å¯åŠ¨æµç¨‹å®ä¾‹ï¼Œä¹‹åç­‰å¾…ä¸¤åˆ†é’Ÿçœ‹æ•ˆæœ</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * å¯åŠ¨æµç¨‹å®ä¾‹</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">startProcessInstanceByKey</span><span class=\"params\">()</span>  <span class=\"keyword\">throws</span> Exception&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    processEngine.getRuntimeService()</span><br><span class=\"line\">            .startProcessInstanceById(<span class=\"string\">&quot;Test04:1:325edb10-ae95-11ec-a77f-c03c59ad2248&quot;</span>);</span><br><span class=\"line\">    <span class=\"comment\">// éœ€è¦åœ¨æ­¤é˜»å¡æ¯”ç­‰å¾…é•¿çš„æ—¶é—´</span></span><br><span class=\"line\">    TimeUnit.MINUTES.sleep(<span class=\"number\">3</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220328205718521.png\"\n                      alt=\"image-20220328205718521\"\n                ></p>\n<h4 id=\"è¾¹ç•Œäº‹ä»¶\"><a href=\"#è¾¹ç•Œäº‹ä»¶\" class=\"headerlink\" title=\"è¾¹ç•Œäº‹ä»¶\"></a>è¾¹ç•Œäº‹ä»¶</h4><p>æœ€åæˆ‘ä»¬æ¥çœ‹çœ‹è¾¹ç•Œäº‹ä»¶ä¸­çš„ç­‰å¾…å®šæ—¶å™¨çš„å¤„ç†ï¼Œæ¡ˆä¾‹ä¸ºï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220328210150212.png\"\n                      alt=\"image-20220328210150212\"\n                ></p>\n<p>è¯¥æ¡ˆä¾‹ç”±ä¸€ä¸ªäººå·¥å®¡æ ¸+ä¸¤ä¸ªè‡ªåŠ¨ä»»åŠ¡+å®šæ—¶å™¨è¾¹ç•Œäº‹ä»¶ç»„æˆï¼Œè‡ªåŠ¨ä»»åŠ¡ä¸€ç»‘å®šçš„JavaDelegateæ˜¯</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">SignalStartOnedelegate</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">JavaDelegate</span> &#123;</span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">execute</span><span class=\"params\">(DelegateExecution execution)</span> &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;-------è§¦å‘äº†-111--------&gt;&quot;</span>+ LocalDateTime.now().toString());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>è‡ªåŠ¨ä»»åŠ¡äºŒç»‘å®šçš„JavaDelegateæ˜¯</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">SignalStartTwodelegate</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">JavaDelegate</span> &#123;</span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">execute</span><span class=\"params\">(DelegateExecution execution)</span> &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;-------è§¦å‘äº†222---------&gt;&quot;</span>+ LocalDateTime.now().toString());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>å®šæ—¶å™¨è¾¹ç•Œäº‹ä»¶è®¾ç½®çš„æ˜¯30Sï¼Œä¹Ÿå°±æ˜¯å¦‚æœäººå·¥å®¡æ ¸åœ¨30Sè¿˜æ²¡å¤„ç†å°±ä¼šè§¦å‘è¾¹ç•Œäº‹ä»¶ï¼šé€šè¿‡ä»£ç æ¥æ¼”ç¤ºï¼Œéƒ¨ç½²æµç¨‹åéœ€è¦å¯åŠ¨æµç¨‹ï¼Œç„¶åç­‰å¾…30Sçœ‹æ§åˆ¶å°è¾“å‡º</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">test01</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> Exception&#123;</span><br><span class=\"line\">    <span class=\"type\">Deployment</span> <span class=\"variable\">deployment</span> <span class=\"operator\">=</span> processEngine.getRepositoryService().createDeployment()</span><br><span class=\"line\">            .addClasspathResource(<span class=\"string\">&quot;ç­‰å¾…å®šæ—¶å™¨è¾¹ç•Œäº‹ä»¶.bpmn20.xml&quot;</span>)</span><br><span class=\"line\">            .name(<span class=\"string\">&quot;ç­‰å¾…å®šæ—¶å™¨è¾¹ç•Œäº‹ä»¶...&quot;</span>)</span><br><span class=\"line\">            .deploy();</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;-----&quot;</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * å¯åŠ¨æµç¨‹å®ä¾‹</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">startProcessInstanceByKey</span><span class=\"params\">()</span>  <span class=\"keyword\">throws</span> Exception&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    processEngine.getRuntimeService()</span><br><span class=\"line\">            .startProcessInstanceById(<span class=\"string\">&quot;test05:1:c46f83bf-ae97-11ec-b055-c03c59ad2248&quot;</span>);</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;å¼€å§‹å¯åŠ¨çš„æ—¶é—´ï¼š&quot;</span> + LocalDateTime.now().toString());</span><br><span class=\"line\">    <span class=\"comment\">// éœ€è¦åœ¨æ­¤é˜»å¡æ¯”ç­‰å¾…é•¿çš„æ—¶é—´</span></span><br><span class=\"line\">    TimeUnit.MINUTES.sleep(<span class=\"number\">3</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ç­‰å¾…æ§åˆ¶å°è¾“å‡ºï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220328210905204.png\"\n                      alt=\"image-20220328210905204\"\n                ></p>\n<p>å°ç»“ï¼štimeDurationåœ¨ä¸‰ç§å®šæ—¶å™¨çš„äº‹ä»¶ä¸­</p>\n<ul>\n<li>å®šæ—¶å™¨å¯åŠ¨äº‹ä»¶ï¼šç­‰å¾…æŒ‡å®šæ—¶é—´åå¯åŠ¨æµç¨‹å®ä¾‹</li>\n<li>å®šæ—¶å™¨ä¸­é—´äº‹ä»¶ï¼šABä»»åŠ¡ä¸­é—´æœ‰ä¸ªå®šæ—¶å™¨ä¸­é—´äº‹ä»¶ï¼ŒAä»»åŠ¡å¤„ç†åéœ€è¦ç­‰å¾…å¯¹åº”çš„æ—¶é—´æ‰èƒ½æµè½¬åˆ°Bå¤„</li>\n<li>å®šæ—¶å™¨è¾¹ç•Œäº‹ä»¶ï¼šä»»åŠ¡Aç»‘å®šäº†å®šæ—¶å™¨è¾¹ç•Œäº‹ä»¶åï¼Œå¦‚æœåœ¨ç­‰å¾…æ—¶é—´ä»¥å†…Aæ²¡æœ‰å¤„ç†ä»»åŠ¡ï¼Œé‚£ä¹ˆå°±ä¼šè§¦å‘å¯¹åº”çš„è¾¹ç•Œäº‹ä»¶</li>\n</ul>\n<h3 id=\"timeCycle\"><a href=\"#timeCycle\" class=\"headerlink\" title=\"timeCycle\"></a>timeCycle</h3><p>æŒ‡å®šé‡å¤å‘¨æœŸï¼Œå¯ç”¨äºå‘¨æœŸæ€§å¯åŠ¨æµç¨‹ï¼Œæˆ–è€…ä¸ºè¶…æœŸç”¨æˆ·ä»»åŠ¡å¤šæ¬¡å‘é€æé†’,è¿™ä¸ªå…ƒç´ å¯ä»¥ä½¿ç”¨ä¸¤ç§æ ¼å¼</p>\n<ul>\n<li>ç¬¬ä¸€ç§æ˜¯æŒ‰ç…§<a class=\"link\"   href=\"http://en.wikipedia.org/wiki/ISO_8601#Repeating_intervals\" >ISO 8601<i class=\"fas fa-external-link-alt\"></i></a>æ ‡å‡†å®šä¹‰çš„å¾ªç¯æ—¶é—´å‘¨æœŸã€‚ä¾‹å¦‚ï¼ˆä¸‰æ¬¡é‡å¤é—´éš”ï¼Œæ¯æ¬¡é—´éš”ä¸º10å°æ—¶ï¼‰ï¼šR3&#x2F;PT10H</li>\n<li>ä¹Ÿå¯ä»¥ä½¿ç”¨<em>timeCycle</em>çš„å¯é€‰å±æ€§<em>endDate</em>ï¼Œæˆ–è€…åƒè¿™æ ·ç›´æ¥å†™åœ¨æ—¶é—´è¡¨è¾¾å¼çš„ç»“å°¾ï¼š<code>R3/PT10H/$&#123;EndDate&#125;</code>ã€‚ å½“åˆ°è¾¾endDateæ—¶ï¼Œåº”ç”¨ä¼šåœæ­¢ï¼Œå¹¶ä¸ºè¯¥ä»»åŠ¡åˆ›å»ºå…¶ä»–ä½œä¸š</li>\n<li>ä¹Ÿå¯ä»¥é€šè¿‡cronè¡¨è¾¾å¼æ¥å¤„ç†</li>\n</ul>\n<h4 id=\"å¼€å§‹äº‹ä»¶-1\"><a href=\"#å¼€å§‹äº‹ä»¶-1\" class=\"headerlink\" title=\"å¼€å§‹äº‹ä»¶\"></a>å¼€å§‹äº‹ä»¶</h4><p>ç¼–å†™æ¡ˆä¾‹æ¥æ¼”ç¤ºï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220328213218525.png\"\n                      alt=\"image-20220328213218525\"\n                ></p>\n<p>é‡å¤æ—¶é—´è®¾ç½®ä¸º R3PT30S é‡å¤3æ¬¡ï¼Œé—´éš”30æè¿°ï¼Œè‡ªåŠ¨ä»»åŠ¡ç»‘å®šçš„æ˜¯JavaDelegate</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">SignalStartOnedelegate</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">JavaDelegate</span> &#123;</span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">execute</span><span class=\"params\">(DelegateExecution execution)</span> &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;-------è§¦å‘äº†-111--------&gt;&quot;</span>+ LocalDateTime.now().toString());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220328213330813.png\"\n                      alt=\"image-20220328213330813\"\n                ></p>\n<p>ç„¶åæˆ‘ä»¬éƒ¨ç½²çœ‹æ•ˆæœ</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">test01</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> Exception&#123;</span><br><span class=\"line\">    <span class=\"type\">Deployment</span> <span class=\"variable\">deployment</span> <span class=\"operator\">=</span> processEngine.getRepositoryService().createDeployment()</span><br><span class=\"line\">            .addClasspathResource(<span class=\"string\">&quot;é‡å¤å¯åŠ¨äº‹ä»¶.bpmn20.xml&quot;</span>)</span><br><span class=\"line\">            .name(<span class=\"string\">&quot;ç­‰å¾…å®šæ—¶å™¨è¾¹ç•Œäº‹ä»¶...&quot;</span>)</span><br><span class=\"line\">            .deploy();</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;-----&quot;</span>);</span><br><span class=\"line\">    <span class=\"comment\">// éœ€è¦åœ¨æ­¤é˜»å¡æ¯”ç­‰å¾…é•¿çš„æ—¶é—´</span></span><br><span class=\"line\">    TimeUnit.MINUTES.sleep(<span class=\"number\">3</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220328213955271.png\"\n                      alt=\"image-20220328213955271\"\n                ></p>\n<p>ç„¶åæˆ‘ä»¬å†æŒ‡å®šä¸‹endDateæ¥çœ‹çœ‹æ¡ˆä¾‹ï¼Œç›´æ¥å¯ä»¥åœ¨xmlä¸­æ¥å¤„ç†</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">timerEventDefinition</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">timeCycle</span>&gt;</span>R3/PT30S/2022-03-28T21:46:11+00:00<span class=\"tag\">&lt;/<span class=\"name\">timeCycle</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">timerEventDefinition</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220328214459137.png\"\n                      alt=\"image-20220328214459137\"\n                ></p>\n<p>æ­¤å¤–è¿˜å¯ä»¥é€šè¿‡cronè¡¨è¾¾å¼æ¥å¤„ç†ï¼š</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">0 0/5 * * * ?</span><br></pre></td></tr></table></figure>\n\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220328215255141.png\"\n                      alt=\"image-20220328215255141\"\n                ></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220328215340678.png\"\n                      alt=\"image-20220328215340678\"\n                ></p>\n<h4 id=\"ä¸­é—´äº‹ä»¶-1\"><a href=\"#ä¸­é—´äº‹ä»¶-1\" class=\"headerlink\" title=\"ä¸­é—´äº‹ä»¶\"></a>ä¸­é—´äº‹ä»¶</h4><p>&amp;emsp;timeCycleä½œä¸ºä¸­é—´äº‹ä»¶çš„è¯ï¼Œåªä¼šæ‰§è¡Œä¸€æ¬¡ï¼Œæ¡ˆä¾‹å¦‚ä¸‹</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220328225250878.png\"\n                      alt=\"image-20220328225250878\"\n                ></p>\n<p>æ¡ˆä¾‹ä¸­çš„è‡ªåŠ¨ä»»åŠ¡ä¸€äºŒå¯¹åº”ç»‘å®šå¦‚ä¸‹çš„JavaDelegate.</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">SignalStartOnedelegate</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">JavaDelegate</span> &#123;</span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">execute</span><span class=\"params\">(DelegateExecution execution)</span> &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;-------è§¦å‘äº†-111--------&gt;&quot;</span>+ LocalDateTime.now().toString());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">SignalStartTwodelegate</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">JavaDelegate</span> &#123;</span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">execute</span><span class=\"params\">(DelegateExecution execution)</span> &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;-------è§¦å‘äº†222---------&gt;&quot;</span>+ LocalDateTime.now().toString());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ä¸­é—´äº‹ä»¶çš„è®¾ç½®ä¸º<code>R3/PT30S</code> å¾ªç¯3æ¬¡ï¼Œé—´éš”30ç§’æ‰§è¡Œï¼Œä½†æ˜¯è¿™æ˜¯ä¸­é—´äº‹ä»¶ï¼Œå…¶å®åªä¼šæ‰§è¡Œä¸€æ¬¡ï¼Œæˆ‘æ¥çœ‹æ•ˆæœ</p>\n<p>éƒ¨ç½²åå¯åŠ¨</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Autowired</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> ProcessEngine processEngine;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">test01</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> Exception&#123;</span><br><span class=\"line\">        <span class=\"type\">Deployment</span> <span class=\"variable\">deployment</span> <span class=\"operator\">=</span> processEngine.getRepositoryService().createDeployment()</span><br><span class=\"line\">                .addClasspathResource(<span class=\"string\">&quot;å¾ªç¯ä¸­é—´äº‹ä»¶.bpmn20.xml&quot;</span>)</span><br><span class=\"line\">                .name(<span class=\"string\">&quot;å¾ªç¯ä¸­é—´äº‹ä»¶...&quot;</span>)</span><br><span class=\"line\">                .deploy();</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;-----&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * å¯åŠ¨æµç¨‹å®ä¾‹</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">startProcessInstanceByKey</span><span class=\"params\">()</span>  <span class=\"keyword\">throws</span> Exception&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        processEngine.getRuntimeService()</span><br><span class=\"line\">                .startProcessInstanceById(<span class=\"string\">&quot;cycle-middle-event:1:3456ade8-aea7-11ec-9064-c03c59ad2248&quot;</span>);</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;å¼€å§‹å¯åŠ¨çš„æ—¶é—´ï¼š&quot;</span> + LocalDateTime.now().toString());</span><br><span class=\"line\">        <span class=\"comment\">// éœ€è¦åœ¨æ­¤é˜»å¡æ¯”ç­‰å¾…é•¿çš„æ—¶é—´</span></span><br><span class=\"line\">        TimeUnit.MINUTES.sleep(<span class=\"number\">3</span>);</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220328225931465.png\"\n                      alt=\"image-20220328225931465\"\n                ></p>\n<h4 id=\"è¾¹ç•Œäº‹ä»¶-1\"><a href=\"#è¾¹ç•Œäº‹ä»¶-1\" class=\"headerlink\" title=\"è¾¹ç•Œäº‹ä»¶\"></a>è¾¹ç•Œäº‹ä»¶</h4><p>åœ¨è¾¹ç•Œäº‹ä»¶ä¸­ï¼Œå®šä¹‰äº†å¾ªç¯æ¡ä»¶<code>R3/PT30S</code>ç†è®ºä¸Šè¦å¾ªç¯3æ¬¡ï¼Œé—´éš”30Sï¼Œå•å…¶å®ä¹Ÿåªä¼šæ‰§è¡Œä¸€æ¬¡ï¼Œæ¥çœ‹æ¡ˆä¾‹</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220328231838967.png\"\n                      alt=\"image-20220328231838967\"\n                ></p>\n<p>æ¡ˆä¾‹ä¸Šé¢çš„ç­‰å¾…æ—¶é—´çš„æ˜¯ä¸€æ ·çš„ï¼Œåªæ˜¯è¾¹ç•Œäº‹ä»¶æ˜¯30S</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220328231955441.png\"\n                      alt=\"image-20220328231955441\"\n                ></p>\n<p>ç„¶åæˆ‘ä»¬éƒ¨ç½²å¯åŠ¨æµç¨‹çœ‹æ•ˆæœ</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220329094741327.png\"\n                      alt=\"image-20220329094741327\"\n                ></p>\n<p>æ€»ç»“ï¼šå¾ªç¯è®¾å®š</p>\n<ul>\n<li>å¯åŠ¨äº‹ä»¶ï¼šæ ¹æ®è®¾ç½®å¾ªç¯å¯åŠ¨æµç¨‹å®ä¾‹</li>\n<li>ä¸­é—´äº‹ä»¶ï¼šå³ä½¿è®¾ç½®äº†å¾ªç¯æ—¶é—´ä¹Ÿåªä¼šè§¦å‘å¼‚å¸¸</li>\n<li>è¾¹ç•Œäº‹ä»¶ï¼šå³ä½¿è®¾ç½®äº†å¾ªç¯æ—¶é—´ä¹Ÿåªä¼šè§¦å‘å¼‚å¸¸</li>\n</ul>\n<h2 id=\"æ¶ˆæ¯äº‹ä»¶\"><a href=\"#æ¶ˆæ¯äº‹ä»¶\" class=\"headerlink\" title=\"æ¶ˆæ¯äº‹ä»¶\"></a>æ¶ˆæ¯äº‹ä»¶</h2><p>æ¶ˆæ¯äº‹ä»¶ï¼ˆmessage eventï¼‰ï¼Œæ˜¯æŒ‡å¼•ç”¨å…·åæ¶ˆæ¯çš„äº‹ä»¶ã€‚æ¶ˆæ¯å…·æœ‰åå­—ä¸è½½è·ã€‚ä¸ä¿¡å·ä¸åŒï¼Œæ¶ˆæ¯äº‹ä»¶åªæœ‰ä¸€ä¸ªæ¥æ”¶è€…</p>\n<h3 id=\"å¯åŠ¨äº‹ä»¶\"><a href=\"#å¯åŠ¨äº‹ä»¶\" class=\"headerlink\" title=\"å¯åŠ¨äº‹ä»¶\"></a>å¯åŠ¨äº‹ä»¶</h3><p>æ¶ˆæ¯å¯åŠ¨äº‹ä»¶ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬é€šè¿‡æ¥æ”¶åˆ°æŸäº›æ¶ˆæ¯åæ¥å¯åŠ¨æµç¨‹å®ä¾‹ï¼Œæ¯”å¦‚æ¥æ”¶åˆ°äº†ä¸€å°é‚®ä»¶ï¼Œä¸€æ¡çŸ­ä¿¡ç­‰ï¼Œå…·ä½“é€šè¿‡æ¡ˆä¾‹æ¥è®²è§£</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220329103837021.png\"\n                      alt=\"image-20220329103837021\"\n                ></p>\n<p>æˆ‘ä»¬éœ€è¦å…ˆå®šä¹‰ä¸€ä¸ªæ¶ˆæ¯</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220329105849732.png\"\n                      alt=\"image-20220329105849732\"\n                ></p>\n<p>ç„¶ååœ¨æ¶ˆæ¯å¼€å§‹èŠ‚ç‚¹å‡ºå¼•ç”¨</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220329105922977.png\"\n                      alt=\"image-20220329105922977\"\n                ></p>\n<p>ç„¶åé€šè¿‡ä»£ç æ¥å¤„ç†ï¼Œéƒ¨ç½²å’Œå¯åŠ¨</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Deploy</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"title function_\">testDeploy</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> Exception &#123;</span><br><span class=\"line\">    <span class=\"comment\">//RepositoryService repositoryService = processEngine.getRepositoryService();</span></span><br><span class=\"line\">    <span class=\"type\">Deployment</span> <span class=\"variable\">deploy</span> <span class=\"operator\">=</span> repositoryService.createDeployment()</span><br><span class=\"line\">            .addClasspathResource(<span class=\"string\">&quot;æ¶ˆæ¯å¯åŠ¨äº‹ä»¶.bpmn20.xml&quot;</span>)</span><br><span class=\"line\">            .name(<span class=\"string\">&quot;æ¶ˆæ¯å¯åŠ¨äº‹ä»¶&quot;</span>)</span><br><span class=\"line\">            .deploy();</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;deploy.getId() = &quot;</span> + deploy.getId());</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;deploy.getName() = &quot;</span> + deploy.getName());</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;éƒ¨ç½²å¼€å§‹çš„æ—¶é—´ï¼š&quot;</span> + <span class=\"keyword\">new</span> <span class=\"title class_\">Date</span>());</span><br><span class=\"line\">    <span class=\"comment\">//TimeUnit.MINUTES.sleep(3);</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>éƒ¨ç½²åä¸ä¼šè‡ªåŠ¨å¯åŠ¨ï¼Œæˆ‘ä»¬éœ€è¦æ¥æ”¶ç›¸å…³çš„ä¿¡æ¯åæ¥è§¦å‘ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  * é€šè¿‡æ¶ˆæ¯æ¥å¯åŠ¨ä¸€ä¸ªæµç¨‹å®ä¾‹</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\"> <span class=\"meta\">@Test</span></span><br><span class=\"line\"> <span class=\"keyword\">void</span> <span class=\"title function_\">startFlow</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> Exception&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// runtimeService.startProcessInstanceById(&quot;event006:1:0532e730-af02-11ec-8cf3-c03c59ad2248&quot;);</span></span><br><span class=\"line\">    <span class=\"comment\">// æ³¨æ„ï¼šå‘é€æ¶ˆæ¯å‘é€çš„åº”è¯¥æ˜¯æ¶ˆæ¯çš„åç§°è€Œä¸æ˜¯æ¶ˆæ¯çš„ID</span></span><br><span class=\"line\">     runtimeService.startProcessInstanceByMessage(<span class=\"string\">&quot;ç¬¬ä¸€ä¸ªæ¶ˆæ¯&quot;</span>);</span><br><span class=\"line\">     System.out.println(<span class=\"string\">&quot;å¯åŠ¨æ—¶é—´ï¼š&quot;</span> + <span class=\"keyword\">new</span> <span class=\"title class_\">Date</span>());</span><br><span class=\"line\">     <span class=\"comment\">// æˆ‘ä»¬å¾—ä¿è¯å®¹å™¨çš„è¿è¡Œï¼Œæ‰€ä»¥éœ€è¦é˜»å¡</span></span><br><span class=\"line\">     TimeUnit.MINUTES.sleep(<span class=\"number\">1</span>);</span><br><span class=\"line\"> &#125;</span><br></pre></td></tr></table></figure>\n\n\n\n\n\n<p><strong>æ³¨æ„</strong>ï¼šå‘é€æ¶ˆæ¯å‘é€çš„åº”è¯¥æ˜¯æ¶ˆæ¯çš„åç§°è€Œä¸æ˜¯æ¶ˆæ¯çš„IDï¼ŒæŠ¥é”™å¦‚ä¸‹ï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220329104823537.png\"\n                      alt=\"image-20220329104823537\"\n                ></p>\n<h3 id=\"ä¸­é—´äº‹ä»¶-2\"><a href=\"#ä¸­é—´äº‹ä»¶-2\" class=\"headerlink\" title=\"ä¸­é—´äº‹ä»¶\"></a>ä¸­é—´äº‹ä»¶</h3><p>æ¶ˆæ¯ä¸­é—´äº‹ä»¶å°±æ˜¯åœ¨æµç¨‹è¿ä½œä¸­éœ€è¦æ¶ˆæ¯æ¥è§¦å‘çš„åœºæ™¯ï¼Œæ¡ˆä¾‹æ¼”ç¤ºï¼Œ<code>è‡ªåŠ¨æµç¨‹1</code>å¤„ç†å®Œæˆåï¼Œéœ€è¦æ¥æ”¶ç‰¹å®šçš„æ¶ˆæ¯ä¹‹åæ‰èƒ½è¿›å…¥åˆ°<code>è‡ªåŠ¨æµç¨‹2</code></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220329111412619.png\"\n                      alt=\"image-20220329111412619\"\n                ></p>\n<p>æ¶ˆæ¯ä¸­é—´äº‹ä»¶ç»‘å®šçš„æ¶ˆæ¯ä¸º</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220329111446959.png\"\n                      alt=\"image-20220329111446959\"\n                ></p>\n<p>ç„¶åé€šè¿‡ä»£ç æ¥æ¼”ç¤º</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  * Deploy</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\"> <span class=\"meta\">@Test</span></span><br><span class=\"line\"> <span class=\"keyword\">void</span> <span class=\"title function_\">testDeploy</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> Exception &#123;</span><br><span class=\"line\">     <span class=\"comment\">//RepositoryService repositoryService = processEngine.getRepositoryService();</span></span><br><span class=\"line\">     <span class=\"type\">Deployment</span> <span class=\"variable\">deploy</span> <span class=\"operator\">=</span> repositoryService.createDeployment()</span><br><span class=\"line\">             .addClasspathResource(<span class=\"string\">&quot;æ¶ˆæ¯ä¸­é—´äº‹ä»¶.bpmn20.xml&quot;</span>)</span><br><span class=\"line\">             .name(<span class=\"string\">&quot;æ¶ˆæ¯ä¸­é—´äº‹ä»¶&quot;</span>)</span><br><span class=\"line\">             .deploy();</span><br><span class=\"line\">     System.out.println(<span class=\"string\">&quot;deploy.getId() = &quot;</span> + deploy.getId());</span><br><span class=\"line\">     System.out.println(<span class=\"string\">&quot;deploy.getName() = &quot;</span> + deploy.getName());</span><br><span class=\"line\">     System.out.println(<span class=\"string\">&quot;éƒ¨ç½²å¼€å§‹çš„æ—¶é—´ï¼š&quot;</span> + <span class=\"keyword\">new</span> <span class=\"title class_\">Date</span>());</span><br><span class=\"line\">     <span class=\"comment\">//TimeUnit.MINUTES.sleep(3);</span></span><br><span class=\"line\"> &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"> <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  * é€šè¿‡æ¶ˆæ¯æ¥å¯åŠ¨ä¸€ä¸ªæµç¨‹å®ä¾‹</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\"> <span class=\"meta\">@Test</span></span><br><span class=\"line\"> <span class=\"keyword\">void</span> <span class=\"title function_\">startFlow</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> Exception&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">     runtimeService.startProcessInstanceById(<span class=\"string\">&quot;event008:1:9217aa5e-af0e-11ec-b11f-c03c59ad2248&quot;</span>);</span><br><span class=\"line\">    <span class=\"comment\">// æ³¨æ„ï¼šå‘é€æ¶ˆæ¯å‘é€çš„åº”è¯¥æ˜¯æ¶ˆæ¯çš„åç§°è€Œä¸æ˜¯æ¶ˆæ¯çš„ID</span></span><br><span class=\"line\">     <span class=\"comment\">//runtimeService.startProcessInstanceByMessage(&quot;ç¬¬ä¸€ä¸ªæ¶ˆæ¯&quot;);</span></span><br><span class=\"line\">     System.out.println(<span class=\"string\">&quot;å¯åŠ¨æ—¶é—´ï¼š&quot;</span> + <span class=\"keyword\">new</span> <span class=\"title class_\">Date</span>());</span><br><span class=\"line\">     <span class=\"comment\">// æˆ‘ä»¬å¾—ä¿è¯å®¹å™¨çš„è¿è¡Œï¼Œæ‰€ä»¥éœ€è¦é˜»å¡</span></span><br><span class=\"line\">     <span class=\"comment\">//TimeUnit.MINUTES.sleep(1);</span></span><br><span class=\"line\"> &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"> <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  * ä¸­é—´äº‹ä»¶-å‘å¸ƒæ¶ˆæ¯</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\"> <span class=\"meta\">@Test</span></span><br><span class=\"line\"> <span class=\"keyword\">void</span> <span class=\"title function_\">recevedMsg</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">     <span class=\"comment\">// éœ€è¦æŸ¥è¯¢åˆ°executionId</span></span><br><span class=\"line\">     <span class=\"type\">String</span> <span class=\"variable\">processExecutionId</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;b5349e22-af0e-11ec-93e6-c03c59ad2248&quot;</span>;</span><br><span class=\"line\">     <span class=\"comment\">// æˆ‘ä»¬éœ€è¦æ ¹æ®æµç¨‹å®ä¾‹ç¼–å·æ‰¾åˆ°å¯¹åº”çš„æ‰§è¡Œç¼–å·</span></span><br><span class=\"line\">    <span class=\"comment\">/* Execution execution = runtimeService.createExecutionQuery()</span></span><br><span class=\"line\"><span class=\"comment\">             .processInstanceId(&quot;event008:1:9217aa5e-af0e-11ec-b11f-c03c59ad2248&quot;)</span></span><br><span class=\"line\"><span class=\"comment\">             .singleResult();</span></span><br><span class=\"line\"><span class=\"comment\">     System.out.println(&quot;-----------&gt;&quot;+execution.getId());*/</span></span><br><span class=\"line\">     runtimeService.messageEventReceived(<span class=\"string\">&quot;ç¬¬äºŒä¸ªæ¶ˆæ¯&quot;</span>,processExecutionId);</span><br><span class=\"line\"> &#125;</span><br></pre></td></tr></table></figure>\n\n<p>å¯ä»¥çœ‹åˆ°çš„è¾“å‡ºæ•ˆæœ</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220329112435376.png\"\n                      alt=\"image-20220329112435376\"\n                ></p>\n<h3 id=\"è¾¹ç•Œäº‹ä»¶-2\"><a href=\"#è¾¹ç•Œäº‹ä»¶-2\" class=\"headerlink\" title=\"è¾¹ç•Œäº‹ä»¶\"></a>è¾¹ç•Œäº‹ä»¶</h3><p>æ¶ˆæ¯è¾¹ç•Œäº‹ä»¶ï¼Œå¦‚æœåœ¨æ¶ˆæ¯è§¦å‘å‰è¿˜æ²¡æœ‰ï¼Œæ¡ˆä¾‹æ¼”ç¤ºï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220329113848978.png\"\n                      alt=\"image-20220329113848978\"\n                ></p>\n<p>éƒ¨ç½²æµç¨‹</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Deploy</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"title function_\">testDeploy</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> Exception &#123;</span><br><span class=\"line\">    <span class=\"comment\">//RepositoryService repositoryService = processEngine.getRepositoryService();</span></span><br><span class=\"line\">    <span class=\"type\">Deployment</span> <span class=\"variable\">deploy</span> <span class=\"operator\">=</span> repositoryService.createDeployment()</span><br><span class=\"line\">            .addClasspathResource(<span class=\"string\">&quot;æ¶ˆæ¯è¾¹ç•Œäº‹ä»¶.bpmn20.xml&quot;</span>)</span><br><span class=\"line\">            .name(<span class=\"string\">&quot;æ¶ˆæ¯è¾¹ç•Œäº‹ä»¶&quot;</span>)</span><br><span class=\"line\">            .deploy();</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;deploy.getId() = &quot;</span> + deploy.getId());</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;deploy.getName() = &quot;</span> + deploy.getName());</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;éƒ¨ç½²å¼€å§‹çš„æ—¶é—´ï¼š&quot;</span> + <span class=\"keyword\">new</span> <span class=\"title class_\">Date</span>());</span><br><span class=\"line\">    <span class=\"comment\">//TimeUnit.MINUTES.sleep(3);</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * é€šè¿‡æ¶ˆæ¯æ¥å¯åŠ¨ä¸€ä¸ªæµç¨‹å®ä¾‹</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"title function_\">startFlow</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> Exception&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    runtimeService.startProcessInstanceById(<span class=\"string\">&quot;event009:1:f2096787-af11-11ec-b290-c03c59ad2248&quot;</span>);</span><br><span class=\"line\">   <span class=\"comment\">// æ³¨æ„ï¼šå‘é€æ¶ˆæ¯å‘é€çš„åº”è¯¥æ˜¯æ¶ˆæ¯çš„åç§°è€Œä¸æ˜¯æ¶ˆæ¯çš„ID</span></span><br><span class=\"line\">    <span class=\"comment\">//runtimeService.startProcessInstanceByMessage(&quot;ç¬¬ä¸€ä¸ªæ¶ˆæ¯&quot;);</span></span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;å¯åŠ¨æ—¶é—´ï¼š&quot;</span> + <span class=\"keyword\">new</span> <span class=\"title class_\">Date</span>());</span><br><span class=\"line\">    <span class=\"comment\">// æˆ‘ä»¬å¾—ä¿è¯å®¹å™¨çš„è¿è¡Œï¼Œæ‰€ä»¥éœ€è¦é˜»å¡</span></span><br><span class=\"line\">    <span class=\"comment\">//TimeUnit.MINUTES.sleep(1);</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>éƒ¨ç½²æµç¨‹åå¯åŠ¨æµç¨‹å®ä¾‹ä¼šè¿è½¬åˆ°</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220329114038773.png\"\n                      alt=\"image-20220329114038773\"\n                ></p>\n<p>å¦‚æœäººå·¥å¤„ç†åœ¨æ¶ˆæ¯è®¢é˜…å‰æ²¡æœ‰å¤„ç†å°±ä¼šè§¦å‘è¾¹ç•Œäº‹ä»¶</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * è¾¹ç•Œäº‹ä»¶-å‘å¸ƒæ¶ˆæ¯</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"title function_\">recevedMsg</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// éœ€è¦æŸ¥è¯¢åˆ°executionId</span></span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">processExecutionId</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;1d503361-af12-11ec-89a4-c03c59ad2248&quot;</span>;</span><br><span class=\"line\">    <span class=\"comment\">// æˆ‘ä»¬éœ€è¦æ ¹æ®æµç¨‹å®ä¾‹ç¼–å·æ‰¾åˆ°å¯¹åº”çš„æ‰§è¡Œç¼–å·</span></span><br><span class=\"line\">   <span class=\"comment\">/* Execution execution = runtimeService.createExecutionQuery()</span></span><br><span class=\"line\"><span class=\"comment\">            .processInstanceId(&quot;event008:1:9217aa5e-af0e-11ec-b11f-c03c59ad2248&quot;)</span></span><br><span class=\"line\"><span class=\"comment\">            .singleResult();</span></span><br><span class=\"line\"><span class=\"comment\">    System.out.println(&quot;-----------&gt;&quot;+execution.getId());*/</span></span><br><span class=\"line\">    runtimeService.messageEventReceived(<span class=\"string\">&quot;ç¬¬ä¸‰ä¸ªæ¶ˆæ¯&quot;</span>,processExecutionId);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220329114505074.png\"\n                      alt=\"image-20220329114505074\"\n                ></p>\n<h2 id=\"é”™è¯¯äº‹ä»¶\"><a href=\"#é”™è¯¯äº‹ä»¶\" class=\"headerlink\" title=\"é”™è¯¯äº‹ä»¶\"></a>é”™è¯¯äº‹ä»¶</h2><p>é”™è¯¯äº‹ä»¶å¯ä»¥ç”¨åšä¸€ä¸ªæµç¨‹çš„å¼€å§‹äº‹ä»¶æˆ–è€…ä½œä¸ºä¸€ä¸ªä»»åŠ¡æˆ–è€…å­æµç¨‹çš„è¾¹ç•Œäº‹ä»¶ï¼Œé”™è¯¯äº‹ä»¶æ²¡æœ‰æä¾›ä½œç”¨ä¸­é—´äº‹ä»¶çš„åŠŸèƒ½ï¼Œè¿™ä¸€ç‚¹å’Œå‰é¢ä»‹ç»çš„å®šæ—¶å™¨äº‹ä»¶å’Œæ¶ˆæ¯äº‹ä»¶è¿˜æœ‰åŒºåˆ«çš„ã€‚</p>\n<h3 id=\"å¼€å§‹äº‹ä»¶-2\"><a href=\"#å¼€å§‹äº‹ä»¶-2\" class=\"headerlink\" title=\"å¼€å§‹äº‹ä»¶\"></a>å¼€å§‹äº‹ä»¶</h3><p>é”™è¯¯å¯åŠ¨äº‹ä»¶ï¼ˆerror start eventï¼‰ï¼Œå¯ç”¨äºè§¦å‘äº‹ä»¶å­æµç¨‹ï¼ˆEvent Sub-Processï¼‰ã€‚<strong>é”™è¯¯å¯åŠ¨äº‹ä»¶ä¸èƒ½ç”¨äºå¯åŠ¨æµç¨‹å®ä¾‹</strong>ã€‚</p>\n<p>é”™è¯¯å¯åŠ¨äº‹ä»¶æ€»æ˜¯ä¸­æ–­ã€‚æˆ‘ä»¬é€šè¿‡æ¡ˆä¾‹æ¥ä»‹ç»ã€‚æ­¤å¤„æˆ‘ä»¬ç”¨Eclipseæ¥ç»˜åˆ¶æµç¨‹å›¾ï¼Œç†Ÿæ‚‰ä¸‹Eclipseå·¥å…·</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220329235608917.png\"\n                      alt=\"image-20220329235608917\"\n                ></p>\n<p>æ³¨æ„ï¼šç»˜åˆ¶çš„æ˜¯å­æµç¨‹äº‹ä»¶ï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220330004724798.png\"\n                      alt=\"image-20220330004724798\"\n                ></p>\n<p>ç„¶åæˆ‘ä»¬å†å®šä¹‰ä¸€ä¸ªé”™è¯¯ï¼Œå†…å®¹ä¸ºï¼š</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">error</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;error01&quot;</span> <span class=\"attr\">errorCode</span>=<span class=\"string\">&quot;abcd&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>åœ¨FlowableUIä¸­æ²¡æ‰¾åˆ°é”™è¯¯å®šä¹‰çš„é€‰é¡¹ï¼Œæˆ‘ä»¬å°±åœ¨æµç¨‹æ–‡ä»¶ä¸­è‡ªå·±æ·»åŠ å³å¯ã€‚</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220329235702382.png\"\n                      alt=\"image-20220329235702382\"\n                ></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220329214507352.png\"\n                      alt=\"image-20220329214507352\"\n                ></p>\n<p>å®Œæ•´çš„æµç¨‹æ–‡ä»¶</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=<span class=\"string\">&quot;1.0&quot;</span> encoding=<span class=\"string\">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">definitions</span> <span class=\"attr\">xmlns</span>=<span class=\"string\">&quot;http://www.omg.org/spec/BPMN/20100524/MODEL&quot;</span> <span class=\"attr\">xmlns:xsi</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span> <span class=\"attr\">xmlns:xsd</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema&quot;</span> <span class=\"attr\">xmlns:activiti</span>=<span class=\"string\">&quot;http://activiti.org/bpmn&quot;</span> <span class=\"attr\">xmlns:bpmndi</span>=<span class=\"string\">&quot;http://www.omg.org/spec/BPMN/20100524/DI&quot;</span> <span class=\"attr\">xmlns:omgdc</span>=<span class=\"string\">&quot;http://www.omg.org/spec/DD/20100524/DC&quot;</span> <span class=\"attr\">xmlns:omgdi</span>=<span class=\"string\">&quot;http://www.omg.org/spec/DD/20100524/DI&quot;</span> <span class=\"attr\">typeLanguage</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema&quot;</span> <span class=\"attr\">expressionLanguage</span>=<span class=\"string\">&quot;http://www.w3.org/1999/XPath&quot;</span> <span class=\"attr\">targetNamespace</span>=<span class=\"string\">&quot;http://www.activiti.org/test&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">error</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;error01&quot;</span> <span class=\"attr\">errorCode</span>=<span class=\"string\">&quot;abcd&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">error</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">process</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;myProcess&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;My process&quot;</span> <span class=\"attr\">isExecutable</span>=<span class=\"string\">&quot;true&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">startEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;startevent1&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;Start&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">startEvent</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">serviceTask</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;servicetask1&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;è‡ªåŠ¨ä»»åŠ¡ä¸€&quot;</span> <span class=\"attr\">activiti:class</span>=<span class=\"string\">&quot;com.bobo.delegate.MyOneDelegate&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">serviceTask</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;flow1&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;startevent1&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;servicetask1&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">endEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;endevent1&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;End&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">endEvent</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;flow2&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;servicetask1&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;endevent1&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">subProcess</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;eventsubprocess1&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;Event sub Process&quot;</span> <span class=\"attr\">triggeredByEvent</span>=<span class=\"string\">&quot;true&quot;</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">startEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;errorstartevent1&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;Error start&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">errorEventDefinition</span> <span class=\"attr\">errorRef</span>=<span class=\"string\">&quot;error01&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">errorEventDefinition</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">startEvent</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">serviceTask</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;servicetask2&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;è‡ªåŠ¨ä»»åŠ¡äºŒ&quot;</span> <span class=\"attr\">activiti:class</span>=<span class=\"string\">&quot;com.bobo.delegate.MyTwoDelegate&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">serviceTask</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">endEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;endevent2&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;End&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">endEvent</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;flow3&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;servicetask2&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;endevent2&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;flow4&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;errorstartevent1&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;servicetask2&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">subProcess</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">process</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNDiagram</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNDiagram_myProcess&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNPlane</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;myProcess&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNPlane_myProcess&quot;</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;startevent1&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_startevent1&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;35.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;35.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;480.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;260.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;servicetask1&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_servicetask1&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;55.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;105.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;710.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;250.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;endevent1&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_endevent1&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;35.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;35.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;930.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;260.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;eventsubprocess1&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_eventsubprocess1&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;211.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;401.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;530.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;420.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;errorstartevent1&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_errorstartevent1&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;35.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;35.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;600.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;520.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;servicetask2&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_servicetask2&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;55.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;105.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;700.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;510.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;endevent2&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_endevent2&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;35.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;35.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;850.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;520.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;flow1&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_flow1&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;515.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;277.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;710.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;277.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;flow2&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_flow2&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;815.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;277.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;930.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;277.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;flow3&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_flow3&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;805.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;537.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;850.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;537.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;flow4&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_flow4&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;635.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;537.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;700.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;537.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNPlane</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNDiagram</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">definitions</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>ç„¶åæˆ‘ä»¬åœ¨ä¸»æµç¨‹ä¸­çš„<code>è‡ªåŠ¨ä»»åŠ¡ä¸€</code>ä¸­æˆ‘ä»¬æŠ›å‡ºå¼‚å¸¸</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">MyOneDelegate</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">JavaDelegate</span> &#123;</span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">execute</span><span class=\"params\">(DelegateExecution execution)</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;å®Œæˆè‡ªåŠ¨å®¡æ‰¹ä»»åŠ¡-----ã€‹MyOneDelegate&quot;</span> + LocalDateTime.now().toString());</span><br><span class=\"line\">        <span class=\"comment\">// ä¸šåŠ¡æ‰§è¡Œå‘ç°æœ‰é—®é¢˜ æ­¤å¤„çš„errorCodeéœ€è¦å’Œå®šä¹‰çš„erroræ ‡ç­¾ä¸­çš„errorCodeä¿æŒä¸€è‡´</span></span><br><span class=\"line\">        <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"title class_\">BpmnError</span>(<span class=\"string\">&quot;abcd&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ç„¶åæˆ‘ä»¬åœ¨<code>è‡ªå®šä¹‰ä»»åŠ¡äºŒ</code>ä¸­ç®€å•å®šä¹‰ä¸€ä¸ªè¾“å‡ºå³å¯ã€‚ç„¶åæˆ‘ä»¬éƒ¨ç½²ä»»åŠ¡</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">test01</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> Exception&#123;</span><br><span class=\"line\">    <span class=\"type\">ZipInputStream</span> <span class=\"variable\">in</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">ZipInputStream</span>(SpringBootFlowableApplicationTests.class.getClassLoader().getResourceAsStream(<span class=\"string\">&quot;é”™è¯¯å¯åŠ¨äº‹ä»¶.bar&quot;</span>));</span><br><span class=\"line\">    <span class=\"type\">Deployment</span> <span class=\"variable\">deployment</span> <span class=\"operator\">=</span> processEngine.getRepositoryService().createDeployment()</span><br><span class=\"line\">            .addZipInputStream(in)</span><br><span class=\"line\">            .name(<span class=\"string\">&quot;é”™è¯¯å¯åŠ¨äº‹ä»¶&quot;</span>)</span><br><span class=\"line\">            .deploy();</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;-----&quot;</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<p>ç„¶åæˆ‘ä»¬å†å¯åŠ¨æµç¨‹å®ä¾‹ï¼Œé‚£ä¹ˆè‡ªåŠ¨ä»»åŠ¡ä¸€å°±ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œç„¶åå¯¹åº”çš„å­æµç¨‹å°±ä¼šå¼€å§‹</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * å¯åŠ¨æµç¨‹å®ä¾‹</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">startProcessInstanceByKey</span><span class=\"params\">()</span>  <span class=\"keyword\">throws</span> Exception&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    processEngine.getRuntimeService()</span><br><span class=\"line\">            .startProcessInstanceById(<span class=\"string\">&quot;myProcess:1:c0462994-af79-11ec-8cae-c03c59ad2248&quot;</span>);</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;å¼€å§‹å¯åŠ¨çš„æ—¶é—´ï¼š&quot;</span> + LocalDateTime.now().toString());</span><br><span class=\"line\">    <span class=\"comment\">// éœ€è¦åœ¨æ­¤é˜»å¡æ¯”ç­‰å¾…é•¿çš„æ—¶é—´</span></span><br><span class=\"line\">    TimeUnit.MINUTES.sleep(<span class=\"number\">3</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<p>è¾“å‡ºç»“æœè·å–åˆ°äº†æˆ‘ä»¬æœŸæœ›çš„ç»“æœ</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220330000557061.png\"\n                      alt=\"image-20220330000557061\"\n                ></p>\n<p>é€šè¿‡è¾“å‡ºç»“æœä¹Ÿå¯ä»¥çœ‹åˆ°æ‰§è¡Œçš„è‡ªåŠ¨ä»»åŠ¡ä¸€åï¼ŒæŠ›å‡ºé”™è¯¯äº‹ä»¶<code>abcd</code>,å­æµç¨‹è§¦å‘å¹¶æ‰§è¡Œäº†ã€‚</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220330000741836.png\"\n                      alt=\"image-20220330000741836\"\n                ></p>\n<h3 id=\"è¾¹ç•Œäº‹ä»¶-3\"><a href=\"#è¾¹ç•Œäº‹ä»¶-3\" class=\"headerlink\" title=\"è¾¹ç•Œäº‹ä»¶\"></a>è¾¹ç•Œäº‹ä»¶</h3><p>å®šä¹‰å¦‚ä¸‹çš„æµç¨‹å›¾ï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220330004335187.png\"\n                      alt=\"image-20220330004335187\"\n                ></p>\n<p>æ³¨æ„ç»˜åˆ¶çš„æ—¶å€™</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220330004644673.png\"\n                      alt=\"image-20220330004644673\"\n                ></p>\n<p>xmlæ–‡ä»¶å†…å®¹ä¸ºï¼š</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=<span class=\"string\">&quot;1.0&quot;</span> encoding=<span class=\"string\">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">definitions</span> <span class=\"attr\">xmlns</span>=<span class=\"string\">&quot;http://www.omg.org/spec/BPMN/20100524/MODEL&quot;</span> <span class=\"attr\">xmlns:xsi</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span> <span class=\"attr\">xmlns:xsd</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema&quot;</span> <span class=\"attr\">xmlns:activiti</span>=<span class=\"string\">&quot;http://activiti.org/bpmn&quot;</span> <span class=\"attr\">xmlns:bpmndi</span>=<span class=\"string\">&quot;http://www.omg.org/spec/BPMN/20100524/DI&quot;</span> <span class=\"attr\">xmlns:omgdc</span>=<span class=\"string\">&quot;http://www.omg.org/spec/DD/20100524/DC&quot;</span> <span class=\"attr\">xmlns:omgdi</span>=<span class=\"string\">&quot;http://www.omg.org/spec/DD/20100524/DI&quot;</span> <span class=\"attr\">typeLanguage</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema&quot;</span> <span class=\"attr\">expressionLanguage</span>=<span class=\"string\">&quot;http://www.w3.org/1999/XPath&quot;</span> <span class=\"attr\">targetNamespace</span>=<span class=\"string\">&quot;http://www.activiti.org/test&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">error</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;error02&quot;</span> <span class=\"attr\">errorCode</span>=<span class=\"string\">&quot;a123&quot;</span> &gt;</span><span class=\"tag\">&lt;/<span class=\"name\">error</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">process</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;myProcess&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;My process&quot;</span> <span class=\"attr\">isExecutable</span>=<span class=\"string\">&quot;true&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">startEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;startevent1&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;Start&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">startEvent</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">serviceTask</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;servicetask2&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;è‡ªåŠ¨ä»»åŠ¡äºŒ&quot;</span> <span class=\"attr\">activiti:class</span>=<span class=\"string\">&quot;com.bobo.delegate.MyTwoDelegate&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">serviceTask</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">serviceTask</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;servicetask3&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;è‡ªåŠ¨ä»»åŠ¡ä¸‰&quot;</span> <span class=\"attr\">activiti:class</span>=<span class=\"string\">&quot;com.bobo.delegate.MyThreeDelegate&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">serviceTask</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">endEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;endevent2&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;End&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">endEvent</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;flow5&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;servicetask2&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;endevent2&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">endEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;endevent3&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;End&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">endEvent</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;flow6&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;servicetask3&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;endevent3&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">subProcess</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;subprocess1&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;Sub Process&quot;</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">startEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;startevent2&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;Start&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">startEvent</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">serviceTask</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;servicetask4&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;Service Task&quot;</span> <span class=\"attr\">activiti:class</span>=<span class=\"string\">&quot;com.bobo.delegate.MyOneDelegate&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">serviceTask</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">endEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;endevent4&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;End&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">endEvent</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;flow10&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;servicetask4&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;endevent4&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;flow11&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;startevent2&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;servicetask4&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">subProcess</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;flow8&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;startevent1&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;subprocess1&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;flow9&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;subprocess1&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;servicetask2&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">boundaryEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;boundaryerror1&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;Error&quot;</span> <span class=\"attr\">attachedToRef</span>=<span class=\"string\">&quot;subprocess1&quot;</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">errorEventDefinition</span> <span class=\"attr\">errorRef</span>=<span class=\"string\">&quot;error02&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">errorEventDefinition</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">boundaryEvent</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;flow12&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;boundaryerror1&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;servicetask3&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">process</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNDiagram</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNDiagram_myProcess&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNPlane</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;myProcess&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNPlane_myProcess&quot;</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;startevent1&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_startevent1&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;35.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;35.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;402.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;388.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;servicetask2&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_servicetask2&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;55.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;105.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;1285.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;368.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;servicetask3&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_servicetask3&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;55.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;105.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;1099.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;590.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;endevent2&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_endevent2&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;35.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;35.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;1440.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;378.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;endevent3&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_endevent3&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;35.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;35.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;1320.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;600.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;subprocess1&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_subprocess1&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;271.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;451.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;660.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;270.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;startevent2&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_startevent2&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;35.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;35.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;720.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;390.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;servicetask4&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_servicetask4&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;55.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;105.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;850.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;381.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;endevent4&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_endevent4&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;35.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;35.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;1030.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;391.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;boundaryerror1&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_boundaryerror1&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;30.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;30.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;950.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;520.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;flow5&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_flow5&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;1390.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;395.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;1440.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;395.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;flow6&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_flow6&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;1204.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;617.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;1320.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;617.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;flow10&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_flow10&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;955.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;408.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;1030.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;408.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;flow11&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_flow11&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;755.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;407.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;850.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;408.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;flow8&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_flow8&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;437.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;405.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;660.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;405.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;flow9&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_flow9&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;1111.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;405.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;1285.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;395.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;flow12&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_flow12&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;965.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;550.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;964.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;617.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;1099.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;617.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNPlane</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNDiagram</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">definitions</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>å¯¹åº”çš„ä¸‰ä¸ªè‡ªå®šä¹‰ä»»åŠ¡ç»‘å®šçš„JavaDelegateä¸ºï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">MyOneDelegate</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">JavaDelegate</span> &#123;</span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">execute</span><span class=\"params\">(DelegateExecution execution)</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;å®Œæˆè‡ªåŠ¨å®¡æ‰¹ä»»åŠ¡-----ã€‹MyOneDelegate&quot;</span> + LocalDateTime.now().toString());</span><br><span class=\"line\">        <span class=\"comment\">// ä¸šåŠ¡æ‰§è¡Œå‘ç°æœ‰é—®é¢˜ æ­¤å¤„çš„errorCodeéœ€è¦å’Œå®šä¹‰çš„erroræ ‡ç­¾ä¸­çš„errorCodeä¿æŒä¸€è‡´</span></span><br><span class=\"line\">        <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"title class_\">BpmnError</span>(<span class=\"string\">&quot;a123&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">MyTwoDelegate</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">JavaDelegate</span> &#123;</span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">execute</span><span class=\"params\">(DelegateExecution execution)</span> &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;MyTwoDelegate----&gt;æ‰§è¡Œäº†&quot;</span> + LocalDateTime.now().toString());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">MyThreeDelegate</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">JavaDelegate</span> &#123;</span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">execute</span><span class=\"params\">(DelegateExecution execution)</span> &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;MyThreeDelegate----&gt;æ‰§è¡Œäº†&quot;</span> + LocalDateTime.now().toString());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ç„¶åæˆ‘ä»¬éƒ¨ç½²æ–‡ä»¶</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">test01</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> Exception&#123;</span><br><span class=\"line\">    <span class=\"type\">ZipInputStream</span> <span class=\"variable\">in</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">ZipInputStream</span>(SpringBootFlowableApplicationTests.class</span><br><span class=\"line\">            .getClassLoader()</span><br><span class=\"line\">            .getResourceAsStream(<span class=\"string\">&quot;é”™è¯¯è¾¹ç•Œäº‹ä»¶.bar&quot;</span>));</span><br><span class=\"line\">    <span class=\"type\">Deployment</span> <span class=\"variable\">deployment</span> <span class=\"operator\">=</span> processEngine.getRepositoryService().createDeployment()</span><br><span class=\"line\">            .addZipInputStream(in)</span><br><span class=\"line\">            .name(<span class=\"string\">&quot;é”™è¯¯è¾¹ç•Œäº‹ä»¶&quot;</span>)</span><br><span class=\"line\">            .deploy();</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;-----&quot;</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>éƒ¨ç½²æˆåŠŸåæˆ‘ä»¬å†å¯åŠ¨ä¸€ä¸ªæµç¨‹å®ä¾‹ï¼Œè¿›å…¥åˆ°è‡ªå®šä¹‰ä»»åŠ¡ä¸€å¤„ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œè§¦å‘è¾¹ç•Œå¼‚å¸¸å¤„ç†</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220330003624235.png\"\n                      alt=\"image-20220330003624235\"\n                ></p>\n<p>è¾“å‡ºçš„ç»“æœå’Œæˆ‘ä»¬é¢„æœŸçš„æ˜¯ä¸€æ ·çš„</p>\n<h2 id=\"ä¿¡å·äº‹ä»¶\"><a href=\"#ä¿¡å·äº‹ä»¶\" class=\"headerlink\" title=\"ä¿¡å·äº‹ä»¶\"></a>ä¿¡å·äº‹ä»¶</h2><h3 id=\"å¼€å§‹äº‹ä»¶-3\"><a href=\"#å¼€å§‹äº‹ä»¶-3\" class=\"headerlink\" title=\"å¼€å§‹äº‹ä»¶\"></a>å¼€å§‹äº‹ä»¶</h3><p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220330095103789.png\"\n                      alt=\"image-20220330095103789\"\n                ></p>\n<p>ç„¶åè®¾ç½®ç›¸å…³çš„å±æ€§ï¼Œå¹¶å®šä¹‰ä¸€ä¸ªä¿¡å·</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220330095157518.png\"\n                      alt=\"image-20220330095157518\"\n                ></p>\n<p>ç„¶ååœ¨æˆ‘ä»¬å£°æ˜çš„ä¿¡å·å¼€å§‹å¼•ç”¨æˆ‘ä»¬ä¸Šé¢åˆ›å»ºçš„ä¿¡å·</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220330095725130.png\"\n                      alt=\"image-20220330095725130\"\n                ></p>\n<p>å®Œæ•´çš„xmlæ–‡ä»¶</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=<span class=\"string\">&quot;1.0&quot;</span> encoding=<span class=\"string\">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">definitions</span> <span class=\"attr\">xmlns</span>=<span class=\"string\">&quot;http://www.omg.org/spec/BPMN/20100524/MODEL&quot;</span> <span class=\"attr\">xmlns:xsi</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span> <span class=\"attr\">xmlns:xsd</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema&quot;</span> <span class=\"attr\">xmlns:flowable</span>=<span class=\"string\">&quot;http://flowable.org/bpmn&quot;</span> <span class=\"attr\">xmlns:bpmndi</span>=<span class=\"string\">&quot;http://www.omg.org/spec/BPMN/20100524/DI&quot;</span> <span class=\"attr\">xmlns:omgdc</span>=<span class=\"string\">&quot;http://www.omg.org/spec/DD/20100524/DC&quot;</span> <span class=\"attr\">xmlns:omgdi</span>=<span class=\"string\">&quot;http://www.omg.org/spec/DD/20100524/DI&quot;</span> <span class=\"attr\">typeLanguage</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema&quot;</span> <span class=\"attr\">expressionLanguage</span>=<span class=\"string\">&quot;http://www.w3.org/1999/XPath&quot;</span> <span class=\"attr\">targetNamespace</span>=<span class=\"string\">&quot;http://www.flowable.org/processdef&quot;</span> <span class=\"attr\">exporter</span>=<span class=\"string\">&quot;Flowable Open Source Modeler&quot;</span> <span class=\"attr\">exporterVersion</span>=<span class=\"string\">&quot;6.7.2&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">signal</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;signal01&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;firstSignal&quot;</span> <span class=\"attr\">flowable:scope</span>=<span class=\"string\">&quot;global&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">signal</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">process</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;event2001&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;ä¿¡å·å¯åŠ¨äº‹ä»¶&quot;</span> <span class=\"attr\">isExecutable</span>=<span class=\"string\">&quot;true&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">startEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;start01&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;ä¿¡å·å¼€å§‹&quot;</span> <span class=\"attr\">isInterrupting</span>=<span class=\"string\">&quot;true&quot;</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">signalEventDefinition</span> <span class=\"attr\">signalRef</span>=<span class=\"string\">&quot;signal01&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">signalEventDefinition</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">startEvent</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">serviceTask</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;task1&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;è‡ªåŠ¨ä»»åŠ¡&quot;</span> <span class=\"attr\">flowable:class</span>=<span class=\"string\">&quot;com.bobo.flow.delegate.MyTwoJavaDelegate&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">serviceTask</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">endEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;end01&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;ç»“æŸ&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">endEvent</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;sid-0FF05CCE-85CB-416C-8D36-A935AF9586C2&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;task1&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;end01&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;sid-C8AD1AEE-5FCB-4419-8596-74532DD71ABC&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;start01&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;task1&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">process</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNDiagram</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNDiagram_event2001&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNPlane</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;event2001&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNPlane_event2001&quot;</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;start01&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_start01&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;30.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;30.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;285.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;172.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;task1&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_task1&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;80.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;100.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;467.5&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;147.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;end01&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_end01&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;28.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;28.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;612.5&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;173.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;sid-C8AD1AEE-5FCB-4419-8596-74532DD71ABC&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_sid-C8AD1AEE-5FCB-4419-8596-74532DD71ABC&quot;</span> <span class=\"attr\">flowable:sourceDockerX</span>=<span class=\"string\">&quot;15.0&quot;</span> <span class=\"attr\">flowable:sourceDockerY</span>=<span class=\"string\">&quot;15.0&quot;</span> <span class=\"attr\">flowable:targetDockerX</span>=<span class=\"string\">&quot;50.0&quot;</span> <span class=\"attr\">flowable:targetDockerY</span>=<span class=\"string\">&quot;40.0&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;314.94999961358405&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;187.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;467.4999999999399&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;187.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;sid-0FF05CCE-85CB-416C-8D36-A935AF9586C2&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_sid-0FF05CCE-85CB-416C-8D36-A935AF9586C2&quot;</span> <span class=\"attr\">flowable:sourceDockerX</span>=<span class=\"string\">&quot;50.0&quot;</span> <span class=\"attr\">flowable:sourceDockerY</span>=<span class=\"string\">&quot;40.0&quot;</span> <span class=\"attr\">flowable:targetDockerX</span>=<span class=\"string\">&quot;14.0&quot;</span> <span class=\"attr\">flowable:targetDockerY</span>=<span class=\"string\">&quot;14.0&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;567.449999999996&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;187.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;612.5&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;187.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNPlane</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNDiagram</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">definitions</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>éƒ¨ç½²æµç¨‹ï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  * Deploy</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\"> <span class=\"meta\">@Test</span></span><br><span class=\"line\"> <span class=\"keyword\">void</span> <span class=\"title function_\">testDeploy</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> Exception &#123;</span><br><span class=\"line\">     <span class=\"comment\">//RepositoryService repositoryService = processEngine.getRepositoryService();</span></span><br><span class=\"line\">     <span class=\"type\">Deployment</span> <span class=\"variable\">deploy</span> <span class=\"operator\">=</span> repositoryService.createDeployment()</span><br><span class=\"line\">             .addClasspathResource(<span class=\"string\">&quot;ä¿¡å·å¯åŠ¨äº‹ä»¶.bpmn20.xml&quot;</span>)</span><br><span class=\"line\">             .name(<span class=\"string\">&quot;ä¿¡å·å¯åŠ¨äº‹ä»¶&quot;</span>)</span><br><span class=\"line\">             .deploy();</span><br><span class=\"line\">     System.out.println(<span class=\"string\">&quot;deploy.getId() = &quot;</span> + deploy.getId());</span><br><span class=\"line\">     System.out.println(<span class=\"string\">&quot;deploy.getName() = &quot;</span> + deploy.getName());</span><br><span class=\"line\">     System.out.println(<span class=\"string\">&quot;éƒ¨ç½²å¼€å§‹çš„æ—¶é—´ï¼š&quot;</span> + <span class=\"keyword\">new</span> <span class=\"title class_\">Date</span>());</span><br><span class=\"line\">     <span class=\"comment\">//TimeUnit.MINUTES.sleep(3);</span></span><br><span class=\"line\"> &#125;</span><br></pre></td></tr></table></figure>\n\n<p>æµç¨‹æ˜¯ä¸€ä¸ªä¿¡æ¯å¯åŠ¨äº‹ä»¶ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦é‡Šæ”¾å¯¹åº”çš„ä¿¡å·æ¥è§¦å‘æµç¨‹çš„å¯åŠ¨</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * é€šè¿‡ä¿¡å·å‘é€æ¥è§¦å‘ä¿¡å·å¯åŠ¨äº‹ä»¶çš„æ‰§è¡Œ</span></span><br><span class=\"line\"><span class=\"comment\"> * å…¨å±€çš„ä¿¡æ¯</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"title function_\">signalReceived</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> Exception &#123;</span><br><span class=\"line\">    runtimeService.signalEventReceived(<span class=\"string\">&quot;firstSignal&quot;</span>);</span><br><span class=\"line\">    <span class=\"comment\">// æˆ‘ä»¬å¾—ä¿è¯å®¹å™¨çš„è¿è¡Œï¼Œæ‰€ä»¥éœ€è¦é˜»å¡</span></span><br><span class=\"line\">    TimeUnit.MINUTES.sleep(<span class=\"number\">1</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>é€šè¿‡è¾“å‡ºè¯­å¥å¯ä»¥çœ‹åˆ°è‡ªå®šä¹‰ä»»åŠ¡è§¦å‘äº†</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220330100203036.png\"\n                      alt=\"image-20220330100203036\"\n                ></p>\n<p>æˆ‘ä»¬å¯ä»¥æŠŠä¿¡æ¯çš„ä½œç”¨åŸŸç”±åŸæ¥çš„golbalå…¨å±€çš„è°ƒæ•´ä¸ºprocessInstanceï¼Œæµ‹è¯•åå‘ç°è¿˜æ˜¯æ‰§è¡Œäº†ï¼Œè¯´æ˜åœ¨å¯åŠ¨äº‹ä»¶ä¿¡æ¯çš„ä½œç”¨åŸŸå…¶å®æ˜¯ä¸èµ·ä½œç”¨çš„ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;signal id=<span class=\"string\">&quot;signal01&quot;</span> name=<span class=\"string\">&quot;firstSignal&quot;</span> flowable:scope=<span class=\"string\">&quot;processInstance&quot;</span>&gt;&lt;/signal&gt;</span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"ä¸­é—´æ•è·äº‹ä»¶\"><a href=\"#ä¸­é—´æ•è·äº‹ä»¶\" class=\"headerlink\" title=\"ä¸­é—´æ•è·äº‹ä»¶\"></a>ä¸­é—´æ•è·äº‹ä»¶</h3><p>æ¡ˆä¾‹å¦‚ä¸‹ï¼šå½“æˆ‘ä»¬å¯åŠ¨äº‹ä»¶åï¼Œä¼šé˜»å¡åœ¨è¿™ä¸ªæ¶ˆæ¯è·å–ä¸­é—´äº‹ä»¶å¤„ï¼Œç­‰å¾…ç›¸å…³ä¿¡å·åæ‰ä¼šç»§ç»­æµè½¬ã€‚</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220330101820083.png\"\n                      alt=\"image-20220330101820083\"\n                ></p>\n<p>å¯¹åº”çš„ä¿¡å·ç»‘å®š</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=<span class=\"string\">&quot;1.0&quot;</span> encoding=<span class=\"string\">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">definitions</span> <span class=\"attr\">xmlns</span>=<span class=\"string\">&quot;http://www.omg.org/spec/BPMN/20100524/MODEL&quot;</span> <span class=\"attr\">xmlns:xsi</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span> <span class=\"attr\">xmlns:xsd</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema&quot;</span> <span class=\"attr\">xmlns:flowable</span>=<span class=\"string\">&quot;http://flowable.org/bpmn&quot;</span> <span class=\"attr\">xmlns:bpmndi</span>=<span class=\"string\">&quot;http://www.omg.org/spec/BPMN/20100524/DI&quot;</span> <span class=\"attr\">xmlns:omgdc</span>=<span class=\"string\">&quot;http://www.omg.org/spec/DD/20100524/DC&quot;</span> <span class=\"attr\">xmlns:omgdi</span>=<span class=\"string\">&quot;http://www.omg.org/spec/DD/20100524/DI&quot;</span> <span class=\"attr\">typeLanguage</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema&quot;</span> <span class=\"attr\">expressionLanguage</span>=<span class=\"string\">&quot;http://www.w3.org/1999/XPath&quot;</span> <span class=\"attr\">targetNamespace</span>=<span class=\"string\">&quot;http://www.flowable.org/processdef&quot;</span> <span class=\"attr\">exporter</span>=<span class=\"string\">&quot;Flowable Open Source Modeler&quot;</span> <span class=\"attr\">exporterVersion</span>=<span class=\"string\">&quot;6.7.2&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">signal</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;singnal02&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;secondSingal&quot;</span> <span class=\"attr\">flowable:scope</span>=<span class=\"string\">&quot;global&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">signal</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">process</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;event2002&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;ä¿¡å·ä¸­é—´æ•è·äº‹ä»¶&quot;</span> <span class=\"attr\">isExecutable</span>=<span class=\"string\">&quot;true&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">startEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;start01&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;å¼€å§‹&quot;</span> <span class=\"attr\">flowable:formFieldValidation</span>=<span class=\"string\">&quot;true&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">startEvent</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">intermediateCatchEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;signal01&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;ä¿¡å·æ•è·ä¸­é—´äº‹ä»¶&quot;</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">signalEventDefinition</span> <span class=\"attr\">signalRef</span>=<span class=\"string\">&quot;singnal02&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">signalEventDefinition</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">intermediateCatchEvent</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;sid-FBD95BC3-BA38-4863-95E6-E7D484FE80CB&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;start01&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;signal01&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">serviceTask</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;task01&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;è‡ªåŠ¨ä»»åŠ¡&quot;</span> <span class=\"attr\">flowable:class</span>=<span class=\"string\">&quot;com.bobo.flow.delegate.MyTwoJavaDelegate&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">serviceTask</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;sid-BF5FB671-5895-4FAC-8F92-E4BC4DEE821A&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;signal01&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;task01&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">endEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;end01&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;ç»“æŸä»»åŠ¡&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">endEvent</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;sid-4F4853C5-0FE6-48AB-BD80-A37CF807D90D&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;task01&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;end01&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">process</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNDiagram</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNDiagram_event2002&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNPlane</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;event2002&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNPlane_event2002&quot;</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;start01&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_start01&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;30.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;30.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;120.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;150.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;signal01&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_signal01&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;30.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;30.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;318.5&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;150.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;task01&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_task01&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;80.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;100.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;495.5&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;122.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;end01&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_end01&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;28.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;28.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;690.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;151.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;sid-BF5FB671-5895-4FAC-8F92-E4BC4DEE821A&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_sid-BF5FB671-5895-4FAC-8F92-E4BC4DEE821A&quot;</span> <span class=\"attr\">flowable:sourceDockerX</span>=<span class=\"string\">&quot;15.0&quot;</span> <span class=\"attr\">flowable:sourceDockerY</span>=<span class=\"string\">&quot;15.0&quot;</span> <span class=\"attr\">flowable:targetDockerX</span>=<span class=\"string\">&quot;50.0&quot;</span> <span class=\"attr\">flowable:targetDockerY</span>=<span class=\"string\">&quot;40.0&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;348.44853390329115&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;164.78775666509335&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;495.49999999999903&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;162.7068396226415&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;sid-4F4853C5-0FE6-48AB-BD80-A37CF807D90D&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_sid-4F4853C5-0FE6-48AB-BD80-A37CF807D90D&quot;</span> <span class=\"attr\">flowable:sourceDockerX</span>=<span class=\"string\">&quot;50.0&quot;</span> <span class=\"attr\">flowable:sourceDockerY</span>=<span class=\"string\">&quot;40.0&quot;</span> <span class=\"attr\">flowable:targetDockerX</span>=<span class=\"string\">&quot;14.0&quot;</span> <span class=\"attr\">flowable:targetDockerY</span>=<span class=\"string\">&quot;14.0&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;595.4499999999996&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;162.94542586750788&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;690.0016973189436&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;164.73506227304313&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;sid-FBD95BC3-BA38-4863-95E6-E7D484FE80CB&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_sid-FBD95BC3-BA38-4863-95E6-E7D484FE80CB&quot;</span> <span class=\"attr\">flowable:sourceDockerX</span>=<span class=\"string\">&quot;15.0&quot;</span> <span class=\"attr\">flowable:sourceDockerY</span>=<span class=\"string\">&quot;15.0&quot;</span> <span class=\"attr\">flowable:targetDockerX</span>=<span class=\"string\">&quot;15.0&quot;</span> <span class=\"attr\">flowable:targetDockerY</span>=<span class=\"string\">&quot;15.0&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;149.94999953609073&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;165.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;318.5&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;165.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNPlane</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNDiagram</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">definitions</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>å…ˆéƒ¨ç½²ï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Deploy</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"title function_\">testDeploy</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> Exception &#123;</span><br><span class=\"line\">    <span class=\"comment\">//RepositoryService repositoryService = processEngine.getRepositoryService();</span></span><br><span class=\"line\">    <span class=\"type\">Deployment</span> <span class=\"variable\">deploy</span> <span class=\"operator\">=</span> repositoryService.createDeployment()</span><br><span class=\"line\">            .addClasspathResource(<span class=\"string\">&quot;ä¿¡å·ä¸­é—´æ•è·äº‹ä»¶.bpmn20.xml&quot;</span>)</span><br><span class=\"line\">            .name(<span class=\"string\">&quot;ä¿¡å·ä¸­é—´æ•è·äº‹ä»¶&quot;</span>)</span><br><span class=\"line\">            .deploy();</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;deploy.getId() = &quot;</span> + deploy.getId());</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;deploy.getName() = &quot;</span> + deploy.getName());</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;éƒ¨ç½²å¼€å§‹çš„æ—¶é—´ï¼š&quot;</span> + <span class=\"keyword\">new</span> <span class=\"title class_\">Date</span>());</span><br><span class=\"line\">    <span class=\"comment\">//TimeUnit.MINUTES.sleep(3);</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ç„¶åæˆ‘ä»¬éœ€è¦å¯åŠ¨æµç¨‹ï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"title function_\">startFlow</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> Exception&#123;</span><br><span class=\"line\">    runtimeService.startProcessInstanceById(<span class=\"string\">&quot;event2002:1:adc5b8f8-afcf-11ec-959a-c03c59ad2248&quot;</span>);</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;å¯åŠ¨æ—¶é—´ï¼š&quot;</span> + <span class=\"keyword\">new</span> <span class=\"title class_\">Date</span>());</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>å‘é€ä¿¡å·ä¿¡æ¯</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * é€šè¿‡ä¿¡å·å‘é€æ¥è§¦å‘ä¿¡å·å¯åŠ¨äº‹ä»¶çš„æ‰§è¡Œ</span></span><br><span class=\"line\"><span class=\"comment\"> * å…¨å±€çš„ä¿¡æ¯</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">void</span> <span class=\"title function_\">signalGolbal</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> Exception &#123;</span><br><span class=\"line\">    runtimeService.signalEventReceived(<span class=\"string\">&quot;secondSingal&quot;</span>);</span><br><span class=\"line\">    <span class=\"comment\">// æˆ‘ä»¬å¾—ä¿è¯å®¹å™¨çš„è¿è¡Œï¼Œæ‰€ä»¥éœ€è¦é˜»å¡</span></span><br><span class=\"line\">    TimeUnit.MINUTES.sleep(<span class=\"number\">1</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ç„¶åè¢«æˆ‘ä»¬çš„ä¿¡å·æ•è·ä¸­é—´äº‹ä»¶æ•è·</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220330102256367.png\"\n                      alt=\"image-20220330102256367\"\n                ></p>\n<p>ä¿¡å·ä½œç”¨åŸŸä¸ºprocessInstanceçš„æƒ…å†µ</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220330102524238.png\"\n                      alt=\"image-20220330102524238\"\n                ></p>\n<p>é¦–å…ˆé’ˆå¯¹processInstanceçš„ä¿¡å·ï¼Œæˆ‘ä»¬å‘é€globalä¿¡å·æ˜¯ä¸ä¼šè¢«æ•è·çš„</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220330102808127.png\"\n                      alt=\"image-20220330102808127\"\n                ></p>\n<p>ç„¶åprocessInstanceçš„ä¿¡æ¯æˆ‘ä»¬éœ€è¦åœ¨æµç¨‹å®ä¾‹å†…éƒ¨æŠ›å‡ºä¿¡å·</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220330112205035.png\"\n                      alt=\"image-20220330112205035\"\n                ></p>\n<h3 id=\"ä¸­é—´æŠ›å‡ºäº‹ä»¶\"><a href=\"#ä¸­é—´æŠ›å‡ºäº‹ä»¶\" class=\"headerlink\" title=\"ä¸­é—´æŠ›å‡ºäº‹ä»¶\"></a>ä¸­é—´æŠ›å‡ºäº‹ä»¶</h3><p>ä¿¡å·ä¸­é—´æŠ›å‡ºäº‹ä»¶ä¹Ÿå°±æ˜¯åœ¨æµç¨‹æ‰§è¡Œä¸­çš„æŸä¸ªèŠ‚ç‚¹æŠ›å‡ºäº†å¯¹åº”çš„ä¿¡å·ï¼Œç„¶åå¯¹åº”çš„ä¿¡å·ä¸­é—´æ•è·äº‹ä»¶å°±ä¼šè§¦å‘ï¼Œæˆ‘ä»¬é€šè¿‡å…·ä½“çš„æ¡ˆä¾‹æ¥æ¼”ç¤ºå¦‚ï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220330235847392.png\"\n                      alt=\"image-20220330235847392\"\n                ></p>\n<p>å®šä¹‰ä¿¡æ¯ä¿¡æ¯ï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220330193530718.png\"\n                      alt=\"image-20220330193530718\"\n                ></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220331000011215.png\"\n                      alt=\"image-20220331000011215\"\n                ></p>\n<p>å®Œæ•´çš„xmlæ–‡ä»¶</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=<span class=\"string\">&quot;1.0&quot;</span> encoding=<span class=\"string\">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">definitions</span> <span class=\"attr\">xmlns</span>=<span class=\"string\">&quot;http://www.omg.org/spec/BPMN/20100524/MODEL&quot;</span> <span class=\"attr\">xmlns:xsi</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span> <span class=\"attr\">xmlns:xsd</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema&quot;</span> <span class=\"attr\">xmlns:flowable</span>=<span class=\"string\">&quot;http://flowable.org/bpmn&quot;</span> <span class=\"attr\">xmlns:bpmndi</span>=<span class=\"string\">&quot;http://www.omg.org/spec/BPMN/20100524/DI&quot;</span> <span class=\"attr\">xmlns:omgdc</span>=<span class=\"string\">&quot;http://www.omg.org/spec/DD/20100524/DC&quot;</span> <span class=\"attr\">xmlns:omgdi</span>=<span class=\"string\">&quot;http://www.omg.org/spec/DD/20100524/DI&quot;</span> <span class=\"attr\">typeLanguage</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema&quot;</span> <span class=\"attr\">expressionLanguage</span>=<span class=\"string\">&quot;http://www.w3.org/1999/XPath&quot;</span> <span class=\"attr\">targetNamespace</span>=<span class=\"string\">&quot;http://www.flowable.org/processdef&quot;</span> <span class=\"attr\">exporter</span>=<span class=\"string\">&quot;Flowable Open Source Modeler&quot;</span> <span class=\"attr\">exporterVersion</span>=<span class=\"string\">&quot;6.7.2&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">signal</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;signal01&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;signal01&quot;</span> <span class=\"attr\">flowable:scope</span>=<span class=\"string\">&quot;global&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">signal</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">process</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;event2003&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;ä¿¡å·ä¸­é—´æŠ›å‡ºäº‹ä»¶&quot;</span> <span class=\"attr\">isExecutable</span>=<span class=\"string\">&quot;true&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">startEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;startId01&quot;</span> <span class=\"attr\">flowable:formFieldValidation</span>=<span class=\"string\">&quot;true&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">startEvent</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">parallelGateway</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;pid01&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;å¹¶è¡Œç½‘å…³&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">parallelGateway</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;sid-296CDB16-A9D3-4255-9E44-D7C6F5DA5058&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;startId01&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;pid01&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">serviceTask</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;task01&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;è‡ªåŠ¨ä»»åŠ¡ä¸€&quot;</span> <span class=\"attr\">flowable:class</span>=<span class=\"string\">&quot;com.bobo.delegate.MyOneDelegate&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">serviceTask</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">serviceTask</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;task02&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;è‡ªåŠ¨ä»»åŠ¡äºŒ&quot;</span> <span class=\"attr\">flowable:class</span>=<span class=\"string\">&quot;com.bobo.delegate.MyTwoDelegate&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">serviceTask</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">serviceTask</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;task03&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;è‡ªåŠ¨ä»»åŠ¡ä¸‰&quot;</span> <span class=\"attr\">flowable:class</span>=<span class=\"string\">&quot;com.bobo.delegate.MyThreeDelegate&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">serviceTask</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;sid-2325ED54-C769-4161-A00F-001F006B72B5&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;pid01&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;task01&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">intermediateThrowEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;sid-262D1C04-299C-4DE6-BAD9-B8AA0FC4EBAB&quot;</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">signalEventDefinition</span> <span class=\"attr\">signalRef</span>=<span class=\"string\">&quot;signal01&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">signalEventDefinition</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">intermediateThrowEvent</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">intermediateCatchEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;sid-51D70059-8D15-4BF7-9151-48CCD99544F1&quot;</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">signalEventDefinition</span> <span class=\"attr\">signalRef</span>=<span class=\"string\">&quot;signal01&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">signalEventDefinition</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">intermediateCatchEvent</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;sid-4A038E06-A731-4A5F-A929-840FB8A92AA5&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;task01&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;sid-262D1C04-299C-4DE6-BAD9-B8AA0FC4EBAB&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;sid-1C87EF67-D60F-47A3-A5B4-06FBC6F2390D&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;sid-262D1C04-299C-4DE6-BAD9-B8AA0FC4EBAB&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;task02&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;sid-DAC2B128-B6A7-48A2-8010-8AC6A806C04D&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;pid01&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;sid-51D70059-8D15-4BF7-9151-48CCD99544F1&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;sid-0ABE23AE-344C-49D8-B574-010DECD093BE&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;sid-51D70059-8D15-4BF7-9151-48CCD99544F1&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;task03&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">parallelGateway</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;pid02&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;å¹¶è¡Œç½‘å…³&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">parallelGateway</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;sid-584ADF4E-9140-4E5A-A396-1257E1436704&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;task02&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;pid02&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;sid-857F5F7F-7EA9-4986-9270-FFBF13E0B8CD&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;task03&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;pid02&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">endEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;end01&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;ç»“æŸ&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">endEvent</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;sid-02646A89-FCEC-4E7F-95B8-61F2065DE8D4&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;pid02&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;end01&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">process</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNDiagram</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNDiagram_event2003&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNPlane</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;event2003&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNPlane_event2003&quot;</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;startId01&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_startId01&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;30.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;30.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;100.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;163.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;pid01&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_pid01&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;40.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;40.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;270.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;158.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;task01&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_task01&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;80.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;100.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;419.5&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;71.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;task02&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_task02&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;80.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;100.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;780.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;71.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;task03&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_task03&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;80.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;100.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;795.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;255.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;sid-262D1C04-299C-4DE6-BAD9-B8AA0FC4EBAB&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_sid-262D1C04-299C-4DE6-BAD9-B8AA0FC4EBAB&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;30.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;30.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;633.5&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;96.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;sid-51D70059-8D15-4BF7-9151-48CCD99544F1&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_sid-51D70059-8D15-4BF7-9151-48CCD99544F1&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;30.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;30.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;465.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;278.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;pid02&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_pid02&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;40.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;40.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;994.5&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;158.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;end01&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_end01&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;28.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;28.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;1079.5&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;164.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;sid-4A038E06-A731-4A5F-A929-840FB8A92AA5&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_sid-4A038E06-A731-4A5F-A929-840FB8A92AA5&quot;</span> <span class=\"attr\">flowable:sourceDockerX</span>=<span class=\"string\">&quot;50.0&quot;</span> <span class=\"attr\">flowable:sourceDockerY</span>=<span class=\"string\">&quot;40.0&quot;</span> <span class=\"attr\">flowable:targetDockerX</span>=<span class=\"string\">&quot;15.0&quot;</span> <span class=\"attr\">flowable:targetDockerY</span>=<span class=\"string\">&quot;15.0&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;519.45&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;111.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;633.5&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;111.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;sid-02646A89-FCEC-4E7F-95B8-61F2065DE8D4&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_sid-02646A89-FCEC-4E7F-95B8-61F2065DE8D4&quot;</span> <span class=\"attr\">flowable:sourceDockerX</span>=<span class=\"string\">&quot;20.5&quot;</span> <span class=\"attr\">flowable:sourceDockerY</span>=<span class=\"string\">&quot;20.5&quot;</span> <span class=\"attr\">flowable:targetDockerX</span>=<span class=\"string\">&quot;14.0&quot;</span> <span class=\"attr\">flowable:targetDockerY</span>=<span class=\"string\">&quot;14.0&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;1034.0591869398208&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;178.3782051282051&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;1079.5002755524838&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;178.08885188426407&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;sid-857F5F7F-7EA9-4986-9270-FFBF13E0B8CD&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_sid-857F5F7F-7EA9-4986-9270-FFBF13E0B8CD&quot;</span> <span class=\"attr\">flowable:sourceDockerX</span>=<span class=\"string\">&quot;50.0&quot;</span> <span class=\"attr\">flowable:sourceDockerY</span>=<span class=\"string\">&quot;40.0&quot;</span> <span class=\"attr\">flowable:targetDockerX</span>=<span class=\"string\">&quot;20.0&quot;</span> <span class=\"attr\">flowable:targetDockerY</span>=<span class=\"string\">&quot;20.0&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;894.9499999999999&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;260.4867256637168&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;1002.6675392670157&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;186.14712041884815&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;sid-1C87EF67-D60F-47A3-A5B4-06FBC6F2390D&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_sid-1C87EF67-D60F-47A3-A5B4-06FBC6F2390D&quot;</span> <span class=\"attr\">flowable:sourceDockerX</span>=<span class=\"string\">&quot;15.0&quot;</span> <span class=\"attr\">flowable:sourceDockerY</span>=<span class=\"string\">&quot;15.0&quot;</span> <span class=\"attr\">flowable:targetDockerX</span>=<span class=\"string\">&quot;50.0&quot;</span> <span class=\"attr\">flowable:targetDockerY</span>=<span class=\"string\">&quot;40.0&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;663.4499994451444&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;111.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;779.9999999999972&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;111.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;sid-0ABE23AE-344C-49D8-B574-010DECD093BE&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_sid-0ABE23AE-344C-49D8-B574-010DECD093BE&quot;</span> <span class=\"attr\">flowable:sourceDockerX</span>=<span class=\"string\">&quot;15.0&quot;</span> <span class=\"attr\">flowable:sourceDockerY</span>=<span class=\"string\">&quot;15.0&quot;</span> <span class=\"attr\">flowable:targetDockerX</span>=<span class=\"string\">&quot;50.0&quot;</span> <span class=\"attr\">flowable:targetDockerY</span>=<span class=\"string\">&quot;40.0&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;494.9497692355611&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;293.0819166248564&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;794.9999999999911&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;294.7260273972602&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;sid-584ADF4E-9140-4E5A-A396-1257E1436704&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_sid-584ADF4E-9140-4E5A-A396-1257E1436704&quot;</span> <span class=\"attr\">flowable:sourceDockerX</span>=<span class=\"string\">&quot;50.0&quot;</span> <span class=\"attr\">flowable:sourceDockerY</span>=<span class=\"string\">&quot;40.0&quot;</span> <span class=\"attr\">flowable:targetDockerX</span>=<span class=\"string\">&quot;20.0&quot;</span> <span class=\"attr\">flowable:targetDockerY</span>=<span class=\"string\">&quot;20.0&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;879.9499999999999&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;129.1390243902439&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;999.8065381558029&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;172.67196819085487&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;sid-2325ED54-C769-4161-A00F-001F006B72B5&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_sid-2325ED54-C769-4161-A00F-001F006B72B5&quot;</span> <span class=\"attr\">flowable:sourceDockerX</span>=<span class=\"string\">&quot;20.5&quot;</span> <span class=\"attr\">flowable:sourceDockerY</span>=<span class=\"string\">&quot;20.5&quot;</span> <span class=\"attr\">flowable:targetDockerX</span>=<span class=\"string\">&quot;50.0&quot;</span> <span class=\"attr\">flowable:targetDockerY</span>=<span class=\"string\">&quot;40.0&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;304.9870182555781&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;173.0233265720081&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;419.49999999999994&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;129.8358938547486&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;sid-DAC2B128-B6A7-48A2-8010-8AC6A806C04D&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_sid-DAC2B128-B6A7-48A2-8010-8AC6A806C04D&quot;</span> <span class=\"attr\">flowable:sourceDockerX</span>=<span class=\"string\">&quot;20.5&quot;</span> <span class=\"attr\">flowable:sourceDockerY</span>=<span class=\"string\">&quot;20.5&quot;</span> <span class=\"attr\">flowable:targetDockerX</span>=<span class=\"string\">&quot;15.0&quot;</span> <span class=\"attr\">flowable:targetDockerY</span>=<span class=\"string\">&quot;15.0&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;302.31181354817494&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;185.6374177631579&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;467.15151373509184&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;285.24160328636844&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;sid-296CDB16-A9D3-4255-9E44-D7C6F5DA5058&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_sid-296CDB16-A9D3-4255-9E44-D7C6F5DA5058&quot;</span> <span class=\"attr\">flowable:sourceDockerX</span>=<span class=\"string\">&quot;15.0&quot;</span> <span class=\"attr\">flowable:sourceDockerY</span>=<span class=\"string\">&quot;15.0&quot;</span> <span class=\"attr\">flowable:targetDockerX</span>=<span class=\"string\">&quot;20.0&quot;</span> <span class=\"attr\">flowable:targetDockerY</span>=<span class=\"string\">&quot;20.0&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;129.94999940317362&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;178.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;270.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;178.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNPlane</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNDiagram</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">definitions</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>ä¸‰ä¸ªè‡ªå®šä¹‰ä»»åŠ¡ç»‘å®šäº†ä¸‰ä¸ªjavaDelegateåˆ†åˆ«ç»™å‡ºæ‰“å°è¯­å¥æ¥è®°å½•</p>\n<p>ç„¶åéƒ¨ç½²ä»»åŠ¡</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">test02</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> Exception&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"type\">Deployment</span> <span class=\"variable\">deployment</span> <span class=\"operator\">=</span> processEngine.getRepositoryService().createDeployment()</span><br><span class=\"line\">            .addClasspathResource(<span class=\"string\">&quot;ä¿¡å·ä¸­é—´æŠ›å‡ºäº‹ä»¶.bpmn20.xml&quot;</span>)</span><br><span class=\"line\">            .name(<span class=\"string\">&quot;ä¿¡å·ä¸­é—´æŠ›å‡ºäº‹ä»¶&quot;</span>)</span><br><span class=\"line\">            .deploy();</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;-----&quot;</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ç„¶ååœ¨å¯åŠ¨ä»»åŠ¡å³å¯</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">    * å¯åŠ¨æµç¨‹å®ä¾‹</span></span><br><span class=\"line\"><span class=\"comment\">    *</span></span><br><span class=\"line\"><span class=\"comment\">    */</span></span><br><span class=\"line\">   <span class=\"meta\">@Test</span></span><br><span class=\"line\">   <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">startProcessInstanceByKey</span><span class=\"params\">()</span>  <span class=\"keyword\">throws</span> Exception&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">       processEngine.getRuntimeService()</span><br><span class=\"line\">               .startProcessInstanceById(<span class=\"string\">&quot;event2003:1:665b1533-b020-11ec-877d-c03c59ad2248&quot;</span>);</span><br><span class=\"line\">       System.out.println(<span class=\"string\">&quot;å¼€å§‹å¯åŠ¨çš„æ—¶é—´ï¼š&quot;</span> + LocalDateTime.now().toString());</span><br><span class=\"line\">       <span class=\"comment\">// éœ€è¦åœ¨æ­¤é˜»å¡æ¯”ç­‰å¾…é•¿çš„æ—¶é—´</span></span><br><span class=\"line\">       TimeUnit.MINUTES.sleep(<span class=\"number\">3</span>);</span><br><span class=\"line\">   &#125;</span><br></pre></td></tr></table></figure>\n\n<p>çœ‹æ§åˆ¶å°çš„è¾“å‡º</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220330200124232.png\"\n                      alt=\"image-20220330200124232\"\n                ></p>\n<p>æ•ˆæœï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220330200235193.png\"\n                      alt=\"image-20220330200235193\"\n                ></p>\n<h3 id=\"è¾¹ç•Œäº‹ä»¶-4\"><a href=\"#è¾¹ç•Œäº‹ä»¶-4\" class=\"headerlink\" title=\"è¾¹ç•Œäº‹ä»¶\"></a>è¾¹ç•Œäº‹ä»¶</h3><p>æœ€åæ¥çœ‹çœ‹ä¿¡å·è¾¹ç•Œäº‹ä»¶ï¼Œæ¡ˆä¾‹å¦‚ä¸‹ï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220330202443905.png\"\n                      alt=\"image-20220330202443905\"\n                ></p>\n<p>å®Œæ•´çš„xmlå®šä¹‰ä¸º</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=<span class=\"string\">&quot;1.0&quot;</span> encoding=<span class=\"string\">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">definitions</span> <span class=\"attr\">xmlns</span>=<span class=\"string\">&quot;http://www.omg.org/spec/BPMN/20100524/MODEL&quot;</span> <span class=\"attr\">xmlns:xsi</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span> <span class=\"attr\">xmlns:xsd</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema&quot;</span> <span class=\"attr\">xmlns:flowable</span>=<span class=\"string\">&quot;http://flowable.org/bpmn&quot;</span> <span class=\"attr\">xmlns:bpmndi</span>=<span class=\"string\">&quot;http://www.omg.org/spec/BPMN/20100524/DI&quot;</span> <span class=\"attr\">xmlns:omgdc</span>=<span class=\"string\">&quot;http://www.omg.org/spec/DD/20100524/DC&quot;</span> <span class=\"attr\">xmlns:omgdi</span>=<span class=\"string\">&quot;http://www.omg.org/spec/DD/20100524/DI&quot;</span> <span class=\"attr\">typeLanguage</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema&quot;</span> <span class=\"attr\">expressionLanguage</span>=<span class=\"string\">&quot;http://www.w3.org/1999/XPath&quot;</span> <span class=\"attr\">targetNamespace</span>=<span class=\"string\">&quot;http://www.flowable.org/processdef&quot;</span> <span class=\"attr\">exporter</span>=<span class=\"string\">&quot;Flowable Open Source Modeler&quot;</span> <span class=\"attr\">exporterVersion</span>=<span class=\"string\">&quot;6.7.2&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">signal</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;signal2&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;signal2&quot;</span> <span class=\"attr\">flowable:scope</span>=<span class=\"string\">&quot;global&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">signal</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">process</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;event2004&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;ä¿¡å·è¾¹ç•Œäº‹ä»¶&quot;</span> <span class=\"attr\">isExecutable</span>=<span class=\"string\">&quot;true&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">startEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;startEvent1&quot;</span> <span class=\"attr\">flowable:formFieldValidation</span>=<span class=\"string\">&quot;true&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">startEvent</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">userTask</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;sid-F11058BE-828A-45FF-A830-8BF099D71FBD&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;äººå·¥ä»»åŠ¡&quot;</span> <span class=\"attr\">flowable:assignee</span>=<span class=\"string\">&quot;zhangsan&quot;</span> <span class=\"attr\">flowable:formFieldValidation</span>=<span class=\"string\">&quot;true&quot;</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">extensionElements</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">modeler:initiator-can-complete</span> <span class=\"attr\">xmlns:modeler</span>=<span class=\"string\">&quot;http://flowable.org/modeler&quot;</span>&gt;</span>&lt;![CDATA[false]]&gt;<span class=\"tag\">&lt;/<span class=\"name\">modeler:initiator-can-complete</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">extensionElements</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">userTask</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;sid-D2EE279A-24A2-4B6C-8021-ADC0A1A645EC&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;startEvent1&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;sid-F11058BE-828A-45FF-A830-8BF099D71FBD&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">serviceTask</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;sid-FAB46591-3247-4776-B3B5-79826133F5AF&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;è‡ªåŠ¨ä»»åŠ¡ä¸€&quot;</span> <span class=\"attr\">flowable:class</span>=<span class=\"string\">&quot;com.bobo.delegate.MyOneDelegate&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">serviceTask</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">serviceTask</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;sid-7CD0FBBA-4FE6-4646-B0D6-1D8A4D8D5515&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;è‡ªåŠ¨ä»»åŠ¡äºŒ&quot;</span> <span class=\"attr\">flowable:class</span>=<span class=\"string\">&quot;com.bobo.delegate.MyTwoDelegate&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">serviceTask</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;sid-74B48035-4CED-4963-AA87-55D1FB95EEA8&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;sid-F11058BE-828A-45FF-A830-8BF099D71FBD&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;sid-FAB46591-3247-4776-B3B5-79826133F5AF&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">endEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;sid-55682CDC-FEBD-44A1-B38C-A3F816AC91F4&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">endEvent</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;sid-AC84425B-8D8C-4A0F-BDCC-BC1DCF909752&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;sid-FAB46591-3247-4776-B3B5-79826133F5AF&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;sid-55682CDC-FEBD-44A1-B38C-A3F816AC91F4&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">endEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;sid-11CA784C-69DE-45B2-AE58-78E64CF2EE8E&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">endEvent</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;sid-A2E3E7C7-9AD0-46B8-8105-272496599E0D&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;sid-7CD0FBBA-4FE6-4646-B0D6-1D8A4D8D5515&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;sid-11CA784C-69DE-45B2-AE58-78E64CF2EE8E&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">boundaryEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;sid-8E473D8E-70D6-4AB3-B1D9-D3E7EFCDB39D&quot;</span> <span class=\"attr\">attachedToRef</span>=<span class=\"string\">&quot;sid-F11058BE-828A-45FF-A830-8BF099D71FBD&quot;</span> <span class=\"attr\">cancelActivity</span>=<span class=\"string\">&quot;true&quot;</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">signalEventDefinition</span> <span class=\"attr\">signalRef</span>=<span class=\"string\">&quot;signal2&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">signalEventDefinition</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">boundaryEvent</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;sid-C3770DF2-1747-45A7-85B5-2838AB7ECF9C&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;sid-8E473D8E-70D6-4AB3-B1D9-D3E7EFCDB39D&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;sid-7CD0FBBA-4FE6-4646-B0D6-1D8A4D8D5515&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">process</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNDiagram</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNDiagram_event2004&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNPlane</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;event2004&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNPlane_event2004&quot;</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;startEvent1&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_startEvent1&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;30.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;30.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;100.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;163.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;sid-F11058BE-828A-45FF-A830-8BF099D71FBD&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_sid-F11058BE-828A-45FF-A830-8BF099D71FBD&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;80.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;100.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;255.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;138.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;sid-FAB46591-3247-4776-B3B5-79826133F5AF&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_sid-FAB46591-3247-4776-B3B5-79826133F5AF&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;80.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;100.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;521.5&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;135.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;sid-7CD0FBBA-4FE6-4646-B0D6-1D8A4D8D5515&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_sid-7CD0FBBA-4FE6-4646-B0D6-1D8A4D8D5515&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;80.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;100.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;521.5&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;315.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;sid-55682CDC-FEBD-44A1-B38C-A3F816AC91F4&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_sid-55682CDC-FEBD-44A1-B38C-A3F816AC91F4&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;28.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;28.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;690.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;161.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;sid-11CA784C-69DE-45B2-AE58-78E64CF2EE8E&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_sid-11CA784C-69DE-45B2-AE58-78E64CF2EE8E&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;28.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;28.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;690.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;341.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;sid-8E473D8E-70D6-4AB3-B1D9-D3E7EFCDB39D&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_sid-8E473D8E-70D6-4AB3-B1D9-D3E7EFCDB39D&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;30.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;30.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;308.4527694396093&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;203.7233532460343&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;sid-C3770DF2-1747-45A7-85B5-2838AB7ECF9C&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_sid-C3770DF2-1747-45A7-85B5-2838AB7ECF9C&quot;</span> <span class=\"attr\">flowable:sourceDockerX</span>=<span class=\"string\">&quot;15.0&quot;</span> <span class=\"attr\">flowable:sourceDockerY</span>=<span class=\"string\">&quot;15.0&quot;</span> <span class=\"attr\">flowable:targetDockerX</span>=<span class=\"string\">&quot;50.0&quot;</span> <span class=\"attr\">flowable:targetDockerY</span>=<span class=\"string\">&quot;40.0&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;336.557461183174&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;225.9233207922021&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;521.4999999999999&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;327.5301011331414&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;sid-74B48035-4CED-4963-AA87-55D1FB95EEA8&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_sid-74B48035-4CED-4963-AA87-55D1FB95EEA8&quot;</span> <span class=\"attr\">flowable:sourceDockerX</span>=<span class=\"string\">&quot;50.0&quot;</span> <span class=\"attr\">flowable:sourceDockerY</span>=<span class=\"string\">&quot;40.0&quot;</span> <span class=\"attr\">flowable:targetDockerX</span>=<span class=\"string\">&quot;50.0&quot;</span> <span class=\"attr\">flowable:targetDockerY</span>=<span class=\"string\">&quot;40.0&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;354.95000000000005&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;177.43714821763604&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;521.5&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;175.56228893058162&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;sid-D2EE279A-24A2-4B6C-8021-ADC0A1A645EC&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_sid-D2EE279A-24A2-4B6C-8021-ADC0A1A645EC&quot;</span> <span class=\"attr\">flowable:sourceDockerX</span>=<span class=\"string\">&quot;15.0&quot;</span> <span class=\"attr\">flowable:sourceDockerY</span>=<span class=\"string\">&quot;15.0&quot;</span> <span class=\"attr\">flowable:targetDockerX</span>=<span class=\"string\">&quot;50.0&quot;</span> <span class=\"attr\">flowable:targetDockerY</span>=<span class=\"string\">&quot;40.0&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;129.94999949366624&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;178.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;254.99999999993574&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;178.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;sid-A2E3E7C7-9AD0-46B8-8105-272496599E0D&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_sid-A2E3E7C7-9AD0-46B8-8105-272496599E0D&quot;</span> <span class=\"attr\">flowable:sourceDockerX</span>=<span class=\"string\">&quot;50.0&quot;</span> <span class=\"attr\">flowable:sourceDockerY</span>=<span class=\"string\">&quot;40.0&quot;</span> <span class=\"attr\">flowable:targetDockerX</span>=<span class=\"string\">&quot;14.0&quot;</span> <span class=\"attr\">flowable:targetDockerY</span>=<span class=\"string\">&quot;14.0&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;621.4499999999999&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;355.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;690.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;355.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;sid-AC84425B-8D8C-4A0F-BDCC-BC1DCF909752&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_sid-AC84425B-8D8C-4A0F-BDCC-BC1DCF909752&quot;</span> <span class=\"attr\">flowable:sourceDockerX</span>=<span class=\"string\">&quot;50.0&quot;</span> <span class=\"attr\">flowable:sourceDockerY</span>=<span class=\"string\">&quot;40.0&quot;</span> <span class=\"attr\">flowable:targetDockerX</span>=<span class=\"string\">&quot;14.0&quot;</span> <span class=\"attr\">flowable:targetDockerY</span>=<span class=\"string\">&quot;14.0&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;621.4499999999999&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;175.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;690.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;175.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNPlane</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNDiagram</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">definitions</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n\n\n<p>å®šä¹‰çš„ä¿¡å·ä¸ºï¼š</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">signal</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;signal2&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;signal2&quot;</span> <span class=\"attr\">flowable:scope</span>=<span class=\"string\">&quot;global&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">signal</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>è‡ªåŠ¨ä»»åŠ¡çš„å†…å®¹</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">MyOneDelegate</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">JavaDelegate</span> &#123;</span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">execute</span><span class=\"params\">(DelegateExecution execution)</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;å®Œæˆè‡ªåŠ¨å®¡æ‰¹ä»»åŠ¡-----ã€‹MyOneDelegate&quot;</span> + LocalDateTime.now().toString());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">MyTwoDelegate</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">JavaDelegate</span> &#123;</span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">execute</span><span class=\"params\">(DelegateExecution execution)</span> &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;MyTwoDelegate----&gt;æ‰§è¡Œäº†&quot;</span> + LocalDateTime.now().toString());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<p>éƒ¨ç½²é¡¹ç›®ç„¶åå¯åŠ¨æµç¨‹</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">test02</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> Exception&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"type\">Deployment</span> <span class=\"variable\">deployment</span> <span class=\"operator\">=</span> processEngine.getRepositoryService().createDeployment()</span><br><span class=\"line\">            .addClasspathResource(<span class=\"string\">&quot;ä¿¡å·è¾¹ç•Œäº‹ä»¶.bpmn20.xml&quot;</span>)</span><br><span class=\"line\">            .name(<span class=\"string\">&quot;ä¿¡å·è¾¹ç•Œäº‹ä»¶&quot;</span>)</span><br><span class=\"line\">            .deploy();</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;-----&quot;</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">startProcessInstanceByKey</span><span class=\"params\">()</span>  <span class=\"keyword\">throws</span> Exception&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    processEngine.getRuntimeService()</span><br><span class=\"line\">            .startProcessInstanceById(<span class=\"string\">&quot;event2004:1:e8b5c39f-b024-11ec-bdac-c03c59ad2248&quot;</span>);</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;å¼€å§‹å¯åŠ¨çš„æ—¶é—´ï¼š&quot;</span> + LocalDateTime.now().toString());</span><br><span class=\"line\">    <span class=\"comment\">// éœ€è¦åœ¨æ­¤é˜»å¡æ¯”ç­‰å¾…é•¿çš„æ—¶é—´</span></span><br><span class=\"line\">    TimeUnit.MINUTES.sleep(<span class=\"number\">3</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220330203056055.png\"\n                      alt=\"image-20220330203056055\"\n                ></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">signalGlobal</span><span class=\"params\">()</span>  <span class=\"keyword\">throws</span> Exception&#123;</span><br><span class=\"line\">    <span class=\"type\">String</span> <span class=\"variable\">signal</span> <span class=\"operator\">=</span> <span class=\"string\">&quot;signal2&quot;</span>;</span><br><span class=\"line\">    Map&lt;String, Object&gt; variables = <span class=\"keyword\">new</span> <span class=\"title class_\">HashMap</span>();</span><br><span class=\"line\">    processEngine.getRuntimeService().signalEventReceived(signal,variables);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220330203233862.png\"\n                      alt=\"image-20220330203233862\"\n                ></p>\n<p>é€šè¿‡è¾“å‡ºçœ‹åˆ°äº†æˆ‘ä»¬æœŸæœ›çš„ç»“æœäº†ï¼Œè¿™æ ·å°±ç»™å¤§å®¶ä»‹ç»å®Œäº†ä¿¡å·ç›¸å…³çš„å„ç§äº‹ä»¶äº†</p>\n<h2 id=\"ç»“æŸäº‹ä»¶\"><a href=\"#ç»“æŸäº‹ä»¶\" class=\"headerlink\" title=\"ç»“æŸäº‹ä»¶\"></a>ç»“æŸäº‹ä»¶</h2><p>ç»“æŸäº‹ä»¶é¡¾åæ€ä¹‰å°±æ˜¯æµç¨‹ç»“æŸçš„äº‹ä»¶ï¼Œé™¤äº†å‰é¢é‡åˆ°çš„ç©ºç»“æŸäº‹ä»¶å¤–ï¼Œç»“æŸäº‹ä»¶è¿˜åŒ…æ‹¬å¦‚ä¸‹å‡ ç§ï¼š</p>\n<ul>\n<li>é”™è¯¯ç»“æŸäº‹ä»¶</li>\n<li>ä¸­æ–­ç»“æŸäº‹ä»¶</li>\n<li>å–æ¶ˆç»“æŸäº‹ä»¶</li>\n</ul>\n<h3 id=\"é”™è¯¯ç»“æŸäº‹ä»¶\"><a href=\"#é”™è¯¯ç»“æŸäº‹ä»¶\" class=\"headerlink\" title=\"é”™è¯¯ç»“æŸäº‹ä»¶\"></a>é”™è¯¯ç»“æŸäº‹ä»¶</h3><p>å½“æµç¨‹æ‰§è¡Œåˆ°è¾¾<strong>é”™è¯¯ç»“æŸäº‹ä»¶ï¼ˆerror end eventï¼‰</strong>æ—¶ï¼Œç»“æŸæ‰§è¡Œçš„å½“å‰åˆ†æ”¯ï¼Œå¹¶æŠ›å‡ºé”™è¯¯ã€‚è¿™ä¸ªé”™è¯¯å¯ä»¥ç”±åŒ¹é…çš„é”™è¯¯è¾¹ç•Œä¸­é—´äº‹ä»¶æ•è·ã€‚å¦‚æœæ‰¾ä¸åˆ°åŒ¹é…çš„é”™è¯¯è¾¹ç•Œäº‹ä»¶ï¼Œå°†ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚é€šè¿‡å…·ä½“æ¡ˆä¾‹æ¥è¯¦ç»†è®²è§£ï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220331100340069.png\"\n                      alt=\"image-20220331100340069\"\n                ></p>\n<p>å®Œæ•´çš„xmlæ–‡ä»¶</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=<span class=\"string\">&quot;1.0&quot;</span> encoding=<span class=\"string\">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">definitions</span> <span class=\"attr\">xmlns</span>=<span class=\"string\">&quot;http://www.omg.org/spec/BPMN/20100524/MODEL&quot;</span> <span class=\"attr\">xmlns:xsi</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span> <span class=\"attr\">xmlns:xsd</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema&quot;</span> <span class=\"attr\">xmlns:flowable</span>=<span class=\"string\">&quot;http://flowable.org/bpmn&quot;</span> <span class=\"attr\">xmlns:bpmndi</span>=<span class=\"string\">&quot;http://www.omg.org/spec/BPMN/20100524/DI&quot;</span> <span class=\"attr\">xmlns:omgdc</span>=<span class=\"string\">&quot;http://www.omg.org/spec/DD/20100524/DC&quot;</span> <span class=\"attr\">xmlns:omgdi</span>=<span class=\"string\">&quot;http://www.omg.org/spec/DD/20100524/DI&quot;</span> <span class=\"attr\">typeLanguage</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema&quot;</span> <span class=\"attr\">expressionLanguage</span>=<span class=\"string\">&quot;http://www.w3.org/1999/XPath&quot;</span> <span class=\"attr\">targetNamespace</span>=<span class=\"string\">&quot;http://www.flowable.org/processdef&quot;</span> <span class=\"attr\">exporter</span>=<span class=\"string\">&quot;Flowable Open Source Modeler&quot;</span> <span class=\"attr\">exporterVersion</span>=<span class=\"string\">&quot;6.7.2&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">error</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;error03&quot;</span> <span class=\"attr\">errorCode</span>=<span class=\"string\">&quot;error03&quot;</span> &gt;</span><span class=\"tag\">&lt;/<span class=\"name\">error</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">process</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;event5001&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;é”™è¯¯ç»“æŸäº‹ä»¶&quot;</span> <span class=\"attr\">isExecutable</span>=<span class=\"string\">&quot;true&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">startEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;start01&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;å¼€å§‹ä»»åŠ¡&quot;</span> <span class=\"attr\">flowable:formFieldValidation</span>=<span class=\"string\">&quot;true&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">startEvent</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">subProcess</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;sid-794CA748-4381-417F-8350-360E89907E84&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;subProcess&quot;</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">startEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;startc01&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;å¼€å§‹å­æµç¨‹&quot;</span> <span class=\"attr\">flowable:formFieldValidation</span>=<span class=\"string\">&quot;true&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">startEvent</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">serviceTask</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;task01&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;è‡ªåŠ¨ä»»åŠ¡ä¸€&quot;</span> <span class=\"attr\">flowable:class</span>=<span class=\"string\">&quot;com.bobo.flow.delegate.MyOneJavaDelegate&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">serviceTask</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">exclusiveGateway</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;p001&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;æ’ä»–ç½‘å…³&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">exclusiveGateway</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">endEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;endc01&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;å­æµç¨‹ç»“æŸ&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">endEvent</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">endEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;errorend01&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;é”™è¯¯ç»“æŸäº‹ä»¶&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">errorEventDefinition</span> <span class=\"attr\">errorRef</span>=<span class=\"string\">&quot;error03&quot;</span> <span class=\"attr\">flowable:errorVariableLocalScope</span>=<span class=\"string\">&quot;true&quot;</span> <span class=\"attr\">flowable:errorVariableTransient</span>=<span class=\"string\">&quot;true&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">errorEventDefinition</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">endEvent</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;sid-1B2782FA-5216-4817-B964-A77EDEBB7547&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;startc01&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;task01&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;sid-D2196400-20DC-4D6B-AAD2-AA9308CE8DEA&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;task01&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;p001&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;sid-DEC53745-1E74-4D08-B472-95F9A6B92D98&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;p001&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;errorend01&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">conditionExpression</span> <span class=\"attr\">xsi:type</span>=<span class=\"string\">&quot;tFormalExpression&quot;</span>&gt;</span>&lt;![CDATA[$&#123;flag&lt;=0&#125;]]&gt;<span class=\"tag\">&lt;/<span class=\"name\">conditionExpression</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">subProcess</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;sid-934F4EDF-16A9-4D4E-8D7A-4F8E1EEB0F9E&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;start01&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;sid-794CA748-4381-417F-8350-360E89907E84&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">serviceTask</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;task2&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;è‡ªåŠ¨ä»»åŠ¡äºŒ&quot;</span> <span class=\"attr\">flowable:class</span>=<span class=\"string\">&quot;com.bobo.flow.delegate.MyTwoJavaDelegate&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">serviceTask</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;sid-E8166885-00F6-49A1-BE26-3AB98FE95455&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;sid-794CA748-4381-417F-8350-360E89907E84&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;task2&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">endEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;end02&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;ä¸»æµç¨‹ç»“æŸ&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">endEvent</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;sid-496A30AE-44AC-4298-83E0-3183F3FF935B&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;task2&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;end02&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">boundaryEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;perror01&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;è¾¹ç•Œé”™è¯¯äº‹ä»¶&quot;</span> <span class=\"attr\">attachedToRef</span>=<span class=\"string\">&quot;sid-794CA748-4381-417F-8350-360E89907E84&quot;</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">errorEventDefinition</span> <span class=\"attr\">errorRef</span>=<span class=\"string\">&quot;error03&quot;</span> <span class=\"attr\">flowable:errorVariableLocalScope</span>=<span class=\"string\">&quot;true&quot;</span> <span class=\"attr\">flowable:errorVariableTransient</span>=<span class=\"string\">&quot;true&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">errorEventDefinition</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">boundaryEvent</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;sid-9562301E-B400-4D1F-89B8-23E69ADEAE68&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;perror01&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;task3&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">serviceTask</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;task3&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;è‡ªåŠ¨ä»»åŠ¡ä¸‰&quot;</span> <span class=\"attr\">flowable:class</span>=<span class=\"string\">&quot;com.bobo.flow.delegate.MyThreeJavaDelegate&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">serviceTask</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">endEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;end003&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;ä¸»æµç¨‹ç»“æŸ&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">endEvent</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;sid-436E29BF-7F5E-4A4B-8F62-C0AEA010F4D2&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;task3&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;end003&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;sid-C17C73A1-5853-496B-B686-E7911105D459&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;sid-794CA748-4381-417F-8350-360E89907E84&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;endc01&quot;</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">conditionExpression</span> <span class=\"attr\">xsi:type</span>=<span class=\"string\">&quot;tFormalExpression&quot;</span>&gt;</span>&lt;![CDATA[$&#123;flag&gt;0&#125;]]&gt;<span class=\"tag\">&lt;/<span class=\"name\">conditionExpression</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">process</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNDiagram</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNDiagram_event5001&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNPlane</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;event5001&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNPlane_event5001&quot;</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;start01&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_start01&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;30.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;30.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;75.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;205.5&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;sid-794CA748-4381-417F-8350-360E89907E84&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_sid-794CA748-4381-417F-8350-360E89907E84&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;261.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;593.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;240.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;90.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;startc01&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_startc01&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;30.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;30.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;285.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;199.5&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;task01&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_task01&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;80.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;100.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;418.5&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;174.5&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;p001&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_p001&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;40.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;40.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;563.5&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;194.5&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;endc01&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_endc01&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;28.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;28.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;675.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;150.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;errorend01&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_errorend01&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;28.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;28.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;675.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;255.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;task2&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_task2&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;80.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;100.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;942.5&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;176.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;end02&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_end02&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;28.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;28.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;1087.5&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;202.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;perror01&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_perror01&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;30.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;30.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;478.02252392098524&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;336.450017237985&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;task3&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_task3&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;80.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;100.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;665.5&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;406.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;end003&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_end003&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;28.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;28.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;810.5&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;432.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;sid-934F4EDF-16A9-4D4E-8D7A-4F8E1EEB0F9E&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_sid-934F4EDF-16A9-4D4E-8D7A-4F8E1EEB0F9E&quot;</span> <span class=\"attr\">flowable:sourceDockerX</span>=<span class=\"string\">&quot;15.0&quot;</span> <span class=\"attr\">flowable:sourceDockerY</span>=<span class=\"string\">&quot;15.0&quot;</span> <span class=\"attr\">flowable:targetDockerX</span>=<span class=\"string\">&quot;296.5&quot;</span> <span class=\"attr\">flowable:targetDockerY</span>=<span class=\"string\">&quot;130.5&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;104.9499999082861&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;220.5&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;240.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;220.5&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;sid-9562301E-B400-4D1F-89B8-23E69ADEAE68&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_sid-9562301E-B400-4D1F-89B8-23E69ADEAE68&quot;</span> <span class=\"attr\">flowable:sourceDockerX</span>=<span class=\"string\">&quot;15.0&quot;</span> <span class=\"attr\">flowable:sourceDockerY</span>=<span class=\"string\">&quot;15.0&quot;</span> <span class=\"attr\">flowable:targetDockerX</span>=<span class=\"string\">&quot;1.0&quot;</span> <span class=\"attr\">flowable:targetDockerY</span>=<span class=\"string\">&quot;40.0&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;493.02252392098524&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;366.40001519452954&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;493.02252392098524&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;446.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;665.4999999999623&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;446.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;sid-E8166885-00F6-49A1-BE26-3AB98FE95455&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_sid-E8166885-00F6-49A1-BE26-3AB98FE95455&quot;</span> <span class=\"attr\">flowable:sourceDockerX</span>=<span class=\"string\">&quot;296.5&quot;</span> <span class=\"attr\">flowable:sourceDockerY</span>=<span class=\"string\">&quot;130.5&quot;</span> <span class=\"attr\">flowable:targetDockerX</span>=<span class=\"string\">&quot;50.0&quot;</span> <span class=\"attr\">flowable:targetDockerY</span>=<span class=\"string\">&quot;40.0&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;832.9499999999987&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;217.57401315789474&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;942.499999999999&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;216.49292763157894&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;sid-436E29BF-7F5E-4A4B-8F62-C0AEA010F4D2&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_sid-436E29BF-7F5E-4A4B-8F62-C0AEA010F4D2&quot;</span> <span class=\"attr\">flowable:sourceDockerX</span>=<span class=\"string\">&quot;50.0&quot;</span> <span class=\"attr\">flowable:sourceDockerY</span>=<span class=\"string\">&quot;40.0&quot;</span> <span class=\"attr\">flowable:targetDockerX</span>=<span class=\"string\">&quot;14.0&quot;</span> <span class=\"attr\">flowable:targetDockerY</span>=<span class=\"string\">&quot;14.0&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;765.4499999999999&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;446.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;810.5&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;446.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;sid-D2196400-20DC-4D6B-AAD2-AA9308CE8DEA&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_sid-D2196400-20DC-4D6B-AAD2-AA9308CE8DEA&quot;</span> <span class=\"attr\">flowable:sourceDockerX</span>=<span class=\"string\">&quot;50.0&quot;</span> <span class=\"attr\">flowable:sourceDockerY</span>=<span class=\"string\">&quot;40.0&quot;</span> <span class=\"attr\">flowable:targetDockerX</span>=<span class=\"string\">&quot;20.5&quot;</span> <span class=\"attr\">flowable:targetDockerY</span>=<span class=\"string\">&quot;20.5&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;518.4499999999978&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;214.71623376623376&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;563.9130434782609&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;214.91304347826087&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;sid-496A30AE-44AC-4298-83E0-3183F3FF935B&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_sid-496A30AE-44AC-4298-83E0-3183F3FF935B&quot;</span> <span class=\"attr\">flowable:sourceDockerX</span>=<span class=\"string\">&quot;50.0&quot;</span> <span class=\"attr\">flowable:sourceDockerY</span>=<span class=\"string\">&quot;40.0&quot;</span> <span class=\"attr\">flowable:targetDockerX</span>=<span class=\"string\">&quot;14.0&quot;</span> <span class=\"attr\">flowable:targetDockerY</span>=<span class=\"string\">&quot;14.0&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;1042.449999999996&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;216.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;1087.5&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;216.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;sid-C17C73A1-5853-496B-B686-E7911105D459&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_sid-C17C73A1-5853-496B-B686-E7911105D459&quot;</span> <span class=\"attr\">flowable:sourceDockerX</span>=<span class=\"string\">&quot;343.3984375&quot;</span> <span class=\"attr\">flowable:sourceDockerY</span>=<span class=\"string\">&quot;106.0&quot;</span> <span class=\"attr\">flowable:targetDockerX</span>=<span class=\"string\">&quot;14.0&quot;</span> <span class=\"attr\">flowable:targetDockerY</span>=<span class=\"string\">&quot;14.0&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;583.3984375&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;196.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;583.3984375&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;164.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;675.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;164.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;sid-1B2782FA-5216-4817-B964-A77EDEBB7547&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_sid-1B2782FA-5216-4817-B964-A77EDEBB7547&quot;</span> <span class=\"attr\">flowable:sourceDockerX</span>=<span class=\"string\">&quot;15.0&quot;</span> <span class=\"attr\">flowable:sourceDockerY</span>=<span class=\"string\">&quot;15.0&quot;</span> <span class=\"attr\">flowable:targetDockerX</span>=<span class=\"string\">&quot;50.0&quot;</span> <span class=\"attr\">flowable:targetDockerY</span>=<span class=\"string\">&quot;40.0&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;314.949999356254&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;214.5&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;418.5&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;214.5&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;sid-DEC53745-1E74-4D08-B472-95F9A6B92D98&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_sid-DEC53745-1E74-4D08-B472-95F9A6B92D98&quot;</span> <span class=\"attr\">flowable:sourceDockerX</span>=<span class=\"string\">&quot;20.8984375&quot;</span> <span class=\"attr\">flowable:sourceDockerY</span>=<span class=\"string\">&quot;36.5&quot;</span> <span class=\"attr\">flowable:targetDockerX</span>=<span class=\"string\">&quot;14.0&quot;</span> <span class=\"attr\">flowable:targetDockerY</span>=<span class=\"string\">&quot;14.0&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;584.3984375&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;233.54821399278214&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;584.3984375&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;269.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;675.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;269.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNPlane</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNDiagram</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">definitions</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>å®šä¹‰çš„error</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">error</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;error01&quot;</span> <span class=\"attr\">errorCode</span>=<span class=\"string\">&quot;error01&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">error</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>åœ¨å­æµç¨‹ä¸­ï¼Œå½“flagçš„æ•°æ®ä¸º0çš„æ—¶å€™ï¼Œå°±ä¼šè§¦å‘é”™è¯¯ç»“æŸäº‹ä»¶</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;1111&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;12222&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;xxxxx44&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">conditionExpression</span> <span class=\"attr\">xsi:type</span>=<span class=\"string\">&quot;tFormalExpression&quot;</span>&gt;</span>&lt;![CDATA[$&#123;flag==0&#125;]]&gt;<span class=\"tag\">&lt;/<span class=\"name\">conditionExpression</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>ç„¶åæˆ‘ä»¬åœ¨å­æµç¨‹ä¸Šç»‘å®šäº†ä¸€ä¸ªé”™è¯¯è¾¹ç•Œäº‹ä»¶ï¼Œç»‘å®šçš„ä¹Ÿæ˜¯error01,ä¹Ÿå°±æ˜¯å½“å­æµç¨‹è§¦å‘é”™è¯¯ç»“æŸäº‹ä»¶ï¼Œå°±ä¼šè§¦å‘è¿™ä¸ªè¾¹ç•Œäº‹ä»¶ï¼Œè¿›è€Œå®Œæˆè‡ªåŠ¨ä»»åŠ¡ä¸‰ã€‚</p>\n<p>æµç¨‹ä¸­å…³è”çš„ä¸‰ä¸ªè‡ªåŠ¨ä»»åŠ¡éƒ½åªæ˜¯è¾“å‡ºä¸€ä¸ªæ‰“å°è¯­å¥~</p>\n<p>ç„¶åæˆ‘ä»¬éœ€è¦åšçš„æ“ä½œæœ‰ï¼Œéƒ¨ç½²ï¼Œå¯åŠ¨æµç¨‹ç»‘å®šæµç¨‹å˜é‡flagçš„å€¼ä¸º0ï¼Œç„¶åå°±å¯ä»¥çœ‹è¾“å‡ºç»“æœäº†</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">* éƒ¨ç½²</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">test02</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> Exception&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"type\">Deployment</span> <span class=\"variable\">deployment</span> <span class=\"operator\">=</span> processEngine.getRepositoryService().createDeployment()</span><br><span class=\"line\">            .addClasspathResource(<span class=\"string\">&quot;é”™è¯¯ç»“æŸäº‹ä»¶.bpmn20.xml&quot;</span>)</span><br><span class=\"line\">            .name(<span class=\"string\">&quot;é”™è¯¯ç»“æŸäº‹ä»¶&quot;</span>)</span><br><span class=\"line\">            .deploy();</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;-----&quot;</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ç„¶åå¯åŠ¨æµç¨‹</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * å¯åŠ¨æµç¨‹å®ä¾‹,è®¾ç½®æµç¨‹å˜é‡ä¸­çš„flag=0è§¦å‘é”™è¯¯ç»“æŸäº‹ä»¶</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">startProcessInstanceByKey</span><span class=\"params\">()</span>  <span class=\"keyword\">throws</span> Exception&#123;</span><br><span class=\"line\">    <span class=\"comment\">// è®¾ç½®å¯¹åº”çš„æµç¨‹å˜é‡çš„å€¼</span></span><br><span class=\"line\">    Map&lt;String,Object&gt; map = <span class=\"keyword\">new</span> <span class=\"title class_\">HashMap</span>&lt;&gt;();</span><br><span class=\"line\">    map.put(<span class=\"string\">&quot;flag&quot;</span>,<span class=\"number\">0</span>);<span class=\"comment\">// è®¾ç½®flagä¸º0è§¦å‘æµç¨‹ç»“æŸäº‹ä»¶</span></span><br><span class=\"line\">    processEngine.getRuntimeService()</span><br><span class=\"line\">            .startProcessInstanceById(<span class=\"string\">&quot;event2005:1:ebec87e2-b028-11ec-b93f-c03c59ad2248&quot;</span>,map);</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;å¼€å§‹å¯åŠ¨çš„æ—¶é—´ï¼š&quot;</span> + LocalDateTime.now().toString());</span><br><span class=\"line\">    <span class=\"comment\">// éœ€è¦åœ¨æ­¤é˜»å¡æ¯”ç­‰å¾…é•¿çš„æ—¶é—´</span></span><br><span class=\"line\">    TimeUnit.MINUTES.sleep(<span class=\"number\">3</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>çœ‹æ§åˆ¶å°è¾“å‡º</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220330210538338.png\"\n                      alt=\"image-20220330210538338\"\n                ></p>\n<p>æ§åˆ¶å°è¾“å‡ºçš„ç»“æœå’Œæˆ‘ä»¬é¢„æœŸçš„æ˜¯ä¸€æ ·çš„</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220330210708334.png\"\n                      alt=\"image-20220330210708334\"\n                ></p>\n<p>è¯´æ˜é”™è¯¯ç»“æŸäº‹ä»¶çš„ä½œç”¨å°±æ˜¯åœ¨æ‰§è¡Œåˆ°é”™è¯¯ç»“æŸçš„èŠ‚ç‚¹ä½ç½®ä¼šæŠ›å‡ºå¯¹åº”çš„é”™è¯¯ï¼Œä¾›éœ€è¦è·å–çš„äº‹ä»¶æ¥å¤„ç†ã€‚</p>\n<h3 id=\"ä¸­æ–­ç»“æŸäº‹ä»¶\"><a href=\"#ä¸­æ–­ç»“æŸäº‹ä»¶\" class=\"headerlink\" title=\"ä¸­æ–­ç»“æŸäº‹ä»¶\"></a>ä¸­æ–­ç»“æŸäº‹ä»¶</h3><p>ä¸­æ–­ç»“æŸäº‹ä»¶ä¹Ÿç§°ä¸ºç»ˆæ­¢ç»“æŸäº‹ä»¶ï¼Œä¸»è¦æ˜¯å¯¹æµç¨‹è¿›è¡Œç»ˆæ­¢çš„äº‹ä»¶ï¼Œå¯ä»¥åœ¨ä¸€ä¸ªå¤æ‚çš„æµç¨‹ä¸­ï¼Œå¦‚æœæŸæ–¹æƒ³è¦æå‰ä¸­æ–­è¿™ä¸ªæµç¨‹ï¼Œå¯ä»¥é‡‡ç”¨è¿™ä¸ªäº‹ä»¶æ¥å¤„ç†ï¼Œå¯ä»¥åœ¨å¹¶è¡Œå¤„ç†ä»»åŠ¡ä¸­ã€‚å¦‚æœä½ æ˜¯åœ¨æµç¨‹å®ä¾‹å±‚å¤„ç†ï¼Œæ•´ä¸ªæµç¨‹éƒ½ä¼šè¢«ä¸­æ–­ï¼Œå¦‚æœæ˜¯åœ¨å­æµç¨‹ä¸­ä½¿ç”¨ï¼Œé‚£ä¹ˆå½“å‰ä½œç”¨å’Œä½œç”¨åŸŸå†…çš„æ‰€æœ‰çš„å†…éƒ¨æµç¨‹éƒ½ä¼šè¢«ç»ˆæ­¢ã€‚å…·ä½“è¿˜æ˜¯é€šè¿‡ä¸¤ä¸ªæ¡ˆä¾‹æ¥ç»™å¤§å®¶ä»‹ç»ï¼š</p>\n<h4 id=\"æ¡ˆä¾‹ä¸€\"><a href=\"#æ¡ˆä¾‹ä¸€\" class=\"headerlink\" title=\"æ¡ˆä¾‹ä¸€\"></a>æ¡ˆä¾‹ä¸€</h4><p>æ¡ˆä¾‹ä¸€æˆ‘ä»¬ä»‹ç»æ²¡æœ‰å­æµç¨‹çš„æƒ…å†µä¸‹ç»ˆæ­¢çš„åœºæ™¯ï¼Œå…·ä½“æ¡ˆä¾‹å¦‚ä¸‹</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220331102808059.png\"\n                      alt=\"image-20220331102808059\"\n                ></p>\n<p>å®Œæ•´çš„xmlæ–‡ä»¶ï¼š</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=<span class=\"string\">&quot;1.0&quot;</span> encoding=<span class=\"string\">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">definitions</span> <span class=\"attr\">xmlns</span>=<span class=\"string\">&quot;http://www.omg.org/spec/BPMN/20100524/MODEL&quot;</span> <span class=\"attr\">xmlns:xsi</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span> <span class=\"attr\">xmlns:xsd</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema&quot;</span> <span class=\"attr\">xmlns:flowable</span>=<span class=\"string\">&quot;http://flowable.org/bpmn&quot;</span> <span class=\"attr\">xmlns:bpmndi</span>=<span class=\"string\">&quot;http://www.omg.org/spec/BPMN/20100524/DI&quot;</span> <span class=\"attr\">xmlns:omgdc</span>=<span class=\"string\">&quot;http://www.omg.org/spec/DD/20100524/DC&quot;</span> <span class=\"attr\">xmlns:omgdi</span>=<span class=\"string\">&quot;http://www.omg.org/spec/DD/20100524/DI&quot;</span> <span class=\"attr\">typeLanguage</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema&quot;</span> <span class=\"attr\">expressionLanguage</span>=<span class=\"string\">&quot;http://www.w3.org/1999/XPath&quot;</span> <span class=\"attr\">targetNamespace</span>=<span class=\"string\">&quot;http://www.flowable.org/processdef&quot;</span> <span class=\"attr\">exporter</span>=<span class=\"string\">&quot;Flowable Open Source Modeler&quot;</span> <span class=\"attr\">exporterVersion</span>=<span class=\"string\">&quot;6.7.2&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">process</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;event5002&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;ç»ˆæ­¢ç»“æŸäº‹ä»¶01&quot;</span> <span class=\"attr\">isExecutable</span>=<span class=\"string\">&quot;true&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">startEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;start01&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;å¼€å§‹äº‹ä»¶&quot;</span> <span class=\"attr\">flowable:formFieldValidation</span>=<span class=\"string\">&quot;true&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">startEvent</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">parallelGateway</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;p001&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;å¹¶è¡Œç½‘å…³&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">parallelGateway</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">parallelGateway</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;p004&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;å¹¶è¡Œç½‘å…³&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">parallelGateway</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">userTask</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;task2&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;ç”¨æˆ·ä»»åŠ¡äºŒ&quot;</span> <span class=\"attr\">flowable:assignee</span>=<span class=\"string\">&quot;lisi&quot;</span> <span class=\"attr\">flowable:formFieldValidation</span>=<span class=\"string\">&quot;true&quot;</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">extensionElements</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">modeler:initiator-can-complete</span> <span class=\"attr\">xmlns:modeler</span>=<span class=\"string\">&quot;http://flowable.org/modeler&quot;</span>&gt;</span>&lt;![CDATA[false]]&gt;<span class=\"tag\">&lt;/<span class=\"name\">modeler:initiator-can-complete</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">extensionElements</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">userTask</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;sid-E3A5580F-4CE3-4556-894E-46C3D2134071&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;p001&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;task2&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">userTask</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;task1&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;ç”¨æˆ·ä»»åŠ¡ä¸€&quot;</span> <span class=\"attr\">flowable:assignee</span>=<span class=\"string\">&quot;zhangsan&quot;</span> <span class=\"attr\">flowable:formFieldValidation</span>=<span class=\"string\">&quot;true&quot;</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">extensionElements</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">modeler:initiator-can-complete</span> <span class=\"attr\">xmlns:modeler</span>=<span class=\"string\">&quot;http://flowable.org/modeler&quot;</span>&gt;</span>&lt;![CDATA[false]]&gt;<span class=\"tag\">&lt;/<span class=\"name\">modeler:initiator-can-complete</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">extensionElements</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">userTask</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;sid-FF8C06ED-AE40-46A1-A898-9FA4B0D4665A&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;p001&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;task1&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">userTask</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;task3&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;ç”¨æˆ·ä»»åŠ¡ä¸‰&quot;</span> <span class=\"attr\">flowable:assignee</span>=<span class=\"string\">&quot;wangwu&quot;</span> <span class=\"attr\">flowable:formFieldValidation</span>=<span class=\"string\">&quot;true&quot;</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">extensionElements</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">modeler:initiator-can-complete</span> <span class=\"attr\">xmlns:modeler</span>=<span class=\"string\">&quot;http://flowable.org/modeler&quot;</span>&gt;</span>&lt;![CDATA[false]]&gt;<span class=\"tag\">&lt;/<span class=\"name\">modeler:initiator-can-complete</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">extensionElements</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">userTask</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;sid-226E06CD-07E8-4E38-A3FC-12CD417F54FC&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;p001&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;task3&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;sid-C1280677-F8B9-4C9C-B010-CEEA4DE17176&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;start01&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;p001&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;sid-F5ABC1D7-091F-4966-990F-44CE1A927869&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;task1&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;p004&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;sid-E1E26394-8B33-4766-9B3B-722958B91972&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;task2&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;p004&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">endEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;end003&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;ç»“æŸäº‹ä»¶&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">endEvent</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;sid-074345F1-5C34-435D-AECE-912DDBBBE105&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;p004&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;end003&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">exclusiveGateway</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;p003&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;æ’ä»–ç½‘å…³&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">exclusiveGateway</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">endEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;sid-E9A4380A-AAF8-464C-B14B-15A2C1F1C2D2&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;ç»ˆæ­¢ç»“æŸäº‹ä»¶&quot;</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">terminateEventDefinition</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">terminateEventDefinition</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">endEvent</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;sid-D00B6EDC-F2F4-4D8F-89BD-91272363CD49&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;task3&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;p003&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;sid-325962BF-7168-48C0-9107-B232A4627C10&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;p003&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;sid-E9A4380A-AAF8-464C-B14B-15A2C1F1C2D2&quot;</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">conditionExpression</span> <span class=\"attr\">xsi:type</span>=<span class=\"string\">&quot;tFormalExpression&quot;</span>&gt;</span>&lt;![CDATA[$&#123;flag&lt;=0&#125;]]&gt;<span class=\"tag\">&lt;/<span class=\"name\">conditionExpression</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;sid-413A98AF-8CAF-470C-B751-E32229801310&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;p003&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;p004&quot;</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">conditionExpression</span> <span class=\"attr\">xsi:type</span>=<span class=\"string\">&quot;tFormalExpression&quot;</span>&gt;</span>&lt;![CDATA[$&#123;flag&gt;0&#125;]]&gt;<span class=\"tag\">&lt;/<span class=\"name\">conditionExpression</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">process</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNDiagram</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNDiagram_event5002&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNPlane</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;event5002&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNPlane_event5002&quot;</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;start01&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_start01&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;30.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;30.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;102.5&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;253.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;p001&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_p001&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;40.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;40.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;287.5&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;248.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;p004&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_p004&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;40.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;40.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;720.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;248.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;task2&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_task2&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;80.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;100.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;372.5&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;228.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;task1&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_task1&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;80.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;100.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;372.5&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;105.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;task3&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_task3&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;80.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;100.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;377.5&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;390.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;end003&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_end003&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;28.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;28.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;805.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;254.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;p003&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_p003&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;40.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;40.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;570.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;410.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;sid-E9A4380A-AAF8-464C-B14B-15A2C1F1C2D2&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_sid-E9A4380A-AAF8-464C-B14B-15A2C1F1C2D2&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;28.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;28.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;576.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;495.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;sid-E1E26394-8B33-4766-9B3B-722958B91972&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_sid-E1E26394-8B33-4766-9B3B-722958B91972&quot;</span> <span class=\"attr\">flowable:sourceDockerX</span>=<span class=\"string\">&quot;50.0&quot;</span> <span class=\"attr\">flowable:sourceDockerY</span>=<span class=\"string\">&quot;40.0&quot;</span> <span class=\"attr\">flowable:targetDockerX</span>=<span class=\"string\">&quot;7.5&quot;</span> <span class=\"attr\">flowable:targetDockerY</span>=<span class=\"string\">&quot;19.0&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;472.4499999999732&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;268.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;596.25&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;268.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;596.25&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;267.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;720.9525123715264&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;267.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;sid-226E06CD-07E8-4E38-A3FC-12CD417F54FC&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_sid-226E06CD-07E8-4E38-A3FC-12CD417F54FC&quot;</span> <span class=\"attr\">flowable:sourceDockerX</span>=<span class=\"string\">&quot;20.5&quot;</span> <span class=\"attr\">flowable:sourceDockerY</span>=<span class=\"string\">&quot;20.5&quot;</span> <span class=\"attr\">flowable:targetDockerX</span>=<span class=\"string\">&quot;50.0&quot;</span> <span class=\"attr\">flowable:targetDockerY</span>=<span class=\"string\">&quot;40.0&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;308.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;287.4441367574257&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;308.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;430.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;377.5&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;430.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;sid-325962BF-7168-48C0-9107-B232A4627C10&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_sid-325962BF-7168-48C0-9107-B232A4627C10&quot;</span> <span class=\"attr\">flowable:sourceDockerX</span>=<span class=\"string\">&quot;19.53125&quot;</span> <span class=\"attr\">flowable:sourceDockerY</span>=<span class=\"string\">&quot;34.5&quot;</span> <span class=\"attr\">flowable:targetDockerX</span>=<span class=\"string\">&quot;14.0&quot;</span> <span class=\"attr\">flowable:targetDockerY</span>=<span class=\"string\">&quot;14.0&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;589.5677159590043&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;449.51771595900436&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;589.8981518165715&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;495.0001397608249&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;sid-F5ABC1D7-091F-4966-990F-44CE1A927869&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_sid-F5ABC1D7-091F-4966-990F-44CE1A927869&quot;</span> <span class=\"attr\">flowable:sourceDockerX</span>=<span class=\"string\">&quot;50.0&quot;</span> <span class=\"attr\">flowable:sourceDockerY</span>=<span class=\"string\">&quot;40.0&quot;</span> <span class=\"attr\">flowable:targetDockerX</span>=<span class=\"string\">&quot;20.0&quot;</span> <span class=\"attr\">flowable:targetDockerY</span>=<span class=\"string\">&quot;1.0&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;472.44999999982196&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;145.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;740.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;145.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;740.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;248.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;sid-D00B6EDC-F2F4-4D8F-89BD-91272363CD49&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_sid-D00B6EDC-F2F4-4D8F-89BD-91272363CD49&quot;</span> <span class=\"attr\">flowable:sourceDockerX</span>=<span class=\"string\">&quot;50.0&quot;</span> <span class=\"attr\">flowable:sourceDockerY</span>=<span class=\"string\">&quot;40.0&quot;</span> <span class=\"attr\">flowable:targetDockerX</span>=<span class=\"string\">&quot;7.0&quot;</span> <span class=\"attr\">flowable:targetDockerY</span>=<span class=\"string\">&quot;22.0&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;477.449999999998&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;430.66822742474915&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;571.9322033898305&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;431.93220338983053&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;sid-E3A5580F-4CE3-4556-894E-46C3D2134071&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_sid-E3A5580F-4CE3-4556-894E-46C3D2134071&quot;</span> <span class=\"attr\">flowable:sourceDockerX</span>=<span class=\"string\">&quot;20.5&quot;</span> <span class=\"attr\">flowable:sourceDockerY</span>=<span class=\"string\">&quot;20.5&quot;</span> <span class=\"attr\">flowable:targetDockerX</span>=<span class=\"string\">&quot;50.0&quot;</span> <span class=\"attr\">flowable:targetDockerY</span>=<span class=\"string\">&quot;40.0&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;327.0247370727432&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;268.4166666666667&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;372.49999999998806&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;268.2181222707423&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;sid-074345F1-5C34-435D-AECE-912DDBBBE105&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_sid-074345F1-5C34-435D-AECE-912DDBBBE105&quot;</span> <span class=\"attr\">flowable:sourceDockerX</span>=<span class=\"string\">&quot;20.5&quot;</span> <span class=\"attr\">flowable:sourceDockerY</span>=<span class=\"string\">&quot;20.5&quot;</span> <span class=\"attr\">flowable:targetDockerX</span>=<span class=\"string\">&quot;14.0&quot;</span> <span class=\"attr\">flowable:targetDockerY</span>=<span class=\"string\">&quot;14.0&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;759.5591869398207&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;268.37820512820514&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;805.0002755524882&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;268.08885188426405&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;sid-C1280677-F8B9-4C9C-B010-CEEA4DE17176&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_sid-C1280677-F8B9-4C9C-B010-CEEA4DE17176&quot;</span> <span class=\"attr\">flowable:sourceDockerX</span>=<span class=\"string\">&quot;15.0&quot;</span> <span class=\"attr\">flowable:sourceDockerY</span>=<span class=\"string\">&quot;15.0&quot;</span> <span class=\"attr\">flowable:targetDockerX</span>=<span class=\"string\">&quot;20.0&quot;</span> <span class=\"attr\">flowable:targetDockerY</span>=<span class=\"string\">&quot;20.0&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;132.44999949366624&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;268.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;287.5&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;268.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;sid-413A98AF-8CAF-470C-B751-E32229801310&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_sid-413A98AF-8CAF-470C-B751-E32229801310&quot;</span> <span class=\"attr\">flowable:sourceDockerX</span>=<span class=\"string\">&quot;37.5&quot;</span> <span class=\"attr\">flowable:sourceDockerY</span>=<span class=\"string\">&quot;20.4375&quot;</span> <span class=\"attr\">flowable:targetDockerX</span>=<span class=\"string\">&quot;22.5&quot;</span> <span class=\"attr\">flowable:targetDockerY</span>=<span class=\"string\">&quot;31.0&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;609.5117551813031&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;430.4375&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;742.5&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;430.4375&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;742.5&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;285.402097959858&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;sid-FF8C06ED-AE40-46A1-A898-9FA4B0D4665A&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_sid-FF8C06ED-AE40-46A1-A898-9FA4B0D4665A&quot;</span> <span class=\"attr\">flowable:sourceDockerX</span>=<span class=\"string\">&quot;20.5&quot;</span> <span class=\"attr\">flowable:sourceDockerY</span>=<span class=\"string\">&quot;20.5&quot;</span> <span class=\"attr\">flowable:targetDockerX</span>=<span class=\"string\">&quot;50.0&quot;</span> <span class=\"attr\">flowable:targetDockerY</span>=<span class=\"string\">&quot;40.0&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;308.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;248.5&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;308.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;145.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;372.5&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;145.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNPlane</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNDiagram</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">definitions</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>æµç¨‹å®šä¹‰è¯´æ˜ï¼šå¹¶è¡Œç½‘å…³ä¸­3ä¸ªäººå·¥å®¡æ ¸ä»»åŠ¡ï¼Œåˆ†åˆ«åˆ†é…çš„ç”¨æˆ·ä¸ºzhangsan lisi wangwu ï¼Œç„¶ååœ¨wangwuå®¡æ ¸åä¼šè¿›å…¥ä¸€ä¸ªæ’ä»–ç½‘å…³ï¼Œå¦‚æœflagæ˜¯å°äºç­‰äº0å°±ä¼šè§¦å‘ç»ˆæ­¢ç»“æŸäº‹ä»¶ã€‚</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;sid-89945688-1D51-4391-A713-3E77ADB2FA06&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;p001&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;stop001&quot;</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">conditionExpression</span> <span class=\"attr\">xsi:type</span>=<span class=\"string\">&quot;tFormalExpression&quot;</span>&gt;</span>&lt;![CDATA[$&#123;flag&lt;=0&#125;]]&gt;<span class=\"tag\">&lt;/<span class=\"name\">conditionExpression</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>å…·ä½“æ“ä½œï¼šéƒ¨ç½²æµç¨‹â€“&gt;å¯åŠ¨æµç¨‹å®ä¾‹â€“&gt;wanwu å¤„ç†ä»»åŠ¡ã€æµç¨‹å®ä¾‹ flag &lt;&#x3D; 0ã€‘ è§¦å‘ä»»åŠ¡</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">test02</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> Exception&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"type\">Deployment</span> <span class=\"variable\">deployment</span> <span class=\"operator\">=</span> processEngine.getRepositoryService().createDeployment()</span><br><span class=\"line\">            .addClasspathResource(<span class=\"string\">&quot;ç»ˆæ­¢æµç¨‹1.bpmn20.xml&quot;</span>)</span><br><span class=\"line\">            .name(<span class=\"string\">&quot;ç»ˆæ­¢æµç¨‹1&quot;</span>)</span><br><span class=\"line\">            .deploy();</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;-----&quot;</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>å¯åŠ¨æµç¨‹å®ä¾‹</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">startProcessInstanceByKey</span><span class=\"params\">()</span>  <span class=\"keyword\">throws</span> Exception&#123;</span><br><span class=\"line\">    <span class=\"comment\">// è®¾ç½®å¯¹åº”çš„æµç¨‹å˜é‡çš„å€¼</span></span><br><span class=\"line\">    Map&lt;String,Object&gt; map = <span class=\"keyword\">new</span> <span class=\"title class_\">HashMap</span>&lt;&gt;();</span><br><span class=\"line\">    map.put(<span class=\"string\">&quot;flag&quot;</span>,<span class=\"number\">0</span>);<span class=\"comment\">// è®¾ç½®flagä¸º0è§¦å‘æµç¨‹ç»“æŸäº‹ä»¶</span></span><br><span class=\"line\">    processEngine.getRuntimeService()</span><br><span class=\"line\">            .startProcessInstanceById(<span class=\"string\">&quot;event3001:1:8b1663fa-b02d-11ec-b480-c03c59ad2248&quot;</span>,map);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>è¿™æ—¶å¯ä»¥çœ‹åˆ°ä¸‰ä¸ªå¹¶è¡Œçš„Taskä»»åŠ¡ï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220330213147240.png\"\n                      alt=\"image-20220330213147240\"\n                ></p>\n<p>è¿™æ—¶æˆ‘ä»¬åªéœ€ç‹äº”æ¥å¤„ç†å³å¯ï¼Œåœ¨ä¸Šä¸€æ­¥ä¸­æˆ‘ä»¬å·²ç»å¯¹æµç¨‹å˜é‡èµ‹å€¼äº†</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">completeTask</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"type\">TaskService</span> <span class=\"variable\">taskService</span> <span class=\"operator\">=</span> processEngine.getTaskService();</span><br><span class=\"line\">    <span class=\"type\">Task</span> <span class=\"variable\">task</span> <span class=\"operator\">=</span> taskService.createTaskQuery()</span><br><span class=\"line\">            .processDefinitionId(<span class=\"string\">&quot;event3001:1:8b1663fa-b02d-11ec-b480-c03c59ad2248&quot;</span>)</span><br><span class=\"line\">            .taskAssignee(<span class=\"string\">&quot;wangwu&quot;</span>)</span><br><span class=\"line\">            .singleResult();</span><br><span class=\"line\">    taskService.complete(task.getId());</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ç„¶åå†å»çœ‹Taskè¡¨ä¸­å·²ç»æ²¡æœ‰å¦å¤–ä¸¤æ¡è®°å½•äº†å“¦</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220330213516673.png\"\n                      alt=\"image-20220330213516673\"\n                ></p>\n<p>é€šè¿‡æ¡ˆä¾‹å¯ä»¥çœ‹åˆ°åœ¨æ²¡æœ‰å­æµç¨‹çš„æƒ…å†µä¸‹ï¼Œç»ˆæ­¢ç»“æŸäº‹ä»¶ä¼šæŠŠæ•´ä¸ªæµç¨‹éƒ½è¿›ç¨‹éƒ½ç»“æŸäº†ï¼Œè€Œä¸”åœ¨å†å²è®°å½•ä¸­ä¹Ÿå¯ä»¥çœ‹åˆ°ä¿¡æ¯</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220330215127129.png\"\n                      alt=\"image-20220330215127129\"\n                ></p>\n<h4 id=\"æ¡ˆä¾‹äºŒ\"><a href=\"#æ¡ˆä¾‹äºŒ\" class=\"headerlink\" title=\"æ¡ˆä¾‹äºŒ\"></a>æ¡ˆä¾‹äºŒ</h4><p>ç„¶åæˆ‘ä»¬æ¥çœ‹çœ‹åœ¨å­æµç¨‹ä¸­è§¦å‘ç»ˆæ­¢ç»“æŸäº‹ä»¶çš„æ¡ˆä¾‹ï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220330220208085.png\"\n                      alt=\"image-20220330220208085\"\n                ></p>\n<p>å®Œæ•´çš„xmlå†…å®¹ï¼š</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=<span class=\"string\">&quot;1.0&quot;</span> encoding=<span class=\"string\">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">definitions</span> <span class=\"attr\">xmlns</span>=<span class=\"string\">&quot;http://www.omg.org/spec/BPMN/20100524/MODEL&quot;</span> <span class=\"attr\">xmlns:xsi</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span> <span class=\"attr\">xmlns:xsd</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema&quot;</span> <span class=\"attr\">xmlns:flowable</span>=<span class=\"string\">&quot;http://flowable.org/bpmn&quot;</span> <span class=\"attr\">xmlns:bpmndi</span>=<span class=\"string\">&quot;http://www.omg.org/spec/BPMN/20100524/DI&quot;</span> <span class=\"attr\">xmlns:omgdc</span>=<span class=\"string\">&quot;http://www.omg.org/spec/DD/20100524/DC&quot;</span> <span class=\"attr\">xmlns:omgdi</span>=<span class=\"string\">&quot;http://www.omg.org/spec/DD/20100524/DI&quot;</span> <span class=\"attr\">typeLanguage</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema&quot;</span> <span class=\"attr\">expressionLanguage</span>=<span class=\"string\">&quot;http://www.w3.org/1999/XPath&quot;</span> <span class=\"attr\">targetNamespace</span>=<span class=\"string\">&quot;http://www.flowable.org/processdef&quot;</span> <span class=\"attr\">exporter</span>=<span class=\"string\">&quot;Flowable Open Source Modeler&quot;</span> <span class=\"attr\">exporterVersion</span>=<span class=\"string\">&quot;6.7.2&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">process</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;event3002&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;ç»ˆæ­¢æµç¨‹2&quot;</span> <span class=\"attr\">isExecutable</span>=<span class=\"string\">&quot;true&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">startEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;start01&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;ä»»åŠ¡å¼€å§‹&quot;</span> <span class=\"attr\">flowable:formFieldValidation</span>=<span class=\"string\">&quot;true&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">startEvent</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">userTask</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;task2&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;ç”¨æˆ·ä»»åŠ¡äºŒ&quot;</span> <span class=\"attr\">flowable:assignee</span>=<span class=\"string\">&quot;lisi&quot;</span> <span class=\"attr\">flowable:formFieldValidation</span>=<span class=\"string\">&quot;true&quot;</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">extensionElements</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">modeler:initiator-can-complete</span> <span class=\"attr\">xmlns:modeler</span>=<span class=\"string\">&quot;http://flowable.org/modeler&quot;</span>&gt;</span>&lt;![CDATA[false]]&gt;<span class=\"tag\">&lt;/<span class=\"name\">modeler:initiator-can-complete</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">extensionElements</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">userTask</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;sid-03E93AD6-F173-454F-B29F-B61FE45BE1E0&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;b001&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;task2&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">userTask</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;task1&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;ç”¨æˆ·ä»»åŠ¡ä¸€&quot;</span> <span class=\"attr\">flowable:assignee</span>=<span class=\"string\">&quot;zhangsan&quot;</span> <span class=\"attr\">flowable:formFieldValidation</span>=<span class=\"string\">&quot;true&quot;</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">extensionElements</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">modeler:initiator-can-complete</span> <span class=\"attr\">xmlns:modeler</span>=<span class=\"string\">&quot;http://flowable.org/modeler&quot;</span>&gt;</span>&lt;![CDATA[false]]&gt;<span class=\"tag\">&lt;/<span class=\"name\">modeler:initiator-can-complete</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">extensionElements</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">userTask</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;sid-A4455D52-7DAF-4193-9E4F-D75E133A6EDD&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;b001&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;task1&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">subProcess</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;sid-7A5C1ACB-D07C-407D-83BB-C55D04425AC7&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;subProcess&quot;</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">startEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;cstart01&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;å­æµç¨‹å¼€å§‹&quot;</span> <span class=\"attr\">flowable:formFieldValidation</span>=<span class=\"string\">&quot;true&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">startEvent</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">userTask</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;taskc01&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;å­äººå·¥ä»»åŠ¡ä¸€&quot;</span> <span class=\"attr\">flowable:assignee</span>=<span class=\"string\">&quot;user1&quot;</span> <span class=\"attr\">flowable:formFieldValidation</span>=<span class=\"string\">&quot;true&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">extensionElements</span>&gt;</span></span><br><span class=\"line\">          <span class=\"tag\">&lt;<span class=\"name\">modeler:initiator-can-complete</span> <span class=\"attr\">xmlns:modeler</span>=<span class=\"string\">&quot;http://flowable.org/modeler&quot;</span>&gt;</span>&lt;![CDATA[false]]&gt;<span class=\"tag\">&lt;/<span class=\"name\">modeler:initiator-can-complete</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">extensionElements</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">userTask</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">exclusiveGateway</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;p001&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;æ’ä»–ç½‘å…³&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">exclusiveGateway</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">userTask</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;taskc02&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;å­äººå·¥ä»»åŠ¡äºŒ&quot;</span> <span class=\"attr\">flowable:assignee</span>=<span class=\"string\">&quot;user2&quot;</span> <span class=\"attr\">flowable:formFieldValidation</span>=<span class=\"string\">&quot;true&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">extensionElements</span>&gt;</span></span><br><span class=\"line\">          <span class=\"tag\">&lt;<span class=\"name\">modeler:initiator-can-complete</span> <span class=\"attr\">xmlns:modeler</span>=<span class=\"string\">&quot;http://flowable.org/modeler&quot;</span>&gt;</span>&lt;![CDATA[false]]&gt;<span class=\"tag\">&lt;/<span class=\"name\">modeler:initiator-can-complete</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">extensionElements</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">userTask</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">endEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;endc01&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;å­æµç¨‹ç»“æŸ&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">endEvent</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">endEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;sid-BD67523C-DDDA-46B8-A788-C54769B081B1&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">terminateEventDefinition</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">terminateEventDefinition</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">endEvent</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;sid-2E0A3425-3C34-4771-85C0-C8C7B7D7BFF5&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;cstart01&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;taskc01&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;sid-B0777673-C3BE-488B-87B2-34A71CEE2C73&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;taskc01&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;p001&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;sid-3C938AB5-2FDF-4C0B-AED8-15853AB07FE8&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;taskc02&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;endc01&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;sid-AAC6E950-F7BD-454A-9105-F43E5D4530A1&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;p001&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;sid-BD67523C-DDDA-46B8-A788-C54769B081B1&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">conditionExpression</span> <span class=\"attr\">xsi:type</span>=<span class=\"string\">&quot;tFormalExpression&quot;</span>&gt;</span>&lt;![CDATA[$&#123;flag&lt;=0&#125;]]&gt;<span class=\"tag\">&lt;/<span class=\"name\">conditionExpression</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;sid-EFCAE414-03A4-4313-B97A-4BF962888C37&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;p001&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;taskc02&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">conditionExpression</span> <span class=\"attr\">xsi:type</span>=<span class=\"string\">&quot;tFormalExpression&quot;</span>&gt;</span>&lt;![CDATA[$&#123;flag&gt;0&#125;]]&gt;<span class=\"tag\">&lt;/<span class=\"name\">conditionExpression</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">subProcess</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">parallelGateway</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;b001&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;å¹¶è¡Œç½‘å…³&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">parallelGateway</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;sid-D87CB0F6-EF35-479A-80A7-5FDACF1022E1&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;start01&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;b001&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">parallelGateway</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;b002&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;å¹¶è¡Œç½‘å…³&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">parallelGateway</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;sid-200E2768-DCA0-4FAD-A3C0-2D69938379A2&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;task2&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;b002&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;sid-A554CEA8-FD95-4EA4-BED3-EA748273D775&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;sid-7A5C1ACB-D07C-407D-83BB-C55D04425AC7&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;b002&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;sid-C5FB6E94-3563-49C8-9BA2-C0C80670E9FD&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;task1&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;b002&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">endEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;end003&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;ç»“æŸäº‹ä»¶&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">endEvent</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;sid-679D7677-4828-4BCF-9F2E-CBC426D4B72B&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;b002&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;end003&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;sid-0264CAD1-386A-4A4F-ADDA-DCF62EE90594&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;b001&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;sid-7A5C1ACB-D07C-407D-83BB-C55D04425AC7&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">process</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNDiagram</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNDiagram_event3002&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNPlane</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;event3002&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNPlane_event3002&quot;</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;start01&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_start01&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;30.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;30.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;75.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;200.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;task2&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_task2&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;80.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;100.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;420.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;175.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;task1&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_task1&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;80.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;100.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;420.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;15.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;sid-7A5C1ACB-D07C-407D-83BB-C55D04425AC7&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_sid-7A5C1ACB-D07C-407D-83BB-C55D04425AC7&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;187.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;531.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;285.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;330.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;cstart01&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_cstart01&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;30.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;30.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;322.5&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;410.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;taskc01&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_taskc01&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;80.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;100.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;390.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;385.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;p001&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_p001&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;40.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;40.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;542.5&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;405.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;taskc02&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_taskc02&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;80.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;100.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;627.5&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;385.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;endc01&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_endc01&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;28.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;28.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;765.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;411.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;sid-BD67523C-DDDA-46B8-A788-C54769B081B1&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_sid-BD67523C-DDDA-46B8-A788-C54769B081B1&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;28.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;28.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;548.5&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;480.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;b001&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_b001&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;40.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;40.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;165.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;195.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;b002&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_b002&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;40.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;40.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;867.5&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;195.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;end003&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_end003&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;28.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;28.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;960.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;207.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;sid-EFCAE414-03A4-4313-B97A-4BF962888C37&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_sid-EFCAE414-03A4-4313-B97A-4BF962888C37&quot;</span> <span class=\"attr\">flowable:sourceDockerX</span>=<span class=\"string\">&quot;20.5&quot;</span> <span class=\"attr\">flowable:sourceDockerY</span>=<span class=\"string\">&quot;20.5&quot;</span> <span class=\"attr\">flowable:targetDockerX</span>=<span class=\"string\">&quot;50.0&quot;</span> <span class=\"attr\">flowable:targetDockerY</span>=<span class=\"string\">&quot;40.0&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;582.0247370727355&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;425.41666666666663&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;627.4999999999881&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;425.2181222707423&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;sid-3C938AB5-2FDF-4C0B-AED8-15853AB07FE8&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_sid-3C938AB5-2FDF-4C0B-AED8-15853AB07FE8&quot;</span> <span class=\"attr\">flowable:sourceDockerX</span>=<span class=\"string\">&quot;50.0&quot;</span> <span class=\"attr\">flowable:sourceDockerY</span>=<span class=\"string\">&quot;40.0&quot;</span> <span class=\"attr\">flowable:targetDockerX</span>=<span class=\"string\">&quot;14.0&quot;</span> <span class=\"attr\">flowable:targetDockerY</span>=<span class=\"string\">&quot;14.0&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;727.4499999997752&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;425.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;765.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;425.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;sid-2E0A3425-3C34-4771-85C0-C8C7B7D7BFF5&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_sid-2E0A3425-3C34-4771-85C0-C8C7B7D7BFF5&quot;</span> <span class=\"attr\">flowable:sourceDockerX</span>=<span class=\"string\">&quot;15.0&quot;</span> <span class=\"attr\">flowable:sourceDockerY</span>=<span class=\"string\">&quot;15.0&quot;</span> <span class=\"attr\">flowable:targetDockerX</span>=<span class=\"string\">&quot;50.0&quot;</span> <span class=\"attr\">flowable:targetDockerY</span>=<span class=\"string\">&quot;40.0&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;352.449998261009&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;425.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;390.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;425.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;sid-A554CEA8-FD95-4EA4-BED3-EA748273D775&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_sid-A554CEA8-FD95-4EA4-BED3-EA748273D775&quot;</span> <span class=\"attr\">flowable:sourceDockerX</span>=<span class=\"string\">&quot;265.5&quot;</span> <span class=\"attr\">flowable:sourceDockerY</span>=<span class=\"string\">&quot;93.5&quot;</span> <span class=\"attr\">flowable:targetDockerX</span>=<span class=\"string\">&quot;20.5&quot;</span> <span class=\"attr\">flowable:targetDockerY</span>=<span class=\"string\">&quot;20.5&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;815.95&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;423.5&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;888.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;423.5&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;888.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;234.40453342953353&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;sid-AAC6E950-F7BD-454A-9105-F43E5D4530A1&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_sid-AAC6E950-F7BD-454A-9105-F43E5D4530A1&quot;</span> <span class=\"attr\">flowable:sourceDockerX</span>=<span class=\"string\">&quot;20.5&quot;</span> <span class=\"attr\">flowable:sourceDockerY</span>=<span class=\"string\">&quot;20.5&quot;</span> <span class=\"attr\">flowable:targetDockerX</span>=<span class=\"string\">&quot;14.0&quot;</span> <span class=\"attr\">flowable:targetDockerY</span>=<span class=\"string\">&quot;14.0&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;562.8602941176471&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;444.5752202643172&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;562.6018221538329&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;480.0003662069823&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;sid-200E2768-DCA0-4FAD-A3C0-2D69938379A2&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_sid-200E2768-DCA0-4FAD-A3C0-2D69938379A2&quot;</span> <span class=\"attr\">flowable:sourceDockerX</span>=<span class=\"string\">&quot;50.0&quot;</span> <span class=\"attr\">flowable:sourceDockerY</span>=<span class=\"string\">&quot;40.0&quot;</span> <span class=\"attr\">flowable:targetDockerX</span>=<span class=\"string\">&quot;20.5&quot;</span> <span class=\"attr\">flowable:targetDockerY</span>=<span class=\"string\">&quot;20.5&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;519.949999999999&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;215.05974880382777&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;867.97604790418&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;215.4760479041916&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;sid-B0777673-C3BE-488B-87B2-34A71CEE2C73&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_sid-B0777673-C3BE-488B-87B2-34A71CEE2C73&quot;</span> <span class=\"attr\">flowable:sourceDockerX</span>=<span class=\"string\">&quot;50.0&quot;</span> <span class=\"attr\">flowable:sourceDockerY</span>=<span class=\"string\">&quot;40.0&quot;</span> <span class=\"attr\">flowable:targetDockerX</span>=<span class=\"string\">&quot;20.5&quot;</span> <span class=\"attr\">flowable:targetDockerY</span>=<span class=\"string\">&quot;20.5&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;489.9499999999965&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;425.2030487804878&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;542.9183673469388&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;425.4183673469388&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;sid-679D7677-4828-4BCF-9F2E-CBC426D4B72B&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_sid-679D7677-4828-4BCF-9F2E-CBC426D4B72B&quot;</span> <span class=\"attr\">flowable:sourceDockerX</span>=<span class=\"string\">&quot;20.5&quot;</span> <span class=\"attr\">flowable:sourceDockerY</span>=<span class=\"string\">&quot;20.5&quot;</span> <span class=\"attr\">flowable:targetDockerX</span>=<span class=\"string\">&quot;14.0&quot;</span> <span class=\"attr\">flowable:targetDockerY</span>=<span class=\"string\">&quot;14.0&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;906.92933478735&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;215.5&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;933.75&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;215.5&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;933.75&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;221.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;960.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;221.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;sid-D87CB0F6-EF35-479A-80A7-5FDACF1022E1&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_sid-D87CB0F6-EF35-479A-80A7-5FDACF1022E1&quot;</span> <span class=\"attr\">flowable:sourceDockerX</span>=<span class=\"string\">&quot;15.0&quot;</span> <span class=\"attr\">flowable:sourceDockerY</span>=<span class=\"string\">&quot;15.0&quot;</span> <span class=\"attr\">flowable:targetDockerX</span>=<span class=\"string\">&quot;20.0&quot;</span> <span class=\"attr\">flowable:targetDockerY</span>=<span class=\"string\">&quot;20.0&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;104.94999797575196&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;215.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;165.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;215.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;sid-0264CAD1-386A-4A4F-ADDA-DCF62EE90594&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_sid-0264CAD1-386A-4A4F-ADDA-DCF62EE90594&quot;</span> <span class=\"attr\">flowable:sourceDockerX</span>=<span class=\"string\">&quot;22.5&quot;</span> <span class=\"attr\">flowable:sourceDockerY</span>=<span class=\"string\">&quot;32.015625&quot;</span> <span class=\"attr\">flowable:targetDockerX</span>=<span class=\"string\">&quot;1.1773835920177385&quot;</span> <span class=\"attr\">flowable:targetDockerY</span>=<span class=\"string\">&quot;93.5&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;187.5&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;232.44861780088067&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;187.5&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;423.5&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;285.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;423.5&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;sid-03E93AD6-F173-454F-B29F-B61FE45BE1E0&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_sid-03E93AD6-F173-454F-B29F-B61FE45BE1E0&quot;</span> <span class=\"attr\">flowable:sourceDockerX</span>=<span class=\"string\">&quot;20.5&quot;</span> <span class=\"attr\">flowable:sourceDockerY</span>=<span class=\"string\">&quot;20.5&quot;</span> <span class=\"attr\">flowable:targetDockerX</span>=<span class=\"string\">&quot;50.0&quot;</span> <span class=\"attr\">flowable:targetDockerY</span>=<span class=\"string\">&quot;40.0&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;204.4800158394907&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;215.46654929577466&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;419.99999999998107&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;215.08778558875218&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;sid-A4455D52-7DAF-4193-9E4F-D75E133A6EDD&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_sid-A4455D52-7DAF-4193-9E4F-D75E133A6EDD&quot;</span> <span class=\"attr\">flowable:sourceDockerX</span>=<span class=\"string\">&quot;20.5&quot;</span> <span class=\"attr\">flowable:sourceDockerY</span>=<span class=\"string\">&quot;20.5&quot;</span> <span class=\"attr\">flowable:targetDockerX</span>=<span class=\"string\">&quot;50.0&quot;</span> <span class=\"attr\">flowable:targetDockerY</span>=<span class=\"string\">&quot;40.0&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;185.5&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;195.5&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;185.5&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;55.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;420.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;55.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;sid-C5FB6E94-3563-49C8-9BA2-C0C80670E9FD&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_sid-C5FB6E94-3563-49C8-9BA2-C0C80670E9FD&quot;</span> <span class=\"attr\">flowable:sourceDockerX</span>=<span class=\"string\">&quot;50.0&quot;</span> <span class=\"attr\">flowable:sourceDockerY</span>=<span class=\"string\">&quot;40.0&quot;</span> <span class=\"attr\">flowable:targetDockerX</span>=<span class=\"string\">&quot;20.0&quot;</span> <span class=\"attr\">flowable:targetDockerY</span>=<span class=\"string\">&quot;13.7109375&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;519.95&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;55.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;887.5&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;55.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;887.5&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;195.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNPlane</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNDiagram</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">definitions</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>æµç¨‹è¯´æ˜ï¼šäººå·¥ä»»åŠ¡ä¸€ â€“&gt;zhangsan  äººå·¥ä»»åŠ¡äºŒ â€“&gt;lisi  å­äººå·¥ä»»åŠ¡ä¸€ ï¼š user1 å­äººå·¥ä»»åŠ¡äºŒ ï¼š user2</p>\n<p>å­ä»»åŠ¡å®Œæˆä»»åŠ¡å¦‚æœflag&lt;&#x3D;0,é‚£ä¹ˆå­æµç¨‹ä¸­æ–­ç»“æŸï¼Œå­äººå·¥ä»»åŠ¡äºŒä¸ä¼šè§¦å‘</p>\n<p>éƒ¨ç½²æµç¨‹</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">test02</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> Exception&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"type\">Deployment</span> <span class=\"variable\">deployment</span> <span class=\"operator\">=</span> processEngine.getRepositoryService().createDeployment()</span><br><span class=\"line\">            .addClasspathResource(<span class=\"string\">&quot;ç»ˆæ­¢æµç¨‹2.bpmn20.xml&quot;</span>)</span><br><span class=\"line\">            .name(<span class=\"string\">&quot;ç»ˆæ­¢æµç¨‹2&quot;</span>)</span><br><span class=\"line\">            .deploy();</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;-----&quot;</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ç„¶åå¯åŠ¨æµç¨‹</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">startProcessInstanceByKey</span><span class=\"params\">()</span>  <span class=\"keyword\">throws</span> Exception&#123;</span><br><span class=\"line\">    <span class=\"comment\">// è®¾ç½®å¯¹åº”çš„æµç¨‹å˜é‡çš„å€¼</span></span><br><span class=\"line\">    Map&lt;String,Object&gt; map = <span class=\"keyword\">new</span> <span class=\"title class_\">HashMap</span>&lt;&gt;();</span><br><span class=\"line\">    map.put(<span class=\"string\">&quot;flag&quot;</span>,<span class=\"number\">0</span>);<span class=\"comment\">// è®¾ç½®flagä¸º0è§¦å‘æµç¨‹ç»“æŸäº‹ä»¶</span></span><br><span class=\"line\">    processEngine.getRuntimeService()</span><br><span class=\"line\">            .startProcessInstanceById(<span class=\"string\">&quot;event3002:1:92679bec-b03d-11ec-901e-c03c59ad2248&quot;</span>,map);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>è¿™æ—¶åœ¨ACT_RU_TASKä¸­å°±åº”è¯¥æœ‰ä¸‰æ¡å¯¹åº”çš„TASKè®°å½•äº†</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220330232643286.png\"\n                      alt=\"image-20220330232643286\"\n                ></p>\n<p>ç„¶åæˆ‘ä»¬æ‰§è¡Œ<code>user1</code>çš„å­ä»»åŠ¡ï¼Œå› ä¸ºç°åœ¨æµç¨‹å˜é‡<code>flag=0</code>æ‰€ä»¥ä¼šè§¦å‘ç»ˆæ­¢ç»“æŸäº‹ä»¶</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220330232801450.png\"\n                      alt=\"image-20220330232801450\"\n                ></p>\n<p>æ‰§è¡Œä»»åŠ¡ï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">completeTask</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"type\">TaskService</span> <span class=\"variable\">taskService</span> <span class=\"operator\">=</span> processEngine.getTaskService();</span><br><span class=\"line\">    <span class=\"type\">Task</span> <span class=\"variable\">task</span> <span class=\"operator\">=</span> taskService.createTaskQuery()</span><br><span class=\"line\">            .processDefinitionId(<span class=\"string\">&quot;event3002:1:92679bec-b03d-11ec-901e-c03c59ad2248&quot;</span>)</span><br><span class=\"line\">            .taskAssignee(<span class=\"string\">&quot;user1&quot;</span>)</span><br><span class=\"line\">            .singleResult();</span><br><span class=\"line\">    taskService.complete(task.getId());</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>æ‰§è¡ŒæˆåŠŸåæˆ‘ä»¬å¯ä»¥å‘ç°å­äººå·¥ä»»åŠ¡ä¸€æ²¡æœ‰äº†ï¼Œä½†æ˜¯ä¹Ÿæ²¡æœ‰å­äººå·¥ä»»åŠ¡äºŒï¼Œä½†æ˜¯ä¸»æµç¨‹ä¸­çš„ä¸¤ä¸ªä»»åŠ¡éƒ½è¿˜åœ¨</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220330232959807.png\"\n                      alt=\"image-20220330232959807\"\n                ></p>\n<p>è€Œä¸”è¿›å…¥åˆ°å†å²æ•°æ®ä¸­ä¹Ÿå¯ä»¥çœ‹åˆ°</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220330233448096.png\"\n                      alt=\"image-20220330233448096\"\n                ></p>\n<h3 id=\"å–æ¶ˆç»“æŸäº‹ä»¶\"><a href=\"#å–æ¶ˆç»“æŸäº‹ä»¶\" class=\"headerlink\" title=\"å–æ¶ˆç»“æŸäº‹ä»¶\"></a>å–æ¶ˆç»“æŸäº‹ä»¶</h3><p>å–æ¶ˆç»“æŸäº‹ä»¶ï¼ˆcancel end eventï¼‰åªèƒ½ä¸BPMNäº‹åŠ¡å­æµç¨‹ï¼ˆBPMN transaction subprocessï¼‰ä¸€èµ·ä½¿ç”¨ã€‚å½“åˆ°è¾¾å–æ¶ˆç»“æŸäº‹ä»¶æ—¶ï¼Œä¼šæŠ›å‡ºå–æ¶ˆäº‹ä»¶ï¼Œä¸”å¿…é¡»ç”±å–æ¶ˆè¾¹ç•Œäº‹ä»¶ï¼ˆcancel boundary eventï¼‰æ•è·ã€‚å–æ¶ˆè¾¹ç•Œäº‹ä»¶å°†å–æ¶ˆäº‹åŠ¡ï¼Œå¹¶è§¦å‘è¡¥å¿ï¼ˆcompensationï¼‰ã€‚</p>\n<p>å…·ä½“é€šè¿‡æ¡ˆä¾‹æ¥è®²è§£ï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220401110131810.png\"\n                      alt=\"image-20220401110131810\"\n                ></p>\n<p>ç»“æŸå–æ¶ˆäº‹ä»¶æˆ‘ä»¬åªèƒ½åœ¨äº‹åŠ¡å­æµç¨‹ä¸­ä½¿ç”¨ï¼Œåœ¨FlowableUIä¸­æš‚æ—¶æ²¡æœ‰æ‰¾åˆ°è¿™ä¸ªç»„ä»¶ï¼Œæ‰€ä»¥åœ¨Eclipseä¸­æ¥ç»˜åˆ¶</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220401110621048.png\"\n                      alt=\"image-20220401110621048\"\n                ></p>\n<p>å®Œæ•´çš„xmlæ–‡ä»¶</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=<span class=\"string\">&quot;1.0&quot;</span> encoding=<span class=\"string\">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">definitions</span> <span class=\"attr\">xmlns</span>=<span class=\"string\">&quot;http://www.omg.org/spec/BPMN/20100524/MODEL&quot;</span> <span class=\"attr\">xmlns:xsi</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span> <span class=\"attr\">xmlns:xsd</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema&quot;</span> <span class=\"attr\">xmlns:activiti</span>=<span class=\"string\">&quot;http://activiti.org/bpmn&quot;</span> <span class=\"attr\">xmlns:bpmndi</span>=<span class=\"string\">&quot;http://www.omg.org/spec/BPMN/20100524/DI&quot;</span> <span class=\"attr\">xmlns:omgdc</span>=<span class=\"string\">&quot;http://www.omg.org/spec/DD/20100524/DC&quot;</span> <span class=\"attr\">xmlns:omgdi</span>=<span class=\"string\">&quot;http://www.omg.org/spec/DD/20100524/DI&quot;</span> <span class=\"attr\">typeLanguage</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema&quot;</span> <span class=\"attr\">expressionLanguage</span>=<span class=\"string\">&quot;http://www.w3.org/1999/XPath&quot;</span> <span class=\"attr\">targetNamespace</span>=<span class=\"string\">&quot;http://www.activiti.org/test&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">process</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;myProcess&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;My process&quot;</span> <span class=\"attr\">isExecutable</span>=<span class=\"string\">&quot;true&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">startEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;startevent1&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;Start&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">startEvent</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">transaction</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;transaction1&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;Transaction&quot;</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">startEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;startevent2&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;äº‹åŠ¡å­æµç¨‹å¼€å§‹&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">startEvent</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">userTask</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;usertask1&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;äººå·¥ä»»åŠ¡ä¸€&quot;</span> <span class=\"attr\">activiti:assignee</span>=<span class=\"string\">&quot;zhangsan&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">userTask</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;flow2&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;startevent2&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;usertask1&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">exclusiveGateway</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;exclusivegateway1&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;æ’ä»–ç½‘å…³&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">exclusiveGateway</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;flow3&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;usertask1&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;exclusivegateway1&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">userTask</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;usertask2&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;äººå·¥ä»»åŠ¡äºŒ&quot;</span> <span class=\"attr\">activiti:assignee</span>=<span class=\"string\">&quot;lisi&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">userTask</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;flow4&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;exclusivegateway1&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;usertask2&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">conditionExpression</span> <span class=\"attr\">xsi:type</span>=<span class=\"string\">&quot;tFormalExpression&quot;</span>&gt;</span>&lt;![CDATA[$&#123;flag&gt;0&#125;]]&gt;<span class=\"tag\">&lt;/<span class=\"name\">conditionExpression</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">endEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;endevent1&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;äº‹åŠ¡å­æµç¨‹ç»“æŸ&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">endEvent</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;flow5&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;usertask2&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;endevent1&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">endEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;cancelendevent1&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;å–æ¶ˆç»“æŸäº‹ä»¶&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">cancelEventDefinition</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">cancelEventDefinition</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">endEvent</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;flow6&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;exclusivegateway1&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;cancelendevent1&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">conditionExpression</span> <span class=\"attr\">xsi:type</span>=<span class=\"string\">&quot;tFormalExpression&quot;</span>&gt;</span>&lt;![CDATA[$&#123;flag&lt;=0&#125;]]&gt;<span class=\"tag\">&lt;/<span class=\"name\">conditionExpression</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">boundaryEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;boundarycompensation1&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;Compensate&quot;</span> <span class=\"attr\">attachedToRef</span>=<span class=\"string\">&quot;usertask1&quot;</span> <span class=\"attr\">cancelActivity</span>=<span class=\"string\">&quot;true&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">compensateEventDefinition</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">compensateEventDefinition</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">boundaryEvent</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">serviceTask</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;servicetask5&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;è¡¥å¿è‡ªåŠ¨ä»»åŠ¡&quot;</span> <span class=\"attr\">isForCompensation</span>=<span class=\"string\">&quot;true&quot;</span> <span class=\"attr\">activiti:class</span>=<span class=\"string\">&quot;com.bobo.delegate.MyOneDelegate&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">serviceTask</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">association</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;association1&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;boundarycompensation1&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;servicetask5&quot;</span> <span class=\"attr\">associationDirection</span>=<span class=\"string\">&quot;None&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">association</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">transaction</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;flow1&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;startevent1&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;transaction1&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">boundaryEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;boundarycancel1&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;å–æ¶ˆè¾¹ç•Œäº‹ä»¶&quot;</span> <span class=\"attr\">attachedToRef</span>=<span class=\"string\">&quot;transaction1&quot;</span> <span class=\"attr\">cancelActivity</span>=<span class=\"string\">&quot;true&quot;</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">cancelEventDefinition</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">cancelEventDefinition</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">boundaryEvent</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">serviceTask</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;servicetask3&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;å–æ¶ˆäº‹ä»¶ç»“æŸ&quot;</span> <span class=\"attr\">activiti:class</span>=<span class=\"string\">&quot;com.bobo.delegate.MyThreeDelegate&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">serviceTask</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;flow8&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;boundarycancel1&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;servicetask3&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">endEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;endevent2&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;å–æ¶ˆäº‹ä»¶ç»“æŸ&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">endEvent</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;flow9&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;servicetask3&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;endevent2&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">serviceTask</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;servicetask4&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;æ­£å¸¸ç»“æŸä»»åŠ¡&quot;</span> <span class=\"attr\">activiti:class</span>=<span class=\"string\">&quot;com.bobo.delegate.MyTwoDelegate&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">serviceTask</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;flow10&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;transaction1&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;servicetask4&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">endEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;endevent3&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;End&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">endEvent</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;flow11&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;servicetask4&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;endevent3&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">process</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNDiagram</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNDiagram_myProcess&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNPlane</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;myProcess&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNPlane_myProcess&quot;</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;startevent1&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_startevent1&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;35.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;35.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;248.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;390.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;transaction1&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_transaction1&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;291.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;761.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;371.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;262.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;startevent2&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_startevent2&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;35.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;35.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;431.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;382.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;usertask1&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_usertask1&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;55.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;105.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;511.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;372.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;boundarycompensation1&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_boundarycompensation1&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;30.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;30.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;581.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;412.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;exclusivegateway1&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_exclusivegateway1&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;40.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;40.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;661.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;380.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;usertask2&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_usertask2&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;55.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;105.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;746.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;373.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;endevent1&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_endevent1&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;35.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;35.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;896.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;383.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;cancelendevent1&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_cancelendevent1&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;35.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;35.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;664.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;472.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;servicetask5&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_servicetask5&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;55.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;105.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;511.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;472.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;boundarycancel1&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_boundarycancel1&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;30.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;30.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;871.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;542.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;servicetask3&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_servicetask3&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;55.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;105.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;980.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;640.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;endevent2&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_endevent2&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;35.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;35.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;1130.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;650.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;servicetask4&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_servicetask4&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;55.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;105.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;1291.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;391.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;endevent3&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_endevent3&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;35.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;35.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;1450.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;401.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;flow2&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_flow2&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;466.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;399.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;511.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;399.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;flow3&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_flow3&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;616.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;399.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;661.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;400.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;flow4&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_flow4&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;701.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;400.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;746.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;400.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;flow5&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_flow5&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;851.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;400.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;896.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;400.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;flow6&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_flow6&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;681.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;420.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;681.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;472.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;association1&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_association1&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;596.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;442.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;563.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;472.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;flow1&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_flow1&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;283.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;407.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;371.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;407.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;flow8&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_flow8&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;886.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;572.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;1032.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;640.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;flow9&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_flow9&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;1085.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;667.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;1130.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;667.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;flow10&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_flow10&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;1132.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;407.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;1291.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;418.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;flow11&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_flow11&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;1396.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;418.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;1450.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;418.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNPlane</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNDiagram</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">definitions</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n\n\n<p>æµç¨‹è¯´æ˜ï¼šæµç¨‹ä¸­å®šä¹‰äº†ä¸€ä¸ªäº‹åŠ¡å­æµç¨‹å’Œä¸¤ä¸ªè‡ªåŠ¨ä»»åŠ¡</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220401111036816.png\"\n                      alt=\"image-20220401111036816\"\n                ></p>\n<p>ç„¶ååœ¨äº‹åŠ¡å­æµç¨‹ä¸­å®šä¹‰äº†ä¸¤ä¸ªäººå·¥ä»»åŠ¡ç”¨ä¸€ä¸ªæ’ä»–ç½‘å…³è¿æ¥ï¼Œflag&lt;&#x3D;0 çš„æƒ…å†µä¸‹ä¼šè§¦å‘ å–æ¶ˆç»“æŸäº‹ä»¶</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220401111201815.png\"\n                      alt=\"image-20220401111201815\"\n                ></p>\n<p>è§¦å‘å–æ¶ˆç»“æŸäº‹ä»¶ååŒæ—¶ä¼šè¢«å–æ¶ˆè¾¹ç•Œäº‹ä»¶æ•è·è€Œèµ° å–æ¶ˆäº‹ä»¶ç»“æŸçš„è‡ªåŠ¨ä»»åŠ¡</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220401111316353.png\"\n                      alt=\"image-20220401111316353\"\n                ></p>\n<p>åŒæ—¶è‡ªåŠ¨è¡¥å¿ä»»åŠ¡ä¹Ÿä¼šè§¦å‘ï¼Œå…³è”çš„è‡ªåŠ¨ä»»åŠ¡ä¹Ÿä¼šè§¦å‘</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220401111351513.png\"\n                      alt=\"image-20220401111351513\"\n                ></p>\n<p>æ³¨æ„åœ¨è®¾ç½®çš„æ—¶å€™éœ€è¦è®¾ç½®è¡¥å¿è‡ªåŠ¨ä»»åŠ¡ä¸ºå¯è¡¥å¿çš„</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220401111438577.png\"\n                      alt=\"image-20220401111438577\"\n                ></p>\n<p>è¡¥å¿è‡ªåŠ¨ä»»åŠ¡ç»‘å®šçš„JavaDelegateï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">MyOneDelegate</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">JavaDelegate</span> &#123;</span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">execute</span><span class=\"params\">(DelegateExecution execution)</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;å®Œæˆè‡ªåŠ¨å®¡æ‰¹ä»»åŠ¡-----ã€‹MyOneDelegate&quot;</span> + LocalDateTime.now().toString());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>æ­£å¸¸ç»“æŸä»»åŠ¡ç»‘å®šçš„JavaDelegate:</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">MyTwoDelegate</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">JavaDelegate</span> &#123;</span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">execute</span><span class=\"params\">(DelegateExecution execution)</span> &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;MyTwoDelegate----&gt;æ‰§è¡Œäº†&quot;</span> + LocalDateTime.now().toString());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>å–æ¶ˆäº‹ä»¶ç»“æŸç»‘å®šçš„JavaDelegate</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">MyThreeDelegate</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">JavaDelegate</span> &#123;</span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">execute</span><span class=\"params\">(DelegateExecution execution)</span> &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;MyThreeDelegate----&gt;æ‰§è¡Œäº†&quot;</span> + LocalDateTime.now().toString());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ç„¶åæˆ‘ä»¬éƒ¨ç½²ï¼Œå¯åŠ¨ï¼Œå’Œæ‰§è¡Œæµç¨‹ï¼Œçœ‹è¾“å‡ºæƒ…å†µ</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * éƒ¨ç½²æµç¨‹</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@throws</span> Exception</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">deploy</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> Exception&#123;</span><br><span class=\"line\">    <span class=\"type\">Deployment</span> <span class=\"variable\">deployment</span> <span class=\"operator\">=</span> processEngine.getRepositoryService().createDeployment()</span><br><span class=\"line\">            .addClasspathResource(<span class=\"string\">&quot;å–æ¶ˆç»“æŸäº‹ä»¶.bpmn20.xml&quot;</span>)</span><br><span class=\"line\">            .name(<span class=\"string\">&quot;å–æ¶ˆç»“æŸäº‹ä»¶&quot;</span>)</span><br><span class=\"line\">            .deploy();</span><br><span class=\"line\">    System.out.println(<span class=\"string\">&quot;-----&quot;</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * å¯åŠ¨æµç¨‹å®ä¾‹,è®¾ç½®æµç¨‹å˜é‡ä¸­çš„flag=0è§¦å‘å–æ¶ˆç»“æŸäº‹ä»¶</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">startProcessInstanceByKey</span><span class=\"params\">()</span>  <span class=\"keyword\">throws</span> Exception&#123;</span><br><span class=\"line\">    <span class=\"comment\">// è®¾ç½®å¯¹åº”çš„æµç¨‹å˜é‡çš„å€¼</span></span><br><span class=\"line\">    Map&lt;String,Object&gt; map = <span class=\"keyword\">new</span> <span class=\"title class_\">HashMap</span>&lt;&gt;();</span><br><span class=\"line\">    map.put(<span class=\"string\">&quot;flag&quot;</span>,<span class=\"number\">0</span>);<span class=\"comment\">// è®¾ç½®flagä¸º0è§¦å‘æµç¨‹ç»“æŸäº‹ä»¶</span></span><br><span class=\"line\">    processEngine.getRuntimeService()</span><br><span class=\"line\">            .startProcessInstanceById(<span class=\"string\">&quot;myProcess:3:effb46cf-b168-11ec-926f-c03c59ad2248&quot;</span>,map);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * å®Œæˆä»»åŠ¡</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">completeTask</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">    <span class=\"type\">TaskService</span> <span class=\"variable\">taskService</span> <span class=\"operator\">=</span> processEngine.getTaskService();</span><br><span class=\"line\">    <span class=\"type\">Task</span> <span class=\"variable\">task</span> <span class=\"operator\">=</span> taskService.createTaskQuery()</span><br><span class=\"line\">            .processDefinitionId(<span class=\"string\">&quot;myProcess:3:effb46cf-b168-11ec-926f-c03c59ad2248&quot;</span>)</span><br><span class=\"line\">            .taskAssignee(<span class=\"string\">&quot;zhangsan&quot;</span>)</span><br><span class=\"line\">            .singleResult();</span><br><span class=\"line\">    taskService.complete(task.getId());</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<p>è¾“å‡ºç»“æœï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220401111758140.png\"\n                      alt=\"image-20220401111758140\"\n                ></p>\n<p>è¾“å‡ºç»“æœæ˜¯æ»¡è¶³æˆ‘ä»¬çš„æœŸæœ›çš„ã€‚</p>\n<h3 id=\"è¡¥å¿äº‹ä»¶\"><a href=\"#è¡¥å¿äº‹ä»¶\" class=\"headerlink\" title=\"è¡¥å¿äº‹ä»¶\"></a>è¡¥å¿äº‹ä»¶</h3><p>é€šè¿‡è¡¥å¿è¾¾åˆ°æ§åˆ¶ä¸šåŠ¡æµç¨‹çš„ç›®çš„å°±æ˜¯è¡¥å¿äº‹ä»¶ï¼Œæ¯”å¦‚æˆ‘ä»¬æ­£å¸¸çš„ä¹°æœºç¥¨çš„æµç¨‹ä¸‹è®¢å•è´­ä¹°ï¼Œç„¶ååŒæ—¶å¼¹å‡ºæ”¯ä»˜æµç¨‹é¡µé¢ã€‚æ”¯ä»˜æˆåŠŸåå°±å¯ä»¥ç­‰å¾…å‡ºç¥¨äº†ï¼Œä½†æ˜¯å¦‚æœæˆ‘ä»¬æ”¯ä»˜å¤±è´¥çš„è¯ï¼Œè¿™æ—¶è¦ä¹ˆé‡æ–°æ”¯ä»˜ï¼Œæ›´æ¢æ”¯ä»˜æ–¹å¼æˆ–è€…å–æ¶ˆé¢„è®¢ï¼Œè¿™æ—¶å–æ¶ˆé¢„è®¢æˆ‘ä»¬å°±å¯ä»¥é€šè¿‡è¡¥å¿äº‹ä»¶æ¥å®ç°ï¼Œå…·ä½“çš„æ¡ˆä¾‹å¦‚ä¸‹ï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220401202116847.png\"\n                      alt=\"image-20220401202116847\"\n                ></p>\n<p>å®Œæ•´çš„xmlæ–‡ä»¶ï¼š</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=<span class=\"string\">&quot;1.0&quot;</span> encoding=<span class=\"string\">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">definitions</span> <span class=\"attr\">xmlns</span>=<span class=\"string\">&quot;http://www.omg.org/spec/BPMN/20100524/MODEL&quot;</span> <span class=\"attr\">xmlns:xsi</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span> <span class=\"attr\">xmlns:xsd</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema&quot;</span> <span class=\"attr\">xmlns:activiti</span>=<span class=\"string\">&quot;http://activiti.org/bpmn&quot;</span> <span class=\"attr\">xmlns:bpmndi</span>=<span class=\"string\">&quot;http://www.omg.org/spec/BPMN/20100524/DI&quot;</span> <span class=\"attr\">xmlns:omgdc</span>=<span class=\"string\">&quot;http://www.omg.org/spec/DD/20100524/DC&quot;</span> <span class=\"attr\">xmlns:omgdi</span>=<span class=\"string\">&quot;http://www.omg.org/spec/DD/20100524/DI&quot;</span> <span class=\"attr\">typeLanguage</span>=<span class=\"string\">&quot;http://www.w3.org/2001/XMLSchema&quot;</span> <span class=\"attr\">expressionLanguage</span>=<span class=\"string\">&quot;http://www.w3.org/1999/XPath&quot;</span> <span class=\"attr\">targetNamespace</span>=<span class=\"string\">&quot;http://www.activiti.org/test&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">error</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;payFail&quot;</span> <span class=\"attr\">errorCode</span>=<span class=\"string\">&quot;payFail&quot;</span> &gt;</span><span class=\"tag\">&lt;/<span class=\"name\">error</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">process</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;myProcess&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;My process&quot;</span> <span class=\"attr\">isExecutable</span>=<span class=\"string\">&quot;true&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">startEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;startevent1&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;å¼€å§‹äº‹ä»¶&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">startEvent</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">parallelGateway</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;parallelgateway1&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;å¹¶è¡Œç½‘å…³&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">parallelGateway</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;flow1&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;startevent1&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;parallelgateway1&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">serviceTask</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;servicetask1&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;é¢„è®¢æœºç¥¨&quot;</span> <span class=\"attr\">activiti:class</span>=<span class=\"string\">&quot;com.bobo.delegate.MyTwoDelegate&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">serviceTask</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">serviceTask</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;servicetask2&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;å¾®ä¿¡æ”¯ä»˜&quot;</span> <span class=\"attr\">activiti:class</span>=<span class=\"string\">&quot;com.bobo.delegate.MyOneDelegate&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">serviceTask</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">userTask</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;usertask1&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;äººå·¥å‡ºç¥¨&quot;</span> <span class=\"attr\">activiti:assignee</span>=<span class=\"string\">&quot;zhangsan&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">userTask</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;flow2&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;servicetask1&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;usertask1&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">parallelGateway</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;parallelgateway2&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;Parallel Gateway&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">parallelGateway</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;flow3&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;usertask1&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;parallelgateway2&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;flow4&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;parallelgateway1&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;servicetask1&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;flow5&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;parallelgateway1&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;servicetask2&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;flow6&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;servicetask2&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;parallelgateway2&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">serviceTask</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;servicetask3&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;å–æ¶ˆé¢„è®¢&quot;</span> <span class=\"attr\">isForCompensation</span>=<span class=\"string\">&quot;true&quot;</span> <span class=\"attr\">activiti:class</span>=<span class=\"string\">&quot;com.bobo.delegate.MyThreeDelegate&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">serviceTask</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">boundaryEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;boundarycompensation1&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;è¡¥å¿è¾¹ç•Œäº‹ä»¶&quot;</span> <span class=\"attr\">attachedToRef</span>=<span class=\"string\">&quot;servicetask1&quot;</span> <span class=\"attr\">cancelActivity</span>=<span class=\"string\">&quot;true&quot;</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">compensateEventDefinition</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">compensateEventDefinition</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">boundaryEvent</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">boundaryEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;boundaryerror1&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;é”™è¯¯è¾¹ç•Œäº‹ä»¶&quot;</span> <span class=\"attr\">attachedToRef</span>=<span class=\"string\">&quot;servicetask2&quot;</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">errorEventDefinition</span> <span class=\"attr\">errorRef</span>=<span class=\"string\">&quot;payFail&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">errorEventDefinition</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">boundaryEvent</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">intermediateThrowEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;compensationintermediatethrowevent1&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;è¡¥å¿æŠ›å‡ºä¸­é—´äº‹ä»¶&quot;</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">compensateEventDefinition</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">compensateEventDefinition</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">intermediateThrowEvent</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;flow7&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;boundaryerror1&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;compensationintermediatethrowevent1&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">endEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;endevent1&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;End&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">endEvent</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;flow8&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;compensationintermediatethrowevent1&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;endevent1&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">endEvent</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;endevent2&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;End&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">endEvent</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">sequenceFlow</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;flow9&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;parallelgateway2&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;endevent2&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">sequenceFlow</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">association</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;association1&quot;</span> <span class=\"attr\">sourceRef</span>=<span class=\"string\">&quot;boundarycompensation1&quot;</span> <span class=\"attr\">targetRef</span>=<span class=\"string\">&quot;servicetask3&quot;</span> <span class=\"attr\">associationDirection</span>=<span class=\"string\">&quot;None&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">association</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">process</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNDiagram</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNDiagram_myProcess&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNPlane</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;myProcess&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNPlane_myProcess&quot;</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;startevent1&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_startevent1&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;35.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;35.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;160.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;360.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;parallelgateway1&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_parallelgateway1&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;40.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;40.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;380.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;357.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;servicetask1&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_servicetask1&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;55.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;105.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;580.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;220.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;boundarycompensation1&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_boundarycompensation1&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;30.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;30.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;650.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;270.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;servicetask2&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_servicetask2&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;55.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;105.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;580.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;450.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;boundaryerror1&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_boundaryerror1&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;30.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;30.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;650.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;490.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;usertask1&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_usertask1&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;55.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;105.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;820.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;220.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;parallelgateway2&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_parallelgateway2&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;40.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;40.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;1140.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;336.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;servicetask3&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_servicetask3&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;55.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;105.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;830.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;336.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;compensationintermediatethrowevent1&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_compensationintermediatethrowevent1&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;35.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;35.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;740.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;590.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;endevent1&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_endevent1&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;35.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;35.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;820.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;590.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNShape</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;endevent2&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNShape_endevent2&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdc:Bounds</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;35.0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;35.0&quot;</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;1225.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;339.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdc:Bounds</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNShape</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;flow1&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_flow1&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;195.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;377.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;380.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;377.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;flow2&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_flow2&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;685.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;247.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;820.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;247.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;flow3&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_flow3&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;925.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;247.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;1160.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;247.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;1160.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;336.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;flow4&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_flow4&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;400.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;357.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;400.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;247.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;580.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;247.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;flow5&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_flow5&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;400.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;397.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;400.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;477.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;580.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;477.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;flow6&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_flow6&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;685.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;477.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;1160.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;477.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;1160.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;376.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;flow7&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_flow7&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;665.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;520.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;664.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;607.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;740.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;607.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;flow8&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_flow8&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;775.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;607.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;820.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;607.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;flow9&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_flow9&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;1180.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;356.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;1225.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;356.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">bpmndi:BPMNEdge</span> <span class=\"attr\">bpmnElement</span>=<span class=\"string\">&quot;association1&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;BPMNEdge_association1&quot;</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;665.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;300.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;664.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;363.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">omgdi:waypoint</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;830.0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;363.0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">omgdi:waypoint</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNEdge</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNPlane</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">bpmndi:BPMNDiagram</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">definitions</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>æµç¨‹è¯´æ˜ï¼š</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/bpmn/image-20220401202447583.png\"\n                      alt=\"image-20220401202447583\"\n                ></p>\n<p>å¾®ä¿¡æ”¯ä»˜ç»‘å®šçš„JavaDelegateï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">MyOneDelegate</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">JavaDelegate</span> &#123;</span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">execute</span><span class=\"params\">(DelegateExecution execution)</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;å¾®ä¿¡æ”¯ä»˜-----ã€‹MyOneDelegate&quot;</span> + LocalDateTime.now().toString());</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;ä½™é¢ä¸è¶³....&quot;</span>);</span><br><span class=\"line\">        <span class=\"keyword\">throw</span>  <span class=\"keyword\">new</span> <span class=\"title class_\">BpmnError</span>(<span class=\"string\">&quot;payFail&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>é¢„è®¢æœºç¥¨ç»‘å®šçš„JavaDelegate</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">MyTwoDelegate</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">JavaDelegate</span> &#123;</span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">execute</span><span class=\"params\">(DelegateExecution execution)</span> &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;MyTwoDelegate----&gt;é¢„è®¢æœºç¥¨æµç¨‹æ‰§è¡Œäº†&quot;</span> + LocalDateTime.now().toString());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>å–æ¶ˆè®¢å•ç»‘å®šçš„javaDelegate:</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">MyThreeDelegate</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">JavaDelegate</span> &#123;</span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">execute</span><span class=\"params\">(DelegateExecution execution)</span> &#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;MyThreeDelegate----&gt;æœºç¥¨é¢„è®¢å–æ¶ˆäº†....&quot;</span> + LocalDateTime.now().toString());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>æ•´ä¸ªæµç¨‹æ‰§è¡Œçš„è¿‡ç¨‹æ˜¯ï¼šä»»åŠ¡å¼€å§‹åä¼šå¹¶è¡Œçš„æ‰§è¡Œæœºç¥¨é¢„è®¢å’Œå¾®ä¿¡æ”¯ä»˜ï¼Œç„¶ååœ¨å¾®ä¿¡æ”¯ä»˜æ˜¯æŠ›å‡ºpayFailé”™è¯¯ï¼ŒåŒæ—¶é”™è¯¯è¾¹ç•Œäº‹ä»¶ä¼šæ•è·åˆ°è¿™ä¸ªé”™è¯¯ï¼Œç„¶åæ‰§è¡Œåˆ° è¡¥å¿æŠ›å‡ºä¸­é—´äº‹ä»¶ï¼Œä¹‹ååœ¨æœºç¥¨é¢„è®¢çš„ è¡¥å¿è¾¹ç•Œäº‹ä»¶ è¢«è§¦å‘ï¼Œå¯¹åº”çš„è¡¥å¿è§¦å‘å™¨ä¼šæ‰§è¡Œå¯¹åº”çš„ä»£ç ã€‚ ç„¶åæˆ‘ä»¬éƒ¨ç½²åŠ å¯åŠ¨æµç¨‹åè§‚å¯Ÿæ§åˆ¶å°çš„è¾“å‡ºï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * éƒ¨ç½²æµç¨‹</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@throws</span> Exception</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">deploy</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> Exception&#123;</span><br><span class=\"line\">    <span class=\"type\">Deployment</span> <span class=\"variable\">deployment</span> <span class=\"operator\">=</span> processEngine.getRepositoryService().createDeployment()</span><br><span class=\"line\">            .addClasspathResource(<span class=\"string\">&quot;è¡¥å¿äº‹ä»¶.bpmn20.xml&quot;</span>)</span><br><span class=\"line\">            .name(<span class=\"string\">&quot;è¡¥å¿äº‹ä»¶&quot;</span>)</span><br><span class=\"line\">            .deploy();</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * å¯åŠ¨æµç¨‹å®ä¾‹</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">startProcessInstanceByKey</span><span class=\"params\">()</span>  <span class=\"keyword\">throws</span> Exception&#123;</span><br><span class=\"line\">    processEngine.getRuntimeService()</span><br><span class=\"line\">            .startProcessInstanceById(<span class=\"string\">&quot;myProcess:4:a45abe9f-b1b5-11ec-9daf-c03c59ad2248&quot;</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>æ§åˆ¶å°è¾“å‡ºï¼š</p>\n<figure class=\"highlight txt\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">MyTwoDelegate----&gt;é¢„è®¢æœºç¥¨æµç¨‹æ‰§è¡Œäº†2022-04-01T20:17:44.985</span><br><span class=\"line\">å¾®ä¿¡æ”¯ä»˜-----ã€‹MyOneDelegate2022-04-01T20:17:44.987</span><br><span class=\"line\">ä½™é¢ä¸è¶³....</span><br><span class=\"line\">MyThreeDelegate----&gt;æœºç¥¨é¢„è®¢å–æ¶ˆäº†....2022-04-01T20:17:45.028</span><br></pre></td></tr></table></figure>\n\n<p>è¾“å‡ºçš„ç»“æœå’Œæˆ‘ä»¬å‰é¢è®¾è®¡çš„æ˜¯ä¸€æ ·çš„ï¼Œæå®š~</p>\n"},{"title":"Hello World","date":"2022-09-01T00:00:00.000Z","password":"hello","abstract":"è¿™é‡Œæœ‰ä¸œè¥¿è¢«åŠ å¯†äº†ï¼Œéœ€è¦è¾“å…¥å¯†ç æŸ¥çœ‹å“¦ã€‚","message":"æ‚¨å¥½ï¼Œè¿™é‡Œéœ€è¦å¯†ç ã€‚","wrong_pass_message":"æŠ±æ­‰ï¼Œè¿™ä¸ªå¯†ç çœ‹ç€ä¸å¤ªå¯¹ï¼Œè¯·å†è¯•è¯•ã€‚","wrong_hash_message":"æŠ±æ­‰ï¼Œè¿™ä¸ªæ–‡ç« ä¸èƒ½è¢«çº æ­£ï¼Œä¸è¿‡æ‚¨è¿˜æ˜¯èƒ½çœ‹çœ‹è§£å¯†åçš„å†…å®¹ã€‚","sticky":999,"_content":"Welcome to [Hexo](https://hexo.io/)! This is your very first post. Check [documentation](https://hexo.io/docs/) for more info. If you get any problems when using Hexo, you can find the answer in [troubleshooting](https://hexo.io/docs/troubleshooting.html) or you can ask me on [GitHub](https://github.com/hexojs/hexo/issues).\n\n## Quick Start \n## ğŸ’¡ç½‘ç»œè§£é”\n### å¥ˆäº‘\n### è‰¾å¯äº‘\n### é­”æˆ’\n### å†°çµ\n\n### Create a new post\n\n``` bash\n$ hexo new \"My New Post\"\n```\n \nMore info: [Writing](https://hexo.io/docs/writing.html)\n\n### Run server\n\n``` bash\n$ hexo server\n```\n\nMore info: [Server](https://hexo.io/docs/server.html)\n\n### Generate static files\n\n``` bash\n$ hexo generate\n```\n\nMore info: [Generating](https://hexo.io/docs/generating.html)\n\n### Deploy to remote sites\n\n``` bash\n$ hexo deploy\n```\n\nMore info: [Deployment](https://hexo.io/docs/one-command-deployment.html)\n","source":"_posts/2022/09/hello-world.md","raw":"---\ntitle: Hello World\ndate: 2022-09-1 08:00:00\ntags: \ncategories: \npassword: hello\nabstract: è¿™é‡Œæœ‰ä¸œè¥¿è¢«åŠ å¯†äº†ï¼Œéœ€è¦è¾“å…¥å¯†ç æŸ¥çœ‹å“¦ã€‚\nmessage: æ‚¨å¥½ï¼Œè¿™é‡Œéœ€è¦å¯†ç ã€‚\nwrong_pass_message: æŠ±æ­‰ï¼Œè¿™ä¸ªå¯†ç çœ‹ç€ä¸å¤ªå¯¹ï¼Œè¯·å†è¯•è¯•ã€‚\nwrong_hash_message: æŠ±æ­‰ï¼Œè¿™ä¸ªæ–‡ç« ä¸èƒ½è¢«çº æ­£ï¼Œä¸è¿‡æ‚¨è¿˜æ˜¯èƒ½çœ‹çœ‹è§£å¯†åçš„å†…å®¹ã€‚\nsticky: 999\n---\nWelcome to [Hexo](https://hexo.io/)! This is your very first post. Check [documentation](https://hexo.io/docs/) for more info. If you get any problems when using Hexo, you can find the answer in [troubleshooting](https://hexo.io/docs/troubleshooting.html) or you can ask me on [GitHub](https://github.com/hexojs/hexo/issues).\n\n## Quick Start \n## ğŸ’¡ç½‘ç»œè§£é”\n### å¥ˆäº‘\n### è‰¾å¯äº‘\n### é­”æˆ’\n### å†°çµ\n\n### Create a new post\n\n``` bash\n$ hexo new \"My New Post\"\n```\n \nMore info: [Writing](https://hexo.io/docs/writing.html)\n\n### Run server\n\n``` bash\n$ hexo server\n```\n\nMore info: [Server](https://hexo.io/docs/server.html)\n\n### Generate static files\n\n``` bash\n$ hexo generate\n```\n\nMore info: [Generating](https://hexo.io/docs/generating.html)\n\n### Deploy to remote sites\n\n``` bash\n$ hexo deploy\n```\n\nMore info: [Deployment](https://hexo.io/docs/one-command-deployment.html)\n","slug":"hello-world","published":1,"updated":"2022-11-05T14:16:59.504Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clas9ert00011dk8f8al65wq3","content":"<div class=\"hbe hbe-container\" id=\"hexo-blog-encrypt\" data-wpm=\"æŠ±æ­‰ï¼Œè¿™ä¸ªå¯†ç çœ‹ç€ä¸å¤ªå¯¹ï¼Œè¯·å†è¯•è¯•ã€‚\" data-whm=\"æŠ±æ­‰ï¼Œè¿™ä¸ªæ–‡ç« ä¸èƒ½è¢«çº æ­£ï¼Œä¸è¿‡æ‚¨è¿˜æ˜¯èƒ½çœ‹çœ‹è§£å¯†åçš„å†…å®¹ã€‚\">\n  <script id=\"hbeData\" type=\"hbeData\" data-hmacdigest=\"719a5d9241aa3490ae77e7ab45687ca6a7a0ef82a35cdb246682d67024af9a9c\">10d79030e8222445804370796b90fca1cf7dd2ee01010d95413afa643c36d75c5dfa5eaa9327e991528303814267181d88bce7e663060c45eeef1911be608c8808e3a0bd1058bece5a8748c4fd5da7b9fe10276c80624ac0ab45c8b427740ad28e252f77ff2341342a2d02769b92253458c55ba07e46297cf056dee5b69303e9c91c8b122030e881dab5396fc41b88a1ae72431bf2e9754e77a7a6fe1b4bd9daf6debae3d867fdfcf71da5c95ede2f47f2eae5e76ac2b10b952ed5cb9f3695cb03838b45199ec1dfcb776c0bc57179407e845c7a44d7360ac99621418daed523435f012d54d14105d18e1db5b09f61e860a96880b4288957d4c90af1b6e005862625f0ed49104d5915bfe28edaa245bff7dc45843ee15eeeb3f1969f562fda376e40a4c8c02db75b28f0f6691053cf615a5d3b85e367947c5904c66facf5a5470d64e8cc3e898c97cf438acce98e80ec01786e018a8aa4b8fcdf3d08bb67f236a2eb43af76f148a70fa16bd6c6621d92e5ffad872634b10aae9705681735c82a362c4cbb90e62629836fb011f21c1661cbda352bfa3cd5daf39209e4ce60af71f58356b0ea3ca44d611bc117857f9701628c6ea51aae682e38e175c247c0dd663600834e890c5d59999d2533c021d6f404dc3fc96130a1e6b5c4380fae31c9c80fea684a90f69bd77f8c2853cc7ec9ade17473ac2545c8419173399f489737d12147d3a36438efbe9c7916e521704027a699eb56bc5a1132f44a9796e1b453def95b5064dd8326aa194761b15a0b546e03621685b0d2287592253d82ce811b54645cb0fc55f2746acf55b832c1cdc61433ba6c731a24c0eb581528ad396a9f9919cd59ecb454e7067e93bfb065e86d30f75accbb81abad48aed02aa6aa5ab28800c404d50f5c02e65363d5c093137c0b9578fd56a93f3b1e0948a27a307e19fd20c67e028f0225e6ac94a30d41a484eb7b06ba6e70f2f3f0c1aa1bea62a547410d0716a70a4515b0c117503445c5dc68df94700437e85320e704e9e41e3761d91738bc6253f2aa5ec4e5e35f2466212268b66e2ddd7ecf83916883f197f78da60cc6ed109d81f79b20235cabd942e676e3aca8cf0673d73ae29fe1bc58e84982141f61504c11b9912bf72c108e09d100e95b73e9e11819d5e325a69b09eec5c2bbb669648e93aaffc069e5b78e25a8c00201b9cd16fbdc95775823536c93af454946e1758642071b30f6bdbb73e39eb4e4c96c568c1e4f111844d8e238ddb7410b6394a3b85470127f9c24bf93431ffecb6006460334fc64b0f9f311f3b590a47622b1d9eb9083e6b87589fd872f5be9aac05ff70868a0b9ce9046a6a957a69a69c801c0b628c8ae14e7a226fd11bcf4f775b4f48220c945b68fc3fefd9c83f9b2e8ac4afac7f97ccdcbbcf032f962919532b1ab77428964713c32b7e5a634e51281c515b4a0435661375ba7350bb24b426e5219114339965d2165d8543d61db2b383e6dbb947a260f8f9f14ce19060862952f8b329f143e2009170cf204d1994e6cd69fdf45db7bed854bc28ea4c50a9587147d8be6074418694ae4523b0ee843695d1c3181591be185c40f331cef516975c510d4053bda863cc9a0af5125f5052b7f03ac09efb979f45b24c31bdf3310b4c281277bb3190015ef94407c242cc4b8fbc6fccdca0b692f1b9de0841c0a5b89e13d6a4263c82d04d9129c1704f1d7ef4387dfed98e3db995f251ff87d1b1651b111f6b9cf403a018f56f840eee060033c8f1cf1eba547053cc7bf69e3651154a10af0645da79cebb94a9ee7b3b17a963c88da10d3adfeb215681881158a8af0db597e7fe657fc889e14007e0cb31cbf82d04bb4250bce1e05eaf914b643664fb933d97924240ba3bbca0a901b751fecd66fff9a044cf2c3858c0983bb9ea7aa9d387bbe8137b2feacf52ca11287b8c3cafeef543a156cad71ba66ed2cae03b9be15acccf6a485ff9c8701fb228c808de4aac1603e26813f539451015d6972007f3187b1b8a46627294e5a3c646d465a85a0294058ca1542c0ad799e602868dfb73200d19dcd93e47892826b2ed0b45847fbeafb9f053936c2abd8f607dacf9e3a92104fb7b900fbd7dd50398c27d4237327012a3509d3935ac21c0267b4b9a4d9ea1fe5064be764361bc33fde11d777cc911dc170b4bee2b7596b012cbca8a9a426b667a60945cd5c0f5de36a1bb3c83da34c5c27315e98ee7d230105e731a382aada3f3d322a65713d829c4c8f5b37baaeb3ea4ec2de9c336eed5f8252eb90d7e20e5265254d20de26cbbae71698aaec785b4ccd6afc00e4dde0187cf6b0b1f8953ad01e7e8d0d76ea50cdea4d576df2c2423ed2f97c5a7db4dc6b5a93bd361b07db45eef63c36f254094bd06c0d3458ba48c59bb58270bb2322db657e6c89104905b311ca40c7e024117a428f0d9cf7323af033fe73d2d2e125c15b538c4fcb1a8f5d078f07ddb77c3e6b1d59094635df8dc8a09a1e62adf88b8843b37545f648f015505d38c4fde2177d1fddb8dd9a759ccaddc7d6d0467d0c436bf376051937f1258cecc9e9490b680b7d0186cd316345d2440fbb1889bb6f1a8db4e0ada624be0c70a0641b0dfa0cd53630da573f303742d0002043c6248f63f482612bd5db9331a1a100250b2ebb6091e147f9fca6a640f52d7dfc5a749307747ce5e26b66dd4de345b078d42cfbebb9dfa9b1e35397f5fe742d7a970c470003f5d7f4de9c7f4e5abb33d2183635a225f6378266238840e1c4c044f97c8c915027b54bf81f59e1f4752e67e0d0074c97372f9f3cdf71b4057d4b90405864725e969a09ecc0e5ffe985915e0ababfc8d60f4f42aa24b8a05de392c67f41144dcf485e11930e1aadd9afe8c5035d3b1a28da60b085b2078bbd08abb409ae1ae2341ccbce931c95eb4ea15f62555442e49060ff70e17c410b3abb410398ceeb49f5ed0bfe8285593c30844389da9be1c6a367966be9bd90671a5277fdeb44cac396df568f7ecaafa930201dcd9aec84fab1121c7c7bcdc0dc509965f6b538a0ec6c8cc9eb101b687ddb04c87bd4e57bfd0afa57687c99e48aa2a91b11ea05e12a38ef618249d806b7f14db03096e36535ac2c081a1f5310bf9d957b95404affef3f776255754bf3802bac5e99fc8d00fdc05182a9d3e691e45fde03613e8f75abfc0f61e9e153b03fe231c06f58d26ef9dd6864e062fa4482e81e194d15d287162d59809f9c27f6df56daf1a9c968ea86655b97f1bde07f5e32c030d295275f8a25466ccb520ac714cea56341dae8c97ddf0f365ca5d0e5b87d5e69decefb62ee40b4f90d215108497319583a9c8d88f58903031b28cc99289cd2cc5ae075f219ba7ac259ec4446ba8a9db91c6836c81c48d7b8f9cc2d68d537e23ed7b2dcee872b62b36d9a071a5970ec279b7ab87bcd549860d63accfbd354f35fb6e271db020cad54cb2507cbf6451971959e03e815868b78cae67a12332f5c0291c979a1a960c3fc37cee070c4af425fb28f2202f9d59cb70d8fb947e789d3b3c338abde3097aa70f5fff51f4251bd5f6d2a2250785df4b31db7d9cc3bcff9ef67412e87c27772cd6c376de20751d071b30ce17585ea0f236adb2af7033b526dbf82c9377ab312cbd4e9857c8e1fd66e6ab44d8f49bf76c4d6429af8bbaa01846062f8956147e4571372a8a6695da5c952b7f0bba96d48a9463197bc040a59735f06f46f52022e8c913614eb409b6c2c5c92f826522bb48b61a6ef658abbea860cd256f3d4caa6f1ee1647adf05c937d56cad059e82c01f3081230bf7766d46ee001660e8f6338729ee37cfcbe49b4033df559b9f3b0c41a1635a809a0402cee3426c4e03ceb96c03777679a9be64d492972e5c63807e7fd15f7313b7e2ce8988d00c490720513f13bcee71b8bcd18a1c12920a7ba7d125c11aca5fa5e41e60a9b338278f975152f755f1e296780981bed53b751eb868d5e46d3b36000a670ef4b20e674cc161e1ac8229563cd25c7d502daaeb42a2cc2f713f257efd41be727b5e44144e8bc9ae5a2b6a6b150a496056711b90f8e5a30083053fcbefd9b8acfc3e30309e01c0b652c9e9b4c9a25c7a826c030f6877197724248498aaa9713da868343be2c8e6899d01ee1125338fea19a889f0666d22a301f43a1785f0c4f90a91dc555ca02aba3eee9c7f61a1f2a6d55d53491f9a8c3cc3637ac30b2bbe86db836cb2de949252d0da19fb35bdfad156a43e6852601e25ad3a9394ede90e176f4834b5cbfbcf88f605158a0070babc0a65c0e72125b7e2c299f2b9cd1d88e0536b2d127fb66a83100eb9b7af0d117f046d405520fa6641c7a04a244940254b10a5e414155066c5285542187cea09ad216bbe79412cd28fb8495e7bde6d57bd32b54406b78c9a8fc02dc2c2be8343b6b3ae7695912a9ce</script>\n  <div class=\"hbe hbe-content\">\n    <div class=\"hbe hbe-input hbe-input-default\">\n      <input class=\"hbe hbe-input-field hbe-input-field-default\" type=\"password\" id=\"hbePass\">\n      <label class=\"hbe hbe-input-label hbe-input-label-default\" for=\"hbePass\">\n        <span class=\"hbe hbe-input-label-content hbe-input-label-content-default\">æ‚¨å¥½ï¼Œè¿™é‡Œéœ€è¦å¯†ç ã€‚</span>\n      </label>\n    </div>\n  </div>\n</div>\n<script data-pjax src=\"/lib/hbe.js\"></script><link href=\"/css/hbe.style.css\" rel=\"stylesheet\" type=\"text/css\">","site":{"data":{"links":[{"name":"CZMæœ‰ç‚¹å†·","link":"https://czm.cool/","description":"CZMçš„åšå®¢","avatar":"https://img.czm.cool/avatar/avatar.png"},{"name":"PSH","link":"https://shamd.cloud/","description":"PSHçš„åšå®¢.","avatar":"https://shamd.cloud/upload/2022/07/afbb577733f46c9535dd1d6d6388278.jpg"},{"name":"KAI","link":"https://kainote.top/","description":"love artist, love code.","avatar":"https://cdn.jsdelivr.net/gh/kaix2301/pictures/img202201072101018.jpg"}]}},"excerpt":"è¿™é‡Œæœ‰ä¸œè¥¿è¢«åŠ å¯†äº†ï¼Œéœ€è¦è¾“å…¥å¯†ç æŸ¥çœ‹å“¦ã€‚","more":"è¿™é‡Œæœ‰ä¸œè¥¿è¢«åŠ å¯†äº†ï¼Œéœ€è¦è¾“å…¥å¯†ç æŸ¥çœ‹å“¦ã€‚","origin":"<p>Welcome to <a class=\"link\"   href=\"https://hexo.io/\" >Hexo<i class=\"fas fa-external-link-alt\"></i></a>! This is your very first post. Check <a class=\"link\"   href=\"https://hexo.io/docs/\" >documentation<i class=\"fas fa-external-link-alt\"></i></a> for more info. If you get any problems when using Hexo, you can find the answer in <a class=\"link\"   href=\"https://hexo.io/docs/troubleshooting.html\" >troubleshooting<i class=\"fas fa-external-link-alt\"></i></a> or you can ask me on <a class=\"link\"   href=\"https://github.com/hexojs/hexo/issues\" >GitHub<i class=\"fas fa-external-link-alt\"></i></a>.</p>\n<h2 id=\"Quick-Start\"><a href=\"#Quick-Start\" class=\"headerlink\" title=\"Quick Start\"></a>Quick Start</h2><h2 id=\"ğŸ’¡ç½‘ç»œè§£é”\"><a href=\"#ğŸ’¡ç½‘ç»œè§£é”\" class=\"headerlink\" title=\"ğŸ’¡ç½‘ç»œè§£é”\"></a>ğŸ’¡ç½‘ç»œè§£é”</h2><h3 id=\"å¥ˆäº‘\"><a href=\"#å¥ˆäº‘\" class=\"headerlink\" title=\"å¥ˆäº‘\"></a>å¥ˆäº‘</h3><h3 id=\"è‰¾å¯äº‘\"><a href=\"#è‰¾å¯äº‘\" class=\"headerlink\" title=\"è‰¾å¯äº‘\"></a>è‰¾å¯äº‘</h3><h3 id=\"é­”æˆ’\"><a href=\"#é­”æˆ’\" class=\"headerlink\" title=\"é­”æˆ’\"></a>é­”æˆ’</h3><h3 id=\"å†°çµ\"><a href=\"#å†°çµ\" class=\"headerlink\" title=\"å†°çµ\"></a>å†°çµ</h3><h3 id=\"Create-a-new-post\"><a href=\"#Create-a-new-post\" class=\"headerlink\" title=\"Create a new post\"></a>Create a new post</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo new <span class=\"string\">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>\n<p>More info: <a class=\"link\"   href=\"https://hexo.io/docs/writing.html\" >Writing<i class=\"fas fa-external-link-alt\"></i></a></p>\n<h3 id=\"Run-server\"><a href=\"#Run-server\" class=\"headerlink\" title=\"Run server\"></a>Run server</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo server</span><br></pre></td></tr></table></figure>\n\n<p>More info: <a class=\"link\"   href=\"https://hexo.io/docs/server.html\" >Server<i class=\"fas fa-external-link-alt\"></i></a></p>\n<h3 id=\"Generate-static-files\"><a href=\"#Generate-static-files\" class=\"headerlink\" title=\"Generate static files\"></a>Generate static files</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo generate</span><br></pre></td></tr></table></figure>\n\n<p>More info: <a class=\"link\"   href=\"https://hexo.io/docs/generating.html\" >Generating<i class=\"fas fa-external-link-alt\"></i></a></p>\n<h3 id=\"Deploy-to-remote-sites\"><a href=\"#Deploy-to-remote-sites\" class=\"headerlink\" title=\"Deploy to remote sites\"></a>Deploy to remote sites</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo deploy</span><br></pre></td></tr></table></figure>\n\n<p>More info: <a class=\"link\"   href=\"https://hexo.io/docs/one-command-deployment.html\" >Deployment<i class=\"fas fa-external-link-alt\"></i></a></p>\n","encrypt":true},{"title":"Gitå­æ¨¡å—","date":"2022-09-24T11:25:51.000Z","_content":"# [Git å­æ¨¡å—](https://www.cnblogs.com/renjt1991/p/15925259.html)\n\nGit å­æ¨¡å—å…è®¸ä½ å°†ä¸€ä¸ª Git ä»“åº“ä½œä¸ºå¦ä¸€ä¸ª Git ä»“åº“çš„å­ç›®å½•ï¼Œå®ƒèƒ½è®©ä½ å°†å¦ä¸€ä¸ªä»“åº“å…‹éš†åˆ°è‡ªå·±çš„é¡¹ç›®ä¸­ï¼ŒåŒæ—¶è¿˜ä¿æŒæäº¤çš„ç‹¬ç«‹ã€‚\n\nç¤ºä¾‹ä»£ç ä½¿ç”¨çš„å€¼å¦‚ä¸‹ï¼š\n\n- ä¸»ä»“åº“è·¯å¾„ï¼šgithub.com/base.git\n- å­æ¨¡å—ä»“åº“ï¼šgithub.com/common.git\n- å­æ¨¡å—åœ¨ä¸»ä»“åº“è·¯å¾„ï¼šsrc/common\n\n### å­æ¨¡å—æ“ä½œ\n\n#### æ·»åŠ å­æ¨¡å—\n\nåœ¨ä¸»ä»“åº“æ‰§è¡Œ `git submoudle add <url> <repo_name>`ï¼Œæ‰§è¡Œåä¼šåœ¨ä¸»ä»“åº“ä¸‹åˆ›å»ºä¸€ä¸ª `repo_name` ç›®å½•å­˜æ”¾å­é¡¹ç›®ï¼›å¹¶ä¼šåˆ›å»ºä¸€ä¸ª `.git` éšè—æ–‡ä»¶\n \n```bash\ngit submoudle add github.com/common.git src/common\n```\n\næ·»åŠ å­æ¨¡å—åï¼Œä¸»ä»“åº“ä¼šå¢åŠ ä¸€ä¸ª `.gitmodules` æ–‡ä»¶ï¼Œè®°å½•å­æ¨¡å—ä¿¡æ¯\n\n```properties\n# .gitmodules æ–‡ä»¶\n[submodule \"src/common\"]\n\tpath = src/common\n\turl = github.com/common.git\n```\n\n#### æŸ¥çœ‹å­æ¨¡å—\n\n```bash\ngit submodule\n# è¾“å‡ºï¼šf5dfd8b05f594ca3c914393e7c641e3ff5285373 src/common (remotes/origin/HEAD)\n```\n\n#### åˆå§‹åŒ–å­æ¨¡å—é…ç½®\n\n```bash\ngit submodule init\n```\n\n#### æ›´æ–°å­æ¨¡å—\n\n```bash\n# æ›´æ–°å…¨éƒ¨å­æ¨¡å—\ngit submodule update\n# æ›´æ–°æŒ‡å®šå­æ¨¡å—\ngit submodule update src/common\n\n# é€’å½’æ›´æ–°å­æ¨¡å—\ngit submodule update --init --recursive\n\n# æ›´æ–°å­æ¨¡å—åˆ°æœåŠ¡å™¨æœ€æ–°ç‰ˆæœ¬\ngit submodule update --remote\n```\n\n#### æäº¤å­æ¨¡å—ä»£ç \n\nå­æ¨¡å—çš„é»˜è®¤åˆ†æ”¯ä¸æ˜¯ **master** ï¼Œè¿›å…¥ç›®å½•åéœ€è¦å…ˆåˆ‡æ¢åˆ†æ”¯ï¼Œå†ä¿®æ”¹æäº¤ä»£ç \n\n```bash\ncd src/common\ngit checkout master\ngit add .\ngit commit -m \"update\"\ngit push\n```\n\n#### åˆ é™¤å­æ¨¡å—\n\næ‰§è¡Œå‘½ä»¤åï¼Œä¼šåˆ é™¤ `src/common` æ–‡ä»¶å¤¹å’Œä¿®æ”¹ `.gitmodules` æ–‡ä»¶\n\n```bash\ngit rm src/common\ngit commit -m \"remove submodule\"\ngit push\n```\n\næœ¬åœ°å­æ¨¡å—ç›¸å…³æ–‡ä»¶ï¼ˆéå¿…é¡»åˆ é™¤ï¼‰ï¼š\n\n- åˆ é™¤ `.git/config` æ–‡ä»¶ä¸­ç›¸å…³é…ç½®\n- åˆ é™¤ `.git/modules/src/common` æ–‡ä»¶å¤¹\n\n### å…‹éš†åŒ…å«å­æ¨¡å—çš„ä¸»é¡¹ç›®\n\nåœ¨å…‹éš†ä¸»é¡¹ç›®æ—¶ï¼Œä¼šåŒ…å«å­æ¨¡å—ç›®å½•ï¼Œä½†ç›®å½•ä¸­æ²¡æœ‰ä»»ä½•æ–‡ä»¶ï¼Œæ­¤æ—¶éœ€è¦åˆå§‹åŒ–å­æ¨¡å—é…ç½®ï¼Œç„¶åå†æ›´æ–°å­æ¨¡å—ï¼Œæ‰ä¼šè·å–åˆ°å¯¹åº”çš„æ–‡ä»¶\n\n```bash\ngit clone github.com/base.git\ncd base\ngit submodule init\ngit submodule update\n```","source":"_posts/2022/09/gitå­æ¨¡å—.md","raw":"---\ntitle: Gitå­æ¨¡å—\ndate: 2022-09-24 19:25:51\ntags: [Github]\ncategories: [å¸¸ç”¨å·¥å…·]\n---\n# [Git å­æ¨¡å—](https://www.cnblogs.com/renjt1991/p/15925259.html)\n\nGit å­æ¨¡å—å…è®¸ä½ å°†ä¸€ä¸ª Git ä»“åº“ä½œä¸ºå¦ä¸€ä¸ª Git ä»“åº“çš„å­ç›®å½•ï¼Œå®ƒèƒ½è®©ä½ å°†å¦ä¸€ä¸ªä»“åº“å…‹éš†åˆ°è‡ªå·±çš„é¡¹ç›®ä¸­ï¼ŒåŒæ—¶è¿˜ä¿æŒæäº¤çš„ç‹¬ç«‹ã€‚\n\nç¤ºä¾‹ä»£ç ä½¿ç”¨çš„å€¼å¦‚ä¸‹ï¼š\n\n- ä¸»ä»“åº“è·¯å¾„ï¼šgithub.com/base.git\n- å­æ¨¡å—ä»“åº“ï¼šgithub.com/common.git\n- å­æ¨¡å—åœ¨ä¸»ä»“åº“è·¯å¾„ï¼šsrc/common\n\n### å­æ¨¡å—æ“ä½œ\n\n#### æ·»åŠ å­æ¨¡å—\n\nåœ¨ä¸»ä»“åº“æ‰§è¡Œ `git submoudle add <url> <repo_name>`ï¼Œæ‰§è¡Œåä¼šåœ¨ä¸»ä»“åº“ä¸‹åˆ›å»ºä¸€ä¸ª `repo_name` ç›®å½•å­˜æ”¾å­é¡¹ç›®ï¼›å¹¶ä¼šåˆ›å»ºä¸€ä¸ª `.git` éšè—æ–‡ä»¶\n \n```bash\ngit submoudle add github.com/common.git src/common\n```\n\næ·»åŠ å­æ¨¡å—åï¼Œä¸»ä»“åº“ä¼šå¢åŠ ä¸€ä¸ª `.gitmodules` æ–‡ä»¶ï¼Œè®°å½•å­æ¨¡å—ä¿¡æ¯\n\n```properties\n# .gitmodules æ–‡ä»¶\n[submodule \"src/common\"]\n\tpath = src/common\n\turl = github.com/common.git\n```\n\n#### æŸ¥çœ‹å­æ¨¡å—\n\n```bash\ngit submodule\n# è¾“å‡ºï¼šf5dfd8b05f594ca3c914393e7c641e3ff5285373 src/common (remotes/origin/HEAD)\n```\n\n#### åˆå§‹åŒ–å­æ¨¡å—é…ç½®\n\n```bash\ngit submodule init\n```\n\n#### æ›´æ–°å­æ¨¡å—\n\n```bash\n# æ›´æ–°å…¨éƒ¨å­æ¨¡å—\ngit submodule update\n# æ›´æ–°æŒ‡å®šå­æ¨¡å—\ngit submodule update src/common\n\n# é€’å½’æ›´æ–°å­æ¨¡å—\ngit submodule update --init --recursive\n\n# æ›´æ–°å­æ¨¡å—åˆ°æœåŠ¡å™¨æœ€æ–°ç‰ˆæœ¬\ngit submodule update --remote\n```\n\n#### æäº¤å­æ¨¡å—ä»£ç \n\nå­æ¨¡å—çš„é»˜è®¤åˆ†æ”¯ä¸æ˜¯ **master** ï¼Œè¿›å…¥ç›®å½•åéœ€è¦å…ˆåˆ‡æ¢åˆ†æ”¯ï¼Œå†ä¿®æ”¹æäº¤ä»£ç \n\n```bash\ncd src/common\ngit checkout master\ngit add .\ngit commit -m \"update\"\ngit push\n```\n\n#### åˆ é™¤å­æ¨¡å—\n\næ‰§è¡Œå‘½ä»¤åï¼Œä¼šåˆ é™¤ `src/common` æ–‡ä»¶å¤¹å’Œä¿®æ”¹ `.gitmodules` æ–‡ä»¶\n\n```bash\ngit rm src/common\ngit commit -m \"remove submodule\"\ngit push\n```\n\næœ¬åœ°å­æ¨¡å—ç›¸å…³æ–‡ä»¶ï¼ˆéå¿…é¡»åˆ é™¤ï¼‰ï¼š\n\n- åˆ é™¤ `.git/config` æ–‡ä»¶ä¸­ç›¸å…³é…ç½®\n- åˆ é™¤ `.git/modules/src/common` æ–‡ä»¶å¤¹\n\n### å…‹éš†åŒ…å«å­æ¨¡å—çš„ä¸»é¡¹ç›®\n\nåœ¨å…‹éš†ä¸»é¡¹ç›®æ—¶ï¼Œä¼šåŒ…å«å­æ¨¡å—ç›®å½•ï¼Œä½†ç›®å½•ä¸­æ²¡æœ‰ä»»ä½•æ–‡ä»¶ï¼Œæ­¤æ—¶éœ€è¦åˆå§‹åŒ–å­æ¨¡å—é…ç½®ï¼Œç„¶åå†æ›´æ–°å­æ¨¡å—ï¼Œæ‰ä¼šè·å–åˆ°å¯¹åº”çš„æ–‡ä»¶\n\n```bash\ngit clone github.com/base.git\ncd base\ngit submodule init\ngit submodule update\n```","slug":"gitå­æ¨¡å—","published":1,"updated":"2022-09-29T15:28:35.400Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clas9ert20016dk8fc5d6430g","content":"<h1 id=\"Git-å­æ¨¡å—\"><a href=\"#Git-å­æ¨¡å—\" class=\"headerlink\" title=\"Git å­æ¨¡å—\"></a><a class=\"link\"   href=\"https://www.cnblogs.com/renjt1991/p/15925259.html\" >Git å­æ¨¡å—<i class=\"fas fa-external-link-alt\"></i></a></h1><p>Git å­æ¨¡å—å…è®¸ä½ å°†ä¸€ä¸ª Git ä»“åº“ä½œä¸ºå¦ä¸€ä¸ª Git ä»“åº“çš„å­ç›®å½•ï¼Œå®ƒèƒ½è®©ä½ å°†å¦ä¸€ä¸ªä»“åº“å…‹éš†åˆ°è‡ªå·±çš„é¡¹ç›®ä¸­ï¼ŒåŒæ—¶è¿˜ä¿æŒæäº¤çš„ç‹¬ç«‹ã€‚</p>\n<p>ç¤ºä¾‹ä»£ç ä½¿ç”¨çš„å€¼å¦‚ä¸‹ï¼š</p>\n<ul>\n<li>ä¸»ä»“åº“è·¯å¾„ï¼šgithub.com&#x2F;base.git</li>\n<li>å­æ¨¡å—ä»“åº“ï¼šgithub.com&#x2F;common.git</li>\n<li>å­æ¨¡å—åœ¨ä¸»ä»“åº“è·¯å¾„ï¼šsrc&#x2F;common</li>\n</ul>\n<h3 id=\"å­æ¨¡å—æ“ä½œ\"><a href=\"#å­æ¨¡å—æ“ä½œ\" class=\"headerlink\" title=\"å­æ¨¡å—æ“ä½œ\"></a>å­æ¨¡å—æ“ä½œ</h3><h4 id=\"æ·»åŠ å­æ¨¡å—\"><a href=\"#æ·»åŠ å­æ¨¡å—\" class=\"headerlink\" title=\"æ·»åŠ å­æ¨¡å—\"></a>æ·»åŠ å­æ¨¡å—</h4><p>åœ¨ä¸»ä»“åº“æ‰§è¡Œ <code>git submoudle add &lt;url&gt; &lt;repo_name&gt;</code>ï¼Œæ‰§è¡Œåä¼šåœ¨ä¸»ä»“åº“ä¸‹åˆ›å»ºä¸€ä¸ª <code>repo_name</code> ç›®å½•å­˜æ”¾å­é¡¹ç›®ï¼›å¹¶ä¼šåˆ›å»ºä¸€ä¸ª <code>.git</code> éšè—æ–‡ä»¶</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git submoudle add github.com/common.git src/common</span><br></pre></td></tr></table></figure>\n\n<p>æ·»åŠ å­æ¨¡å—åï¼Œä¸»ä»“åº“ä¼šå¢åŠ ä¸€ä¸ª <code>.gitmodules</code> æ–‡ä»¶ï¼Œè®°å½•å­æ¨¡å—ä¿¡æ¯</p>\n<figure class=\"highlight properties\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># .gitmodules æ–‡ä»¶</span></span><br><span class=\"line\"><span class=\"attr\">[submodule</span> <span class=\"string\">&quot;src/common&quot;]</span></span><br><span class=\"line\">\t<span class=\"attr\">path</span> = <span class=\"string\">src/common</span></span><br><span class=\"line\">\t<span class=\"attr\">url</span> = <span class=\"string\">github.com/common.git</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"æŸ¥çœ‹å­æ¨¡å—\"><a href=\"#æŸ¥çœ‹å­æ¨¡å—\" class=\"headerlink\" title=\"æŸ¥çœ‹å­æ¨¡å—\"></a>æŸ¥çœ‹å­æ¨¡å—</h4><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git submodule</span><br><span class=\"line\"><span class=\"comment\"># è¾“å‡ºï¼šf5dfd8b05f594ca3c914393e7c641e3ff5285373 src/common (remotes/origin/HEAD)</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"åˆå§‹åŒ–å­æ¨¡å—é…ç½®\"><a href=\"#åˆå§‹åŒ–å­æ¨¡å—é…ç½®\" class=\"headerlink\" title=\"åˆå§‹åŒ–å­æ¨¡å—é…ç½®\"></a>åˆå§‹åŒ–å­æ¨¡å—é…ç½®</h4><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git submodule init</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"æ›´æ–°å­æ¨¡å—\"><a href=\"#æ›´æ–°å­æ¨¡å—\" class=\"headerlink\" title=\"æ›´æ–°å­æ¨¡å—\"></a>æ›´æ–°å­æ¨¡å—</h4><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># æ›´æ–°å…¨éƒ¨å­æ¨¡å—</span></span><br><span class=\"line\">git submodule update</span><br><span class=\"line\"><span class=\"comment\"># æ›´æ–°æŒ‡å®šå­æ¨¡å—</span></span><br><span class=\"line\">git submodule update src/common</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># é€’å½’æ›´æ–°å­æ¨¡å—</span></span><br><span class=\"line\">git submodule update --init --recursive</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># æ›´æ–°å­æ¨¡å—åˆ°æœåŠ¡å™¨æœ€æ–°ç‰ˆæœ¬</span></span><br><span class=\"line\">git submodule update --remote</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"æäº¤å­æ¨¡å—ä»£ç \"><a href=\"#æäº¤å­æ¨¡å—ä»£ç \" class=\"headerlink\" title=\"æäº¤å­æ¨¡å—ä»£ç \"></a>æäº¤å­æ¨¡å—ä»£ç </h4><p>å­æ¨¡å—çš„é»˜è®¤åˆ†æ”¯ä¸æ˜¯ <strong>master</strong> ï¼Œè¿›å…¥ç›®å½•åéœ€è¦å…ˆåˆ‡æ¢åˆ†æ”¯ï¼Œå†ä¿®æ”¹æäº¤ä»£ç </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">cd</span> src/common</span><br><span class=\"line\">git checkout master</span><br><span class=\"line\">git add .</span><br><span class=\"line\">git commit -m <span class=\"string\">&quot;update&quot;</span></span><br><span class=\"line\">git push</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"åˆ é™¤å­æ¨¡å—\"><a href=\"#åˆ é™¤å­æ¨¡å—\" class=\"headerlink\" title=\"åˆ é™¤å­æ¨¡å—\"></a>åˆ é™¤å­æ¨¡å—</h4><p>æ‰§è¡Œå‘½ä»¤åï¼Œä¼šåˆ é™¤ <code>src/common</code> æ–‡ä»¶å¤¹å’Œä¿®æ”¹ <code>.gitmodules</code> æ–‡ä»¶</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git <span class=\"built_in\">rm</span> src/common</span><br><span class=\"line\">git commit -m <span class=\"string\">&quot;remove submodule&quot;</span></span><br><span class=\"line\">git push</span><br></pre></td></tr></table></figure>\n\n<p>æœ¬åœ°å­æ¨¡å—ç›¸å…³æ–‡ä»¶ï¼ˆéå¿…é¡»åˆ é™¤ï¼‰ï¼š</p>\n<ul>\n<li>åˆ é™¤ <code>.git/config</code> æ–‡ä»¶ä¸­ç›¸å…³é…ç½®</li>\n<li>åˆ é™¤ <code>.git/modules/src/common</code> æ–‡ä»¶å¤¹</li>\n</ul>\n<h3 id=\"å…‹éš†åŒ…å«å­æ¨¡å—çš„ä¸»é¡¹ç›®\"><a href=\"#å…‹éš†åŒ…å«å­æ¨¡å—çš„ä¸»é¡¹ç›®\" class=\"headerlink\" title=\"å…‹éš†åŒ…å«å­æ¨¡å—çš„ä¸»é¡¹ç›®\"></a>å…‹éš†åŒ…å«å­æ¨¡å—çš„ä¸»é¡¹ç›®</h3><p>åœ¨å…‹éš†ä¸»é¡¹ç›®æ—¶ï¼Œä¼šåŒ…å«å­æ¨¡å—ç›®å½•ï¼Œä½†ç›®å½•ä¸­æ²¡æœ‰ä»»ä½•æ–‡ä»¶ï¼Œæ­¤æ—¶éœ€è¦åˆå§‹åŒ–å­æ¨¡å—é…ç½®ï¼Œç„¶åå†æ›´æ–°å­æ¨¡å—ï¼Œæ‰ä¼šè·å–åˆ°å¯¹åº”çš„æ–‡ä»¶</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git <span class=\"built_in\">clone</span> github.com/base.git</span><br><span class=\"line\"><span class=\"built_in\">cd</span> base</span><br><span class=\"line\">git submodule init</span><br><span class=\"line\">git submodule update</span><br></pre></td></tr></table></figure>","site":{"data":{"links":[{"name":"CZMæœ‰ç‚¹å†·","link":"https://czm.cool/","description":"CZMçš„åšå®¢","avatar":"https://img.czm.cool/avatar/avatar.png"},{"name":"PSH","link":"https://shamd.cloud/","description":"PSHçš„åšå®¢.","avatar":"https://shamd.cloud/upload/2022/07/afbb577733f46c9535dd1d6d6388278.jpg"},{"name":"KAI","link":"https://kainote.top/","description":"love artist, love code.","avatar":"https://cdn.jsdelivr.net/gh/kaix2301/pictures/img202201072101018.jpg"}]}},"excerpt":"","more":"<h1 id=\"Git-å­æ¨¡å—\"><a href=\"#Git-å­æ¨¡å—\" class=\"headerlink\" title=\"Git å­æ¨¡å—\"></a><a class=\"link\"   href=\"https://www.cnblogs.com/renjt1991/p/15925259.html\" >Git å­æ¨¡å—<i class=\"fas fa-external-link-alt\"></i></a></h1><p>Git å­æ¨¡å—å…è®¸ä½ å°†ä¸€ä¸ª Git ä»“åº“ä½œä¸ºå¦ä¸€ä¸ª Git ä»“åº“çš„å­ç›®å½•ï¼Œå®ƒèƒ½è®©ä½ å°†å¦ä¸€ä¸ªä»“åº“å…‹éš†åˆ°è‡ªå·±çš„é¡¹ç›®ä¸­ï¼ŒåŒæ—¶è¿˜ä¿æŒæäº¤çš„ç‹¬ç«‹ã€‚</p>\n<p>ç¤ºä¾‹ä»£ç ä½¿ç”¨çš„å€¼å¦‚ä¸‹ï¼š</p>\n<ul>\n<li>ä¸»ä»“åº“è·¯å¾„ï¼šgithub.com&#x2F;base.git</li>\n<li>å­æ¨¡å—ä»“åº“ï¼šgithub.com&#x2F;common.git</li>\n<li>å­æ¨¡å—åœ¨ä¸»ä»“åº“è·¯å¾„ï¼šsrc&#x2F;common</li>\n</ul>\n<h3 id=\"å­æ¨¡å—æ“ä½œ\"><a href=\"#å­æ¨¡å—æ“ä½œ\" class=\"headerlink\" title=\"å­æ¨¡å—æ“ä½œ\"></a>å­æ¨¡å—æ“ä½œ</h3><h4 id=\"æ·»åŠ å­æ¨¡å—\"><a href=\"#æ·»åŠ å­æ¨¡å—\" class=\"headerlink\" title=\"æ·»åŠ å­æ¨¡å—\"></a>æ·»åŠ å­æ¨¡å—</h4><p>åœ¨ä¸»ä»“åº“æ‰§è¡Œ <code>git submoudle add &lt;url&gt; &lt;repo_name&gt;</code>ï¼Œæ‰§è¡Œåä¼šåœ¨ä¸»ä»“åº“ä¸‹åˆ›å»ºä¸€ä¸ª <code>repo_name</code> ç›®å½•å­˜æ”¾å­é¡¹ç›®ï¼›å¹¶ä¼šåˆ›å»ºä¸€ä¸ª <code>.git</code> éšè—æ–‡ä»¶</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git submoudle add github.com/common.git src/common</span><br></pre></td></tr></table></figure>\n\n<p>æ·»åŠ å­æ¨¡å—åï¼Œä¸»ä»“åº“ä¼šå¢åŠ ä¸€ä¸ª <code>.gitmodules</code> æ–‡ä»¶ï¼Œè®°å½•å­æ¨¡å—ä¿¡æ¯</p>\n<figure class=\"highlight properties\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># .gitmodules æ–‡ä»¶</span></span><br><span class=\"line\"><span class=\"attr\">[submodule</span> <span class=\"string\">&quot;src/common&quot;]</span></span><br><span class=\"line\">\t<span class=\"attr\">path</span> = <span class=\"string\">src/common</span></span><br><span class=\"line\">\t<span class=\"attr\">url</span> = <span class=\"string\">github.com/common.git</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"æŸ¥çœ‹å­æ¨¡å—\"><a href=\"#æŸ¥çœ‹å­æ¨¡å—\" class=\"headerlink\" title=\"æŸ¥çœ‹å­æ¨¡å—\"></a>æŸ¥çœ‹å­æ¨¡å—</h4><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git submodule</span><br><span class=\"line\"><span class=\"comment\"># è¾“å‡ºï¼šf5dfd8b05f594ca3c914393e7c641e3ff5285373 src/common (remotes/origin/HEAD)</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"åˆå§‹åŒ–å­æ¨¡å—é…ç½®\"><a href=\"#åˆå§‹åŒ–å­æ¨¡å—é…ç½®\" class=\"headerlink\" title=\"åˆå§‹åŒ–å­æ¨¡å—é…ç½®\"></a>åˆå§‹åŒ–å­æ¨¡å—é…ç½®</h4><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git submodule init</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"æ›´æ–°å­æ¨¡å—\"><a href=\"#æ›´æ–°å­æ¨¡å—\" class=\"headerlink\" title=\"æ›´æ–°å­æ¨¡å—\"></a>æ›´æ–°å­æ¨¡å—</h4><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># æ›´æ–°å…¨éƒ¨å­æ¨¡å—</span></span><br><span class=\"line\">git submodule update</span><br><span class=\"line\"><span class=\"comment\"># æ›´æ–°æŒ‡å®šå­æ¨¡å—</span></span><br><span class=\"line\">git submodule update src/common</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># é€’å½’æ›´æ–°å­æ¨¡å—</span></span><br><span class=\"line\">git submodule update --init --recursive</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># æ›´æ–°å­æ¨¡å—åˆ°æœåŠ¡å™¨æœ€æ–°ç‰ˆæœ¬</span></span><br><span class=\"line\">git submodule update --remote</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"æäº¤å­æ¨¡å—ä»£ç \"><a href=\"#æäº¤å­æ¨¡å—ä»£ç \" class=\"headerlink\" title=\"æäº¤å­æ¨¡å—ä»£ç \"></a>æäº¤å­æ¨¡å—ä»£ç </h4><p>å­æ¨¡å—çš„é»˜è®¤åˆ†æ”¯ä¸æ˜¯ <strong>master</strong> ï¼Œè¿›å…¥ç›®å½•åéœ€è¦å…ˆåˆ‡æ¢åˆ†æ”¯ï¼Œå†ä¿®æ”¹æäº¤ä»£ç </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">cd</span> src/common</span><br><span class=\"line\">git checkout master</span><br><span class=\"line\">git add .</span><br><span class=\"line\">git commit -m <span class=\"string\">&quot;update&quot;</span></span><br><span class=\"line\">git push</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"åˆ é™¤å­æ¨¡å—\"><a href=\"#åˆ é™¤å­æ¨¡å—\" class=\"headerlink\" title=\"åˆ é™¤å­æ¨¡å—\"></a>åˆ é™¤å­æ¨¡å—</h4><p>æ‰§è¡Œå‘½ä»¤åï¼Œä¼šåˆ é™¤ <code>src/common</code> æ–‡ä»¶å¤¹å’Œä¿®æ”¹ <code>.gitmodules</code> æ–‡ä»¶</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git <span class=\"built_in\">rm</span> src/common</span><br><span class=\"line\">git commit -m <span class=\"string\">&quot;remove submodule&quot;</span></span><br><span class=\"line\">git push</span><br></pre></td></tr></table></figure>\n\n<p>æœ¬åœ°å­æ¨¡å—ç›¸å…³æ–‡ä»¶ï¼ˆéå¿…é¡»åˆ é™¤ï¼‰ï¼š</p>\n<ul>\n<li>åˆ é™¤ <code>.git/config</code> æ–‡ä»¶ä¸­ç›¸å…³é…ç½®</li>\n<li>åˆ é™¤ <code>.git/modules/src/common</code> æ–‡ä»¶å¤¹</li>\n</ul>\n<h3 id=\"å…‹éš†åŒ…å«å­æ¨¡å—çš„ä¸»é¡¹ç›®\"><a href=\"#å…‹éš†åŒ…å«å­æ¨¡å—çš„ä¸»é¡¹ç›®\" class=\"headerlink\" title=\"å…‹éš†åŒ…å«å­æ¨¡å—çš„ä¸»é¡¹ç›®\"></a>å…‹éš†åŒ…å«å­æ¨¡å—çš„ä¸»é¡¹ç›®</h3><p>åœ¨å…‹éš†ä¸»é¡¹ç›®æ—¶ï¼Œä¼šåŒ…å«å­æ¨¡å—ç›®å½•ï¼Œä½†ç›®å½•ä¸­æ²¡æœ‰ä»»ä½•æ–‡ä»¶ï¼Œæ­¤æ—¶éœ€è¦åˆå§‹åŒ–å­æ¨¡å—é…ç½®ï¼Œç„¶åå†æ›´æ–°å­æ¨¡å—ï¼Œæ‰ä¼šè·å–åˆ°å¯¹åº”çš„æ–‡ä»¶</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git <span class=\"built_in\">clone</span> github.com/base.git</span><br><span class=\"line\"><span class=\"built_in\">cd</span> base</span><br><span class=\"line\">git submodule init</span><br><span class=\"line\">git submodule update</span><br></pre></td></tr></table></figure>"},{"title":"è¾¹ç¼˜è®¡ç®—","date":"2022-09-26T11:21:08.000Z","password":"hello","abstract":"è¿™é‡Œæœ‰ä¸œè¥¿è¢«åŠ å¯†äº†ï¼Œéœ€è¦è¾“å…¥å¯†ç æŸ¥çœ‹å“¦ã€‚","message":"æ‚¨å¥½ï¼Œè¿™é‡Œéœ€è¦å¯†ç ã€‚","wrong_pass_message":"æŠ±æ­‰ï¼Œè¿™ä¸ªå¯†ç çœ‹ç€ä¸å¤ªå¯¹ï¼Œè¯·å†è¯•è¯•ã€‚","wrong_hash_message":"æŠ±æ­‰ï¼Œè¿™ä¸ªæ–‡ç« ä¸èƒ½è¢«çº æ­£ï¼Œä¸è¿‡æ‚¨è¿˜æ˜¯èƒ½çœ‹çœ‹è§£å¯†åçš„å†…å®¹ã€‚","_content":"# MCDS: AI Augmented Workflow Scheduling in Mobile Edge Cloud Computing Systems\n\n## æ‘˜è¦\n \nç ”ç©¶ï¼šå·¥ä½œæµè°ƒåº¦\tç›®çš„ï¼šæœ‰æ•ˆåˆ©ç”¨è®¡ç®—èµ„æºæ»¡è¶³ç”¨æˆ·çš„ä¸šåŠ¡éœ€æ±‚\nä¼ ç»Ÿè°ƒåº¦æ–¹æ³•ï¼šåˆ©ç”¨è¾¹ç¼˜è®¡ç®—å¹³å°çš„ä½å“åº”æ—¶é—´æ¥ä¼˜åŒ–åº”ç”¨æœåŠ¡è´¨é‡ï¼ˆQoSï¼‰\né¢ä¸´é—®é¢˜ï¼šè®¡ç®—çš„å¼‚æ„æ€§ã€ç§»åŠ¨è®¾å¤‡ä¸æ–­å˜åŒ–çš„å»¶è¿Ÿå’Œå·¥ä½œè´Ÿè½½èµ„æºéœ€æ±‚çš„ä¸ç¨³å®šæ€§ï¼Œåœ¨ç§»åŠ¨è¾¹ç¼˜äº‘ç³»ç»Ÿä¸­è°ƒåº¦å·¥ä½œæµåº”ç”¨ç¨‹åºå…·æœ‰æŒ‘æˆ˜æ€§ã€‚\nè§£å†³æ–¹æ¡ˆï¼šå¼€å‘ä¸€ç§é«˜æ•ˆå»ºæ¨¡QoSç›®æ ‡çš„æœ‰è¿œè§çš„ä¼˜åŒ–æ–¹æ¡ˆ\nMCDSï¼šä¸€ç§åŸºäºäººå·¥æ™ºèƒ½çš„è°ƒåº¦ç®—æ³•ï¼ŒåŸºäºæ ‘çš„æœç´¢ç­–ç•¥å’ŒåŸºäºæ·±åº¦ç¥ç»ç½‘ç»œçš„ä»£ç†æ¨¡å‹æ¥ä¼°è®¡å³æ—¶æ“ä½œå¯¹QoSçš„é•¿æœŸå½±å“ï¼Œä»¥å®ç°è°ƒåº¦å†³ç­–çš„å¥å£®ä¼˜åŒ–\nç»“æœï¼šåœ¨ç‰©ç†å’Œæ¨¡æ‹Ÿè¾¹ç¼˜äº‘æµ‹è¯•å¹³å°ä¸Šçš„å®éªŒè¡¨æ˜ï¼ŒMCDSåœ¨èƒ½è€—ï¼Œå“åº”æ—¶é—´ï¼ŒSLA violationså’Œæˆæœ¬æ–¹é¢åˆ†åˆ«æé«˜äº†6.13%ï¼Œ4.56%ï¼Œ45.09%å’Œ30.71%\n\n## ä»‹ç»\n\nè¾¹ç¼˜äº‘è®¡ç®—ï¼Œä¹Ÿç§°ä¸ºé›¾è®¡ç®—ï¼Œæ˜¯äº‘å’Œè¾¹ç¼˜è®¾å¤‡çš„åˆå¹¶ï¼Œæ—¨åœ¨é€šè¿‡åˆ©ç”¨ç½‘ç»œè¾¹ç¼˜çš„èŠ‚ç‚¹ï¼Œåªåœ¨äº‘ä¸­æ‰§è¡Œè®¡ç®—å¯†é›†å‹å¤„ç†ï¼Œä¸ºç”¨æˆ·å¸¦æ¥ä½å»¶è¿ŸæœåŠ¡ã€‚ç°ä»£è®¡ç®—æä¾›äº†ä¸€ç³»åˆ—æ–°çš„è®¡ç®—å¼‚æ„å·¥ä½œæµï¼ŒåŒ…æ‹¬åœ¨è¾¹ç¼˜æ”¶é›†æ•°æ®å’Œåœ¨äº‘åç«¯å¤„ç†æ•°æ®ã€‚è¿™ç±»å·¥ä½œæµæœ€è¿‘å·²è¢«åº”ç”¨äºè¾¹ç¼˜äº‘ç¯å¢ƒç­‰æ··åˆè®¡ç®—å¹³å°ï¼Œä»¥èŠ‚çœæˆæœ¬ã€‚å·¥ä½œæµè°ƒåº¦é—®é¢˜æ—¨åœ¨æœ‰æ•ˆåœ°å°†ä»»åŠ¡æ˜ å°„åˆ°å¯ç”¨èµ„æºä¸Šï¼Œä»¥ä¼˜åŒ–æœåŠ¡è´¨é‡(QoS)æŒ‡æ ‡ã€‚\n\næŒ‘æˆ˜ï¼šå·¥ä½œæµé¢ä¸´çš„æŒ‘æˆ˜æ˜¯å¤„ç†å¼‚æ„å’Œéå¹³ç¨³çš„ç”¨æˆ·éœ€æ±‚ï¼Œç”±äºè¾¹ç¼˜èŠ‚ç‚¹å’Œäº‘èŠ‚ç‚¹å…·æœ‰ä¸åŒçš„è®¡ç®—èƒ½åŠ›ï¼Œç½‘ç»œå¸¦å®½å’Œå»¶è¿Ÿï¼Œå·¥ä½œæµè°ƒåº¦ç¨‹åºéœ€è¦æ„è¯†åˆ°èµ„æºçš„å¼‚è´¨æ€§ï¼Œä»¥ä¾¿åšå‡ºæœ€ä¼˜å†³ç­–ã€‚è¶…ä½æ—¶å»¶ï¼Œç”µæ± èƒ½è€—ï¼ŒDAGä¾èµ–ä¸ä¸€è‡´ã€‚\n\n### ä»»åŠ¡æ³¢åŠ¨æ€§å’Œä¸»æœºç§»åŠ¨æ€§\n\nä»»åŠ¡æ³¢åŠ¨æ€§:ä¸æ–­å˜åŒ–çš„èµ„æºéœ€æ±‚å’ŒæœåŠ¡éœ€æ±‚\nä¸»æœºç§»åŠ¨æ€§ï¼šä¸»æœºç§»åŠ¨å¯¼è‡´éå¹³ç¨³å»¶è¿Ÿï¼Œç§»åŠ¨è®¡ç®—è®¾å¤‡å¢åŠ ï¼Œç½‘ç»œç‰¹å¾å¦‚å»¶è¿Ÿå’Œå¸¦å®½å˜çš„ä¸ç¨³å®šã€‚è§£å†³:å®æ—¶ç›‘æ§å’Œæ›´æ–°è°ƒåº¦ç­–ç•¥ã€‚\nå‚è€ƒæ–‡çŒ®ï¼Œé‡æ–°è°ƒåº¦\n\n> J. Yu, R. Buyya, and C. K. Tham, â€œCost-based scheduling of scientific workflow applications on utility grids,â€ in Proc. 1st Int. Conf.\n> e-Sci. Grid Comput., 2005, pp. 8â€“147.\n\nä¸ºäº†é¿å…è¿‡å¤šçš„å¼€é”€ï¼Œè¿™ç±»æ–¹æ³•çš„å®¢è§‚ä¼°è®¡éœ€è¦éå¸¸å‡†ç¡®\n\n### ç ”ç©¶ç°çŠ¶\n\nè¿›åŒ–æ–¹æ¡ˆ\nå¼ºåŒ–å­¦ä¹ \nå¯å‘å¼ç®—æ³•\nå…ƒå¯å‘å¼ç®—æ³•\n\n### æ–°è§è§£\n\nè¿‡å»ä½¿ç”¨ç¥ç»ç½‘ç»œé€¼è¿‘ä¼˜åŒ–ç›®æ ‡ï¼Œå……å½“QoSè¿‘ä¼¼å€¼ï¼Œç”±äºè°ƒåº¦å†³ç­–éœ€è¦åœ¨æ¥è¿‘å®æ—¶çš„æƒ…å†µä¸‹è¿›è¡Œï¼Œå…ˆå‰çš„å·¥ä½œæ²¡æœ‰ä½¿ç”¨è¿™ç§å‰ç»æ€§æ–¹æ¡ˆï¼Œå› æ­¤æ‰§è¡Œçš„æ˜¯çŸ­è§†ä¼˜åŒ–ã€‚\nç»“åˆè’™ç‰¹å¡ç½—å­¦ä¹ å’Œæ·±åº¦ä»£ç†æ¨¡å‹æ¥è¿›è¡ŒQoSæœ€ä¼˜å·¥ä½œæµè°ƒåº¦æ˜¯éå¸¸é‡è¦çš„ã€‚è¿™æ˜¯å› ä¸ºæ™®é€šçš„è’™ç‰¹å¡æ´›å­¦ä¹ éœ€è¦åœ¨éšæœºè°ƒåº¦æ“ä½œä¸‹æ‰§è¡Œå¤šä¸ªå¤šæ­¥éª¤æ¨¡æ‹Ÿè¿è¡Œï¼Œè®¡ç®—æˆæœ¬å¾ˆé«˜ã€‚æ­¤å¤–ï¼Œä¼ ç»Ÿçš„åŸºäºå†å²æ•°æ®è®­ç»ƒçš„æ·±åº¦ä»£ç†æ¨¡å‹åªæä¾›æ‰§è¡ŒåŠ¨ä½œåçŸ­æœŸçš„ç³»ç»ŸçŠ¶æ€çš„QoSè¯„åˆ†ï¼Œè€Œä¸æ˜¯é•¿æœŸçš„QoSã€‚ä¸ºäº†è§£å†³è¿™äº›é—®é¢˜ï¼Œæˆ‘ä»¬ä¸æ˜¯éšæœºé€‰æ‹©è¦æ¨¡æ‹Ÿçš„åŠ¨ä½œï¼Œè€Œæ˜¯åœ¨è’™ç‰¹å¡æ´›å­¦ä¹ æ¡†æ¶å†…è®­ç»ƒä¸€ä¸ªæ·±åº¦ä»£ç†æ¨¡å‹æ¥è¿‘ä¼¼é•¿æœŸQoSåˆ†æ•°ã€‚\nä¸ºäº†å‘ç°æ½œåœ¨çš„æ›´å¥½çš„è¡ŒåŠ¨ï¼Œæˆ‘ä»¬ä¸æ–­æ¢ç´¢çŠ¶æ€-è¡ŒåŠ¨æœç´¢ç©ºé—´ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªçŸ­æœŸä¼˜åŒ–æ–¹æ¡ˆçš„åŠ¨ä½œè¾“å‡ºã€‚\n\n### ç›¸å…³å·¥ä½œä»‹ç»\n\nå¯å‘å¼ç®—æ³•ï¼Œä¸€äº›ç»å…¸ä½œå“ä½¿ç”¨å¯å‘å¼ç®—æ³•æ¥ä¼˜åŒ–å·¥ä½œæµè°ƒåº¦å†³ç­–\nç›®çš„ï¼šä¼˜åŒ–ç›®æ ‡ï¼Œä¾‹å¦‚å¹³å‡å“åº”æ—¶é—´ã€èƒ½æºæ¶ˆè€—ã€æ‰§è¡Œæˆæœ¬ã€èµ„æºåˆ©ç”¨ç‡æˆ– SLA è¿åç‡\n\n# MCDS: AI Augmented Workflow Scheduling in Mobile Edge Cloud Computing Systems\n\n## æ‘˜è¦\n\nç ”ç©¶ï¼šå·¥ä½œæµè°ƒåº¦\tç›®çš„ï¼šæœ‰æ•ˆåˆ©ç”¨è®¡ç®—èµ„æºæ»¡è¶³ç”¨æˆ·çš„ä¸šåŠ¡éœ€æ±‚\nä¼ ç»Ÿè°ƒåº¦æ–¹æ³•ï¼šåˆ©ç”¨è¾¹ç¼˜è®¡ç®—å¹³å°çš„ä½å“åº”æ—¶é—´æ¥ä¼˜åŒ–åº”ç”¨æœåŠ¡è´¨é‡ï¼ˆQoSï¼‰\né¢ä¸´é—®é¢˜ï¼šè®¡ç®—çš„å¼‚æ„æ€§ã€ç§»åŠ¨è®¾å¤‡ä¸æ–­å˜åŒ–çš„å»¶è¿Ÿå’Œå·¥ä½œè´Ÿè½½èµ„æºéœ€æ±‚çš„ä¸ç¨³å®šæ€§ï¼Œåœ¨ç§»åŠ¨è¾¹ç¼˜äº‘ç³»ç»Ÿä¸­è°ƒåº¦å·¥ä½œæµåº”ç”¨ç¨‹åºå…·æœ‰æŒ‘æˆ˜æ€§ã€‚\nè§£å†³æ–¹æ¡ˆï¼šå¼€å‘ä¸€ç§é«˜æ•ˆå»ºæ¨¡QoSç›®æ ‡çš„æœ‰è¿œè§çš„ä¼˜åŒ–æ–¹æ¡ˆ\nMCDSï¼šä¸€ç§åŸºäºäººå·¥æ™ºèƒ½çš„è°ƒåº¦ç®—æ³•ï¼ŒåŸºäºæ ‘çš„æœç´¢ç­–ç•¥å’ŒåŸºäºæ·±åº¦ç¥ç»ç½‘ç»œçš„ä»£ç†æ¨¡å‹æ¥ä¼°è®¡å³æ—¶æ“ä½œå¯¹QoSçš„é•¿æœŸå½±å“ï¼Œä»¥å®ç°è°ƒåº¦å†³ç­–çš„å¥å£®ä¼˜åŒ–\nç»“æœï¼šåœ¨ç‰©ç†å’Œæ¨¡æ‹Ÿè¾¹ç¼˜äº‘æµ‹è¯•å¹³å°ä¸Šçš„å®éªŒè¡¨æ˜ï¼ŒMCDSåœ¨èƒ½è€—ï¼Œå“åº”æ—¶é—´ï¼ŒSLA violationså’Œæˆæœ¬æ–¹é¢åˆ†åˆ«æé«˜äº†6.13%ï¼Œ4.56%ï¼Œ45.09%å’Œ30.71%\n\n## ä»‹ç»\n\nè¾¹ç¼˜äº‘è®¡ç®—ï¼Œä¹Ÿç§°ä¸ºé›¾è®¡ç®—ï¼Œæ˜¯äº‘å’Œè¾¹ç¼˜è®¾å¤‡çš„åˆå¹¶ï¼Œæ—¨åœ¨é€šè¿‡åˆ©ç”¨ç½‘ç»œè¾¹ç¼˜çš„èŠ‚ç‚¹ï¼Œåªåœ¨äº‘ä¸­æ‰§è¡Œè®¡ç®—å¯†é›†å‹å¤„ç†ï¼Œä¸ºç”¨æˆ·å¸¦æ¥ä½å»¶è¿ŸæœåŠ¡ã€‚ç°ä»£è®¡ç®—æä¾›äº†ä¸€ç³»åˆ—æ–°çš„è®¡ç®—å¼‚æ„å·¥ä½œæµï¼ŒåŒ…æ‹¬åœ¨è¾¹ç¼˜æ”¶é›†æ•°æ®å’Œåœ¨äº‘åç«¯å¤„ç†æ•°æ®ã€‚è¿™ç±»å·¥ä½œæµæœ€è¿‘å·²è¢«åº”ç”¨äºè¾¹ç¼˜äº‘ç¯å¢ƒç­‰æ··åˆè®¡ç®—å¹³å°ï¼Œä»¥èŠ‚çœæˆæœ¬ã€‚å·¥ä½œæµè°ƒåº¦é—®é¢˜æ—¨åœ¨æœ‰æ•ˆåœ°å°†ä»»åŠ¡æ˜ å°„åˆ°å¯ç”¨èµ„æºä¸Šï¼Œä»¥ä¼˜åŒ–æœåŠ¡è´¨é‡(QoS)æŒ‡æ ‡ã€‚\n\næŒ‘æˆ˜ï¼šå·¥ä½œæµé¢ä¸´çš„æŒ‘æˆ˜æ˜¯å¤„ç†å¼‚æ„å’Œéå¹³ç¨³çš„ç”¨æˆ·éœ€æ±‚ï¼Œç”±äºè¾¹ç¼˜èŠ‚ç‚¹å’Œäº‘èŠ‚ç‚¹å…·æœ‰ä¸åŒçš„è®¡ç®—èƒ½åŠ›ï¼Œç½‘ç»œå¸¦å®½å’Œå»¶è¿Ÿï¼Œå·¥ä½œæµè°ƒåº¦ç¨‹åºéœ€è¦æ„è¯†åˆ°èµ„æºçš„å¼‚è´¨æ€§ï¼Œä»¥ä¾¿åšå‡ºæœ€ä¼˜å†³ç­–ã€‚è¶…ä½æ—¶å»¶ï¼Œç”µæ± èƒ½è€—ï¼ŒDAGä¾èµ–ä¸ä¸€è‡´ã€‚\n\n### ä»»åŠ¡æ³¢åŠ¨æ€§å’Œä¸»æœºç§»åŠ¨æ€§\n\nä»»åŠ¡æ³¢åŠ¨æ€§:ä¸æ–­å˜åŒ–çš„èµ„æºéœ€æ±‚å’ŒæœåŠ¡éœ€æ±‚\nä¸»æœºç§»åŠ¨æ€§ï¼šä¸»æœºç§»åŠ¨å¯¼è‡´éå¹³ç¨³å»¶è¿Ÿï¼Œç§»åŠ¨è®¡ç®—è®¾å¤‡å¢åŠ ï¼Œç½‘ç»œç‰¹å¾å¦‚å»¶è¿Ÿå’Œå¸¦å®½å˜çš„ä¸ç¨³å®šã€‚è§£å†³:å®æ—¶ç›‘æ§å’Œæ›´æ–°è°ƒåº¦ç­–ç•¥ã€‚\nå‚è€ƒæ–‡çŒ®ï¼Œé‡æ–°è°ƒåº¦\n\n> J. Yu, R. Buyya, and C. K. Tham, â€œCost-based scheduling of scientific workflow applications on utility grids,â€ in Proc. 1st Int. Conf.\n> e-Sci. Grid Comput., 2005, pp. 8â€“147.\n\nä¸ºäº†é¿å…è¿‡å¤šçš„å¼€é”€ï¼Œè¿™ç±»æ–¹æ³•çš„å®¢è§‚ä¼°è®¡éœ€è¦éå¸¸å‡†ç¡®\n\n### ç ”ç©¶ç°çŠ¶\n\nè¿›åŒ–æ–¹æ¡ˆ\nå¼ºåŒ–å­¦ä¹ \nå¯å‘å¼ç®—æ³•\nå…ƒå¯å‘å¼ç®—æ³•\n\n### æ–°è§è§£\n\nè¿‡å»ä½¿ç”¨ç¥ç»ç½‘ç»œé€¼è¿‘ä¼˜åŒ–ç›®æ ‡ï¼Œå……å½“QoSè¿‘ä¼¼å€¼ï¼Œç”±äºè°ƒåº¦å†³ç­–éœ€è¦åœ¨æ¥è¿‘å®æ—¶çš„æƒ…å†µä¸‹è¿›è¡Œï¼Œå…ˆå‰çš„å·¥ä½œæ²¡æœ‰ä½¿ç”¨è¿™ç§å‰ç»æ€§æ–¹æ¡ˆï¼Œå› æ­¤æ‰§è¡Œçš„æ˜¯çŸ­è§†ä¼˜åŒ–ã€‚\nç»“åˆè’™ç‰¹å¡ç½—å­¦ä¹ å’Œæ·±åº¦ä»£ç†æ¨¡å‹æ¥è¿›è¡ŒQoSæœ€ä¼˜å·¥ä½œæµè°ƒåº¦æ˜¯éå¸¸é‡è¦çš„ã€‚è¿™æ˜¯å› ä¸ºæ™®é€šçš„è’™ç‰¹å¡æ´›å­¦ä¹ éœ€è¦åœ¨éšæœºè°ƒåº¦æ“ä½œä¸‹æ‰§è¡Œå¤šä¸ªå¤šæ­¥éª¤æ¨¡æ‹Ÿè¿è¡Œï¼Œè®¡ç®—æˆæœ¬å¾ˆé«˜ã€‚æ­¤å¤–ï¼Œä¼ ç»Ÿçš„åŸºäºå†å²æ•°æ®è®­ç»ƒçš„æ·±åº¦ä»£ç†æ¨¡å‹åªæä¾›æ‰§è¡ŒåŠ¨ä½œåçŸ­æœŸçš„ç³»ç»ŸçŠ¶æ€çš„QoSè¯„åˆ†ï¼Œè€Œä¸æ˜¯é•¿æœŸçš„QoSã€‚ä¸ºäº†è§£å†³è¿™äº›é—®é¢˜ï¼Œæˆ‘ä»¬ä¸æ˜¯éšæœºé€‰æ‹©è¦æ¨¡æ‹Ÿçš„åŠ¨ä½œï¼Œè€Œæ˜¯åœ¨è’™ç‰¹å¡æ´›å­¦ä¹ æ¡†æ¶å†…è®­ç»ƒä¸€ä¸ªæ·±åº¦ä»£ç†æ¨¡å‹æ¥è¿‘ä¼¼é•¿æœŸQoSåˆ†æ•°ã€‚\nä¸ºäº†å‘ç°æ½œåœ¨çš„æ›´å¥½çš„è¡ŒåŠ¨ï¼Œæˆ‘ä»¬ä¸æ–­æ¢ç´¢çŠ¶æ€-è¡ŒåŠ¨æœç´¢ç©ºé—´ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªçŸ­æœŸä¼˜åŒ–æ–¹æ¡ˆçš„åŠ¨ä½œè¾“å‡ºã€‚\n\n### ç›¸å…³å·¥ä½œä»‹ç»\n\nå¯å‘å¼ç®—æ³•ï¼Œä¸€äº›ç»å…¸ä½œå“ä½¿ç”¨å¯å‘å¼ç®—æ³•æ¥ä¼˜åŒ–å·¥ä½œæµè°ƒåº¦å†³ç­–\nç›®çš„ï¼šä¼˜åŒ–ç›®æ ‡ï¼Œä¾‹å¦‚å¹³å‡å“åº”æ—¶é—´ã€èƒ½æºæ¶ˆè€—ã€æ‰§è¡Œæˆæœ¬ã€èµ„æºåˆ©ç”¨ç‡æˆ– SLA è¿åç‡\n\n","source":"_posts/2022/09/è¾¹ç¼˜è®¡ç®—.md","raw":"---\ntitle: è¾¹ç¼˜è®¡ç®—\ndate: 2022-09-26 19:21:08\ntags: [è¾¹ç¼˜è®¡ç®—]\ncategories: [ç¬”è®°]\npassword: hello\nabstract: è¿™é‡Œæœ‰ä¸œè¥¿è¢«åŠ å¯†äº†ï¼Œéœ€è¦è¾“å…¥å¯†ç æŸ¥çœ‹å“¦ã€‚\nmessage: æ‚¨å¥½ï¼Œè¿™é‡Œéœ€è¦å¯†ç ã€‚\nwrong_pass_message: æŠ±æ­‰ï¼Œè¿™ä¸ªå¯†ç çœ‹ç€ä¸å¤ªå¯¹ï¼Œè¯·å†è¯•è¯•ã€‚\nwrong_hash_message: æŠ±æ­‰ï¼Œè¿™ä¸ªæ–‡ç« ä¸èƒ½è¢«çº æ­£ï¼Œä¸è¿‡æ‚¨è¿˜æ˜¯èƒ½çœ‹çœ‹è§£å¯†åçš„å†…å®¹ã€‚\n---\n# MCDS: AI Augmented Workflow Scheduling in Mobile Edge Cloud Computing Systems\n\n## æ‘˜è¦\n \nç ”ç©¶ï¼šå·¥ä½œæµè°ƒåº¦\tç›®çš„ï¼šæœ‰æ•ˆåˆ©ç”¨è®¡ç®—èµ„æºæ»¡è¶³ç”¨æˆ·çš„ä¸šåŠ¡éœ€æ±‚\nä¼ ç»Ÿè°ƒåº¦æ–¹æ³•ï¼šåˆ©ç”¨è¾¹ç¼˜è®¡ç®—å¹³å°çš„ä½å“åº”æ—¶é—´æ¥ä¼˜åŒ–åº”ç”¨æœåŠ¡è´¨é‡ï¼ˆQoSï¼‰\né¢ä¸´é—®é¢˜ï¼šè®¡ç®—çš„å¼‚æ„æ€§ã€ç§»åŠ¨è®¾å¤‡ä¸æ–­å˜åŒ–çš„å»¶è¿Ÿå’Œå·¥ä½œè´Ÿè½½èµ„æºéœ€æ±‚çš„ä¸ç¨³å®šæ€§ï¼Œåœ¨ç§»åŠ¨è¾¹ç¼˜äº‘ç³»ç»Ÿä¸­è°ƒåº¦å·¥ä½œæµåº”ç”¨ç¨‹åºå…·æœ‰æŒ‘æˆ˜æ€§ã€‚\nè§£å†³æ–¹æ¡ˆï¼šå¼€å‘ä¸€ç§é«˜æ•ˆå»ºæ¨¡QoSç›®æ ‡çš„æœ‰è¿œè§çš„ä¼˜åŒ–æ–¹æ¡ˆ\nMCDSï¼šä¸€ç§åŸºäºäººå·¥æ™ºèƒ½çš„è°ƒåº¦ç®—æ³•ï¼ŒåŸºäºæ ‘çš„æœç´¢ç­–ç•¥å’ŒåŸºäºæ·±åº¦ç¥ç»ç½‘ç»œçš„ä»£ç†æ¨¡å‹æ¥ä¼°è®¡å³æ—¶æ“ä½œå¯¹QoSçš„é•¿æœŸå½±å“ï¼Œä»¥å®ç°è°ƒåº¦å†³ç­–çš„å¥å£®ä¼˜åŒ–\nç»“æœï¼šåœ¨ç‰©ç†å’Œæ¨¡æ‹Ÿè¾¹ç¼˜äº‘æµ‹è¯•å¹³å°ä¸Šçš„å®éªŒè¡¨æ˜ï¼ŒMCDSåœ¨èƒ½è€—ï¼Œå“åº”æ—¶é—´ï¼ŒSLA violationså’Œæˆæœ¬æ–¹é¢åˆ†åˆ«æé«˜äº†6.13%ï¼Œ4.56%ï¼Œ45.09%å’Œ30.71%\n\n## ä»‹ç»\n\nè¾¹ç¼˜äº‘è®¡ç®—ï¼Œä¹Ÿç§°ä¸ºé›¾è®¡ç®—ï¼Œæ˜¯äº‘å’Œè¾¹ç¼˜è®¾å¤‡çš„åˆå¹¶ï¼Œæ—¨åœ¨é€šè¿‡åˆ©ç”¨ç½‘ç»œè¾¹ç¼˜çš„èŠ‚ç‚¹ï¼Œåªåœ¨äº‘ä¸­æ‰§è¡Œè®¡ç®—å¯†é›†å‹å¤„ç†ï¼Œä¸ºç”¨æˆ·å¸¦æ¥ä½å»¶è¿ŸæœåŠ¡ã€‚ç°ä»£è®¡ç®—æä¾›äº†ä¸€ç³»åˆ—æ–°çš„è®¡ç®—å¼‚æ„å·¥ä½œæµï¼ŒåŒ…æ‹¬åœ¨è¾¹ç¼˜æ”¶é›†æ•°æ®å’Œåœ¨äº‘åç«¯å¤„ç†æ•°æ®ã€‚è¿™ç±»å·¥ä½œæµæœ€è¿‘å·²è¢«åº”ç”¨äºè¾¹ç¼˜äº‘ç¯å¢ƒç­‰æ··åˆè®¡ç®—å¹³å°ï¼Œä»¥èŠ‚çœæˆæœ¬ã€‚å·¥ä½œæµè°ƒåº¦é—®é¢˜æ—¨åœ¨æœ‰æ•ˆåœ°å°†ä»»åŠ¡æ˜ å°„åˆ°å¯ç”¨èµ„æºä¸Šï¼Œä»¥ä¼˜åŒ–æœåŠ¡è´¨é‡(QoS)æŒ‡æ ‡ã€‚\n\næŒ‘æˆ˜ï¼šå·¥ä½œæµé¢ä¸´çš„æŒ‘æˆ˜æ˜¯å¤„ç†å¼‚æ„å’Œéå¹³ç¨³çš„ç”¨æˆ·éœ€æ±‚ï¼Œç”±äºè¾¹ç¼˜èŠ‚ç‚¹å’Œäº‘èŠ‚ç‚¹å…·æœ‰ä¸åŒçš„è®¡ç®—èƒ½åŠ›ï¼Œç½‘ç»œå¸¦å®½å’Œå»¶è¿Ÿï¼Œå·¥ä½œæµè°ƒåº¦ç¨‹åºéœ€è¦æ„è¯†åˆ°èµ„æºçš„å¼‚è´¨æ€§ï¼Œä»¥ä¾¿åšå‡ºæœ€ä¼˜å†³ç­–ã€‚è¶…ä½æ—¶å»¶ï¼Œç”µæ± èƒ½è€—ï¼ŒDAGä¾èµ–ä¸ä¸€è‡´ã€‚\n\n### ä»»åŠ¡æ³¢åŠ¨æ€§å’Œä¸»æœºç§»åŠ¨æ€§\n\nä»»åŠ¡æ³¢åŠ¨æ€§:ä¸æ–­å˜åŒ–çš„èµ„æºéœ€æ±‚å’ŒæœåŠ¡éœ€æ±‚\nä¸»æœºç§»åŠ¨æ€§ï¼šä¸»æœºç§»åŠ¨å¯¼è‡´éå¹³ç¨³å»¶è¿Ÿï¼Œç§»åŠ¨è®¡ç®—è®¾å¤‡å¢åŠ ï¼Œç½‘ç»œç‰¹å¾å¦‚å»¶è¿Ÿå’Œå¸¦å®½å˜çš„ä¸ç¨³å®šã€‚è§£å†³:å®æ—¶ç›‘æ§å’Œæ›´æ–°è°ƒåº¦ç­–ç•¥ã€‚\nå‚è€ƒæ–‡çŒ®ï¼Œé‡æ–°è°ƒåº¦\n\n> J. Yu, R. Buyya, and C. K. Tham, â€œCost-based scheduling of scientific workflow applications on utility grids,â€ in Proc. 1st Int. Conf.\n> e-Sci. Grid Comput., 2005, pp. 8â€“147.\n\nä¸ºäº†é¿å…è¿‡å¤šçš„å¼€é”€ï¼Œè¿™ç±»æ–¹æ³•çš„å®¢è§‚ä¼°è®¡éœ€è¦éå¸¸å‡†ç¡®\n\n### ç ”ç©¶ç°çŠ¶\n\nè¿›åŒ–æ–¹æ¡ˆ\nå¼ºåŒ–å­¦ä¹ \nå¯å‘å¼ç®—æ³•\nå…ƒå¯å‘å¼ç®—æ³•\n\n### æ–°è§è§£\n\nè¿‡å»ä½¿ç”¨ç¥ç»ç½‘ç»œé€¼è¿‘ä¼˜åŒ–ç›®æ ‡ï¼Œå……å½“QoSè¿‘ä¼¼å€¼ï¼Œç”±äºè°ƒåº¦å†³ç­–éœ€è¦åœ¨æ¥è¿‘å®æ—¶çš„æƒ…å†µä¸‹è¿›è¡Œï¼Œå…ˆå‰çš„å·¥ä½œæ²¡æœ‰ä½¿ç”¨è¿™ç§å‰ç»æ€§æ–¹æ¡ˆï¼Œå› æ­¤æ‰§è¡Œçš„æ˜¯çŸ­è§†ä¼˜åŒ–ã€‚\nç»“åˆè’™ç‰¹å¡ç½—å­¦ä¹ å’Œæ·±åº¦ä»£ç†æ¨¡å‹æ¥è¿›è¡ŒQoSæœ€ä¼˜å·¥ä½œæµè°ƒåº¦æ˜¯éå¸¸é‡è¦çš„ã€‚è¿™æ˜¯å› ä¸ºæ™®é€šçš„è’™ç‰¹å¡æ´›å­¦ä¹ éœ€è¦åœ¨éšæœºè°ƒåº¦æ“ä½œä¸‹æ‰§è¡Œå¤šä¸ªå¤šæ­¥éª¤æ¨¡æ‹Ÿè¿è¡Œï¼Œè®¡ç®—æˆæœ¬å¾ˆé«˜ã€‚æ­¤å¤–ï¼Œä¼ ç»Ÿçš„åŸºäºå†å²æ•°æ®è®­ç»ƒçš„æ·±åº¦ä»£ç†æ¨¡å‹åªæä¾›æ‰§è¡ŒåŠ¨ä½œåçŸ­æœŸçš„ç³»ç»ŸçŠ¶æ€çš„QoSè¯„åˆ†ï¼Œè€Œä¸æ˜¯é•¿æœŸçš„QoSã€‚ä¸ºäº†è§£å†³è¿™äº›é—®é¢˜ï¼Œæˆ‘ä»¬ä¸æ˜¯éšæœºé€‰æ‹©è¦æ¨¡æ‹Ÿçš„åŠ¨ä½œï¼Œè€Œæ˜¯åœ¨è’™ç‰¹å¡æ´›å­¦ä¹ æ¡†æ¶å†…è®­ç»ƒä¸€ä¸ªæ·±åº¦ä»£ç†æ¨¡å‹æ¥è¿‘ä¼¼é•¿æœŸQoSåˆ†æ•°ã€‚\nä¸ºäº†å‘ç°æ½œåœ¨çš„æ›´å¥½çš„è¡ŒåŠ¨ï¼Œæˆ‘ä»¬ä¸æ–­æ¢ç´¢çŠ¶æ€-è¡ŒåŠ¨æœç´¢ç©ºé—´ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªçŸ­æœŸä¼˜åŒ–æ–¹æ¡ˆçš„åŠ¨ä½œè¾“å‡ºã€‚\n\n### ç›¸å…³å·¥ä½œä»‹ç»\n\nå¯å‘å¼ç®—æ³•ï¼Œä¸€äº›ç»å…¸ä½œå“ä½¿ç”¨å¯å‘å¼ç®—æ³•æ¥ä¼˜åŒ–å·¥ä½œæµè°ƒåº¦å†³ç­–\nç›®çš„ï¼šä¼˜åŒ–ç›®æ ‡ï¼Œä¾‹å¦‚å¹³å‡å“åº”æ—¶é—´ã€èƒ½æºæ¶ˆè€—ã€æ‰§è¡Œæˆæœ¬ã€èµ„æºåˆ©ç”¨ç‡æˆ– SLA è¿åç‡\n\n# MCDS: AI Augmented Workflow Scheduling in Mobile Edge Cloud Computing Systems\n\n## æ‘˜è¦\n\nç ”ç©¶ï¼šå·¥ä½œæµè°ƒåº¦\tç›®çš„ï¼šæœ‰æ•ˆåˆ©ç”¨è®¡ç®—èµ„æºæ»¡è¶³ç”¨æˆ·çš„ä¸šåŠ¡éœ€æ±‚\nä¼ ç»Ÿè°ƒåº¦æ–¹æ³•ï¼šåˆ©ç”¨è¾¹ç¼˜è®¡ç®—å¹³å°çš„ä½å“åº”æ—¶é—´æ¥ä¼˜åŒ–åº”ç”¨æœåŠ¡è´¨é‡ï¼ˆQoSï¼‰\né¢ä¸´é—®é¢˜ï¼šè®¡ç®—çš„å¼‚æ„æ€§ã€ç§»åŠ¨è®¾å¤‡ä¸æ–­å˜åŒ–çš„å»¶è¿Ÿå’Œå·¥ä½œè´Ÿè½½èµ„æºéœ€æ±‚çš„ä¸ç¨³å®šæ€§ï¼Œåœ¨ç§»åŠ¨è¾¹ç¼˜äº‘ç³»ç»Ÿä¸­è°ƒåº¦å·¥ä½œæµåº”ç”¨ç¨‹åºå…·æœ‰æŒ‘æˆ˜æ€§ã€‚\nè§£å†³æ–¹æ¡ˆï¼šå¼€å‘ä¸€ç§é«˜æ•ˆå»ºæ¨¡QoSç›®æ ‡çš„æœ‰è¿œè§çš„ä¼˜åŒ–æ–¹æ¡ˆ\nMCDSï¼šä¸€ç§åŸºäºäººå·¥æ™ºèƒ½çš„è°ƒåº¦ç®—æ³•ï¼ŒåŸºäºæ ‘çš„æœç´¢ç­–ç•¥å’ŒåŸºäºæ·±åº¦ç¥ç»ç½‘ç»œçš„ä»£ç†æ¨¡å‹æ¥ä¼°è®¡å³æ—¶æ“ä½œå¯¹QoSçš„é•¿æœŸå½±å“ï¼Œä»¥å®ç°è°ƒåº¦å†³ç­–çš„å¥å£®ä¼˜åŒ–\nç»“æœï¼šåœ¨ç‰©ç†å’Œæ¨¡æ‹Ÿè¾¹ç¼˜äº‘æµ‹è¯•å¹³å°ä¸Šçš„å®éªŒè¡¨æ˜ï¼ŒMCDSåœ¨èƒ½è€—ï¼Œå“åº”æ—¶é—´ï¼ŒSLA violationså’Œæˆæœ¬æ–¹é¢åˆ†åˆ«æé«˜äº†6.13%ï¼Œ4.56%ï¼Œ45.09%å’Œ30.71%\n\n## ä»‹ç»\n\nè¾¹ç¼˜äº‘è®¡ç®—ï¼Œä¹Ÿç§°ä¸ºé›¾è®¡ç®—ï¼Œæ˜¯äº‘å’Œè¾¹ç¼˜è®¾å¤‡çš„åˆå¹¶ï¼Œæ—¨åœ¨é€šè¿‡åˆ©ç”¨ç½‘ç»œè¾¹ç¼˜çš„èŠ‚ç‚¹ï¼Œåªåœ¨äº‘ä¸­æ‰§è¡Œè®¡ç®—å¯†é›†å‹å¤„ç†ï¼Œä¸ºç”¨æˆ·å¸¦æ¥ä½å»¶è¿ŸæœåŠ¡ã€‚ç°ä»£è®¡ç®—æä¾›äº†ä¸€ç³»åˆ—æ–°çš„è®¡ç®—å¼‚æ„å·¥ä½œæµï¼ŒåŒ…æ‹¬åœ¨è¾¹ç¼˜æ”¶é›†æ•°æ®å’Œåœ¨äº‘åç«¯å¤„ç†æ•°æ®ã€‚è¿™ç±»å·¥ä½œæµæœ€è¿‘å·²è¢«åº”ç”¨äºè¾¹ç¼˜äº‘ç¯å¢ƒç­‰æ··åˆè®¡ç®—å¹³å°ï¼Œä»¥èŠ‚çœæˆæœ¬ã€‚å·¥ä½œæµè°ƒåº¦é—®é¢˜æ—¨åœ¨æœ‰æ•ˆåœ°å°†ä»»åŠ¡æ˜ å°„åˆ°å¯ç”¨èµ„æºä¸Šï¼Œä»¥ä¼˜åŒ–æœåŠ¡è´¨é‡(QoS)æŒ‡æ ‡ã€‚\n\næŒ‘æˆ˜ï¼šå·¥ä½œæµé¢ä¸´çš„æŒ‘æˆ˜æ˜¯å¤„ç†å¼‚æ„å’Œéå¹³ç¨³çš„ç”¨æˆ·éœ€æ±‚ï¼Œç”±äºè¾¹ç¼˜èŠ‚ç‚¹å’Œäº‘èŠ‚ç‚¹å…·æœ‰ä¸åŒçš„è®¡ç®—èƒ½åŠ›ï¼Œç½‘ç»œå¸¦å®½å’Œå»¶è¿Ÿï¼Œå·¥ä½œæµè°ƒåº¦ç¨‹åºéœ€è¦æ„è¯†åˆ°èµ„æºçš„å¼‚è´¨æ€§ï¼Œä»¥ä¾¿åšå‡ºæœ€ä¼˜å†³ç­–ã€‚è¶…ä½æ—¶å»¶ï¼Œç”µæ± èƒ½è€—ï¼ŒDAGä¾èµ–ä¸ä¸€è‡´ã€‚\n\n### ä»»åŠ¡æ³¢åŠ¨æ€§å’Œä¸»æœºç§»åŠ¨æ€§\n\nä»»åŠ¡æ³¢åŠ¨æ€§:ä¸æ–­å˜åŒ–çš„èµ„æºéœ€æ±‚å’ŒæœåŠ¡éœ€æ±‚\nä¸»æœºç§»åŠ¨æ€§ï¼šä¸»æœºç§»åŠ¨å¯¼è‡´éå¹³ç¨³å»¶è¿Ÿï¼Œç§»åŠ¨è®¡ç®—è®¾å¤‡å¢åŠ ï¼Œç½‘ç»œç‰¹å¾å¦‚å»¶è¿Ÿå’Œå¸¦å®½å˜çš„ä¸ç¨³å®šã€‚è§£å†³:å®æ—¶ç›‘æ§å’Œæ›´æ–°è°ƒåº¦ç­–ç•¥ã€‚\nå‚è€ƒæ–‡çŒ®ï¼Œé‡æ–°è°ƒåº¦\n\n> J. Yu, R. Buyya, and C. K. Tham, â€œCost-based scheduling of scientific workflow applications on utility grids,â€ in Proc. 1st Int. Conf.\n> e-Sci. Grid Comput., 2005, pp. 8â€“147.\n\nä¸ºäº†é¿å…è¿‡å¤šçš„å¼€é”€ï¼Œè¿™ç±»æ–¹æ³•çš„å®¢è§‚ä¼°è®¡éœ€è¦éå¸¸å‡†ç¡®\n\n### ç ”ç©¶ç°çŠ¶\n\nè¿›åŒ–æ–¹æ¡ˆ\nå¼ºåŒ–å­¦ä¹ \nå¯å‘å¼ç®—æ³•\nå…ƒå¯å‘å¼ç®—æ³•\n\n### æ–°è§è§£\n\nè¿‡å»ä½¿ç”¨ç¥ç»ç½‘ç»œé€¼è¿‘ä¼˜åŒ–ç›®æ ‡ï¼Œå……å½“QoSè¿‘ä¼¼å€¼ï¼Œç”±äºè°ƒåº¦å†³ç­–éœ€è¦åœ¨æ¥è¿‘å®æ—¶çš„æƒ…å†µä¸‹è¿›è¡Œï¼Œå…ˆå‰çš„å·¥ä½œæ²¡æœ‰ä½¿ç”¨è¿™ç§å‰ç»æ€§æ–¹æ¡ˆï¼Œå› æ­¤æ‰§è¡Œçš„æ˜¯çŸ­è§†ä¼˜åŒ–ã€‚\nç»“åˆè’™ç‰¹å¡ç½—å­¦ä¹ å’Œæ·±åº¦ä»£ç†æ¨¡å‹æ¥è¿›è¡ŒQoSæœ€ä¼˜å·¥ä½œæµè°ƒåº¦æ˜¯éå¸¸é‡è¦çš„ã€‚è¿™æ˜¯å› ä¸ºæ™®é€šçš„è’™ç‰¹å¡æ´›å­¦ä¹ éœ€è¦åœ¨éšæœºè°ƒåº¦æ“ä½œä¸‹æ‰§è¡Œå¤šä¸ªå¤šæ­¥éª¤æ¨¡æ‹Ÿè¿è¡Œï¼Œè®¡ç®—æˆæœ¬å¾ˆé«˜ã€‚æ­¤å¤–ï¼Œä¼ ç»Ÿçš„åŸºäºå†å²æ•°æ®è®­ç»ƒçš„æ·±åº¦ä»£ç†æ¨¡å‹åªæä¾›æ‰§è¡ŒåŠ¨ä½œåçŸ­æœŸçš„ç³»ç»ŸçŠ¶æ€çš„QoSè¯„åˆ†ï¼Œè€Œä¸æ˜¯é•¿æœŸçš„QoSã€‚ä¸ºäº†è§£å†³è¿™äº›é—®é¢˜ï¼Œæˆ‘ä»¬ä¸æ˜¯éšæœºé€‰æ‹©è¦æ¨¡æ‹Ÿçš„åŠ¨ä½œï¼Œè€Œæ˜¯åœ¨è’™ç‰¹å¡æ´›å­¦ä¹ æ¡†æ¶å†…è®­ç»ƒä¸€ä¸ªæ·±åº¦ä»£ç†æ¨¡å‹æ¥è¿‘ä¼¼é•¿æœŸQoSåˆ†æ•°ã€‚\nä¸ºäº†å‘ç°æ½œåœ¨çš„æ›´å¥½çš„è¡ŒåŠ¨ï¼Œæˆ‘ä»¬ä¸æ–­æ¢ç´¢çŠ¶æ€-è¡ŒåŠ¨æœç´¢ç©ºé—´ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªçŸ­æœŸä¼˜åŒ–æ–¹æ¡ˆçš„åŠ¨ä½œè¾“å‡ºã€‚\n\n### ç›¸å…³å·¥ä½œä»‹ç»\n\nå¯å‘å¼ç®—æ³•ï¼Œä¸€äº›ç»å…¸ä½œå“ä½¿ç”¨å¯å‘å¼ç®—æ³•æ¥ä¼˜åŒ–å·¥ä½œæµè°ƒåº¦å†³ç­–\nç›®çš„ï¼šä¼˜åŒ–ç›®æ ‡ï¼Œä¾‹å¦‚å¹³å‡å“åº”æ—¶é—´ã€èƒ½æºæ¶ˆè€—ã€æ‰§è¡Œæˆæœ¬ã€èµ„æºåˆ©ç”¨ç‡æˆ– SLA è¿åç‡\n\n","slug":"è¾¹ç¼˜è®¡ç®—","published":1,"updated":"2022-09-29T15:28:35.401Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clas9ert20018dk8f1nro9v3z","content":"<div class=\"hbe hbe-container\" id=\"hexo-blog-encrypt\" data-wpm=\"æŠ±æ­‰ï¼Œè¿™ä¸ªå¯†ç çœ‹ç€ä¸å¤ªå¯¹ï¼Œè¯·å†è¯•è¯•ã€‚\" data-whm=\"æŠ±æ­‰ï¼Œè¿™ä¸ªæ–‡ç« ä¸èƒ½è¢«çº æ­£ï¼Œä¸è¿‡æ‚¨è¿˜æ˜¯èƒ½çœ‹çœ‹è§£å¯†åçš„å†…å®¹ã€‚\">\n  <script id=\"hbeData\" type=\"hbeData\" data-hmacdigest=\"e7dba1a73c0f45cbf1140db8890dcf51630bc9656b4a585f94c46879c8c96e9b\">10d79030e8222445804370796b90fca1b3149e2c2a0f36d6b4ea04e548758c211a438e8f9aa5c0b62ee20b37362709c14c71cc86f773a486a43b3198c062bbaf6b00f2b05e86710a8f129e45f6f55bd83a11f59a3d34d1c800a7f0e2553406b154bc8f04b9bf445a851d923e14d7caa031854d534a387c033fde8eafa18f1faa3107e3eaa98b927bb4cd12390d84dcce00858e5a8cfd0b7c49466dbf3ff9f205de15b9abce25646e2fc28bc0b9a022299977574f76346ab8eb50f79565a5f600b5a827efef038bb6f81c02a74da21137e00a0d26ba0cdd2abd9e88daefbcfaefff9937de8e200795bcf3d9c382cdfdde09b05f798f48d0f207522c75799b30c984b77a5ce363105af571fe0a1abf57c83cb7eb874cb3731702c6dfac0a4ab3f06fe68fc58cc236e10d57543db75d52cee48a4c7b9b9b176d70f52cb1e316cb5e7e85d301c36a24ab2bb2fa24399452e41cc4f6b002bc259abc7705ab0e0157a30be5755d4d336820b6a4901c4c3ca6b38dbcc5798ee6accb9f8c01da83bd4a93a53ac55f0a024dd5d135816154966354bde909533760b1fc27f8146ed2babaf1f6187a84257eff93f43faa5624c6cdbcd6c50bbf7ac263db060cd32fbaaf15eea3b20c774d663a56df195e212ddd70160acc86179e674398a8e606c048de29e94aa4fcfcff9b4331e3751dd954e41dfe7ff0bee593b3819151c245fe0e6114af4912e1a90e5ce2a6d2f627e76a03276e30c7b02ffe855082e2a54965ce8aead96749fc13bec91f49915d5e9d39893b58fe0845466192da3ff10d252c32018526586f058b18c55df70b88bae69a2b10229819bd50a49a698c52b571dcbb0d757e08046a4046c8000a20908a1f4214482331843768c4a2b70fef139c85c0fa89590e77843280b0b2c15fe64a7f6fe8e1a5f4be05102e3dc2624161489282b56854d85b4aa7d114be5ea17e81971a92ea5aaba8fdb3bbc71e41616f0e254e42435a37ada91d92beb9c9ba8aff1755ca3cd31f053894df9d0293eda0a79474a2e3963aae4e1104ee358533336fc0dcb62c598c9b566088fc58d2d99559592deff716baf076de3e060f8052d1826cbbe4a6cf2252a535f2a099458b8854137b09cdf63867177407b7d024b91b5e3c65c32ec4bbe75d2536b779545ff457d2d922505248bcb70a2095de1cedbaa232ca09e1fe80cedd625248c07db208b6ce13930807d029aed98655c6c82efec947b08ce753e21e79436ea0c25740fb5f3f5d3c137d8912f19c579b9fd12a0519dc94a59f7ccdaf53c8d0979de56fe3d16d6a3ceecee7b2d582eea96ea3a8d164084555c6478c251dad7b673df9f3a7ac25e929f6adbfdea5420831e81e60b0a8b6bd5aef404572eb2bdd2e41f5a4c163c2378db1b79b1f487e073ae719f0352b32a2b9cd72ccf8a6aed537654f0500e373523763f23a59c833f7be594bba9cdf799712c1fae108a51b65a5adafb459527cc34d89a8ec3c47dec0e4272905827cf833437f2da60e093acecb97a94967d742344fcd414729f399fc3aefb6c4593617b1fe0fe5c9bfd75f6a063b57df94825fbe49310574a84356872cd3249e8424c458b6b289ddd6ca95173981c7105dabf4808b48e1112e76cda94039d830148f21e842cf79e556b7537d3ecc511fbb8fcbbd4cbaa07060da984ab8197537be6c8c0f0dec372039992f173491fe0294bdaf0f9942557f09add0c6654f12f3ed696b99ce4b2e95c0fb4d7d91c01d838a63fae53634a941b6b15a62becd578a8be42317065bf1bdb467861d6509d833eaebae597dd4b453e2b73384d41c55dd2aef0d28cb899ac5947e791f95a33b301a298aac3b72a5d78ac1e03dd445a2a6cd2faf34a861ec342516cd9d256c5c0aefe8d6158234419fae507225d65cc35fb1c2ea1a89aefca5c08ec580397b11c6212fa34689d979cab111687f9c1d0f6cf850faf84358226d34492833f7736c3b39663062693aa2db916f978f7ac826666d60507eb5826124f34f8ca06b3457c37a08412bd667f585bb5702251ec7518aaa9e454a6413396c9991114480fa9b7f2cf7ce0530f77ca9c1480452e1e44d9be5f02f9a28e1b6f0aa93a0b931b899596bfeca9a9188f77858b8ab92bf59402e085dfeb23b0340ea66a501b878e7b40bd6b97c09dffec1a8b006cf3941583bd07a73a89e8924534bd2452afab13590758b8710af3903b71d5982d9342bd8c688ad4e9b2354f0b1318adc4b37282f4312961d3fb698bc7a2ddef912f65b46b52534de059ec98746d53cba34510e99add99000aec9d9df7926e1e64365491c7a324f25ac2ebb31de1253dda2585e18cd6369c2a1ea6a90abe617cf247d6a17d9253af0a3e96db296f409d8286b06a884c3b4f258ddd30cff7adc28d8bda1b46e88498e4703a5fefec6c9c29379189db626fa40080b6411b219d0f37de640f2fcfa64889d44cf8906ee7d6db74437002a514c15b63a4c02a005e5432228b1bc58e3f38a50a5e49b8ef141184948e8530bd6569cbf830e29b155e6ee5d2210047cdf1e4a9bbf583e530353b0842f8cfb5696fa77de2aa9e1a720bd2bd16cddf3dc8d978eb2d5379781bd72809c0f374fad3b78aedc50713f9fabd237a4b16455f63e47d76becf5ed9886c3b9fa2855713650c9bb174f90473488ad609a806b6c0223235e8c6de4ca11416bc877088d51d9149a1fb2e47470641328a310d66666a3b3ed2be7aa7ae6029c6191d7529517b4255e47f901b0fa242a822dca7a802795ba71ff89121436dc3cd60b28bb9798d233c7d96209ee1013f3239e99df6e09671a530257a4d6029106fdea606deed09a4a74679fdda30788230bc3a4ffaaefe05ba9ccd8f335c10f003071a8f3d27d650ce8ce6091bb2703ebc7fcc7370ae1a24dce4321c5bca2dec52dfa84511b147218e7a786be643226a80efa339a96ed1ce421f5dcf6a57ea766b00fbf43408d928a5786eaf5f5be84ac3e53a68d994e511ed759f8d502c2925ff9e299bdedfab96a04a1aac76896bc1b0406d4336a9d4ffd08b1786ed64d3dc0eeb20d93bbfe6d8b2cffa5811be8a79db9bc7bf449edc322997142885a2cc23b3c10f6ed0d03edea3e4685bd86794a00bd80411303b7eccc2882a4d0126d6cc96fdaec392ca12166ebd36fbaf9809767ef952b820b8c9ea1185ab77f9f975162c5acc7b7d85547ac272ff815a4dcb65abff83049e7192914607d219fa25f28573703e73c9d7a5db2681cf7db16b87d3885c3a0fb6f2063877dae2217b096853d6862ce5176f003b8f56e84f4380c3144fa01ef65ad03128ce957e37f31843705a6a58f882fe756df4337c11abc71a0a60ffd8eae10b1f7f7085ce107bf58a02a254b61e0af9a7ecee4e33720a5604f1bf87f4f29a6a8ab74b49466d1e60e855734a86c23050986b0553c755cb6b21f8a89c40f3eafe295cc85438b6c8c48905afa0cb43ae915a981352204f99e9cdc1a25c33e3eb834cb39a9578bf98dca975a06739efa528f61ce56fece9c96bc97b065e4e9de96ea414c580c5bfba11832f5613da3276671187409741430d298f01d500456f86017507950d912837fbdc08b03ac7c1c2ebf5f63b0da8978a540ecb094179d3ff35994212f7230af05055e41fa32b905f34c2c4c571ad33f9ad7500e3acb4e489d4df4cf5d26737511954ba8e6a0f68fbde850a86a4597f45ae1179f3ea59d4fe24ba1937206bd21550909637b22975b3b2fe5aefdcaf76b15b0036f08b5b3d9b82e59672a03263e1e86fcb156e9a9238260c05ed5759f58fec01e998e804f35fce4d49592cb698db96de38fb975dd6f86317df14231d1b3c2f74775648ae6d91aa7b8b47e8c260000ee30a2db2b62d301562ff7fb9e04097c572f59501cbd4a45c05f7a1cc51ebe6ae4e63d08710026065a5d606740b0102d3c61437a56e644ae1950eb3c7fe0317df7f25ad7548a77d9caf5771634c05e1f8fd899bed6f4aaeca61e9dafb26785ec037591153b436280bb9e8d6b5dc880aff6c2cedb96dc4ecf21047a1116e71896b325aab5888bd5445cd67ef4c167e8a5d2bcf0935ec4c66da741dce27f936191e3e84d86f95395c1bacff323777717d84638483e8e7cf926e80f6b62d1e74840af2dea806b20485b60b4607a801741ff17f5db173d86419becf114c99b4f77d244673f2bad8be1f1efd51cfa52fd4266d46f635696ccc4c11a8089eb7d94beffd70b67f369fe23062365324f2598bd334937484d2243472cb120edb96cc8f688c5da622d9a8aa31884dd83e197917f36ba096fc6fefb7fce7c3e05fd85e315557bd80f4108c4cd8bd3888214961d061a0a24657cbf67be2e2e8b1675c0bcfb5e44ab205fbc297022b521c537e1dbb4fa7b29a7b5cf6133cd2f86c5ea31673cff013940f065f4788351826adbc4f7482bac51790902c92ce1a79c70f8f3e6d8496f46978d480777d8f5fd5bd29634c34940794dd0c822f7956655e337afa2ce6bdf3cec1a8a60e9da77adaa4fcb58eaa2fdb8a8a8aca01b8b5183e80613e52c6981821d47e9b078f4938e3bec9a6af459b0ee3c5d0e7b071cd29996e01399a5e8872c2eef3978ce76ba343e2a32082b2152b117bb706ceb4bc9270c95a17546880970db3914d8a77aba3be073fc72059256989d04ae5dee21313d5d9b8389302d78f2b3b93bed5707b923998cf6e147917545903c13576095bbe535fd0fc8d02e031d764c74753ed5b7f101c70d7f69702d31e8017183f2ac5c8cfe65a1414a23efad3742de8ff3fe8a426bef230f72ddb270cd88bdaaea215215460ce2a299b24ee1e4126d5b521f408176f4a36b4bfd9defef5f55b04ba2ec14f3fd9e0cb2f05bcac7e8d39a8f61f02f9115608cf2025864b633dfc4c60efc273daae52c4a384ea498a8b68f7d651ca2df4ee7b80ef76b54ac0450af7d5b7bb056d0c944dd86c826f6a6ef7072b3cacdebe8a08ea1cdc87cf5e3be5f06995a74917f7827732b831d053c634cd9f5107a05a4f5f98a19006d16755b8e68417d2afeb84322f9524c4ae10db390cd1b959586d073acd555a47f9048cecbb31528149cad10704bc4eda6c4f2747278abfe4b695bb1b819a96997dc96e6ac14dfcf2fd8044cfb5db3689a2e2966975dccbf5c9a8d7be3790e0968e034d03302ee95ab19ef5fd88bcccd2c8039cbb0dfeab3dd351f2a653f66361d89308c6990ea4049207b60900361bf9c85ed9f879c7701a30ceb241eefdbf35235edce57b83fbb9b02d42edce245a15c671513cea27a924f03c44c832f429dbf0921e2f5ced59e2f3fe0d339be18293b905c873bb424e66d9047cb4ae1709f0884336aa4b3bfe388d3e623b6302175d1db9306364819c050326481ee46b3305beba62cc051595fb7c95afac712d9e89237fb88c9abfd29988c64d24c564b988d8a0aff68b5924c4f3af323b0ee4fd01860ebac4f7d76b15deb892c14e7bbe809b63400f18d6ef2989dc360112a0adb7f47540fd1b67ef03c95e80e65bd09ebce0a602526d03caf2d0e77fb59c81aec783ae0a4d09f9190fe1cce491e608b84f36b29b814171d7ae1ab48ba757ebbdb28adb2e9162ff4f4dedc27dd8fb507c014e460eeff2e1b860fa92949cc369b33fcc3dae367313a612b1ff574e02cee771daf26715a92cdbd6899b8f8f3babd15f8cda0e366152bfc05a6da6eafc44180612d5f2df02beae4e1f07e1ec7cfb0dbfe6676e4e739ea07eac39ecd32877edb222bc31ea11f1e4645caa4612cbcac5583c8603f252602af01ced15378e4fb88d35ee15d88b0e07632acf6cc07427f9da5b02f17a983ac9f104a0fad040c16b1a3e912bae805b8362ae5c934efd6f13f2dcd60fdebb35fac5ca5c57c88ec2ee28b1c9f8b6c8ba4a2b67cc1b366f8855708582e4d0a935958c83f07f4a29ab307da3809128dd70a73817e28a39ee1b3285e0e29652327a71bc06402fec751310b9e599511243b75db1066a22f9b90d6603ceea4fc1d9b0057e5da77f0d45f024bf0cc6284c20a5c051591e4e75bafbe2ae53ea031d3492f7f9a0384af260e33c13559db6e9dda45670adf0980ae614d867425374c8cd49bf8fe8a334764ff8f276349dce49edfc1e800cdf3055cab2647db64967fef509aa8fefbcd18df5105ed1647337bf93a2fa96315c38009788d33664fbf4437e98ce89ab7711344787f4040fc10204ba92d32328b7043235d997ecf73a804deb7bd85d7d46d2504da6266b51f4a9597e3f74426be05ae15480258c37a7159e4a7ad161f2512f2aa3259bdd23d92db3f9bbdea723e45a4bc0f606cad070d4dac1a169886186830ba4d84c901c0c62990f1157202d3bd99322e22a5e80b08f89f027106a1b912d0e660930346de0f5a7e1b80dcdeb3acd32932d7906ddd543c21c4cd9f5c3ae08fef4db11957b41624f57546550f503846c7716e4a84b3fab08e57038c74cdc0ec11c7ff1d3ddde6f717f4f091b78d86b8a47ff6203dddfe04aa46c8e346e9674dbf7f707865b9ce5f7cc96f053d522425f568667887545559184b9a07187ad0cfcb000d42c2b6425142f89d5c330514d2cc433069b790d0a325926e8b9688e2fea1353a96092d30c34720031abf15d81aae3dd712429981d25f4685eacbf35cd3d8154cda92621ff80d9d76e43bf36210361a7ed583f722039421bd15c6a769a0f045be075d49a47e54c0d1996bf898cf076e41b614cae2dbef941c9a9103318f0b7fe6e1549487862cb803f0edb237b3dd4540e1448bff3eaededf74157423c8caca7ee6e41d123b614f745e0496087c0119cab5c2d8b2d10f29555c3be86ec5ab3b00b4af3fbf73d892d85bbe9fc92cccb9ab573476274696c47829b90720ec2ad0ace1d6c3bae4bef4cb332373a72625911aff0ecbaef4bf6626efa335e8184409ed32d68329e01964f8f44ff30a43a3311086af5f1b69755ee5d396d32cbd69b7443fb0520ddf39fa769d31bec98730510b62ea290fe5ecfa440833a8a315f88f7c5c645eb7bbe288d2ebbc1795f4e0ad311c7335168e48b18b83851ceb457417e08d9e40cac265802acbdad68125e48be29cc197905f94c49b6b092409b715278e65f3e77fe7ce41de7ae086a3638ef12d9c11b9ec8aba8faeee4ec624a40d222c2b9827e16c0d57c7cc8d863a5c6a0f23d5ec8f1f06e37d5c14f764e491fa3d11f57940515e53e2a05c7f6ee8daa87b4e1086048e282bcb76e082e9d80c96a3593f671c352ed0e5d581327985cc72d1aad16f2d7979062b85cf98954ec1eb7ebe573df1595260e2370954621cb9ca87a29a21566e95306e888815d6aaa3b74145d343b140dceed318f835457180fb8154c0c16cfa497ed24aad97ff2c46e9958f6b219dc911e056f9f1bc32b31da9403f632751fc5567b179ca3e43deb538181f83f70ca2b1faccc67facbb8398acc453d06bf72647fb2d9c0beccc530ff8610567adf6367f86f45e5350c9989d03d48a463859dad1b9090dfde6b074f0f1a66780fc9dd40094a872306dbefce6a5d7b3ae2cab5cd3f273ff83dee515f693b62ca057750ff10847413aff57bc262c8c2c3beac39d2ffcb7981a4a17c63b66f1f07ebe87f294536f0c4cd20debfacbbc67a201fde32ce645386fc5b42dc93166910a3847505ac84b7c8197ebbe88efc1afd88fdf18c0a1d4db748d63d34b02bf38eb7b366c5409250e08aeefa77298bbcd99da204e8c46ac3789288a92b75c5bbf25d332de4308bf8f32ccb0cae777348a5c7c8c4e02e6f82d4f41cf2dde88de3593f9deb151c275c911732ec43f0d6787b2432aabaad9811de7d3880058b68e889746e95ad9454e36c4850268ec1f4212393715c23578332b052c5dacd40611b48c19cd949a61c3661c474f0749d7092a52f0714d0ed351de72844853685e0b1908f4eab7b4992c0ea4c74f8ed1a5f5a2e748f542dc2f269b75cc4cd9fe5df36c96a42f239f5ebe14d8132c91adc3f617e77d9fa83385cb47197027f83a5940f0bd3ff73f18f389a241c1ce10f915ec037e03ebbf03c5fa89d4224df7be37b188330508075b29a3cb6d6d464b04f91e8444d182c4217c9abff9f1e7c659e3715c26b3b550645b8fe10cd707054cfadac0fb70d619745942684fdf5f05ff561375831e7d65ea3bafbf1d6dae5d4b9fa21bab0d79c01d8e554eb433a608df417d546a1b9508d766665842546e694d34ec89263af7a5284c17c1a7d889c82a0c5dd1f761140bcb0c05a56eff7a737ef3f309c9467e828381058589976468a4a2fa390bbd2bee1fa1248651a416320b29039d59c8da950945f8c13f88c1e388623f446a040c4972c847fd1782109de936886edf7cf052615a28b77c4dd39aee7f77aa6b91b8d64cf6e152f5afa19a61345db87d4f0c155248bf43ca9c2a61a90c46c3da82279c72d659bd801eaaab76cd17dbe8848a1ea0b26025aac281ba9e3c93e5c055a37993c7755b75594a66a27481c7e70cb1ab53248b4045f98d3bf8b0a3eb36e2be1544554fc656f164fb23790de339c9b24675933809096ffb7740d51b5bc18fa4ea70100418f044f8b8c0f5e9aac6f916ca5a42a413a6e1675581d3c48c70db01104e601ae488ff02e120ffe956e98c43d4ca1e7c6d89c7049b7de058ad7ab74d9f5d77b40ec6e5d922e9664ec4e3dba0d7d914a0c5f30953624ce22513f15b2014c551b25d7ba2448843ce7d49e236eff281d33e2a76ed8e2e986ea13ea15514732995a560ac96b54ed33cdb116d2d4ee66aab7c39bb7966f7df31c1d78c63d0257346f25a6713eeb8abd06b19a7959ce32becff603e1bafcf7dabbc7f429b70584969038ba2911d9814a0379d785e08db372eb6c868ffaf5be6044205f697b0367a4da617ed82083bcc5695e7378c9113e0f51a00510227969e5237421546e83cd0debc42b1891130390609c8abf24607ec769e1a15021eca2441831bf58f3d0d12298a563aa37f554fcfe91cac6786a2e105cc9b1fe4ae77172bade11b476572432348f3914d2d7e68e9700a57ee84e0ea8164cc574d3ebe6049b7579d6afcb082850495627e77778ab41d9b3c1ae660760ebe0f0a76d9c584fc1c2cfd10c3ee01dd4f0d966e39dc4f128926ae728750b0c60c64bf030d93271ad0a5fec04a71a8998db4727729a49ccf6c09e913671639bd449104e56866c4e526cf169f2ab0f3ae1012a20cc2d749515e0868fc2577513c9569e8b4804f75730925f5bb65e801e69060ee2051d5b24d7d48f1c8fa3aca2ea940ccd972c8c2211b8fc2417ec8084076d23758c6959c0a7a144e4cfaaadfd7bf5ded62fbfe3ab6a7bcf5da182fe874dee88f3ee0842d3d958b50cdf55d6a097c6e90fef7f772220d0288b40d49c7c50a4163473622dd190292aae525c4898a460eb88f701979825b962ad02f5384956e09420c456a57df22fe48f7ec4b9839a93ee64d0b01ff81820d3e8625ba18a9e76a566926961733aa29a952ebfd823a1b606b2022ab4cbde044687fc4a2d56c13932323330d8a10294c04ae74e5a2ea56527058be9ca21208a8db1e99f4738e4a214a769c28737e87bb1ceadcb4e7437e9292bce66d9711f4de85edbe3ef502c60635e030c9d547fa17b639063d8b32fdd9b49a02705ea11d2018e085557676326f026acef4148c1033d9ca126bfa88d06eea4f41836dc2ac60e254ee3c7776201a495d614289155677fc54583041dac80d600989c88fa33c2872c2b389540db5d31fe614ed98ab990ec5145f8a3846215e50ff2fe41eac165749ae9f69376785b94e8e368b1150464b0b284d4a85a6d441f6fc352e79d1252deb42cf54ff8aefcda78949692ec7442b102f0915fb9408e298a5c59f16a716b64f24734afad235bd7e206d4d1f32394628bc4405b51d753f36d1718cc1a572d3fbaf384c4df757462f5b3f3fbaab24c32adbafccb1bd1fc0bf172af368bf61ed35c6091ad8efc56df472f16f71d7c8c765cd299cee472e1072bf0bd5359df8f0b667ed0cb3ad873829075fe088f9a54062f509ee426e58498b505abacfa5eba1d7488e983655a7520d4b9ea99510ae771faf4d881d654938904298f644aee4a0deff852c326bbec3e313eb40dfae420b38f1963861c8aae2aa28749502935eed8e7342bf424c9e22e71cebaf672641f55f59ebcd2078ad978e197eb9b69c0a838b27433b183f50e156e06643ab46f0a7b29c25bdd1435c6a9082bdeda8f9b0c4cad10138da30042c906fb323c7b40e5775022e3691e407cc61c44fde3612f7400a7d4d59f9f7bf5b163b4ed85a1ecd3734568f600241aa570a763a0d1b6482b0b275142118585481ff14d30544508d12ff273679b0ffcebd64e057a53ac03b0b333053409565415c564f8f7661cdfcc960fdc78f71ba6b2ddf2277a8fdcde977bc9075cd75b987d663a63389b06691ea758fa72e217ccf6469f63e93666082dfc33f9b881619e6419c451fe51df67591679aa81db094ec96f7b26e75c8e3f5b1ea2e0ae312a4b13d170d60bcceb040297f3c6aa261e4e50bf810317e36bd1557dd8f3edf517e5064f101bc14adb94ce6ae8214a9bb3b7320323b7d45a393551cc589e8455727fb16c4a8ebcf00457d73731580481de0bc7ed5824ee5ddc26e1ac70d217b0f739df36bd12a9e8048bf163c6e199eb593a4f7d44a95c7075629e2915e4952cb0650d09bd5d9e621e7d5b6acb79c3edbe4ed217378be1ca689ac4909083a1d97ac58d8ca48c3bf61a0c885db116ca9b7f32dab53efb4dd5f8d191c4da33fb5b9e175fa20a0e6c6c7863323c65dbf9f2a51af51a0b4c04358951665d18d35caf7fde88b40e46aa01350689e9f354bfc1cf3a1a929ab964b396ee749e69852adaa32fca4d5e0a266a4e3eff0501de213a6377f14a5d262a929dbfab59fda8670a11059736a14257c4684ce48ef5170805708929c2ba7ebd0110268d7195099bb5efb459ff26ec68c31fdbad60e5cc0196b9e11f9992db95fbef86816e239b4c7e700b46e9ff1cbf6c816dea8d00047b87002490db8499337475ca675f91854ab4e78b9f63440dd104b8ebb3aef81043e3ddd137c00e96c57aada0d333c5603de2d67111d1df29aa61ea7fa4755c584b8692fa27d11b4dc229024299b9ef46e5849174378da395d6bae6c6e2876aa6f150a9960859c6fed043fade20c5bd91c83df1b1a702b8158bc604e5890625649f3ca1dfef5db188d49f0acfccf47aa0ea504e762dcbb5fa4519a32d736afd3e4b7d03b1512d3af68445c6e6bcdc79da3f3f826e72624956eafb17e81df2252518b5c6a9ea036e66c2f32d7b8190bc54b5f18b624eeaff4818255772422e1d50c8ed3552a976ab27cc1e158d92a29198c1c25e74926e5140210143ce4e9837e9d59fe697547d80a2baace39fa97dac9a6de184eb4f4fd1f42075e62126e666b3199c475e111fa6abbd1bd8965211c42cc8344a88a71145b306473e4f5379b3eabd1471256b6ee880ad6e0bb7849ddc4fbd4f79b1059f515a57a3e59b17af46fc66eb4e821fe4ea6f984f5206ac8eb5d369d9b46ff6d28bbf999d86d7517e6f611cd709a2fe53da893f4ed2422387dc7b2f36363ede4c3aba4af84f79b9d483572f6b38de3f9da90fead695fb3bd3943d9517f3e5e008217e01ee992acf5fc3b02106eef04072c2c805237f0157e80a5afc3abb2ad1cef40a28a67f7b51b36039e5aeafb5e358812137a92de95bb31b5b13e57d31a2247d5d5f8922543f7ec8b7cbdb99d790e972c50b42db8a248ca2bdd30aaefedcbada053522616ee9c825695d9d8fe145a91e7077d33aefd597bfccacf06d43768426726f8ce2051a3d2c52db077f86621bb56ed693d24407b0d9d471d2f0113b0e31fa2d023504ea41d072d4dced2ac72d4269afac9865886ff63119dea929f8e823a5381e158d7a42f7047698f43e6a8c7b9f034b76b8b89abb6ae914d050603631384f1dcbd3a66431aa7ab08c80c43042d0f237f7d502bc892a43e632ce0753bbd0b7ee20c5e5d48409df463f8c0c83737c5b7db687d4252f9357a9ed91a21e85318300cd3b29db092a954d9ba2bca1c6c96dc7297c5e986ae1275b2bf84dde6a3d93f5bb25b33d19cdfe7c9ed51ec758f389f97c8c7c51de7c3770065f5fb9da506e0c49257ac9b9b3c45f0cfb2121b575f34a1a54233f678d71dc1b3abb2dbdb9bdf1dcd0fcd523fbd683a440b3977b1eed2575700f7c43ac24dc339e6a6035da2bc2d16d00441cd6f80af162f3edf39f9deba5e809912a9cb0fd4a53691b1a51735f5edbc26c4778e3da49728934e531c24bf9c19e60360ac6383fb7bdb7bfeb26ddaccea683fb788d6e58d3be886373d589fba9ca5905a373b7d3c4743c5bad894ecaa1386205a87d7c2b678360b78a79062aa370c4969c640c5e8dcb8b09581f48201954c7ec7c2c4c7d62fe220fd6e779e64f509dd4e7fade64c59605d2725fa747ce8e428f2fadc026cf1e41640d574998513ba7c65fbf5999aa3f38c901533e92541f3ededd76e745648e40470519ef52e5c20628d6033a572ac7e69a656044ace937577faebd33d7a1b0a04f80e000da7fe7f7774d6edbcc708307c7afca665d963f86abee7d2322789687a918046d10e4e6898f827387afe1a8f94c562163d9c69baa7a7a738c737d5e9cfbef2c5656d134615e00705ae532616b7893026d081b683742e008c6e1c9a27fe7a3b96d77a3350aa2a8a52693e0f6505e22e34510cc7db32616f62105d26b95e1239e645812d01c78caf01693310b5f1b76f6f24f8e6a306c2</script>\n  <div class=\"hbe hbe-content\">\n    <div class=\"hbe hbe-input hbe-input-default\">\n      <input class=\"hbe hbe-input-field hbe-input-field-default\" type=\"password\" id=\"hbePass\">\n      <label class=\"hbe hbe-input-label hbe-input-label-default\" for=\"hbePass\">\n        <span class=\"hbe hbe-input-label-content hbe-input-label-content-default\">æ‚¨å¥½ï¼Œè¿™é‡Œéœ€è¦å¯†ç ã€‚</span>\n      </label>\n    </div>\n  </div>\n</div>\n<script data-pjax src=\"/lib/hbe.js\"></script><link href=\"/css/hbe.style.css\" rel=\"stylesheet\" type=\"text/css\">","site":{"data":{"links":[{"name":"CZMæœ‰ç‚¹å†·","link":"https://czm.cool/","description":"CZMçš„åšå®¢","avatar":"https://img.czm.cool/avatar/avatar.png"},{"name":"PSH","link":"https://shamd.cloud/","description":"PSHçš„åšå®¢.","avatar":"https://shamd.cloud/upload/2022/07/afbb577733f46c9535dd1d6d6388278.jpg"},{"name":"KAI","link":"https://kainote.top/","description":"love artist, love code.","avatar":"https://cdn.jsdelivr.net/gh/kaix2301/pictures/img202201072101018.jpg"}]}},"excerpt":"è¿™é‡Œæœ‰ä¸œè¥¿è¢«åŠ å¯†äº†ï¼Œéœ€è¦è¾“å…¥å¯†ç æŸ¥çœ‹å“¦ã€‚","more":"è¿™é‡Œæœ‰ä¸œè¥¿è¢«åŠ å¯†äº†ï¼Œéœ€è¦è¾“å…¥å¯†ç æŸ¥çœ‹å“¦ã€‚","origin":"<h1 id=\"MCDS-AI-Augmented-Workflow-Scheduling-in-Mobile-Edge-Cloud-Computing-Systems\"><a href=\"#MCDS-AI-Augmented-Workflow-Scheduling-in-Mobile-Edge-Cloud-Computing-Systems\" class=\"headerlink\" title=\"MCDS: AI Augmented Workflow Scheduling in Mobile Edge Cloud Computing Systems\"></a>MCDS: AI Augmented Workflow Scheduling in Mobile Edge Cloud Computing Systems</h1><h2 id=\"æ‘˜è¦\"><a href=\"#æ‘˜è¦\" class=\"headerlink\" title=\"æ‘˜è¦\"></a>æ‘˜è¦</h2><p>ç ”ç©¶ï¼šå·¥ä½œæµè°ƒåº¦\tç›®çš„ï¼šæœ‰æ•ˆåˆ©ç”¨è®¡ç®—èµ„æºæ»¡è¶³ç”¨æˆ·çš„ä¸šåŠ¡éœ€æ±‚<br>ä¼ ç»Ÿè°ƒåº¦æ–¹æ³•ï¼šåˆ©ç”¨è¾¹ç¼˜è®¡ç®—å¹³å°çš„ä½å“åº”æ—¶é—´æ¥ä¼˜åŒ–åº”ç”¨æœåŠ¡è´¨é‡ï¼ˆQoSï¼‰<br>é¢ä¸´é—®é¢˜ï¼šè®¡ç®—çš„å¼‚æ„æ€§ã€ç§»åŠ¨è®¾å¤‡ä¸æ–­å˜åŒ–çš„å»¶è¿Ÿå’Œå·¥ä½œè´Ÿè½½èµ„æºéœ€æ±‚çš„ä¸ç¨³å®šæ€§ï¼Œåœ¨ç§»åŠ¨è¾¹ç¼˜äº‘ç³»ç»Ÿä¸­è°ƒåº¦å·¥ä½œæµåº”ç”¨ç¨‹åºå…·æœ‰æŒ‘æˆ˜æ€§ã€‚<br>è§£å†³æ–¹æ¡ˆï¼šå¼€å‘ä¸€ç§é«˜æ•ˆå»ºæ¨¡QoSç›®æ ‡çš„æœ‰è¿œè§çš„ä¼˜åŒ–æ–¹æ¡ˆ<br>MCDSï¼šä¸€ç§åŸºäºäººå·¥æ™ºèƒ½çš„è°ƒåº¦ç®—æ³•ï¼ŒåŸºäºæ ‘çš„æœç´¢ç­–ç•¥å’ŒåŸºäºæ·±åº¦ç¥ç»ç½‘ç»œçš„ä»£ç†æ¨¡å‹æ¥ä¼°è®¡å³æ—¶æ“ä½œå¯¹QoSçš„é•¿æœŸå½±å“ï¼Œä»¥å®ç°è°ƒåº¦å†³ç­–çš„å¥å£®ä¼˜åŒ–<br>ç»“æœï¼šåœ¨ç‰©ç†å’Œæ¨¡æ‹Ÿè¾¹ç¼˜äº‘æµ‹è¯•å¹³å°ä¸Šçš„å®éªŒè¡¨æ˜ï¼ŒMCDSåœ¨èƒ½è€—ï¼Œå“åº”æ—¶é—´ï¼ŒSLA violationså’Œæˆæœ¬æ–¹é¢åˆ†åˆ«æé«˜äº†6.13%ï¼Œ4.56%ï¼Œ45.09%å’Œ30.71%</p>\n<h2 id=\"ä»‹ç»\"><a href=\"#ä»‹ç»\" class=\"headerlink\" title=\"ä»‹ç»\"></a>ä»‹ç»</h2><p>è¾¹ç¼˜äº‘è®¡ç®—ï¼Œä¹Ÿç§°ä¸ºé›¾è®¡ç®—ï¼Œæ˜¯äº‘å’Œè¾¹ç¼˜è®¾å¤‡çš„åˆå¹¶ï¼Œæ—¨åœ¨é€šè¿‡åˆ©ç”¨ç½‘ç»œè¾¹ç¼˜çš„èŠ‚ç‚¹ï¼Œåªåœ¨äº‘ä¸­æ‰§è¡Œè®¡ç®—å¯†é›†å‹å¤„ç†ï¼Œä¸ºç”¨æˆ·å¸¦æ¥ä½å»¶è¿ŸæœåŠ¡ã€‚ç°ä»£è®¡ç®—æä¾›äº†ä¸€ç³»åˆ—æ–°çš„è®¡ç®—å¼‚æ„å·¥ä½œæµï¼ŒåŒ…æ‹¬åœ¨è¾¹ç¼˜æ”¶é›†æ•°æ®å’Œåœ¨äº‘åç«¯å¤„ç†æ•°æ®ã€‚è¿™ç±»å·¥ä½œæµæœ€è¿‘å·²è¢«åº”ç”¨äºè¾¹ç¼˜äº‘ç¯å¢ƒç­‰æ··åˆè®¡ç®—å¹³å°ï¼Œä»¥èŠ‚çœæˆæœ¬ã€‚å·¥ä½œæµè°ƒåº¦é—®é¢˜æ—¨åœ¨æœ‰æ•ˆåœ°å°†ä»»åŠ¡æ˜ å°„åˆ°å¯ç”¨èµ„æºä¸Šï¼Œä»¥ä¼˜åŒ–æœåŠ¡è´¨é‡(QoS)æŒ‡æ ‡ã€‚</p>\n<p>æŒ‘æˆ˜ï¼šå·¥ä½œæµé¢ä¸´çš„æŒ‘æˆ˜æ˜¯å¤„ç†å¼‚æ„å’Œéå¹³ç¨³çš„ç”¨æˆ·éœ€æ±‚ï¼Œç”±äºè¾¹ç¼˜èŠ‚ç‚¹å’Œäº‘èŠ‚ç‚¹å…·æœ‰ä¸åŒçš„è®¡ç®—èƒ½åŠ›ï¼Œç½‘ç»œå¸¦å®½å’Œå»¶è¿Ÿï¼Œå·¥ä½œæµè°ƒåº¦ç¨‹åºéœ€è¦æ„è¯†åˆ°èµ„æºçš„å¼‚è´¨æ€§ï¼Œä»¥ä¾¿åšå‡ºæœ€ä¼˜å†³ç­–ã€‚è¶…ä½æ—¶å»¶ï¼Œç”µæ± èƒ½è€—ï¼ŒDAGä¾èµ–ä¸ä¸€è‡´ã€‚</p>\n<h3 id=\"ä»»åŠ¡æ³¢åŠ¨æ€§å’Œä¸»æœºç§»åŠ¨æ€§\"><a href=\"#ä»»åŠ¡æ³¢åŠ¨æ€§å’Œä¸»æœºç§»åŠ¨æ€§\" class=\"headerlink\" title=\"ä»»åŠ¡æ³¢åŠ¨æ€§å’Œä¸»æœºç§»åŠ¨æ€§\"></a>ä»»åŠ¡æ³¢åŠ¨æ€§å’Œä¸»æœºç§»åŠ¨æ€§</h3><p>ä»»åŠ¡æ³¢åŠ¨æ€§:ä¸æ–­å˜åŒ–çš„èµ„æºéœ€æ±‚å’ŒæœåŠ¡éœ€æ±‚<br>ä¸»æœºç§»åŠ¨æ€§ï¼šä¸»æœºç§»åŠ¨å¯¼è‡´éå¹³ç¨³å»¶è¿Ÿï¼Œç§»åŠ¨è®¡ç®—è®¾å¤‡å¢åŠ ï¼Œç½‘ç»œç‰¹å¾å¦‚å»¶è¿Ÿå’Œå¸¦å®½å˜çš„ä¸ç¨³å®šã€‚è§£å†³:å®æ—¶ç›‘æ§å’Œæ›´æ–°è°ƒåº¦ç­–ç•¥ã€‚<br>å‚è€ƒæ–‡çŒ®ï¼Œé‡æ–°è°ƒåº¦</p>\n<blockquote>\n<p>J. Yu, R. Buyya, and C. K. Tham, â€œCost-based scheduling of scientific workflow applications on utility grids,â€ in Proc. 1st Int. Conf.<br>e-Sci. Grid Comput., 2005, pp. 8â€“147.</p>\n</blockquote>\n<p>ä¸ºäº†é¿å…è¿‡å¤šçš„å¼€é”€ï¼Œè¿™ç±»æ–¹æ³•çš„å®¢è§‚ä¼°è®¡éœ€è¦éå¸¸å‡†ç¡®</p>\n<h3 id=\"ç ”ç©¶ç°çŠ¶\"><a href=\"#ç ”ç©¶ç°çŠ¶\" class=\"headerlink\" title=\"ç ”ç©¶ç°çŠ¶\"></a>ç ”ç©¶ç°çŠ¶</h3><p>è¿›åŒ–æ–¹æ¡ˆ<br>å¼ºåŒ–å­¦ä¹ <br>å¯å‘å¼ç®—æ³•<br>å…ƒå¯å‘å¼ç®—æ³•</p>\n<h3 id=\"æ–°è§è§£\"><a href=\"#æ–°è§è§£\" class=\"headerlink\" title=\"æ–°è§è§£\"></a>æ–°è§è§£</h3><p>è¿‡å»ä½¿ç”¨ç¥ç»ç½‘ç»œé€¼è¿‘ä¼˜åŒ–ç›®æ ‡ï¼Œå……å½“QoSè¿‘ä¼¼å€¼ï¼Œç”±äºè°ƒåº¦å†³ç­–éœ€è¦åœ¨æ¥è¿‘å®æ—¶çš„æƒ…å†µä¸‹è¿›è¡Œï¼Œå…ˆå‰çš„å·¥ä½œæ²¡æœ‰ä½¿ç”¨è¿™ç§å‰ç»æ€§æ–¹æ¡ˆï¼Œå› æ­¤æ‰§è¡Œçš„æ˜¯çŸ­è§†ä¼˜åŒ–ã€‚<br>ç»“åˆè’™ç‰¹å¡ç½—å­¦ä¹ å’Œæ·±åº¦ä»£ç†æ¨¡å‹æ¥è¿›è¡ŒQoSæœ€ä¼˜å·¥ä½œæµè°ƒåº¦æ˜¯éå¸¸é‡è¦çš„ã€‚è¿™æ˜¯å› ä¸ºæ™®é€šçš„è’™ç‰¹å¡æ´›å­¦ä¹ éœ€è¦åœ¨éšæœºè°ƒåº¦æ“ä½œä¸‹æ‰§è¡Œå¤šä¸ªå¤šæ­¥éª¤æ¨¡æ‹Ÿè¿è¡Œï¼Œè®¡ç®—æˆæœ¬å¾ˆé«˜ã€‚æ­¤å¤–ï¼Œä¼ ç»Ÿçš„åŸºäºå†å²æ•°æ®è®­ç»ƒçš„æ·±åº¦ä»£ç†æ¨¡å‹åªæä¾›æ‰§è¡ŒåŠ¨ä½œåçŸ­æœŸçš„ç³»ç»ŸçŠ¶æ€çš„QoSè¯„åˆ†ï¼Œè€Œä¸æ˜¯é•¿æœŸçš„QoSã€‚ä¸ºäº†è§£å†³è¿™äº›é—®é¢˜ï¼Œæˆ‘ä»¬ä¸æ˜¯éšæœºé€‰æ‹©è¦æ¨¡æ‹Ÿçš„åŠ¨ä½œï¼Œè€Œæ˜¯åœ¨è’™ç‰¹å¡æ´›å­¦ä¹ æ¡†æ¶å†…è®­ç»ƒä¸€ä¸ªæ·±åº¦ä»£ç†æ¨¡å‹æ¥è¿‘ä¼¼é•¿æœŸQoSåˆ†æ•°ã€‚<br>ä¸ºäº†å‘ç°æ½œåœ¨çš„æ›´å¥½çš„è¡ŒåŠ¨ï¼Œæˆ‘ä»¬ä¸æ–­æ¢ç´¢çŠ¶æ€-è¡ŒåŠ¨æœç´¢ç©ºé—´ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªçŸ­æœŸä¼˜åŒ–æ–¹æ¡ˆçš„åŠ¨ä½œè¾“å‡ºã€‚</p>\n<h3 id=\"ç›¸å…³å·¥ä½œä»‹ç»\"><a href=\"#ç›¸å…³å·¥ä½œä»‹ç»\" class=\"headerlink\" title=\"ç›¸å…³å·¥ä½œä»‹ç»\"></a>ç›¸å…³å·¥ä½œä»‹ç»</h3><p>å¯å‘å¼ç®—æ³•ï¼Œä¸€äº›ç»å…¸ä½œå“ä½¿ç”¨å¯å‘å¼ç®—æ³•æ¥ä¼˜åŒ–å·¥ä½œæµè°ƒåº¦å†³ç­–<br>ç›®çš„ï¼šä¼˜åŒ–ç›®æ ‡ï¼Œä¾‹å¦‚å¹³å‡å“åº”æ—¶é—´ã€èƒ½æºæ¶ˆè€—ã€æ‰§è¡Œæˆæœ¬ã€èµ„æºåˆ©ç”¨ç‡æˆ– SLA è¿åç‡</p>\n<h1 id=\"MCDS-AI-Augmented-Workflow-Scheduling-in-Mobile-Edge-Cloud-Computing-Systems-1\"><a href=\"#MCDS-AI-Augmented-Workflow-Scheduling-in-Mobile-Edge-Cloud-Computing-Systems-1\" class=\"headerlink\" title=\"MCDS: AI Augmented Workflow Scheduling in Mobile Edge Cloud Computing Systems\"></a>MCDS: AI Augmented Workflow Scheduling in Mobile Edge Cloud Computing Systems</h1><h2 id=\"æ‘˜è¦-1\"><a href=\"#æ‘˜è¦-1\" class=\"headerlink\" title=\"æ‘˜è¦\"></a>æ‘˜è¦</h2><p>ç ”ç©¶ï¼šå·¥ä½œæµè°ƒåº¦\tç›®çš„ï¼šæœ‰æ•ˆåˆ©ç”¨è®¡ç®—èµ„æºæ»¡è¶³ç”¨æˆ·çš„ä¸šåŠ¡éœ€æ±‚<br>ä¼ ç»Ÿè°ƒåº¦æ–¹æ³•ï¼šåˆ©ç”¨è¾¹ç¼˜è®¡ç®—å¹³å°çš„ä½å“åº”æ—¶é—´æ¥ä¼˜åŒ–åº”ç”¨æœåŠ¡è´¨é‡ï¼ˆQoSï¼‰<br>é¢ä¸´é—®é¢˜ï¼šè®¡ç®—çš„å¼‚æ„æ€§ã€ç§»åŠ¨è®¾å¤‡ä¸æ–­å˜åŒ–çš„å»¶è¿Ÿå’Œå·¥ä½œè´Ÿè½½èµ„æºéœ€æ±‚çš„ä¸ç¨³å®šæ€§ï¼Œåœ¨ç§»åŠ¨è¾¹ç¼˜äº‘ç³»ç»Ÿä¸­è°ƒåº¦å·¥ä½œæµåº”ç”¨ç¨‹åºå…·æœ‰æŒ‘æˆ˜æ€§ã€‚<br>è§£å†³æ–¹æ¡ˆï¼šå¼€å‘ä¸€ç§é«˜æ•ˆå»ºæ¨¡QoSç›®æ ‡çš„æœ‰è¿œè§çš„ä¼˜åŒ–æ–¹æ¡ˆ<br>MCDSï¼šä¸€ç§åŸºäºäººå·¥æ™ºèƒ½çš„è°ƒåº¦ç®—æ³•ï¼ŒåŸºäºæ ‘çš„æœç´¢ç­–ç•¥å’ŒåŸºäºæ·±åº¦ç¥ç»ç½‘ç»œçš„ä»£ç†æ¨¡å‹æ¥ä¼°è®¡å³æ—¶æ“ä½œå¯¹QoSçš„é•¿æœŸå½±å“ï¼Œä»¥å®ç°è°ƒåº¦å†³ç­–çš„å¥å£®ä¼˜åŒ–<br>ç»“æœï¼šåœ¨ç‰©ç†å’Œæ¨¡æ‹Ÿè¾¹ç¼˜äº‘æµ‹è¯•å¹³å°ä¸Šçš„å®éªŒè¡¨æ˜ï¼ŒMCDSåœ¨èƒ½è€—ï¼Œå“åº”æ—¶é—´ï¼ŒSLA violationså’Œæˆæœ¬æ–¹é¢åˆ†åˆ«æé«˜äº†6.13%ï¼Œ4.56%ï¼Œ45.09%å’Œ30.71%</p>\n<h2 id=\"ä»‹ç»-1\"><a href=\"#ä»‹ç»-1\" class=\"headerlink\" title=\"ä»‹ç»\"></a>ä»‹ç»</h2><p>è¾¹ç¼˜äº‘è®¡ç®—ï¼Œä¹Ÿç§°ä¸ºé›¾è®¡ç®—ï¼Œæ˜¯äº‘å’Œè¾¹ç¼˜è®¾å¤‡çš„åˆå¹¶ï¼Œæ—¨åœ¨é€šè¿‡åˆ©ç”¨ç½‘ç»œè¾¹ç¼˜çš„èŠ‚ç‚¹ï¼Œåªåœ¨äº‘ä¸­æ‰§è¡Œè®¡ç®—å¯†é›†å‹å¤„ç†ï¼Œä¸ºç”¨æˆ·å¸¦æ¥ä½å»¶è¿ŸæœåŠ¡ã€‚ç°ä»£è®¡ç®—æä¾›äº†ä¸€ç³»åˆ—æ–°çš„è®¡ç®—å¼‚æ„å·¥ä½œæµï¼ŒåŒ…æ‹¬åœ¨è¾¹ç¼˜æ”¶é›†æ•°æ®å’Œåœ¨äº‘åç«¯å¤„ç†æ•°æ®ã€‚è¿™ç±»å·¥ä½œæµæœ€è¿‘å·²è¢«åº”ç”¨äºè¾¹ç¼˜äº‘ç¯å¢ƒç­‰æ··åˆè®¡ç®—å¹³å°ï¼Œä»¥èŠ‚çœæˆæœ¬ã€‚å·¥ä½œæµè°ƒåº¦é—®é¢˜æ—¨åœ¨æœ‰æ•ˆåœ°å°†ä»»åŠ¡æ˜ å°„åˆ°å¯ç”¨èµ„æºä¸Šï¼Œä»¥ä¼˜åŒ–æœåŠ¡è´¨é‡(QoS)æŒ‡æ ‡ã€‚</p>\n<p>æŒ‘æˆ˜ï¼šå·¥ä½œæµé¢ä¸´çš„æŒ‘æˆ˜æ˜¯å¤„ç†å¼‚æ„å’Œéå¹³ç¨³çš„ç”¨æˆ·éœ€æ±‚ï¼Œç”±äºè¾¹ç¼˜èŠ‚ç‚¹å’Œäº‘èŠ‚ç‚¹å…·æœ‰ä¸åŒçš„è®¡ç®—èƒ½åŠ›ï¼Œç½‘ç»œå¸¦å®½å’Œå»¶è¿Ÿï¼Œå·¥ä½œæµè°ƒåº¦ç¨‹åºéœ€è¦æ„è¯†åˆ°èµ„æºçš„å¼‚è´¨æ€§ï¼Œä»¥ä¾¿åšå‡ºæœ€ä¼˜å†³ç­–ã€‚è¶…ä½æ—¶å»¶ï¼Œç”µæ± èƒ½è€—ï¼ŒDAGä¾èµ–ä¸ä¸€è‡´ã€‚</p>\n<h3 id=\"ä»»åŠ¡æ³¢åŠ¨æ€§å’Œä¸»æœºç§»åŠ¨æ€§-1\"><a href=\"#ä»»åŠ¡æ³¢åŠ¨æ€§å’Œä¸»æœºç§»åŠ¨æ€§-1\" class=\"headerlink\" title=\"ä»»åŠ¡æ³¢åŠ¨æ€§å’Œä¸»æœºç§»åŠ¨æ€§\"></a>ä»»åŠ¡æ³¢åŠ¨æ€§å’Œä¸»æœºç§»åŠ¨æ€§</h3><p>ä»»åŠ¡æ³¢åŠ¨æ€§:ä¸æ–­å˜åŒ–çš„èµ„æºéœ€æ±‚å’ŒæœåŠ¡éœ€æ±‚<br>ä¸»æœºç§»åŠ¨æ€§ï¼šä¸»æœºç§»åŠ¨å¯¼è‡´éå¹³ç¨³å»¶è¿Ÿï¼Œç§»åŠ¨è®¡ç®—è®¾å¤‡å¢åŠ ï¼Œç½‘ç»œç‰¹å¾å¦‚å»¶è¿Ÿå’Œå¸¦å®½å˜çš„ä¸ç¨³å®šã€‚è§£å†³:å®æ—¶ç›‘æ§å’Œæ›´æ–°è°ƒåº¦ç­–ç•¥ã€‚<br>å‚è€ƒæ–‡çŒ®ï¼Œé‡æ–°è°ƒåº¦</p>\n<blockquote>\n<p>J. Yu, R. Buyya, and C. K. Tham, â€œCost-based scheduling of scientific workflow applications on utility grids,â€ in Proc. 1st Int. Conf.<br>e-Sci. Grid Comput., 2005, pp. 8â€“147.</p>\n</blockquote>\n<p>ä¸ºäº†é¿å…è¿‡å¤šçš„å¼€é”€ï¼Œè¿™ç±»æ–¹æ³•çš„å®¢è§‚ä¼°è®¡éœ€è¦éå¸¸å‡†ç¡®</p>\n<h3 id=\"ç ”ç©¶ç°çŠ¶-1\"><a href=\"#ç ”ç©¶ç°çŠ¶-1\" class=\"headerlink\" title=\"ç ”ç©¶ç°çŠ¶\"></a>ç ”ç©¶ç°çŠ¶</h3><p>è¿›åŒ–æ–¹æ¡ˆ<br>å¼ºåŒ–å­¦ä¹ <br>å¯å‘å¼ç®—æ³•<br>å…ƒå¯å‘å¼ç®—æ³•</p>\n<h3 id=\"æ–°è§è§£-1\"><a href=\"#æ–°è§è§£-1\" class=\"headerlink\" title=\"æ–°è§è§£\"></a>æ–°è§è§£</h3><p>è¿‡å»ä½¿ç”¨ç¥ç»ç½‘ç»œé€¼è¿‘ä¼˜åŒ–ç›®æ ‡ï¼Œå……å½“QoSè¿‘ä¼¼å€¼ï¼Œç”±äºè°ƒåº¦å†³ç­–éœ€è¦åœ¨æ¥è¿‘å®æ—¶çš„æƒ…å†µä¸‹è¿›è¡Œï¼Œå…ˆå‰çš„å·¥ä½œæ²¡æœ‰ä½¿ç”¨è¿™ç§å‰ç»æ€§æ–¹æ¡ˆï¼Œå› æ­¤æ‰§è¡Œçš„æ˜¯çŸ­è§†ä¼˜åŒ–ã€‚<br>ç»“åˆè’™ç‰¹å¡ç½—å­¦ä¹ å’Œæ·±åº¦ä»£ç†æ¨¡å‹æ¥è¿›è¡ŒQoSæœ€ä¼˜å·¥ä½œæµè°ƒåº¦æ˜¯éå¸¸é‡è¦çš„ã€‚è¿™æ˜¯å› ä¸ºæ™®é€šçš„è’™ç‰¹å¡æ´›å­¦ä¹ éœ€è¦åœ¨éšæœºè°ƒåº¦æ“ä½œä¸‹æ‰§è¡Œå¤šä¸ªå¤šæ­¥éª¤æ¨¡æ‹Ÿè¿è¡Œï¼Œè®¡ç®—æˆæœ¬å¾ˆé«˜ã€‚æ­¤å¤–ï¼Œä¼ ç»Ÿçš„åŸºäºå†å²æ•°æ®è®­ç»ƒçš„æ·±åº¦ä»£ç†æ¨¡å‹åªæä¾›æ‰§è¡ŒåŠ¨ä½œåçŸ­æœŸçš„ç³»ç»ŸçŠ¶æ€çš„QoSè¯„åˆ†ï¼Œè€Œä¸æ˜¯é•¿æœŸçš„QoSã€‚ä¸ºäº†è§£å†³è¿™äº›é—®é¢˜ï¼Œæˆ‘ä»¬ä¸æ˜¯éšæœºé€‰æ‹©è¦æ¨¡æ‹Ÿçš„åŠ¨ä½œï¼Œè€Œæ˜¯åœ¨è’™ç‰¹å¡æ´›å­¦ä¹ æ¡†æ¶å†…è®­ç»ƒä¸€ä¸ªæ·±åº¦ä»£ç†æ¨¡å‹æ¥è¿‘ä¼¼é•¿æœŸQoSåˆ†æ•°ã€‚<br>ä¸ºäº†å‘ç°æ½œåœ¨çš„æ›´å¥½çš„è¡ŒåŠ¨ï¼Œæˆ‘ä»¬ä¸æ–­æ¢ç´¢çŠ¶æ€-è¡ŒåŠ¨æœç´¢ç©ºé—´ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªçŸ­æœŸä¼˜åŒ–æ–¹æ¡ˆçš„åŠ¨ä½œè¾“å‡ºã€‚</p>\n<h3 id=\"ç›¸å…³å·¥ä½œä»‹ç»-1\"><a href=\"#ç›¸å…³å·¥ä½œä»‹ç»-1\" class=\"headerlink\" title=\"ç›¸å…³å·¥ä½œä»‹ç»\"></a>ç›¸å…³å·¥ä½œä»‹ç»</h3><p>å¯å‘å¼ç®—æ³•ï¼Œä¸€äº›ç»å…¸ä½œå“ä½¿ç”¨å¯å‘å¼ç®—æ³•æ¥ä¼˜åŒ–å·¥ä½œæµè°ƒåº¦å†³ç­–<br>ç›®çš„ï¼šä¼˜åŒ–ç›®æ ‡ï¼Œä¾‹å¦‚å¹³å‡å“åº”æ—¶é—´ã€èƒ½æºæ¶ˆè€—ã€æ‰§è¡Œæˆæœ¬ã€èµ„æºåˆ©ç”¨ç‡æˆ– SLA è¿åç‡</p>\n","encrypt":true},{"title":"äº‘åŸç”Ÿå…¥é—¨.md","date":"2022-11-01T03:31:09.000Z","_content":"# äº‘åŸç”Ÿæ¶æ„æ€»è§ˆ\n\n## äº‘è®¡ç®—æŠ€æœ¯å‘å±•\n\nVMware->AWS->Heroku->OpenStack->CloudFoundry->Docker->CloudNative->K8S\n\n### äº‘åŸç”Ÿå®šä¹‰\n\n ![image-20221101092238399](https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221101092238399.png)\n\n![image-20221101092319437](https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221101092319437.png)\n\n![image-20221101092359250](https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221101092359250.png)\n\n### å®¹å™¨\n\nå®¹å™¨æŠ€æœ¯ï¼šæé«˜åº”ç”¨å¯ç§»æ¤æ€§ï¼Œæé«˜ä¸šåŠ¡æ•æ·\n\nå®¹å™¨å¯ä»¥å°†åº”ç”¨æœ¬èº«åŠå…¶ä¾èµ–æ‰“åŒ…ï¼Œä½¿å¾—åº”ç”¨å¯ä»¥å®ç°ä¸€æ¬¡å°è£…ï¼Œåˆ°å¤„è¿è¡Œ\n\nå®¹å™¨ä¹Ÿå¯ä»¥ç†è§£æˆä¸€ç§æ²™ç›’æŠ€æœ¯ï¼Œæ²™ç›’åœ¨è®¡ç®—æœºå®‰å…¨é¢†åŸŸä¸­æ˜¯ä¸€ç§å®‰å…¨æœºåˆ¶ï¼Œä¸ºè¿è¡Œä¸­çš„ç¨‹åºæä¾›éš”ç¦»ç¯å¢ƒ\n\n![image-20221101092838525](https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221101092838525.png)\n\n### Kubernetesçš„å£°æ˜å¼API\n\né¢å‘å¼€å‘è€…æä¾›å…¨æ–°åˆ†å¸ƒå¼åŸè¯­\n\n![image-20221101092937576](https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221101092937576.png)\n\n###  æœåŠ¡ç½‘ç»œ\n\nå‰¥ç¦»ä¸šåŠ¡ä»£ç å’Œåˆ†å¸ƒå¼æ¡†æ¶\n\n### å¾®æœåŠ¡\n\nåŠ é€Ÿä¼ä¸šåº”ç”¨æ¶æ„å‡çº§\n\n![image-20221101094011231](https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221101094011231.png)\n\n![image-20221101094315744](https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221101094315744.png)\n\n### DevOps\n\nä¿ƒè¿›å¼€å‘è¿ç»´ä¸€ä½“åŒ–\n\n![image-20221101094622460](https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221101094622460.png)\n\n![image-20221101094915814](https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221101094915814.png)\n\n## äº‘åŸç”Ÿåº”ç”¨\n\n### äº‘åŸç”Ÿç»¼åˆç†è§£\n\n![image-20221101095530975](https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221101095530975.png)\n\n![image-20221101095606767](https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221101095606767.png)\n\n### äº‘åŸç”Ÿåº”ç”¨çš„é€‚ç”¨åœºæ™¯\n\n![image-20221101095702176](https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221101095702176.png)\n\n### ä¼ ç»Ÿåº”ç”¨ä¸äº‘åŸç”Ÿåº”ç”¨åŒºåˆ«\n\n![image-20221101095758345](https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221101095758345.png)\n\n### å¦‚ä½•å¼€å‘äº‘åŸç”Ÿåº”ç”¨\n\n![image-20221101101920055](https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221101101920055.png)\n\n![image-20221101101940998](https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221101101940998.png)\n\n## äº‘åŸç”Ÿæ¶æ„åŸåˆ™åŠå¸¸ç”¨æ¨¡å¼\n\n### äº‘åŸç”Ÿæ¶æ„æ¼”è¿›åŸåˆ™\n\n![image-20221101103011244](https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221101103011244.png)\n\n### å•ä½“æ¶æ„çš„å±€é™æ€§\n\n![image-20221101103438322](https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221101103438322.png)\n\n### å¾®æœåŠ¡æ¶æ„\n\n![image-20221101103721644](https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221101103721644.png)\n\n### sercerlessæ¶æ„\n\n![image-20221101103848852](https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221101103848852.png)\n\n### serverlesså’Œå¾®æœåŠ¡\n\n![image-20221101104332149](https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221101104332149.png)\n\n## åä¸ºäº‘åŸç”Ÿè§£å†³æ–¹æ¡ˆ\n\nåä¸ºäº‘äº‘åŸç”ŸæœåŠ¡ï¼ŒåŠ é€Ÿä¼ä¸šæ„å»ºäº‘åŸç”Ÿåº”ç”¨\n\n![image-20221101104745201](https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221101104745201.png)\n\n  ### äº‘åŸç”ŸåŸºç¡€è®¾æ–½\n\n![image-20221101105037598](https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221101105037598.png)\n\n### å¤šäº‘ç®¡ç†è§£å†³æ–¹æ¡ˆ\n\n![image-20221101105532179](https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221101105532179.png)\n\n![image-20221101110039410](https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221101110039410.png)\n\n### è¾¹äº‘ååŒ\n\n![image-20221101110306683](https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221101110306683.png)\n\n ### åä¸ºäº‘DevSecOps\n\n![image-20221101110615489](https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221101110615489.png)\n\n### åä¸ºè¿ç»´èƒ½åŠ›\n\n![image-20221101111025420](https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221101111025420.png)\n\n## æœªæ¥è¶‹åŠ¿\n\nKubernetesç¼–æ’ç»Ÿä¸€åŒ–ï¼Œç¼–æ’å¯¹è±¡ä¸æ–­æ‰©å±•å»¶ä¼¸\n\n![image-20221101111315159](https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221101111315159.png)","source":"_posts/2022/11/äº‘åŸç”Ÿå…¥é—¨-md.md","raw":"---\ntitle: äº‘åŸç”Ÿå…¥é—¨.md\ndate: 2022-11-01 11:31:09\ntags: [äº‘åŸç”Ÿ,åä¸ºäº‘]\ncategories: [ç¬”è®°]\n---\n# äº‘åŸç”Ÿæ¶æ„æ€»è§ˆ\n\n## äº‘è®¡ç®—æŠ€æœ¯å‘å±•\n\nVMware->AWS->Heroku->OpenStack->CloudFoundry->Docker->CloudNative->K8S\n\n### äº‘åŸç”Ÿå®šä¹‰\n\n ![image-20221101092238399](https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221101092238399.png)\n\n![image-20221101092319437](https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221101092319437.png)\n\n![image-20221101092359250](https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221101092359250.png)\n\n### å®¹å™¨\n\nå®¹å™¨æŠ€æœ¯ï¼šæé«˜åº”ç”¨å¯ç§»æ¤æ€§ï¼Œæé«˜ä¸šåŠ¡æ•æ·\n\nå®¹å™¨å¯ä»¥å°†åº”ç”¨æœ¬èº«åŠå…¶ä¾èµ–æ‰“åŒ…ï¼Œä½¿å¾—åº”ç”¨å¯ä»¥å®ç°ä¸€æ¬¡å°è£…ï¼Œåˆ°å¤„è¿è¡Œ\n\nå®¹å™¨ä¹Ÿå¯ä»¥ç†è§£æˆä¸€ç§æ²™ç›’æŠ€æœ¯ï¼Œæ²™ç›’åœ¨è®¡ç®—æœºå®‰å…¨é¢†åŸŸä¸­æ˜¯ä¸€ç§å®‰å…¨æœºåˆ¶ï¼Œä¸ºè¿è¡Œä¸­çš„ç¨‹åºæä¾›éš”ç¦»ç¯å¢ƒ\n\n![image-20221101092838525](https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221101092838525.png)\n\n### Kubernetesçš„å£°æ˜å¼API\n\né¢å‘å¼€å‘è€…æä¾›å…¨æ–°åˆ†å¸ƒå¼åŸè¯­\n\n![image-20221101092937576](https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221101092937576.png)\n\n###  æœåŠ¡ç½‘ç»œ\n\nå‰¥ç¦»ä¸šåŠ¡ä»£ç å’Œåˆ†å¸ƒå¼æ¡†æ¶\n\n### å¾®æœåŠ¡\n\nåŠ é€Ÿä¼ä¸šåº”ç”¨æ¶æ„å‡çº§\n\n![image-20221101094011231](https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221101094011231.png)\n\n![image-20221101094315744](https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221101094315744.png)\n\n### DevOps\n\nä¿ƒè¿›å¼€å‘è¿ç»´ä¸€ä½“åŒ–\n\n![image-20221101094622460](https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221101094622460.png)\n\n![image-20221101094915814](https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221101094915814.png)\n\n## äº‘åŸç”Ÿåº”ç”¨\n\n### äº‘åŸç”Ÿç»¼åˆç†è§£\n\n![image-20221101095530975](https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221101095530975.png)\n\n![image-20221101095606767](https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221101095606767.png)\n\n### äº‘åŸç”Ÿåº”ç”¨çš„é€‚ç”¨åœºæ™¯\n\n![image-20221101095702176](https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221101095702176.png)\n\n### ä¼ ç»Ÿåº”ç”¨ä¸äº‘åŸç”Ÿåº”ç”¨åŒºåˆ«\n\n![image-20221101095758345](https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221101095758345.png)\n\n### å¦‚ä½•å¼€å‘äº‘åŸç”Ÿåº”ç”¨\n\n![image-20221101101920055](https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221101101920055.png)\n\n![image-20221101101940998](https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221101101940998.png)\n\n## äº‘åŸç”Ÿæ¶æ„åŸåˆ™åŠå¸¸ç”¨æ¨¡å¼\n\n### äº‘åŸç”Ÿæ¶æ„æ¼”è¿›åŸåˆ™\n\n![image-20221101103011244](https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221101103011244.png)\n\n### å•ä½“æ¶æ„çš„å±€é™æ€§\n\n![image-20221101103438322](https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221101103438322.png)\n\n### å¾®æœåŠ¡æ¶æ„\n\n![image-20221101103721644](https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221101103721644.png)\n\n### sercerlessæ¶æ„\n\n![image-20221101103848852](https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221101103848852.png)\n\n### serverlesså’Œå¾®æœåŠ¡\n\n![image-20221101104332149](https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221101104332149.png)\n\n## åä¸ºäº‘åŸç”Ÿè§£å†³æ–¹æ¡ˆ\n\nåä¸ºäº‘äº‘åŸç”ŸæœåŠ¡ï¼ŒåŠ é€Ÿä¼ä¸šæ„å»ºäº‘åŸç”Ÿåº”ç”¨\n\n![image-20221101104745201](https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221101104745201.png)\n\n  ### äº‘åŸç”ŸåŸºç¡€è®¾æ–½\n\n![image-20221101105037598](https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221101105037598.png)\n\n### å¤šäº‘ç®¡ç†è§£å†³æ–¹æ¡ˆ\n\n![image-20221101105532179](https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221101105532179.png)\n\n![image-20221101110039410](https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221101110039410.png)\n\n### è¾¹äº‘ååŒ\n\n![image-20221101110306683](https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221101110306683.png)\n\n ### åä¸ºäº‘DevSecOps\n\n![image-20221101110615489](https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221101110615489.png)\n\n### åä¸ºè¿ç»´èƒ½åŠ›\n\n![image-20221101111025420](https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221101111025420.png)\n\n## æœªæ¥è¶‹åŠ¿\n\nKubernetesç¼–æ’ç»Ÿä¸€åŒ–ï¼Œç¼–æ’å¯¹è±¡ä¸æ–­æ‰©å±•å»¶ä¼¸\n\n![image-20221101111315159](https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221101111315159.png)","slug":"äº‘åŸç”Ÿå…¥é—¨-md","published":1,"updated":"2022-11-05T14:16:59.514Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clas9ert3001bdk8f1rqs5rmc","content":"<h1 id=\"äº‘åŸç”Ÿæ¶æ„æ€»è§ˆ\"><a href=\"#äº‘åŸç”Ÿæ¶æ„æ€»è§ˆ\" class=\"headerlink\" title=\"äº‘åŸç”Ÿæ¶æ„æ€»è§ˆ\"></a>äº‘åŸç”Ÿæ¶æ„æ€»è§ˆ</h1><h2 id=\"äº‘è®¡ç®—æŠ€æœ¯å‘å±•\"><a href=\"#äº‘è®¡ç®—æŠ€æœ¯å‘å±•\" class=\"headerlink\" title=\"äº‘è®¡ç®—æŠ€æœ¯å‘å±•\"></a>äº‘è®¡ç®—æŠ€æœ¯å‘å±•</h2><p>VMware-&gt;AWS-&gt;Heroku-&gt;OpenStack-&gt;CloudFoundry-&gt;Docker-&gt;CloudNative-&gt;K8S</p>\n<h3 id=\"äº‘åŸç”Ÿå®šä¹‰\"><a href=\"#äº‘åŸç”Ÿå®šä¹‰\" class=\"headerlink\" title=\"äº‘åŸç”Ÿå®šä¹‰\"></a>äº‘åŸç”Ÿå®šä¹‰</h3><p> <img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221101092238399.png\"\n                      alt=\"image-20221101092238399\"\n                ></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221101092319437.png\"\n                      alt=\"image-20221101092319437\"\n                ></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221101092359250.png\"\n                      alt=\"image-20221101092359250\"\n                ></p>\n<h3 id=\"å®¹å™¨\"><a href=\"#å®¹å™¨\" class=\"headerlink\" title=\"å®¹å™¨\"></a>å®¹å™¨</h3><p>å®¹å™¨æŠ€æœ¯ï¼šæé«˜åº”ç”¨å¯ç§»æ¤æ€§ï¼Œæé«˜ä¸šåŠ¡æ•æ·</p>\n<p>å®¹å™¨å¯ä»¥å°†åº”ç”¨æœ¬èº«åŠå…¶ä¾èµ–æ‰“åŒ…ï¼Œä½¿å¾—åº”ç”¨å¯ä»¥å®ç°ä¸€æ¬¡å°è£…ï¼Œåˆ°å¤„è¿è¡Œ</p>\n<p>å®¹å™¨ä¹Ÿå¯ä»¥ç†è§£æˆä¸€ç§æ²™ç›’æŠ€æœ¯ï¼Œæ²™ç›’åœ¨è®¡ç®—æœºå®‰å…¨é¢†åŸŸä¸­æ˜¯ä¸€ç§å®‰å…¨æœºåˆ¶ï¼Œä¸ºè¿è¡Œä¸­çš„ç¨‹åºæä¾›éš”ç¦»ç¯å¢ƒ</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221101092838525.png\"\n                      alt=\"image-20221101092838525\"\n                ></p>\n<h3 id=\"Kubernetesçš„å£°æ˜å¼API\"><a href=\"#Kubernetesçš„å£°æ˜å¼API\" class=\"headerlink\" title=\"Kubernetesçš„å£°æ˜å¼API\"></a>Kubernetesçš„å£°æ˜å¼API</h3><p>é¢å‘å¼€å‘è€…æä¾›å…¨æ–°åˆ†å¸ƒå¼åŸè¯­</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221101092937576.png\"\n                      alt=\"image-20221101092937576\"\n                ></p>\n<h3 id=\"æœåŠ¡ç½‘ç»œ\"><a href=\"#æœåŠ¡ç½‘ç»œ\" class=\"headerlink\" title=\"æœåŠ¡ç½‘ç»œ\"></a>æœåŠ¡ç½‘ç»œ</h3><p>å‰¥ç¦»ä¸šåŠ¡ä»£ç å’Œåˆ†å¸ƒå¼æ¡†æ¶</p>\n<h3 id=\"å¾®æœåŠ¡\"><a href=\"#å¾®æœåŠ¡\" class=\"headerlink\" title=\"å¾®æœåŠ¡\"></a>å¾®æœåŠ¡</h3><p>åŠ é€Ÿä¼ä¸šåº”ç”¨æ¶æ„å‡çº§</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221101094011231.png\"\n                      alt=\"image-20221101094011231\"\n                ></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221101094315744.png\"\n                      alt=\"image-20221101094315744\"\n                ></p>\n<h3 id=\"DevOps\"><a href=\"#DevOps\" class=\"headerlink\" title=\"DevOps\"></a>DevOps</h3><p>ä¿ƒè¿›å¼€å‘è¿ç»´ä¸€ä½“åŒ–</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221101094622460.png\"\n                      alt=\"image-20221101094622460\"\n                ></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221101094915814.png\"\n                      alt=\"image-20221101094915814\"\n                ></p>\n<h2 id=\"äº‘åŸç”Ÿåº”ç”¨\"><a href=\"#äº‘åŸç”Ÿåº”ç”¨\" class=\"headerlink\" title=\"äº‘åŸç”Ÿåº”ç”¨\"></a>äº‘åŸç”Ÿåº”ç”¨</h2><h3 id=\"äº‘åŸç”Ÿç»¼åˆç†è§£\"><a href=\"#äº‘åŸç”Ÿç»¼åˆç†è§£\" class=\"headerlink\" title=\"äº‘åŸç”Ÿç»¼åˆç†è§£\"></a>äº‘åŸç”Ÿç»¼åˆç†è§£</h3><p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221101095530975.png\"\n                      alt=\"image-20221101095530975\"\n                ></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221101095606767.png\"\n                      alt=\"image-20221101095606767\"\n                ></p>\n<h3 id=\"äº‘åŸç”Ÿåº”ç”¨çš„é€‚ç”¨åœºæ™¯\"><a href=\"#äº‘åŸç”Ÿåº”ç”¨çš„é€‚ç”¨åœºæ™¯\" class=\"headerlink\" title=\"äº‘åŸç”Ÿåº”ç”¨çš„é€‚ç”¨åœºæ™¯\"></a>äº‘åŸç”Ÿåº”ç”¨çš„é€‚ç”¨åœºæ™¯</h3><p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221101095702176.png\"\n                      alt=\"image-20221101095702176\"\n                ></p>\n<h3 id=\"ä¼ ç»Ÿåº”ç”¨ä¸äº‘åŸç”Ÿåº”ç”¨åŒºåˆ«\"><a href=\"#ä¼ ç»Ÿåº”ç”¨ä¸äº‘åŸç”Ÿåº”ç”¨åŒºåˆ«\" class=\"headerlink\" title=\"ä¼ ç»Ÿåº”ç”¨ä¸äº‘åŸç”Ÿåº”ç”¨åŒºåˆ«\"></a>ä¼ ç»Ÿåº”ç”¨ä¸äº‘åŸç”Ÿåº”ç”¨åŒºåˆ«</h3><p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221101095758345.png\"\n                      alt=\"image-20221101095758345\"\n                ></p>\n<h3 id=\"å¦‚ä½•å¼€å‘äº‘åŸç”Ÿåº”ç”¨\"><a href=\"#å¦‚ä½•å¼€å‘äº‘åŸç”Ÿåº”ç”¨\" class=\"headerlink\" title=\"å¦‚ä½•å¼€å‘äº‘åŸç”Ÿåº”ç”¨\"></a>å¦‚ä½•å¼€å‘äº‘åŸç”Ÿåº”ç”¨</h3><p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221101101920055.png\"\n                      alt=\"image-20221101101920055\"\n                ></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221101101940998.png\"\n                      alt=\"image-20221101101940998\"\n                ></p>\n<h2 id=\"äº‘åŸç”Ÿæ¶æ„åŸåˆ™åŠå¸¸ç”¨æ¨¡å¼\"><a href=\"#äº‘åŸç”Ÿæ¶æ„åŸåˆ™åŠå¸¸ç”¨æ¨¡å¼\" class=\"headerlink\" title=\"äº‘åŸç”Ÿæ¶æ„åŸåˆ™åŠå¸¸ç”¨æ¨¡å¼\"></a>äº‘åŸç”Ÿæ¶æ„åŸåˆ™åŠå¸¸ç”¨æ¨¡å¼</h2><h3 id=\"äº‘åŸç”Ÿæ¶æ„æ¼”è¿›åŸåˆ™\"><a href=\"#äº‘åŸç”Ÿæ¶æ„æ¼”è¿›åŸåˆ™\" class=\"headerlink\" title=\"äº‘åŸç”Ÿæ¶æ„æ¼”è¿›åŸåˆ™\"></a>äº‘åŸç”Ÿæ¶æ„æ¼”è¿›åŸåˆ™</h3><p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221101103011244.png\"\n                      alt=\"image-20221101103011244\"\n                ></p>\n<h3 id=\"å•ä½“æ¶æ„çš„å±€é™æ€§\"><a href=\"#å•ä½“æ¶æ„çš„å±€é™æ€§\" class=\"headerlink\" title=\"å•ä½“æ¶æ„çš„å±€é™æ€§\"></a>å•ä½“æ¶æ„çš„å±€é™æ€§</h3><p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221101103438322.png\"\n                      alt=\"image-20221101103438322\"\n                ></p>\n<h3 id=\"å¾®æœåŠ¡æ¶æ„\"><a href=\"#å¾®æœåŠ¡æ¶æ„\" class=\"headerlink\" title=\"å¾®æœåŠ¡æ¶æ„\"></a>å¾®æœåŠ¡æ¶æ„</h3><p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221101103721644.png\"\n                      alt=\"image-20221101103721644\"\n                ></p>\n<h3 id=\"sercerlessæ¶æ„\"><a href=\"#sercerlessæ¶æ„\" class=\"headerlink\" title=\"sercerlessæ¶æ„\"></a>sercerlessæ¶æ„</h3><p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221101103848852.png\"\n                      alt=\"image-20221101103848852\"\n                ></p>\n<h3 id=\"serverlesså’Œå¾®æœåŠ¡\"><a href=\"#serverlesså’Œå¾®æœåŠ¡\" class=\"headerlink\" title=\"serverlesså’Œå¾®æœåŠ¡\"></a>serverlesså’Œå¾®æœåŠ¡</h3><p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221101104332149.png\"\n                      alt=\"image-20221101104332149\"\n                ></p>\n<h2 id=\"åä¸ºäº‘åŸç”Ÿè§£å†³æ–¹æ¡ˆ\"><a href=\"#åä¸ºäº‘åŸç”Ÿè§£å†³æ–¹æ¡ˆ\" class=\"headerlink\" title=\"åä¸ºäº‘åŸç”Ÿè§£å†³æ–¹æ¡ˆ\"></a>åä¸ºäº‘åŸç”Ÿè§£å†³æ–¹æ¡ˆ</h2><p>åä¸ºäº‘äº‘åŸç”ŸæœåŠ¡ï¼ŒåŠ é€Ÿä¼ä¸šæ„å»ºäº‘åŸç”Ÿåº”ç”¨</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221101104745201.png\"\n                      alt=\"image-20221101104745201\"\n                ></p>\n<h3 id=\"äº‘åŸç”ŸåŸºç¡€è®¾æ–½\"><a href=\"#äº‘åŸç”ŸåŸºç¡€è®¾æ–½\" class=\"headerlink\" title=\"äº‘åŸç”ŸåŸºç¡€è®¾æ–½\"></a>äº‘åŸç”ŸåŸºç¡€è®¾æ–½</h3><p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221101105037598.png\"\n                      alt=\"image-20221101105037598\"\n                ></p>\n<h3 id=\"å¤šäº‘ç®¡ç†è§£å†³æ–¹æ¡ˆ\"><a href=\"#å¤šäº‘ç®¡ç†è§£å†³æ–¹æ¡ˆ\" class=\"headerlink\" title=\"å¤šäº‘ç®¡ç†è§£å†³æ–¹æ¡ˆ\"></a>å¤šäº‘ç®¡ç†è§£å†³æ–¹æ¡ˆ</h3><p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221101105532179.png\"\n                      alt=\"image-20221101105532179\"\n                ></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221101110039410.png\"\n                      alt=\"image-20221101110039410\"\n                ></p>\n<h3 id=\"è¾¹äº‘ååŒ\"><a href=\"#è¾¹äº‘ååŒ\" class=\"headerlink\" title=\"è¾¹äº‘ååŒ\"></a>è¾¹äº‘ååŒ</h3><p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221101110306683.png\"\n                      alt=\"image-20221101110306683\"\n                ></p>\n<h3 id=\"åä¸ºäº‘DevSecOps\"><a href=\"#åä¸ºäº‘DevSecOps\" class=\"headerlink\" title=\"åä¸ºäº‘DevSecOps\"></a>åä¸ºäº‘DevSecOps</h3><p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221101110615489.png\"\n                      alt=\"image-20221101110615489\"\n                ></p>\n<h3 id=\"åä¸ºè¿ç»´èƒ½åŠ›\"><a href=\"#åä¸ºè¿ç»´èƒ½åŠ›\" class=\"headerlink\" title=\"åä¸ºè¿ç»´èƒ½åŠ›\"></a>åä¸ºè¿ç»´èƒ½åŠ›</h3><p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221101111025420.png\"\n                      alt=\"image-20221101111025420\"\n                ></p>\n<h2 id=\"æœªæ¥è¶‹åŠ¿\"><a href=\"#æœªæ¥è¶‹åŠ¿\" class=\"headerlink\" title=\"æœªæ¥è¶‹åŠ¿\"></a>æœªæ¥è¶‹åŠ¿</h2><p>Kubernetesç¼–æ’ç»Ÿä¸€åŒ–ï¼Œç¼–æ’å¯¹è±¡ä¸æ–­æ‰©å±•å»¶ä¼¸</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221101111315159.png\"\n                      alt=\"image-20221101111315159\"\n                ></p>\n","site":{"data":{"links":[{"name":"CZMæœ‰ç‚¹å†·","link":"https://czm.cool/","description":"CZMçš„åšå®¢","avatar":"https://img.czm.cool/avatar/avatar.png"},{"name":"PSH","link":"https://shamd.cloud/","description":"PSHçš„åšå®¢.","avatar":"https://shamd.cloud/upload/2022/07/afbb577733f46c9535dd1d6d6388278.jpg"},{"name":"KAI","link":"https://kainote.top/","description":"love artist, love code.","avatar":"https://cdn.jsdelivr.net/gh/kaix2301/pictures/img202201072101018.jpg"}]}},"excerpt":"","more":"<h1 id=\"äº‘åŸç”Ÿæ¶æ„æ€»è§ˆ\"><a href=\"#äº‘åŸç”Ÿæ¶æ„æ€»è§ˆ\" class=\"headerlink\" title=\"äº‘åŸç”Ÿæ¶æ„æ€»è§ˆ\"></a>äº‘åŸç”Ÿæ¶æ„æ€»è§ˆ</h1><h2 id=\"äº‘è®¡ç®—æŠ€æœ¯å‘å±•\"><a href=\"#äº‘è®¡ç®—æŠ€æœ¯å‘å±•\" class=\"headerlink\" title=\"äº‘è®¡ç®—æŠ€æœ¯å‘å±•\"></a>äº‘è®¡ç®—æŠ€æœ¯å‘å±•</h2><p>VMware-&gt;AWS-&gt;Heroku-&gt;OpenStack-&gt;CloudFoundry-&gt;Docker-&gt;CloudNative-&gt;K8S</p>\n<h3 id=\"äº‘åŸç”Ÿå®šä¹‰\"><a href=\"#äº‘åŸç”Ÿå®šä¹‰\" class=\"headerlink\" title=\"äº‘åŸç”Ÿå®šä¹‰\"></a>äº‘åŸç”Ÿå®šä¹‰</h3><p> <img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221101092238399.png\"\n                      alt=\"image-20221101092238399\"\n                ></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221101092319437.png\"\n                      alt=\"image-20221101092319437\"\n                ></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221101092359250.png\"\n                      alt=\"image-20221101092359250\"\n                ></p>\n<h3 id=\"å®¹å™¨\"><a href=\"#å®¹å™¨\" class=\"headerlink\" title=\"å®¹å™¨\"></a>å®¹å™¨</h3><p>å®¹å™¨æŠ€æœ¯ï¼šæé«˜åº”ç”¨å¯ç§»æ¤æ€§ï¼Œæé«˜ä¸šåŠ¡æ•æ·</p>\n<p>å®¹å™¨å¯ä»¥å°†åº”ç”¨æœ¬èº«åŠå…¶ä¾èµ–æ‰“åŒ…ï¼Œä½¿å¾—åº”ç”¨å¯ä»¥å®ç°ä¸€æ¬¡å°è£…ï¼Œåˆ°å¤„è¿è¡Œ</p>\n<p>å®¹å™¨ä¹Ÿå¯ä»¥ç†è§£æˆä¸€ç§æ²™ç›’æŠ€æœ¯ï¼Œæ²™ç›’åœ¨è®¡ç®—æœºå®‰å…¨é¢†åŸŸä¸­æ˜¯ä¸€ç§å®‰å…¨æœºåˆ¶ï¼Œä¸ºè¿è¡Œä¸­çš„ç¨‹åºæä¾›éš”ç¦»ç¯å¢ƒ</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221101092838525.png\"\n                      alt=\"image-20221101092838525\"\n                ></p>\n<h3 id=\"Kubernetesçš„å£°æ˜å¼API\"><a href=\"#Kubernetesçš„å£°æ˜å¼API\" class=\"headerlink\" title=\"Kubernetesçš„å£°æ˜å¼API\"></a>Kubernetesçš„å£°æ˜å¼API</h3><p>é¢å‘å¼€å‘è€…æä¾›å…¨æ–°åˆ†å¸ƒå¼åŸè¯­</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221101092937576.png\"\n                      alt=\"image-20221101092937576\"\n                ></p>\n<h3 id=\"æœåŠ¡ç½‘ç»œ\"><a href=\"#æœåŠ¡ç½‘ç»œ\" class=\"headerlink\" title=\"æœåŠ¡ç½‘ç»œ\"></a>æœåŠ¡ç½‘ç»œ</h3><p>å‰¥ç¦»ä¸šåŠ¡ä»£ç å’Œåˆ†å¸ƒå¼æ¡†æ¶</p>\n<h3 id=\"å¾®æœåŠ¡\"><a href=\"#å¾®æœåŠ¡\" class=\"headerlink\" title=\"å¾®æœåŠ¡\"></a>å¾®æœåŠ¡</h3><p>åŠ é€Ÿä¼ä¸šåº”ç”¨æ¶æ„å‡çº§</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221101094011231.png\"\n                      alt=\"image-20221101094011231\"\n                ></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221101094315744.png\"\n                      alt=\"image-20221101094315744\"\n                ></p>\n<h3 id=\"DevOps\"><a href=\"#DevOps\" class=\"headerlink\" title=\"DevOps\"></a>DevOps</h3><p>ä¿ƒè¿›å¼€å‘è¿ç»´ä¸€ä½“åŒ–</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221101094622460.png\"\n                      alt=\"image-20221101094622460\"\n                ></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221101094915814.png\"\n                      alt=\"image-20221101094915814\"\n                ></p>\n<h2 id=\"äº‘åŸç”Ÿåº”ç”¨\"><a href=\"#äº‘åŸç”Ÿåº”ç”¨\" class=\"headerlink\" title=\"äº‘åŸç”Ÿåº”ç”¨\"></a>äº‘åŸç”Ÿåº”ç”¨</h2><h3 id=\"äº‘åŸç”Ÿç»¼åˆç†è§£\"><a href=\"#äº‘åŸç”Ÿç»¼åˆç†è§£\" class=\"headerlink\" title=\"äº‘åŸç”Ÿç»¼åˆç†è§£\"></a>äº‘åŸç”Ÿç»¼åˆç†è§£</h3><p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221101095530975.png\"\n                      alt=\"image-20221101095530975\"\n                ></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221101095606767.png\"\n                      alt=\"image-20221101095606767\"\n                ></p>\n<h3 id=\"äº‘åŸç”Ÿåº”ç”¨çš„é€‚ç”¨åœºæ™¯\"><a href=\"#äº‘åŸç”Ÿåº”ç”¨çš„é€‚ç”¨åœºæ™¯\" class=\"headerlink\" title=\"äº‘åŸç”Ÿåº”ç”¨çš„é€‚ç”¨åœºæ™¯\"></a>äº‘åŸç”Ÿåº”ç”¨çš„é€‚ç”¨åœºæ™¯</h3><p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221101095702176.png\"\n                      alt=\"image-20221101095702176\"\n                ></p>\n<h3 id=\"ä¼ ç»Ÿåº”ç”¨ä¸äº‘åŸç”Ÿåº”ç”¨åŒºåˆ«\"><a href=\"#ä¼ ç»Ÿåº”ç”¨ä¸äº‘åŸç”Ÿåº”ç”¨åŒºåˆ«\" class=\"headerlink\" title=\"ä¼ ç»Ÿåº”ç”¨ä¸äº‘åŸç”Ÿåº”ç”¨åŒºåˆ«\"></a>ä¼ ç»Ÿåº”ç”¨ä¸äº‘åŸç”Ÿåº”ç”¨åŒºåˆ«</h3><p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221101095758345.png\"\n                      alt=\"image-20221101095758345\"\n                ></p>\n<h3 id=\"å¦‚ä½•å¼€å‘äº‘åŸç”Ÿåº”ç”¨\"><a href=\"#å¦‚ä½•å¼€å‘äº‘åŸç”Ÿåº”ç”¨\" class=\"headerlink\" title=\"å¦‚ä½•å¼€å‘äº‘åŸç”Ÿåº”ç”¨\"></a>å¦‚ä½•å¼€å‘äº‘åŸç”Ÿåº”ç”¨</h3><p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221101101920055.png\"\n                      alt=\"image-20221101101920055\"\n                ></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221101101940998.png\"\n                      alt=\"image-20221101101940998\"\n                ></p>\n<h2 id=\"äº‘åŸç”Ÿæ¶æ„åŸåˆ™åŠå¸¸ç”¨æ¨¡å¼\"><a href=\"#äº‘åŸç”Ÿæ¶æ„åŸåˆ™åŠå¸¸ç”¨æ¨¡å¼\" class=\"headerlink\" title=\"äº‘åŸç”Ÿæ¶æ„åŸåˆ™åŠå¸¸ç”¨æ¨¡å¼\"></a>äº‘åŸç”Ÿæ¶æ„åŸåˆ™åŠå¸¸ç”¨æ¨¡å¼</h2><h3 id=\"äº‘åŸç”Ÿæ¶æ„æ¼”è¿›åŸåˆ™\"><a href=\"#äº‘åŸç”Ÿæ¶æ„æ¼”è¿›åŸåˆ™\" class=\"headerlink\" title=\"äº‘åŸç”Ÿæ¶æ„æ¼”è¿›åŸåˆ™\"></a>äº‘åŸç”Ÿæ¶æ„æ¼”è¿›åŸåˆ™</h3><p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221101103011244.png\"\n                      alt=\"image-20221101103011244\"\n                ></p>\n<h3 id=\"å•ä½“æ¶æ„çš„å±€é™æ€§\"><a href=\"#å•ä½“æ¶æ„çš„å±€é™æ€§\" class=\"headerlink\" title=\"å•ä½“æ¶æ„çš„å±€é™æ€§\"></a>å•ä½“æ¶æ„çš„å±€é™æ€§</h3><p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221101103438322.png\"\n                      alt=\"image-20221101103438322\"\n                ></p>\n<h3 id=\"å¾®æœåŠ¡æ¶æ„\"><a href=\"#å¾®æœåŠ¡æ¶æ„\" class=\"headerlink\" title=\"å¾®æœåŠ¡æ¶æ„\"></a>å¾®æœåŠ¡æ¶æ„</h3><p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221101103721644.png\"\n                      alt=\"image-20221101103721644\"\n                ></p>\n<h3 id=\"sercerlessæ¶æ„\"><a href=\"#sercerlessæ¶æ„\" class=\"headerlink\" title=\"sercerlessæ¶æ„\"></a>sercerlessæ¶æ„</h3><p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221101103848852.png\"\n                      alt=\"image-20221101103848852\"\n                ></p>\n<h3 id=\"serverlesså’Œå¾®æœåŠ¡\"><a href=\"#serverlesså’Œå¾®æœåŠ¡\" class=\"headerlink\" title=\"serverlesså’Œå¾®æœåŠ¡\"></a>serverlesså’Œå¾®æœåŠ¡</h3><p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221101104332149.png\"\n                      alt=\"image-20221101104332149\"\n                ></p>\n<h2 id=\"åä¸ºäº‘åŸç”Ÿè§£å†³æ–¹æ¡ˆ\"><a href=\"#åä¸ºäº‘åŸç”Ÿè§£å†³æ–¹æ¡ˆ\" class=\"headerlink\" title=\"åä¸ºäº‘åŸç”Ÿè§£å†³æ–¹æ¡ˆ\"></a>åä¸ºäº‘åŸç”Ÿè§£å†³æ–¹æ¡ˆ</h2><p>åä¸ºäº‘äº‘åŸç”ŸæœåŠ¡ï¼ŒåŠ é€Ÿä¼ä¸šæ„å»ºäº‘åŸç”Ÿåº”ç”¨</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221101104745201.png\"\n                      alt=\"image-20221101104745201\"\n                ></p>\n<h3 id=\"äº‘åŸç”ŸåŸºç¡€è®¾æ–½\"><a href=\"#äº‘åŸç”ŸåŸºç¡€è®¾æ–½\" class=\"headerlink\" title=\"äº‘åŸç”ŸåŸºç¡€è®¾æ–½\"></a>äº‘åŸç”ŸåŸºç¡€è®¾æ–½</h3><p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221101105037598.png\"\n                      alt=\"image-20221101105037598\"\n                ></p>\n<h3 id=\"å¤šäº‘ç®¡ç†è§£å†³æ–¹æ¡ˆ\"><a href=\"#å¤šäº‘ç®¡ç†è§£å†³æ–¹æ¡ˆ\" class=\"headerlink\" title=\"å¤šäº‘ç®¡ç†è§£å†³æ–¹æ¡ˆ\"></a>å¤šäº‘ç®¡ç†è§£å†³æ–¹æ¡ˆ</h3><p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221101105532179.png\"\n                      alt=\"image-20221101105532179\"\n                ></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221101110039410.png\"\n                      alt=\"image-20221101110039410\"\n                ></p>\n<h3 id=\"è¾¹äº‘ååŒ\"><a href=\"#è¾¹äº‘ååŒ\" class=\"headerlink\" title=\"è¾¹äº‘ååŒ\"></a>è¾¹äº‘ååŒ</h3><p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221101110306683.png\"\n                      alt=\"image-20221101110306683\"\n                ></p>\n<h3 id=\"åä¸ºäº‘DevSecOps\"><a href=\"#åä¸ºäº‘DevSecOps\" class=\"headerlink\" title=\"åä¸ºäº‘DevSecOps\"></a>åä¸ºäº‘DevSecOps</h3><p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221101110615489.png\"\n                      alt=\"image-20221101110615489\"\n                ></p>\n<h3 id=\"åä¸ºè¿ç»´èƒ½åŠ›\"><a href=\"#åä¸ºè¿ç»´èƒ½åŠ›\" class=\"headerlink\" title=\"åä¸ºè¿ç»´èƒ½åŠ›\"></a>åä¸ºè¿ç»´èƒ½åŠ›</h3><p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221101111025420.png\"\n                      alt=\"image-20221101111025420\"\n                ></p>\n<h2 id=\"æœªæ¥è¶‹åŠ¿\"><a href=\"#æœªæ¥è¶‹åŠ¿\" class=\"headerlink\" title=\"æœªæ¥è¶‹åŠ¿\"></a>æœªæ¥è¶‹åŠ¿</h2><p>Kubernetesç¼–æ’ç»Ÿä¸€åŒ–ï¼Œç¼–æ’å¯¹è±¡ä¸æ–­æ‰©å±•å»¶ä¼¸</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221101111315159.png\"\n                      alt=\"image-20221101111315159\"\n                ></p>\n"},{"title":"åœ¨Dockerä¸­éƒ¨ç½²ROS","date":"2022-11-09T14:01:43.000Z","_content":"\n\nâ€”â€”æé«˜å¼€å‘ç¯å¢ƒé²æ£’æ€§\n\n# å®‰è£…ä¹‹å‰\n\n## Dockerå®¹å™¨ä¼šå ç”¨å¤šå¤§å­˜å‚¨ç©ºé—´\n\nDockeré€šè¿‡imagesåˆ›é€ containerï¼Œåœ¨containerä¸­éƒ¨ç½²å’Œå¼€å‘åº”ç”¨ã€‚\n\nROSå®˜æ–¹å·²ç»æä¾›äº†æ”¯æŒDockerçš„ros imagesï¼Œé•œåƒå·²ç»é…ç½®å¥½äº†rosçš„å¼€å‘ç¯å¢ƒã€‚é€šè¿‡å‘½ä»¤docker pull osrf/rosï¼šmelodic-desktop-fullæ‹‰å–é•œåƒï¼Œå¦‚æœæ˜¯åŒ…å«ros-coreçš„é•œåƒï¼Œå¤§æ¦‚æ˜¯400Mï¼Œå¦‚æœåŒ…å«rvizï¼Œgazeboç­‰å…¨å¥—çš„destktop-fullç‰ˆæœ¬ï¼Œå¤§æ¦‚æ˜¯5Gå·¦å³ï¼Œå æ®çš„ç©ºé—´è¿˜æ˜¯å¾ˆå¯è§‚çš„ã€‚\n\næŸ¥çœ‹å®¹å™¨ä¸é•œåƒå¤§å°\n\n>  docker system df -v\n\n![image-20221109153440000](https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221109153440000.png)\n\n## æŸ¥çœ‹dockeré‡Œé¢å¯è§†åŒ–ç•Œé¢\n\nå®¿ä¸»æœºå¼€å¯xhost, ä½¿èƒ½å®¿ä¸»æœºæ¥æ”¶å…¶ä»–å®¢æˆ·ç«¯çš„æ˜¾ç¤ºéœ€æ±‚\n `xhost +`\n\ndockeråˆ›å»ºå®¹å™¨æ—¶å‚æ•°è®¾ç½®xserveræŒ‚è½½åœ°å€å³å¯\n `-e DISPLAY -v /tmp/.X11-unix:/tmp/.X11-unix`\n\n## dockeré‡Œé¢çš„ç¨‹åºå¦‚ä½•ä¸ä¸»æœºçš„ç¨‹åºé€šè®¯\n\né‡‡ç”¨socketé€šä¿¡\n\ndockeråˆ›å»ºå®¹å™¨æ—¶ï¼Œé»˜è®¤åˆ†é…äº†bridgeç½‘ç»œï¼Œè¿™æ ·æ‰€æœ‰çš„å®¹å™¨éƒ½åœ¨åŒä¸€ä¸ªç½‘æ®µï¼Œæ˜¯èƒ½å¤Ÿç›¸äº’é€šä¿¡çš„ã€‚\n\nå¦‚æœæƒ³æŸäº›å®¹å™¨ä¹‹é—´ä¸èƒ½é€šä¿¡ï¼Œé€šè¿‡è‡ªå®šä¹‰ç½‘ç»œå°±èƒ½å®ç°ã€‚\n\nå‡å¦‚å®¿ä¸»æœºæ˜¯linuxç³»ç»Ÿï¼Œæœ‰ä¸€ä¸ªç›‘å¬8000ç«¯å£çš„å…¶ä»–è¿›ç¨‹\n\nåœ¨å®¿ä¸»æœºä¸Šæ‰§è¡Œifconfigå‘½ä»¤ï¼Œå¯ä»¥å‘ç°æœ‰ä¸€ä¸ªdocker0ç½‘å¡ï¼Œæ³¨æ„è§‚å¯Ÿå…¶ç½‘æ®µå’Œdocker network inspect bridgeçš„ç½‘æ®µæ˜¯ä¸€è‡´çš„ï¼Œå®¿ä¸»æœºåœ¨æ­¤ç½‘æ®µä¸‹ä¹Ÿåˆ†é…äº†ä¸€ä¸ªipï¼Œä¸€èˆ¬æ˜¯ç½‘æ®µä¸­çš„ç¬¬ä¸€ä¸ªipï¼Œå‡å¦‚æ˜¯192.168.10.1ã€‚\n\n1ï¼‰å‡å¦‚ç”¨é»˜è®¤çš„bridgeæ¨¡å¼å¯åŠ¨å®¹å™¨ï¼Œå³åœ¨å¯åŠ¨æ—¶ä¸æŒ‡å®šnetworkå‚æ•°æˆ–è€…æŒ‡å®šäº†--network bridgeï¼Œ\n\nåœ¨å®¹å™¨ä¸­æ‰§è¡Œifconfigå‘½ä»¤ï¼Œå¯ä»¥å‘ç°å®¹å™¨çš„ipä¹Ÿåœ¨ä¸Šé¢çš„ç½‘æ®µä¸­ï¼Œå‡å¦‚æ˜¯192.168.10.2ã€‚\n\nåœ¨å®¹å™¨ä¸­ï¼Œping 192.168.10.1ï¼Œå¯ä»¥pingé€šã€‚åœ¨å®¿ä¸»æœºä¸­ping 192.168.10.2ï¼Œå¯ä»¥pingé€šã€‚\n\nåœ¨å®¹å™¨ä¸­ï¼Œå¯ä»¥ç”¨192.168.10.1:portçš„æ–¹å¼è®¿é—®å®¿ä¸»æœºçš„æœåŠ¡ã€‚\n\nç½‘ç»œä¸­çš„å…¶å®ƒä¸»æœºèƒ½å¦pingé€šè¿™äº›å®¹å™¨ï¼Ÿ\n roscoreåœ¨å®¹å™¨ä¸­å¯åŠ¨åï¼Œå®¿ä¸»æœºèƒ½å¦å¯åŠ¨ï¼Ÿå¯ä»¥ï¼Œè¿™ç›¸å½“äºæ˜¯ä¸¤å°ä¸åŒçš„æœºå™¨ï¼Œå¦‚æœå…±äº«ä¸€ä¸ªroscoreï¼Œéœ€è¦è®¾ç½®ä¸¤ä¸ªçš„bashrcï¼Œros_master_urlå‚æ•°ã€‚\n\n2ï¼‰å‡å¦‚å®¹å™¨ç”¨hostç½‘ç»œæ¨¡å¼å¯åŠ¨ï¼Œå³åœ¨å¯åŠ¨æ—¶æ·»åŠ äº†--netwok hostå‚æ•°ï¼Œ\n\né‚£ä¹ˆå®¹å™¨ä¼šå’Œå®¿ä¸»æœºå…±äº«ç½‘ç»œï¼Œç›´æ¥telnet 127.0.0.1 8000å¯ä»¥telneté€šä¿¡ã€‚\n\n# dockerå¯è§†åŒ–\n\ndockerä¸­å¼€å¯GUIåŸç†ï¼š\n xhost æ˜¯ç”¨æ¥æ§åˆ¶X serverè®¿é—®æƒé™çš„ã€‚é€šå¸¸å½“ä½ ä»hostAç™»é™†åˆ°hostBä¸Šè¿è¡ŒhostBä¸Šçš„åº”ç”¨ç¨‹åºæ—¶ï¼Œåšä¸ºåº”ç”¨ç¨‹åºæ¥è¯´ï¼ŒhostAæ˜¯client,ä½†æ˜¯ä½œä¸ºå›¾å½¢æ¥è¯´ï¼Œ**æ˜¯åœ¨hostAä¸Šæ˜¾ç¤ºçš„ï¼Œéœ€è¦ä½¿ç”¨hostAçš„Xserver**,æ‰€ä»¥hostAæ˜¯serverã€‚å› æ­¤åœ¨ç™»é™†åˆ°hostBå‰ï¼Œéœ€è¦åœ¨hostAä¸Šè¿è¡Œxhost +æ¥ä½¿å…¶å®ƒç”¨æˆ·èƒ½å¤Ÿè®¿é—®hostAçš„Xserver.\n\n**æ€»ç»“ï¼šdockerä¸­æ˜¾ç¤ºclienté€šè¿‡æ˜ å°„å°†å¯¹Xserverçš„è¯·æ±‚é€ä¼ åˆ°ä¸»æœºç«¯DISPALYï¼ŒDISPLAYå¯¹åº”ä¸»æœºç«¯çš„æ˜¾ç¤ºæ¥å£ï¼Œä¸»æœºç«¯ä¹Ÿä½¿èƒ½æ¥æ”¶ï¼Œå®Œæˆæ˜¾ç¤ºã€‚**\n\nxhost + **æ˜¯ä½¿æ‰€æœ‰ç”¨æˆ·éƒ½èƒ½è®¿é—®Xserver.**\n xhost + ipä½¿ipä¸Šçš„ç”¨æˆ·èƒ½å¤Ÿè®¿é—®Xserver.\n xhost + nis:user@domainä½¿domainä¸Šçš„nisç”¨æˆ·userèƒ½å¤Ÿè®¿é—®\n xhost + inet:user@domainä½¿domainä¸Šçš„inetç”¨æˆ·èƒ½å¤Ÿè®¿é—®ã€‚\n\n## è¿è¡Œxserver\n\nç»ˆç«¯è¾“å…¥\n`xhost +`\n\n- è‹¥æˆåŠŸå¯åŠ¨ï¼Œåˆ™è·³åˆ°ç¬¬4.2ç»§ç»­æ‰§è¡Œã€‚\n- è‹¥æ˜¾ç¤º`xhost: unable to open display`ï¼Œåˆ™è¯´æ˜æ²¡æœ‰å®‰è£…vncserverã€‚\n\n## å®‰è£…vncserver\n\nè¿›å…¥rootï¼Œç¡®è®¤ä¸‹vncserverç¡®å®æ²¡è£…ï¼ˆæˆ‘ä¹Ÿä¸æ˜ç™½ä¸ºä»€ä¹ˆè¦è¿›å…¥rootï¼Œä½†æ˜¯ç…§åšå°±è¡Œï¼‰\n `su root`\n `vncsever`\n è‹¥æç¤º`bash: vncserver: command not found`åˆ™éœ€è¦å®‰è£…vncã€‚\n\né€€å‡ºrootï¼ˆæˆ–è€…é‡æ–°å¼€ä¸€ä¸ªç»ˆç«¯ï¼‰ï¼Œå®‰è£…vnc\n `sudo apt-get install tigervnc-standalone-server tigervnc-viewer`\n ä¸Šé¢å‘½ä»¤æ˜¯æˆ‘æµ‹è¯•æ²¡é—®é¢˜çš„ï¼Œç½‘ä¸Šè¿˜æœ‰å…¶å®ƒå®‰è£…çš„åŒ…\n\n**å¦‚æœä¸Šé¢çš„å‘½ä»¤èƒ½å®‰è£…å¥½vncï¼Œå°±ä¸ç”¨ä¸‹é¢è¿™äº›äº†\n `sudo apt-get install x11-xserver-utils`\n ä¸Šé¢è¿™ä¸ªåŒ…ç³»ç»Ÿå·²ç»é»˜è®¤è£…å¥½äº†ï¼Œä½†æ˜¯ä»ç„¶ä¸èƒ½æ‰§è¡Œ`xhost +`\n\n`sudo apt install xfce4 xfce4-goodies`\n `sudo apt install tightvncserver`\n ä¸Šé¢è¿™ä¸ªåŒ…æ²¡æœ‰æµ‹è¯•è¿‡ï¼Œæ„Ÿè§‰ä¼¼ä¹å¯ä»¥ã€‚\n\n`sudo apt-get install tigervnc-server`\n ä¸Šé¢è¿™ä¸ªåŒ…æ²¡æœ‰æµ‹è¯•è¿‡ï¼Œæ„Ÿè§‰ä¼¼ä¹ä¹Ÿå¯ä»¥ã€‚\n\nå¦‚æœvncserveræŠ¥é”™ï¼ŒæŸ¥çœ‹æ—¥å¿—æ–‡ä»¶ï¼Œå¹¶é€ä¸ªè§£å†³\n\nå®‰è£…å®Œåå°±æ˜¯é…ç½®VNCï¼Œæ„Ÿè§‰è¿™ä¸ªè®¾ç½®æŒºå¤æ‚çš„ï¼Œé‡‡ç”¨äº†ç½‘ä¸Šæœ€ç®€å•çš„æ“ä½œæ–¹å¼\n\n å®‰è£…å¥½vncåï¼Œè¿›å…¥rootå¯åŠ¨vnc\n `su root`\n `vncserver`\n ç¬¬ä¸€æ¬¡è¿è¡Œä¼šè®©ä½ è¾“å…¥å¾ˆå¤šå¯†ç ï¼Œè¾“å…¥å°±è¡Œï¼Œä¸€è·¯yesï½\n\nå¯åŠ¨å®¹å™¨ï¼Œæµ‹è¯•gazeboå’Œrvizï¼Œéƒ½å¯ä»¥æ­£å¸¸æ‰“å¼€\n\n# å¤šroså®¹å™¨é€šä¿¡\n\n## ç¬¬ä¸€ä¸ªç»ˆç«¯â€”â€”roscoreï¼š\n\nâ‘ dockerå‘½ä»¤æ–°å»ºä¸€ä¸ªå®¹å™¨ï¼ˆå¸¦GUIç¯å¢ƒå˜é‡ï¼‰\n\n```bash\ndocker run -it \\\n    --env=\"DISPLAY\" \\\n    --env=\"QT_X11_NO_MITSHM=1\" \\\n    --volume=\"/tmp/.X11-unix:/tmp/.X11-unix:rw\" \\\n    osrf/ros:kinetic-desktop-full \\\n    /bin/bash\n```\n\nå‘½ä»¤è§£é‡Š\n --env=\"DISPLAY\" ï¼šå¼€å¯æ˜¾ç¤ºGUIç•Œé¢\n --env=\"QT_X11_NO_MITSHM=1\" ï¼šé‡‡ç”¨X11çš„ç«¯å£1è¿›è¡Œæ˜¾ç¤º\n --volume=\"/tmp/.X11-unix:/tmp/.X11-unix:rw\" ï¼šæ˜ å°„æ˜¾ç¤ºæœåŠ¡èŠ‚ç‚¹ç›®å½•\n osrf/ros:kinetic-desktop-fullï¼šå®¹å™¨ä»é•œåƒosrf/ros:kinetic-desktop-fullåˆ›å»º\n /bin/bashï¼šè¿è¡Œå‘½ä»¤bash\n\nâ‘¡åˆ›å»ºå®Œå®¹å™¨åï¼Œå‘½ä»¤è¡Œè‡ªåŠ¨è¿›å…¥äº†dockerï¼Œæ¥ç€è¿è¡Œroscore\n\n`export ROS_MASTER_URI=http://172.17.0.1:11311`\n\n`export ROS_IP=172.17.0.1`\n\n`source /opt/ros/kinetic/setup.bash`\n`roscore`\n\n## ç¬¬äºŒä¸ªç»ˆç«¯â€”â€”turtlesim_node\n\nâ‘ å…ˆæŸ¥çœ‹ä¹‹å‰æ–°å»ºçš„å®¹å™¨åç§°\n `docker ps --all`\n â‘¡è¿›å…¥å®¹å™¨ä¸­\n `docker exec -it <container_name> /bin/bash`\n â‘¢è¿è¡Œturtlesim_node\n\n`export ROS_MASTER_URI=http://172.17.0.1:11311`\n\n`export ROS_IP=172.17.0.2`\n\n `source /opt/ros/kinetic/setup.bash`\n `rosrun turtlesim turtlesim_node`\n\n![image-20221109220609929](https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221109220609929.png)\n\n## ç¬¬ä¸‰ä¸ªç»ˆç«¯â€”â€”é”®ç›˜æ§åˆ¶ï¼š\n\n â‘ è¿›å…¥åŒä¸€ä¸ªå®¹å™¨ä¸­\n `docker exec -it <container_name> /bin/bash`\n `source /opt/ros/kinetic/setup.bash`\n â‘¡è¿è¡Œé¥æ§é”®ç›˜\n\n`export ROS_MASTER_URI=http://172.17.0.1:11311`\n\n`export ROS_IP=172.17.0.3`\n\n`rosrun turtlesim turtle_teleop_key`\n æ­¤æ—¶å³å¯æ§åˆ¶å°æµ·é¾Ÿè¿åŠ¨\n\n![image-20221109220621036](https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221109220621036.png)\n\n\n\n","source":"_posts/2022/11/åœ¨Dockerä¸­éƒ¨ç½²ROS.md","raw":"---\ntitle: åœ¨Dockerä¸­éƒ¨ç½²ROS\ndate: 2022-11-09 22:01:43\ntags: [Docker, ros]\ncategories: [ç¬”è®°]\n---\n\n\nâ€”â€”æé«˜å¼€å‘ç¯å¢ƒé²æ£’æ€§\n\n# å®‰è£…ä¹‹å‰\n\n## Dockerå®¹å™¨ä¼šå ç”¨å¤šå¤§å­˜å‚¨ç©ºé—´\n\nDockeré€šè¿‡imagesåˆ›é€ containerï¼Œåœ¨containerä¸­éƒ¨ç½²å’Œå¼€å‘åº”ç”¨ã€‚\n\nROSå®˜æ–¹å·²ç»æä¾›äº†æ”¯æŒDockerçš„ros imagesï¼Œé•œåƒå·²ç»é…ç½®å¥½äº†rosçš„å¼€å‘ç¯å¢ƒã€‚é€šè¿‡å‘½ä»¤docker pull osrf/rosï¼šmelodic-desktop-fullæ‹‰å–é•œåƒï¼Œå¦‚æœæ˜¯åŒ…å«ros-coreçš„é•œåƒï¼Œå¤§æ¦‚æ˜¯400Mï¼Œå¦‚æœåŒ…å«rvizï¼Œgazeboç­‰å…¨å¥—çš„destktop-fullç‰ˆæœ¬ï¼Œå¤§æ¦‚æ˜¯5Gå·¦å³ï¼Œå æ®çš„ç©ºé—´è¿˜æ˜¯å¾ˆå¯è§‚çš„ã€‚\n\næŸ¥çœ‹å®¹å™¨ä¸é•œåƒå¤§å°\n\n>  docker system df -v\n\n![image-20221109153440000](https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221109153440000.png)\n\n## æŸ¥çœ‹dockeré‡Œé¢å¯è§†åŒ–ç•Œé¢\n\nå®¿ä¸»æœºå¼€å¯xhost, ä½¿èƒ½å®¿ä¸»æœºæ¥æ”¶å…¶ä»–å®¢æˆ·ç«¯çš„æ˜¾ç¤ºéœ€æ±‚\n `xhost +`\n\ndockeråˆ›å»ºå®¹å™¨æ—¶å‚æ•°è®¾ç½®xserveræŒ‚è½½åœ°å€å³å¯\n `-e DISPLAY -v /tmp/.X11-unix:/tmp/.X11-unix`\n\n## dockeré‡Œé¢çš„ç¨‹åºå¦‚ä½•ä¸ä¸»æœºçš„ç¨‹åºé€šè®¯\n\né‡‡ç”¨socketé€šä¿¡\n\ndockeråˆ›å»ºå®¹å™¨æ—¶ï¼Œé»˜è®¤åˆ†é…äº†bridgeç½‘ç»œï¼Œè¿™æ ·æ‰€æœ‰çš„å®¹å™¨éƒ½åœ¨åŒä¸€ä¸ªç½‘æ®µï¼Œæ˜¯èƒ½å¤Ÿç›¸äº’é€šä¿¡çš„ã€‚\n\nå¦‚æœæƒ³æŸäº›å®¹å™¨ä¹‹é—´ä¸èƒ½é€šä¿¡ï¼Œé€šè¿‡è‡ªå®šä¹‰ç½‘ç»œå°±èƒ½å®ç°ã€‚\n\nå‡å¦‚å®¿ä¸»æœºæ˜¯linuxç³»ç»Ÿï¼Œæœ‰ä¸€ä¸ªç›‘å¬8000ç«¯å£çš„å…¶ä»–è¿›ç¨‹\n\nåœ¨å®¿ä¸»æœºä¸Šæ‰§è¡Œifconfigå‘½ä»¤ï¼Œå¯ä»¥å‘ç°æœ‰ä¸€ä¸ªdocker0ç½‘å¡ï¼Œæ³¨æ„è§‚å¯Ÿå…¶ç½‘æ®µå’Œdocker network inspect bridgeçš„ç½‘æ®µæ˜¯ä¸€è‡´çš„ï¼Œå®¿ä¸»æœºåœ¨æ­¤ç½‘æ®µä¸‹ä¹Ÿåˆ†é…äº†ä¸€ä¸ªipï¼Œä¸€èˆ¬æ˜¯ç½‘æ®µä¸­çš„ç¬¬ä¸€ä¸ªipï¼Œå‡å¦‚æ˜¯192.168.10.1ã€‚\n\n1ï¼‰å‡å¦‚ç”¨é»˜è®¤çš„bridgeæ¨¡å¼å¯åŠ¨å®¹å™¨ï¼Œå³åœ¨å¯åŠ¨æ—¶ä¸æŒ‡å®šnetworkå‚æ•°æˆ–è€…æŒ‡å®šäº†--network bridgeï¼Œ\n\nåœ¨å®¹å™¨ä¸­æ‰§è¡Œifconfigå‘½ä»¤ï¼Œå¯ä»¥å‘ç°å®¹å™¨çš„ipä¹Ÿåœ¨ä¸Šé¢çš„ç½‘æ®µä¸­ï¼Œå‡å¦‚æ˜¯192.168.10.2ã€‚\n\nåœ¨å®¹å™¨ä¸­ï¼Œping 192.168.10.1ï¼Œå¯ä»¥pingé€šã€‚åœ¨å®¿ä¸»æœºä¸­ping 192.168.10.2ï¼Œå¯ä»¥pingé€šã€‚\n\nåœ¨å®¹å™¨ä¸­ï¼Œå¯ä»¥ç”¨192.168.10.1:portçš„æ–¹å¼è®¿é—®å®¿ä¸»æœºçš„æœåŠ¡ã€‚\n\nç½‘ç»œä¸­çš„å…¶å®ƒä¸»æœºèƒ½å¦pingé€šè¿™äº›å®¹å™¨ï¼Ÿ\n roscoreåœ¨å®¹å™¨ä¸­å¯åŠ¨åï¼Œå®¿ä¸»æœºèƒ½å¦å¯åŠ¨ï¼Ÿå¯ä»¥ï¼Œè¿™ç›¸å½“äºæ˜¯ä¸¤å°ä¸åŒçš„æœºå™¨ï¼Œå¦‚æœå…±äº«ä¸€ä¸ªroscoreï¼Œéœ€è¦è®¾ç½®ä¸¤ä¸ªçš„bashrcï¼Œros_master_urlå‚æ•°ã€‚\n\n2ï¼‰å‡å¦‚å®¹å™¨ç”¨hostç½‘ç»œæ¨¡å¼å¯åŠ¨ï¼Œå³åœ¨å¯åŠ¨æ—¶æ·»åŠ äº†--netwok hostå‚æ•°ï¼Œ\n\né‚£ä¹ˆå®¹å™¨ä¼šå’Œå®¿ä¸»æœºå…±äº«ç½‘ç»œï¼Œç›´æ¥telnet 127.0.0.1 8000å¯ä»¥telneté€šä¿¡ã€‚\n\n# dockerå¯è§†åŒ–\n\ndockerä¸­å¼€å¯GUIåŸç†ï¼š\n xhost æ˜¯ç”¨æ¥æ§åˆ¶X serverè®¿é—®æƒé™çš„ã€‚é€šå¸¸å½“ä½ ä»hostAç™»é™†åˆ°hostBä¸Šè¿è¡ŒhostBä¸Šçš„åº”ç”¨ç¨‹åºæ—¶ï¼Œåšä¸ºåº”ç”¨ç¨‹åºæ¥è¯´ï¼ŒhostAæ˜¯client,ä½†æ˜¯ä½œä¸ºå›¾å½¢æ¥è¯´ï¼Œ**æ˜¯åœ¨hostAä¸Šæ˜¾ç¤ºçš„ï¼Œéœ€è¦ä½¿ç”¨hostAçš„Xserver**,æ‰€ä»¥hostAæ˜¯serverã€‚å› æ­¤åœ¨ç™»é™†åˆ°hostBå‰ï¼Œéœ€è¦åœ¨hostAä¸Šè¿è¡Œxhost +æ¥ä½¿å…¶å®ƒç”¨æˆ·èƒ½å¤Ÿè®¿é—®hostAçš„Xserver.\n\n**æ€»ç»“ï¼šdockerä¸­æ˜¾ç¤ºclienté€šè¿‡æ˜ å°„å°†å¯¹Xserverçš„è¯·æ±‚é€ä¼ åˆ°ä¸»æœºç«¯DISPALYï¼ŒDISPLAYå¯¹åº”ä¸»æœºç«¯çš„æ˜¾ç¤ºæ¥å£ï¼Œä¸»æœºç«¯ä¹Ÿä½¿èƒ½æ¥æ”¶ï¼Œå®Œæˆæ˜¾ç¤ºã€‚**\n\nxhost + **æ˜¯ä½¿æ‰€æœ‰ç”¨æˆ·éƒ½èƒ½è®¿é—®Xserver.**\n xhost + ipä½¿ipä¸Šçš„ç”¨æˆ·èƒ½å¤Ÿè®¿é—®Xserver.\n xhost + nis:user@domainä½¿domainä¸Šçš„nisç”¨æˆ·userèƒ½å¤Ÿè®¿é—®\n xhost + inet:user@domainä½¿domainä¸Šçš„inetç”¨æˆ·èƒ½å¤Ÿè®¿é—®ã€‚\n\n## è¿è¡Œxserver\n\nç»ˆç«¯è¾“å…¥\n`xhost +`\n\n- è‹¥æˆåŠŸå¯åŠ¨ï¼Œåˆ™è·³åˆ°ç¬¬4.2ç»§ç»­æ‰§è¡Œã€‚\n- è‹¥æ˜¾ç¤º`xhost: unable to open display`ï¼Œåˆ™è¯´æ˜æ²¡æœ‰å®‰è£…vncserverã€‚\n\n## å®‰è£…vncserver\n\nè¿›å…¥rootï¼Œç¡®è®¤ä¸‹vncserverç¡®å®æ²¡è£…ï¼ˆæˆ‘ä¹Ÿä¸æ˜ç™½ä¸ºä»€ä¹ˆè¦è¿›å…¥rootï¼Œä½†æ˜¯ç…§åšå°±è¡Œï¼‰\n `su root`\n `vncsever`\n è‹¥æç¤º`bash: vncserver: command not found`åˆ™éœ€è¦å®‰è£…vncã€‚\n\né€€å‡ºrootï¼ˆæˆ–è€…é‡æ–°å¼€ä¸€ä¸ªç»ˆç«¯ï¼‰ï¼Œå®‰è£…vnc\n `sudo apt-get install tigervnc-standalone-server tigervnc-viewer`\n ä¸Šé¢å‘½ä»¤æ˜¯æˆ‘æµ‹è¯•æ²¡é—®é¢˜çš„ï¼Œç½‘ä¸Šè¿˜æœ‰å…¶å®ƒå®‰è£…çš„åŒ…\n\n**å¦‚æœä¸Šé¢çš„å‘½ä»¤èƒ½å®‰è£…å¥½vncï¼Œå°±ä¸ç”¨ä¸‹é¢è¿™äº›äº†\n `sudo apt-get install x11-xserver-utils`\n ä¸Šé¢è¿™ä¸ªåŒ…ç³»ç»Ÿå·²ç»é»˜è®¤è£…å¥½äº†ï¼Œä½†æ˜¯ä»ç„¶ä¸èƒ½æ‰§è¡Œ`xhost +`\n\n`sudo apt install xfce4 xfce4-goodies`\n `sudo apt install tightvncserver`\n ä¸Šé¢è¿™ä¸ªåŒ…æ²¡æœ‰æµ‹è¯•è¿‡ï¼Œæ„Ÿè§‰ä¼¼ä¹å¯ä»¥ã€‚\n\n`sudo apt-get install tigervnc-server`\n ä¸Šé¢è¿™ä¸ªåŒ…æ²¡æœ‰æµ‹è¯•è¿‡ï¼Œæ„Ÿè§‰ä¼¼ä¹ä¹Ÿå¯ä»¥ã€‚\n\nå¦‚æœvncserveræŠ¥é”™ï¼ŒæŸ¥çœ‹æ—¥å¿—æ–‡ä»¶ï¼Œå¹¶é€ä¸ªè§£å†³\n\nå®‰è£…å®Œåå°±æ˜¯é…ç½®VNCï¼Œæ„Ÿè§‰è¿™ä¸ªè®¾ç½®æŒºå¤æ‚çš„ï¼Œé‡‡ç”¨äº†ç½‘ä¸Šæœ€ç®€å•çš„æ“ä½œæ–¹å¼\n\n å®‰è£…å¥½vncåï¼Œè¿›å…¥rootå¯åŠ¨vnc\n `su root`\n `vncserver`\n ç¬¬ä¸€æ¬¡è¿è¡Œä¼šè®©ä½ è¾“å…¥å¾ˆå¤šå¯†ç ï¼Œè¾“å…¥å°±è¡Œï¼Œä¸€è·¯yesï½\n\nå¯åŠ¨å®¹å™¨ï¼Œæµ‹è¯•gazeboå’Œrvizï¼Œéƒ½å¯ä»¥æ­£å¸¸æ‰“å¼€\n\n# å¤šroså®¹å™¨é€šä¿¡\n\n## ç¬¬ä¸€ä¸ªç»ˆç«¯â€”â€”roscoreï¼š\n\nâ‘ dockerå‘½ä»¤æ–°å»ºä¸€ä¸ªå®¹å™¨ï¼ˆå¸¦GUIç¯å¢ƒå˜é‡ï¼‰\n\n```bash\ndocker run -it \\\n    --env=\"DISPLAY\" \\\n    --env=\"QT_X11_NO_MITSHM=1\" \\\n    --volume=\"/tmp/.X11-unix:/tmp/.X11-unix:rw\" \\\n    osrf/ros:kinetic-desktop-full \\\n    /bin/bash\n```\n\nå‘½ä»¤è§£é‡Š\n --env=\"DISPLAY\" ï¼šå¼€å¯æ˜¾ç¤ºGUIç•Œé¢\n --env=\"QT_X11_NO_MITSHM=1\" ï¼šé‡‡ç”¨X11çš„ç«¯å£1è¿›è¡Œæ˜¾ç¤º\n --volume=\"/tmp/.X11-unix:/tmp/.X11-unix:rw\" ï¼šæ˜ å°„æ˜¾ç¤ºæœåŠ¡èŠ‚ç‚¹ç›®å½•\n osrf/ros:kinetic-desktop-fullï¼šå®¹å™¨ä»é•œåƒosrf/ros:kinetic-desktop-fullåˆ›å»º\n /bin/bashï¼šè¿è¡Œå‘½ä»¤bash\n\nâ‘¡åˆ›å»ºå®Œå®¹å™¨åï¼Œå‘½ä»¤è¡Œè‡ªåŠ¨è¿›å…¥äº†dockerï¼Œæ¥ç€è¿è¡Œroscore\n\n`export ROS_MASTER_URI=http://172.17.0.1:11311`\n\n`export ROS_IP=172.17.0.1`\n\n`source /opt/ros/kinetic/setup.bash`\n`roscore`\n\n## ç¬¬äºŒä¸ªç»ˆç«¯â€”â€”turtlesim_node\n\nâ‘ å…ˆæŸ¥çœ‹ä¹‹å‰æ–°å»ºçš„å®¹å™¨åç§°\n `docker ps --all`\n â‘¡è¿›å…¥å®¹å™¨ä¸­\n `docker exec -it <container_name> /bin/bash`\n â‘¢è¿è¡Œturtlesim_node\n\n`export ROS_MASTER_URI=http://172.17.0.1:11311`\n\n`export ROS_IP=172.17.0.2`\n\n `source /opt/ros/kinetic/setup.bash`\n `rosrun turtlesim turtlesim_node`\n\n![image-20221109220609929](https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221109220609929.png)\n\n## ç¬¬ä¸‰ä¸ªç»ˆç«¯â€”â€”é”®ç›˜æ§åˆ¶ï¼š\n\n â‘ è¿›å…¥åŒä¸€ä¸ªå®¹å™¨ä¸­\n `docker exec -it <container_name> /bin/bash`\n `source /opt/ros/kinetic/setup.bash`\n â‘¡è¿è¡Œé¥æ§é”®ç›˜\n\n`export ROS_MASTER_URI=http://172.17.0.1:11311`\n\n`export ROS_IP=172.17.0.3`\n\n`rosrun turtlesim turtle_teleop_key`\n æ­¤æ—¶å³å¯æ§åˆ¶å°æµ·é¾Ÿè¿åŠ¨\n\n![image-20221109220621036](https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221109220621036.png)\n\n\n\n","slug":"åœ¨Dockerä¸­éƒ¨ç½²ROS","published":1,"updated":"2022-11-14T14:29:36.373Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clas9ert4001fdk8f4ys751g5","content":"<p>â€”â€”æé«˜å¼€å‘ç¯å¢ƒé²æ£’æ€§</p>\n<h1 id=\"å®‰è£…ä¹‹å‰\"><a href=\"#å®‰è£…ä¹‹å‰\" class=\"headerlink\" title=\"å®‰è£…ä¹‹å‰\"></a>å®‰è£…ä¹‹å‰</h1><h2 id=\"Dockerå®¹å™¨ä¼šå ç”¨å¤šå¤§å­˜å‚¨ç©ºé—´\"><a href=\"#Dockerå®¹å™¨ä¼šå ç”¨å¤šå¤§å­˜å‚¨ç©ºé—´\" class=\"headerlink\" title=\"Dockerå®¹å™¨ä¼šå ç”¨å¤šå¤§å­˜å‚¨ç©ºé—´\"></a>Dockerå®¹å™¨ä¼šå ç”¨å¤šå¤§å­˜å‚¨ç©ºé—´</h2><p>Dockeré€šè¿‡imagesåˆ›é€ containerï¼Œåœ¨containerä¸­éƒ¨ç½²å’Œå¼€å‘åº”ç”¨ã€‚</p>\n<p>ROSå®˜æ–¹å·²ç»æä¾›äº†æ”¯æŒDockerçš„ros imagesï¼Œé•œåƒå·²ç»é…ç½®å¥½äº†rosçš„å¼€å‘ç¯å¢ƒã€‚é€šè¿‡å‘½ä»¤docker pull osrf&#x2F;rosï¼šmelodic-desktop-fullæ‹‰å–é•œåƒï¼Œå¦‚æœæ˜¯åŒ…å«ros-coreçš„é•œåƒï¼Œå¤§æ¦‚æ˜¯400Mï¼Œå¦‚æœåŒ…å«rvizï¼Œgazeboç­‰å…¨å¥—çš„destktop-fullç‰ˆæœ¬ï¼Œå¤§æ¦‚æ˜¯5Gå·¦å³ï¼Œå æ®çš„ç©ºé—´è¿˜æ˜¯å¾ˆå¯è§‚çš„ã€‚</p>\n<p>æŸ¥çœ‹å®¹å™¨ä¸é•œåƒå¤§å°</p>\n<blockquote>\n<p> docker system df -v</p>\n</blockquote>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221109153440000.png\"\n                      alt=\"image-20221109153440000\"\n                ></p>\n<h2 id=\"æŸ¥çœ‹dockeré‡Œé¢å¯è§†åŒ–ç•Œé¢\"><a href=\"#æŸ¥çœ‹dockeré‡Œé¢å¯è§†åŒ–ç•Œé¢\" class=\"headerlink\" title=\"æŸ¥çœ‹dockeré‡Œé¢å¯è§†åŒ–ç•Œé¢\"></a>æŸ¥çœ‹dockeré‡Œé¢å¯è§†åŒ–ç•Œé¢</h2><p>å®¿ä¸»æœºå¼€å¯xhost, ä½¿èƒ½å®¿ä¸»æœºæ¥æ”¶å…¶ä»–å®¢æˆ·ç«¯çš„æ˜¾ç¤ºéœ€æ±‚<br> <code>xhost +</code></p>\n<p>dockeråˆ›å»ºå®¹å™¨æ—¶å‚æ•°è®¾ç½®xserveræŒ‚è½½åœ°å€å³å¯<br> <code>-e DISPLAY -v /tmp/.X11-unix:/tmp/.X11-unix</code></p>\n<h2 id=\"dockeré‡Œé¢çš„ç¨‹åºå¦‚ä½•ä¸ä¸»æœºçš„ç¨‹åºé€šè®¯\"><a href=\"#dockeré‡Œé¢çš„ç¨‹åºå¦‚ä½•ä¸ä¸»æœºçš„ç¨‹åºé€šè®¯\" class=\"headerlink\" title=\"dockeré‡Œé¢çš„ç¨‹åºå¦‚ä½•ä¸ä¸»æœºçš„ç¨‹åºé€šè®¯\"></a>dockeré‡Œé¢çš„ç¨‹åºå¦‚ä½•ä¸ä¸»æœºçš„ç¨‹åºé€šè®¯</h2><p>é‡‡ç”¨socketé€šä¿¡</p>\n<p>dockeråˆ›å»ºå®¹å™¨æ—¶ï¼Œé»˜è®¤åˆ†é…äº†bridgeç½‘ç»œï¼Œè¿™æ ·æ‰€æœ‰çš„å®¹å™¨éƒ½åœ¨åŒä¸€ä¸ªç½‘æ®µï¼Œæ˜¯èƒ½å¤Ÿç›¸äº’é€šä¿¡çš„ã€‚</p>\n<p>å¦‚æœæƒ³æŸäº›å®¹å™¨ä¹‹é—´ä¸èƒ½é€šä¿¡ï¼Œé€šè¿‡è‡ªå®šä¹‰ç½‘ç»œå°±èƒ½å®ç°ã€‚</p>\n<p>å‡å¦‚å®¿ä¸»æœºæ˜¯linuxç³»ç»Ÿï¼Œæœ‰ä¸€ä¸ªç›‘å¬8000ç«¯å£çš„å…¶ä»–è¿›ç¨‹</p>\n<p>åœ¨å®¿ä¸»æœºä¸Šæ‰§è¡Œifconfigå‘½ä»¤ï¼Œå¯ä»¥å‘ç°æœ‰ä¸€ä¸ªdocker0ç½‘å¡ï¼Œæ³¨æ„è§‚å¯Ÿå…¶ç½‘æ®µå’Œdocker network inspect bridgeçš„ç½‘æ®µæ˜¯ä¸€è‡´çš„ï¼Œå®¿ä¸»æœºåœ¨æ­¤ç½‘æ®µä¸‹ä¹Ÿåˆ†é…äº†ä¸€ä¸ªipï¼Œä¸€èˆ¬æ˜¯ç½‘æ®µä¸­çš„ç¬¬ä¸€ä¸ªipï¼Œå‡å¦‚æ˜¯192.168.10.1ã€‚</p>\n<p>1ï¼‰å‡å¦‚ç”¨é»˜è®¤çš„bridgeæ¨¡å¼å¯åŠ¨å®¹å™¨ï¼Œå³åœ¨å¯åŠ¨æ—¶ä¸æŒ‡å®šnetworkå‚æ•°æˆ–è€…æŒ‡å®šäº†â€“network bridgeï¼Œ</p>\n<p>åœ¨å®¹å™¨ä¸­æ‰§è¡Œifconfigå‘½ä»¤ï¼Œå¯ä»¥å‘ç°å®¹å™¨çš„ipä¹Ÿåœ¨ä¸Šé¢çš„ç½‘æ®µä¸­ï¼Œå‡å¦‚æ˜¯192.168.10.2ã€‚</p>\n<p>åœ¨å®¹å™¨ä¸­ï¼Œping 192.168.10.1ï¼Œå¯ä»¥pingé€šã€‚åœ¨å®¿ä¸»æœºä¸­ping 192.168.10.2ï¼Œå¯ä»¥pingé€šã€‚</p>\n<p>åœ¨å®¹å™¨ä¸­ï¼Œå¯ä»¥ç”¨192.168.10.1:portçš„æ–¹å¼è®¿é—®å®¿ä¸»æœºçš„æœåŠ¡ã€‚</p>\n<p>ç½‘ç»œä¸­çš„å…¶å®ƒä¸»æœºèƒ½å¦pingé€šè¿™äº›å®¹å™¨ï¼Ÿ<br> roscoreåœ¨å®¹å™¨ä¸­å¯åŠ¨åï¼Œå®¿ä¸»æœºèƒ½å¦å¯åŠ¨ï¼Ÿå¯ä»¥ï¼Œè¿™ç›¸å½“äºæ˜¯ä¸¤å°ä¸åŒçš„æœºå™¨ï¼Œå¦‚æœå…±äº«ä¸€ä¸ªroscoreï¼Œéœ€è¦è®¾ç½®ä¸¤ä¸ªçš„bashrcï¼Œros_master_urlå‚æ•°ã€‚</p>\n<p>2ï¼‰å‡å¦‚å®¹å™¨ç”¨hostç½‘ç»œæ¨¡å¼å¯åŠ¨ï¼Œå³åœ¨å¯åŠ¨æ—¶æ·»åŠ äº†â€“netwok hostå‚æ•°ï¼Œ</p>\n<p>é‚£ä¹ˆå®¹å™¨ä¼šå’Œå®¿ä¸»æœºå…±äº«ç½‘ç»œï¼Œç›´æ¥telnet 127.0.0.1 8000å¯ä»¥telneté€šä¿¡ã€‚</p>\n<h1 id=\"dockerå¯è§†åŒ–\"><a href=\"#dockerå¯è§†åŒ–\" class=\"headerlink\" title=\"dockerå¯è§†åŒ–\"></a>dockerå¯è§†åŒ–</h1><p>dockerä¸­å¼€å¯GUIåŸç†ï¼š<br> xhost æ˜¯ç”¨æ¥æ§åˆ¶X serverè®¿é—®æƒé™çš„ã€‚é€šå¸¸å½“ä½ ä»hostAç™»é™†åˆ°hostBä¸Šè¿è¡ŒhostBä¸Šçš„åº”ç”¨ç¨‹åºæ—¶ï¼Œåšä¸ºåº”ç”¨ç¨‹åºæ¥è¯´ï¼ŒhostAæ˜¯client,ä½†æ˜¯ä½œä¸ºå›¾å½¢æ¥è¯´ï¼Œ<strong>æ˜¯åœ¨hostAä¸Šæ˜¾ç¤ºçš„ï¼Œéœ€è¦ä½¿ç”¨hostAçš„Xserver</strong>,æ‰€ä»¥hostAæ˜¯serverã€‚å› æ­¤åœ¨ç™»é™†åˆ°hostBå‰ï¼Œéœ€è¦åœ¨hostAä¸Šè¿è¡Œxhost +æ¥ä½¿å…¶å®ƒç”¨æˆ·èƒ½å¤Ÿè®¿é—®hostAçš„Xserver.</p>\n<p><strong>æ€»ç»“ï¼šdockerä¸­æ˜¾ç¤ºclienté€šè¿‡æ˜ å°„å°†å¯¹Xserverçš„è¯·æ±‚é€ä¼ åˆ°ä¸»æœºç«¯DISPALYï¼ŒDISPLAYå¯¹åº”ä¸»æœºç«¯çš„æ˜¾ç¤ºæ¥å£ï¼Œä¸»æœºç«¯ä¹Ÿä½¿èƒ½æ¥æ”¶ï¼Œå®Œæˆæ˜¾ç¤ºã€‚</strong></p>\n<p>xhost + <strong>æ˜¯ä½¿æ‰€æœ‰ç”¨æˆ·éƒ½èƒ½è®¿é—®Xserver.</strong><br> xhost + ipä½¿ipä¸Šçš„ç”¨æˆ·èƒ½å¤Ÿè®¿é—®Xserver.<br> xhost + nis:user@domainä½¿domainä¸Šçš„nisç”¨æˆ·userèƒ½å¤Ÿè®¿é—®<br> xhost + inet:user@domainä½¿domainä¸Šçš„inetç”¨æˆ·èƒ½å¤Ÿè®¿é—®ã€‚</p>\n<h2 id=\"è¿è¡Œxserver\"><a href=\"#è¿è¡Œxserver\" class=\"headerlink\" title=\"è¿è¡Œxserver\"></a>è¿è¡Œxserver</h2><p>ç»ˆç«¯è¾“å…¥<br><code>xhost +</code></p>\n<ul>\n<li>è‹¥æˆåŠŸå¯åŠ¨ï¼Œåˆ™è·³åˆ°ç¬¬4.2ç»§ç»­æ‰§è¡Œã€‚</li>\n<li>è‹¥æ˜¾ç¤º<code>xhost: unable to open display</code>ï¼Œåˆ™è¯´æ˜æ²¡æœ‰å®‰è£…vncserverã€‚</li>\n</ul>\n<h2 id=\"å®‰è£…vncserver\"><a href=\"#å®‰è£…vncserver\" class=\"headerlink\" title=\"å®‰è£…vncserver\"></a>å®‰è£…vncserver</h2><p>è¿›å…¥rootï¼Œç¡®è®¤ä¸‹vncserverç¡®å®æ²¡è£…ï¼ˆæˆ‘ä¹Ÿä¸æ˜ç™½ä¸ºä»€ä¹ˆè¦è¿›å…¥rootï¼Œä½†æ˜¯ç…§åšå°±è¡Œï¼‰<br> <code>su root</code><br> <code>vncsever</code><br> è‹¥æç¤º<code>bash: vncserver: command not found</code>åˆ™éœ€è¦å®‰è£…vncã€‚</p>\n<p>é€€å‡ºrootï¼ˆæˆ–è€…é‡æ–°å¼€ä¸€ä¸ªç»ˆç«¯ï¼‰ï¼Œå®‰è£…vnc<br> <code>sudo apt-get install tigervnc-standalone-server tigervnc-viewer</code><br> ä¸Šé¢å‘½ä»¤æ˜¯æˆ‘æµ‹è¯•æ²¡é—®é¢˜çš„ï¼Œç½‘ä¸Šè¿˜æœ‰å…¶å®ƒå®‰è£…çš„åŒ…</p>\n<p>**å¦‚æœä¸Šé¢çš„å‘½ä»¤èƒ½å®‰è£…å¥½vncï¼Œå°±ä¸ç”¨ä¸‹é¢è¿™äº›äº†<br> <code>sudo apt-get install x11-xserver-utils</code><br> ä¸Šé¢è¿™ä¸ªåŒ…ç³»ç»Ÿå·²ç»é»˜è®¤è£…å¥½äº†ï¼Œä½†æ˜¯ä»ç„¶ä¸èƒ½æ‰§è¡Œ<code>xhost +</code></p>\n<p><code>sudo apt install xfce4 xfce4-goodies</code><br> <code>sudo apt install tightvncserver</code><br> ä¸Šé¢è¿™ä¸ªåŒ…æ²¡æœ‰æµ‹è¯•è¿‡ï¼Œæ„Ÿè§‰ä¼¼ä¹å¯ä»¥ã€‚</p>\n<p><code>sudo apt-get install tigervnc-server</code><br> ä¸Šé¢è¿™ä¸ªåŒ…æ²¡æœ‰æµ‹è¯•è¿‡ï¼Œæ„Ÿè§‰ä¼¼ä¹ä¹Ÿå¯ä»¥ã€‚</p>\n<p>å¦‚æœvncserveræŠ¥é”™ï¼ŒæŸ¥çœ‹æ—¥å¿—æ–‡ä»¶ï¼Œå¹¶é€ä¸ªè§£å†³</p>\n<p>å®‰è£…å®Œåå°±æ˜¯é…ç½®VNCï¼Œæ„Ÿè§‰è¿™ä¸ªè®¾ç½®æŒºå¤æ‚çš„ï¼Œé‡‡ç”¨äº†ç½‘ä¸Šæœ€ç®€å•çš„æ“ä½œæ–¹å¼</p>\n<p> å®‰è£…å¥½vncåï¼Œè¿›å…¥rootå¯åŠ¨vnc<br> <code>su root</code><br> <code>vncserver</code><br> ç¬¬ä¸€æ¬¡è¿è¡Œä¼šè®©ä½ è¾“å…¥å¾ˆå¤šå¯†ç ï¼Œè¾“å…¥å°±è¡Œï¼Œä¸€è·¯yesï½</p>\n<p>å¯åŠ¨å®¹å™¨ï¼Œæµ‹è¯•gazeboå’Œrvizï¼Œéƒ½å¯ä»¥æ­£å¸¸æ‰“å¼€</p>\n<h1 id=\"å¤šroså®¹å™¨é€šä¿¡\"><a href=\"#å¤šroså®¹å™¨é€šä¿¡\" class=\"headerlink\" title=\"å¤šroså®¹å™¨é€šä¿¡\"></a>å¤šroså®¹å™¨é€šä¿¡</h1><h2 id=\"ç¬¬ä¸€ä¸ªç»ˆç«¯â€”â€”roscoreï¼š\"><a href=\"#ç¬¬ä¸€ä¸ªç»ˆç«¯â€”â€”roscoreï¼š\" class=\"headerlink\" title=\"ç¬¬ä¸€ä¸ªç»ˆç«¯â€”â€”roscoreï¼š\"></a>ç¬¬ä¸€ä¸ªç»ˆç«¯â€”â€”roscoreï¼š</h2><p>â‘ dockerå‘½ä»¤æ–°å»ºä¸€ä¸ªå®¹å™¨ï¼ˆå¸¦GUIç¯å¢ƒå˜é‡ï¼‰</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker run -it \\</span><br><span class=\"line\">    --<span class=\"built_in\">env</span>=<span class=\"string\">&quot;DISPLAY&quot;</span> \\</span><br><span class=\"line\">    --<span class=\"built_in\">env</span>=<span class=\"string\">&quot;QT_X11_NO_MITSHM=1&quot;</span> \\</span><br><span class=\"line\">    --volume=<span class=\"string\">&quot;/tmp/.X11-unix:/tmp/.X11-unix:rw&quot;</span> \\</span><br><span class=\"line\">    osrf/ros:kinetic-desktop-full \\</span><br><span class=\"line\">    /bin/bash</span><br></pre></td></tr></table></figure>\n\n<p>å‘½ä»¤è§£é‡Š<br> â€“env&#x3D;â€DISPLAYâ€ ï¼šå¼€å¯æ˜¾ç¤ºGUIç•Œé¢<br> â€“env&#x3D;â€QT_X11_NO_MITSHM&#x3D;1â€ ï¼šé‡‡ç”¨X11çš„ç«¯å£1è¿›è¡Œæ˜¾ç¤º<br> â€“volume&#x3D;â€&#x2F;tmp&#x2F;.X11-unix:&#x2F;tmp&#x2F;.X11-unix:rwâ€ ï¼šæ˜ å°„æ˜¾ç¤ºæœåŠ¡èŠ‚ç‚¹ç›®å½•<br> osrf&#x2F;ros:kinetic-desktop-fullï¼šå®¹å™¨ä»é•œåƒosrf&#x2F;ros:kinetic-desktop-fullåˆ›å»º<br> &#x2F;bin&#x2F;bashï¼šè¿è¡Œå‘½ä»¤bash</p>\n<p>â‘¡åˆ›å»ºå®Œå®¹å™¨åï¼Œå‘½ä»¤è¡Œè‡ªåŠ¨è¿›å…¥äº†dockerï¼Œæ¥ç€è¿è¡Œroscore</p>\n<p><code>export ROS_MASTER_URI=http://172.17.0.1:11311</code></p>\n<p><code>export ROS_IP=172.17.0.1</code></p>\n<p><code>source /opt/ros/kinetic/setup.bash</code><br><code>roscore</code></p>\n<h2 id=\"ç¬¬äºŒä¸ªç»ˆç«¯â€”â€”turtlesim-node\"><a href=\"#ç¬¬äºŒä¸ªç»ˆç«¯â€”â€”turtlesim-node\" class=\"headerlink\" title=\"ç¬¬äºŒä¸ªç»ˆç«¯â€”â€”turtlesim_node\"></a>ç¬¬äºŒä¸ªç»ˆç«¯â€”â€”turtlesim_node</h2><p>â‘ å…ˆæŸ¥çœ‹ä¹‹å‰æ–°å»ºçš„å®¹å™¨åç§°<br> <code>docker ps --all</code><br> â‘¡è¿›å…¥å®¹å™¨ä¸­<br> <code>docker exec -it &lt;container_name&gt; /bin/bash</code><br> â‘¢è¿è¡Œturtlesim_node</p>\n<p><code>export ROS_MASTER_URI=http://172.17.0.1:11311</code></p>\n<p><code>export ROS_IP=172.17.0.2</code></p>\n<p> <code>source /opt/ros/kinetic/setup.bash</code><br> <code>rosrun turtlesim turtlesim_node</code></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221109220609929.png\"\n                      alt=\"image-20221109220609929\"\n                ></p>\n<h2 id=\"ç¬¬ä¸‰ä¸ªç»ˆç«¯â€”â€”é”®ç›˜æ§åˆ¶ï¼š\"><a href=\"#ç¬¬ä¸‰ä¸ªç»ˆç«¯â€”â€”é”®ç›˜æ§åˆ¶ï¼š\" class=\"headerlink\" title=\"ç¬¬ä¸‰ä¸ªç»ˆç«¯â€”â€”é”®ç›˜æ§åˆ¶ï¼š\"></a>ç¬¬ä¸‰ä¸ªç»ˆç«¯â€”â€”é”®ç›˜æ§åˆ¶ï¼š</h2><p> â‘ è¿›å…¥åŒä¸€ä¸ªå®¹å™¨ä¸­<br> <code>docker exec -it &lt;container_name&gt; /bin/bash</code><br> <code>source /opt/ros/kinetic/setup.bash</code><br> â‘¡è¿è¡Œé¥æ§é”®ç›˜</p>\n<p><code>export ROS_MASTER_URI=http://172.17.0.1:11311</code></p>\n<p><code>export ROS_IP=172.17.0.3</code></p>\n<p><code>rosrun turtlesim turtle_teleop_key</code><br> æ­¤æ—¶å³å¯æ§åˆ¶å°æµ·é¾Ÿè¿åŠ¨</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221109220621036.png\"\n                      alt=\"image-20221109220621036\"\n                ></p>\n","site":{"data":{"links":[{"name":"CZMæœ‰ç‚¹å†·","link":"https://czm.cool/","description":"CZMçš„åšå®¢","avatar":"https://img.czm.cool/avatar/avatar.png"},{"name":"PSH","link":"https://shamd.cloud/","description":"PSHçš„åšå®¢.","avatar":"https://shamd.cloud/upload/2022/07/afbb577733f46c9535dd1d6d6388278.jpg"},{"name":"KAI","link":"https://kainote.top/","description":"love artist, love code.","avatar":"https://cdn.jsdelivr.net/gh/kaix2301/pictures/img202201072101018.jpg"}]}},"excerpt":"","more":"<p>â€”â€”æé«˜å¼€å‘ç¯å¢ƒé²æ£’æ€§</p>\n<h1 id=\"å®‰è£…ä¹‹å‰\"><a href=\"#å®‰è£…ä¹‹å‰\" class=\"headerlink\" title=\"å®‰è£…ä¹‹å‰\"></a>å®‰è£…ä¹‹å‰</h1><h2 id=\"Dockerå®¹å™¨ä¼šå ç”¨å¤šå¤§å­˜å‚¨ç©ºé—´\"><a href=\"#Dockerå®¹å™¨ä¼šå ç”¨å¤šå¤§å­˜å‚¨ç©ºé—´\" class=\"headerlink\" title=\"Dockerå®¹å™¨ä¼šå ç”¨å¤šå¤§å­˜å‚¨ç©ºé—´\"></a>Dockerå®¹å™¨ä¼šå ç”¨å¤šå¤§å­˜å‚¨ç©ºé—´</h2><p>Dockeré€šè¿‡imagesåˆ›é€ containerï¼Œåœ¨containerä¸­éƒ¨ç½²å’Œå¼€å‘åº”ç”¨ã€‚</p>\n<p>ROSå®˜æ–¹å·²ç»æä¾›äº†æ”¯æŒDockerçš„ros imagesï¼Œé•œåƒå·²ç»é…ç½®å¥½äº†rosçš„å¼€å‘ç¯å¢ƒã€‚é€šè¿‡å‘½ä»¤docker pull osrf&#x2F;rosï¼šmelodic-desktop-fullæ‹‰å–é•œåƒï¼Œå¦‚æœæ˜¯åŒ…å«ros-coreçš„é•œåƒï¼Œå¤§æ¦‚æ˜¯400Mï¼Œå¦‚æœåŒ…å«rvizï¼Œgazeboç­‰å…¨å¥—çš„destktop-fullç‰ˆæœ¬ï¼Œå¤§æ¦‚æ˜¯5Gå·¦å³ï¼Œå æ®çš„ç©ºé—´è¿˜æ˜¯å¾ˆå¯è§‚çš„ã€‚</p>\n<p>æŸ¥çœ‹å®¹å™¨ä¸é•œåƒå¤§å°</p>\n<blockquote>\n<p> docker system df -v</p>\n</blockquote>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221109153440000.png\"\n                      alt=\"image-20221109153440000\"\n                ></p>\n<h2 id=\"æŸ¥çœ‹dockeré‡Œé¢å¯è§†åŒ–ç•Œé¢\"><a href=\"#æŸ¥çœ‹dockeré‡Œé¢å¯è§†åŒ–ç•Œé¢\" class=\"headerlink\" title=\"æŸ¥çœ‹dockeré‡Œé¢å¯è§†åŒ–ç•Œé¢\"></a>æŸ¥çœ‹dockeré‡Œé¢å¯è§†åŒ–ç•Œé¢</h2><p>å®¿ä¸»æœºå¼€å¯xhost, ä½¿èƒ½å®¿ä¸»æœºæ¥æ”¶å…¶ä»–å®¢æˆ·ç«¯çš„æ˜¾ç¤ºéœ€æ±‚<br> <code>xhost +</code></p>\n<p>dockeråˆ›å»ºå®¹å™¨æ—¶å‚æ•°è®¾ç½®xserveræŒ‚è½½åœ°å€å³å¯<br> <code>-e DISPLAY -v /tmp/.X11-unix:/tmp/.X11-unix</code></p>\n<h2 id=\"dockeré‡Œé¢çš„ç¨‹åºå¦‚ä½•ä¸ä¸»æœºçš„ç¨‹åºé€šè®¯\"><a href=\"#dockeré‡Œé¢çš„ç¨‹åºå¦‚ä½•ä¸ä¸»æœºçš„ç¨‹åºé€šè®¯\" class=\"headerlink\" title=\"dockeré‡Œé¢çš„ç¨‹åºå¦‚ä½•ä¸ä¸»æœºçš„ç¨‹åºé€šè®¯\"></a>dockeré‡Œé¢çš„ç¨‹åºå¦‚ä½•ä¸ä¸»æœºçš„ç¨‹åºé€šè®¯</h2><p>é‡‡ç”¨socketé€šä¿¡</p>\n<p>dockeråˆ›å»ºå®¹å™¨æ—¶ï¼Œé»˜è®¤åˆ†é…äº†bridgeç½‘ç»œï¼Œè¿™æ ·æ‰€æœ‰çš„å®¹å™¨éƒ½åœ¨åŒä¸€ä¸ªç½‘æ®µï¼Œæ˜¯èƒ½å¤Ÿç›¸äº’é€šä¿¡çš„ã€‚</p>\n<p>å¦‚æœæƒ³æŸäº›å®¹å™¨ä¹‹é—´ä¸èƒ½é€šä¿¡ï¼Œé€šè¿‡è‡ªå®šä¹‰ç½‘ç»œå°±èƒ½å®ç°ã€‚</p>\n<p>å‡å¦‚å®¿ä¸»æœºæ˜¯linuxç³»ç»Ÿï¼Œæœ‰ä¸€ä¸ªç›‘å¬8000ç«¯å£çš„å…¶ä»–è¿›ç¨‹</p>\n<p>åœ¨å®¿ä¸»æœºä¸Šæ‰§è¡Œifconfigå‘½ä»¤ï¼Œå¯ä»¥å‘ç°æœ‰ä¸€ä¸ªdocker0ç½‘å¡ï¼Œæ³¨æ„è§‚å¯Ÿå…¶ç½‘æ®µå’Œdocker network inspect bridgeçš„ç½‘æ®µæ˜¯ä¸€è‡´çš„ï¼Œå®¿ä¸»æœºåœ¨æ­¤ç½‘æ®µä¸‹ä¹Ÿåˆ†é…äº†ä¸€ä¸ªipï¼Œä¸€èˆ¬æ˜¯ç½‘æ®µä¸­çš„ç¬¬ä¸€ä¸ªipï¼Œå‡å¦‚æ˜¯192.168.10.1ã€‚</p>\n<p>1ï¼‰å‡å¦‚ç”¨é»˜è®¤çš„bridgeæ¨¡å¼å¯åŠ¨å®¹å™¨ï¼Œå³åœ¨å¯åŠ¨æ—¶ä¸æŒ‡å®šnetworkå‚æ•°æˆ–è€…æŒ‡å®šäº†â€“network bridgeï¼Œ</p>\n<p>åœ¨å®¹å™¨ä¸­æ‰§è¡Œifconfigå‘½ä»¤ï¼Œå¯ä»¥å‘ç°å®¹å™¨çš„ipä¹Ÿåœ¨ä¸Šé¢çš„ç½‘æ®µä¸­ï¼Œå‡å¦‚æ˜¯192.168.10.2ã€‚</p>\n<p>åœ¨å®¹å™¨ä¸­ï¼Œping 192.168.10.1ï¼Œå¯ä»¥pingé€šã€‚åœ¨å®¿ä¸»æœºä¸­ping 192.168.10.2ï¼Œå¯ä»¥pingé€šã€‚</p>\n<p>åœ¨å®¹å™¨ä¸­ï¼Œå¯ä»¥ç”¨192.168.10.1:portçš„æ–¹å¼è®¿é—®å®¿ä¸»æœºçš„æœåŠ¡ã€‚</p>\n<p>ç½‘ç»œä¸­çš„å…¶å®ƒä¸»æœºèƒ½å¦pingé€šè¿™äº›å®¹å™¨ï¼Ÿ<br> roscoreåœ¨å®¹å™¨ä¸­å¯åŠ¨åï¼Œå®¿ä¸»æœºèƒ½å¦å¯åŠ¨ï¼Ÿå¯ä»¥ï¼Œè¿™ç›¸å½“äºæ˜¯ä¸¤å°ä¸åŒçš„æœºå™¨ï¼Œå¦‚æœå…±äº«ä¸€ä¸ªroscoreï¼Œéœ€è¦è®¾ç½®ä¸¤ä¸ªçš„bashrcï¼Œros_master_urlå‚æ•°ã€‚</p>\n<p>2ï¼‰å‡å¦‚å®¹å™¨ç”¨hostç½‘ç»œæ¨¡å¼å¯åŠ¨ï¼Œå³åœ¨å¯åŠ¨æ—¶æ·»åŠ äº†â€“netwok hostå‚æ•°ï¼Œ</p>\n<p>é‚£ä¹ˆå®¹å™¨ä¼šå’Œå®¿ä¸»æœºå…±äº«ç½‘ç»œï¼Œç›´æ¥telnet 127.0.0.1 8000å¯ä»¥telneté€šä¿¡ã€‚</p>\n<h1 id=\"dockerå¯è§†åŒ–\"><a href=\"#dockerå¯è§†åŒ–\" class=\"headerlink\" title=\"dockerå¯è§†åŒ–\"></a>dockerå¯è§†åŒ–</h1><p>dockerä¸­å¼€å¯GUIåŸç†ï¼š<br> xhost æ˜¯ç”¨æ¥æ§åˆ¶X serverè®¿é—®æƒé™çš„ã€‚é€šå¸¸å½“ä½ ä»hostAç™»é™†åˆ°hostBä¸Šè¿è¡ŒhostBä¸Šçš„åº”ç”¨ç¨‹åºæ—¶ï¼Œåšä¸ºåº”ç”¨ç¨‹åºæ¥è¯´ï¼ŒhostAæ˜¯client,ä½†æ˜¯ä½œä¸ºå›¾å½¢æ¥è¯´ï¼Œ<strong>æ˜¯åœ¨hostAä¸Šæ˜¾ç¤ºçš„ï¼Œéœ€è¦ä½¿ç”¨hostAçš„Xserver</strong>,æ‰€ä»¥hostAæ˜¯serverã€‚å› æ­¤åœ¨ç™»é™†åˆ°hostBå‰ï¼Œéœ€è¦åœ¨hostAä¸Šè¿è¡Œxhost +æ¥ä½¿å…¶å®ƒç”¨æˆ·èƒ½å¤Ÿè®¿é—®hostAçš„Xserver.</p>\n<p><strong>æ€»ç»“ï¼šdockerä¸­æ˜¾ç¤ºclienté€šè¿‡æ˜ å°„å°†å¯¹Xserverçš„è¯·æ±‚é€ä¼ åˆ°ä¸»æœºç«¯DISPALYï¼ŒDISPLAYå¯¹åº”ä¸»æœºç«¯çš„æ˜¾ç¤ºæ¥å£ï¼Œä¸»æœºç«¯ä¹Ÿä½¿èƒ½æ¥æ”¶ï¼Œå®Œæˆæ˜¾ç¤ºã€‚</strong></p>\n<p>xhost + <strong>æ˜¯ä½¿æ‰€æœ‰ç”¨æˆ·éƒ½èƒ½è®¿é—®Xserver.</strong><br> xhost + ipä½¿ipä¸Šçš„ç”¨æˆ·èƒ½å¤Ÿè®¿é—®Xserver.<br> xhost + nis:user@domainä½¿domainä¸Šçš„nisç”¨æˆ·userèƒ½å¤Ÿè®¿é—®<br> xhost + inet:user@domainä½¿domainä¸Šçš„inetç”¨æˆ·èƒ½å¤Ÿè®¿é—®ã€‚</p>\n<h2 id=\"è¿è¡Œxserver\"><a href=\"#è¿è¡Œxserver\" class=\"headerlink\" title=\"è¿è¡Œxserver\"></a>è¿è¡Œxserver</h2><p>ç»ˆç«¯è¾“å…¥<br><code>xhost +</code></p>\n<ul>\n<li>è‹¥æˆåŠŸå¯åŠ¨ï¼Œåˆ™è·³åˆ°ç¬¬4.2ç»§ç»­æ‰§è¡Œã€‚</li>\n<li>è‹¥æ˜¾ç¤º<code>xhost: unable to open display</code>ï¼Œåˆ™è¯´æ˜æ²¡æœ‰å®‰è£…vncserverã€‚</li>\n</ul>\n<h2 id=\"å®‰è£…vncserver\"><a href=\"#å®‰è£…vncserver\" class=\"headerlink\" title=\"å®‰è£…vncserver\"></a>å®‰è£…vncserver</h2><p>è¿›å…¥rootï¼Œç¡®è®¤ä¸‹vncserverç¡®å®æ²¡è£…ï¼ˆæˆ‘ä¹Ÿä¸æ˜ç™½ä¸ºä»€ä¹ˆè¦è¿›å…¥rootï¼Œä½†æ˜¯ç…§åšå°±è¡Œï¼‰<br> <code>su root</code><br> <code>vncsever</code><br> è‹¥æç¤º<code>bash: vncserver: command not found</code>åˆ™éœ€è¦å®‰è£…vncã€‚</p>\n<p>é€€å‡ºrootï¼ˆæˆ–è€…é‡æ–°å¼€ä¸€ä¸ªç»ˆç«¯ï¼‰ï¼Œå®‰è£…vnc<br> <code>sudo apt-get install tigervnc-standalone-server tigervnc-viewer</code><br> ä¸Šé¢å‘½ä»¤æ˜¯æˆ‘æµ‹è¯•æ²¡é—®é¢˜çš„ï¼Œç½‘ä¸Šè¿˜æœ‰å…¶å®ƒå®‰è£…çš„åŒ…</p>\n<p>**å¦‚æœä¸Šé¢çš„å‘½ä»¤èƒ½å®‰è£…å¥½vncï¼Œå°±ä¸ç”¨ä¸‹é¢è¿™äº›äº†<br> <code>sudo apt-get install x11-xserver-utils</code><br> ä¸Šé¢è¿™ä¸ªåŒ…ç³»ç»Ÿå·²ç»é»˜è®¤è£…å¥½äº†ï¼Œä½†æ˜¯ä»ç„¶ä¸èƒ½æ‰§è¡Œ<code>xhost +</code></p>\n<p><code>sudo apt install xfce4 xfce4-goodies</code><br> <code>sudo apt install tightvncserver</code><br> ä¸Šé¢è¿™ä¸ªåŒ…æ²¡æœ‰æµ‹è¯•è¿‡ï¼Œæ„Ÿè§‰ä¼¼ä¹å¯ä»¥ã€‚</p>\n<p><code>sudo apt-get install tigervnc-server</code><br> ä¸Šé¢è¿™ä¸ªåŒ…æ²¡æœ‰æµ‹è¯•è¿‡ï¼Œæ„Ÿè§‰ä¼¼ä¹ä¹Ÿå¯ä»¥ã€‚</p>\n<p>å¦‚æœvncserveræŠ¥é”™ï¼ŒæŸ¥çœ‹æ—¥å¿—æ–‡ä»¶ï¼Œå¹¶é€ä¸ªè§£å†³</p>\n<p>å®‰è£…å®Œåå°±æ˜¯é…ç½®VNCï¼Œæ„Ÿè§‰è¿™ä¸ªè®¾ç½®æŒºå¤æ‚çš„ï¼Œé‡‡ç”¨äº†ç½‘ä¸Šæœ€ç®€å•çš„æ“ä½œæ–¹å¼</p>\n<p> å®‰è£…å¥½vncåï¼Œè¿›å…¥rootå¯åŠ¨vnc<br> <code>su root</code><br> <code>vncserver</code><br> ç¬¬ä¸€æ¬¡è¿è¡Œä¼šè®©ä½ è¾“å…¥å¾ˆå¤šå¯†ç ï¼Œè¾“å…¥å°±è¡Œï¼Œä¸€è·¯yesï½</p>\n<p>å¯åŠ¨å®¹å™¨ï¼Œæµ‹è¯•gazeboå’Œrvizï¼Œéƒ½å¯ä»¥æ­£å¸¸æ‰“å¼€</p>\n<h1 id=\"å¤šroså®¹å™¨é€šä¿¡\"><a href=\"#å¤šroså®¹å™¨é€šä¿¡\" class=\"headerlink\" title=\"å¤šroså®¹å™¨é€šä¿¡\"></a>å¤šroså®¹å™¨é€šä¿¡</h1><h2 id=\"ç¬¬ä¸€ä¸ªç»ˆç«¯â€”â€”roscoreï¼š\"><a href=\"#ç¬¬ä¸€ä¸ªç»ˆç«¯â€”â€”roscoreï¼š\" class=\"headerlink\" title=\"ç¬¬ä¸€ä¸ªç»ˆç«¯â€”â€”roscoreï¼š\"></a>ç¬¬ä¸€ä¸ªç»ˆç«¯â€”â€”roscoreï¼š</h2><p>â‘ dockerå‘½ä»¤æ–°å»ºä¸€ä¸ªå®¹å™¨ï¼ˆå¸¦GUIç¯å¢ƒå˜é‡ï¼‰</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker run -it \\</span><br><span class=\"line\">    --<span class=\"built_in\">env</span>=<span class=\"string\">&quot;DISPLAY&quot;</span> \\</span><br><span class=\"line\">    --<span class=\"built_in\">env</span>=<span class=\"string\">&quot;QT_X11_NO_MITSHM=1&quot;</span> \\</span><br><span class=\"line\">    --volume=<span class=\"string\">&quot;/tmp/.X11-unix:/tmp/.X11-unix:rw&quot;</span> \\</span><br><span class=\"line\">    osrf/ros:kinetic-desktop-full \\</span><br><span class=\"line\">    /bin/bash</span><br></pre></td></tr></table></figure>\n\n<p>å‘½ä»¤è§£é‡Š<br> â€“env&#x3D;â€DISPLAYâ€ ï¼šå¼€å¯æ˜¾ç¤ºGUIç•Œé¢<br> â€“env&#x3D;â€QT_X11_NO_MITSHM&#x3D;1â€ ï¼šé‡‡ç”¨X11çš„ç«¯å£1è¿›è¡Œæ˜¾ç¤º<br> â€“volume&#x3D;â€&#x2F;tmp&#x2F;.X11-unix:&#x2F;tmp&#x2F;.X11-unix:rwâ€ ï¼šæ˜ å°„æ˜¾ç¤ºæœåŠ¡èŠ‚ç‚¹ç›®å½•<br> osrf&#x2F;ros:kinetic-desktop-fullï¼šå®¹å™¨ä»é•œåƒosrf&#x2F;ros:kinetic-desktop-fullåˆ›å»º<br> &#x2F;bin&#x2F;bashï¼šè¿è¡Œå‘½ä»¤bash</p>\n<p>â‘¡åˆ›å»ºå®Œå®¹å™¨åï¼Œå‘½ä»¤è¡Œè‡ªåŠ¨è¿›å…¥äº†dockerï¼Œæ¥ç€è¿è¡Œroscore</p>\n<p><code>export ROS_MASTER_URI=http://172.17.0.1:11311</code></p>\n<p><code>export ROS_IP=172.17.0.1</code></p>\n<p><code>source /opt/ros/kinetic/setup.bash</code><br><code>roscore</code></p>\n<h2 id=\"ç¬¬äºŒä¸ªç»ˆç«¯â€”â€”turtlesim-node\"><a href=\"#ç¬¬äºŒä¸ªç»ˆç«¯â€”â€”turtlesim-node\" class=\"headerlink\" title=\"ç¬¬äºŒä¸ªç»ˆç«¯â€”â€”turtlesim_node\"></a>ç¬¬äºŒä¸ªç»ˆç«¯â€”â€”turtlesim_node</h2><p>â‘ å…ˆæŸ¥çœ‹ä¹‹å‰æ–°å»ºçš„å®¹å™¨åç§°<br> <code>docker ps --all</code><br> â‘¡è¿›å…¥å®¹å™¨ä¸­<br> <code>docker exec -it &lt;container_name&gt; /bin/bash</code><br> â‘¢è¿è¡Œturtlesim_node</p>\n<p><code>export ROS_MASTER_URI=http://172.17.0.1:11311</code></p>\n<p><code>export ROS_IP=172.17.0.2</code></p>\n<p> <code>source /opt/ros/kinetic/setup.bash</code><br> <code>rosrun turtlesim turtlesim_node</code></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221109220609929.png\"\n                      alt=\"image-20221109220609929\"\n                ></p>\n<h2 id=\"ç¬¬ä¸‰ä¸ªç»ˆç«¯â€”â€”é”®ç›˜æ§åˆ¶ï¼š\"><a href=\"#ç¬¬ä¸‰ä¸ªç»ˆç«¯â€”â€”é”®ç›˜æ§åˆ¶ï¼š\" class=\"headerlink\" title=\"ç¬¬ä¸‰ä¸ªç»ˆç«¯â€”â€”é”®ç›˜æ§åˆ¶ï¼š\"></a>ç¬¬ä¸‰ä¸ªç»ˆç«¯â€”â€”é”®ç›˜æ§åˆ¶ï¼š</h2><p> â‘ è¿›å…¥åŒä¸€ä¸ªå®¹å™¨ä¸­<br> <code>docker exec -it &lt;container_name&gt; /bin/bash</code><br> <code>source /opt/ros/kinetic/setup.bash</code><br> â‘¡è¿è¡Œé¥æ§é”®ç›˜</p>\n<p><code>export ROS_MASTER_URI=http://172.17.0.1:11311</code></p>\n<p><code>export ROS_IP=172.17.0.3</code></p>\n<p><code>rosrun turtlesim turtle_teleop_key</code><br> æ­¤æ—¶å³å¯æ§åˆ¶å°æµ·é¾Ÿè¿åŠ¨</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221109220621036.png\"\n                      alt=\"image-20221109220621036\"\n                ></p>\n"},{"title":"A multi-faceted optimization scheduling framework","date":"2022-11-10T14:00:41.000Z","_content":"# äº‘è®¡ç®—ä¸­åŸºäºç²’å­ç¾¤ä¼˜åŒ–ç®—æ³•çš„å¤šé¢ä¼˜åŒ–è°ƒåº¦æ¡†æ¶\n\nåœ¨äº‘è®¡ç®—ä¸­ï¼Œç”±äºå„ç§èµ„æºéœ€æ±‚å’Œå¤šä¸ªä½œä¸šçš„æ‰§è¡Œï¼Œåœ¨æ€§èƒ½å’Œæˆæœ¬ä¼˜åŒ–æ–¹é¢å­˜åœ¨é‡å¤§é—®é¢˜\n\nä»»åŠ¡å’Œèµ„æºå¤šæ ·æ€§ï¼Œå ç”¨CPUå’Œå­˜å‚¨ï¼Œéš¾ä»¥ä¼˜åŒ–\n\nåˆ›æ–°ï¼š\n\n1.è€ƒè™‘ä»»åŠ¡å¯¹èµ„æºéœ€æ±‚çš„å·®å¼‚ï¼Œæå‡ºäº†èµ„æºæˆæœ¬æ—¶é—´è½´æ¨¡å‹\n\n2.æå‡ºäº†ä¸€ç§åŸºäºç²’å­ç¾¤ä¼˜åŒ–ç®—æ³•(EPBPSO)çš„è°ƒåº¦æ¨¡å‹ä¸­çš„å¢å¼ºå‹æ€§èƒ½é¢„ç®—ç®—æ³•ï¼Œè¯¥ç®—æ³•åœ¨å®ç°å¤šé¢ä¼˜åŒ–è°ƒåº¦æ–¹é¢å…·æœ‰å¾ˆå¤§çš„ä¼˜åŠ¿\n\nç ”ç©¶å†…å®¹ï¼šæå‡ºäº†ä¸€ç§å¢å¼ºçš„ç²’å­ç¾¤ç®—æ³•ï¼Œä½¿å…¶èƒ½å¤Ÿæ ¹æ®è§£çš„è´¨é‡è¿›è¡Œè‡ªæˆ‘è°ƒæ•´ã€‚ä¼˜åŒ–æ€§èƒ½å’Œæˆæœ¬\n\nè´¡çŒ®ï¼š\n\n1.ä¸€ä¸ªæ¨¡å‹ï¼šä¸ºäº†å®šä¹‰ä»»åŠ¡å¯¹ç‰¹å®šèµ„æºçš„éœ€æ±‚ç»†èŠ‚ï¼Œæå‡ºäº†ä¸€ä¸ªæ¨¡å‹ï¼Œå³èµ„æºæˆæœ¬æ—¶é—´è½´æ¨¡å‹(resource Cost Timeline model)ã€‚è¯¥æ¨¡å‹æœ‰åŠ©äºç”¨æˆ·é¢„ç®—å’Œèµ„æºæˆæœ¬çš„è®¡ç®—ã€‚\n\n2.ä¸€ä¸ªæ¡†æ¶ï¼šé’ˆå¯¹æ€§èƒ½ã€æˆæœ¬å’Œå¯é æ€§ã€æœŸé™ã€å¯æ‰©å±•æ€§ç­‰å„ä¸ªæ–¹é¢ï¼Œæå‡ºäº†åŸºäºç²’å­ç¾¤ç®—æ³•çš„å¤šé¢è°ƒåº¦ä¼˜åŒ–æ¡†æ¶ã€‚\n\n3.ä¸€ä¸ªç®—æ³•ï¼šåœ¨ç²’å­ç¾¤ç®—æ³•çš„åŸºç¡€ä¸Šï¼Œæå‡ºäº†ä¸€ç§ä¸»è¦è€ƒè™‘æ€§èƒ½å’Œé¢„ç®—æˆæœ¬ä¸¤ä¸ªçº¦æŸæ¡ä»¶çš„å¢å¼ºæ€§èƒ½é¢„ç®—çš„ç²’å­ç¾¤ä¼˜åŒ–ç®—æ³•ã€‚å¢å¼ºæ€§èƒ½é¢„ç®—çš„ç²’å­ç¾¤ç®—æ³•è§£å†³äº†åŸç²’å­ç¾¤ç®—æ³•å®¹æ˜“é™·å…¥å±€éƒ¨æœ€ä¼˜çš„é—®é¢˜ã€‚\n\nå·¥ä½œï¼š\n\né¦–å…ˆéœ€è¦é‡åŒ–ä»»åŠ¡çš„æˆæœ¬ï¼Œä»¥ä¾¿äºè®¡ç®—å‡ºæ¯ä¸ªä»»åŠ¡å¯¹èµ„æºçš„éœ€æ±‚ï¼Œå¯ä»¥å°†ä»»åŠ¡æˆæœ¬å’Œèµ„æºæˆæœ¬ä½œä¸ºä¸¤ä¸ªå‚æ•°ï¼Œç”±äºç¯å¢ƒçš„å¼‚è´¨æ€§å’Œèµ„æºçš„å¤šæ ·æ€§ï¼Œåœ¨å¾ˆå¤šåœºæ™¯ä¸­ï¼Œæ²¡æœ‰ä¸ºæ¯ä¸ªèµ„æºæä¾›ä»»åŠ¡éœ€æ±‚ï¼Œè¿™å¢åŠ äº†å¤æ‚æ€§ã€‚\n\nç”±äºç²’å­ç¾¤ç®—æ³•çš„ç¼ºç‚¹ï¼Œæ²¡æœ‰å……åˆ†è€ƒè™‘åé¦ˆçš„è¯„ä»·å’Œè§£çš„è´¨é‡ï¼Œå¯¼è‡´äº†åœ¨é«˜ç»´ç©ºé—´çš„å±€éƒ¨æœ€ä¼˜ã€‚æœ¬æ–‡å°†ä»£è¡¨ä¸€ä¸ªè€ƒè™‘æ€§èƒ½å’Œæˆæœ¬ä¸¤ä¸ªè´¨é‡å‚æ•°çš„æ¡†æ¶ï¼Œå¹¶å°†å…¶è¾“å‡ºä¸ä»¥å‰çš„ç»“æœç›¸åŒ¹é…ã€‚\n\n# é—®é¢˜çš„å®šä¹‰å’Œè¡¨è¿°\n\né—®é¢˜çš„æ¡†æ¶å’Œä¸åŒæœ¯è¯­çš„å‡ ä¸ªå®šä¹‰åˆ†åˆ«å¦‚å›¾1å’Œè¡¨1æ‰€ç¤º\n\n## ä»»åŠ¡å’Œèµ„æºçš„å®šä¹‰\n\né¦–å…ˆï¼Œè®¤ä¸ºå½“å‰äº‘è®¡ç®—ç³»ç»Ÿä¸­æœ‰Nä¸ªèµ„æºR = {R1, R2, R3â€¦RN}ï¼Œæœ‰Mä¸ªä»»åŠ¡T = {T1, T2, T3â€¦TM)ã€‚ä»»åŠ¡è¢«ç§°ä¸ºcloudletï¼Œäº‘èµ„æºè¢«ç§°ä¸ºè™šæ‹Ÿèµ„æºã€‚\n\n**å®šä¹‰1**![image-20221110205617740](https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221110205617740.png)è¿™äº›å‚æ•°ç”±ç”¨æˆ·æäº¤ç»™ä»£ç†ï¼Œæœ€åæäº¤ç»™ä»»åŠ¡ç®¡ç†å™¨ã€‚\n\n![image-20221110205635031](https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221110205635031.png)\n\n**å®šä¹‰2**   ***(Resources)***æ•°æ®ä¸­å¿ƒä¸­çš„æ¯ä¸ªè™šæ‹Ÿèµ„æºä¸»è¦ç”±å…¶å†…å­˜å’ŒCPUä¸¤ä¸ªå‚æ•°å®šä¹‰ï¼Œ![image-20221110210153487](https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221110210153487.png)è¿™ä¸¤ä¸ªå‚æ•°åˆ†åˆ«ç”¨Memory usageå’ŒCPU utilizationè¡¨ç¤º\n\næå‡ºçš„ä¸Šè¿°é—®é¢˜çš„ç³»ç»Ÿæ¡†æ¶æ¨¡å‹å¦‚å›¾1æ‰€ç¤ºã€‚åœ¨è¿™é‡Œï¼Œç”¨æˆ·ä»¥cloudletå½¢å¼ç»™å‡ºçš„è¯·æ±‚è¢«æäº¤ç»™Brokerã€‚Brokerå°†ç”¨æˆ·è¯·æ±‚æäº¤ç»™ä»»åŠ¡ç®¡ç†å™¨ï¼Œä»»åŠ¡ç®¡ç†å™¨å°†ç”¨æˆ·è¯·æ±‚åˆ†ä¸ºä»å±è¯·æ±‚å’Œä»å±è¯·æ±‚\n\n![image-20221110204713335](https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221110204713335.png)\n\næå‡ºçš„ä¸Šè¿°é—®é¢˜çš„ç³»ç»Ÿæ¡†æ¶æ¨¡å‹å¦‚å›¾1æ‰€ç¤ºã€‚åœ¨è¿™é‡Œï¼Œç”¨æˆ·ä»¥cloudletå½¢å¼ç»™å‡ºçš„è¯·æ±‚è¢«æäº¤ç»™Brokerã€‚Brokerå°†ç”¨æˆ·è¯·æ±‚æäº¤ç»™ä»»åŠ¡ç®¡ç†å™¨ï¼Œä»»åŠ¡ç®¡ç†å™¨å°†ç”¨æˆ·è¯·æ±‚åˆ†ä¸ºä»å±è¯·æ±‚å’Œç‹¬ç«‹è¯·æ±‚ï¼Œä¿¡æ¯æœ€åæäº¤ç»™è°ƒåº¦å™¨ã€‚\n\n![image-20221110204654048](https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221110204654048.png)\n\nCPUä¿¡æ¯å’Œå†…å­˜è´Ÿè½½ä¿¡æ¯ç”±æœ¬åœ°èµ„æºç®¡ç†å™¨æ”¶é›†ï¼Œæœ€åå°†è¿™äº›ä¿¡æ¯æäº¤ç»™å…¨å±€èµ„æºç®¡ç†å™¨ã€‚æœ¬åœ°è™šæ‹Ÿæœºçš„ç›‘è§†å’Œç®¡ç†ç”±æœ¬åœ°èµ„æºç®¡ç†å™¨å®Œæˆ(ä¾‹å¦‚ï¼Œç‰¹å®šä»»åŠ¡åœ¨ç‰¹å®šèµ„æºä¸ŠèŠ±è´¹çš„æ—¶é—´)ã€‚æœ€åï¼Œä»èµ„æºæˆæœ¬æ—¶é—´è½´æ¨¡å‹ä¸­ï¼Œåˆ©ç”¨å…¨å±€èµ„æºç®¡ç†å™¨æä¾›çš„å…ˆéªŒä¿¡æ¯æ¥è¯„ä¼°æˆæœ¬ã€‚\n\n## èµ„æºæˆæœ¬æ—¶é—´è¡¨æ¨¡å‹\n\né¦–å…ˆï¼Œå»ºç«‹äº†**ç”¨æˆ·é¢„ç®—**ä¸**èµ„æºæˆæœ¬**çš„å…³ç³»æ¨¡å‹;æå‡ºäº†ä¸€ä¸ªåŸºäº**æ€§èƒ½**å’Œ**é¢„ç®—çº¦æŸ**çš„å¤šå±‚é¢ä¼˜åŒ–è°ƒåº¦æ¡†æ¶ã€‚\n\n### èµ„æºæˆæœ¬æ¨¡å‹\n\nç”±äºäº‘è®¡ç®—ä¸­ä»»åŠ¡å’Œèµ„æºçš„å¤šæ ·æ€§ï¼Œåæ˜ ä»»åŠ¡æˆæœ¬å’Œç”¨æˆ·é¢„ç®—æˆæœ¬ä¸èµ„æºæˆæœ¬ä¹‹é—´çš„å…³ç³»æ˜¯æœ‰æ•ˆçš„ã€‚æˆ‘ä»¬ä¼šå‘ç°ä¸åŒèµ„æºçš„æˆæœ¬æ˜¯ä¸åŒçš„ï¼Œä»»åŠ¡çš„æˆæœ¬ä¹Ÿæ˜¯ä¸åŒçš„ï¼Œå› ä¸ºæœ‰äº›ä»»åŠ¡éœ€è¦å¾ˆå¤šCPUèµ„æºï¼Œè€Œæœ‰äº›ä»»åŠ¡åˆ™ä¾èµ–äºå†…å­˜éœ€æ±‚ã€‚\n\nåœ¨è¿™ä¸ªæ¨¡å‹ä¸‹ï¼Œè€ƒè™‘ä¸‰ç§ç±»å‹çš„æˆæœ¬:\n\na) Memory Cost  \nb) CPU Cost  \nc) Total Budget Cost\n\n**Memory Cost** \nå†…å­˜å¼€é”€åŒ…æ‹¬å†…å­˜çš„æœ€å°å¼€é”€ï¼Œå³1gbï¼Œä»»åŠ¡åœ¨ç‰¹å®šèµ„æºtijä¸Šè¿è¡Œçš„æŒç»­æ—¶é—´ï¼Œä¸å†…å­˜ä¼ è¾“ç›¸å…³çš„å¼€é”€ï¼ŒMjæ˜¯ç‰¹å®šèµ„æºjçš„å†…å­˜å¼€é”€ã€‚\n\n![image-20221110213255728](https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221110213255728.png)\n\n**CPU Cost**\nç±»ä¼¼åœ°ï¼ŒCPUæˆæœ¬ä¹Ÿå°†åŒ…æ‹¬æœ€å°åˆ©ç”¨æˆæœ¬Cminã€ä»»åŠ¡æŒç»­æ—¶é—´tijã€ä¸CPUä¼ è¾“ç›¸å…³çš„æˆæœ¬å’ŒCPUæˆæœ¬Cjã€‚\n\n![image-20221110213702220](https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221110213702220.png)\n\n![image-20221110213710739](https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221110213710739.png)\n\n**Total Budget Cost** \næ€»é¢„ç®—æˆæœ¬æ˜¯CPUæ€»æˆæœ¬å’Œå†…å­˜æ€»æˆæœ¬çš„æ€»å’Œã€‚\n\n![image-20221110213745530](https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221110213745530.png)\n\nå› æ­¤ï¼Œç‰¹å®šèµ„æºçš„æœ€ç»ˆé¢„ç®—åœ¨ç­‰å¼ä¸­è®¡ç®—ã€‚(6)å€ŸåŠ©äºç­‰å¼è®¡ç®—çš„æ€»é¢„ç®—æˆæœ¬(5).\n\n![image-20221110213836899](https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221110213836899.png)\n\n### æ—¶é—´è½´æ¨¡å‹\n\nåœ¨æ—¶é—´çº¿æ¨¡å‹ä¸­ï¼Œæˆ‘ä»¬è€ƒè™‘ä»»åŠ¡åœ¨å¤šä¸ªèµ„æºä¸Šçš„æ€»æ‰§è¡Œæ—¶é—´ï¼Œå¹¶ä¸”æ€»æ‰§è¡Œæ—¶é—´ä¸åº”è¯¥è¶…è¿‡æ ¹æ®æœåŠ¡æ°´å¹³åè®®(SLA)çš„æˆªæ­¢æ—¶é—´ï¼Œä¸€ä¸ªç‰¹å®šä»»åŠ¡ä½¿ç”¨çš„èµ„æºå¯ä»¥è¾¾åˆ°nã€‚\n\n![image-20221110214635032](https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221110214635032.png)\n\n### è°ƒåº¦æ¨¡å‹ä¸­åŸºäºç²’å­ç¾¤ä¼˜åŒ–çš„å¤šæ–¹ä½ä¼˜åŒ–è°ƒåº¦æ¡†æ¶\n\nä¼˜åŒ–è°ƒåº¦é—®é¢˜çš„å‡ ä¸ªå‚æ•°æ˜¯æ€§èƒ½ã€æˆæœ¬ã€æœŸé™å’Œé¢„ç®—æˆæœ¬ã€‚å¯»æ‰¾è¿™ç±»ç»„åˆé—®é¢˜çš„æœ€ä¼˜è§£æ˜¯å›°éš¾çš„ã€‚ç²’å­ç¾¤ä¼˜åŒ–ç®—æ³•åœ¨å¯»æ‰¾è¿™ç§ç»„åˆé—®é¢˜çš„è§£æ–¹é¢å…·æœ‰ä¼˜åŠ¿ã€‚ç²’å­ç¾¤ç®—æ³•å·²è¢«ç”¨äºå„ç§å„ç§è°ƒåº¦é—®é¢˜ï¼Œä¸å…¶ä»–åŸºäºè‡ªç„¶çš„ç®—æ³•ç›¸æ¯”ï¼Œå–å¾—äº†è¾ƒå¥½çš„ç»“æœã€‚ç„¶è€Œï¼Œç²’å­ç¾¤ç®—æ³•æœ‰é™·å…¥å±€éƒ¨æœ€ä¼˜è§£çš„ç¼ºç‚¹ã€‚å› æ­¤ï¼Œæœ¬æ–‡æå‡ºäº†ä¸€ç§å¢å¼ºå‹ç²’å­ç¾¤ä¼˜åŒ–ç®—æ³•ã€‚ä½¿ç”¨åˆé€‚çš„å‡½æ•°ï¼Œå®ƒæä¾›è§£å†³æ–¹æ¡ˆçš„è´¨é‡å’Œå¯¹è¯„ä¼°ç»“æœçš„åé¦ˆã€‚å› æ­¤ï¼Œå®ƒåªæ˜¯é¿å¼€äº†å±€éƒ¨æœ€ä¼˜ã€‚\n\n![image-20221110215653038](https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221110215653038.png)","source":"_posts/2022/11/A-multi-faceted-optimization-scheduling-framework.md","raw":"---\ntitle: A multi-faceted optimization scheduling framework\ndate: 2022-11-10 22:00:41\ntags:\ncategories:\n---\n# äº‘è®¡ç®—ä¸­åŸºäºç²’å­ç¾¤ä¼˜åŒ–ç®—æ³•çš„å¤šé¢ä¼˜åŒ–è°ƒåº¦æ¡†æ¶\n\nåœ¨äº‘è®¡ç®—ä¸­ï¼Œç”±äºå„ç§èµ„æºéœ€æ±‚å’Œå¤šä¸ªä½œä¸šçš„æ‰§è¡Œï¼Œåœ¨æ€§èƒ½å’Œæˆæœ¬ä¼˜åŒ–æ–¹é¢å­˜åœ¨é‡å¤§é—®é¢˜\n\nä»»åŠ¡å’Œèµ„æºå¤šæ ·æ€§ï¼Œå ç”¨CPUå’Œå­˜å‚¨ï¼Œéš¾ä»¥ä¼˜åŒ–\n\nåˆ›æ–°ï¼š\n\n1.è€ƒè™‘ä»»åŠ¡å¯¹èµ„æºéœ€æ±‚çš„å·®å¼‚ï¼Œæå‡ºäº†èµ„æºæˆæœ¬æ—¶é—´è½´æ¨¡å‹\n\n2.æå‡ºäº†ä¸€ç§åŸºäºç²’å­ç¾¤ä¼˜åŒ–ç®—æ³•(EPBPSO)çš„è°ƒåº¦æ¨¡å‹ä¸­çš„å¢å¼ºå‹æ€§èƒ½é¢„ç®—ç®—æ³•ï¼Œè¯¥ç®—æ³•åœ¨å®ç°å¤šé¢ä¼˜åŒ–è°ƒåº¦æ–¹é¢å…·æœ‰å¾ˆå¤§çš„ä¼˜åŠ¿\n\nç ”ç©¶å†…å®¹ï¼šæå‡ºäº†ä¸€ç§å¢å¼ºçš„ç²’å­ç¾¤ç®—æ³•ï¼Œä½¿å…¶èƒ½å¤Ÿæ ¹æ®è§£çš„è´¨é‡è¿›è¡Œè‡ªæˆ‘è°ƒæ•´ã€‚ä¼˜åŒ–æ€§èƒ½å’Œæˆæœ¬\n\nè´¡çŒ®ï¼š\n\n1.ä¸€ä¸ªæ¨¡å‹ï¼šä¸ºäº†å®šä¹‰ä»»åŠ¡å¯¹ç‰¹å®šèµ„æºçš„éœ€æ±‚ç»†èŠ‚ï¼Œæå‡ºäº†ä¸€ä¸ªæ¨¡å‹ï¼Œå³èµ„æºæˆæœ¬æ—¶é—´è½´æ¨¡å‹(resource Cost Timeline model)ã€‚è¯¥æ¨¡å‹æœ‰åŠ©äºç”¨æˆ·é¢„ç®—å’Œèµ„æºæˆæœ¬çš„è®¡ç®—ã€‚\n\n2.ä¸€ä¸ªæ¡†æ¶ï¼šé’ˆå¯¹æ€§èƒ½ã€æˆæœ¬å’Œå¯é æ€§ã€æœŸé™ã€å¯æ‰©å±•æ€§ç­‰å„ä¸ªæ–¹é¢ï¼Œæå‡ºäº†åŸºäºç²’å­ç¾¤ç®—æ³•çš„å¤šé¢è°ƒåº¦ä¼˜åŒ–æ¡†æ¶ã€‚\n\n3.ä¸€ä¸ªç®—æ³•ï¼šåœ¨ç²’å­ç¾¤ç®—æ³•çš„åŸºç¡€ä¸Šï¼Œæå‡ºäº†ä¸€ç§ä¸»è¦è€ƒè™‘æ€§èƒ½å’Œé¢„ç®—æˆæœ¬ä¸¤ä¸ªçº¦æŸæ¡ä»¶çš„å¢å¼ºæ€§èƒ½é¢„ç®—çš„ç²’å­ç¾¤ä¼˜åŒ–ç®—æ³•ã€‚å¢å¼ºæ€§èƒ½é¢„ç®—çš„ç²’å­ç¾¤ç®—æ³•è§£å†³äº†åŸç²’å­ç¾¤ç®—æ³•å®¹æ˜“é™·å…¥å±€éƒ¨æœ€ä¼˜çš„é—®é¢˜ã€‚\n\nå·¥ä½œï¼š\n\né¦–å…ˆéœ€è¦é‡åŒ–ä»»åŠ¡çš„æˆæœ¬ï¼Œä»¥ä¾¿äºè®¡ç®—å‡ºæ¯ä¸ªä»»åŠ¡å¯¹èµ„æºçš„éœ€æ±‚ï¼Œå¯ä»¥å°†ä»»åŠ¡æˆæœ¬å’Œèµ„æºæˆæœ¬ä½œä¸ºä¸¤ä¸ªå‚æ•°ï¼Œç”±äºç¯å¢ƒçš„å¼‚è´¨æ€§å’Œèµ„æºçš„å¤šæ ·æ€§ï¼Œåœ¨å¾ˆå¤šåœºæ™¯ä¸­ï¼Œæ²¡æœ‰ä¸ºæ¯ä¸ªèµ„æºæä¾›ä»»åŠ¡éœ€æ±‚ï¼Œè¿™å¢åŠ äº†å¤æ‚æ€§ã€‚\n\nç”±äºç²’å­ç¾¤ç®—æ³•çš„ç¼ºç‚¹ï¼Œæ²¡æœ‰å……åˆ†è€ƒè™‘åé¦ˆçš„è¯„ä»·å’Œè§£çš„è´¨é‡ï¼Œå¯¼è‡´äº†åœ¨é«˜ç»´ç©ºé—´çš„å±€éƒ¨æœ€ä¼˜ã€‚æœ¬æ–‡å°†ä»£è¡¨ä¸€ä¸ªè€ƒè™‘æ€§èƒ½å’Œæˆæœ¬ä¸¤ä¸ªè´¨é‡å‚æ•°çš„æ¡†æ¶ï¼Œå¹¶å°†å…¶è¾“å‡ºä¸ä»¥å‰çš„ç»“æœç›¸åŒ¹é…ã€‚\n\n# é—®é¢˜çš„å®šä¹‰å’Œè¡¨è¿°\n\né—®é¢˜çš„æ¡†æ¶å’Œä¸åŒæœ¯è¯­çš„å‡ ä¸ªå®šä¹‰åˆ†åˆ«å¦‚å›¾1å’Œè¡¨1æ‰€ç¤º\n\n## ä»»åŠ¡å’Œèµ„æºçš„å®šä¹‰\n\né¦–å…ˆï¼Œè®¤ä¸ºå½“å‰äº‘è®¡ç®—ç³»ç»Ÿä¸­æœ‰Nä¸ªèµ„æºR = {R1, R2, R3â€¦RN}ï¼Œæœ‰Mä¸ªä»»åŠ¡T = {T1, T2, T3â€¦TM)ã€‚ä»»åŠ¡è¢«ç§°ä¸ºcloudletï¼Œäº‘èµ„æºè¢«ç§°ä¸ºè™šæ‹Ÿèµ„æºã€‚\n\n**å®šä¹‰1**![image-20221110205617740](https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221110205617740.png)è¿™äº›å‚æ•°ç”±ç”¨æˆ·æäº¤ç»™ä»£ç†ï¼Œæœ€åæäº¤ç»™ä»»åŠ¡ç®¡ç†å™¨ã€‚\n\n![image-20221110205635031](https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221110205635031.png)\n\n**å®šä¹‰2**   ***(Resources)***æ•°æ®ä¸­å¿ƒä¸­çš„æ¯ä¸ªè™šæ‹Ÿèµ„æºä¸»è¦ç”±å…¶å†…å­˜å’ŒCPUä¸¤ä¸ªå‚æ•°å®šä¹‰ï¼Œ![image-20221110210153487](https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221110210153487.png)è¿™ä¸¤ä¸ªå‚æ•°åˆ†åˆ«ç”¨Memory usageå’ŒCPU utilizationè¡¨ç¤º\n\næå‡ºçš„ä¸Šè¿°é—®é¢˜çš„ç³»ç»Ÿæ¡†æ¶æ¨¡å‹å¦‚å›¾1æ‰€ç¤ºã€‚åœ¨è¿™é‡Œï¼Œç”¨æˆ·ä»¥cloudletå½¢å¼ç»™å‡ºçš„è¯·æ±‚è¢«æäº¤ç»™Brokerã€‚Brokerå°†ç”¨æˆ·è¯·æ±‚æäº¤ç»™ä»»åŠ¡ç®¡ç†å™¨ï¼Œä»»åŠ¡ç®¡ç†å™¨å°†ç”¨æˆ·è¯·æ±‚åˆ†ä¸ºä»å±è¯·æ±‚å’Œä»å±è¯·æ±‚\n\n![image-20221110204713335](https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221110204713335.png)\n\næå‡ºçš„ä¸Šè¿°é—®é¢˜çš„ç³»ç»Ÿæ¡†æ¶æ¨¡å‹å¦‚å›¾1æ‰€ç¤ºã€‚åœ¨è¿™é‡Œï¼Œç”¨æˆ·ä»¥cloudletå½¢å¼ç»™å‡ºçš„è¯·æ±‚è¢«æäº¤ç»™Brokerã€‚Brokerå°†ç”¨æˆ·è¯·æ±‚æäº¤ç»™ä»»åŠ¡ç®¡ç†å™¨ï¼Œä»»åŠ¡ç®¡ç†å™¨å°†ç”¨æˆ·è¯·æ±‚åˆ†ä¸ºä»å±è¯·æ±‚å’Œç‹¬ç«‹è¯·æ±‚ï¼Œä¿¡æ¯æœ€åæäº¤ç»™è°ƒåº¦å™¨ã€‚\n\n![image-20221110204654048](https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221110204654048.png)\n\nCPUä¿¡æ¯å’Œå†…å­˜è´Ÿè½½ä¿¡æ¯ç”±æœ¬åœ°èµ„æºç®¡ç†å™¨æ”¶é›†ï¼Œæœ€åå°†è¿™äº›ä¿¡æ¯æäº¤ç»™å…¨å±€èµ„æºç®¡ç†å™¨ã€‚æœ¬åœ°è™šæ‹Ÿæœºçš„ç›‘è§†å’Œç®¡ç†ç”±æœ¬åœ°èµ„æºç®¡ç†å™¨å®Œæˆ(ä¾‹å¦‚ï¼Œç‰¹å®šä»»åŠ¡åœ¨ç‰¹å®šèµ„æºä¸ŠèŠ±è´¹çš„æ—¶é—´)ã€‚æœ€åï¼Œä»èµ„æºæˆæœ¬æ—¶é—´è½´æ¨¡å‹ä¸­ï¼Œåˆ©ç”¨å…¨å±€èµ„æºç®¡ç†å™¨æä¾›çš„å…ˆéªŒä¿¡æ¯æ¥è¯„ä¼°æˆæœ¬ã€‚\n\n## èµ„æºæˆæœ¬æ—¶é—´è¡¨æ¨¡å‹\n\né¦–å…ˆï¼Œå»ºç«‹äº†**ç”¨æˆ·é¢„ç®—**ä¸**èµ„æºæˆæœ¬**çš„å…³ç³»æ¨¡å‹;æå‡ºäº†ä¸€ä¸ªåŸºäº**æ€§èƒ½**å’Œ**é¢„ç®—çº¦æŸ**çš„å¤šå±‚é¢ä¼˜åŒ–è°ƒåº¦æ¡†æ¶ã€‚\n\n### èµ„æºæˆæœ¬æ¨¡å‹\n\nç”±äºäº‘è®¡ç®—ä¸­ä»»åŠ¡å’Œèµ„æºçš„å¤šæ ·æ€§ï¼Œåæ˜ ä»»åŠ¡æˆæœ¬å’Œç”¨æˆ·é¢„ç®—æˆæœ¬ä¸èµ„æºæˆæœ¬ä¹‹é—´çš„å…³ç³»æ˜¯æœ‰æ•ˆçš„ã€‚æˆ‘ä»¬ä¼šå‘ç°ä¸åŒèµ„æºçš„æˆæœ¬æ˜¯ä¸åŒçš„ï¼Œä»»åŠ¡çš„æˆæœ¬ä¹Ÿæ˜¯ä¸åŒçš„ï¼Œå› ä¸ºæœ‰äº›ä»»åŠ¡éœ€è¦å¾ˆå¤šCPUèµ„æºï¼Œè€Œæœ‰äº›ä»»åŠ¡åˆ™ä¾èµ–äºå†…å­˜éœ€æ±‚ã€‚\n\nåœ¨è¿™ä¸ªæ¨¡å‹ä¸‹ï¼Œè€ƒè™‘ä¸‰ç§ç±»å‹çš„æˆæœ¬:\n\na) Memory Cost  \nb) CPU Cost  \nc) Total Budget Cost\n\n**Memory Cost** \nå†…å­˜å¼€é”€åŒ…æ‹¬å†…å­˜çš„æœ€å°å¼€é”€ï¼Œå³1gbï¼Œä»»åŠ¡åœ¨ç‰¹å®šèµ„æºtijä¸Šè¿è¡Œçš„æŒç»­æ—¶é—´ï¼Œä¸å†…å­˜ä¼ è¾“ç›¸å…³çš„å¼€é”€ï¼ŒMjæ˜¯ç‰¹å®šèµ„æºjçš„å†…å­˜å¼€é”€ã€‚\n\n![image-20221110213255728](https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221110213255728.png)\n\n**CPU Cost**\nç±»ä¼¼åœ°ï¼ŒCPUæˆæœ¬ä¹Ÿå°†åŒ…æ‹¬æœ€å°åˆ©ç”¨æˆæœ¬Cminã€ä»»åŠ¡æŒç»­æ—¶é—´tijã€ä¸CPUä¼ è¾“ç›¸å…³çš„æˆæœ¬å’ŒCPUæˆæœ¬Cjã€‚\n\n![image-20221110213702220](https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221110213702220.png)\n\n![image-20221110213710739](https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221110213710739.png)\n\n**Total Budget Cost** \næ€»é¢„ç®—æˆæœ¬æ˜¯CPUæ€»æˆæœ¬å’Œå†…å­˜æ€»æˆæœ¬çš„æ€»å’Œã€‚\n\n![image-20221110213745530](https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221110213745530.png)\n\nå› æ­¤ï¼Œç‰¹å®šèµ„æºçš„æœ€ç»ˆé¢„ç®—åœ¨ç­‰å¼ä¸­è®¡ç®—ã€‚(6)å€ŸåŠ©äºç­‰å¼è®¡ç®—çš„æ€»é¢„ç®—æˆæœ¬(5).\n\n![image-20221110213836899](https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221110213836899.png)\n\n### æ—¶é—´è½´æ¨¡å‹\n\nåœ¨æ—¶é—´çº¿æ¨¡å‹ä¸­ï¼Œæˆ‘ä»¬è€ƒè™‘ä»»åŠ¡åœ¨å¤šä¸ªèµ„æºä¸Šçš„æ€»æ‰§è¡Œæ—¶é—´ï¼Œå¹¶ä¸”æ€»æ‰§è¡Œæ—¶é—´ä¸åº”è¯¥è¶…è¿‡æ ¹æ®æœåŠ¡æ°´å¹³åè®®(SLA)çš„æˆªæ­¢æ—¶é—´ï¼Œä¸€ä¸ªç‰¹å®šä»»åŠ¡ä½¿ç”¨çš„èµ„æºå¯ä»¥è¾¾åˆ°nã€‚\n\n![image-20221110214635032](https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221110214635032.png)\n\n### è°ƒåº¦æ¨¡å‹ä¸­åŸºäºç²’å­ç¾¤ä¼˜åŒ–çš„å¤šæ–¹ä½ä¼˜åŒ–è°ƒåº¦æ¡†æ¶\n\nä¼˜åŒ–è°ƒåº¦é—®é¢˜çš„å‡ ä¸ªå‚æ•°æ˜¯æ€§èƒ½ã€æˆæœ¬ã€æœŸé™å’Œé¢„ç®—æˆæœ¬ã€‚å¯»æ‰¾è¿™ç±»ç»„åˆé—®é¢˜çš„æœ€ä¼˜è§£æ˜¯å›°éš¾çš„ã€‚ç²’å­ç¾¤ä¼˜åŒ–ç®—æ³•åœ¨å¯»æ‰¾è¿™ç§ç»„åˆé—®é¢˜çš„è§£æ–¹é¢å…·æœ‰ä¼˜åŠ¿ã€‚ç²’å­ç¾¤ç®—æ³•å·²è¢«ç”¨äºå„ç§å„ç§è°ƒåº¦é—®é¢˜ï¼Œä¸å…¶ä»–åŸºäºè‡ªç„¶çš„ç®—æ³•ç›¸æ¯”ï¼Œå–å¾—äº†è¾ƒå¥½çš„ç»“æœã€‚ç„¶è€Œï¼Œç²’å­ç¾¤ç®—æ³•æœ‰é™·å…¥å±€éƒ¨æœ€ä¼˜è§£çš„ç¼ºç‚¹ã€‚å› æ­¤ï¼Œæœ¬æ–‡æå‡ºäº†ä¸€ç§å¢å¼ºå‹ç²’å­ç¾¤ä¼˜åŒ–ç®—æ³•ã€‚ä½¿ç”¨åˆé€‚çš„å‡½æ•°ï¼Œå®ƒæä¾›è§£å†³æ–¹æ¡ˆçš„è´¨é‡å’Œå¯¹è¯„ä¼°ç»“æœçš„åé¦ˆã€‚å› æ­¤ï¼Œå®ƒåªæ˜¯é¿å¼€äº†å±€éƒ¨æœ€ä¼˜ã€‚\n\n![image-20221110215653038](https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221110215653038.png)","slug":"A-multi-faceted-optimization-scheduling-framework","published":1,"updated":"2022-11-14T14:29:36.373Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clas9ert6001jdk8f4x1c68qk","content":"<h1 id=\"äº‘è®¡ç®—ä¸­åŸºäºç²’å­ç¾¤ä¼˜åŒ–ç®—æ³•çš„å¤šé¢ä¼˜åŒ–è°ƒåº¦æ¡†æ¶\"><a href=\"#äº‘è®¡ç®—ä¸­åŸºäºç²’å­ç¾¤ä¼˜åŒ–ç®—æ³•çš„å¤šé¢ä¼˜åŒ–è°ƒåº¦æ¡†æ¶\" class=\"headerlink\" title=\"äº‘è®¡ç®—ä¸­åŸºäºç²’å­ç¾¤ä¼˜åŒ–ç®—æ³•çš„å¤šé¢ä¼˜åŒ–è°ƒåº¦æ¡†æ¶\"></a>äº‘è®¡ç®—ä¸­åŸºäºç²’å­ç¾¤ä¼˜åŒ–ç®—æ³•çš„å¤šé¢ä¼˜åŒ–è°ƒåº¦æ¡†æ¶</h1><p>åœ¨äº‘è®¡ç®—ä¸­ï¼Œç”±äºå„ç§èµ„æºéœ€æ±‚å’Œå¤šä¸ªä½œä¸šçš„æ‰§è¡Œï¼Œåœ¨æ€§èƒ½å’Œæˆæœ¬ä¼˜åŒ–æ–¹é¢å­˜åœ¨é‡å¤§é—®é¢˜</p>\n<p>ä»»åŠ¡å’Œèµ„æºå¤šæ ·æ€§ï¼Œå ç”¨CPUå’Œå­˜å‚¨ï¼Œéš¾ä»¥ä¼˜åŒ–</p>\n<p>åˆ›æ–°ï¼š</p>\n<p>1.è€ƒè™‘ä»»åŠ¡å¯¹èµ„æºéœ€æ±‚çš„å·®å¼‚ï¼Œæå‡ºäº†èµ„æºæˆæœ¬æ—¶é—´è½´æ¨¡å‹</p>\n<p>2.æå‡ºäº†ä¸€ç§åŸºäºç²’å­ç¾¤ä¼˜åŒ–ç®—æ³•(EPBPSO)çš„è°ƒåº¦æ¨¡å‹ä¸­çš„å¢å¼ºå‹æ€§èƒ½é¢„ç®—ç®—æ³•ï¼Œè¯¥ç®—æ³•åœ¨å®ç°å¤šé¢ä¼˜åŒ–è°ƒåº¦æ–¹é¢å…·æœ‰å¾ˆå¤§çš„ä¼˜åŠ¿</p>\n<p>ç ”ç©¶å†…å®¹ï¼šæå‡ºäº†ä¸€ç§å¢å¼ºçš„ç²’å­ç¾¤ç®—æ³•ï¼Œä½¿å…¶èƒ½å¤Ÿæ ¹æ®è§£çš„è´¨é‡è¿›è¡Œè‡ªæˆ‘è°ƒæ•´ã€‚ä¼˜åŒ–æ€§èƒ½å’Œæˆæœ¬</p>\n<p>è´¡çŒ®ï¼š</p>\n<p>1.ä¸€ä¸ªæ¨¡å‹ï¼šä¸ºäº†å®šä¹‰ä»»åŠ¡å¯¹ç‰¹å®šèµ„æºçš„éœ€æ±‚ç»†èŠ‚ï¼Œæå‡ºäº†ä¸€ä¸ªæ¨¡å‹ï¼Œå³èµ„æºæˆæœ¬æ—¶é—´è½´æ¨¡å‹(resource Cost Timeline model)ã€‚è¯¥æ¨¡å‹æœ‰åŠ©äºç”¨æˆ·é¢„ç®—å’Œèµ„æºæˆæœ¬çš„è®¡ç®—ã€‚</p>\n<p>2.ä¸€ä¸ªæ¡†æ¶ï¼šé’ˆå¯¹æ€§èƒ½ã€æˆæœ¬å’Œå¯é æ€§ã€æœŸé™ã€å¯æ‰©å±•æ€§ç­‰å„ä¸ªæ–¹é¢ï¼Œæå‡ºäº†åŸºäºç²’å­ç¾¤ç®—æ³•çš„å¤šé¢è°ƒåº¦ä¼˜åŒ–æ¡†æ¶ã€‚</p>\n<p>3.ä¸€ä¸ªç®—æ³•ï¼šåœ¨ç²’å­ç¾¤ç®—æ³•çš„åŸºç¡€ä¸Šï¼Œæå‡ºäº†ä¸€ç§ä¸»è¦è€ƒè™‘æ€§èƒ½å’Œé¢„ç®—æˆæœ¬ä¸¤ä¸ªçº¦æŸæ¡ä»¶çš„å¢å¼ºæ€§èƒ½é¢„ç®—çš„ç²’å­ç¾¤ä¼˜åŒ–ç®—æ³•ã€‚å¢å¼ºæ€§èƒ½é¢„ç®—çš„ç²’å­ç¾¤ç®—æ³•è§£å†³äº†åŸç²’å­ç¾¤ç®—æ³•å®¹æ˜“é™·å…¥å±€éƒ¨æœ€ä¼˜çš„é—®é¢˜ã€‚</p>\n<p>å·¥ä½œï¼š</p>\n<p>é¦–å…ˆéœ€è¦é‡åŒ–ä»»åŠ¡çš„æˆæœ¬ï¼Œä»¥ä¾¿äºè®¡ç®—å‡ºæ¯ä¸ªä»»åŠ¡å¯¹èµ„æºçš„éœ€æ±‚ï¼Œå¯ä»¥å°†ä»»åŠ¡æˆæœ¬å’Œèµ„æºæˆæœ¬ä½œä¸ºä¸¤ä¸ªå‚æ•°ï¼Œç”±äºç¯å¢ƒçš„å¼‚è´¨æ€§å’Œèµ„æºçš„å¤šæ ·æ€§ï¼Œåœ¨å¾ˆå¤šåœºæ™¯ä¸­ï¼Œæ²¡æœ‰ä¸ºæ¯ä¸ªèµ„æºæä¾›ä»»åŠ¡éœ€æ±‚ï¼Œè¿™å¢åŠ äº†å¤æ‚æ€§ã€‚</p>\n<p>ç”±äºç²’å­ç¾¤ç®—æ³•çš„ç¼ºç‚¹ï¼Œæ²¡æœ‰å……åˆ†è€ƒè™‘åé¦ˆçš„è¯„ä»·å’Œè§£çš„è´¨é‡ï¼Œå¯¼è‡´äº†åœ¨é«˜ç»´ç©ºé—´çš„å±€éƒ¨æœ€ä¼˜ã€‚æœ¬æ–‡å°†ä»£è¡¨ä¸€ä¸ªè€ƒè™‘æ€§èƒ½å’Œæˆæœ¬ä¸¤ä¸ªè´¨é‡å‚æ•°çš„æ¡†æ¶ï¼Œå¹¶å°†å…¶è¾“å‡ºä¸ä»¥å‰çš„ç»“æœç›¸åŒ¹é…ã€‚</p>\n<h1 id=\"é—®é¢˜çš„å®šä¹‰å’Œè¡¨è¿°\"><a href=\"#é—®é¢˜çš„å®šä¹‰å’Œè¡¨è¿°\" class=\"headerlink\" title=\"é—®é¢˜çš„å®šä¹‰å’Œè¡¨è¿°\"></a>é—®é¢˜çš„å®šä¹‰å’Œè¡¨è¿°</h1><p>é—®é¢˜çš„æ¡†æ¶å’Œä¸åŒæœ¯è¯­çš„å‡ ä¸ªå®šä¹‰åˆ†åˆ«å¦‚å›¾1å’Œè¡¨1æ‰€ç¤º</p>\n<h2 id=\"ä»»åŠ¡å’Œèµ„æºçš„å®šä¹‰\"><a href=\"#ä»»åŠ¡å’Œèµ„æºçš„å®šä¹‰\" class=\"headerlink\" title=\"ä»»åŠ¡å’Œèµ„æºçš„å®šä¹‰\"></a>ä»»åŠ¡å’Œèµ„æºçš„å®šä¹‰</h2><p>é¦–å…ˆï¼Œè®¤ä¸ºå½“å‰äº‘è®¡ç®—ç³»ç»Ÿä¸­æœ‰Nä¸ªèµ„æºR &#x3D; {R1, R2, R3â€¦RN}ï¼Œæœ‰Mä¸ªä»»åŠ¡T &#x3D; {T1, T2, T3â€¦TM)ã€‚ä»»åŠ¡è¢«ç§°ä¸ºcloudletï¼Œäº‘èµ„æºè¢«ç§°ä¸ºè™šæ‹Ÿèµ„æºã€‚</p>\n<p><strong>å®šä¹‰1</strong><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221110205617740.png\"\n                      alt=\"image-20221110205617740\"\n                >è¿™äº›å‚æ•°ç”±ç”¨æˆ·æäº¤ç»™ä»£ç†ï¼Œæœ€åæäº¤ç»™ä»»åŠ¡ç®¡ç†å™¨ã€‚</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221110205635031.png\"\n                      alt=\"image-20221110205635031\"\n                ></p>\n<p><strong>å®šä¹‰2</strong>   ***(Resources)***æ•°æ®ä¸­å¿ƒä¸­çš„æ¯ä¸ªè™šæ‹Ÿèµ„æºä¸»è¦ç”±å…¶å†…å­˜å’ŒCPUä¸¤ä¸ªå‚æ•°å®šä¹‰ï¼Œ<img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221110210153487.png\"\n                      alt=\"image-20221110210153487\"\n                >è¿™ä¸¤ä¸ªå‚æ•°åˆ†åˆ«ç”¨Memory usageå’ŒCPU utilizationè¡¨ç¤º</p>\n<p>æå‡ºçš„ä¸Šè¿°é—®é¢˜çš„ç³»ç»Ÿæ¡†æ¶æ¨¡å‹å¦‚å›¾1æ‰€ç¤ºã€‚åœ¨è¿™é‡Œï¼Œç”¨æˆ·ä»¥cloudletå½¢å¼ç»™å‡ºçš„è¯·æ±‚è¢«æäº¤ç»™Brokerã€‚Brokerå°†ç”¨æˆ·è¯·æ±‚æäº¤ç»™ä»»åŠ¡ç®¡ç†å™¨ï¼Œä»»åŠ¡ç®¡ç†å™¨å°†ç”¨æˆ·è¯·æ±‚åˆ†ä¸ºä»å±è¯·æ±‚å’Œä»å±è¯·æ±‚</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221110204713335.png\"\n                      alt=\"image-20221110204713335\"\n                ></p>\n<p>æå‡ºçš„ä¸Šè¿°é—®é¢˜çš„ç³»ç»Ÿæ¡†æ¶æ¨¡å‹å¦‚å›¾1æ‰€ç¤ºã€‚åœ¨è¿™é‡Œï¼Œç”¨æˆ·ä»¥cloudletå½¢å¼ç»™å‡ºçš„è¯·æ±‚è¢«æäº¤ç»™Brokerã€‚Brokerå°†ç”¨æˆ·è¯·æ±‚æäº¤ç»™ä»»åŠ¡ç®¡ç†å™¨ï¼Œä»»åŠ¡ç®¡ç†å™¨å°†ç”¨æˆ·è¯·æ±‚åˆ†ä¸ºä»å±è¯·æ±‚å’Œç‹¬ç«‹è¯·æ±‚ï¼Œä¿¡æ¯æœ€åæäº¤ç»™è°ƒåº¦å™¨ã€‚</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221110204654048.png\"\n                      alt=\"image-20221110204654048\"\n                ></p>\n<p>CPUä¿¡æ¯å’Œå†…å­˜è´Ÿè½½ä¿¡æ¯ç”±æœ¬åœ°èµ„æºç®¡ç†å™¨æ”¶é›†ï¼Œæœ€åå°†è¿™äº›ä¿¡æ¯æäº¤ç»™å…¨å±€èµ„æºç®¡ç†å™¨ã€‚æœ¬åœ°è™šæ‹Ÿæœºçš„ç›‘è§†å’Œç®¡ç†ç”±æœ¬åœ°èµ„æºç®¡ç†å™¨å®Œæˆ(ä¾‹å¦‚ï¼Œç‰¹å®šä»»åŠ¡åœ¨ç‰¹å®šèµ„æºä¸ŠèŠ±è´¹çš„æ—¶é—´)ã€‚æœ€åï¼Œä»èµ„æºæˆæœ¬æ—¶é—´è½´æ¨¡å‹ä¸­ï¼Œåˆ©ç”¨å…¨å±€èµ„æºç®¡ç†å™¨æä¾›çš„å…ˆéªŒä¿¡æ¯æ¥è¯„ä¼°æˆæœ¬ã€‚</p>\n<h2 id=\"èµ„æºæˆæœ¬æ—¶é—´è¡¨æ¨¡å‹\"><a href=\"#èµ„æºæˆæœ¬æ—¶é—´è¡¨æ¨¡å‹\" class=\"headerlink\" title=\"èµ„æºæˆæœ¬æ—¶é—´è¡¨æ¨¡å‹\"></a>èµ„æºæˆæœ¬æ—¶é—´è¡¨æ¨¡å‹</h2><p>é¦–å…ˆï¼Œå»ºç«‹äº†<strong>ç”¨æˆ·é¢„ç®—</strong>ä¸<strong>èµ„æºæˆæœ¬</strong>çš„å…³ç³»æ¨¡å‹;æå‡ºäº†ä¸€ä¸ªåŸºäº<strong>æ€§èƒ½</strong>å’Œ<strong>é¢„ç®—çº¦æŸ</strong>çš„å¤šå±‚é¢ä¼˜åŒ–è°ƒåº¦æ¡†æ¶ã€‚</p>\n<h3 id=\"èµ„æºæˆæœ¬æ¨¡å‹\"><a href=\"#èµ„æºæˆæœ¬æ¨¡å‹\" class=\"headerlink\" title=\"èµ„æºæˆæœ¬æ¨¡å‹\"></a>èµ„æºæˆæœ¬æ¨¡å‹</h3><p>ç”±äºäº‘è®¡ç®—ä¸­ä»»åŠ¡å’Œèµ„æºçš„å¤šæ ·æ€§ï¼Œåæ˜ ä»»åŠ¡æˆæœ¬å’Œç”¨æˆ·é¢„ç®—æˆæœ¬ä¸èµ„æºæˆæœ¬ä¹‹é—´çš„å…³ç³»æ˜¯æœ‰æ•ˆçš„ã€‚æˆ‘ä»¬ä¼šå‘ç°ä¸åŒèµ„æºçš„æˆæœ¬æ˜¯ä¸åŒçš„ï¼Œä»»åŠ¡çš„æˆæœ¬ä¹Ÿæ˜¯ä¸åŒçš„ï¼Œå› ä¸ºæœ‰äº›ä»»åŠ¡éœ€è¦å¾ˆå¤šCPUèµ„æºï¼Œè€Œæœ‰äº›ä»»åŠ¡åˆ™ä¾èµ–äºå†…å­˜éœ€æ±‚ã€‚</p>\n<p>åœ¨è¿™ä¸ªæ¨¡å‹ä¸‹ï¼Œè€ƒè™‘ä¸‰ç§ç±»å‹çš„æˆæœ¬:</p>\n<p>a) Memory Cost<br>b) CPU Cost<br>c) Total Budget Cost</p>\n<p><strong>Memory Cost</strong><br>å†…å­˜å¼€é”€åŒ…æ‹¬å†…å­˜çš„æœ€å°å¼€é”€ï¼Œå³1gbï¼Œä»»åŠ¡åœ¨ç‰¹å®šèµ„æºtijä¸Šè¿è¡Œçš„æŒç»­æ—¶é—´ï¼Œä¸å†…å­˜ä¼ è¾“ç›¸å…³çš„å¼€é”€ï¼ŒMjæ˜¯ç‰¹å®šèµ„æºjçš„å†…å­˜å¼€é”€ã€‚</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221110213255728.png\"\n                      alt=\"image-20221110213255728\"\n                ></p>\n<p><strong>CPU Cost</strong><br>ç±»ä¼¼åœ°ï¼ŒCPUæˆæœ¬ä¹Ÿå°†åŒ…æ‹¬æœ€å°åˆ©ç”¨æˆæœ¬Cminã€ä»»åŠ¡æŒç»­æ—¶é—´tijã€ä¸CPUä¼ è¾“ç›¸å…³çš„æˆæœ¬å’ŒCPUæˆæœ¬Cjã€‚</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221110213702220.png\"\n                      alt=\"image-20221110213702220\"\n                ></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221110213710739.png\"\n                      alt=\"image-20221110213710739\"\n                ></p>\n<p><strong>Total Budget Cost</strong><br>æ€»é¢„ç®—æˆæœ¬æ˜¯CPUæ€»æˆæœ¬å’Œå†…å­˜æ€»æˆæœ¬çš„æ€»å’Œã€‚</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221110213745530.png\"\n                      alt=\"image-20221110213745530\"\n                ></p>\n<p>å› æ­¤ï¼Œç‰¹å®šèµ„æºçš„æœ€ç»ˆé¢„ç®—åœ¨ç­‰å¼ä¸­è®¡ç®—ã€‚(6)å€ŸåŠ©äºç­‰å¼è®¡ç®—çš„æ€»é¢„ç®—æˆæœ¬(5).</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221110213836899.png\"\n                      alt=\"image-20221110213836899\"\n                ></p>\n<h3 id=\"æ—¶é—´è½´æ¨¡å‹\"><a href=\"#æ—¶é—´è½´æ¨¡å‹\" class=\"headerlink\" title=\"æ—¶é—´è½´æ¨¡å‹\"></a>æ—¶é—´è½´æ¨¡å‹</h3><p>åœ¨æ—¶é—´çº¿æ¨¡å‹ä¸­ï¼Œæˆ‘ä»¬è€ƒè™‘ä»»åŠ¡åœ¨å¤šä¸ªèµ„æºä¸Šçš„æ€»æ‰§è¡Œæ—¶é—´ï¼Œå¹¶ä¸”æ€»æ‰§è¡Œæ—¶é—´ä¸åº”è¯¥è¶…è¿‡æ ¹æ®æœåŠ¡æ°´å¹³åè®®(SLA)çš„æˆªæ­¢æ—¶é—´ï¼Œä¸€ä¸ªç‰¹å®šä»»åŠ¡ä½¿ç”¨çš„èµ„æºå¯ä»¥è¾¾åˆ°nã€‚</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221110214635032.png\"\n                      alt=\"image-20221110214635032\"\n                ></p>\n<h3 id=\"è°ƒåº¦æ¨¡å‹ä¸­åŸºäºç²’å­ç¾¤ä¼˜åŒ–çš„å¤šæ–¹ä½ä¼˜åŒ–è°ƒåº¦æ¡†æ¶\"><a href=\"#è°ƒåº¦æ¨¡å‹ä¸­åŸºäºç²’å­ç¾¤ä¼˜åŒ–çš„å¤šæ–¹ä½ä¼˜åŒ–è°ƒåº¦æ¡†æ¶\" class=\"headerlink\" title=\"è°ƒåº¦æ¨¡å‹ä¸­åŸºäºç²’å­ç¾¤ä¼˜åŒ–çš„å¤šæ–¹ä½ä¼˜åŒ–è°ƒåº¦æ¡†æ¶\"></a>è°ƒåº¦æ¨¡å‹ä¸­åŸºäºç²’å­ç¾¤ä¼˜åŒ–çš„å¤šæ–¹ä½ä¼˜åŒ–è°ƒåº¦æ¡†æ¶</h3><p>ä¼˜åŒ–è°ƒåº¦é—®é¢˜çš„å‡ ä¸ªå‚æ•°æ˜¯æ€§èƒ½ã€æˆæœ¬ã€æœŸé™å’Œé¢„ç®—æˆæœ¬ã€‚å¯»æ‰¾è¿™ç±»ç»„åˆé—®é¢˜çš„æœ€ä¼˜è§£æ˜¯å›°éš¾çš„ã€‚ç²’å­ç¾¤ä¼˜åŒ–ç®—æ³•åœ¨å¯»æ‰¾è¿™ç§ç»„åˆé—®é¢˜çš„è§£æ–¹é¢å…·æœ‰ä¼˜åŠ¿ã€‚ç²’å­ç¾¤ç®—æ³•å·²è¢«ç”¨äºå„ç§å„ç§è°ƒåº¦é—®é¢˜ï¼Œä¸å…¶ä»–åŸºäºè‡ªç„¶çš„ç®—æ³•ç›¸æ¯”ï¼Œå–å¾—äº†è¾ƒå¥½çš„ç»“æœã€‚ç„¶è€Œï¼Œç²’å­ç¾¤ç®—æ³•æœ‰é™·å…¥å±€éƒ¨æœ€ä¼˜è§£çš„ç¼ºç‚¹ã€‚å› æ­¤ï¼Œæœ¬æ–‡æå‡ºäº†ä¸€ç§å¢å¼ºå‹ç²’å­ç¾¤ä¼˜åŒ–ç®—æ³•ã€‚ä½¿ç”¨åˆé€‚çš„å‡½æ•°ï¼Œå®ƒæä¾›è§£å†³æ–¹æ¡ˆçš„è´¨é‡å’Œå¯¹è¯„ä¼°ç»“æœçš„åé¦ˆã€‚å› æ­¤ï¼Œå®ƒåªæ˜¯é¿å¼€äº†å±€éƒ¨æœ€ä¼˜ã€‚</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221110215653038.png\"\n                      alt=\"image-20221110215653038\"\n                ></p>\n","site":{"data":{"links":[{"name":"CZMæœ‰ç‚¹å†·","link":"https://czm.cool/","description":"CZMçš„åšå®¢","avatar":"https://img.czm.cool/avatar/avatar.png"},{"name":"PSH","link":"https://shamd.cloud/","description":"PSHçš„åšå®¢.","avatar":"https://shamd.cloud/upload/2022/07/afbb577733f46c9535dd1d6d6388278.jpg"},{"name":"KAI","link":"https://kainote.top/","description":"love artist, love code.","avatar":"https://cdn.jsdelivr.net/gh/kaix2301/pictures/img202201072101018.jpg"}]}},"excerpt":"","more":"<h1 id=\"äº‘è®¡ç®—ä¸­åŸºäºç²’å­ç¾¤ä¼˜åŒ–ç®—æ³•çš„å¤šé¢ä¼˜åŒ–è°ƒåº¦æ¡†æ¶\"><a href=\"#äº‘è®¡ç®—ä¸­åŸºäºç²’å­ç¾¤ä¼˜åŒ–ç®—æ³•çš„å¤šé¢ä¼˜åŒ–è°ƒåº¦æ¡†æ¶\" class=\"headerlink\" title=\"äº‘è®¡ç®—ä¸­åŸºäºç²’å­ç¾¤ä¼˜åŒ–ç®—æ³•çš„å¤šé¢ä¼˜åŒ–è°ƒåº¦æ¡†æ¶\"></a>äº‘è®¡ç®—ä¸­åŸºäºç²’å­ç¾¤ä¼˜åŒ–ç®—æ³•çš„å¤šé¢ä¼˜åŒ–è°ƒåº¦æ¡†æ¶</h1><p>åœ¨äº‘è®¡ç®—ä¸­ï¼Œç”±äºå„ç§èµ„æºéœ€æ±‚å’Œå¤šä¸ªä½œä¸šçš„æ‰§è¡Œï¼Œåœ¨æ€§èƒ½å’Œæˆæœ¬ä¼˜åŒ–æ–¹é¢å­˜åœ¨é‡å¤§é—®é¢˜</p>\n<p>ä»»åŠ¡å’Œèµ„æºå¤šæ ·æ€§ï¼Œå ç”¨CPUå’Œå­˜å‚¨ï¼Œéš¾ä»¥ä¼˜åŒ–</p>\n<p>åˆ›æ–°ï¼š</p>\n<p>1.è€ƒè™‘ä»»åŠ¡å¯¹èµ„æºéœ€æ±‚çš„å·®å¼‚ï¼Œæå‡ºäº†èµ„æºæˆæœ¬æ—¶é—´è½´æ¨¡å‹</p>\n<p>2.æå‡ºäº†ä¸€ç§åŸºäºç²’å­ç¾¤ä¼˜åŒ–ç®—æ³•(EPBPSO)çš„è°ƒåº¦æ¨¡å‹ä¸­çš„å¢å¼ºå‹æ€§èƒ½é¢„ç®—ç®—æ³•ï¼Œè¯¥ç®—æ³•åœ¨å®ç°å¤šé¢ä¼˜åŒ–è°ƒåº¦æ–¹é¢å…·æœ‰å¾ˆå¤§çš„ä¼˜åŠ¿</p>\n<p>ç ”ç©¶å†…å®¹ï¼šæå‡ºäº†ä¸€ç§å¢å¼ºçš„ç²’å­ç¾¤ç®—æ³•ï¼Œä½¿å…¶èƒ½å¤Ÿæ ¹æ®è§£çš„è´¨é‡è¿›è¡Œè‡ªæˆ‘è°ƒæ•´ã€‚ä¼˜åŒ–æ€§èƒ½å’Œæˆæœ¬</p>\n<p>è´¡çŒ®ï¼š</p>\n<p>1.ä¸€ä¸ªæ¨¡å‹ï¼šä¸ºäº†å®šä¹‰ä»»åŠ¡å¯¹ç‰¹å®šèµ„æºçš„éœ€æ±‚ç»†èŠ‚ï¼Œæå‡ºäº†ä¸€ä¸ªæ¨¡å‹ï¼Œå³èµ„æºæˆæœ¬æ—¶é—´è½´æ¨¡å‹(resource Cost Timeline model)ã€‚è¯¥æ¨¡å‹æœ‰åŠ©äºç”¨æˆ·é¢„ç®—å’Œèµ„æºæˆæœ¬çš„è®¡ç®—ã€‚</p>\n<p>2.ä¸€ä¸ªæ¡†æ¶ï¼šé’ˆå¯¹æ€§èƒ½ã€æˆæœ¬å’Œå¯é æ€§ã€æœŸé™ã€å¯æ‰©å±•æ€§ç­‰å„ä¸ªæ–¹é¢ï¼Œæå‡ºäº†åŸºäºç²’å­ç¾¤ç®—æ³•çš„å¤šé¢è°ƒåº¦ä¼˜åŒ–æ¡†æ¶ã€‚</p>\n<p>3.ä¸€ä¸ªç®—æ³•ï¼šåœ¨ç²’å­ç¾¤ç®—æ³•çš„åŸºç¡€ä¸Šï¼Œæå‡ºäº†ä¸€ç§ä¸»è¦è€ƒè™‘æ€§èƒ½å’Œé¢„ç®—æˆæœ¬ä¸¤ä¸ªçº¦æŸæ¡ä»¶çš„å¢å¼ºæ€§èƒ½é¢„ç®—çš„ç²’å­ç¾¤ä¼˜åŒ–ç®—æ³•ã€‚å¢å¼ºæ€§èƒ½é¢„ç®—çš„ç²’å­ç¾¤ç®—æ³•è§£å†³äº†åŸç²’å­ç¾¤ç®—æ³•å®¹æ˜“é™·å…¥å±€éƒ¨æœ€ä¼˜çš„é—®é¢˜ã€‚</p>\n<p>å·¥ä½œï¼š</p>\n<p>é¦–å…ˆéœ€è¦é‡åŒ–ä»»åŠ¡çš„æˆæœ¬ï¼Œä»¥ä¾¿äºè®¡ç®—å‡ºæ¯ä¸ªä»»åŠ¡å¯¹èµ„æºçš„éœ€æ±‚ï¼Œå¯ä»¥å°†ä»»åŠ¡æˆæœ¬å’Œèµ„æºæˆæœ¬ä½œä¸ºä¸¤ä¸ªå‚æ•°ï¼Œç”±äºç¯å¢ƒçš„å¼‚è´¨æ€§å’Œèµ„æºçš„å¤šæ ·æ€§ï¼Œåœ¨å¾ˆå¤šåœºæ™¯ä¸­ï¼Œæ²¡æœ‰ä¸ºæ¯ä¸ªèµ„æºæä¾›ä»»åŠ¡éœ€æ±‚ï¼Œè¿™å¢åŠ äº†å¤æ‚æ€§ã€‚</p>\n<p>ç”±äºç²’å­ç¾¤ç®—æ³•çš„ç¼ºç‚¹ï¼Œæ²¡æœ‰å……åˆ†è€ƒè™‘åé¦ˆçš„è¯„ä»·å’Œè§£çš„è´¨é‡ï¼Œå¯¼è‡´äº†åœ¨é«˜ç»´ç©ºé—´çš„å±€éƒ¨æœ€ä¼˜ã€‚æœ¬æ–‡å°†ä»£è¡¨ä¸€ä¸ªè€ƒè™‘æ€§èƒ½å’Œæˆæœ¬ä¸¤ä¸ªè´¨é‡å‚æ•°çš„æ¡†æ¶ï¼Œå¹¶å°†å…¶è¾“å‡ºä¸ä»¥å‰çš„ç»“æœç›¸åŒ¹é…ã€‚</p>\n<h1 id=\"é—®é¢˜çš„å®šä¹‰å’Œè¡¨è¿°\"><a href=\"#é—®é¢˜çš„å®šä¹‰å’Œè¡¨è¿°\" class=\"headerlink\" title=\"é—®é¢˜çš„å®šä¹‰å’Œè¡¨è¿°\"></a>é—®é¢˜çš„å®šä¹‰å’Œè¡¨è¿°</h1><p>é—®é¢˜çš„æ¡†æ¶å’Œä¸åŒæœ¯è¯­çš„å‡ ä¸ªå®šä¹‰åˆ†åˆ«å¦‚å›¾1å’Œè¡¨1æ‰€ç¤º</p>\n<h2 id=\"ä»»åŠ¡å’Œèµ„æºçš„å®šä¹‰\"><a href=\"#ä»»åŠ¡å’Œèµ„æºçš„å®šä¹‰\" class=\"headerlink\" title=\"ä»»åŠ¡å’Œèµ„æºçš„å®šä¹‰\"></a>ä»»åŠ¡å’Œèµ„æºçš„å®šä¹‰</h2><p>é¦–å…ˆï¼Œè®¤ä¸ºå½“å‰äº‘è®¡ç®—ç³»ç»Ÿä¸­æœ‰Nä¸ªèµ„æºR &#x3D; {R1, R2, R3â€¦RN}ï¼Œæœ‰Mä¸ªä»»åŠ¡T &#x3D; {T1, T2, T3â€¦TM)ã€‚ä»»åŠ¡è¢«ç§°ä¸ºcloudletï¼Œäº‘èµ„æºè¢«ç§°ä¸ºè™šæ‹Ÿèµ„æºã€‚</p>\n<p><strong>å®šä¹‰1</strong><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221110205617740.png\"\n                      alt=\"image-20221110205617740\"\n                >è¿™äº›å‚æ•°ç”±ç”¨æˆ·æäº¤ç»™ä»£ç†ï¼Œæœ€åæäº¤ç»™ä»»åŠ¡ç®¡ç†å™¨ã€‚</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221110205635031.png\"\n                      alt=\"image-20221110205635031\"\n                ></p>\n<p><strong>å®šä¹‰2</strong>   ***(Resources)***æ•°æ®ä¸­å¿ƒä¸­çš„æ¯ä¸ªè™šæ‹Ÿèµ„æºä¸»è¦ç”±å…¶å†…å­˜å’ŒCPUä¸¤ä¸ªå‚æ•°å®šä¹‰ï¼Œ<img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221110210153487.png\"\n                      alt=\"image-20221110210153487\"\n                >è¿™ä¸¤ä¸ªå‚æ•°åˆ†åˆ«ç”¨Memory usageå’ŒCPU utilizationè¡¨ç¤º</p>\n<p>æå‡ºçš„ä¸Šè¿°é—®é¢˜çš„ç³»ç»Ÿæ¡†æ¶æ¨¡å‹å¦‚å›¾1æ‰€ç¤ºã€‚åœ¨è¿™é‡Œï¼Œç”¨æˆ·ä»¥cloudletå½¢å¼ç»™å‡ºçš„è¯·æ±‚è¢«æäº¤ç»™Brokerã€‚Brokerå°†ç”¨æˆ·è¯·æ±‚æäº¤ç»™ä»»åŠ¡ç®¡ç†å™¨ï¼Œä»»åŠ¡ç®¡ç†å™¨å°†ç”¨æˆ·è¯·æ±‚åˆ†ä¸ºä»å±è¯·æ±‚å’Œä»å±è¯·æ±‚</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221110204713335.png\"\n                      alt=\"image-20221110204713335\"\n                ></p>\n<p>æå‡ºçš„ä¸Šè¿°é—®é¢˜çš„ç³»ç»Ÿæ¡†æ¶æ¨¡å‹å¦‚å›¾1æ‰€ç¤ºã€‚åœ¨è¿™é‡Œï¼Œç”¨æˆ·ä»¥cloudletå½¢å¼ç»™å‡ºçš„è¯·æ±‚è¢«æäº¤ç»™Brokerã€‚Brokerå°†ç”¨æˆ·è¯·æ±‚æäº¤ç»™ä»»åŠ¡ç®¡ç†å™¨ï¼Œä»»åŠ¡ç®¡ç†å™¨å°†ç”¨æˆ·è¯·æ±‚åˆ†ä¸ºä»å±è¯·æ±‚å’Œç‹¬ç«‹è¯·æ±‚ï¼Œä¿¡æ¯æœ€åæäº¤ç»™è°ƒåº¦å™¨ã€‚</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221110204654048.png\"\n                      alt=\"image-20221110204654048\"\n                ></p>\n<p>CPUä¿¡æ¯å’Œå†…å­˜è´Ÿè½½ä¿¡æ¯ç”±æœ¬åœ°èµ„æºç®¡ç†å™¨æ”¶é›†ï¼Œæœ€åå°†è¿™äº›ä¿¡æ¯æäº¤ç»™å…¨å±€èµ„æºç®¡ç†å™¨ã€‚æœ¬åœ°è™šæ‹Ÿæœºçš„ç›‘è§†å’Œç®¡ç†ç”±æœ¬åœ°èµ„æºç®¡ç†å™¨å®Œæˆ(ä¾‹å¦‚ï¼Œç‰¹å®šä»»åŠ¡åœ¨ç‰¹å®šèµ„æºä¸ŠèŠ±è´¹çš„æ—¶é—´)ã€‚æœ€åï¼Œä»èµ„æºæˆæœ¬æ—¶é—´è½´æ¨¡å‹ä¸­ï¼Œåˆ©ç”¨å…¨å±€èµ„æºç®¡ç†å™¨æä¾›çš„å…ˆéªŒä¿¡æ¯æ¥è¯„ä¼°æˆæœ¬ã€‚</p>\n<h2 id=\"èµ„æºæˆæœ¬æ—¶é—´è¡¨æ¨¡å‹\"><a href=\"#èµ„æºæˆæœ¬æ—¶é—´è¡¨æ¨¡å‹\" class=\"headerlink\" title=\"èµ„æºæˆæœ¬æ—¶é—´è¡¨æ¨¡å‹\"></a>èµ„æºæˆæœ¬æ—¶é—´è¡¨æ¨¡å‹</h2><p>é¦–å…ˆï¼Œå»ºç«‹äº†<strong>ç”¨æˆ·é¢„ç®—</strong>ä¸<strong>èµ„æºæˆæœ¬</strong>çš„å…³ç³»æ¨¡å‹;æå‡ºäº†ä¸€ä¸ªåŸºäº<strong>æ€§èƒ½</strong>å’Œ<strong>é¢„ç®—çº¦æŸ</strong>çš„å¤šå±‚é¢ä¼˜åŒ–è°ƒåº¦æ¡†æ¶ã€‚</p>\n<h3 id=\"èµ„æºæˆæœ¬æ¨¡å‹\"><a href=\"#èµ„æºæˆæœ¬æ¨¡å‹\" class=\"headerlink\" title=\"èµ„æºæˆæœ¬æ¨¡å‹\"></a>èµ„æºæˆæœ¬æ¨¡å‹</h3><p>ç”±äºäº‘è®¡ç®—ä¸­ä»»åŠ¡å’Œèµ„æºçš„å¤šæ ·æ€§ï¼Œåæ˜ ä»»åŠ¡æˆæœ¬å’Œç”¨æˆ·é¢„ç®—æˆæœ¬ä¸èµ„æºæˆæœ¬ä¹‹é—´çš„å…³ç³»æ˜¯æœ‰æ•ˆçš„ã€‚æˆ‘ä»¬ä¼šå‘ç°ä¸åŒèµ„æºçš„æˆæœ¬æ˜¯ä¸åŒçš„ï¼Œä»»åŠ¡çš„æˆæœ¬ä¹Ÿæ˜¯ä¸åŒçš„ï¼Œå› ä¸ºæœ‰äº›ä»»åŠ¡éœ€è¦å¾ˆå¤šCPUèµ„æºï¼Œè€Œæœ‰äº›ä»»åŠ¡åˆ™ä¾èµ–äºå†…å­˜éœ€æ±‚ã€‚</p>\n<p>åœ¨è¿™ä¸ªæ¨¡å‹ä¸‹ï¼Œè€ƒè™‘ä¸‰ç§ç±»å‹çš„æˆæœ¬:</p>\n<p>a) Memory Cost<br>b) CPU Cost<br>c) Total Budget Cost</p>\n<p><strong>Memory Cost</strong><br>å†…å­˜å¼€é”€åŒ…æ‹¬å†…å­˜çš„æœ€å°å¼€é”€ï¼Œå³1gbï¼Œä»»åŠ¡åœ¨ç‰¹å®šèµ„æºtijä¸Šè¿è¡Œçš„æŒç»­æ—¶é—´ï¼Œä¸å†…å­˜ä¼ è¾“ç›¸å…³çš„å¼€é”€ï¼ŒMjæ˜¯ç‰¹å®šèµ„æºjçš„å†…å­˜å¼€é”€ã€‚</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221110213255728.png\"\n                      alt=\"image-20221110213255728\"\n                ></p>\n<p><strong>CPU Cost</strong><br>ç±»ä¼¼åœ°ï¼ŒCPUæˆæœ¬ä¹Ÿå°†åŒ…æ‹¬æœ€å°åˆ©ç”¨æˆæœ¬Cminã€ä»»åŠ¡æŒç»­æ—¶é—´tijã€ä¸CPUä¼ è¾“ç›¸å…³çš„æˆæœ¬å’ŒCPUæˆæœ¬Cjã€‚</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221110213702220.png\"\n                      alt=\"image-20221110213702220\"\n                ></p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221110213710739.png\"\n                      alt=\"image-20221110213710739\"\n                ></p>\n<p><strong>Total Budget Cost</strong><br>æ€»é¢„ç®—æˆæœ¬æ˜¯CPUæ€»æˆæœ¬å’Œå†…å­˜æ€»æˆæœ¬çš„æ€»å’Œã€‚</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221110213745530.png\"\n                      alt=\"image-20221110213745530\"\n                ></p>\n<p>å› æ­¤ï¼Œç‰¹å®šèµ„æºçš„æœ€ç»ˆé¢„ç®—åœ¨ç­‰å¼ä¸­è®¡ç®—ã€‚(6)å€ŸåŠ©äºç­‰å¼è®¡ç®—çš„æ€»é¢„ç®—æˆæœ¬(5).</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221110213836899.png\"\n                      alt=\"image-20221110213836899\"\n                ></p>\n<h3 id=\"æ—¶é—´è½´æ¨¡å‹\"><a href=\"#æ—¶é—´è½´æ¨¡å‹\" class=\"headerlink\" title=\"æ—¶é—´è½´æ¨¡å‹\"></a>æ—¶é—´è½´æ¨¡å‹</h3><p>åœ¨æ—¶é—´çº¿æ¨¡å‹ä¸­ï¼Œæˆ‘ä»¬è€ƒè™‘ä»»åŠ¡åœ¨å¤šä¸ªèµ„æºä¸Šçš„æ€»æ‰§è¡Œæ—¶é—´ï¼Œå¹¶ä¸”æ€»æ‰§è¡Œæ—¶é—´ä¸åº”è¯¥è¶…è¿‡æ ¹æ®æœåŠ¡æ°´å¹³åè®®(SLA)çš„æˆªæ­¢æ—¶é—´ï¼Œä¸€ä¸ªç‰¹å®šä»»åŠ¡ä½¿ç”¨çš„èµ„æºå¯ä»¥è¾¾åˆ°nã€‚</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221110214635032.png\"\n                      alt=\"image-20221110214635032\"\n                ></p>\n<h3 id=\"è°ƒåº¦æ¨¡å‹ä¸­åŸºäºç²’å­ç¾¤ä¼˜åŒ–çš„å¤šæ–¹ä½ä¼˜åŒ–è°ƒåº¦æ¡†æ¶\"><a href=\"#è°ƒåº¦æ¨¡å‹ä¸­åŸºäºç²’å­ç¾¤ä¼˜åŒ–çš„å¤šæ–¹ä½ä¼˜åŒ–è°ƒåº¦æ¡†æ¶\" class=\"headerlink\" title=\"è°ƒåº¦æ¨¡å‹ä¸­åŸºäºç²’å­ç¾¤ä¼˜åŒ–çš„å¤šæ–¹ä½ä¼˜åŒ–è°ƒåº¦æ¡†æ¶\"></a>è°ƒåº¦æ¨¡å‹ä¸­åŸºäºç²’å­ç¾¤ä¼˜åŒ–çš„å¤šæ–¹ä½ä¼˜åŒ–è°ƒåº¦æ¡†æ¶</h3><p>ä¼˜åŒ–è°ƒåº¦é—®é¢˜çš„å‡ ä¸ªå‚æ•°æ˜¯æ€§èƒ½ã€æˆæœ¬ã€æœŸé™å’Œé¢„ç®—æˆæœ¬ã€‚å¯»æ‰¾è¿™ç±»ç»„åˆé—®é¢˜çš„æœ€ä¼˜è§£æ˜¯å›°éš¾çš„ã€‚ç²’å­ç¾¤ä¼˜åŒ–ç®—æ³•åœ¨å¯»æ‰¾è¿™ç§ç»„åˆé—®é¢˜çš„è§£æ–¹é¢å…·æœ‰ä¼˜åŠ¿ã€‚ç²’å­ç¾¤ç®—æ³•å·²è¢«ç”¨äºå„ç§å„ç§è°ƒåº¦é—®é¢˜ï¼Œä¸å…¶ä»–åŸºäºè‡ªç„¶çš„ç®—æ³•ç›¸æ¯”ï¼Œå–å¾—äº†è¾ƒå¥½çš„ç»“æœã€‚ç„¶è€Œï¼Œç²’å­ç¾¤ç®—æ³•æœ‰é™·å…¥å±€éƒ¨æœ€ä¼˜è§£çš„ç¼ºç‚¹ã€‚å› æ­¤ï¼Œæœ¬æ–‡æå‡ºäº†ä¸€ç§å¢å¼ºå‹ç²’å­ç¾¤ä¼˜åŒ–ç®—æ³•ã€‚ä½¿ç”¨åˆé€‚çš„å‡½æ•°ï¼Œå®ƒæä¾›è§£å†³æ–¹æ¡ˆçš„è´¨é‡å’Œå¯¹è¯„ä¼°ç»“æœçš„åé¦ˆã€‚å› æ­¤ï¼Œå®ƒåªæ˜¯é¿å¼€äº†å±€éƒ¨æœ€ä¼˜ã€‚</p>\n<p><img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"https://gwzone.oss-cn-beijing.aliyuncs.com/typora-user-images/image-20221110215653038.png\"\n                      alt=\"image-20221110215653038\"\n                ></p>\n"}],"PostAsset":[],"PostCategory":[{"post_id":"clas9ersd0001dk8f2mgfh7zt","category_id":"clas9ersi0004dk8f8zvc45ko","_id":"clas9erst000jdk8fcbl4efhd"},{"post_id":"clas9ersn000bdk8fbm23dnlq","category_id":"clas9ersi0004dk8f8zvc45ko","_id":"clas9ersv000mdk8f0ltaha37"},{"post_id":"clas9ersq000fdk8f3n0gcqrp","category_id":"clas9ersi0004dk8f8zvc45ko","_id":"clas9ersw000pdk8f15t93g7z"},{"post_id":"clas9ersh0003dk8fc21v3skr","category_id":"clas9ersi0004dk8f8zvc45ko","_id":"clas9ersy000tdk8f4szudwaq"},{"post_id":"clas9erst000hdk8fdqj20ye1","category_id":"clas9ersi0004dk8f8zvc45ko","_id":"clas9ersz000wdk8f3ivm4gum"},{"post_id":"clas9ersu000ldk8fcsat0gd2","category_id":"clas9ersi0004dk8f8zvc45ko","_id":"clas9ert0000zdk8f46z3c0c3"},{"post_id":"clas9ersl0007dk8f75x38ipw","category_id":"clas9ersi0004dk8f8zvc45ko","_id":"clas9ert10013dk8f5w6s8qtm"},{"post_id":"clas9ersy000vdk8fdu39f5zg","category_id":"clas9ersi0004dk8f8zvc45ko","_id":"clas9ert20017dk8f0zcxghd6"},{"post_id":"clas9ert0000ydk8f9qtnbesv","category_id":"clas9ersi0004dk8f8zvc45ko","_id":"clas9ert30019dk8f4mrn8fpa"},{"post_id":"clas9ersv000odk8f5cjtg9rm","category_id":"clas9ersy000udk8fg3vxby0d","_id":"clas9ert4001cdk8f32glbpoj"},{"post_id":"clas9ert20016dk8fc5d6430g","category_id":"clas9ersy000udk8fg3vxby0d","_id":"clas9ert5001gdk8f0zgvcngt"},{"post_id":"clas9ert20018dk8f1nro9v3z","category_id":"clas9ersi0004dk8f8zvc45ko","_id":"clas9ert7001kdk8f8ck0hsc5"},{"post_id":"clas9ert3001bdk8f1rqs5rmc","category_id":"clas9ersi0004dk8f8zvc45ko","_id":"clas9ert7001mdk8fepd5e859"},{"post_id":"clas9ert4001fdk8f4ys751g5","category_id":"clas9ersi0004dk8f8zvc45ko","_id":"clas9ert9001pdk8fcl18dgwu"},{"post_id":"clas9ersx000sdk8f926cfes6","category_id":"clas9ert10012dk8fhzsd17l7","_id":"clas9ert9001rdk8f5s9qa2pt"},{"post_id":"clas9ersx000sdk8f926cfes6","category_id":"clas9ert4001edk8ff9d68faq","_id":"clas9erta001udk8fdnh66qu1"}],"PostTag":[{"post_id":"clas9ersd0001dk8f2mgfh7zt","tag_id":"clas9ersj0005dk8f0w18520j","_id":"clas9ersv000ndk8f94zw67a5"},{"post_id":"clas9ersd0001dk8f2mgfh7zt","tag_id":"clas9erso000ddk8fcdb92y1g","_id":"clas9ersw000qdk8ffbl70tm4"},{"post_id":"clas9ersh0003dk8fc21v3skr","tag_id":"clas9ersj0005dk8f0w18520j","_id":"clas9ert00010dk8f6o1ibr08"},{"post_id":"clas9ersh0003dk8fc21v3skr","tag_id":"clas9erso000ddk8fcdb92y1g","_id":"clas9ert10014dk8fgq3lcmeq"},{"post_id":"clas9ersl0007dk8f75x38ipw","tag_id":"clas9ersj0005dk8f0w18520j","_id":"clas9ert4001ddk8ffgn0fh0t"},{"post_id":"clas9ersl0007dk8f75x38ipw","tag_id":"clas9erso000ddk8fcdb92y1g","_id":"clas9ert5001hdk8f13evgrm8"},{"post_id":"clas9ersn000bdk8fbm23dnlq","tag_id":"clas9ersj0005dk8f0w18520j","_id":"clas9ert7001ldk8ffqsl8ds6"},{"post_id":"clas9ersn000bdk8fbm23dnlq","tag_id":"clas9ert3001adk8f8levdo2a","_id":"clas9ert7001ndk8f1imufe89"},{"post_id":"clas9ersq000fdk8f3n0gcqrp","tag_id":"clas9ersj0005dk8f0w18520j","_id":"clas9ert9001qdk8f20zz4khd"},{"post_id":"clas9ersq000fdk8f3n0gcqrp","tag_id":"clas9ert3001adk8f8levdo2a","_id":"clas9ert9001sdk8f1fc32sge"},{"post_id":"clas9erst000hdk8fdqj20ye1","tag_id":"clas9ersj0005dk8f0w18520j","_id":"clas9erta001vdk8fgmghdfer"},{"post_id":"clas9erst000hdk8fdqj20ye1","tag_id":"clas9ert3001adk8f8levdo2a","_id":"clas9ertb001wdk8f8i74dmh2"},{"post_id":"clas9ersu000ldk8fcsat0gd2","tag_id":"clas9ert9001tdk8f9qhj86xb","_id":"clas9ertb001ydk8f1ftn45ag"},{"post_id":"clas9ersv000odk8f5cjtg9rm","tag_id":"clas9ertb001xdk8faik62mi4","_id":"clas9ertc0020dk8f674k9now"},{"post_id":"clas9ersx000sdk8f926cfes6","tag_id":"clas9ertc001zdk8f1t60dx09","_id":"clas9ertd0022dk8f6ndme4xy"},{"post_id":"clas9ersy000vdk8fdu39f5zg","tag_id":"clas9ertc0021dk8f5l5t59ez","_id":"clas9erte0024dk8f8710dgn4"},{"post_id":"clas9ert0000ydk8f9qtnbesv","tag_id":"clas9ersj0005dk8f0w18520j","_id":"clas9erte0026dk8fevqhab95"},{"post_id":"clas9ert0000ydk8f9qtnbesv","tag_id":"clas9ert3001adk8f8levdo2a","_id":"clas9erte0027dk8f9tq9g226"},{"post_id":"clas9ert20016dk8fc5d6430g","tag_id":"clas9ertb001xdk8faik62mi4","_id":"clas9ertf0029dk8fak8p1vuy"},{"post_id":"clas9ert20018dk8f1nro9v3z","tag_id":"clas9ert9001tdk8f9qhj86xb","_id":"clas9ertg002bdk8fatfccjqx"},{"post_id":"clas9ert3001bdk8f1rqs5rmc","tag_id":"clas9ertf002adk8fbtlb78x3","_id":"clas9ertg002edk8f9q712h1h"},{"post_id":"clas9ert3001bdk8f1rqs5rmc","tag_id":"clas9ertg002cdk8ffdrz3nkg","_id":"clas9ertg002fdk8ffygn2khv"},{"post_id":"clas9ert4001fdk8f4ys751g5","tag_id":"clas9ertg002ddk8fexjzd4jc","_id":"clas9erth002hdk8f4hvwfeqi"},{"post_id":"clas9ert4001fdk8f4ys751g5","tag_id":"clas9ertg002gdk8fflsh2d4e","_id":"clas9erth002idk8f9xxe9frl"}],"Tag":[{"name":"BPMN","_id":"clas9ersj0005dk8f0w18520j"},{"name":"camunda","_id":"clas9erso000ddk8fcdb92y1g"},{"name":"Flowable","_id":"clas9ert3001adk8f8levdo2a"},{"name":"è¾¹ç¼˜è®¡ç®—","_id":"clas9ert9001tdk8f9qhj86xb"},{"name":"Github","_id":"clas9ertb001xdk8faik62mi4"},{"name":"Lambda","_id":"clas9ertc001zdk8f1t60dx09"},{"name":"ROS","_id":"clas9ertc0021dk8f5l5t59ez"},{"name":"äº‘åŸç”Ÿ","_id":"clas9ertf002adk8fbtlb78x3"},{"name":"åä¸ºäº‘","_id":"clas9ertg002cdk8ffdrz3nkg"},{"name":"Docker","_id":"clas9ertg002ddk8fexjzd4jc"},{"name":"ros","_id":"clas9ertg002gdk8fflsh2d4e"}]}}